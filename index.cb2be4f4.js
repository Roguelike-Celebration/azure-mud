!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},i={},o=n.parcelRequire4f3a;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in i){let t=i[e];delete i[e];let n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}).register=function(e,t){i[e]=t},n.parcelRequire4f3a=o);var a=o("6Ti1v"),s=o("3zkYw"),u=(a=o("6Ti1v"),a=o("6Ti1v"),{});t(u,"TimeoutError",(()=>f),(e=>f=e)),t(u,"HttpError",(()=>h),(e=>h=e)),t(u,"AbortError",(()=>d),(e=>d=e));var c,l=(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),h=function(e){function t(t,n){var r=this,i=this.constructor.prototype;return(r=e.call(this,t)||this).statusCode=n,r.__proto__=i,r}return l(t,e),t}(Error),f=function(e){function t(t){void 0===t&&(t="A timeout occurred.");var n=this,r=this.constructor.prototype;return(n=e.call(this,t)||this).__proto__=r,n}return l(t,e),t}(Error),d=function(e){function t(t){void 0===t&&(t="An abort occurred.");var n=this,r=this.constructor.prototype;return(n=e.call(this,t)||this).__proto__=r,n}return l(t,e),t}(Error),p={};t(p,"HttpResponse",(()=>v),(e=>v=e)),t(p,"HttpClient",(()=>g),(e=>g=e));var m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},v=function(e,t,n){this.statusCode=e,this.statusText=t,this.content=n},g=function(){function e(){}return e.prototype.get=function(e,t){return this.send(m({},t,{method:"GET",url:e}))},e.prototype.post=function(e,t){return this.send(m({},t,{method:"POST",url:e}))},e.prototype.delete=function(e,t){return this.send(m({},t,{method:"DELETE",url:e}))},e.prototype.getCookieString=function(e){return""},e}(),y={};t(y,"DefaultHttpClient",(()=>Ke),(e=>Ke=e));var b,w,_={};t(_,"NodeHttpClient",(()=>qe),(e=>qe=e)),(w=b||(b={}))[w.Trace=0]="Trace",w[w.Debug=1]="Debug",w[w.Information=2]="Information",w[w.Warning=3]="Warning",w[w.Error=4]="Error",w[w.Critical=5]="Critical",w[w.None=6]="None";var k={};t(k,"Arg",(()=>T),(e=>T=e)),t(k,"Subject",(()=>j),(e=>j=e)),t(k,"ConsoleLogger",(()=>F),(e=>F=e)),t(k,"getDataDetail",(()=>C),(e=>C=e)),t(k,"sendMessage",(()=>x),(e=>x=e)),t(k,"createLogger",(()=>A),(e=>A=e)),t(k,"isArrayBuffer",(()=>I),(e=>I=e));var S=function(){function e(){}return e.prototype.log=function(e,t){},e.instance=new e,e}(),E=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},M=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},T=function(){function e(){}return e.isRequired=function(e,t){if(null==e)throw new Error("The '"+t+"' argument is required.")},e.isIn=function(e,t,n){if(!(e in t))throw new Error("Unknown "+n+" value: "+e+".")},e}();function C(e,t){var n="";return I(e)?(n="Binary data of length "+e.byteLength,t&&(n+=". Content: '"+function(e){var t=new Uint8Array(e),n="";return t.forEach((function(e){n+="0x"+(e<16?"0":"")+e.toString(16)+" "})),n.substr(0,n.length-1)}(e)+"'")):"string"==typeof e&&(n="String data of length "+e.length,t&&(n+=". Content: '"+e+"'")),n}function I(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function x(e,t,n,r,i,o,a){return E(this,void 0,void 0,(function(){var s,u,c,l,h;return M(this,(function(f){switch(f.label){case 0:return i?[4,i()]:[3,2];case 1:(c=f.sent())&&((s={}).Authorization="Bearer "+c,u=s),f.label=2;case 2:return e.log(b.Trace,"("+t+" transport) sending data. "+C(o,a)+"."),l=I(o)?"arraybuffer":"text",[4,n.post(r,{content:o,headers:u,responseType:l})];case 3:return h=f.sent(),e.log(b.Trace,"("+t+" transport) request complete. Response status: "+h.statusCode+"."),[2]}}))}))}function A(e){return void 0===e?new F(b.Information):null===e?S.instance:e.log?e:new F(e)}var P,O,R,D,N,L,j=function(){function e(){this.observers=[]}return e.prototype.next=function(e){for(var t=0,n=this.observers;t<n.length;t++){n[t].next(e)}},e.prototype.error=function(e){for(var t=0,n=this.observers;t<n.length;t++){var r=n[t];r.error&&r.error(e)}},e.prototype.complete=function(){for(var e=0,t=this.observers;e<t.length;e++){var n=t[e];n.complete&&n.complete()}},e.prototype.subscribe=function(e){return this.observers.push(e),new B(this,e)},e}(),B=function(){function e(e,t){this.subject=e,this.observer=t}return e.prototype.dispose=function(){var e=this.subject.observers.indexOf(this.observer);e>-1&&this.subject.observers.splice(e,1),0===this.subject.observers.length&&this.subject.cancelCallback&&this.subject.cancelCallback().catch((function(e){}))},e}(),F=function(){function e(e){this.minimumLogLevel=e}return e.prototype.log=function(e,t){if(e>=this.minimumLogLevel)switch(e){case b.Critical:case b.Error:console.error("["+(new Date).toISOString()+"] "+b[e]+": "+t);break;case b.Warning:console.warn("["+(new Date).toISOString()+"] "+b[e]+": "+t);break;case b.Information:console.info("["+(new Date).toISOString()+"] "+b[e]+": "+t);break;default:console.log("["+(new Date).toISOString()+"] "+b[e]+": "+t)}},e}(),U={};t(U,"Buffer",(()=>R),(e=>R=e)),t(U,"INSPECT_MAX_BYTES",(()=>P),(e=>P=e)),t(U,"SlowBuffer",(()=>D),(e=>D=e)),t(U,"kMaxLength",(()=>O),(e=>O=e)),N=function(e){var t,n,r=Q(e),i=r[0],o=r[1],a=new H(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),s=0,u=o>0?i-4:i;for(n=0;n<u;n+=4)t=W[e.charCodeAt(n)]<<18|W[e.charCodeAt(n+1)]<<12|W[e.charCodeAt(n+2)]<<6|W[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;2===o&&(t=W[e.charCodeAt(n)]<<2|W[e.charCodeAt(n+1)]>>4,a[s++]=255&t);1===o&&(t=W[e.charCodeAt(n)]<<10|W[e.charCodeAt(n+1)]<<4|W[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t);return a},L=function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(J(e,a,a+o>s?s:a+o));1===r?(t=e[n-1],i.push(V[t>>2]+V[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(V[t>>10]+V[t>>4&63]+V[t<<2&63]+"="));return i.join("")}
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */;for(var q,z,V=[],W=[],H="undefined"!=typeof Uint8Array?Uint8Array:Array,K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G=0,Y=K.length;G<Y;++G)V[G]=K[G],W[K.charCodeAt(G)]=G;function Q(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function J(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(V[(i=r)>>18&63]+V[i>>12&63]+V[i>>6&63]+V[63&i]);return o.join("")}W["-".charCodeAt(0)]=62,W["_".charCodeAt(0)]=63,z=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,d=e[t+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+e[t+h],h+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},q=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(t*u-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+d]=255&a,d+=p,a/=256,c-=8);e[n+d-p]|=128*m};var Z="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;R=ee,D=function(e){+e!=e&&(e=0);return ee.alloc(+e)},P=50;var X=2147483647;function $(e){if(e>X)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,ee.prototype),t}function ee(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return re(e)}return te(e,t,n)}function te(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!ee.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|se(e,t),r=$(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Re(e,Uint8Array)){var t=new Uint8Array(e);return oe(t.buffer,t.byteOffset,t.byteLength)}return ie(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Re(e,ArrayBuffer)||e&&Re(e.buffer,ArrayBuffer))return oe(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(Re(e,SharedArrayBuffer)||e&&Re(e.buffer,SharedArrayBuffer)))return oe(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return ee.from(r,t,n);var i=function(e){if(ee.isBuffer(e)){var t=0|ae(e.length),n=$(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||De(e.length)?$(0):ie(e);if("Buffer"===e.type&&Array.isArray(e.data))return ie(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return ee.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function ne(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function re(e){return ne(e),$(e<0?0:0|ae(e))}function ie(e){for(var t=e.length<0?0:0|ae(e.length),n=$(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function oe(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,ee.prototype),r}function ae(e){if(e>=X)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+X.toString(16)+" bytes");return 0|e}function se(e,t){if(ee.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Re(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Ae(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Pe(e).length;default:if(i)return r?-1:Ae(e).length;t=(""+t).toLowerCase(),i=!0}}function ue(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return ke(this,t,n);case"utf8":case"utf-8":return ye(this,t,n);case"ascii":return we(this,t,n);case"latin1":case"binary":return _e(this,t,n);case"base64":return ge(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Se(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function ce(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function le(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),De(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=ee.from(t,r)),ee.isBuffer(t))return 0===t.length?-1:he(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):he(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function he(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(c(e,o+f)!==c(t,f)){h=!1;break}if(h)return o}return-1}function fe(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(De(s))return a;e[n+a]=s}return a}function de(e,t,n,r){return Oe(Ae(t,e.length-n),e,n,r)}function pe(e,t,n,r){return Oe(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function me(e,t,n,r){return Oe(Pe(t),e,n,r)}function ve(e,t,n,r){return Oe(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function ge(e,t,n){return 0===t&&n===e.length?L(e):L(e.slice(t,n))}function ye(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,c=e[i],l=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(l=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(e){var t=e.length;if(t<=be)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=be));return n}(r)}O=X,ee.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),ee.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(ee.prototype,"parent",{enumerable:!0,get:function(){if(ee.isBuffer(this))return this.buffer}}),Object.defineProperty(ee.prototype,"offset",{enumerable:!0,get:function(){if(ee.isBuffer(this))return this.byteOffset}}),ee.poolSize=8192,ee.from=function(e,t,n){return te(e,t,n)},Object.setPrototypeOf(ee.prototype,Uint8Array.prototype),Object.setPrototypeOf(ee,Uint8Array),ee.alloc=function(e,t,n){return function(e,t,n){return ne(e),e<=0?$(e):void 0!==t?"string"==typeof n?$(e).fill(t,n):$(e).fill(t):$(e)}(e,t,n)},ee.allocUnsafe=function(e){return re(e)},ee.allocUnsafeSlow=function(e){return re(e)},ee.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==ee.prototype},ee.compare=function(e,t){if(Re(e,Uint8Array)&&(e=ee.from(e,e.offset,e.byteLength)),Re(t,Uint8Array)&&(t=ee.from(t,t.offset,t.byteLength)),!ee.isBuffer(e)||!ee.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},ee.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ee.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return ee.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=ee.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(Re(o,Uint8Array))i+o.length>r.length?ee.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!ee.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},ee.byteLength=se,ee.prototype._isBuffer=!0,ee.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)ce(this,t,t+1);return this},ee.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)ce(this,t,t+3),ce(this,t+1,t+2);return this},ee.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)ce(this,t,t+7),ce(this,t+1,t+6),ce(this,t+2,t+5),ce(this,t+3,t+4);return this},ee.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?ye(this,0,e):ue.apply(this,arguments)},ee.prototype.toLocaleString=ee.prototype.toString,ee.prototype.equals=function(e){if(!ee.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===ee.compare(this,e)},ee.prototype.inspect=function(){var e="",t=P;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},Z&&(ee.prototype[Z]=ee.prototype.inspect),ee.prototype.compare=function(e,t,n,r,i){if(Re(e,Uint8Array)&&(e=ee.from(e,e.offset,e.byteLength)),!ee.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),c=e.slice(t,n),l=0;l<s;++l)if(u[l]!==c[l]){o=u[l],a=c[l];break}return o<a?-1:a<o?1:0},ee.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},ee.prototype.indexOf=function(e,t,n){return le(this,e,t,n,!0)},ee.prototype.lastIndexOf=function(e,t,n){return le(this,e,t,n,!1)},ee.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return fe(this,e,t,n);case"utf8":case"utf-8":return de(this,e,t,n);case"ascii":case"latin1":case"binary":return pe(this,e,t,n);case"base64":return me(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},ee.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var be=4096;function we(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function _e(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function ke(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=Le[e[o]];return i}function Se(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function Ee(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Me(e,t,n,r,i,o){if(!ee.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function Te(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Ce(e,t,n,r,i){return t=+t,n>>>=0,i||Te(e,0,n,4),q(e,t,n,r,23,4),n+4}function Ie(e,t,n,r,i){return t=+t,n>>>=0,i||Te(e,0,n,8),q(e,t,n,r,52,8),n+8}ee.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,ee.prototype),r},ee.prototype.readUintLE=ee.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||Ee(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},ee.prototype.readUintBE=ee.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||Ee(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},ee.prototype.readUint8=ee.prototype.readUInt8=function(e,t){return e>>>=0,t||Ee(e,1,this.length),this[e]},ee.prototype.readUint16LE=ee.prototype.readUInt16LE=function(e,t){return e>>>=0,t||Ee(e,2,this.length),this[e]|this[e+1]<<8},ee.prototype.readUint16BE=ee.prototype.readUInt16BE=function(e,t){return e>>>=0,t||Ee(e,2,this.length),this[e]<<8|this[e+1]},ee.prototype.readUint32LE=ee.prototype.readUInt32LE=function(e,t){return e>>>=0,t||Ee(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},ee.prototype.readUint32BE=ee.prototype.readUInt32BE=function(e,t){return e>>>=0,t||Ee(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},ee.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||Ee(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},ee.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||Ee(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},ee.prototype.readInt8=function(e,t){return e>>>=0,t||Ee(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},ee.prototype.readInt16LE=function(e,t){e>>>=0,t||Ee(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},ee.prototype.readInt16BE=function(e,t){e>>>=0,t||Ee(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},ee.prototype.readInt32LE=function(e,t){return e>>>=0,t||Ee(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},ee.prototype.readInt32BE=function(e,t){return e>>>=0,t||Ee(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},ee.prototype.readFloatLE=function(e,t){return e>>>=0,t||Ee(e,4,this.length),z(this,e,!0,23,4)},ee.prototype.readFloatBE=function(e,t){return e>>>=0,t||Ee(e,4,this.length),z(this,e,!1,23,4)},ee.prototype.readDoubleLE=function(e,t){return e>>>=0,t||Ee(e,8,this.length),z(this,e,!0,52,8)},ee.prototype.readDoubleBE=function(e,t){return e>>>=0,t||Ee(e,8,this.length),z(this,e,!1,52,8)},ee.prototype.writeUintLE=ee.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Me(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},ee.prototype.writeUintBE=ee.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Me(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},ee.prototype.writeUint8=ee.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||Me(this,e,t,1,255,0),this[t]=255&e,t+1},ee.prototype.writeUint16LE=ee.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Me(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},ee.prototype.writeUint16BE=ee.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Me(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},ee.prototype.writeUint32LE=ee.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Me(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},ee.prototype.writeUint32BE=ee.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Me(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},ee.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Me(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},ee.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Me(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},ee.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||Me(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},ee.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Me(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},ee.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Me(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},ee.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Me(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},ee.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Me(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},ee.prototype.writeFloatLE=function(e,t,n){return Ce(this,e,t,!0,n)},ee.prototype.writeFloatBE=function(e,t,n){return Ce(this,e,t,!1,n)},ee.prototype.writeDoubleLE=function(e,t,n){return Ie(this,e,t,!0,n)},ee.prototype.writeDoubleBE=function(e,t,n){return Ie(this,e,t,!1,n)},ee.prototype.copy=function(e,t,n,r){if(!ee.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},ee.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!ee.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=ee.isBuffer(e)?e:ee.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var xe=/[^+/0-9A-Za-z-_]/g;function Ae(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Pe(e){return N(function(e){if((e=(e=e.split("=")[0]).trim().replace(xe,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Oe(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Re(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function De(e){return e!=e}var Ne,Le=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}(),je=R,Be=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};if("undefined"==typeof XMLHttpRequest){var Ue="function"==typeof __webpack_require__?__non_webpack_require__:void 0;Ne=Ue("request")}var qe=function(e){function t(t){var n=e.call(this)||this;if(void 0===Ne)throw new Error("The 'request' module could not be loaded.");return n.logger=t,n.cookieJar=Ne.jar(),n.request=Ne.defaults({jar:n.cookieJar}),n}return Be(t,e),t.prototype.send=function(e){var t=this;return new Promise((function(n,r){var i;i=k.isArrayBuffer(e.content)?je.from(e.content):e.content||"";var o=t.request(e.url,{body:i,encoding:"arraybuffer"===e.responseType?null:"utf8",headers:Fe({"X-Requested-With":"XMLHttpRequest"},e.headers),method:e.method,timeout:e.timeout},(function(i,o,a){if(e.abortSignal&&(e.abortSignal.onabort=null),i)return"ETIMEDOUT"===i.code&&(t.logger.log(b.Warning,"Timeout from HTTP request."),r(new u.TimeoutError)),t.logger.log(b.Warning,"Error from HTTP request. "+i),void r(i);o.statusCode>=200&&o.statusCode<300?n(new p.HttpResponse(o.statusCode,o.statusMessage||"",a)):r(new u.HttpError(o.statusMessage||"",o.statusCode||0))}));e.abortSignal&&(e.abortSignal.onabort=function(){o.abort(),r(new u.AbortError)})}))},t.prototype.getCookieString=function(e){return this.cookieJar.getCookieString(e)},t}(p.HttpClient),ze={};t(ze,"XhrHttpClient",(()=>We),(e=>We=e));var Ve=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),We=function(e){function t(t){var n=e.call(this)||this;return n.logger=t,n}return Ve(t,e),t.prototype.send=function(e){var t=this;return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new u.AbortError):e.method?e.url?new Promise((function(n,r){var i=new XMLHttpRequest;i.open(e.method,e.url,!0),i.withCredentials=!0,i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-Type","text/plain;charset=UTF-8");var o=e.headers;o&&Object.keys(o).forEach((function(e){i.setRequestHeader(e,o[e])})),e.responseType&&(i.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=function(){i.abort(),r(new u.AbortError)}),e.timeout&&(i.timeout=e.timeout),i.onload=function(){e.abortSignal&&(e.abortSignal.onabort=null),i.status>=200&&i.status<300?n(new p.HttpResponse(i.status,i.statusText,i.response||i.responseText)):r(new u.HttpError(i.statusText,i.status))},i.onerror=function(){t.logger.log(b.Warning,"Error from HTTP request. "+i.status+": "+i.statusText+"."),r(new u.HttpError(i.statusText,i.status))},i.ontimeout=function(){t.logger.log(b.Warning,"Timeout from HTTP request."),r(new u.TimeoutError)},i.send(e.content||"")})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},t}(p.HttpClient),He=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ke=function(e){function t(t){var n=e.call(this)||this;return"undefined"!=typeof XMLHttpRequest?n.httpClient=new ze.XhrHttpClient(t):n.httpClient=new _.NodeHttpClient(t),n}return He(t,e),t.prototype.send=function(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new u.AbortError):e.method?e.url?this.httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))},t.prototype.getCookieString=function(e){return this.httpClient.getCookieString(e)},t}(p.HttpClient),Ge={};t(Ge,"HubConnection",(()=>st),(e=>st=e));var Ye,Qe,Je=function(){function e(){}return e.write=function(t){return""+t+e.RecordSeparator},e.parse=function(t){if(t[t.length-1]!==e.RecordSeparator)throw new Error("Message is incomplete.");var n=t.split(e.RecordSeparator);return n.pop(),n},e.RecordSeparatorCode=30,e.RecordSeparator=String.fromCharCode(e.RecordSeparatorCode),e}(),Ze=R,Xe=function(){function e(){}return e.prototype.writeHandshakeRequest=function(e){return Je.write(JSON.stringify(e))},e.prototype.parseHandshakeResponse=function(e){var t,n;if(k.isArrayBuffer(e)||void 0!==Ze&&e instanceof Ze){var r=new Uint8Array(e);if(-1===(o=r.indexOf(Je.RecordSeparatorCode)))throw new Error("Message is incomplete.");var i=o+1;t=String.fromCharCode.apply(null,r.slice(0,i)),n=r.byteLength>i?r.slice(i).buffer:null}else{var o,a=e;if(-1===(o=a.indexOf(Je.RecordSeparator)))throw new Error("Message is incomplete.");i=o+1;t=a.substring(0,i),n=a.length>i?a.substring(i):null}var s=Je.parse(t),u=JSON.parse(s[0]);if(u.type)throw new Error("Expected a handshake response from the server.");return[n,u]},e}();(Qe=Ye||(Ye={}))[Qe.Invocation=1]="Invocation",Qe[Qe.StreamItem=2]="StreamItem",Qe[Qe.Completion=3]="Completion",Qe[Qe.StreamInvocation=4]="StreamInvocation",Qe[Qe.CancelInvocation=5]="CancelInvocation",Qe[Qe.Ping=6]="Ping",Qe[Qe.Close=7]="Close";var $e,et,tt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},nt=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o};(et=$e||($e={}))[et.Disconnected=0]="Disconnected",et[et.Connected=1]="Connected";var rt,it,ot,at,st=function(){function e(e,t,n){var r=this;k.Arg.isRequired(e,"connection"),k.Arg.isRequired(t,"logger"),k.Arg.isRequired(n,"protocol"),this.serverTimeoutInMilliseconds=3e4,this.keepAliveIntervalInMilliseconds=15e3,this.logger=t,this.protocol=n,this.connection=e,this.handshakeProtocol=new Xe,this.connection.onreceive=function(e){return r.processIncomingData(e)},this.connection.onclose=function(e){return r.connectionClosed(e)},this.callbacks={},this.methods={},this.closedCallbacks=[],this.id=0,this.receivedHandshakeResponse=!1,this.connectionState=$e.Disconnected,this.cachedPingMessage=this.protocol.writeMessage({type:Ye.Ping})}return e.create=function(t,n,r){return new e(t,n,r)},Object.defineProperty(e.prototype,"state",{get:function(){return this.connectionState},enumerable:!0,configurable:!0}),e.prototype.start=function(){return tt(this,void 0,void 0,(function(){var e,t,n=this;return nt(this,(function(r){switch(r.label){case 0:return e={protocol:this.protocol.name,version:this.protocol.version},this.logger.log(b.Debug,"Starting HubConnection."),this.receivedHandshakeResponse=!1,t=new Promise((function(e,t){n.handshakeResolver=e,n.handshakeRejecter=t})),[4,this.connection.start(this.protocol.transferFormat)];case 1:return r.sent(),this.logger.log(b.Debug,"Sending handshake request."),[4,this.sendMessage(this.handshakeProtocol.writeHandshakeRequest(e))];case 2:return r.sent(),this.logger.log(b.Information,"Using HubProtocol '"+this.protocol.name+"'."),this.cleanupTimeout(),this.resetTimeoutPeriod(),this.resetKeepAliveInterval(),[4,t];case 3:return r.sent(),this.connectionState=$e.Connected,[2]}}))}))},e.prototype.stop=function(){return this.logger.log(b.Debug,"Stopping HubConnection."),this.cleanupTimeout(),this.cleanupPingTimer(),this.connection.stop()},e.prototype.stream=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i,o=this.createStreamInvocation(e,n),a=new k.Subject;a.cancelCallback=function(){var e=t.createCancelInvocation(o.invocationId),n=t.protocol.writeMessage(e);return delete t.callbacks[o.invocationId],i.then((function(){return t.sendMessage(n)}))},this.callbacks[o.invocationId]=function(e,t){t?a.error(t):e&&(e.type===Ye.Completion?e.error?a.error(new Error(e.error)):a.complete():a.next(e.item))};var s=this.protocol.writeMessage(o);return i=this.sendMessage(s).catch((function(e){a.error(e),delete t.callbacks[o.invocationId]})),a},e.prototype.sendMessage=function(e){return this.resetKeepAliveInterval(),this.connection.send(e)},e.prototype.send=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.createInvocation(e,t,!0),i=this.protocol.writeMessage(r);return this.sendMessage(i)},e.prototype.invoke=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.createInvocation(e,n,!1),o=new Promise((function(e,n){t.callbacks[i.invocationId]=function(t,r){r?n(r):t&&(t.type===Ye.Completion?t.error?n(new Error(t.error)):e(t.result):n(new Error("Unexpected message type: "+t.type)))};var r=t.protocol.writeMessage(i);t.sendMessage(r).catch((function(e){n(e),delete t.callbacks[i.invocationId]}))}));return o},e.prototype.on=function(e,t){e&&t&&(e=e.toLowerCase(),this.methods[e]||(this.methods[e]=[]),-1===this.methods[e].indexOf(t)&&this.methods[e].push(t))},e.prototype.off=function(e,t){if(e){e=e.toLowerCase();var n=this.methods[e];if(n)if(t){var r=n.indexOf(t);-1!==r&&(n.splice(r,1),0===n.length&&delete this.methods[e])}else delete this.methods[e]}},e.prototype.onclose=function(e){e&&this.closedCallbacks.push(e)},e.prototype.processIncomingData=function(e){if(this.cleanupTimeout(),this.receivedHandshakeResponse||(e=this.processHandshakeResponse(e),this.receivedHandshakeResponse=!0),e)for(var t=0,n=this.protocol.parseMessages(e,this.logger);t<n.length;t++){var r=n[t];switch(r.type){case Ye.Invocation:this.invokeClientMethod(r);break;case Ye.StreamItem:case Ye.Completion:var i=this.callbacks[r.invocationId];null!=i&&(r.type===Ye.Completion&&delete this.callbacks[r.invocationId],i(r));break;case Ye.Ping:break;case Ye.Close:this.logger.log(b.Information,"Close message received from server."),this.connection.stop(r.error?new Error("Server returned an error on close: "+r.error):void 0);break;default:this.logger.log(b.Warning,"Invalid message type: "+r.type+".")}}this.resetTimeoutPeriod()},e.prototype.processHandshakeResponse=function(e){var t,n,r;try{r=(t=this.handshakeProtocol.parseHandshakeResponse(e))[0],n=t[1]}catch(e){var i="Error parsing handshake response: "+e;this.logger.log(b.Error,i);var o=new Error(i);throw this.connection.stop(o),this.handshakeRejecter(o),o}if(n.error){i="Server returned handshake error: "+n.error;throw this.logger.log(b.Error,i),this.handshakeRejecter(i),this.connection.stop(new Error(i)),new Error(i)}return this.logger.log(b.Debug,"Server handshake complete."),this.handshakeResolver(),r},e.prototype.resetKeepAliveInterval=function(){var e=this;this.cleanupPingTimer(),this.pingServerHandle=setTimeout((function(){return tt(e,void 0,void 0,(function(){return nt(this,(function(e){switch(e.label){case 0:if(this.connectionState!==$e.Connected)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.sendMessage(this.cachedPingMessage)];case 2:return e.sent(),[3,4];case 3:return e.sent(),this.cleanupPingTimer(),[3,4];case 4:return[2]}}))}))}),this.keepAliveIntervalInMilliseconds)},e.prototype.resetTimeoutPeriod=function(){var e=this;this.connection.features&&this.connection.features.inherentKeepAlive||(this.timeoutHandle=setTimeout((function(){return e.serverTimeout()}),this.serverTimeoutInMilliseconds))},e.prototype.serverTimeout=function(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))},e.prototype.invokeClientMethod=function(e){var t=this,n=this.methods[e.target.toLowerCase()];if(n){if(n.forEach((function(n){return n.apply(t,e.arguments)})),e.invocationId){var r="Server requested a response, which is not supported in this version of the client.";this.logger.log(b.Error,r),this.connection.stop(new Error(r))}}else this.logger.log(b.Warning,"No client method with the name '"+e.target+"' found.")},e.prototype.connectionClosed=function(e){var t=this,n=this.callbacks;this.callbacks={},this.connectionState=$e.Disconnected,this.handshakeRejecter&&this.handshakeRejecter(e),Object.keys(n).forEach((function(t){(0,n[t])(null,e||new Error("Invocation canceled due to connection being closed."))})),this.cleanupTimeout(),this.cleanupPingTimer(),this.closedCallbacks.forEach((function(n){return n.apply(t,[e])}))},e.prototype.cleanupPingTimer=function(){this.pingServerHandle&&clearTimeout(this.pingServerHandle)},e.prototype.cleanupTimeout=function(){this.timeoutHandle&&clearTimeout(this.timeoutHandle)},e.prototype.createInvocation=function(e,t,n){if(n)return{arguments:t,target:e,type:Ye.Invocation};var r=this.id;return this.id++,{arguments:t,invocationId:r.toString(),target:e,type:Ye.Invocation}},e.prototype.createStreamInvocation=function(e,t){var n=this.id;return this.id++,{arguments:t,invocationId:n.toString(),target:e,type:Ye.StreamInvocation}},e.prototype.createCancelInvocation=function(e){return{invocationId:e,type:Ye.CancelInvocation}},e}(),ut={};t(ut,"HttpConnection",(()=>Ct),(e=>Ct=e)),(it=rt||(rt={}))[it.None=0]="None",it[it.WebSockets=1]="WebSockets",it[it.ServerSentEvents=2]="ServerSentEvents",it[it.LongPolling=4]="LongPolling",(at=ot||(ot={}))[at.Text=1]="Text",at[at.Binary=2]="Binary";var ct={};t(ct,"LongPollingTransport",(()=>dt),(e=>dt=e));var lt=function(){function e(){this.isAborted=!1,this.onabort=null}return e.prototype.abort=function(){this.isAborted||(this.isAborted=!0,this.onabort&&this.onabort())},Object.defineProperty(e.prototype,"signal",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aborted",{get:function(){return this.isAborted},enumerable:!0,configurable:!0}),e}(),ht=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},ft=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},dt=function(){function e(e,t,n,r){this.httpClient=e,this.accessTokenFactory=t,this.logger=n,this.pollAbort=new lt,this.logMessageContent=r,this.running=!1,this.onreceive=null,this.onclose=null}return Object.defineProperty(e.prototype,"pollAborted",{get:function(){return this.pollAbort.aborted},enumerable:!0,configurable:!0}),e.prototype.connect=function(e,t){return ht(this,void 0,void 0,(function(){var n,r,i,o;return ft(this,(function(a){switch(a.label){case 0:if(k.Arg.isRequired(e,"url"),k.Arg.isRequired(t,"transferFormat"),k.Arg.isIn(t,ot,"transferFormat"),this.url=e,this.logger.log(b.Trace,"(LongPolling transport) Connecting."),t===ot.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");return n={abortSignal:this.pollAbort.signal,headers:{},timeout:1e5},t===ot.Binary&&(n.responseType="arraybuffer"),[4,this.getAccessToken()];case 1:return r=a.sent(),this.updateHeaderToken(n,r),i=e+"&_="+Date.now(),this.logger.log(b.Trace,"(LongPolling transport) polling: "+i+"."),[4,this.httpClient.get(i,n)];case 2:return 200!==(o=a.sent()).statusCode?(this.logger.log(b.Error,"(LongPolling transport) Unexpected response code: "+o.statusCode+"."),this.closeError=new u.HttpError(o.statusText||"",o.statusCode),this.running=!1):this.running=!0,this.receiving=this.poll(this.url,n),[2]}}))}))},e.prototype.getAccessToken=function(){return ht(this,void 0,void 0,(function(){return ft(this,(function(e){switch(e.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:return[2,e.sent()];case 2:return[2,null]}}))}))},e.prototype.updateHeaderToken=function(e,t){e.headers||(e.headers={}),t?e.headers.Authorization="Bearer "+t:e.headers.Authorization&&delete e.headers.Authorization},e.prototype.poll=function(e,t){return ht(this,void 0,void 0,(function(){var n,r,i,o;return ft(this,(function(a){switch(a.label){case 0:a.trys.push([0,,8,9]),a.label=1;case 1:return this.running?[4,this.getAccessToken()]:[3,7];case 2:n=a.sent(),this.updateHeaderToken(t,n),a.label=3;case 3:return a.trys.push([3,5,,6]),r=e+"&_="+Date.now(),this.logger.log(b.Trace,"(LongPolling transport) polling: "+r+"."),[4,this.httpClient.get(r,t)];case 4:return 204===(i=a.sent()).statusCode?(this.logger.log(b.Information,"(LongPolling transport) Poll terminated by server."),this.running=!1):200!==i.statusCode?(this.logger.log(b.Error,"(LongPolling transport) Unexpected response code: "+i.statusCode+"."),this.closeError=new u.HttpError(i.statusText||"",i.statusCode),this.running=!1):i.content?(this.logger.log(b.Trace,"(LongPolling transport) data received. "+k.getDataDetail(i.content,this.logMessageContent)+"."),this.onreceive&&this.onreceive(i.content)):this.logger.log(b.Trace,"(LongPolling transport) Poll timed out, reissuing."),[3,6];case 5:return o=a.sent(),this.running?o instanceof u.TimeoutError?this.logger.log(b.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this.closeError=o,this.running=!1):this.logger.log(b.Trace,"(LongPolling transport) Poll errored after shutdown: "+o.message),[3,6];case 6:return[3,1];case 7:return[3,9];case 8:return this.logger.log(b.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this.raiseOnClose(),[7];case 9:return[2]}}))}))},e.prototype.send=function(e){return ht(this,void 0,void 0,(function(){return ft(this,(function(t){return this.running?[2,k.sendMessage(this.logger,"LongPolling",this.httpClient,this.url,this.accessTokenFactory,e,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]}))}))},e.prototype.stop=function(){return ht(this,void 0,void 0,(function(){var e,t;return ft(this,(function(n){switch(n.label){case 0:this.logger.log(b.Trace,"(LongPolling transport) Stopping polling."),this.running=!1,this.pollAbort.abort(),n.label=1;case 1:return n.trys.push([1,,5,6]),[4,this.receiving];case 2:return n.sent(),this.logger.log(b.Trace,"(LongPolling transport) sending DELETE request to "+this.url+"."),e={headers:{}},[4,this.getAccessToken()];case 3:return t=n.sent(),this.updateHeaderToken(e,t),[4,this.httpClient.delete(this.url,e)];case 4:return n.sent(),this.logger.log(b.Trace,"(LongPolling transport) DELETE request sent."),[3,6];case 5:return this.logger.log(b.Trace,"(LongPolling transport) Stop finished."),this.raiseOnClose(),[7];case 6:return[2]}}))}))},e.prototype.raiseOnClose=function(){if(this.onclose){var e="(LongPolling transport) Firing onclose event.";this.closeError&&(e+=" Error: "+this.closeError),this.logger.log(b.Trace,e),this.onclose(this.closeError)}},e}(),pt={};t(pt,"ServerSentEventsTransport",(()=>gt),(e=>gt=e));var mt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},vt=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},gt=function(){function e(e,t,n,r,i){this.httpClient=e,this.accessTokenFactory=t,this.logger=n,this.logMessageContent=r,this.eventSourceConstructor=i,this.onreceive=null,this.onclose=null}return e.prototype.connect=function(e,t){return mt(this,void 0,void 0,(function(){var n,r=this;return vt(this,(function(i){switch(i.label){case 0:return k.Arg.isRequired(e,"url"),k.Arg.isRequired(t,"transferFormat"),k.Arg.isIn(t,ot,"transferFormat"),this.logger.log(b.Trace,"(SSE transport) Connecting."),this.url=e,this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(n=i.sent())&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(n)),i.label=2;case 2:return[2,new Promise((function(n,i){var o=!1;if(t===ot.Text){var a;if("undefined"!=typeof window)a=new r.eventSourceConstructor(e,{withCredentials:!0});else{var s=r.httpClient.getCookieString(e);a=new r.eventSourceConstructor(e,{withCredentials:!0,headers:{Cookie:s}})}try{a.onmessage=function(e){if(r.onreceive)try{r.logger.log(b.Trace,"(SSE transport) data received. "+k.getDataDetail(e.data,r.logMessageContent)+"."),r.onreceive(e.data)}catch(e){return void r.close(e)}},a.onerror=function(e){var t=new Error(e.data||"Error occurred");o?r.close(t):i(t)},a.onopen=function(){r.logger.log(b.Information,"SSE connected to "+r.url),r.eventSource=a,o=!0,n()}}catch(e){return void i(e)}}else i(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))}))]}}))}))},e.prototype.send=function(e){return mt(this,void 0,void 0,(function(){return vt(this,(function(t){return this.eventSource?[2,k.sendMessage(this.logger,"SSE",this.httpClient,this.url,this.accessTokenFactory,e,this.logMessageContent)]:[2,Promise.reject(new Error("Cannot send until the transport is connected"))]}))}))},e.prototype.stop=function(){return this.close(),Promise.resolve()},e.prototype.close=function(e){this.eventSource&&(this.eventSource.close(),this.eventSource=void 0,this.onclose&&this.onclose(e))},e}(),yt={};t(yt,"WebSocketTransport",(()=>_t),(e=>_t=e));var bt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},wt=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},_t=function(){function e(e,t,n,r,i){this.logger=n,this.accessTokenFactory=t,this.logMessageContent=r,this.webSocketConstructor=i,this.httpClient=e,this.onreceive=null,this.onclose=null}return e.prototype.connect=function(e,t){return bt(this,void 0,void 0,(function(){var n,r=this;return wt(this,(function(i){switch(i.label){case 0:return k.Arg.isRequired(e,"url"),k.Arg.isRequired(t,"transferFormat"),k.Arg.isIn(t,ot,"transferFormat"),this.logger.log(b.Trace,"(WebSockets transport) Connecting."),this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(n=i.sent())&&(e+=(e.indexOf("?")<0?"?":"&")+"access_token="+encodeURIComponent(n)),i.label=2;case 2:return[2,new Promise((function(n,i){var o;e=e.replace(/^http/,"ws");var a=r.httpClient.getCookieString(e);"undefined"==typeof window&&a&&(o=new r.webSocketConstructor(e,void 0,{headers:{Cookie:""+a}})),o||(o=new r.webSocketConstructor(e)),t===ot.Binary&&(o.binaryType="arraybuffer"),o.onopen=function(t){r.logger.log(b.Information,"WebSocket connected to "+e+"."),r.webSocket=o,n()},o.onerror=function(e){var t=null;"undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent&&(t=e.error),i(t)},o.onmessage=function(e){r.logger.log(b.Trace,"(WebSockets transport) data received. "+k.getDataDetail(e.data,r.logMessageContent)+"."),r.onreceive&&r.onreceive(e.data)},o.onclose=function(e){return r.close(e)}}))]}}))}))},e.prototype.send=function(e){return this.webSocket&&this.webSocket.readyState===this.webSocketConstructor.OPEN?(this.logger.log(b.Trace,"(WebSockets transport) sending data. "+k.getDataDetail(e,this.logMessageContent)+"."),this.webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")},e.prototype.stop=function(){return this.webSocket&&(this.webSocket.onclose=function(){},this.webSocket.onmessage=function(){},this.webSocket.onerror=function(){},this.webSocket.close(),this.webSocket=void 0,this.close(void 0)),Promise.resolve()},e.prototype.close=function(e){this.logger.log(b.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!e||!1!==e.wasClean&&1e3===e.code?this.onclose():this.onclose(new Error("WebSocket closed with status code: "+e.code+" ("+e.reason+").")))},e}(),kt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},St=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},Et=null,Mt=null;if("undefined"==typeof window){var Tt="function"==typeof __webpack_require__?__non_webpack_require__:void 0;Et=Tt("ws"),Mt=Tt("eventsource")}var Ct=function(){function e(e,t){void 0===t&&(t={}),this.features={},k.Arg.isRequired(e,"url"),this.logger=k.createLogger(t.logger),this.baseUrl=this.resolveUrl(e),(t=t||{}).logMessageContent=t.logMessageContent||!1;var n="undefined"==typeof window;n||"undefined"==typeof WebSocket||t.WebSocket?n&&!t.WebSocket&&Et&&(t.WebSocket=Et):t.WebSocket=WebSocket,n||"undefined"==typeof EventSource||t.EventSource?n&&!t.EventSource&&void 0!==Mt&&(t.EventSource=Mt):t.EventSource=EventSource,this.httpClient=t.httpClient||new y.DefaultHttpClient(this.logger),this.connectionState=2,this.options=t,this.onreceive=null,this.onclose=null}return e.prototype.start=function(e){return e=e||ot.Binary,k.Arg.isIn(e,ot,"transferFormat"),this.logger.log(b.Debug,"Starting connection with transfer format '"+ot[e]+"'."),2!==this.connectionState?Promise.reject(new Error("Cannot start a connection that is not in the 'Disconnected' state.")):(this.connectionState=0,this.startPromise=this.startInternal(e),this.startPromise)},e.prototype.send=function(e){if(1!==this.connectionState)throw new Error("Cannot send data if the connection is not in the 'Connected' State.");return this.transport.send(e)},e.prototype.stop=function(e){return kt(this,void 0,void 0,(function(){return St(this,(function(t){switch(t.label){case 0:this.connectionState=2,this.stopError=e,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.startPromise];case 2:return t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return this.transport?[4,this.transport.stop()]:[3,6];case 5:t.sent(),this.transport=void 0,t.label=6;case 6:return[2]}}))}))},e.prototype.startInternal=function(e){return kt(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u=this;return St(this,(function(c){switch(c.label){case 0:t=this.baseUrl,this.accessTokenFactory=this.options.accessTokenFactory,c.label=1;case 1:return c.trys.push([1,12,,13]),this.options.skipNegotiation?this.options.transport!==rt.WebSockets?[3,3]:(this.transport=this.constructTransport(rt.WebSockets),[4,this.transport.connect(t,e)]):[3,5];case 2:return c.sent(),[3,4];case 3:throw Error("Negotiation can only be skipped when using the WebSocket transport directly.");case 4:return[3,11];case 5:n=null,r=0,i=function(){var e;return St(this,(function(i){switch(i.label){case 0:return[4,o.getNegotiationResponse(t)];case 1:if(n=i.sent(),2===o.connectionState)return[2,{value:void 0}];if(n.error)throw Error(n.error);if(n.ProtocolVersion)throw Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");return n.url&&(t=n.url),n.accessToken&&(e=n.accessToken,o.accessTokenFactory=function(){return e}),r++,[2]}}))},o=this,c.label=6;case 6:return[5,i()];case 7:if("object"==typeof(a=c.sent()))return[2,a.value];c.label=8;case 8:if(n.url&&r<100)return[3,6];c.label=9;case 9:if(100===r&&n.url)throw Error("Negotiate redirection limit exceeded.");return[4,this.createTransport(t,this.options.transport,n,e)];case 10:c.sent(),c.label=11;case 11:return this.transport instanceof ct.LongPollingTransport&&(this.features.inherentKeepAlive=!0),this.transport.onreceive=this.onreceive,this.transport.onclose=function(e){return u.stopConnection(e)},this.changeState(0,1),[3,13];case 12:throw s=c.sent(),this.logger.log(b.Error,"Failed to start the connection: "+s),this.connectionState=2,this.transport=void 0,s;case 13:return[2]}}))}))},e.prototype.getNegotiationResponse=function(e){return kt(this,void 0,void 0,(function(){var t,n,r,i,o,a;return St(this,(function(s){switch(s.label){case 0:return this.accessTokenFactory?[4,this.accessTokenFactory()]:[3,2];case 1:(r=s.sent())&&((t={}).Authorization="Bearer "+r,n=t),s.label=2;case 2:i=this.resolveNegotiateUrl(e),this.logger.log(b.Debug,"Sending negotiation request: "+i+"."),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,this.httpClient.post(i,{content:"",headers:n})];case 4:if(200!==(o=s.sent()).statusCode)throw Error("Unexpected status code returned from negotiate "+o.statusCode);return[2,JSON.parse(o.content)];case 5:throw a=s.sent(),this.logger.log(b.Error,"Failed to complete negotiation with the server: "+a),a;case 6:return[2]}}))}))},e.prototype.createConnectUrl=function(e,t){return t?e+(-1===e.indexOf("?")?"?":"&")+"id="+t:e},e.prototype.createTransport=function(e,t,n,r){return kt(this,void 0,void 0,(function(){var i,o,a,s,u,c,l;return St(this,(function(h){switch(h.label){case 0:return i=this.createConnectUrl(e,n.connectionId),this.isITransport(t)?(this.logger.log(b.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=t,[4,this.transport.connect(i,r)]):[3,2];case 1:return h.sent(),this.changeState(0,1),[2];case 2:o=n.availableTransports||[],a=0,s=o,h.label=3;case 3:return a<s.length?(u=s[a],this.connectionState=0,"number"!=typeof(c=this.resolveTransport(u,t,r))?[3,8]:(this.transport=this.constructTransport(c),n.connectionId?[3,5]:[4,this.getNegotiationResponse(e)])):[3,9];case 4:n=h.sent(),i=this.createConnectUrl(e,n.connectionId),h.label=5;case 5:return h.trys.push([5,7,,8]),[4,this.transport.connect(i,r)];case 6:return h.sent(),this.changeState(0,1),[2];case 7:return l=h.sent(),this.logger.log(b.Error,"Failed to start the transport '"+rt[c]+"': "+l),this.connectionState=2,n.connectionId=void 0,[3,8];case 8:return a++,[3,3];case 9:throw new Error("Unable to initialize any of the available transports.")}}))}))},e.prototype.constructTransport=function(e){switch(e){case rt.WebSockets:if(!this.options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new yt.WebSocketTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.WebSocket);case rt.ServerSentEvents:if(!this.options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new pt.ServerSentEventsTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1,this.options.EventSource);case rt.LongPolling:return new ct.LongPollingTransport(this.httpClient,this.accessTokenFactory,this.logger,this.options.logMessageContent||!1);default:throw new Error("Unknown transport: "+e+".")}},e.prototype.resolveTransport=function(e,t,n){var r=rt[e.transport];if(null==r)this.logger.log(b.Debug,"Skipping transport '"+e.transport+"' because it is not supported by this client.");else{var i=e.transferFormats.map((function(e){return ot[e]}));if(function(e,t){return!e||0!=(t&e)}(t,r))if(i.indexOf(n)>=0){if((r!==rt.WebSockets||this.options.WebSocket)&&(r!==rt.ServerSentEvents||this.options.EventSource))return this.logger.log(b.Debug,"Selecting transport '"+rt[r]+"'."),r;this.logger.log(b.Debug,"Skipping transport '"+rt[r]+"' because it is not supported in your environment.'")}else this.logger.log(b.Debug,"Skipping transport '"+rt[r]+"' because it does not support the requested transfer format '"+ot[n]+"'.");else this.logger.log(b.Debug,"Skipping transport '"+rt[r]+"' because it was disabled by the client.")}return null},e.prototype.isITransport=function(e){return e&&"object"==typeof e&&"connect"in e},e.prototype.changeState=function(e,t){return this.connectionState===e&&(this.connectionState=t,!0)},e.prototype.stopConnection=function(e){this.transport=void 0,(e=this.stopError||e)?this.logger.log(b.Error,"Connection disconnected with error '"+e+"'."):this.logger.log(b.Information,"Connection disconnected."),this.connectionState=2,this.onclose&&this.onclose(e)},e.prototype.resolveUrl=function(e){if(0===e.lastIndexOf("https://",0)||0===e.lastIndexOf("http://",0))return e;if("undefined"==typeof window||!window||!window.document)throw new Error("Cannot resolve '"+e+"'.");var t=window.document.createElement("a");return t.href=e,this.logger.log(b.Information,"Normalizing '"+e+"' to '"+t.href+"'."),t.href},e.prototype.resolveNegotiateUrl=function(e){var t=e.indexOf("?"),n=e.substring(0,-1===t?e.length:t);return"/"!==n[n.length-1]&&(n+="/"),n+="negotiate",n+=-1===t?"":e.substring(t)},e}();var It=function(){function e(){this.name="json",this.version=1,this.transferFormat=ot.Text}return e.prototype.parseMessages=function(e,t){if("string"!=typeof e)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];null===t&&(t=S.instance);for(var n=[],r=0,i=Je.parse(e);r<i.length;r++){var o=i[r],a=JSON.parse(o);if("number"!=typeof a.type)throw new Error("Invalid payload.");switch(a.type){case Ye.Invocation:this.isInvocationMessage(a);break;case Ye.StreamItem:this.isStreamItemMessage(a);break;case Ye.Completion:this.isCompletionMessage(a);break;case Ye.Ping:case Ye.Close:break;default:t.log(b.Information,"Unknown message type '"+a.type+"' ignored.");continue}n.push(a)}return n},e.prototype.writeMessage=function(e){return Je.write(JSON.stringify(e))},e.prototype.isInvocationMessage=function(e){this.assertNotEmptyString(e.target,"Invalid payload for Invocation message."),void 0!==e.invocationId&&this.assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")},e.prototype.isStreamItemMessage=function(e){if(this.assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),void 0===e.item)throw new Error("Invalid payload for StreamItem message.")},e.prototype.isCompletionMessage=function(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this.assertNotEmptyString(e.error,"Invalid payload for Completion message."),this.assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")},e.prototype.assertNotEmptyString=function(e,t){if("string"!=typeof e||""===e)throw new Error(t)},e}(),xt=function(){function e(){}return e.prototype.configureLogging=function(e){return k.Arg.isRequired(e,"logging"),void 0!==e.log?this.logger=e:this.logger=new k.ConsoleLogger(e),this},e.prototype.withUrl=function(e,t){return k.Arg.isRequired(e,"url"),this.url=e,this.httpConnectionOptions="object"==typeof t?t:{transport:t},this},e.prototype.withHubProtocol=function(e){return k.Arg.isRequired(e,"protocol"),this.protocol=e,this},e.prototype.build=function(){var e=this.httpConnectionOptions||{};if(void 0===e.logger&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");var t=new ut.HttpConnection(this.url,e);return Ge.HubConnection.create(t,this.logger||S.instance,this.protocol||new It)},e}();var At,Pt=new Uint8Array(16);function Ot(){if(!At&&!(At="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return At(Pt)}var Rt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Dt=function(e){return"string"==typeof e&&Rt.test(e)},Nt=[],Lt=0;Lt<256;++Lt)Nt.push((Lt+256).toString(16).substr(1));var jt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Nt[e[t+0]]+Nt[e[t+1]]+Nt[e[t+2]]+Nt[e[t+3]]+"-"+Nt[e[t+4]]+Nt[e[t+5]]+"-"+Nt[e[t+6]]+Nt[e[t+7]]+"-"+Nt[e[t+8]]+Nt[e[t+9]]+"-"+Nt[e[t+10]]+Nt[e[t+11]]+Nt[e[t+12]]+Nt[e[t+13]]+Nt[e[t+14]]+Nt[e[t+15]]).toLowerCase();if(!Dt(n))throw TypeError("Stringified UUID is invalid");return n};var Bt,Ft,Ut=function(e,t,n){var r=(e=e||{}).random||(e.rng||Ot)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return jt(r)};(Ft=Bt||(Bt={})).ReceivedMyProfile="RECEIVED_MY_PROFILE",Ft.ReceivedServerSettings="RECEIVED_SERVER_SETTINGS",Ft.UpdatedCurrentRoom="UPDATED_CURRENT_ROOM",Ft.UpdatedRoomData="UPDATED_ROOM_DATA",Ft.UpdatedPresence="UPDATED_PRESENCE",Ft.PlayerConnected="PLAYER_CONNECTED",Ft.PlayerDisconnected="PLAYER_DISCONNECTED",Ft.ChatMessage="CHAT_MESSAGE",Ft.CaptionMessage="CAPTION_MESSAGE",Ft.ModMessage="MOD_MESSAGE",Ft.DeleteMessage="DELETE_MESSAGE",Ft.Whisper="WHISPER",Ft.Shout="SHOUT",Ft.Emote="EMOTE",Ft.Dance="DANCE",Ft.PlayerEntered="PLAYER_ENTERED",Ft.PlayerLeft="PLAYER_LEFT",Ft.Error="ERROR",Ft.UserMap="USER_MAP",Ft.PlayerBanned="PLAYER_BANNED",Ft.PlayerUnbanned="PLAYER_UNBANNED",Ft.UpdateProfileColor="UPDATE_PROFILE_COLOR",Ft.UpdateFontReward="UPDATE_FONT_REWARD",Ft.StopVideoChat="STOP_VIDEO_CHAT",Ft.StartVideoChat="START_VIDEO_CHAT",Ft.MediaReceivedSpeakingData="MEDIA_RECEIVED_SPEAKING_DATA",Ft.RefreshReact="REFRESH_REACT",Ft.SendMessage="SEND_MESSAGE",Ft.SendCaption="SEND_CAPTION",Ft.SetName="SET_NAME",Ft.StartWhisper="START_WHISPER",Ft.ShowProfile="SHOW_PROFILE",Ft.HideProfile="HIDE_PROFILE",Ft.ShowModal="SHOW_MODAL",Ft.ShowModalWithOptions="SHOW_MODAL_WITH_OPTIONS",Ft.ShowSideMenu="SHOW_SIDE_MENU",Ft.HideSideMenu="HIDE_SIDE_MENU",Ft.DeactivateAutoscroll="DEACTIVATE_AUTOSCROLL",Ft.ActivateAutoscroll="ACTIVATE_AUTOSCROLL",Ft.SetUseSimpleNames="SET_USE_SIMPLE_NAMES",Ft.SetKeepCameraWhenMoving="SET_KEEP_CAMERA_WHEN_MOVING",Ft.SetTextOnlyMode="SET_TEXT_ONLY_MODE",Ft.SetAudioOnlyMode="SET_AUDIO_ONLY_MODE",Ft.SetNumberOfFaces="SET_NUMBER_OF_FACES",Ft.SetCaptionsEnabled="SET_CAPTIONS_ENABLED",Ft.Authenticate="AUTHENTICATE",Ft.IsRegistered="IS_REGISTERED",Ft.BanToggle="BAN_TOGGLE",Ft.ModToggle="MOD_TOGGLE",Ft.LoadMessageArchive="LOAD_MESSAGE_ARCHIVE",Ft.NoteAdd="NOTE_ADD",Ft.NoteRemove="NOTE_REMOVE",Ft.NoteUpdateLikes="NOTE_UPDATE_LIKES",Ft.NoteUpdateRoom="NOTE_UPDATE_ROOM",Ft.HideModalAction="HIDE_MODAL",Ft.SpaceIsClosed="SPACE_IS_CLOSED",Ft.SpaceOpenedOrClosed="SPACE_OPENED_OR_CLOSED",Ft.CommandMessage="COMMAND_MESSAGE";const qt=e=>({type:Bt.ReceivedMyProfile,value:e}),zt=e=>({type:Bt.ReceivedServerSettings,value:e}),Vt=e=>({type:Bt.UpdatedCurrentRoom,value:e}),Wt=e=>({type:Bt.UpdatedPresence,value:e}),Ht=e=>({type:Bt.UserMap,value:e}),Kt=e=>({type:Bt.PlayerBanned,value:e}),Gt=e=>({type:Bt.UpdateProfileColor,color:e}),Yt=e=>({type:Bt.MediaReceivedSpeakingData,value:e}),Qt=()=>({type:Bt.StopVideoChat}),Jt=e=>({type:Bt.Error,value:e}),Zt=()=>({type:Bt.RefreshReact}),Xt=e=>({type:Bt.SendMessage,value:e}),$t=e=>({type:Bt.ShowProfile,value:e}),en=e=>({type:Bt.ShowModal,value:e}),tn=()=>({type:Bt.HideModalAction}),nn=e=>({type:Bt.SetUseSimpleNames,value:e}),rn=e=>({type:Bt.SetKeepCameraWhenMoving,value:e}),on=(e,t)=>({type:Bt.SetTextOnlyMode,textOnlyMode:e,refresh:t}),an=e=>({type:Bt.SetCaptionsEnabled,value:e}),sn=(e,t,n,r)=>({type:Bt.Authenticate,value:{userId:e,name:t,provider:n,mustVerifyEmail:r}}),un=()=>({type:Bt.IsRegistered}),cn=(e,t)=>({type:Bt.NoteUpdateRoom,value:{roomId:e,notes:t}}),ln=e=>({type:Bt.CommandMessage,value:e});const hn=631;var fn,dn;(dn=fn||(fn={}))[dn.None=0]="None",dn[dn.ProfileEdit=1]="ProfileEdit",dn[dn.NoteWall=2]="NoteWall",dn[dn.Settings=3]="Settings",dn[dn.MediaSelector=4]="MediaSelector",dn[dn.CodeOfConduct=5]="CodeOfConduct",dn[dn.Schedule=6]="Schedule",dn[dn.Help=7]="Help",dn[dn.Map=8]="Map",dn[dn.Welcome=9]="Welcome",dn[dn.RoomList=10]="RoomList",dn[dn.FeatureRainbowGate=11]="FeatureRainbowGate",dn[dn.FeatureDullDoor=12]="FeatureDullDoor",dn[dn.ServerSettings=13]="ServerSettings",dn[dn.ClientDeployed=14]="ClientDeployed",dn[dn.FeatureFullRoomIndex=15]="FeatureFullRoomIndex",dn[dn.HappeningNow=16]="HappeningNow",dn[dn.Riddles=17]="Riddles";var pn,mn="https://roguelikecelebration2021.azurewebsites.net",vn={apiKey:"AIzaSyADK2RBXutNz8DfGql4lL-Z57ZH8QYjxnE",authDomain:"roguelike-celebration-prod.firebaseapp.com",projectId:"roguelike-celebration-prod",storageBucket:"roguelike-celebration-prod.appspot.com",messagingSenderId:"110987267204",appId:"1:110987267204:web:9bbee4217e33ab899e86d1"},gn={};pn=gn,Object.defineProperty(pn,"__esModule",{value:!0,configurable:!0}),t(gn,"firebase",(()=>$n)),t(gn,"default",(()=>er));var yn=function(){return(yn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create;Object.create;o.register("1xTls",(function(e,r){t(e.exports,"ErrorFactory",(()=>L),(e=>L=e)),t(e.exports,"createMockUserToken",(()=>b),(e=>b=e)),t(e.exports,"isValidFormat",(()=>V),(e=>V=e)),t(e.exports,"isUWP",(()=>I),(e=>I=e)),t(e.exports,"isReactNative",(()=>M),(e=>M=e)),t(e.exports,"isNode",(()=>k),(e=>k=e)),t(e.exports,"getUA",(()=>w),(e=>w=e)),t(e.exports,"errorPrefix",(()=>te),(e=>te=e)),t(e.exports,"isElectron",(()=>T),(e=>T=e)),t(e.exports,"isBrowser",(()=>S),(e=>S=e)),t(e.exports,"validateIndexedDBOpenable",(()=>O),(e=>O=e)),t(e.exports,"isIndexedDBAvailable",(()=>P),(e=>P=e)),t(e.exports,"base64",(()=>f),(e=>f=e)),t(e.exports,"areCookiesEnabled",(()=>R),(e=>R=e)),t(e.exports,"getGlobal",(()=>D),(e=>D=e)),t(e.exports,"map",(()=>Y),(e=>Y=e)),t(e.exports,"isMobileCordova",(()=>_),(e=>_=e)),t(e.exports,"base64Encode",(()=>d),(e=>d=e)),t(e.exports,"isSafari",(()=>A),(e=>A=e)),t(e.exports,"validateArgCount",(()=>ee),(e=>ee=e)),t(e.exports,"calculateBackoffMillis",(()=>ae),(e=>ae=e)),t(e.exports,"getModularInstance",(()=>se),(e=>se=e)),t(e.exports,"Sha1",(()=>J),(e=>J=e)),t(e.exports,"isEmpty",(()=>G),(e=>G=e)),t(e.exports,"assert",(()=>c),(e=>c=e)),t(e.exports,"stringify",(()=>U),(e=>U=e)),t(e.exports,"createSubscribe",(()=>Z),(e=>Z=e)),t(e.exports,"isIE",(()=>C),(e=>C=e)),t(e.exports,"isAdmin",(()=>W),(e=>W=e)),t(e.exports,"safeGet",(()=>K),(e=>K=e)),t(e.exports,"stringLength",(()=>oe),(e=>oe=e)),t(e.exports,"stringToByteArray",(()=>ie),(e=>ie=e)),t(e.exports,"Deferred",(()=>y),(e=>y=e)),t(e.exports,"jsonEval",(()=>F),(e=>F=e)),t(e.exports,"contains",(()=>H),(e=>H=e)),t(e.exports,"validateContextObject",(()=>re),(e=>re=e)),t(e.exports,"assertionError",(()=>l),(e=>l=e)),t(e.exports,"deepCopy",(()=>v),(e=>v=e)),t(e.exports,"deepExtend",(()=>g),(e=>g=e)),t(e.exports,"querystring",(()=>Q),(e=>Q=e)),t(e.exports,"isNodeSdk",(()=>x),(e=>x=e)),t(e.exports,"isBrowserExtension",(()=>E),(e=>E=e)),t(e.exports,"issuedAtTime",(()=>z),(e=>z=e)),t(e.exports,"validateCallback",(()=>ne),(e=>ne=e)),t(e.exports,"FirebaseError",(()=>FirebaseError),(e=>FirebaseError=e));var i=o("3wnkz"),a=!1,s=!1,u="${JSCORE_VERSION}",c=function(e,t){if(!e)throw l(t)},l=function(e){return new Error("Firebase Database ("+u+") INTERNAL ASSERT FAILED: "+e)},h=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},f={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return(void 0).ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return(void 0).ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(h(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},d=function(e){var t=h(e);return f.encodeByteArray(t,!0)},p=function(e){return d(e).replace(/\./g,"")},m=function(e){try{return f.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function v(e){return g(void 0,e)}function g(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=g(e[n],t[n]));return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var y=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=i.__assign({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[p(JSON.stringify({alg:"none",type:"JWT"})),p(JSON.stringify(a)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function _(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(w())}function k(){try{return"[object process]"===Object.prototype.toString.call(n.process)}catch(e){return!1}}function S(){return"object"==typeof self&&self.self===self}function E(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function M(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function T(){return w().indexOf("Electron/")>=0}function C(){var e=w();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function I(){return w().indexOf("MSAppHost/")>=0}function x(){return!0===a||!0===s}function A(){return!k()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function P(){return"indexedDB"in self&&null!=indexedDB}function O(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))}function R(){return!(!navigator||!navigator.cookieEnabled)}function D(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N=function(e){function t(n,r,i){var o=e.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,L.prototype.create),o}return i.__extends(t,e),t}(Error),L=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?j(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new N(i,s,r);return u},e}();function j(e,t){return e.replace(B,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var B=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(e){return JSON.parse(e)}function U(e){return JSON.stringify(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=F(m(o[0])||""),n=F(m(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}},z=function(e){var t=q(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},V=function(e){var t=q(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},W=function(e){var t=q(e).claims;return"object"==typeof t&&!0===t.admin};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function H(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function K(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function G(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Y(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Q(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var J=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();function Z(e,t){var n=new X(e,t);return n.subscribe.bind(n)}var X=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=$),void 0===r.error&&(r.error=$),void 0===r.complete&&(r.complete=$);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function $(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ee=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function te(e,t){return e+" failed: "+t+" argument "}function ne(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(te(e,t)+"must be a valid function.")}function re(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(te(e,t)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,c(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},oe=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function ae(e,t,n){void 0===t&&(t=1e3),void 0===n&&(n=2);var r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function se(e){return e&&e._delegate?e._delegate:e}})),o.register("3wnkz",(function(e,n){t(e.exports,"__extends",(()=>i)),t(e.exports,"__assign",(()=>o));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create;Object.create}));var bn=o("1xTls");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function wn(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function _n(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}Object.create;function kn(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sn(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function En(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;bn=o("1xTls");var Mn=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),Tn="[DEFAULT]",Cn=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new bn.Deferred;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:Tn})}catch(e){}try{for(var r=kn(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Sn(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(e){}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=Tn),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return wn(this,void 0,void 0,(function(){var e;return _n(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(En(En([],Sn(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),Sn(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=Tn),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=Tn),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var r=e.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var s=kn(this.instancesDeferred.entries()),u=s.next();!u.done;u=s.next()){var c=Sn(u.value,2),l=c[0],h=c[1];o===this.normalizeInstanceIdentifier(l)&&h.resolve(a)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return a},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,r,i=this.onInitCallbacks.get(t);if(i)try{for(var o=kn(i),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(e,t)}catch(e){}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Tn?void 0:t),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(e){}return o||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=Tn),this.component?this.component.multipleInstances?e:Tn:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();var In,xn=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Cn(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function An(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pn,On=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Pn||(Pn={}));var Rn,Dn={debug:Pn.DEBUG,verbose:Pn.VERBOSE,info:Pn.INFO,warn:Pn.WARN,error:Pn.ERROR,silent:Pn.SILENT},Nn=Pn.INFO,Ln=((In={})[Pn.DEBUG]="log",In[Pn.VERBOSE]="log",In[Pn.INFO]="info",In[Pn.WARN]="warn",In[Pn.ERROR]="error",In),jn=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString(),o=Ln[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[o].apply(console,An(["["+i+"]  "+e.name+":"],n))}},Bn=function(){function e(e){this.name=e,this._logLevel=Nn,this._logHandler=jn,this._userLogHandler=null,On.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in Pn))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?Dn[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,An([this,Pn.DEBUG],e)),this._logHandler.apply(this,An([this,Pn.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,An([this,Pn.VERBOSE],e)),this._logHandler.apply(this,An([this,Pn.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,An([this,Pn.INFO],e)),this._logHandler.apply(this,An([this,Pn.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,An([this,Pn.WARN],e)),this._logHandler.apply(this,An([this,Pn.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,An([this,Pn.ERROR],e)),this._logHandler.apply(this,An([this,Pn.ERROR],e))},e}();function Fn(e){On.forEach((function(t){t.setLogLevel(e)}))}var Un,qn=((Rn={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Rn["bad-app-name"]="Illegal App name: '{$appName}",Rn["duplicate-app"]="Firebase App named '{$appName}' already exists",Rn["app-deleted"]="Firebase App named '{$appName}' already deleted",Rn["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Rn["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Rn),zn=new bn.ErrorFactory("app","Firebase",qn),Vn="@firebase/app",Wn="[DEFAULT]",Hn=((Un={})["@firebase/app"]="fire-core",Un["@firebase/analytics"]="fire-analytics",Un["@firebase/app-check"]="fire-app-check",Un["@firebase/auth"]="fire-auth",Un["@firebase/database"]="fire-rtdb",Un["@firebase/functions"]="fire-fn",Un["@firebase/installations"]="fire-iid",Un["@firebase/messaging"]="fire-fcm",Un["@firebase/performance"]="fire-perf",Un["@firebase/remote-config"]="fire-rc",Un["@firebase/storage"]="fire-gcs",Un["@firebase/firestore"]="fire-fst",Un["fire-js"]="fire-js",Un["firebase-wrapper"]="fire-js-all",Un),Kn=new Bn("@firebase/app"),Gn=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=bn.deepCopy(e),this.container=new xn(t.name),this._addComponent(new Mn("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(e){return r._addComponent(e)}))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){var n;void 0===t&&(t=Wn),this.checkDestroyed_();var r=this.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=Wn),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){Kn.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw zn.create("app-deleted",{appName:this.name_})},e}();Gn.prototype.name&&Gn.prototype.options||Gn.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Yn(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=Wn);var a=o.name;if("string"!=typeof a||!a)throw zn.create("bad-app-name",{appName:String(a)});if(bn.contains(t,a))throw zn.create("duplicate-app",{appName:a});var s=new e(n,o,r);return t[a]=s,s},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=Hn[e])&&void 0!==r?r:e;n&&(i+="-"+n);var a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+t+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void Kn.warn(u.join(" "))}o(new Mn(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},setLogLevel:Fn,onLog:function(e,t){if(null!==e&&"function"!=typeof e)throw zn.create("invalid-log-argument");!function(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=Dn[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((function(e){return e})).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:Pn[n].toLowerCase(),message:a,args:i,type:t.name})}},r=0,i=On;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function i(e){if(e=e||Wn,!bn.contains(t,e))throw zn.create("no-app",{appName:e});return t[e]}function o(o){var a=o.name;if(n.has(a))return Kn.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var s=function(e){if(void 0===e&&(e=i()),"function"!=typeof e[a])throw zn.create("invalid-app-argument",{appName:a});return e[a]()};void 0!==o.serviceProps&&bn.deepExtend(s,o.serviceProps),r[a]=s,e.prototype[a]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?e:[])}}for(var u=0,c=Object.keys(t);u<c.length;u++){var l=c[u];t[l]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qn=function e(){var t=Yn(Gn);return t.INTERNAL=yn(yn({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){bn.deepExtend(t,e)},createSubscribe:bn.createSubscribe,ErrorFactory:bn.ErrorFactory,deepExtend:bn.deepExtend}),t}(),Jn=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(bn.isBrowser()&&void 0!==self.firebase){Kn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Zn=self.firebase.SDK_VERSION;Zn&&Zn.indexOf("LITE")>=0&&Kn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Xn=Qn.initializeApp;Qn.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return bn.isNode()&&Kn.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Xn.apply(void 0,e)};var $n=Qn;!function(e,t){e.INTERNAL.registerComponent(new Mn("platform-logger",(function(e){return new Jn(e)}),"PRIVATE")),e.registerVersion(Vn,"0.6.30",t),e.registerVersion("fire-js","")}($n);var er=$n,tr="8.10.0";
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
er.registerVersion("firebase",tr,"app"),er.SDK_VERSION=tr,function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};var r=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n&&n,e];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}return globalThis}(this);function i(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function o(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:i(e)}}!function(e,n){if(n){var i=r;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];a in i||(i[a]={}),i=i[a]}(n=n(o=i[e=e[e.length-1]]))!=o&&null!=n&&t(i,e,{configurable:!0,writable:!0,value:n})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var a=r.setTimeout;n.prototype.c=function(e){a(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.f(e)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(e){return void this.g(e)}"function"==typeof t?this.u(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new n;return t.prototype.s=function(e){var t=this.f();e.Ra(t.resolve,t.reject)},t.prototype.u=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){o(e)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.Ra(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ra=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=o(e),a=r.next();!a.done;a=r.next())i(a.value).Ra(t,n)}))},t.all=function(e){var n=o(e),r=n.next();return r.done?i([]):new t((function(e,t){function o(t){return function(n){a[t]=n,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).Ra(o(a.length-1),t),r=n.next()}while(!r.done)}))},t}));var a=a||{},s=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function l(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&u.test(e)?e:""}function h(){}function f(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function d(e){var t=f(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){return"function"==f(e)}function m(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function v(e){return Object.prototype.hasOwnProperty.call(e,g)&&e[g]||(e[g]=++y)}var g="closure_uid_"+(1e9*Math.random()>>>0),y=0;function b(e,t,n){return e.call.apply(e.bind,arguments)}function w(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function _(e,t,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function k(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var S=Date.now;function E(e,t){function n(){}n.prototype=t.prototype,e.bb=t.prototype,e.prototype=new n,e.prototype.constructor=e}function M(e){return e}function T(e,t,n){this.code=x+e,this.message=t||A[e]||"",this.a=n||null}function C(e){var t=e&&e.code;return t?new T(t.substring(x.length),e.message,e.serverResponse):null}E(T,Error),T.prototype.w=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},T.prototype.toJSON=function(){return this.w()};var I,x="auth/",A={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},P={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function O(e){for(var t in P)if(P[t].id===e)return{firebaseEndpoint:(e=P[t]).Ua,secureTokenEndpoint:e.$a,identityPlatformEndpoint:e.Xa};return null}function R(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function D(e){if(Error.captureStackTrace)Error.captureStackTrace(this,D);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function N(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");D.call(this,n+e[r])}function L(e,t){throw new N("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function j(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function B(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function F(){this.b=this.a=null}I=O("__EID__")?"__EID__":void 0,E(D,Error),D.prototype.name="CustomError",E(N,D),N.prototype.name="AssertionError",j.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var U=new j((function(){return new z}),(function(e){e.reset()}));function q(){var e=bt,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function z(){this.next=this.b=this.a=null}F.prototype.add=function(e,t){var n=U.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},z.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},z.prototype.reset=function(){this.next=this.b=this.a=null};var V=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},W=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};var H=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,o="string"==typeof e?e.split(""):e,a=0;a<n;a++)if(a in o){var s=o[a];t.call(void 0,s,a,e)&&(r[i++]=s)}return r},K=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i="string"==typeof e?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},G=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function Y(e,t){return 0<=V(e,t)}function Q(e,t){var n;return(n=0<=(t=V(e,t)))&&Array.prototype.splice.call(e,t,1),n}function J(e,t){!function(e,t){for(var n="string"==typeof e?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&1==Array.prototype.splice.call(e,r,1).length&&0}))}function Z(e){return Array.prototype.concat.apply([],arguments)}function X(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}var $,ee=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},te=/&/g,ne=/</g,re=/>/g,ie=/"/g,oe=/'/g,ae=/\x00/g,se=/[\x00&<>"']/;function ue(e,t){return-1!=e.indexOf(t)}function ce(e,t){return e<t?-1:e>t?1:0}e:{var le=s.navigator;if(le){var he=le.userAgent;if(he){$=he;break e}}$=""}function fe(e){return ue($,e)}function de(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function pe(e){for(var t in e)return!1;return!0}function me(e){var t,n={};for(t in e)n[t]=e[t];return n}var ve="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<ve.length;o++)n=ve[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ye(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break e}}catch(e){}i=null}if(i&&void 0!==i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(m(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;L("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}function be(e,t){this.a=e===Se&&t||"",this.b=ke}function we(e){return e instanceof be&&e.constructor===be&&e.b===ke?e.a:(L("expected object of type Const, got '"+e+"'"),"type_error:Const")}be.prototype.ta=!0,be.prototype.sa=function(){return this.a},be.prototype.toString=function(){return"Const{"+this.a+"}"};var _e,ke={},Se={};function Ee(){if(void 0===_e){var e=null,t=s.trustedTypes;if(t&&t.createPolicy){try{e=t.createPolicy("goog#html",{createHTML:M,createScript:M,createScriptURL:M})}catch(e){s.console&&s.console.error(e.message)}_e=e}else _e=e}return _e}function Me(e,t){this.a=t===Ae?e:""}function Te(e){return e instanceof Me&&e.constructor===Me?e.a:(L("expected object of type TrustedResourceUrl, got '"+e+"' of type "+f(e)),"type_error:TrustedResourceUrl")}function Ce(e,t){var n=we(e);if(!xe.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(e){var t=Ee();return new Me(e=t?t.createScriptURL(e):e,Ae)}(e=n.replace(Ie,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof be?we(e):encodeURIComponent(String(e))})))}Me.prototype.ta=!0,Me.prototype.sa=function(){return this.a.toString()},Me.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ie=/%{(\w+)}/g,xe=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ae={};function Pe(e,t){this.a=t===Be?e:""}function Oe(e){return e instanceof Pe&&e.constructor===Pe?e.a:(L("expected object of type SafeUrl, got '"+e+"' of type "+f(e)),"type_error:SafeUrl")}Pe.prototype.ta=!0,Pe.prototype.sa=function(){return this.a.toString()},Pe.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Re=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,De=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ne=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Le(e){if(e instanceof Pe)return e;if(e="object"==typeof e&&e.ta?e.sa():String(e),Ne.test(e))e=new Pe(e,Be);else{var t=(e=(e=String(e)).replace(/(%0A|%0D)/g,"")).match(De);e=t&&Re.test(t[1])?new Pe(e,Be):null}return e}function je(e){return e instanceof Pe?e:(e="object"==typeof e&&e.ta?e.sa():String(e),Ne.test(e)||(e="about:invalid#zClosurez"),new Pe(e,Be))}var Be={},Fe=new Pe("about:invalid#zClosurez",Be);function Ue(e,t,n){this.a=n===qe?e:""}Ue.prototype.ta=!0,Ue.prototype.sa=function(){return this.a.toString()},Ue.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var qe={};function ze(e,t,n,r){return e=e instanceof Pe?e:je(e),t=t||s,n=n instanceof be?we(n):n||"",t.open(Oe(e),n,r,void 0)}function Ve(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function We(e){return se.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(te,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(ne,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(re,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(ie,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(oe,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(ae,"&#0;"))),e}function He(e){return He[" "](e),e}He[" "]=h;var Ke,Ge=fe("Opera"),Ye=fe("Trident")||fe("MSIE"),Qe=fe("Edge"),Je=Qe||Ye,Ze=fe("Gecko")&&!(ue($.toLowerCase(),"webkit")&&!fe("Edge"))&&!(fe("Trident")||fe("MSIE"))&&!fe("Edge"),Xe=ue($.toLowerCase(),"webkit")&&!fe("Edge");function $e(){var e=s.document;return e?e.documentMode:void 0}e:{var et="",tt=function(){var e=$;return Ze?/rv:([^\);]+)(\)|;)/.exec(e):Qe?/Edge\/([\d\.]+)/.exec(e):Ye?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Xe?/WebKit\/(\S+)/.exec(e):Ge?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(tt&&(et=tt?tt[1]:""),Ye){var nt=$e();if(null!=nt&&nt>parseFloat(et)){Ke=String(nt);break e}}Ke=et}var rt,it={};function ot(e){return function(e,t){var n=it;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=ee(String(Ke)).split("."),r=ee(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=ce(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ce(0==a[2].length,0==s[2].length)||ce(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}if(s.document&&Ye){var at=$e();rt=at||(parseInt(Ke,10)||void 0)}else rt=void 0;var st=rt;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(e){}var ut=!Ye||9<=Number(st);function ct(e){var t=document;return"string"==typeof e?t.getElementById(e):e}function lt(e,t){de(t,(function(t,n){t&&"object"==typeof t&&t.ta&&(t=t.sa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:dt.hasOwnProperty(n)?e.setAttribute(dt[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var ht,ft,dt={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function pt(e,t,n){function r(n){n&&t.appendChild("string"==typeof n?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||m(o)&&0<o.nodeType)r(o);else{e:{if(o&&"number"==typeof o.length){if(m(o)){var a="function"==typeof o.item||"string"==typeof o.item;break e}if(p(o)){a="function"==typeof o.item;break e}}a=!1}W(a?X(o):o,r)}}}function mt(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function vt(e){s.setTimeout((function(){throw e}),0)}function gt(e,t){ft||function(){if(s.Promise&&s.Promise.resolve){var e=s.Promise.resolve(void 0);ft=function(){e.then(wt)}}else ft=function(){var e=wt;!p(s.setImmediate)||s.Window&&s.Window.prototype&&!fe("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(ht||(ht=function(){var e=s.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!fe("Presto")&&(e=function(){var e=mt(document,"IFRAME");e.style.display="none",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=_((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0!==e&&!fe("Trident")&&!fe("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).Hb;n.Hb=null,e()}},function(e){r.next={Hb:e},r=r.next,t.port2.postMessage(0)}}return function(e){s.setTimeout(e,0)}}()),ht(e)):s.setImmediate(e)}}(),yt||(ft(),yt=!0),bt.add(e,t)}var yt=!1,bt=new F;function wt(){for(var e;e=q();){try{e.a.call(e.b)}catch(e){vt(e)}B(U,e)}yt=!1}function _t(e,t){if(this.a=kt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=h)try{var n=this;e.call(t,(function(e){Nt(n,St,e)}),(function(e){if(!(e instanceof zt))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}Nt(n,Et,e)}))}catch(e){Nt(this,Et,e)}}var kt=0,St=2,Et=3;function Mt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Mt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Tt=new j((function(){return new Mt}),(function(e){e.reset()}));function Ct(e,t,n){var r=Tt.get();return r.g=e,r.b=t,r.f=n,r}function It(e){if(e instanceof _t)return e;var t=new _t(h);return Nt(t,St,e),t}function xt(e){return new _t((function(t,n){n(e)}))}function At(e,t,n){Lt(e,t,n,null)||gt(k(t,e))}function Pt(e){return new _t((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)At(e[o],k(i,o,!0),k(i,o,!1));else t(r)}))}function Ot(e,t){if(e.a==kt)if(e.c){var n=e.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==e&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==kt&&1==r?Ot(n,t):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Bt(n),Ft(n,i,Et,t)))}e.c=null}else Nt(e,Et,t)}function Rt(e,t){e.b||e.a!=St&&e.a!=Et||jt(e),e.f?e.f.next=t:e.b=t,e.f=t}function Dt(e,t,n,r){var i=Ct(null,null,null);return i.a=new _t((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(e){o(e)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof zt?o(t):e(i)}catch(e){o(e)}}:o})),i.a.c=e,Rt(e,i),i.a}function Nt(e,t,n){e.a==kt&&(e===n&&(t=Et,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Lt(n,e.$c,e.ad,e)||(e.i=n,e.a=t,e.c=null,jt(e),t!=Et||n instanceof zt||function(e,t){e.g=!0,gt((function(){e.g&&qt.call(null,t)}))}(e,n)))}function Lt(e,t,n,r){if(e instanceof _t)return Rt(e,Ct(t||h,n||null,r)),!0;if(R(e))return e.then(t,n,r),!0;if(m(e))try{var i=e.then;if(p(i))return function(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}function a(e){s||(s=!0,n.call(i,e))}var s=!1;try{t.call(e,a,o)}catch(e){o(e)}}(e,i,t,n,r),!0}catch(e){return n.call(r,e),!0}return!1}function jt(e){e.h||(e.h=!0,gt(e.gc,e))}function Bt(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function Ft(e,t,n,r){if(n==Et&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,Ut(t,n,r);else try{t.c?t.g.call(t.f):Ut(t,n,r)}catch(e){qt.call(null,e)}B(Tt,t)}function Ut(e,t,n){t==St?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}_t.prototype.then=function(e,t,n){return Dt(this,p(e)?e:null,p(t)?t:null,n)},_t.prototype.$goog_Thenable=!0,(e=_t.prototype).oa=function(e,t){return(e=Ct(e,e,t)).c=!0,Rt(this,e),this},e.o=function(e,t){return Dt(this,null,e,t)},e.cancel=function(e){if(this.a==kt){var t=new zt(e);gt((function(){Ot(this,t)}),this)}},e.$c=function(e){this.a=kt,Nt(this,St,e)},e.ad=function(e){this.a=kt,Nt(this,Et,e)},e.gc=function(){for(var e;e=Bt(this);)Ft(this,e,this.a,this.i);this.h=!1};var qt=vt;function zt(e){D.call(this,e)}function Vt(){0!=Wt&&(Ht[v(this)]=this),this.ya=this.ya,this.pa=this.pa}E(zt,D),zt.prototype.name="cancel";var Wt=0,Ht={};function Kt(e){if(!e.ya&&(e.ya=!0,e.Da(),0!=Wt)){var t=v(e);if(0!=Wt&&e.pa&&0<e.pa.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ht[t]}}Vt.prototype.ya=!1,Vt.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Gt=Object.freeze||function(e){return e},Yt=!Ye||9<=Number(st),Qt=Ye&&!ot("9"),Jt=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{s.addEventListener("test",h,t),s.removeEventListener("test",h,t)}catch(e){}return e}();function Zt(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function Xt(e,t){if(Zt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(Ze){e:{try{He(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:$t[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}Zt.prototype.preventDefault=function(){this.defaultPrevented=!0},E(Xt,Zt);var $t=Gt({2:"touch",3:"pen",4:"mouse"});Xt.prototype.preventDefault=function(){Xt.bb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Qt)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}},Xt.prototype.g=function(){return this.a};var en="closure_listenable_"+(1e6*Math.random()|0),tn=0;function nn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Wa=i,this.key=++tn,this.wa=this.Qa=!1}function rn(e){e.wa=!0,e.listener=null,e.proxy=null,e.src=null,e.Wa=null}function on(e){this.src=e,this.a={},this.b=0}function an(e,t){var n=t.type;n in e.a&&Q(e.a[n],t)&&(rn(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function sn(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.wa&&o.listener==t&&o.capture==!!n&&o.Wa==r)return i}return-1}on.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=sn(e,t,r,i);return-1<a?(t=e[a],n||(t.Qa=!1)):((t=new nn(t,this.src,o,!!r,i)).Qa=n,e.push(t)),t};var un="closure_lm_"+(1e6*Math.random()|0),cn={};function ln(e,t,n,r,i){if(r&&r.once)fn(e,t,n,r,i);else if(Array.isArray(t))for(var o=0;o<t.length;o++)ln(e,t[o],n,r,i);else n=_n(n),e&&e[en]?Sn(e,t,n,m(r)?!!r.capture:!!r,i):hn(e,t,n,!1,r,i)}function hn(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=m(i)?!!i.capture:!!i,s=bn(e);if(s||(e[un]=s=new on(e)),!(n=s.add(t,n,r,a,o)).proxy){if(r=function(){var e=yn,t=Yt?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Jt||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(mn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}0}}function fn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)fn(e,t[o],n,r,i);else n=_n(n),e&&e[en]?En(e,t,n,m(r)?!!r.capture:!!r,i):hn(e,t,n,!0,r,i)}function dn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)dn(e,t[o],n,r,i);else r=m(r)?!!r.capture:!!r,n=_n(n),e&&e[en]?(e=e.v,(t=String(t).toString())in e.a&&(-1<(n=sn(o=e.a[t],n,r,i))&&(rn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=bn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=sn(t,n,r,i)),(n=-1<e?t[e]:null)&&pn(n))}function pn(e){if("number"!=typeof e&&e&&!e.wa){var t=e.src;if(t&&t[en])an(t.v,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(mn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=bn(t))?(an(n,e),0==n.b&&(n.src=null,t[un]=null)):rn(e)}}}function mn(e){return e in cn?cn[e]:cn[e]="on"+e}function vn(e,t,n,r){var i=!0;if((e=bn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.wa&&(o=gn(o,r),i=i&&!1!==o)}return i}function gn(e,t){var n=e.listener,r=e.Wa||e.src;return e.Qa&&pn(e),n.call(r,t)}function yn(e,t){if(e.wa)return!0;if(!Yt){if(!t)e:{t=["window","event"];for(var n=s,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Xt(r=t,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=vn(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=vn(r[i],e,!1,t),n=n&&o}return n}return gn(e,new Xt(t,this))}function bn(e){return(e=e[un])instanceof on?e:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function _n(e){return p(e)?e:(e[wn]||(e[wn]=function(t){return e.handleEvent(t)}),e[wn])}function kn(){Vt.call(this),this.v=new on(this),this.bc=this,this.hb=null}function Sn(e,t,n,r,i){e.v.add(String(t),n,!1,r,i)}function En(e,t,n,r,i){e.v.add(String(t),n,!0,r,i)}function Mn(e,t,n,r){if(!(t=e.v.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&an(e.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Tn(e,t,n){if(p(e))n&&(e=_(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=_(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function Cn(e){var t=null;return new _t((function(n,r){-1==(t=Tn((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).o((function(e){throw s.clearTimeout(t),e}))}function In(e){if(e.X&&"function"==typeof e.X)return e.X();if("string"==typeof e)return e.split("");if(d(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function xn(e){if(e.Y&&"function"==typeof e.Y)return e.Y();if(!e.X||"function"!=typeof e.X){if(d(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function An(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof An)for(n=e.Y(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Pn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];On(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)On(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function On(e,t){return Object.prototype.hasOwnProperty.call(e,t)}E(kn,Vt),kn.prototype[en]=!0,kn.prototype.addEventListener=function(e,t,n,r){ln(this,e,t,n,r)},kn.prototype.removeEventListener=function(e,t,n,r){dn(this,e,t,n,r)},kn.prototype.dispatchEvent=function(e){var t,n=this.hb;if(n)for(t=[];n;n=n.hb)t.push(n);n=this.bc;var r=e.type||e;if("string"==typeof e)e=new Zt(e,n);else if(e instanceof Zt)e.target=e.target||n;else{var i=e;ge(e=new Zt(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=Mn(a,r,!0,e)&&i}if(i=Mn(a=e.b=n,r,!0,e)&&i,i=Mn(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Mn(a=e.b=t[o],r,!1,e)&&i;return i},kn.prototype.Da=function(){if(kn.bb.Da.call(this),this.v){var e,t=this.v;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)rn(n[r]);delete t.a[e],t.b--}}this.hb=null},(e=An.prototype).X=function(){Pn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.Y=function(){return Pn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return On(this.b,e)?this.b[e]:t},e.set=function(e,t){On(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Rn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Dn(e,t){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,e instanceof Dn?(this.i=void 0!==t?t:e.i,Nn(this,e.c),this.l=e.l,this.a=e.a,Ln(this,e.g),this.f=e.f,jn(this,rr(e.b)),this.h=e.h):e&&(n=String(e).match(Rn))?(this.i=!!t,Nn(this,n[1]||"",!0),this.l=zn(n[2]||""),this.a=zn(n[3]||"",!0),Ln(this,n[4]),this.f=zn(n[5]||"",!0),jn(this,n[6]||"",!0),this.h=zn(n[7]||"")):(this.i=!!t,this.b=new Jn(null,this.i))}function Nn(e,t,n){e.c=n?zn(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function Ln(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.g=t}else e.g=null}function jn(e,t,n){t instanceof Jn?(e.b=t,function(e,t){t&&!e.f&&(Zn(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&($n(this,t),nr(this,n,e))}),e)),e.f=t}(e.b,e.i)):(n||(t=Vn(t,Yn)),e.b=new Jn(t,e.i))}function Bn(e,t,n){e.b.set(t,n)}function Fn(e,t){return e.b.get(t)}function Un(e){return e instanceof Dn?new Dn(e):new Dn(e,void 0)}function qn(e,t,n,r){var i=new Dn(null,void 0);return e&&Nn(i,e),t&&(i.a=t),n&&Ln(i,n),r&&(i.f=r),i}function zn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Vn(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Wn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Wn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Dn.prototype.toString=function(){var e=[],t=this.c;t&&e.push(Vn(t,Hn,!0),":");var n=this.a;return(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(Vn(t,Hn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&e.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&e.push("/"),e.push(Vn(n,"/"==n.charAt(0)?Gn:Kn,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.h)&&e.push("#",Vn(n,Qn)),e.join("")},Dn.prototype.resolve=function(e){var t=new Dn(this),n=!!e.c;n?Nn(t,e.c):n=!!e.l,n?t.l=e.l:n=!!e.a,n?t.a=e.a:n=null!=e.g;var r=e.f;if(n)Ln(t,e.g);else if(n=!!e.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=t.f.lastIndexOf("/");-1!=i&&(r=t.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ue(i,"./")||ue(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.f=r:n=""!==e.b.toString(),n?jn(t,rr(e.b)):n=!!e.h,n&&(t.h=e.h),t};var Hn=/[#\/\?@]/g,Kn=/[#\?:]/g,Gn=/[#\?]/g,Yn=/[#\?@]/g,Qn=/#/g;function Jn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Zn(e){e.a||(e.a=new An,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Xn(e){var t=xn(e);if(void 0===t)throw Error("Keys are undefined");var n=new Jn(null,void 0);e=In(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];Array.isArray(o)?nr(n,i,o):n.add(i,o)}return n}function $n(e,t){Zn(e),t=ir(e,t),On(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,On((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Pn(e)))}function tr(e,t){return Zn(e),t=ir(e,t),On(e.a.b,t)}function nr(e,t,n){$n(e,t),0<n.length&&(e.c=null,e.a.set(ir(e,t),X(n)),e.b+=n.length)}function rr(e){var t=new Jn;return t.c=e.c,e.a&&(t.a=new An(e.a),t.b=e.b),t}function ir(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function or(e){var t=[];return sr(new ar,e,t),t.join("")}function ar(){}function sr(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(Array.isArray(t)){var r=t;t=r.length,n.push("[");for(var i="",o=0;o<t;o++)n.push(i),sr(e,r[o],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(r in n.push("{"),i="",t)Object.prototype.hasOwnProperty.call(t,r)&&("function"!=typeof(o=t[r])&&(n.push(i),lr(r,n),n.push(":"),sr(e,o,n),i=","));return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":lr(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}(e=Jn.prototype).add=function(e,t){Zn(this),this.c=null,e=ir(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){Zn(this),this.a.forEach((function(n,r){W(n,(function(n){e.call(t,n,r,this)}),this)}),this)},e.Y=function(){Zn(this);for(var e=this.a.X(),t=this.a.Y(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.X=function(e){Zn(this);var t=[];if("string"==typeof e)tr(this,e)&&(t=Z(t,this.a.get(ir(this,e))));else{e=this.a.X();for(var n=0;n<e.length;n++)t=Z(t,e[n])}return t},e.set=function(e,t){return Zn(this),this.c=null,tr(this,e=ir(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e&&0<(e=this.X(e)).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.Y(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var ur={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},cr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function lr(e,t){t.push('"',e.replace(cr,(function(e){var t=ur[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),ur[e]=t),t})),'"')}function hr(){var e=Pr();return Ye&&!!st&&11==st||/Edge\/\d+/.test(e)}function fr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function dr(e,t){t=t||s.window;var n="about:blank";e&&(n=Oe(Le(e)||Fe)),t.location.href=n}function pr(e,t){var n,r=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<pr(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n);for(n in t)n in e||r.push(n);return r}function mr(e){return!!((e=(e||Pr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function vr(e){e=e||s.window;try{e.close()}catch(e){}}function gr(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Pr().toLowerCase(),r&&(t.target=r,ue(n,"crios/")&&(t.target="_blank")),Ir(Pr())==Tr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof Pe?n:Le(void 0!==n.href?n.href:String(n))||Fe,n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((fe("iPhone")&&!fe("iPod")&&!fe("iPad")||fe("iPad")||fe("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(ye(a=mt(document,"A"),"HTMLAnchorElement"),t=t instanceof Pe?t:je(t),a.href=Oe(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=ze("",r,n,a),e=Oe(t),a&&(Je&&ue(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+We(e)+'">',e=new Ue(e=(r=Ee())?r.createHTML(e):e,null,qe),r=a.document)&&(r.write(function(e){return e instanceof Ue&&e.constructor===Ue?e.a:(L("expected object of type SafeHtml, got '"+e+"' of type "+f(e)),"type_error:SafeHtml")}(e)),r.close())):(a=ze(t,r,n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(e){}return a}var yr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,br=/^[^@]+@[^@]+$/;function wr(){var e=null;return new _t((function(t){"complete"==s.document.readyState?t():(e=function(){t()},fn(window,"load",e))})).o((function(t){throw dn(window,"load",e),t}))}function _r(e){return e=e||Pr(),!("file:"!==Lr()&&"ionic:"!==Lr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function kr(){var e=s.window;try{return!(!e||e==e.top)}catch(e){return!1}}function Sr(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function Er(){return er.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":er.INTERNAL.hasOwnProperty("node")?"Node":Sr()?"Worker":"Browser"}function Mr(){var e=Er();return"ReactNative"===e||"Node"===e}var Tr="Firefox",Cr="Chrome";function Ir(e){var t=e.toLowerCase();return ue(t,"opera/")||ue(t,"opr/")||ue(t,"opios/")?"Opera":ue(t,"iemobile")?"IEMobile":ue(t,"msie")||ue(t,"trident/")?"IE":ue(t,"edge/")?"Edge":ue(t,"firefox/")?Tr:ue(t,"silk/")?"Silk":ue(t,"blackberry")?"Blackberry":ue(t,"webos")?"Webos":!ue(t,"safari/")||ue(t,"chrome/")||ue(t,"crios/")||ue(t,"android")?!ue(t,"chrome/")&&!ue(t,"crios/")||ue(t,"edge/")?ue(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":Cr:"Safari"}var xr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Ar(e,t){t=t||[];var n,r=[],i={};for(n in xr)i[xr[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=Er())?r=Ir(i=Pr()):"Worker"===r&&(r=Ir(i=Pr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function Pr(){return s.navigator&&s.navigator.userAgent||""}function Or(e,t){e=e.split("."),t=t||s;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function Rr(){try{var e=s.localStorage,t=qr();if(e)return e.setItem(t,"1"),e.removeItem(t),!hr()||!!s.indexedDB}catch(e){return Sr()&&!!s.indexedDB}return!1}function Dr(){return(Nr()||"chrome-extension:"===Lr()||_r())&&!Mr()&&Rr()&&!Sr()}function Nr(){return"http:"===Lr()||"https:"===Lr()}function Lr(){return s.location&&s.location.protocol||null}function jr(e){return!mr(e=e||Pr())&&Ir(e)!=Tr}function Br(e){return void 0===e?null:or(e)}function Fr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Ur(e){if(null!==e)return JSON.parse(e)}function qr(e){return e||Math.floor(1e9*Math.random()).toString()}function zr(e){return"Safari"!=Ir(e=e||Pr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function Vr(){var e=s.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Wr(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=Pr(),t=Er(),this.b=mr(e)||"ReactNative"===t}function Hr(){var e=s.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function Kr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(e){}return null}function Gr(){return!(!Or("fireauth.oauthhelper",s)&&!Or("fireauth.iframe",s))}Wr.prototype.get=function(){var e=s.navigator;return!e||"boolean"!=typeof e.onLine||!Nr()&&"chrome-extension:"!==Lr()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Yr,Qr={};function Jr(e){Qr[e]||(Qr[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var Zr={};Object.defineProperty(Zr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Zr,"abcd",{configurable:!0,enumerable:!0,value:2}),Yr=2==Zr.abcd}catch(e){Yr=!1}function Xr(e,t,n){Yr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function $r(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Xr(e,n,t[n])}function ei(e){var t={};return $r(t,e),t}function ti(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Xr(t,n,ti(e[n]));return t}function ni(e){var t=e&&(e[si]?"phone":null);if(!(t&&e&&e[ai]))throw new T("internal-error","Internal assert: invalid MultiFactorInfo object");Xr(this,"uid",e[ai]),Xr(this,"displayName",e[ii]||null);var n=null;e[oi]&&(n=new Date(e[oi]).toUTCString()),Xr(this,"enrollmentTime",n),Xr(this,"factorId",t)}function ri(e){try{var t=new ui(e)}catch(e){t=null}return t}ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ii="displayName",oi="enrolledAt",ai="mfaEnrollmentId",si="phoneInfo";function ui(e){ni.call(this,e),Xr(this,"phoneNumber",e[si])}function ci(e){var t={},n=e[di],r=e[mi],i=e[vi];if(e=ri(e[pi]),!i||i!=hi&&i!=fi&&!n||i==fi&&!r||i==li&&!e)throw Error("Invalid checkActionCode response!");i==fi?(t[yi]=n||null,t[wi]=n||null,t[gi]=r):(t[yi]=r||null,t[wi]=r||null,t[gi]=n||null),t[bi]=e||null,Xr(this,ki,i),Xr(this,_i,ti(t))}E(ui,ni),ui.prototype.w=function(){var e=ui.bb.w.call(this);return e.phoneNumber=this.phoneNumber,e};var li="REVERT_SECOND_FACTOR_ADDITION",hi="EMAIL_SIGNIN",fi="VERIFY_AND_CHANGE_EMAIL",di="email",pi="mfaInfo",mi="newEmail",vi="requestType",gi="email",yi="fromEmail",bi="multiFactorInfo",wi="previousEmail",_i="data",ki="operation";function Si(e){var t=Fn(e=Un(e),Ei)||null,n=Fn(e,Mi)||null,r=Fn(e,Ii)||null;if(r=r&&Ai[r]||null,!t||!n||!r)throw new T("argument-error",Ei+", "+Mi+"and "+Ii+" are required in a valid action code URL.");$r(this,{apiKey:t,operation:r,code:n,continueUrl:Fn(e,Ti)||null,languageCode:Fn(e,Ci)||null,tenantId:Fn(e,xi)||null})}var Ei="apiKey",Mi="oobCode",Ti="continueUrl",Ci="languageCode",Ii="mode",xi="tenantId",Ai={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:li,signIn:hi,verifyAndChangeEmail:fi,verifyEmail:"VERIFY_EMAIL"};function Pi(e){try{return new Si(e)}catch(e){return null}}function Oi(e){var t=e[ji];if(void 0===t)throw new T("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new T("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Ri];if(n&&"object"==typeof n){t=n[Ui];var r=n[Bi];if(n=n[Fi],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new T("argument-error",Bi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new T("argument-error",Fi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new T("argument-error",Ui+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new T("missing-android-pkg-name")}}else if(void 0!==n)throw new T("argument-error",Ri+" property must be a non null object when specified.");if(this.f=null,(t=e[Li])&&"object"==typeof t){if("string"==typeof(t=t[qi])&&t.length)this.f=t;else if(void 0!==t)throw new T("argument-error",qi+" property must be a non empty string when specified.")}else if(void 0!==t)throw new T("argument-error",Li+" property must be a non null object when specified.");if(void 0!==(t=e[Ni])&&"boolean"!=typeof t)throw new T("argument-error",Ni+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[Di])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new T("argument-error",Di+" property must be a non empty string when specified.");this.i=e||null}var Ri="android",Di="dynamicLinkDomain",Ni="handleCodeInApp",Li="iOS",ji="url",Bi="installApp",Fi="minimumVersion",Ui="packageName",qi="bundleId";function zi(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var Vi=null;function Wi(e){var t=[];return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=Vi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!Vi){Vi={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=e.concat(t[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Vi[o]&&(Vi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,(function(e){t.push(e)})),t}function Hi(e){var t=Gi(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.h=e,this.a=t.exp,this.i=t.sub,e=Date.now()/1e3,this.g=t.iat||(e>this.a?this.a:e),this.b=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.c=!!t.is_anonymous||"anonymous"==this.b}function Ki(e){try{return new Hi(e)}catch(e){return null}}function Gi(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{var r=Wi(e);for(e=[],n=t=0;t<r.length;){var i=r[t++];if(128>i)e[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[t++];e[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[t++];var a=r[t++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[t++])-65536;e[n++]=String.fromCharCode(55296+(s>>10)),e[n++]=String.fromCharCode(56320+(1023&s))}else o=r[t++],a=r[t++],e[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(e.join(""))}catch(e){}return null}Hi.prototype.T=function(){return this.f},Hi.prototype.l=function(){return this.c},Hi.prototype.toString=function(){return this.h};var Yi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Qi=["client_id","response_type","scope","redirect_uri","state"],Ji={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Qi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Qi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Qi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Yi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Zi(e){for(var t in Ji)if(Ji[t].fa==e)return Ji[t];return null}function Xi(e){var t={};t["facebook.com"]=ro,t["google.com"]=oo,t["github.com"]=io,t["twitter.com"]=ao;var n=e&&e[eo];try{if(n)return t[n]?new t[n](e):new no(e);if(void 0!==e[$i])return new to(e)}catch(e){}return null}var $i="idToken",eo="providerId";function to(e){var t=e[eo];if(!t&&e[$i]){var n=Ki(e[$i]);n&&n.b&&(t=n.b)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Xr(this,"providerId",t),Xr(this,"isNewUser",n)}function no(e){to.call(this,e),Xr(this,"profile",ti((e=Ur(e.rawUserInfo||"{}"))||{}))}function ro(e){if(no.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function io(e){if(no.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Xr(this,"username",this.profile&&this.profile.login||null)}function oo(e){if(no.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ao(e){if(no.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Xr(this,"username",e.screenName||null)}function so(e){var t=Un(e),n=Fn(t,"link"),r=Fn(Un(n),"link");return t=Fn(t,"deep_link_id"),Fn(Un(t),"link")||t||r||n||e}function uo(e,t){if(!e&&!t)throw new T("internal-error","Internal assert: no raw session string available");if(e&&t)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?co:lo}E(no,to),E(ro,no),E(io,no),E(oo,no),E(ao,no);var co="enroll",lo="signin";function ho(){}function fo(e,t){return e.then((function(e){if(e[ts]){var n=Ki(e[ts]);if(!n||t!=n.i)throw new T("user-mismatch");return e}throw new T("user-mismatch")})).o((function(e){throw e&&e.code&&e.code==x+"user-not-found"?new T("user-mismatch"):e}))}function po(e,t){if(!t)throw new T("internal-error","failed to construct a credential");this.a=t,Xr(this,"providerId",e),Xr(this,"signInMethod",e)}function mo(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function vo(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new po(e.providerId,e.pendingToken)}catch(e){}return null}function go(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Xr(this,"idToken",t.idToken),t.accessToken&&Xr(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Xr(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new T("internal-error","failed to construct a credential");Xr(this,"accessToken",t.oauthToken),Xr(this,"secret",t.oauthTokenSecret)}Xr(this,"providerId",e),Xr(this,"signInMethod",n)}function yo(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Xn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function bo(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new go(e.providerId,t,e.signInMethod)}catch(e){}}return null}function wo(e,t){this.Qc=t||[],$r(this,{providerId:e,isOAuthProvider:!0}),this.Jb={},this.qb=(Zi(e)||{}).Ja||null,this.pb=null}function _o(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');wo.call(this,e,[])}function ko(e){wo.call(this,e,Qi),this.a=[]}function So(){ko.call(this,"facebook.com")}function Eo(e){if(!e)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return m(e)&&(t=e.accessToken),(new So).credential({accessToken:t})}function Mo(){ko.call(this,"github.com")}function To(e){if(!e)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return m(e)&&(t=e.accessToken),(new Mo).credential({accessToken:t})}function Co(){ko.call(this,"google.com"),this.Ca("profile")}function Io(e,t){var n=e;return m(e)&&(n=e.idToken,t=e.accessToken),(new Co).credential({idToken:n,accessToken:t})}function xo(){wo.call(this,"twitter.com",Yi)}function Ao(e,t){var n=e;if(m(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new go("twitter.com",n,"twitter.com")}function Po(e,t,n){this.a=e,this.f=t,Xr(this,"providerId","password"),Xr(this,"signInMethod",n===Ro.EMAIL_LINK_SIGN_IN_METHOD?Ro.EMAIL_LINK_SIGN_IN_METHOD:Ro.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Oo(e){return e&&e.email&&e.password?new Po(e.email,e.password,e.signInMethod):null}function Ro(){$r(this,{providerId:"password",isOAuthProvider:!1})}function Do(e,t){if(!(t=No(t)))throw new T("argument-error","Invalid email link!");return new Po(e,t.code,Ro.EMAIL_LINK_SIGN_IN_METHOD)}function No(e){return(e=Pi(e=so(e)))&&e.operation===hi?e:null}function Lo(e){if(!(e.fb&&e.eb||e.La&&e.ea))throw new T("internal-error");this.a=e,Xr(this,"providerId","phone"),this.fa="phone",Xr(this,"signInMethod","phone")}function jo(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return W(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new Lo(t)}return null}function Bo(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.fb,code:e.a.eb}}function Fo(e){try{this.a=e||er.auth()}catch(e){throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}$r(this,{providerId:"phone",isOAuthProvider:!1})}function Uo(e,t){if(!e)throw new T("missing-verification-id");if(!t)throw new T("missing-verification-code");return new Lo({fb:e,eb:t})}function qo(e){if(e.temporaryProof&&e.phoneNumber)return new Lo({La:e.temporaryProof,ea:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return Io(o,n);case"facebook.com":return Eo(n);case"github.com":return To(n);case"twitter.com":return Ao(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new po(t,a):new go(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new ko(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(e){return null}}function zo(e){if(!e.isOAuthProvider)throw new T("invalid-oauth-provider")}function Vo(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new T("invalid-auth-event");if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}function Wo(e){return(e=e||{}).type?new Vo(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&C(e.error),e.postBody,e.tenantId):null}function Ho(){this.b=null,this.a=[]}uo.prototype.Ha=function(){return this.a?It(this.a):It(this.b)},uo.prototype.w=function(){return this.type==co?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ho.prototype.ka=function(){},ho.prototype.b=function(){},ho.prototype.c=function(){},ho.prototype.w=function(){},po.prototype.ka=function(e){return Ss(e,mo(this))},po.prototype.b=function(e,t){var n=mo(this);return n.idToken=t,Es(e,n)},po.prototype.c=function(e,t){return fo(Ms(e,mo(this)),t)},po.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},go.prototype.ka=function(e){return Ss(e,yo(this))},go.prototype.b=function(e,t){var n=yo(this);return n.idToken=t,Es(e,n)},go.prototype.c=function(e,t){return fo(Ms(e,yo(this)),t)},go.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},wo.prototype.Ka=function(e){return this.Jb=me(e),this},E(_o,wo),E(ko,wo),ko.prototype.Ca=function(e){return Y(this.a,e)||this.a.push(e),this},ko.prototype.Rb=function(){return X(this.a)},ko.prototype.credential=function(e,t){var n;if(!(n=m(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new go(this.providerId,n,this.providerId)},E(So,ko),Xr(So,"PROVIDER_ID","facebook.com"),Xr(So,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),E(Mo,ko),Xr(Mo,"PROVIDER_ID","github.com"),Xr(Mo,"GITHUB_SIGN_IN_METHOD","github.com"),E(Co,ko),Xr(Co,"PROVIDER_ID","google.com"),Xr(Co,"GOOGLE_SIGN_IN_METHOD","google.com"),E(xo,wo),Xr(xo,"PROVIDER_ID","twitter.com"),Xr(xo,"TWITTER_SIGN_IN_METHOD","twitter.com"),Po.prototype.ka=function(e){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?au(e,Rs,{email:this.a,oobCode:this.f}):au(e,tu,{email:this.a,password:this.f})},Po.prototype.b=function(e,t){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?au(e,Ds,{idToken:t,email:this.a,oobCode:this.f}):au(e,Gs,{idToken:t,email:this.a,password:this.f})},Po.prototype.c=function(e,t){return fo(this.ka(e),t)},Po.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},$r(Ro,{PROVIDER_ID:"password"}),$r(Ro,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),$r(Ro,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Lo.prototype.ka=function(e){return e.gb(Bo(this))},Lo.prototype.b=function(e,t){var n=Bo(this);return n.idToken=t,au(e,ru,n)},Lo.prototype.c=function(e,t){var n=Bo(this);return n.operation="REAUTH",fo(e=au(e,iu,n),t)},Lo.prototype.w=function(){var e={providerId:"phone"};return this.a.fb&&(e.verificationId=this.a.fb),this.a.eb&&(e.verificationCode=this.a.eb),this.a.La&&(e.temporaryProof=this.a.La),this.a.ea&&(e.phoneNumber=this.a.ea),e},Fo.prototype.gb=function(e,t){var n=this.a.a;return It(t.verify()).then((function(r){if("string"!=typeof r)throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":var i=m(e)?e.session:null,o=m(e)?e.phoneNumber:e;return(i&&i.type==co?i.Ha().then((function(e){return function(e,t){return au(e,Qs,t).then((function(e){return e.phoneSessionInfo.sessionInfo}))}(n,{idToken:e,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==lo?i.Ha().then((function(t){return function(e,t){return au(e,Js,t).then((function(e){return e.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(e,t){return au(e,Hs,t)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(e){return"function"==typeof t.reset&&t.reset(),e}),(function(e){throw"function"==typeof t.reset&&t.reset(),e}));default:throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},$r(Fo,{PROVIDER_ID:"phone"}),$r(Fo,{PHONE_SIGN_IN_METHOD:"phone"}),Vo.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},Vo.prototype.T=function(){return this.h},Vo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ko,Go=null;function Yo(e){var t="unauthorized-domain",n=void 0,r=Un(e);e=r.a,"chrome-extension"==(r=r.c)?n=Ve("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=Ve("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",T.call(this,t,n)}function Qo(e,t,n){T.call(this,e,n),(e=t||{}).Kb&&Xr(this,"email",e.Kb),e.ea&&Xr(this,"phoneNumber",e.ea),e.credential&&Xr(this,"credential",e.credential),e.$b&&Xr(this,"tenantId",e.$b)}function Jo(e){if(e.code){var t=e.code||"";0==t.indexOf(x)&&(t=t.substring(x.length));var n={credential:qo(e),$b:e.tenantId};if(e.email)n.Kb=e.email;else if(e.phoneNumber)n.ea=e.phoneNumber;else if(!n.credential)return new T(t,e.message||void 0);return new Qo(t,n,e.message)}return null}function Zo(){}function Xo(e){return e.c||(e.c=e.b())}function $o(){}function ea(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function ta(){}function na(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.qc,this),this.a.onerror=_(this.Tb,this),this.a.onprogress=_(this.rc,this),this.a.ontimeout=_(this.vc,this)}function ra(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function ia(e,t,n){this.reset(e,t,n,void 0,void 0)}E(Yo,T),E(Qo,T),Qo.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.w();return t&&ge(e,t),e},Qo.prototype.toJSON=function(){return this.w()},Zo.prototype.c=null,E($o,Zo),$o.prototype.a=function(){var e=ea(this);return e?new ActiveXObject(e):new XMLHttpRequest},$o.prototype.b=function(){var e={};return ea(this)&&(e[0]=!0,e[1]=!0),e},Ko=new $o,E(ta,Zo),ta.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new na;throw Error("Unsupported browser")},ta.prototype.b=function(){return{}},(e=na.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ra(this,4)},e.Tb=function(){this.status=500,this.response=this.responseText="",ra(this,4)},e.vc=function(){this.Tb()},e.rc=function(){this.status=200,ra(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ia.prototype.a=null;function oa(e){this.f=e,this.b=this.c=this.a=null}function aa(e,t){this.name=e,this.value=t}ia.prototype.reset=function(e,t,n,r,i){"number"==typeof i||0,r||S(),delete this.a},aa.prototype.toString=function(){return this.name};var sa=new aa("SEVERE",1e3),ua=new aa("WARNING",900),ca=new aa("CONFIG",700),la=new aa("FINE",500);function ha(e){return e.c?e.c:e.a?ha(e.a):(L("Root logger has no level set."),null)}oa.prototype.log=function(e,t,n){if(e.value>=ha(this).value)for(p(t)&&(t=t()),e=new ia(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var fa={},da=null;function pa(e){var t;if(da||(da=new oa(""),fa[""]=da,da.c=ca),!(t=fa[e])){t=new oa(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=pa(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,fa[e]=t}return t}function ma(e,t){e&&e.log(la,t,void 0)}function va(e){this.f=e}function ga(e){kn.call(this),this.u=e,this.h=void 0,this.readyState=ya,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=pa("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}E(va,Zo),va.prototype.a=function(){return new ga(this.f)},va.prototype.b=function(e){return function(){return e}}({}),E(ga,kn);var ya=0;function ba(e){e.c.read().then(e.pc.bind(e)).catch(e.Va.bind(e))}function wa(e){e.readyState=4,e.g=null,e.c=null,e.m=null,_a(e)}function _a(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function ka(e){kn.call(this),this.headers=new An,this.D=e||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=Sa,this.u=this.S=!1}(e=ga.prototype).open=function(e,t){if(this.readyState!=ya)throw this.abort(),Error("Error reopening a connection");this.s=e,this.f=t,this.readyState=1,_a(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.f,t)).then(this.uc.bind(this),this.Va.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,wa(this)),this.readyState=ya},e.uc=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,_a(this)),this.a&&(this.readyState=3,_a(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==s.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.m=new TextDecoder,ba(this)):e.text().then(this.tc.bind(this),this.Va.bind(this)))))},e.pc=function(e){if(this.a){var t=this.m.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?wa(this):_a(this),3==this.readyState&&ba(this)}},e.tc=function(e){this.a&&(this.response=this.responseText=e,wa(this))},e.sc=function(e){this.a&&(this.response=e,wa(this))},e.Va=function(e){var t=this.i;t&&t.log(ua,"Failed to fetch url "+this.f,e instanceof Error?e:Error(e)),this.a&&wa(this)},e.setRequestHeader=function(e,t){this.l.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.i)&&e.log(ua,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.i;return e&&e.log(ua,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ga.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(e){this.h=e?"include":"same-origin"}}),E(ka,kn);var Sa="";ka.prototype.b=pa("goog.net.XhrIo");var Ea=/^https?$/i,Ma=["POST","PUT"];function Ta(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.J=!1,e.c=!0,e.a=e.D?e.D.a():Ko.a(),e.C=e.D?Xo(e.D):Xo(Ko),e.a.onreadystatechange=_(e.Wb,e);try{ma(e.b,Na(e,"Opening Xhr")),e.N=!0,e.a.open(n,String(t),!0),e.N=!1}catch(t){return ma(e.b,Na(e,"Error opening Xhr: "+t.message)),void Ia(e,t)}t=r||"";var o=new An(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(d(e)||"string"==typeof e)W(e,t,void 0);else for(var n=xn(e),r=In(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,(function(e,t){o.set(t,e)})),i=function(e){e:{for(var t=Ca,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(o.Y()),r=s.FormData&&t instanceof s.FormData,!Y(Ma,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{Oa(e),0<e.g&&(e.u=function(e){return Ye&&ot(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(e.a),ma(e.b,Na(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=_(e.Ma,e)):e.s=Tn(e.Ma,e.g,e)),ma(e.b,Na(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){ma(e.b,Na(e,"Send error: "+t.message)),Ia(e,t)}}function Ca(e){return"content-type"==e.toLowerCase()}function Ia(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,xa(e),Pa(e)}function xa(e){e.J||(e.J=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Aa(e){if(e.c&&void 0!==a)if(e.C[1]&&4==Ra(e)&&2==Da(e))ma(e.b,Na(e,"Local request error detected and ignored"));else if(e.i&&4==Ra(e))Tn(e.Wb,0,e);else if(e.dispatchEvent("readystatechange"),4==Ra(e)){ma(e.b,Na(e,"Request complete")),e.c=!1;try{var t,n=Da(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(Rn)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!Ea.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var c=2<Ra(e)?e.a.statusText:""}catch(t){ma(e.b,"Can not get status: "+t.message),c=""}e.h=c+" ["+Da(e)+"]",xa(e)}}finally{Pa(e)}}}function Pa(e,t){if(e.a){Oa(e);var n=e.a,r=e.C[0]?h:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(sa,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function Oa(e){e.a&&e.u&&(e.a.ontimeout=null),e.s&&(s.clearTimeout(e.s),e.s=null)}function Ra(e){return e.a?e.a.readyState:0}function Da(e){try{return 2<Ra(e)?e.a.status:-1}catch(e){return-1}}function Na(e,t){return t+" ["+e.P+" "+e.l+" "+Da(e)+"]"}function La(e){var t=Ga;this.g=[],this.u=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function ja(e,t,n){e.a=!0,e.c=n,e.f=!t,qa(e)}function Ba(e){if(e.a){if(!e.v)throw new za(e);e.v=!1}}function Fa(e,t,n,r){e.g.push([t,n,r]),e.a&&qa(e)}function Ua(e){return G(e.g,(function(e){return p(e[1])}))}function qa(e){if(e.h&&e.a&&Ua(e)){var t=e.h,n=Ha[t];n&&(s.clearTimeout(n.a),delete Ha[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var u=o.call(i||e.s,t);void 0!==u&&(e.f=e.f&&(u==t||u instanceof Error),e.c=t=u),(R(t)||"function"==typeof s.Promise&&t instanceof s.Promise)&&(r=!0,e.i=!0)}catch(r){t=r,e.f=!0,Ua(e)||(n=!0)}}e.c=t,r&&(u=_(e.m,e,!0),r=_(e.m,e,!1),t instanceof La?(Fa(t,u,r),t.C=!0):t.then(u,r)),n&&(t=new Wa(t),Ha[t.a]=t,e.h=t.a)}function za(){D.call(this)}function Va(){D.call(this)}function Wa(e){this.a=s.setTimeout(_(this.c,this),0),this.b=e}(e=ka.prototype).Ma=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ma(this.b,Na(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(ma(this.b,Na(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Pa(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Pa(this,!0)),ka.bb.Da.call(this)},e.Wb=function(){this.ya||(this.N||this.i||this.f?Aa(this):this.Jc())},e.Jc=function(){Aa(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Sa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(sa,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return ma(this.b,"Can not get response: "+e.message),null}},La.prototype.cancel=function(e){if(this.a)this.c instanceof La&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(e=new Va(this),Ba(this),ja(this,!1,e))}},La.prototype.m=function(e,t){this.i=!1,ja(this,e,t)},La.prototype.then=function(e,t,n){var r,i,o=new _t((function(e,t){r=e,i=t}));return Fa(this,r,(function(e){e instanceof Va?o.cancel():i(e)})),o.then(e,t,n)},La.prototype.$goog_Thenable=!0,E(za,D),za.prototype.message="Deferred has already fired",za.prototype.name="AlreadyCalledError",E(Va,D),Va.prototype.message="Deferred was canceled",Va.prototype.name="CanceledError",Wa.prototype.c=function(){throw delete Ha[this.a],this.b};var Ha={};function Ka(e){var t={},n=t.document||document,r=Te(e).toString(),i=mt(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new La(o),u=null,h=null!=t.timeout?t.timeout:5e3;return 0<h&&(u=window.setTimeout((function(){Ya(i,!0);var e=new Za(Ja,"Timeout reached for loading script "+r);Ba(a),ja(a,!1,e)}),h),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ya(i,t.xd||!1,u),Ba(a),ja(a,!0,null))},i.onerror=function(){Ya(i,!0,u);var e=new Za(Qa,"Error while loading script "+r);Ba(a),ja(a,!1,e)},ge(o=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),lt(i,o),function(e,t){ye(e,"HTMLScriptElement"),e.src=Te(t),(t=e.ownerDocument&&e.ownerDocument.defaultView)&&t!=s?t=l(t.document):(null===c&&(c=l(s.document)),t=c),t&&e.setAttribute("nonce",t)}(i,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),a}function Ga(){if(this&&this.Xb){var e=this.Xb;e&&"SCRIPT"==e.tagName&&Ya(e,!0,this.Ma)}}function Ya(e,t,n){null!=n&&s.clearTimeout(n),e.onload=h,e.onerror=h,e.onreadystatechange=h,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Qa=0,Ja=1;function Za(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),D.call(this,n),this.code=e}function Xa(e){this.f=e}function $a(e,t,n){if(this.c=e,e=t||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||ns,this.g=me(e.secureTokenHeaders||rs),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||is,this.a=me(e.firebaseHeaders||os),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Er(),!(n=s.XMLHttpRequest||n&&er.INTERNAL.node&&er.INTERNAL.node.XMLHttpRequest)&&!Sr())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Sr()?this.f=new va(self):Mr()?this.f=new Xa(n):this.f=new ta,this.b=null}E(Za,D),E(Xa,Zo),Xa.prototype.a=function(){return new this.f},Xa.prototype.b=function(){return{}};var es,ts="idToken",ns=new Wr(3e4,6e4),rs={"Content-Type":"application/x-www-form-urlencoded"},is=new Wr(3e4,6e4),os={"Content-Type":"application/json"};function as(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function ss(e,t){t&&(e.l=us("https://securetoken.googleapis.com/v1/token",t),e.h=us("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",t),e.i=us("https://identitytoolkit.googleapis.com/v2/",t))}function us(e,t){return e=Un(e),t=Un(t.url),e.f=e.a+e.f,Nn(e,t.c),e.a=t.a,Ln(e,t.g),e.toString()}function cs(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function ls(e,t,n,r,i,o,a){(function(){var e=Pr();return!((e=Ir(e)!=Cr?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e||Ye&&st&&!(9<st))})()||Sr()?e=_(e.u,e):(es||(es=new _t((function(e,t){!function(e,t){if(((window.gapi||{}).client||{}).request)e();else{s[fs]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){Fa(e,null,t,void 0)}(Ka(Ce(hs,{onload:fs})),(function(){t(Error("CORS_UNSUPPORTED"))}))}}(e,t)}))),e=_(e.s,e)),e(t,n,r,i,o,a)}$a.prototype.T=function(){return this.b},$a.prototype.u=function(e,t,n,r,i,o){if(Sr()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new ka(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}Sn(a,"complete",(function(){u&&clearTimeout(u);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return ma(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}t&&t(e)})),En(a,"ready",(function(){u&&clearTimeout(u),Kt(this)})),En(a,"timeout",(function(){u&&clearTimeout(u),Kt(this),t&&t(null)})),Ta(a,e,n,r,i)};var hs=new be(Se,"https://apis.google.com/js/client.js?onload=%{onload}"),fs="__fcb"+Math.floor(1e6*Math.random()).toString();function ds(e,t,n,r,i,o,a){var s=Un(t+n);Bn(s,"key",e.c),a&&Bn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Bn(s,c,i[c]);return new _t((function(t,n){ls(e,s.toString(),(function(e){e?e.error?n(uu(e,o||{})):t(e):n(new T("network-request-failed"))}),r,u?void 0:or(Fr(i)),e.a,e.v.get())}))}function ps(e){if("string"!=typeof(e=e.email)||!br.test(e))throw new T("invalid-email")}function ms(e){"email"in e&&ps(e)}function vs(e){if(!e[ts]){if(e.mfaPendingCredential)throw new T("multi-factor-auth-required",null,me(e));throw new T("internal-error")}}function gs(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new T("internal-error")}else{if(!e.sessionInfo)throw new T("missing-verification-id");if(!e.code)throw new T("missing-verification-code")}}$a.prototype.s=function(e,t,n,r,i){var o=this;es.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).o((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},$a.prototype.Ab=function(){return au(this,Ys,{})},$a.prototype.Cb=function(e,t){return au(this,Ks,{idToken:e,email:t})},$a.prototype.Db=function(e,t){return au(this,Gs,{idToken:e,password:t})};var ys={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function bs(e){if(!e.phoneVerificationInfo)throw new T("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new T("missing-verification-code")}function ws(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new T("internal-error")}function _s(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(tr(e=new Jn(e.postBody),"nonce")&&(t.nonce=e.get("nonce")))),t}function ks(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Jo(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Jo(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Jo(e)):e.errorMessage&&(t=su(e.errorMessage)),t)throw t;vs(e)}function Ss(e,t){return t.returnIdpCredential=!0,au(e,Zs,t)}function Es(e,t){return t.returnIdpCredential=!0,au(e,$s,t)}function Ms(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,au(e,Xs,t)}function Ts(e){if(!e.oobCode)throw new T("invalid-action-code")}(e=$a.prototype).Eb=function(e,t){var n={idToken:e},r=[];return de(ys,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),au(this,Ks,n)},e.wb=function(e,t){return ge(e={requestType:"PASSWORD_RESET",email:e},t),au(this,qs,e)},e.xb=function(e,t){return ge(e={requestType:"EMAIL_SIGNIN",email:e},t),au(this,Bs,e)},e.vb=function(e,t){return ge(e={requestType:"VERIFY_EMAIL",idToken:e},t),au(this,Fs,e)},e.Fb=function(e,t,n){return ge(e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},n),au(this,Us,e)},e.gb=function(e){return au(this,nu,e)},e.ob=function(e,t){return au(this,Ws,{oobCode:e,newPassword:t})},e.Sa=function(e){return au(this,Is,{oobCode:e})},e.kb=function(e){return au(this,Cs,{oobCode:e})};var Cs={endpoint:"setAccountInfo",A:Ts,Z:"email",B:!0},Is={endpoint:"resetPassword",A:Ts,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new T("internal-error")},B:!0},xs={endpoint:"signupNewUser",A:function(e){if(ps(e),!e.password)throw new T("weak-password")},G:vs,V:!0,B:!0},As={endpoint:"createAuthUri",B:!0},Ps={endpoint:"deleteAccount",O:["idToken"]},Os={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(e){if(!Array.isArray(e.deleteProvider))throw new T("internal-error")}},Rs={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ps,G:vs,V:!0,B:!0},Ds={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ps,G:vs,V:!0},Ns={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:bs,G:vs,B:!0,Na:!0},Ls={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:bs,G:vs,B:!0,Na:!0},js={endpoint:"getAccountInfo"},Bs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new T("internal-error");ps(e)},Z:"email",B:!0},Fs={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new T("internal-error")},Z:"email",B:!0},Us={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new T("internal-error")},Z:"email",B:!0},qs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new T("internal-error");ps(e)},Z:"email",B:!0},zs={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Vs={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new T("internal-error")}},Ws={endpoint:"resetPassword",A:Ts,Z:"email",B:!0},Hs={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ks={endpoint:"setAccountInfo",O:["idToken"],A:ms,V:!0},Gs={endpoint:"setAccountInfo",O:["idToken"],A:function(e){if(ms(e),!e.password)throw new T("weak-password")},G:vs,V:!0},Ys={endpoint:"signupNewUser",G:vs,V:!0,B:!0},Qs={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new T("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Js={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Zs={endpoint:"verifyAssertion",A:ws,Za:_s,G:ks,V:!0,B:!0},Xs={endpoint:"verifyAssertion",A:ws,Za:_s,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new T("user-not-found");if(e.errorMessage)throw su(e.errorMessage);vs(e)},V:!0,B:!0},$s={endpoint:"verifyAssertion",A:function(e){if(ws(e),!e.idToken)throw new T("internal-error")},Za:_s,G:ks,V:!0},eu={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new T("invalid-custom-token")},G:vs,V:!0,B:!0},tu={endpoint:"verifyPassword",A:function(e){if(ps(e),!e.password)throw new T("wrong-password")},G:vs,V:!0,B:!0},nu={endpoint:"verifyPhoneNumber",A:gs,G:vs,B:!0},ru={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new T("internal-error");gs(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Jo(e);vs(e)}},iu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:gs,G:vs,B:!0},ou={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[ts]^!!e.refreshToken)throw new T("internal-error")},B:!0,Na:!0};function au(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return!1}return!0}(n,t.O))return xt(new T("internal-error"));var r,i=!!t.Na,o=t.Vb||"POST";return It(n).then(t.A).then((function(){return t.V&&(n.returnSecureToken=!0),t.B&&e.b&&void 0===n.tenantId&&(n.tenantId=e.b),ds(e,i?e.i:e.h,t.endpoint,o,n,t.Ib,t.mb||!1)})).then((function(e){return r=e,t.Za?t.Za(n,r):r})).then(t.G).then((function(){if(!t.Z)return r;if(!(t.Z in r))throw new T("internal-error");return r[t.Z]}))}function su(e){return uu({error:{errors:[{message:e}],code:400,message:e}})}function uu(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new T(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",ge(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new T(r[i],t);return!t&&e&&(t=Br(e)),new T("internal-error",t)}function cu(e){this.b=e,this.a=null,this.sb=function(e){return(du||(du=new _t((function(e,t){function n(){Vr(),Or("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){Vr(),t(Error("Network Error"))},timeout:hu.get()})}if(Or("gapi.iframes.Iframe"))e();else if(Or("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Or("gapi.load")?n():t(Error("Network Error"))},It(Ka(r=Ce(lu,{onload:r}))).o((function(){t(Error("Network Error"))}))}})).o((function(e){throw du=null,e})))).then((function(){return new _t((function(t,n){Or("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),fu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var lu=new be(Se,"https://apis.google.com/js/api.js?onload=%{onload}"),hu=new Wr(3e4,6e4),fu=new Wr(5e3,15e3),du=null;function pu(e,t,n,r){this.l=e,this.h=t,this.i=n,this.g=r,this.f=null,this.g?e=qn((e=Un(this.g.url)).c,e.a,e.g,"/emulator/auth/iframe"):e=qn("https",this.l,null,"/__/auth/iframe"),this.a=e,Bn(this.a,"apiKey",this.h),Bn(this.a,"appName",this.i),this.b=null,this.c=[]}function mu(e,t,n,r,i,o){this.u=e,this.s=t,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function vu(e){try{return er.app(e).auth().Ga()}catch(e){return[]}}function gu(e,t,n,r,i,o){this.s=e,this.g=t,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function yu(e){var t=fr();return function(e){return au(e,zs,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=Un(t),r=n.c;n=n.a;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Un(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:yr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new Yo(fr())}))}function bu(e){return e.m||(e.m=wr().then((function(){if(!e.u){var t=e.c,n=e.i,r=vu(e.b),i=new pu(e.s,e.g,e.b,e.f);i.f=t,i.b=n,i.c=X(r||[]),e.u=i.toString()}e.v=new cu(e.u),function(e){if(!e.v)throw Error("IfcHandler must be initialized!");!function(e,t){e.sb.then((function(){e.a.register("authEvent",t,Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.v,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=Wo(t.authEvent),n=0;n<e.h.length;n++)r=e.h[n](t)||r;return(n={}).status=r?"ACK":"ERROR",It(n)}return n.status="ERROR",It(n)}))}(e)}))),e.m}function wu(e){return e.l||(e.C=e.c?Ar(e.c,vu(e.b)):null,e.l=new $a(e.g,O(e.i),e.C),e.f&&ss(e.l,e.f)),e.l}function _u(e,t,n,r,i,o,a,s,u,c,l,h){return(e=new mu(e,t,n,r,i,h)).l=o,e.g=a,e.i=s,e.b=me(u||null),e.f=c,e.zb(l).toString()}function ku(e){if(this.a=e||er.INTERNAL.reactNative&&er.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Su(e){this.b=e,this.a={},this.f=_(this.c,this)}pu.prototype.toString=function(){return this.f?Bn(this.a,"v",this.f):$n(this.a.b,"v"),this.b?Bn(this.a,"eid",this.b):$n(this.a.b,"eid"),this.c.length?Bn(this.a,"fw",this.c.join(",")):$n(this.a.b,"fw"),this.a.toString()},mu.prototype.zb=function(e){return this.h=e,this},mu.prototype.toString=function(){if(this.v){var e=Un(this.v.url);e=qn(e.c,e.a,e.g,"/emulator/auth/handler")}else e=qn("https",this.u,null,"/__/auth/handler");if(Bn(e,"apiKey",this.s),Bn(e,"appName",this.c),Bn(e,"authType",this.m),this.a.isOAuthProvider){var t=this.a;try{var n=er.app(this.c).auth().la()}catch(e){n=null}for(var r in t.pb=n,Bn(e,"providerId",this.a.providerId),t=Fr((n=this.a).Jb))t[r]=t[r].toString();r=n.Qc,t=me(t);for(var i=0;i<r.length;i++){var o=r[i];o in t&&delete t[o]}n.qb&&n.pb&&!t[n.qb]&&(t[n.qb]=n.pb),pe(t)||Bn(e,"customParameters",Br(t))}if("function"==typeof this.a.Rb&&((n=this.a.Rb()).length&&Bn(e,"scopes",n.join(","))),this.l?Bn(e,"redirectUrl",this.l):$n(e.b,"redirectUrl"),this.g?Bn(e,"eventId",this.g):$n(e.b,"eventId"),this.i?Bn(e,"v",this.i):$n(e.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Fn(e,a)&&Bn(e,a,this.b[a]);return this.h?Bn(e,"tid",this.h):$n(e.b,"tid"),this.f?Bn(e,"eid",this.f):$n(e.b,"eid"),(a=vu(this.c)).length&&Bn(e,"fw",a.join(",")),e.toString()},(e=gu.prototype).Pb=function(e,t,n){var r=new T("popup-closed-by-user"),i=new T("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(e){var t={type:"webStorageSupport"};return bu(e).then((function(){return function(e,t){return e.sb.then((function(){return new _t((function(n){e.a.send(t.type,t,n,Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.v,t)})).then((function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(e&&vr(e),t(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(e){return new _t((function(t){return function n(){Cn(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!a)return Cn(n).then((function(){t(r)}))}))},e.Yb=function(){var e=Pr();return!jr(e)&&!zr(e)},e.Ub=function(){return!1},e.Nb=function(e,t,n,r,i,o,a,s){if(!e)return xt(new T("popup-blocked"));if(a&&!jr())return this.ma().o((function(t){vr(e),i(t)})),r(),It();this.a||(this.a=yu(wu(this)));var u=this;return this.a.then((function(){var t=u.ma().o((function(t){throw vr(e),i(t),t}));return r(),t})).then((function(){(zo(n),a)||dr(_u(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,s,u.f),e)})).o((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},e.Ob=function(e,t,n,r){this.a||(this.a=yu(wu(this)));var i=this;return this.a.then((function(){zo(t),dr(_u(i.s,i.g,i.b,e,t,fr(),n,i.c,void 0,i.i,r,i.f))})).o((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},e.ma=function(){var e=this;return bu(this).then((function(){return e.v.sb})).o((function(){throw e.a=null,new T("network-request-failed")}))},e.ac=function(){return!0},e.Ea=function(e){this.h.push(e)},e.Ta=function(e){J(this.h,(function(t){return t==e}))},(e=ku.prototype).get=function(e){return It(this.a.getItem(e)).then((function(e){return e&&Ur(e)}))},e.set=function(e,t){return It(this.a.setItem(e,Br(t)))},e.U=function(e){return It(this.a.removeItem(e))},e.ca=function(){},e.ia=function(){};var Eu,Mu=[];function Tu(e,t,n){pe(e.a)&&e.b.addEventListener("message",e.f),void 0===e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Cu(e){this.a=e}function Iu(e){this.c=e,this.b=!1,this.a=[]}function xu(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return xt(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new _t((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),void 0!==e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},e.a.push(c),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return Au(e,c),t})).o((function(t){throw Au(e,c),t}))}function Au(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),J(e.a,(function(e){return e==t}))}}function Pu(){if(!Nu())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var e=this;Sr()&&self?(this.v=function(){var e=Sr()?self:null;if(W(Mu,(function(n){n.b==e&&(t=n)})),!t){var t=new Su(e);Mu.push(t)}return t}(),Tu(this.v,"keyChanged",(function(t,n){return Uu(e).then((function(t){return 0<t.length&&W(e.a,(function(e){e(t)})),{keyProcessed:Y(t,n.key)}}))})),Tu(this.v,"ping",(function(){return It(["keyChanged"])}))):function(){var e=s.navigator;return e&&e.serviceWorker?It().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).o((function(){return null})):It(null)}().then((function(t){(e.h=t)&&(e.g=new Iu(new Cu(t)),xu(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&Y(t[0].value,"keyChanged")&&(e.s=!0)})).o((function(){})))}))}function Ou(e){return new _t((function(t,n){var r=e.m.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(e){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?t(r):function(e){return new _t((function(t,n){var r=e.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}(e).then((function(){return Ou(e)})).then((function(e){t(e)})).o((function(e){n(e)}))}}))}function Ru(e){return e.i||(e.i=Ou(e)),e.i}function Du(e,t){var n=0;return new _t((function r(i,o){Ru(e).then(t).then(i).o((function(t){if(!(3<++n))return Ru(e).then((function(t){return t.close(),e.i=void 0,r(i,o)})).o((function(e){o(e)}));o(t)}))}))}function Nu(){try{return!!s.indexedDB}catch(e){return!1}}function Lu(e){return e.objectStore("firebaseLocalStorage")}function ju(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function Bu(e){return new _t((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function Fu(e,t){return e.g&&e.h&&function(){var e=s.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?xu(e.g,"keyChanged",{key:t},e.s).then((function(){})).o((function(){})):It()}function Uu(e){return Ru(e).then((function(e){var t=Lu(ju(e,!1));return t.getAll?Bu(t.getAll()):new _t((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=pr(e.c,n),e.c=n}return r}))}function qu(e){e.l&&e.l.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function zu(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=It().then((function(){if(Nu()){var e=qr(),r="__sak"+e;return Eu||(Eu=new Pu),(n=Eu).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.ca((function(e){W(t.a,(function(t){t(e)}))})),e}))}function Vu(){this.a={},this.type="inMemory"}function Wu(){if(!function(){var e="Node"==Er();if(!(e=Hu()||e&&er.INTERNAL.node&&er.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Er())throw new T("internal-error","The LocalStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Hu()||er.INTERNAL.node.localStorage,this.type="localStorage"}function Hu(){try{var e=s.localStorage,t=qr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function Ku(){this.type="nullStorage"}function Gu(){if(!function(){var e="Node"==Er();if(!(e=Yu()||e&&er.INTERNAL.node&&er.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==Er())throw new T("internal-error","The SessionStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Yu()||er.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Yu(){try{var e=s.sessionStorage,t=qr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function Qu(){var e={};e.Browser=Xu,e.Node=$u,e.ReactNative=ec,e.Worker=tc,this.a=e[Er()]}Su.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];W(r,(function(t){i.push(It().then((function(){return t(e.origin,e.data.data)})))})),Pt(i).then((function(r){var i=[];W(r,(function(e){i.push({fulfilled:e.Qb,value:e.value,reason:e.reason?e.reason.message:void 0})})),W(i,(function(e){for(var t in e)void 0===e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},Cu.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Iu.prototype.close=function(){for(;0<this.a.length;)Au(this,this.a[0]);this.b=!0},(e=Pu.prototype).set=function(e,t){var n=this,r=!1;return Du(this,(function(t){return Bu((t=Lu(ju(t,!0))).get(e))})).then((function(i){return Du(n,(function(o){if(o=Lu(ju(o,!0)),i)return i.value=t,Bu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=e,a.value=t,Bu(o.add(a))}))})).then((function(){return n.c[e]=t,Fu(n,e)})).oa((function(){r&&n.b--}))},e.get=function(e){return Du(this,(function(t){return Bu(Lu(ju(t,!1)).get(e))})).then((function(e){return e&&e.value}))},e.U=function(e){var t=this,n=!1;return Du(this,(function(r){return n=!0,t.b++,Bu(Lu(ju(r,!0)).delete(e))})).then((function(){return delete t.c[e],Fu(t,e)})).oa((function(){n&&t.b--}))},e.ca=function(e){0==this.a.length&&function(e){function t(){e.f=setTimeout((function(){e.l=Uu(e).then((function(t){0<t.length&&W(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}qu(e),t()}(this),this.a.push(e)},e.ia=function(e){J(this.a,(function(t){return t==e})),0==this.a.length&&qu(this)},(e=zu.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},e.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},e.U=function(e){return this.b.then((function(t){return t.U(e)}))},e.ca=function(e){this.a.push(e)},e.ia=function(e){J(this.a,(function(t){return t==e}))},(e=Vu.prototype).get=function(e){return It(this.a[e])},e.set=function(e,t){return this.a[e]=t,It()},e.U=function(e){return delete this.a[e],It()},e.ca=function(){},e.ia=function(){},(e=Wu.prototype).get=function(e){var t=this;return It().then((function(){return Ur(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return It().then((function(){var r=Br(t);null===r?n.U(e):n.a.setItem(e,r)}))},e.U=function(e){var t=this;return It().then((function(){t.a.removeItem(e)}))},e.ca=function(e){s.window&&ln(s.window,"storage",e)},e.ia=function(e){s.window&&dn(s.window,"storage",e)},(e=Ku.prototype).get=function(){return It(null)},e.set=function(){return It()},e.U=function(){return It()},e.ca=function(){},e.ia=function(){},(e=Gu.prototype).get=function(e){var t=this;return It().then((function(){return Ur(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return It().then((function(){var r=Br(t);null===r?n.U(e):n.a.setItem(e,r)}))},e.U=function(e){var t=this;return It().then((function(){t.a.removeItem(e)}))},e.ca=function(){},e.ia=function(){};var Ju,Zu,Xu={F:Wu,cb:Gu},$u={F:Wu,cb:Gu},ec={F:ku,cb:Ku},tc={F:Wu,cb:Ku},nc={rd:"local",NONE:"none",td:"session"};function rc(){var e=!(zr(Pr())||!kr()),t=jr(),n=Rr();this.m=e,this.h=t,this.l=n,this.a={},Ju||(Ju=new Qu),e=Ju;try{this.g=!hr()&&Gr()||!s.indexedDB?new e.a.F:new zu(Sr()?new Vu:new e.a.F)}catch(e){this.g=new Vu,this.h=!0}try{this.i=new e.a.cb}catch(e){this.i=new Vu}this.v=new Vu,this.f=_(this.Zb,this),this.b={}}function ic(){return Zu||(Zu=new rc),Zu}function oc(e,t){switch(t){case"session":return e.i;case"none":return e.v;default:return e.g}}function ac(e,t){return"firebase:"+e.name+(t?":"+t:"")}function sc(e,t,n){return n=ac(t,n),"local"==t.F&&(e.b[n]=null),oc(e,t.F).U(n)}function uc(e){e.c&&(clearInterval(e.c),e.c=null)}function cc(e){this.a=e,this.b=ic()}(e=rc.prototype).get=function(e,t){return oc(this,e.F).get(ac(e,t))},e.set=function(e,t,n){var r=ac(e,n),i=this,o=oc(this,e.F);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.F&&(i.b[r]=t)}))},e.addListener=function(e,t,n){e=ac(e,t),this.l&&(this.b[e]=s.localStorage.getItem(e)),pe(this.a)&&(oc(this,"local").ca(this.f),this.h||(hr()||!Gr())&&s.indexedDB||!this.l||function(e){uc(e),e.c=setInterval((function(){for(var t in e.a){var n=s.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new Xt({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Zb(n))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=ac(e,t),this.a[e]&&(J(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),pe(this.a)&&(oc(this,"local").ia(this.f),uc(this))},e.Zb=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?oc(this,"local").ia(this.f):uc(this),this.m)if(n=s.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?s.localStorage.setItem(t,r):s.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return;var o=this;n=function(){void 0===e.a.a&&o.b[t]===s.localStorage.getItem(t)||(o.b[t]=s.localStorage.getItem(t),o.nb(t))},Ye&&st&&10==st&&s.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else W(e,_(this.nb,this))},e.nb=function(e){this.a[e]&&W(this.a[e],(function(e){e()}))};var lc,hc={name:"authEvent",F:"local"};function fc(){this.a=ic()}function dc(e,t){this.b=pc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===lc&&(lc=s.Int32Array?new Int32Array(_c):_c),this.reset()}E(dc,(function(){this.b=-1}));for(var pc=64,mc=pc-1,vc=[],gc=0;gc<mc;gc++)vc[gc]=0;var yc=Z(128,vc);function bc(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|lc[t])|0)+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function wc(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if("string"==typeof t)for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(bc(e),i=0);else{if(!d(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(bc(e),i=0)}}e.c=i,e.g+=n}dc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):X(this.h)};var _c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function kc(){dc.call(this,8,Sc)}E(kc,dc);var Sc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ec(e,t,n,r,i,o){this.v=e,this.i=t,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=t+":"+n,this.C=new fc,this.g=new cc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Mc(e){return new T("invalid-cordova-configuration",e)}function Tc(e){var t=new kc;wc(t,e),e=[];var n=8*t.g;56>t.c?wc(t,yc,56-t.c):wc(t,yc,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(bc(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return K(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}function Cc(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(e){}}function Ic(e){return e.f||(e.f=e.ma().then((function(){return new _t((function(t){e.Ea((function n(r){return t(r),e.Ta(n),!1})),function(e){function t(t){r=!0,i&&i.cancel(),xc(e).then((function(r){var i=n;if(r&&t&&t.url){var o=null;-1!=(i=so(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Ur(Fn(o=Un(i),"firebaseError")||null))?C(o):null)?new Vo(r.c,r.b,null,null,o,null,r.T()):new Vo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Cc(e,i)}))}var n=new Vo("unknown",null,null,null,new T("no-auth-event")),r=!1,i=Cn(500).then((function(){return xc(e).then((function(){r||Cc(e,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(Or("BuildInfo.packageName",s).toLowerCase()+"://")&&t({url:e}),"function"==typeof o)try{o(e)}catch(e){console.error(e)}},Go||(Go=new Ho),function(e){var t=Go;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"==typeof(e=Or("universalLinks.subscribe",s))&&e(null,t.b))}(t)}(e)}))}))),e.f}function xc(e){var t=null;return function(e){return e.b.get(hc,e.a).then((function(e){return Wo(e)}))}(e.g).then((function(n){return t=n,sc((n=e.g).b,hc,n.a)})).then((function(){return t}))}function Ac(e){this.a=e,this.b=ic()}(e=Ec.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(_r(void 0)?wr().then((function(){return new _t((function(e,t){var n=s.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):xt(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Or("universalLinks.subscribe",s))throw Mc("cordova-universal-links-plugin-fix is not installed");if(void 0===Or("BuildInfo.packageName",s))throw Mc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Or("cordova.plugins.browsertab.openUrl",s))throw Mc("cordova-plugin-browsertab is not installed");if("function"!=typeof Or("cordova.InAppBrowser.open",s))throw Mc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new T("cordova-not-ready")}))},e.Pb=function(e,t){return t(new T("operation-not-supported-in-this-environment")),It()},e.Nb=function(){return xt(new T("operation-not-supported-in-this-environment"))},e.ac=function(){return!1},e.Yb=function(){return!0},e.Ub=function(){return!0},e.Ob=function(e,t,n,r){if(this.c)return xt(new T("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=It().then((function(){return zo(t),Ic(i)})).then((function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),a=new Vo(t,r,null,o,new T("no-auth-event"),null,i),u=Or("BuildInfo.packageName",s);if("string"!=typeof u)throw new T("invalid-cordova-configuration");var c=Or("BuildInfo.displayName",s),l={};if(Pr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!Pr().toLowerCase().match(/android/))return xt(new T("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=Tc(o),l.sessionId=o;var h=_u(e.v,e.i,e.l,t,n,null,r,e.m,l,e.u,i,e.s);return e.ma().then((function(){var t=e.h;return e.C.a.set(hc,a.w(),t)})).then((function(){var t=Or("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof t)throw new T("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!=typeof(n=Or("cordova.plugins.browsertab.openUrl",s)))throw new T("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Or("cordova.InAppBrowser.open",s)))throw new T("invalid-cordova-configuration");t=Pr(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,e,t,n,r)})).then((function(){return new _t((function(e,t){u=function(){var t=Or("cordova.plugins.browsertab.close",s);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=Cn(2e3).then((function(){t(new T("redirect-cancelled-by-user"))})))},l=function(){Hr()&&c()},o.addEventListener("resume",c,!1),Pr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(e){return xc(i).then((function(){throw e}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Ta(u),i.c=null}))},e.Ea=function(e){this.b.push(e),Ic(this).o((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Vo("unknown",null,null,null,new T("no-auth-event")),e(t))}))},e.Ta=function(e){J(this.b,(function(t){return t==e}))};var Pc={name:"pendingRedirect",F:"session"};function Oc(e){return sc(e.b,Pc,e.a)}function Rc(e,t,n,r){this.i={},this.u=0,this.D=e,this.v=t,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=_(this.s,this),this.b=new Yc,this.C=new $c,this.g=new Ac(Kc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Dc(this.D,this.v,this.m,I,this.J)}function Dc(e,t,n,r,i){var o=er.SDK_VERSION||null;return _r()?new Ec(e,t,n,o,r,i):new gu(e,t,n,o,r,i)}function Nc(e){e.f||(e.f=!0,e.a.Ea(e.l));var t=e.a;return e.a.ma().o((function(n){throw e.a==t&&e.reset(),n}))}function Lc(e){e.a.Yb()&&Nc(e).o((function(t){var n=new Vo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));zc(t)&&e.s(n)})),e.a.Ub()||Qc(e.b)}function jc(e,t){Y(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(Pc,e.a).then((function(e){return"pending"==e}))}(e.g).then((function(t){t?Oc(e.g).then((function(){Nc(e).o((function(t){var n=new Vo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));zc(t)&&e.s(n)}))})):Lc(e)})).o((function(){Lc(e)}))}function Bc(e,t){J(e.h,(function(e){return e==t}))}Rc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Dc(this.D,this.v,this.m,null,this.J),this.i={}},Rc.prototype.s=function(e){if(!e)throw new T("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=Date.now())),t=!0;break}}return Qc(this.b),t};var Fc=new Wr(2e3,1e4),Uc=new Wr(3e4,6e4);function qc(e,t,n,r,i,o,a){return e.a.Nb(t,n,r,(function(){e.f||(e.f=!0,e.a.Ea(e.l))}),(function(){e.reset()}),i,o,a)}function zc(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function Vc(e,t,n,r,i){var o;return function(e){return e.b.set(Pc,"pending",e.a)}(e.g).then((function(){return e.a.Ob(t,n,r,i).o((function(t){if(zc(t))throw new T("operation-not-supported-in-this-environment");return o=t,Oc(e.g).then((function(){throw o}))})).then((function(){return e.a.ac()?new _t((function(){})):Oc(e.g).then((function(){return e.ra()})).then((function(){})).o((function(){}))}))}))}function Wc(e,t,n,r,i){return e.a.Pb(r,(function(e){t.na(n,null,e,i)}),Fc.get())}Rc.prototype.ra=function(){return this.b.ra()};var Hc={};function Kc(e,t,n){return e=e+":"+t,n&&(e=e+":"+n.url),e}function Gc(e,t,n,r){var i=Kc(t,n,r);return Hc[i]||(Hc[i]=new Rc(e,t,n,r)),Hc[i]}function Yc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Qc(e){e.g||(e.g=!0,Xc(e,!1,null,null))}function Jc(e){e.g&&!e.i&&Xc(e,!1,null,null)}function Zc(e,t){if(e.b=function(){return It(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function Xc(e,t,n,r){t?r?function(e,t){if(e.b=function(){return xt(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):Zc(e,n):Zc(e,{user:null}),e.f=[],e.c=[]}function $c(){}function el(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(e){this.jb=e},enumerable:!1})}function tl(e,t){this.a=t,Xr(this,"verificationId",e)}function nl(e,t,n,r){return new Fo(e).gb(t,n).then((function(e){return new tl(e,r)}))}function rl(e){var t=Gi(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");$r(this,{token:e,expirationTime:Kr(1e3*t.exp),authTime:Kr(1e3*t.auth_time),issuedAtTime:Kr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function il(e,t,n){var r=t&&t[al];if(!r)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=me(t),this.g=n,this.c=new uo(null,r),this.b=[];var i=this;W(t[ol]||[],(function(e){(e=ri(e))&&i.b.push(e)})),Xr(this,"auth",this.a),Xr(this,"session",this.c),Xr(this,"hints",this.b)}Yc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Yc.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(Xc(this,!0,null,e.a),It()):t.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.T(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then((function(t){Xc(e,s,t,null)})).o((function(t){Xc(e,s,null,t)}))}(this,e,t):xt(new T("invalid-auth-event")):(Xc(this,!1,null,null),It())}else xt(new T("invalid-auth-event"))},Yc.prototype.ra=function(){var e=this;return new _t((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new T("timeout");e.a&&e.a.cancel(),e.a=Cn(Uc.get()).then((function(){e.b||(e.g=!0,Xc(e,!0,null,t))}))}(e))}))},$c.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.na(e.c,null,e.a,e.b),It()):t.Fa(n,r)?function(e,t){var n=e.b,r=e.c;t.Fa(r,n)(e.g,e.f,e.T(),e.i).then((function(e){t.na(r,e,null,n)})).o((function(e){t.na(r,null,e,n)}))}(e,t):xt(new T("invalid-auth-event"))}else xt(new T("invalid-auth-event"))},tl.prototype.confirm=function(e){return e=Uo(this.verificationId,e),this.a(e)};var ol="mfaInfo",al="mfaPendingCredential";function sl(e,t,n,r){T.call(this,"multi-factor-auth-required",r,t),this.b=new il(e,t,n),Xr(this,"resolver",this.b)}function ul(e,t,n){if(e&&m(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new sl(t,e.serverResponse,n,e.message)}catch(e){}return null}function cl(){}function ll(e){Xr(this,"factorId",e.fa),this.a=e}function hl(e){if(ll.call(this,e),this.a.fa!=Fo.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function fl(e,t){for(var n in Zt.call(this,e),t)this[n]=t[n]}function dl(e,t){this.a=e,this.b=[],this.c=_(this.yc,this),ln(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&W(t.multiFactor.enrolledFactors,(function(e){var t=null,r={};if(e){e.uid&&(r[ai]=e.uid),e.displayName&&(r[ii]=e.displayName),e.enrollmentTime&&(r[oi]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[si]=e.phoneNumber);try{t=new ui(r)}catch(e){}e=t}else e=null;e&&n.push(e)})),pl(this,n)}function pl(e,t){e.b=t,Xr(e,"enrolledFactors",t)}function ml(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function vl(e,t){e.stop(),e.b=Cn(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(e,t)).then((function(){return function(){var e=s.document,t=null;return Hr()||!e?It():new _t((function(n){t=function(){Hr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).o((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return e.h()})).then((function(){vl(e,!0)})).o((function(t){e.i(t)&&vl(e,!1)}))}function gl(e){this.f=e,this.b=this.a=null,this.c=Date.now()}function yl(e,t){void 0===t&&(e.b?t=(t=e.b).a-t.g:t=0),e.c=Date.now()+1e3*t}function bl(e,t){e.b=Ki(t[ts]||""),e.a=t.refreshToken,yl(e,void 0!==(t=t.expiresIn)?Number(t):void 0)}function wl(e,t){return function(e,t){return new _t((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?ls(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(uu(e)):e.access_token&&e.refresh_token?n(e):r(new T("internal-error")):r(new T("network-request-failed"))}),"POST",Xn(t).toString(),e.g,e.m.get()):r(new T("internal-error"))}))}(e.f,t).then((function(t){return e.b=Ki(t.access_token),e.a=t.refresh_token,yl(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}function _l(e,t){this.a=e||null,this.b=t||null,$r(this,{lastSignInTime:Kr(t||null),creationTime:Kr(e||null)})}function kl(e,t,n,r,i,o){$r(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function Sl(e,t,n){this.N=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var r=er.SDK_VERSION?Ar(er.SDK_VERSION):null;this.a=new $a(this.l,O(I),r),(this.u=e.emulatorConfig||null)&&ss(this.a,this.u),this.h=new gl(this.a),Ol(this,t[ts]),bl(this.h,t),Xr(this,"refreshToken",this.h.a),Nl(this,n||{}),kn.call(this),this.P=!1,this.s&&Dr()&&(this.b=Gc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(e){return new ml((function(){return e.I(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.h.c-Date.now()-3e5;return 0<t?t:0}))}(this),this.ba=_(this.ib,this);var i=this;this.za=null,this.Pa=function(e){i.xa(e.h)},this.qa=null,this.Ba=function(e){El(i,e.c)},this.$=null,this.aa=[],this.Oa=function(e){Cl(i,e.f)},this.ja=null,this.S=new dl(this,n),Xr(this,"multiFactor",this.S)}function El(e,t){e.u=t,ss(e.a,t),e.b&&(t=e.b,e.b=Gc(e.s,e.l,e.m,e.u),e.P&&(Bc(t,e),jc(e.b,e)))}function Ml(e,t){e.qa&&dn(e.qa,"languageCodeChanged",e.Pa),(e.qa=t)&&ln(t,"languageCodeChanged",e.Pa)}function Tl(e,t){e.$&&dn(e.$,"emulatorConfigChanged",e.Ba),(e.$=t)&&ln(t,"emulatorConfigChanged",e.Ba)}function Cl(e,t){e.aa=t,cs(e.a,er.SDK_VERSION?Ar(er.SDK_VERSION,e.aa):null)}function Il(e,t){e.ja&&dn(e.ja,"frameworkChanged",e.Oa),(e.ja=t)&&ln(t,"frameworkChanged",e.Oa)}function xl(e){try{return er.app(e.m).auth()}catch(t){throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Al(e){e.J||e.D.b||(e.D.start(),dn(e,"tokenChanged",e.ba),ln(e,"tokenChanged",e.ba))}function Pl(e){dn(e,"tokenChanged",e.ba),e.D.stop()}function Ol(e,t){e.Aa=t,Xr(e,"_lat",t)}function Rl(e){for(var t=[],n=0;n<e.W.length;n++)t.push(e.W[n](e));return Pt(t).then((function(){return e}))}function Dl(e){e.b&&!e.P&&(e.P=!0,jc(e.b,e))}function Nl(e,t){$r(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new _l(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function Ll(){}function jl(e){return It().then((function(){if(e.J)throw new T("app-deleted")}))}function Bl(e){return K(e.providerData,(function(e){return e.providerId}))}function Fl(e,t){t&&(Ul(e,t.providerId),e.providerData.push(t))}function Ul(e,t){J(e.providerData,(function(e){return e.providerId==t}))}function ql(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Xr(e,t,n)}function zl(e,t){e!=t&&($r(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Xr(e,"metadata",function(e){return new _l(e.a,e.b)}(t.metadata)):Xr(e,"metadata",new _l),W(t.providerData,(function(t){Fl(e,t)})),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.h,t.h),Xr(e,"refreshToken",e.h.a),pl(e.S,t.S.b))}function Vl(e){return e.I().then((function(t){var n=e.isAnonymous;return function(e,t){return au(e.a,js,{idToken:t}).then(_(e.Kc,e))}(e,t).then((function(){return n||ql(e,"isAnonymous",!1),t}))}))}function Wl(e,t){t[ts]&&e.Aa!=t[ts]&&(bl(e.h,t),e.dispatchEvent(new fl("tokenChanged")),Ol(e,t[ts]),ql(e,"refreshToken",e.h.a))}function Hl(e,t){return Vl(e).then((function(){if(Y(Bl(e),t))return Rl(e).then((function(){throw new T("provider-already-linked")}))}))}function Kl(e,t,n){return ei({user:e,credential:qo(t),additionalUserInfo:t=Xi(t),operationType:n})}function Gl(e,t){return Wl(e,t),e.reload().then((function(){return e}))}function Yl(e,t,n,r,i){if(!Dr())return xt(new T("operation-not-supported-in-this-environment"));if(e.i&&!i)return xt(e.i);var o=Zi(n.providerId),a=qr(e.uid+":::"),s=null;(!jr()||kr())&&e.s&&n.isOAuthProvider&&(s=_u(e.s,e.l,e.m,t,n,null,a,er.SDK_VERSION||null,null,null,e.tenantId,e.u));var u=gr(s,o&&o.va,o&&o.ua);return r=r().then((function(){if(Jl(e),!i)return e.I().then((function(){}))})).then((function(){return qc(e.b,u,t,n,a,!!s,e.tenantId)})).then((function(){return new _t((function(n,r){e.na(t,null,new T("cancelled-popup-request"),e.g||null),e.f=n,e.C=r,e.g=a,e.c=Wc(e.b,e,t,u,a)}))})).then((function(e){return u&&vr(u),e?ei(e):null})).o((function(e){throw u&&vr(u),e})),Zl(e,r,i)}function Ql(e,t,n,r,i){if(!Dr())return xt(new T("operation-not-supported-in-this-environment"));if(e.i&&!i)return xt(e.i);var o=null,a=qr(e.uid+":::");return r=r().then((function(){if(Jl(e),!i)return e.I().then((function(){}))})).then((function(){return e.ga=a,Rl(e)})).then((function(t){return e.ha&&(t=(t=e.ha).b.set(eh,e.w(),t.a)),t})).then((function(){return Vc(e.b,t,n,a,e.tenantId)})).o((function(t){if(o=t,e.ha)return th(e.ha);throw o})).then((function(){if(o)throw o})),Zl(e,r,i)}function Jl(e){if(!e.b||!e.P){if(e.b&&!e.P)throw new T("internal-error");throw new T("auth-domain-config-required")}}function Zl(e,t,n){var r=function(e,t,n){return e.i&&!n?(t.cancel(),xt(e.i)):t.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.i||e.dispatchEvent(new fl("userInvalidated")),e.i=t),t}))}(e,t,n);return e.N.push(r),r.oa((function(){Q(e.N,r)})),r.o((function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=ul(t.w(),xl(e),_(e.jc,e))),n||t}))}function Xl(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[ts]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var r=e.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Sl(t,n,e);return e.providerData&&W(e.providerData,(function(e){e&&Fl(i,ei(e))})),e.redirectEventId&&(i.ga=e.redirectEventId),i}function $l(e){this.a=e,this.b=ic()}il.prototype.Rc=function(e){var t=this;return e.tb(this.a.a,this.c).then((function(e){var n=me(t.f);return delete n[ol],delete n[al],ge(n,e),t.g(n)}))},E(sl,T),cl.prototype.tb=function(e,t,n){return t.type==co?function(e,t,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),ge(n,{phoneVerificationInfo:Bo(e.a)}),au(t,Ns,n)}))}(this,e,t,n):function(e,t,n){return n.Ha().then((function(n){return ge(n={mfaPendingCredential:n},{phoneVerificationInfo:Bo(e.a)}),au(t,Ls,n)}))}(this,e,t)},E(ll,cl),E(hl,ll),E(fl,Zt),(e=dl.prototype).yc=function(e){pl(this,function(e){var t=[];return W(e.mfaInfo||[],(function(e){(e=ri(e))&&t.push(e)})),t}(e.hd))},e.Sb=function(){return this.a.I().then((function(e){return new uo(e,null)}))},e.fc=function(e,t){var n=this,r=this.a.a;return this.Sb().then((function(n){return e.tb(r,n,t)})).then((function(e){return Wl(n.a,e),n.a.reload()}))},e.bd=function(e){var t=this,n="string"==typeof e?e:e.uid,r=this.a.a;return this.a.I().then((function(e){return au(r,ou,{idToken:e,mfaEnrollmentId:n})})).then((function(e){var r=H(t.b,(function(e){return e.uid!=n}));return pl(t,r),Wl(t.a,e),t.a.reload().o((function(e){if("auth/user-token-expired"!=e.code)throw e}))}))},e.w=function(){return{multiFactor:{enrolledFactors:K(this.b,(function(e){return e.w()}))}}},ml.prototype.start=function(){this.a=this.c,vl(this,!0)},ml.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},gl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},gl.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?xt(new T("user-token-expired")):e||!this.b||Date.now()>this.c-3e4?this.a?wl(this,{grant_type:"refresh_token",refresh_token:this.a}):It(null):It({accessToken:this.b.toString(),refreshToken:this.a})},_l.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},E(Sl,kn),Sl.prototype.xa=function(e){this.za=e,as(this.a,e)},Sl.prototype.la=function(){return this.za},Sl.prototype.Ga=function(){return X(this.aa)},Sl.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Xr(Sl.prototype,"providerId","firebase"),(e=Sl.prototype).reload=function(){var e=this;return Zl(this,jl(this).then((function(){return Vl(e).then((function(){return Rl(e)})).then(Ll)})))},e.oc=function(e){return this.I(e).then((function(e){return new rl(e)}))},e.I=function(e){var t=this;return Zl(this,jl(this).then((function(){return t.h.getToken(e)})).then((function(e){if(!e)throw new T("internal-error");return e.accessToken!=t.Aa&&(Ol(t,e.accessToken),t.dispatchEvent(new fl("tokenChanged"))),ql(t,"refreshToken",e.refreshToken),e.accessToken})))},e.Kc=function(e){if(!(e=e.users)||!e.length)throw new T("internal-error");Nl(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?K(e,(function(e){return new kl(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)Fl(this,t[n]);ql(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new fl("userReloaded",{hd:e}))},e.Lc=function(e){return Jr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(e)},e.ub=function(e){var t=this,n=null;return Zl(this,e.c(this.a,this.uid).then((function(e){return Wl(t,e),n=Kl(t,e,"reauthenticate"),t.i=null,t.reload()})).then((function(){return n})),!0)},e.Cc=function(e){return Jr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(e)},e.rb=function(e){var t=this,n=null;return Zl(this,Hl(this,e.providerId).then((function(){return t.I()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=Kl(t,e,"link"),Gl(t,e)})).then((function(){return n})))},e.Dc=function(e,t){var n=this;return Zl(this,Hl(this,"phone").then((function(){return nl(xl(n),e,t,_(n.rb,n))})))},e.Mc=function(e,t){var n=this;return Zl(this,It().then((function(){return nl(xl(n),e,t,_(n.ub,n))})),!0)},e.Cb=function(e){var t=this;return Zl(this,this.I().then((function(n){return t.a.Cb(n,e)})).then((function(e){return Wl(t,e),t.reload()})))},e.ed=function(e){var t=this;return Zl(this,this.I().then((function(n){return e.b(t.a,n)})).then((function(e){return Wl(t,e),t.reload()})))},e.Db=function(e){var t=this;return Zl(this,this.I().then((function(n){return t.a.Db(n,e)})).then((function(e){return Wl(t,e),t.reload()})))},e.Eb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return jl(this);var t=this;return Zl(this,this.I().then((function(n){return t.a.Eb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return Wl(t,e),ql(t,"displayName",e.displayName||null),ql(t,"photoURL",e.photoUrl||null),W(t.providerData,(function(e){"password"===e.providerId&&(Xr(e,"displayName",t.displayName),Xr(e,"photoURL",t.photoURL))})),Rl(t)})).then(Ll))},e.cd=function(e){var t=this;return Zl(this,Vl(this).then((function(n){return Y(Bl(t),e)?function(e,t,n){return au(e,Os,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then((function(e){var n={};return W(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),W(Bl(t),(function(e){n[e]||Ul(t,e)})),n[Fo.PROVIDER_ID]||Xr(t,"phoneNumber",null),Rl(t)})):Rl(t).then((function(){throw new T("no-such-provider")}))})))},e.delete=function(){var e=this;return Zl(this,this.I().then((function(t){return au(e.a,Ps,{idToken:t})})).then((function(){e.dispatchEvent(new fl("userDeleted"))}))).then((function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");Ml(e,null),Tl(e,null),Il(e,null),e.N=[],e.J=!0,Pl(e),Xr(e,"refreshToken",null),e.b&&Bc(e.b,e)}))},e.Gb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ga||null)==t||"reauthViaRedirect"==e&&(this.ga||null)==t)},e.na=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?_(this.Lb,this):"reauthViaPopup"==e&&t==(this.g||null)?_(this.Mb,this):"linkViaRedirect"==e&&(this.ga||null)==t?_(this.Lb,this):"reauthViaRedirect"==e&&(this.ga||null)==t?_(this.Mb,this):null},e.Ec=function(e){var t=this;return Yl(this,"linkViaPopup",e,(function(){return Hl(t,e.providerId).then((function(){return Rl(t)}))}),!1)},e.Nc=function(e){return Yl(this,"reauthViaPopup",e,(function(){return It()}),!0)},e.Fc=function(e){var t=this;return Ql(this,"linkViaRedirect",e,(function(){return Hl(t,e.providerId)}),!1)},e.Oc=function(e){return Ql(this,"reauthViaRedirect",e,(function(){return It()}),!0)},e.Lb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Zl(this,this.I().then((function(n){return Es(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=Kl(i,e,"link"),Gl(i,e)})).then((function(){return o})))},e.Mb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Zl(this,It().then((function(){return fo(Ms(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=Kl(i,e,"reauthenticate"),Wl(i,e),i.i=null,i.reload()})).then((function(){return o})),!0)},e.vb=function(e){var t=this,n=null;return Zl(this,this.I().then((function(t){return n=t,void 0===e||pe(e)?{}:zi(new Oi(e))})).then((function(e){return t.a.vb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.Fb=function(e,t){var n=this,r=null;return Zl(this,this.I().then((function(e){return r=e,void 0===t||pe(t)?{}:zi(new Oi(t))})).then((function(t){return n.a.Fb(r,e,t)})).then((function(e){if(n.email!=e)return n.reload()})).then((function(){})))},e.jc=function(e){var t=null,n=this;return Zl(this,e=fo(It(e),n.uid).then((function(e){return t=Kl(n,e,"reauthenticate"),Wl(n,e),n.i=null,n.reload()})).then((function(){return t})),!0)},e.toJSON=function(){return this.w()},e.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&ge(e,this.metadata.w()),W(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),ge(e,this.S.w()),e};var eh={name:"redirectUser",F:"session"};function th(e){return sc(e.b,eh,e.a)}function nh(e){this.a=e,this.b=ic(),this.c=null,this.f=function(e){var t=oh("local"),n=oh("session"),r=oh("none");return function(e,t,n){var r=ac(t,n),i=oc(e,t.F);return e.get(t,n).then((function(o){var a=null;try{a=Ur(s.localStorage.getItem(r))}catch(e){}if(a&&!o)return s.localStorage.removeItem(r),e.set(t,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(ih,e.a).then((function(e){return e?oh(e):t}))}))}))})).then((function(t){return e.c=t,rh(e,t.F)})).o((function(){e.c||(e.c=t)}))}(this),this.b.addListener(oh("local"),this.a,_(this.g,this))}function rh(e,t){var n,r=[];for(n in nc)nc[n]!==t&&r.push(sc(e.b,oh(nc[n]),e.a));return r.push(sc(e.b,ih,e.a)),function(e){return new _t((function(t,n){var r=e.length,i=[];if(r)for(var o=function(e,n){r--,i[e]=n,0==r&&t(i)},a=function(e){n(e)},s=0;s<e.length;s++)At(e[s],k(o,s),a);else t(i)}))}(r)}nh.prototype.g=function(){var e=this,t=oh("local");ch(this,(function(){return It().then((function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null})).then((function(n){if(n)return rh(e,"local").then((function(){e.c=t}))}))}))};var ih={name:"persistence",F:"session"};function oh(e){return{name:"authUser",F:e}}function ah(e,t){return ch(e,(function(){return e.b.set(e.c,t.w(),e.a)}))}function sh(e){return ch(e,(function(){return sc(e.b,e.c,e.a)}))}function uh(e,t,n){return ch(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),e&&n&&(e.emulatorConfig=n),Xl(e||{})}))}))}function ch(e,t){return e.f=e.f.then(t,t),e.f}function lh(e){if(this.l=!1,Xr(this,"settings",new el),Xr(this,"app",e),!bh(this).options||!bh(this).options.apiKey)throw new T("invalid-api-key");e=er.SDK_VERSION?Ar(er.SDK_VERSION):null,this.a=new $a(bh(this).options&&bh(this).options.apiKey,O(I),e),this.P=[],this.s=[],this.N=[],this.Pa=er.INTERNAL.createSubscribe(_(this.zc,this)),this.W=void 0,this.ib=er.INTERNAL.createSubscribe(_(this.Ac,this)),gh(this,null),this.i=new nh(bh(this).options.apiKey+":"+bh(this).name),this.D=new $l(bh(this).options.apiKey+":"+bh(this).name),this.$=Sh(this,function(e){var t=bh(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(eh,e.a).then((function(e){return e&&t&&(e.authDomain=t),Xl(e||{})}))}(e.D,bh(e).options.authDomain).then((function(t){return(e.m=t)&&(t.ha=e.D),th(e.D)}));return Sh(e,t)}(e).then((function(){return uh(e.i,t,e.R)})).then((function(t){return t?(t.ha=e.D,e.m&&(e.m.ga||null)==(t.ga||null)?t:t.reload().then((function(){return ah(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:sh(e.i)}))):null})).then((function(t){gh(e,t||null)}));return Sh(e,n)}(this)),this.h=Sh(this,function(e){return e.$.then((function(){return mh(e)})).o((function(){})).then((function(){if(!e.l)return e.ja()})).o((function(){})).then((function(){if(!e.l){e.ba=!0;var t=e.i;t.b.addListener(oh("local"),t.a,e.ja)}}))}(this)),this.ba=!1,this.ja=_(this.Zc,this),this.Ba=_(this.da,this),this.qa=_(this.mc,this),this.za=_(this.wc,this),this.Aa=_(this.xc,this),this.b=null,function(e){var t=bh(e).options.authDomain,n=bh(e).options.apiKey;t&&Dr()&&(e.Oa=e.$.then((function(){if(!e.l){if(e.b=Gc(t,n,bh(e).name,e.R),jc(e.b,e),wh(e)&&Dl(wh(e)),e.m){Dl(e.m);var r=e.m;r.xa(e.la()),Ml(r,e),Cl(r=e.m,e.J),Il(r,e),El(r=e.m,e.R),Tl(r,e),e.m=null}return e.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Gc,this),this.u=0,kn.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.la()},set:function(e){this.xa(e)},enumerable:!1}),e.aa=null,Object.defineProperty(e,"ti",{get:function(){return this.T()},set:function(e){this.zb(e)},enumerable:!1}),e.S=null,Object.defineProperty(e,"emulatorConfig",{get:function(){if(this.R){var e=Un(this.R.url);e=ei({protocol:e.c,host:e.a,port:e.g,options:ei({disableWarnings:this.R.ec})})}else e=null;return e},enumerable:!1})}(this),this.J=[],this.R=null}function hh(e){Zt.call(this,"languageCodeChanged"),this.h=e}function fh(e){Zt.call(this,"emulatorConfigChanged"),this.c=e}function dh(e){Zt.call(this,"frameworkChanged"),this.f=e}function ph(e){return e.Oa||xt(new T("auth-domain-config-required"))}function mh(e){if(!Dr())return xt(new T("operation-not-supported-in-this-environment"));var t=ph(e).then((function(){return e.b.ra()})).then((function(e){return e?ei(e):null}));return Sh(e,t)}function vh(e,t){var n={};return n.apiKey=bh(e).options.apiKey,n.authDomain=bh(e).options.authDomain,n.appName=bh(e).name,e.R&&(n.emulatorConfig=e.R),e.$.then((function(){return function(e,t,n,r){var i=new Sl(e,t);return n&&(i.ha=n),r&&Cl(i,r),i.reload().then((function(){return i}))}(n,t,e.D,e.Ga())})).then((function(t){return wh(e)&&t.uid==wh(e).uid?(zl(wh(e),t),e.da(t)):(gh(e,t),Dl(t),e.da(t))})).then((function(){kh(e)}))}function gh(e,t){wh(e)&&(function(e,t){J(e.W,(function(e){return e==t}))}(wh(e),e.Ba),dn(wh(e),"tokenChanged",e.qa),dn(wh(e),"userDeleted",e.za),dn(wh(e),"userInvalidated",e.Aa),Pl(wh(e))),t&&(t.W.push(e.Ba),ln(t,"tokenChanged",e.qa),ln(t,"userDeleted",e.za),ln(t,"userInvalidated",e.Aa),0<e.u&&Al(t)),Xr(e,"currentUser",t),t&&(t.xa(e.la()),Ml(t,e),Cl(t,e.J),Il(t,e),El(t,e.R),Tl(t,e))}function yh(e,t){var n=null,r=null;return Sh(e,t.then((function(t){return n=qo(t),r=Xi(t),vh(e,t)}),(function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=ul(t.w(),e,_(e.kc,e))),n||t})).then((function(){return ei({user:wh(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function bh(e){return e.app}function wh(e){return e.currentUser}function _h(e){return wh(e)&&wh(e)._lat||null}function kh(e){if(e.ba){for(var t=0;t<e.s.length;t++)e.s[t]&&e.s[t](_h(e));if(e.W!==e.getUid()&&e.N.length)for(e.W=e.getUid(),t=0;t<e.N.length;t++)e.N[t]&&e.N[t](_h(e))}}function Sh(e,t){return e.P.push(t),t.oa((function(){Q(e.P,t)})),t}function Eh(){}function Mh(){this.a={},this.b=1e12}nh.prototype.yb=function(e){var t=null,n=this;return function(e){var t=new T("invalid-persistence-type"),n=new T("unsupported-persistence-type");e:{for(r in nc)if(nc[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(Er()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!Nu()&&"none"!==e)throw n;break;default:if(!Rr()&&"none"!==e)throw n}}(e),ch(this,(function(){return e!=n.c.F?n.b.get(n.c,n.a).then((function(r){return t=r,rh(n,e)})).then((function(){if(n.c=oh(e),t)return n.b.set(n.c,t,n.a)})):It()}))},E(lh,kn),E(hh,Zt),E(fh,Zt),E(dh,Zt),(e=lh.prototype).yb=function(e){return Sh(this,e=this.i.yb(e))},e.xa=function(e){this.aa===e||this.l||(this.aa=e,as(this.a,this.aa),this.dispatchEvent(new hh(this.la())))},e.la=function(){return this.aa},e.fd=function(){var e=s.navigator;this.xa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.gd=function(e,t){if(!this.R){if(!/^https?:\/\//.test(e))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(e){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!e&&wr().then((function(){var e=s.document.createElement("div");e.innerText="Running in emulator mode. Do not use with production credentials.",e.style.position="fixed",e.style.width="100%",e.style.backgroundColor="#ffffff",e.style.border=".1em solid #000000",e.style.color="#b50000",e.style.bottom="0px",e.style.left="0px",e.style.margin="0px",e.style.zIndex=1e4,e.style.textAlign="center",e.classList.add("firebase-emulator-warning"),s.document.body.appendChild(e)}))})(t=!!t&&!!t.disableWarnings),this.R={url:e,ec:t},this.settings.jb=!0,ss(this.a,this.R),this.dispatchEvent(new fh(this.R))}},e.Gc=function(e){this.J.push(e),cs(this.a,er.SDK_VERSION?Ar(er.SDK_VERSION,this.J):null),this.dispatchEvent(new dh(this.J))},e.Ga=function(){return X(this.J)},e.zb=function(e){this.S===e||this.l||(this.S=e,this.a.b=this.S)},e.T=function(){return this.S},e.toJSON=function(){return{apiKey:bh(this).options.apiKey,authDomain:bh(this).options.authDomain,appName:bh(this).name,currentUser:wh(this)&&wh(this).w()}},e.Gb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.na=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?_(this.ic,this):null},e.ic=function(e,t,n,r){var i=this,o={requestUri:e,postBody:r,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return yh(i,Ss(i.a,o))}))},e.Xc=function(e){if(!Dr())return xt(new T("operation-not-supported-in-this-environment"));var t=this,n=Zi(e.providerId),r=qr(),i=null;(!jr()||kr())&&bh(this).options.authDomain&&e.isOAuthProvider&&(i=_u(bh(this).options.authDomain,bh(this).options.apiKey,bh(this).name,"signInViaPopup",e,null,r,er.SDK_VERSION||null,null,null,this.T(),this.R));var o=gr(i,n&&n.va,n&&n.ua);return Sh(this,n=ph(this).then((function(n){return qc(n,o,"signInViaPopup",e,r,!!i,t.T())})).then((function(){return new _t((function(e,n){t.na("signInViaPopup",null,new T("cancelled-popup-request"),t.g),t.f=e,t.C=n,t.g=r,t.c=Wc(t.b,t,"signInViaPopup",o,r)}))})).then((function(e){return o&&vr(o),e?ei(e):null})).o((function(e){throw o&&vr(o),e})))},e.Yc=function(e){if(!Dr())return xt(new T("operation-not-supported-in-this-environment"));var t=this;return Sh(this,ph(this).then((function(){return function(e){return ch(e,(function(){return e.b.set(ih,e.c.F,e.a)}))}(t.i)})).then((function(){return Vc(t.b,"signInViaRedirect",e,void 0,t.T())})))},e.ra=function(){var e=this;return mh(this).then((function(t){return e.b&&Jc(e.b.b),t})).o((function(t){throw e.b&&Jc(e.b.b),t}))},e.dd=function(e){if(!e)return xt(new T("null-user"));if(this.S!=e.tenantId)return xt(new T("tenant-id-mismatch"));var t=this,n={};n.apiKey=bh(this).options.apiKey,n.authDomain=bh(this).options.authDomain,n.appName=bh(this).name;var r=function(e,t,n,r){var i=e.h,o={};return o[ts]=i.b&&i.b.toString(),o.refreshToken=i.a,t=new Sl(t||{apiKey:e.l,authDomain:e.s,appName:e.m},o),n&&(t.ha=n),r&&Cl(t,r),zl(t,e),t}(e,n,t.D,t.Ga());return Sh(this,this.h.then((function(){if(bh(t).options.apiKey!=e.l)return r.reload()})).then((function(){return wh(t)&&e.uid==wh(t).uid?(zl(wh(t),e),t.da(e)):(gh(t,r),Dl(r),t.da(r))})).then((function(){kh(t)})))},e.Bb=function(){var e=this;return Sh(this,this.h.then((function(){return e.b&&Jc(e.b.b),wh(e)?(gh(e,null),sh(e.i).then((function(){kh(e)}))):It()})))},e.Zc=function(){var e=this;return uh(this.i,bh(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=wh(e)&&t){n=wh(e).uid;var r=t.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return zl(wh(e),t),wh(e).I();(wh(e)||t)&&(gh(e,t),t&&(Dl(t),t.ha=e.D),e.b&&jc(e.b,e),kh(e))}}))},e.da=function(e){return ah(this.i,e)},e.mc=function(){kh(this),this.da(wh(this))},e.wc=function(){this.Bb()},e.xc=function(){this.Bb()},e.kc=function(e){var t=this;return this.h.then((function(){return yh(t,It(e))}))},e.zc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(wh(t))}))},e.Ac=function(e){var t=this;!function(e,t){e.N.push(t),Sh(e,e.h.then((function(){!e.l&&Y(e.N,t)&&e.W!==e.getUid()&&(e.W=e.getUid(),t(_h(e)))})))}(this,(function(){e.next(wh(t))}))},e.Ic=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof e?e(wh(r)):"function"==typeof e.next&&e.next(wh(r))})),this.Pa(e,t,n)},e.Hc=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof e?e(wh(r)):"function"==typeof e.next&&e.next(wh(r))})),this.ib(e,t,n)},e.nc=function(e){var t=this;return Sh(this,this.h.then((function(){return wh(t)?wh(t).I(e).then((function(e){return{accessToken:e}})):null})))},e.Tc=function(e){var t=this;return this.h.then((function(){return yh(t,au(t.a,eu,{token:e}))})).then((function(e){var n=e.user;return ql(n,"isAnonymous",!1),t.da(n),e}))},e.Uc=function(e,t){var n=this;return this.h.then((function(){return yh(n,au(n.a,tu,{email:e,password:t}))}))},e.dc=function(e,t){var n=this;return this.h.then((function(){return yh(n,au(n.a,xs,{email:e,password:t}))}))},e.ab=function(e){var t=this;return this.h.then((function(){return yh(t,e.ka(t.a))}))},e.Sc=function(e){return Jr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(e)},e.Ab=function(){var e=this;return this.h.then((function(){var t=wh(e);if(t&&t.isAnonymous){var n=ei({providerId:null,isNewUser:!1});return ei({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return yh(e,e.a.Ab()).then((function(t){var n=t.user;return ql(n,"isAnonymous",!0),e.da(n),t}))}))},e.getUid=function(){return wh(this)&&wh(this).uid||null},e.cc=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&wh(this)&&Al(wh(this))},e.Pc=function(e){var t=this;W(this.s,(function(n){n==e&&t.u--})),0>this.u&&(this.u=0),0==this.u&&wh(this)&&Pl(wh(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.s.push(e),Sh(this,this.h.then((function(){t.l||Y(t.s,e)&&e(_h(t))})))},e.removeAuthTokenListener=function(e){J(this.s,(function(t){return t==e}))},e.delete=function(){this.l=!0;for(var e=0;e<this.P.length;e++)this.P[e].cancel("app-deleted");return this.P=[],this.i&&(e=this.i).b.removeListener(oh("local"),e.a,this.ja),this.b&&(Bc(this.b,this),Jc(this.b.b)),Promise.resolve()},e.hc=function(e){return Sh(this,function(e,t){return au(e,As,{identifier:t,continueUri:Nr()?fr():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.a,e))},e.Bc=function(e){return!!No(e)},e.xb=function(e,t){var n=this;return Sh(this,It().then((function(){var e=new Oi(t);if(!e.c)throw new T("argument-error",Ni+" must be true when sending sign in link to email");return zi(e)})).then((function(t){return n.a.xb(e,t)})).then((function(){})))},e.jd=function(e){return this.Sa(e).then((function(e){return e.data.email}))},e.ob=function(e,t){return Sh(this,this.a.ob(e,t).then((function(){})))},e.Sa=function(e){return Sh(this,this.a.Sa(e).then((function(e){return new ci(e)})))},e.kb=function(e){return Sh(this,this.a.kb(e).then((function(){})))},e.wb=function(e,t){var n=this;return Sh(this,It().then((function(){return void 0===t||pe(t)?{}:zi(new Oi(t))})).then((function(t){return n.a.wb(e,t)})).then((function(){})))},e.Wc=function(e,t){return Sh(this,nl(this,e,t,_(this.ab,this)))},e.Vc=function(e,t){var n=this;return Sh(this,It().then((function(){var r=t||fr(),i=Do(e,r);if(!(r=No(r)))throw new T("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new T("tenant-id-mismatch");return n.ab(i)})))},Eh.prototype.render=function(){},Eh.prototype.reset=function(){},Eh.prototype.getResponse=function(){},Eh.prototype.execute=function(){};var Th=null;function Ch(e,t){return(t=Ih(t))&&e.a[t]||null}function Ih(e){return(e=void 0===e?1e12:e)?e.toString():null}function xh(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ct(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():ln(this.f,"click",this.i)}function Ah(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Ph(){}function Oh(){}Mh.prototype.render=function(e,t){return this.a[this.b.toString()]=new xh(e,t),this.b++},Mh.prototype.reset=function(e){var t=Ch(this,e);e=Ih(e),t&&e&&(t.delete(),delete this.a[e])},Mh.prototype.getResponse=function(e){return(e=Ch(this,e))?e.getResponse():null},Mh.prototype.execute=function(e){(e=Ch(this,e))&&e.execute()},xh.prototype.getResponse=function(){return Ah(this),this.b},xh.prototype.execute=function(){Ah(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(e){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(e){}e.h&&e.execute()}),6e4)}),500))},xh.prototype.delete=function(){Ah(this),this.g=!0,clearTimeout(this.a),this.a=null,dn(this.f,"click",this.i)},Xr(Ph,"FACTOR_ID","phone"),Oh.prototype.g=function(){return Th||(Th=new Mh),It(Th)},Oh.prototype.c=function(){};var Rh=null;function Dh(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Nh=new be(Se,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Lh=new Wr(3e4,6e4);Dh.prototype.g=function(e){var t=this;return new _t((function(n,r){var i=setTimeout((function(){r(new T("network-request-failed"))}),Lh.get());!s.grecaptcha||e!==t.f&&!t.b?(s[t.a]=function(){if(s.grecaptcha){t.f=e;var o=s.grecaptcha.render;s.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new T("internal-error"));delete s[t.a]},It(Ka(Ce(Nh,{onload:t.a,hl:e||""}))).o((function(){clearTimeout(i),r(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Dh.prototype.c=function(){this.b--};var jh=null;function Bh(e,t,n,r,i,o,a){if(Xr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=t,this.g=null,a?(Rh||(Rh=new Oh),a=Rh):(jh||(jh=new Dh),a=jh),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[qh])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[zh],!s.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ct(t)||!this.i&&ct(t).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new $a(e,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Fh];this.a[Fh]=function(e){if(Vh(u,e),"function"==typeof c)c(e);else if("string"==typeof c){var t=Or(c,s);"function"==typeof t&&t(e)}};var l=this.a[Uh];this.a[Uh]=function(){if(Vh(u,null),"function"==typeof l)l();else if("string"==typeof l){var e=Or(l,s);"function"==typeof e&&e()}}}var Fh="callback",Uh="expired-callback",qh="sitekey",zh="size";function Vh(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(e){}}function Wh(e,t){return e.h.push(t),t.oa((function(){Q(e.h,t)})),t}function Hh(e){if(e.J)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}function Kh(e,t,n){var r=!1;try{this.b=n||er.app()}catch(e){throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new T("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(e){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(e){}o=er.SDK_VERSION?Ar(er.SDK_VERSION,o):null,Bh.call(this,n,e,t,(function(){try{var e=i.b.auth().la()}catch(t){e=null}return e}),o,O(I),r)}function Gh(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],0>i||i>=Yh.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");n=Yh[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new T("argument-error",e+" failed: "+r)}(e=Bh.prototype).Ia=function(){var e=this;return this.f?this.f:this.f=Wh(this,It().then((function(){if(Nr()&&!Sr())return wr();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.u())})).then((function(t){return e.g=t,au(e.s,Vs,{})})).then((function(t){e.a[qh]=t.recaptchaSiteKey})).o((function(t){throw e.f=null,t})))},e.render=function(){Hh(this);var e=this;return Wh(this,this.Ia().then((function(){if(null===e.c){var t=e.v;if(!e.i){var n=ct(t);t=function(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ut&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',We(a.name),'"'),a.type){o.push(' type="',We(a.type),'"');var s={};ge(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=mt(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):lt(o,a)),2<r.length&&pt(i,o,r),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},e.verify=function(){Hh(this);var e=this;return Wh(this,this.render().then((function(t){return new _t((function(n){var r=e.g.getResponse(t);if(r)n(r);else{var i=function(t){t&&(function(e,t){J(e.l,(function(e){return e==t}))}(e,i),n(t))};e.l.push(i),e.i&&e.g.execute(e.c)}}))})))},e.reset=function(){Hh(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Hh(this),this.J=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=ct(this.v);for(var t;t=e.firstChild;)e.removeChild(t)}},E(Kh,Bh);var Yh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Qh(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:function(e){return"string"==typeof e}}}function Jh(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:function(e){return"boolean"==typeof e}}}function Zh(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:m}}function Xh(e,t){return{name:e||"",K:"a function",optional:!!t,M:function(e){return"function"==typeof e}}}function $h(e,t){return{name:e||"",K:"null",optional:!!t,M:function(e){return null===e}}}function ef(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ka||!n)}}}function tf(e,t){return m(e)&&"string"==typeof e.type&&e.type===t&&"function"==typeof e.Ha}function nf(e){return m(e)&&"string"==typeof e.uid}function rf(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function of(e,t){for(var n in t){var r=t[n].name;e[r]=uf(r,e[n],t[n].j)}}function af(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:k((function(e){return this[e]}),n),set:k((function(e,t,n,r){Gh(e,[n],[r],!0),this[t]=r}),r,n,t[n].lb),enumerable:!0})}}function sf(e,t,n,r){e[t]=uf(t,n,r)}function uf(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Gh(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}of(lh.prototype,{kb:{name:"applyActionCode",j:[Qh("code")]},Sa:{name:"checkActionCode",j:[Qh("code")]},ob:{name:"confirmPasswordReset",j:[Qh("code"),Qh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Qh("email"),Qh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Qh("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Qh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[rf(Zh(),Xh(),"nextOrObserver"),Xh("opt_error",!0),Xh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[rf(Zh(),Xh(),"nextOrObserver"),Xh("opt_error",!0),Xh("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Qh("email"),rf(Zh("opt_actionCodeSettings",!0),$h(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Qh("email"),Zh("actionCodeSettings")]},yb:{name:"setPersistence",j:[Qh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[ef()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[ef()]},Tc:{name:"signInWithCustomToken",j:[Qh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Qh("email"),Qh("password")]},Vc:{name:"signInWithEmailLink",j:[Qh("email"),Qh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Qh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[rf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof Sl)}},$h(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Qh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Qh("url"),Zh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Qh("code")]}}),af(lh.prototype,{lc:{name:"languageCode",lb:rf(Qh(),$h(),"languageCode")},ti:{name:"tenantId",lb:rf(Qh(),$h(),"tenantId")}}),lh.Persistence=nc,lh.Persistence.LOCAL="local",lh.Persistence.SESSION="session",lh.Persistence.NONE="none",of(Sl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Jh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Jh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[ef()]},rb:{name:"linkWithCredential",j:[ef()]},Dc:{name:"linkWithPhoneNumber",j:[Qh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[ef()]},ub:{name:"reauthenticateWithCredential",j:[ef()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Qh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[rf(Zh("opt_actionCodeSettings",!0),$h(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Qh(null,!0)]},cd:{name:"unlink",j:[Qh("provider")]},Cb:{name:"updateEmail",j:[Qh("email")]},Db:{name:"updatePassword",j:[Qh("password")]},ed:{name:"updatePhoneNumber",j:[ef("phone")]},Eb:{name:"updateProfile",j:[Zh("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Qh("email"),rf(Zh("opt_actionCodeSettings",!0),$h(null,!0),"opt_actionCodeSettings",!0)]}}),of(Mh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),of(Eh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),of(_t.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),af(el.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Jh("appVerificationDisabledForTesting")}}),of(tl.prototype,{confirm:{name:"confirm",j:[Qh("verificationCode")]}}),sf(ho,"fromJSON",(function(e){e="string"==typeof e?JSON.parse(e):e;for(var t,n=[bo,Oo,jo,vo],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[rf(Qh(),Zh(),"json")]),sf(Ro,"credential",(function(e,t){return new Po(e,t)}),[Qh("email"),Qh("password")]),of(Po.prototype,{w:{name:"toJSON",j:[Qh(null,!0)]}}),of(So.prototype,{Ca:{name:"addScope",j:[Qh("scope")]},Ka:{name:"setCustomParameters",j:[Zh("customOAuthParameters")]}}),sf(So,"credential",Eo,[rf(Qh(),Zh(),"token")]),sf(Ro,"credentialWithLink",Do,[Qh("email"),Qh("emailLink")]),of(Mo.prototype,{Ca:{name:"addScope",j:[Qh("scope")]},Ka:{name:"setCustomParameters",j:[Zh("customOAuthParameters")]}}),sf(Mo,"credential",To,[rf(Qh(),Zh(),"token")]),of(Co.prototype,{Ca:{name:"addScope",j:[Qh("scope")]},Ka:{name:"setCustomParameters",j:[Zh("customOAuthParameters")]}}),sf(Co,"credential",Io,[rf(Qh(),rf(Zh(),$h()),"idToken"),rf(Qh(),$h(),"accessToken",!0)]),of(xo.prototype,{Ka:{name:"setCustomParameters",j:[Zh("customOAuthParameters")]}}),sf(xo,"credential",Ao,[rf(Qh(),Zh(),"token"),Qh("secret",!0)]),of(ko.prototype,{Ca:{name:"addScope",j:[Qh("scope")]},credential:{name:"credential",j:[rf(Qh(),rf(Zh(),$h()),"optionsOrIdToken"),rf(Qh(),$h(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Zh("customOAuthParameters")]}}),of(go.prototype,{w:{name:"toJSON",j:[Qh(null,!0)]}}),of(po.prototype,{w:{name:"toJSON",j:[Qh(null,!0)]}}),sf(Fo,"credential",Uo,[Qh("verificationId"),Qh("verificationCode")]),of(Fo.prototype,{gb:{name:"verifyPhoneNumber",j:[rf(Qh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(e){return!!e&&(e.session&&e.phoneNumber?tf(e.session,co)&&"string"==typeof e.phoneNumber:e.session&&e.multiFactorHint?tf(e.session,lo)&&nf(e.multiFactorHint):e.session&&e.multiFactorUid?tf(e.session,lo)&&"string"==typeof e.multiFactorUid:!!e.phoneNumber&&"string"==typeof e.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!=typeof e.type||"function"!=typeof e.verify)}}]}}),of(Lo.prototype,{w:{name:"toJSON",j:[Qh(null,!0)]}}),of(T.prototype,{toJSON:{name:"toJSON",j:[Qh(null,!0)]}}),of(Qo.prototype,{toJSON:{name:"toJSON",j:[Qh(null,!0)]}}),of(Yo.prototype,{toJSON:{name:"toJSON",j:[Qh(null,!0)]}}),of(sl.prototype,{toJSON:{name:"toJSON",j:[Qh(null,!0)]}}),of(il.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.tb}}]}}),of(dl.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.tb}},Qh("displayName",!0)]},bd:{name:"unenroll",j:[rf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:nf},Qh(),"multiFactorInfoIdentifier")]}}),of(Kh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),sf(Si,"parseLink",Pi,[Qh("link")]),sf(Ph,"assertion",(function(e){return new hl(e)}),[ef("phone")]),function(){if(void 0===er||!er.INTERNAL||!er.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:hi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:li,VERIFY_AND_CHANGE_EMAIL:fi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:lh,AuthCredential:ho,Error:T};sf(e,"EmailAuthProvider",Ro,[]),sf(e,"FacebookAuthProvider",So,[]),sf(e,"GithubAuthProvider",Mo,[]),sf(e,"GoogleAuthProvider",Co,[]),sf(e,"TwitterAuthProvider",xo,[]),sf(e,"OAuthProvider",ko,[Qh("providerId")]),sf(e,"SAMLAuthProvider",_o,[Qh("providerId")]),sf(e,"PhoneAuthProvider",Fo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof lh)}}]),sf(e,"RecaptchaVerifier",Kh,[rf(Qh(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),Zh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof er.app.App)}}]),sf(e,"ActionCodeURL",Si,[]),sf(e,"PhoneMultiFactorGenerator",Ph,[]),er.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new lh(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(e){e.getProvider("auth-internal").initialize()}}),er.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:_((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:_(e.nc,e),addAuthTokenListener:_(e.cc,e),removeAuthTokenListener:_(e.Pc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),er.registerVersion("@firebase/auth","0.16.8"),er.INTERNAL.extendNamespace({User:Sl})}()}.apply(void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});o.register("77Jfo",(function(e,t){"use strict";var n=o("6RDd7"),r=o("1TrDb"),i=o("5zxIY"),a=o("6hYqr");function s(e){var t=new i(e),o=r(i.prototype.request,t);return n.extend(o,i.prototype,t),n.extend(o,t),o}var u=s(o("nVkK6"));u.Axios=i,u.create=function(e){return s(a(u.defaults,e))},u.Cancel=o("6EOPV"),u.CancelToken=o("6aEsB"),u.isCancel=o("6eB1R"),u.all=function(e){return Promise.all(e)},u.spread=o("7L8n1"),u.isAxiosError=o("3UF4m"),e.exports=u,e.exports.default=u})),o.register("6RDd7",(function(e,t){"use strict";var n=o("1TrDb"),r=Object.prototype.toString;function i(e){return"[object Array]"===r.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function u(e){if("[object Object]"!==r.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===r.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:u,isUndefined:a,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function e(){var t={};function n(n,r){u(t[r])&&u(n)?t[r]=e(t[r],n):u(n)?t[r]=e({},n):i(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)l(arguments[r],n);return t},extend:function(e,t,r){return l(t,(function(t,i){e[i]=r&&"function"==typeof t?n(t,r):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}})),o.register("1TrDb",(function(e,t){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}})),o.register("5zxIY",(function(e,t){"use strict";var n=o("6RDd7"),r=o("2z8O1"),i=o("4w4it"),a=o("2AS5r"),s=o("6hYqr"),u=o("PwX1x"),c=u.validators;function l(e){this.defaults=e,this.interceptors={request:new i,response:new i}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&u.assertOptions(t,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var i,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!r){var l=[a,void 0];for(Array.prototype.unshift.apply(l,n),l.concat(o),i=Promise.resolve(e);l.length;)i=i.then(l.shift(),l.shift());return i}for(var h=e;n.length;){var f=n.shift(),d=n.shift();try{h=f(h)}catch(e){d(e);break}}try{i=a(h)}catch(e){return Promise.reject(e)}for(;o.length;)i=i.then(o.shift(),o.shift());return i},l.prototype.getUri=function(e){return e=s(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=l})),o.register("2z8O1",(function(e,t){"use strict";var n=o("6RDd7");function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,i){if(!t)return e;var o;if(i)o=i(t);else if(n.isURLSearchParams(t))o=t.toString();else{var a=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}})),o.register("4w4it",(function(e,t){"use strict";var n=o("6RDd7");function r(){this.handlers=[]}r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r})),o.register("2AS5r",(function(e,t){"use strict";var n=o("6RDd7"),r=o("9EmR4"),i=o("6eB1R"),a=o("nVkK6");function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(s(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}})),o.register("9EmR4",(function(e,t){"use strict";var n=o("6RDd7"),r=o("nVkK6");e.exports=function(e,t,i){var o=this||r;return n.forEach(i,(function(n){e=n.call(o,e,t)})),e}})),o.register("nVkK6",(function(e,t){var n=o("7lbf0"),r=o("6RDd7"),i=o("6pXOn"),a=o("4FrPj"),s={"Content-Type":"application/x-www-form-urlencoded"};function u(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,l={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==n&&"[object process]"===Object.prototype.toString.call(n))&&(c=o("7rdhw")),c),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(u(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(u(t,"application/json"),JSON.stringify(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw a(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(s)})),e.exports=l})),o.register("7lbf0",(function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}})),o.register("6pXOn",(function(e,t){"use strict";var n=o("6RDd7");e.exports=function(e,t){n.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}})),o.register("4FrPj",(function(e,t){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}})),o.register("7rdhw",(function(e,t){"use strict";var n=o("6RDd7"),r=o("12yYJ"),i=o("7wpGN"),a=o("2z8O1"),s=o("7oHk1"),u=o("RkgUK"),c=o("2vBuo"),l=o("6rU6y");e.exports=function(e){return new Promise((function(t,o){var h=e.data,f=e.headers,d=e.responseType;n.isFormData(h)&&delete f["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",v=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";f.Authorization="Basic "+btoa(m+":"+v)}var g=s(e.baseURL,e.url);function y(){if(p){var n="getAllResponseHeaders"in p?u(p.getAllResponseHeaders()):null,i={data:d&&"text"!==d&&"json"!==d?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:n,config:e,request:p};r(t,o,i),p=null}}if(p.open(e.method.toUpperCase(),a(g,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,"onloadend"in p?p.onloadend=y:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(y)},p.onabort=function(){p&&(o(l("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){o(l("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),o(l(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var b=(e.withCredentials||c(g))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;b&&(f[e.xsrfHeaderName]=b)}"setRequestHeader"in p&&n.forEach(f,(function(e,t){void 0===h&&"content-type"===t.toLowerCase()?delete f[t]:p.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),d&&"json"!==d&&(p.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),o(e),p=null)})),h||(h=null),p.send(h)}))}})),o.register("12yYJ",(function(e,t){"use strict";var n=o("6rU6y");e.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}})),o.register("6rU6y",(function(e,t){"use strict";var n=o("4FrPj");e.exports=function(e,t,r,i,o){var a=new Error(e);return n(a,t,r,i,o)}})),o.register("7wpGN",(function(e,t){"use strict";var n=o("6RDd7");e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(i)&&s.push("path="+i),n.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}})),o.register("7oHk1",(function(e,t){"use strict";var n=o("1gHMv"),r=o("6SL6e");e.exports=function(e,t){return e&&!n(t)?r(e,t):t}})),o.register("1gHMv",(function(e,t){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}})),o.register("6SL6e",(function(e,t){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}})),o.register("RkgUK",(function(e,t){"use strict";var n=o("6RDd7"),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,i,o,a={};return e?(n.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=n.trim(e.substr(0,o)).toLowerCase(),i=n.trim(e.substr(o+1)),t){if(a[t]&&r.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([i]):a[t]?a[t]+", "+i:i}})),a):a}})),o.register("2vBuo",(function(e,t){"use strict";var n=o("6RDd7");e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=i(window.location.href),function(t){var r=n.isString(t)?i(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}})),o.register("6eB1R",(function(e,t){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}})),o.register("6hYqr",(function(e,t){"use strict";var n=o("6RDd7");e.exports=function(e,t){t=t||{};var r={},i=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function u(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function c(i){n.isUndefined(t[i])?n.isUndefined(e[i])||(r[i]=u(void 0,e[i])):r[i]=u(e[i],t[i])}n.forEach(i,(function(e){n.isUndefined(t[e])||(r[e]=u(void 0,t[e]))})),n.forEach(o,c),n.forEach(a,(function(i){n.isUndefined(t[i])?n.isUndefined(e[i])||(r[i]=u(void 0,e[i])):r[i]=u(void 0,t[i])})),n.forEach(s,(function(n){n in t?r[n]=u(e[n],t[n]):n in e&&(r[n]=u(void 0,e[n]))}));var l=i.concat(o).concat(a).concat(s),h=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return n.forEach(h,c),r}})),o.register("PwX1x",(function(e,t){"use strict";var n=o("3SVhL"),r={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){r[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var i={},a=n.version.split(".");function s(e,t){for(var n=t?t.split("."):a,r=e.split("."),i=0;i<3;i++){if(n[i]>r[i])return!0;if(n[i]<r[i])return!1}return!1}r.transitional=function(e,t,r){var o=t&&s(t);function a(e,t){return"[Axios v"+n.version+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(n,r,s){if(!1===e)throw new Error(a(r," has been removed in "+t));return o&&!i[r]&&(i[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={isOlderVersion:s,assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],a=t[o];if(a){var s=e[o],u=void 0===s||a(s,o,e);if(!0!==u)throw new TypeError("option "+o+" must be "+u)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:r}})),o.register("3SVhL",(function(e,t){e.exports=JSON.parse('{"_args":[["axios@0.21.2","/Users/lazerwalker/Code/azure-mud"]],"_from":"axios@0.21.2","_id":"axios@0.21.2","_inBundle":false,"_integrity":"sha512-87otirqUw3e8CzHTMO+/9kh/FSgXt/eVDvipijwDtEuwbkySWZ9SBm6VEubmJ/kLKEoLQV/POhxXFb66bfekfg==","_location":"/axios","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"axios@0.21.2","name":"axios","escapedName":"axios","rawSpec":"0.21.2","saveSpec":null,"fetchSpec":"0.21.2"},"_requiredBy":["/"],"_resolved":"https://registry.npmjs.org/axios/-/axios-0.21.2.tgz","_spec":"0.21.2","_where":"/Users/lazerwalker/Code/azure-mud","author":{"name":"Matt Zabriskie"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"bugs":{"url":"https://github.com/axios/axios/issues"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}],"dependencies":{"follow-redirects":"^1.14.0"},"description":"Promise based HTTP client for the browser and node.js","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"homepage":"https://axios-http.com","jsdelivr":"dist/axios.min.js","keywords":["xhr","http","ajax","promise","node"],"license":"MIT","main":"index.js","name":"axios","repository":{"type":"git","url":"git+https://github.com/axios/axios.git"},"scripts":{"build":"NODE_ENV=production grunt build","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","examples":"node ./examples/server.js","fix":"eslint --fix lib/**/*.js","postversion":"git push && git push --tags","preversion":"npm test","start":"node ./sandbox/server.js","test":"grunt test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},"typings":"./index.d.ts","unpkg":"dist/axios.min.js","version":"0.21.2"}')})),o.register("6EOPV",(function(e,t){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n})),o.register("6aEsB",(function(e,t){"use strict";var n=o("6EOPV");function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r((function(t){e=t})),cancel:e}},e.exports=r})),o.register("7L8n1",(function(e,t){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}})),o.register("3UF4m",(function(e,t){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}}));var nr=o("77Jfo").default;let rr,ir;async function or(e,t){rr=e,ir=t;const n=await mr("connect");var r;console.log(n),t(Vt(n.roomId)),t(Ht(n.users)),n.roomData&&t((r=function(e){const t={};return Object.keys(e).forEach((n=>{const r=e[n];t[n]={name:r.displayName,id:r.id,shortName:r.shortName,description:r.description,noMediaChat:r.noMediaChat,hasNoteWall:r.hasNoteWall,noteWallData:r.noteWallData,hidden:r.hidden,specialFeatures:r.specialFeatures,riddles:r.riddles}})),t}(n.roomData),{type:Bt.UpdatedRoomData,value:r})),n.profile&&t(qt(n.profile)),n.roomNotes&&t(cn(n.roomId,n.roomNotes)),t(Wt(n.presenceData)),async function(e,t){class n extends y.DefaultHttpClient{async send(e){await er.auth().currentUser.getIdToken(!1);return e.headers={...e.headers,userid:er.auth().currentUser.uid},super.send(e)}}const r=(new xt).withUrl(`${mn}/api`,{httpClient:new n(console)}).configureLogging(b.Debug).build();r.on("playerConnected",(e=>{console.log("Player joined!",e),t((e=>({type:Bt.PlayerConnected,value:e}))(e))})),r.on("playerDisconnected",(e=>{var n;console.log("Player left!",e),t((n=e,{type:Bt.PlayerDisconnected,value:n}))})),r.on("presenceData",(e=>{t(Wt(e))})),r.on("chatMessage",((n,r,i)=>{console.log("Received chat",r,i),console.log(r,i,e),r!==e&&t(((e,t,n)=>({type:Bt.ChatMessage,value:{messageId:e,name:t,message:n}}))(n,r,i))})),r.on("caption",((n,r,i)=>{console.log("Received caption",r,i),console.log(r,i,e),r!==e&&t(((e,t,n)=>({type:Bt.CaptionMessage,value:{messageId:e,name:t,message:n}}))(n,r,i))})),r.on("mods",((e,n)=>{t(((e,t)=>({type:Bt.ModMessage,value:{name:e,message:t}}))(e,n))})),r.on("deleteMessage",((e,n)=>{t(((e,t)=>({type:Bt.DeleteMessage,value:{modId:e,targetMessageId:t}}))(e,n))})),r.on("playerEntered",((n,r,i)=>{n!==e&&t(((e,t,n)=>({type:Bt.PlayerEntered,value:{name:e,fromId:t,fromName:n}}))(n,r,i))})),r.on("myProfile",(e=>{t(qt(e))})),r.on("serverSettings",(e=>{t(zt(e))})),r.on("whisper",((e,n)=>{t(((e,t)=>({type:Bt.Whisper,value:{name:e,message:t}}))(e,n))})),r.on("privateCommand",(e=>{t(ln(e))})),r.on("privateItemPickup",(e=>{t(ln(e))})),r.on("playerLeft",((n,r,i)=>{n!==e&&t(((e,t,n)=>({type:Bt.PlayerLeft,value:{name:e,toId:t,toName:n}}))(n,r,i))})),r.on("usernameMap",(e=>{console.log("Received map",e),t(Ht(e))})),r.on("playerBanned",(e=>{t(Kt(e))})),r.on("playerUnbanned",(e=>{t((e=>({type:Bt.PlayerUnbanned,value:e}))(e))})),r.on("clientDeployed",(()=>{t(en(fn.ClientDeployed))})),r.on("shout",((e,n,r)=>{t(((e,t,n)=>({type:Bt.Shout,value:{messageId:e,name:t,message:n}}))(e,n,r))})),r.on("emote",((e,n,r)=>{t(((e,t,n)=>({type:Bt.Emote,value:{messageId:e,name:t,message:n}}))(e,n,r))})),r.on("dance",((e,n,r)=>{t(((e,t,n)=>({type:Bt.Dance,value:{messageId:e,name:t,message:n}}))(e,n,r))})),r.on("noteAdded",((e,n,r,i)=>{t(((e,t)=>({type:Bt.NoteAdd,value:{roomId:e,note:t}}))(e,{id:n,message:r,authorId:i}))})),r.on("noteRemoved",((e,n)=>{t(((e,t)=>({type:Bt.NoteRemove,value:{roomId:e,noteId:t}}))(e,n))})),r.on("noteLikesUpdated",((e,n,r)=>{t(((e,t,n)=>({type:Bt.NoteUpdateLikes,value:{roomId:e,noteId:t,likes:n}}))(e,n,r))})),r.on("spaceOpenedOrClosed",(e=>{var n;t((n=e,{type:Bt.SpaceOpenedOrClosed,value:n}))})),r.onclose((()=>{console.log("disconnected"),mr("disconnect")})),r.on("ping",(()=>{console.log("Received heartbeat ping"),mr("pong")})),window.addEventListener("beforeunload",(e=>{mr("disconnect")})),console.log("connecting..."),await r.start().then((()=>{console.log("Connected!")})).catch(console.error)}(e,t)}async function ar(e){const t=await async function(e){try{const t=await er.auth().currentUser.getIdToken(!1),n=await nr.get(`${mn}/api/${e}`,{withCredentials:!0,headers:{Authorization:`Bearer ${t}`}});return console.log(n),n.data}catch(e){return void console.log("Error",e)}}("serverSettings");e(zt(t))}async function sr(e){await mr("serverSettings",e)&&ir(tn())}async function ur(e,t){await mr("updateFontReward",{userId:e,font:t})}async function cr(e){await mr("pickUpItem",{item:e})}async function lr(e){await mr("displayMessage",{list:e})}async function hr(e){await mr("deleteRoomNote",{noteId:e})}async function fr(e){const t=await mr("moveRoom",{to:e});console.log(t),t.error?ir(Jt(t.error)):(ir(Vt(t.roomId)),t.roomNotes&&ir(cn(t.roomId,t.roomNotes)))}async function dr(e,t){if(t.length>hn)return void console.log("Sorry, can't send messages over 631 characters!");const n=await mr("sendChatMessage",{id:e,text:t});console.log(n),n&&n.roomId?ir(Vt(n.roomId)):n&&n.user?ir($t(n.user)):n&&n.error&&ir(Jt(n.error))}async function pr(e){const t=await mr("fetchProfile",{userId:e});t.error?console.log("Could not fetch profile",t.erroc):ir($t(t.user))}async function mr(e,t){try{const n=await er.auth().currentUser.getIdToken(!1),r=await nr.post(`${mn}/api/${e}`,t,{withCredentials:!0,headers:{Authorization:`Bearer ${n}`}});return console.log(r),r.data}catch(e){return void console.log("Error",e)}}var vr={};t(vr,"GenIcon",(()=>kr),(e=>kr=e));a=o("6Ti1v"),a=o("6Ti1v");var gr={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},yr=a.createContext&&a.createContext(gr),br=function(){return(br=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},wr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};function _r(e){return e&&e.map((function(e,t){return a.createElement(e.tag,br({key:t},e.attr),_r(e.child))}))}function kr(e){return function(t){return a.createElement(Sr,br({attr:br({},e.attr)},t),_r(e.child))}}function Sr(e){var t=function(t){var n,r=e.size||t.size||"1em";t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className);var i=e.attr,o=e.title,s=wr(e,["attr","title"]);return a.createElement("svg",br({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,s,{className:n,style:br({color:e.color||t.color},t.style,e.style),height:r,width:r,xmlns:"http://www.w3.org/2000/svg"}),o&&a.createElement("title",null,o),e.children)};return void 0!==yr?a.createElement(yr.Consumer,null,(function(e){return t(e)})):t(gr)}var Er=function(e){return vr.GenIcon({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}}]})(e)};Er.displayName="FaChevronDown";var Mr=function(e){return vr.GenIcon({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"}}]})(e)};Mr.displayName="FaChevronUp";var Tr=function(e){return vr.GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]})(e)};Tr.displayName="FaCog";var Cr=function(e){return vr.GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M104 224H24c-13.255 0-24 10.745-24 24v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V248c0-13.255-10.745-24-24-24zM64 472c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zM384 81.452c0 42.416-25.97 66.208-33.277 94.548h101.723c33.397 0 59.397 27.746 59.553 58.098.084 17.938-7.546 37.249-19.439 49.197l-.11.11c9.836 23.337 8.237 56.037-9.308 79.469 8.681 25.895-.069 57.704-16.382 74.757 4.298 17.598 2.244 32.575-6.148 44.632C440.202 511.587 389.616 512 346.839 512l-2.845-.001c-48.287-.017-87.806-17.598-119.56-31.725-15.957-7.099-36.821-15.887-52.651-16.178-6.54-.12-11.783-5.457-11.783-11.998v-213.77c0-3.2 1.282-6.271 3.558-8.521 39.614-39.144 56.648-80.587 89.117-113.111 14.804-14.832 20.188-37.236 25.393-58.902C282.515 39.293 291.817 0 312 0c24 0 72 8 72 81.452z"}}]})(e)};Cr.displayName="FaThumbsUp";var Ir=function(e){return vr.GenIcon({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)};Ir.displayName="FaUser";var xr=function(e){return vr.GenIcon({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.8 458.1l-55-42.5c15.4-1.4 29.2-13.7 29.2-31.1v-257c0-25.5-29.1-40.4-50.4-25.8L448 177.3v137.2l-32-24.7v-178c0-26.4-21.4-47.8-47.8-47.8H123.9L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4L42.7 82 416 370.6l178.5 138c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.5-6.9 4.2-17-2.8-22.4zM32 400.2c0 26.4 21.4 47.8 47.8 47.8h288.4c11.2 0 21.4-4 29.6-10.5L32 154.7v245.5z"}}]})(e)};xr.displayName="FaVideoSlash";var Ar=function(e){return vr.GenIcon({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"}}]})(e)};Ar.displayName="FaVideo";var Pr=function(e){return vr.GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"}}]})(e)};Pr.displayName="FaVolumeMute";var Or=function(e){return vr.GenIcon({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"}}]})(e)};Or.displayName="FaVolumeUp";var Rr=function(e){return vr.GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.27 286.69C475.04 271.84 480 256 480 236.85c0-44.015-37.218-85.58-85.82-85.58H357.7c4.92-12.81 8.85-28.13 8.85-46.54C366.55 31.936 328.86 0 271.28 0c-61.607 0-58.093 94.933-71.76 108.6-22.747 22.747-49.615 66.447-68.76 83.4H32c-17.673 0-32 14.327-32 32v240c0 17.673 14.327 32 32 32h64c14.893 0 27.408-10.174 30.978-23.95 44.509 1.001 75.06 39.94 177.802 39.94 7.22 0 15.22.01 22.22.01 77.117 0 111.986-39.423 112.94-95.33 13.319-18.425 20.299-43.122 17.34-66.99 9.854-18.452 13.664-40.343 8.99-62.99zm-61.75 53.83c12.56 21.13 1.26 49.41-13.94 57.57 7.7 48.78-17.608 65.9-53.12 65.9h-37.82c-71.639 0-118.029-37.82-171.64-37.82V240h10.92c28.36 0 67.98-70.89 94.54-97.46 28.36-28.36 18.91-75.63 37.82-94.54 47.27 0 47.27 32.98 47.27 56.73 0 39.17-28.36 56.72-28.36 94.54h103.99c21.11 0 37.73 18.91 37.82 37.82.09 18.9-12.82 37.81-22.27 37.81 13.489 14.555 16.371 45.236-5.21 65.62zM88 432c0 13.255-10.745 24-24 24s-24-10.745-24-24 10.745-24 24-24 24 10.745 24 24z"}}]})(e)};Rr.displayName="FaRegThumbsUp";const Dr={id:"theater",displayName:"Theater",shortName:"the theater",description:'A stage, confusingly decorated with Halloween skulls and streamers. There are a few dozen flimsy metal chairs you can sit in, plus some comfy couches in the back. <br/><br/>You can return to the [[hall]]. Or if you\'d like to speak to one of our speakers after their talk, you can head to breakout rooms: [[Warrior->warrior]], [[Mage->mage]], [[Rogue->rogue]], or [[Tourist->tourist]]. (Check the "Happening Now" button on the left for speaker room assignments!)\n        <br/><br/>\n        <a href="stream.html" onClick="window.open(\'stream.html#\' + window.getComputedStyle(document.body).getPropertyValue(\'background-color\'), \'stream\', \'width=560,height=460\'); return false">Pop Out Stream</a>. <a href="https://www.streamtext.net/player?event=RoguelikeCelebration" target="_blank">Pop Out Live Captions</a>.<br/>\n        ',noMediaChat:!0,hasNoteWall:!0,noteWallData:{roomWallDescription:'There is a whiteboard set up to the side with "SPEAKER QUESTIONS" written at the top. "Questions for speakers not questions from speakers!" is hastily scrawled below it.',noteWallButton:"Write a question",addNoteLinkText:"add a question",addNotePrompt:"What would you like to ask?",noteWallDescription:"Questions for the current speaker, ranked by upvotes."}},Nr={loungeDungeonDrawingRoom:{id:"loungeDungeonDrawingRoom",displayName:"Drawing Room",shortName:"the drawing room",description:"A smaller, private room with a vintage wooden table in the center and eight antique chairs arranged around it. The floor is covered in thick, intricate carpets, and the walls feature ancient oak wainscoting. Sunlight pours in through four large windows, and through them you can grass over rolling green hills.<br/><br/>\n    You can return to the [[hall]], or you can continue on into the [[bedroom->loungeDungeonBedroom]].",hidden:!0},loungeDungeonBedroom:{id:"loungeDungeonBedroom",displayName:"Bedroom",shortName:"the bedroom",description:'A cosy room featuring an unreasonably wide bed, sporting an ornate canopy. To its left is an oak drawer, with a perfectly polished mirror above it, and to its right is a door with a note on it. Written in a shaky hand, the note reads "I am done organizing your closet, it is a futile, time-wasting endeavor!"<br/><br/>\n      You can return to the [[drawing room->loungeDungeonDrawingRoom]], or you can enter the [[closet->loungeDungeonClosetEntryway]].',hidden:!0},loungeDungeonClosetEntryway:{id:"loungeDungeonClosetEntryway",displayName:"Unreasonably Large Walk-In Closet",shortName:"the unreasonably large walk-in closet",description:"There are pith helmets strewn across dresses, piles of mismatched shoes, a dozen spotless white wedding dresses, ancient steel helmets and a pile of trousers six feet high. The massive piles of shoes, garments, accessories and other sundry items in front of you make it impossible to tell how large the room is.<br/><br/>\n      You can return to the [[bedroom->loungeDungeonBedroom]] or you can start [[pushing forward->loungeDungeonClosetPath]].",hidden:!0},loungeDungeonClosetPath:{id:"loungeDungeonClosetPath",displayName:"Somewhere In The Unreasonably Large Walk-In Closet",shortName:"somewhere in the unreasonably large walk-in closet",description:"You pass a hundred umbrellas, standing upright in a gigantic bucket. You wade through a swamp of what look like napoleonic uniforms. You flee a collapsing tower of tall, fuzzy hats. A moat of very spiky armor bits threatens to stop your progress, but you shovel undershirts and chemises into it until you can cross.<br/><br/>\n      You can [[go back->loungeDungeonClosetEntryway]], or head towards the distant [[tower of shoes->loungeDungeonClosetShoePath]].",hidden:!0},loungeDungeonClosetShoePath:{id:"loungeDungeonClosetShoePath",displayName:"Somewhere In The Unreasonably Large Walk-In Closet",shortName:"somewhere in the unreasonably large walk-in closet",description:"You pass through a forest of bare mannequins that watch you as you pass. You pull a sturdy walking stick from a copse of parasols. You tunnel through a hill of belts and ties, fending off the shoelaces that swarm to impede your path. Soon after you realize that you can't see the tower of shoes you were heading towards.<br/><br/>\n      You can [[go back->loungeDungeonClosetPath]] or [[venture onwards->loungeDungeonClosetShoePathEnd]].",hidden:!0},loungeDungeonClosetShoePathEnd:{id:"loungeDungeonClosetShoePathEnd",displayName:"Somewhere In The Unreasonably Large Walk-In Closet",shortName:"somewhere in the unreasonably large walk-in closet",description:"You push blindly onwards. You can hear the shrieks of the bowties, now. They started about ten minutes ago, and their high-pitched calls have been growing in intensity. Your walking stick is sturdy, and you're a lot bigger than a bowtie, but you're on their home ground.<br/><br/>\n      You can [[go back->loungeDungeonClosetShoePath]], [[prepare for the bowties->loungeDungeonClosetBowtiePrep]], or [[venture onwards->loungeDungeonClosetMannequinAmbush]].",hidden:!0},loungeDungeonClosetBowtiePrep:{id:"loungeDungeonClosetBowtiePrep",displayName:"Somewhere In The Unreasonably Large Walk-In Closet",shortName:"somewhere in the unreasonably large walk-in closet",description:"You've never fought bowties before. You didn't know they could make sounds, or move, or fly. You wonder if they'll really attack you. Maybe they're like mountain lions? Will looking very big deter them? Or will you need to find a weapon?<br/><br/>\n      You can [[find a scary coat->loungeDungeonClosetBowtieCoat]], [[find a weapon->loungeDungeonClosetBowtieWeapon]], or [[venture onwards->loungeDungeonClosetMannequinAmbush]].",hidden:!0},loungeDungeonClosetBowtieWeapon:{id:"loungeDungeonClosetBowtieWeapon",displayName:"Somewhere In The Unreasonably Large Walk-In Closet",shortName:"somewhere in the unreasonably large walk-in closet",description:"You have no idea where you'd find a weapon. You already have a walking stick, and you're not sure anything else you've seen so far would be better. On reflection, you're not even sure if hitting a bowtie with a walking stick would kill it. Or if the bowties are even alive.<br/><br/>\n      You can [[fight the bowties->loungeDungeonClosetMannequinAmbush]] or [[venture onwards->loungeDungeonClosetMannequinAmbush]].",hidden:!0},loungeDungeonClosetBowtieCoat:{id:"loungeDungeonClosetBowtieCoat",displayName:"Somewhere In The Unreasonably Large Walk-In Closet",shortName:"somewhere in the unreasonably large walk-in closet",description:"You backtrack a couple of minutes, to the base of a cliff of coats. You try to rip out an armful, but they're too tightly packed, so you're forced to pick from among the coats that have blown off the top.<br/><br/>\n      You can choose from an [[antiquated formal coat->loungeDungeonClosetBowtieCoatFight]], a [[worn trench coat->loungeDungeonClosetBowtieCoatFight]], a [[swanky suede coat->loungeDungeonClosetBowtieCoatFight]], a [[comfy-looking parka->loungeDungeonClosetBowtieCoatFight]], or an [[abandoned duster->loungeDungeonClosetBowtieCoatFight]].",hidden:!0},loungeDungeonClosetBowtieCoatFight:{id:"loungeDungeonClosetBowtieCoatFight",displayName:"Somewhere In The Unreasonably Large Walk-In Closet",shortName:"somewhere in the unreasonably large walk-in closet",description:"You quickly don your coat and turn away from the cliff. You can see the swarm of bowties circling. You stare at them as you open your coat and spread your arms, waving them slowly. You call out, firmly. The swarm circles another couple of times, but eventually the cries stop and it seems to move on.<br/><br/>\n      You realize that you can see the path to the tower of shoes you were aiming for from here.\n      You can [[escape the closet->loungeDungeonBedroom]] or continue to the [[tower of shoes->loungeDungeonClosetTowerOfShoesDoor]].",hidden:!0},loungeDungeonClosetMannequinAmbush:{id:"loungeDungeonClosetMannequinAmbush",displayName:"Somewhere In The Unreasonably Large Walk-In Closet",shortName:"somewhere in the unreasonably large walk-in closet",description:"The bowties set up a cry, hundreds at once, and then rush you! You slap them from the sky, grabbing and ripping, leaving a path of silk guts and cotton wings strewn all around the glade. Eventually, the swarm flees, silently flowing back into the forest. You stand, trumphant, amid dozens of torn bowties.<br/><br/>\n      Then something kicks your legs out from under you, and you fall to the ground. Before you can react, everything goes black.<br/><br/>\n      [[Wake up.->hall]].",hidden:!0},loungeDungeonClosetTowerOfShoesDoor:{id:"loungeDungeonClosetTowerOfShoesDoor",displayName:"Somewhere In The Unreasonably Large Walk-In Closet",shortName:"somewhere in the unreasonably large walk-in closet",description:"You reach the tower of shoes. It's gigantic, six hundred feet high at least, but only some thirty feet wide. There's a door set into its base.<br/><br/>\n      You can [[escape the closet->loungeDungeonBedroom]] or enter the [[tower of shoes->hiddenPortalRoom]].",hidden:!0}},Lr={ascii:{id:"ascii",displayName:"The Hash Mark Dungeon",shortName:"the # Dungeon",description:"The entire square tile you are standing on vibrates, and the world around you changes - you have entered an older time. The walls are made out of #, you can easily see the . at your feet, and your old powers of audio and video do not work here.</br></br>A row of twelve headstones stand in a line. They are all blank, except for the seventh, which is engraved with '7 - A'. Behind them stand four statues - a hobbit, a tree, a crocodile, and a more abstract one of unhewn stone. Each has a riddle engraved in its base.</br></br>A door behind you leads through various twisty passages; despite them all looking alike, you know one heads to the [[Oracle of Delphi->oracle]], and then a set heads back to the [[Space Hangar->sfHub]].",hasNoteWall:!0,hidden:!0,noMediaChat:!0,noteWallData:{roomWallDescription:"Do you want your possessions identified?",noteWallButton:"y/n/q",addNoteLinkText:"Tell a story",addNotePrompt:"Tell us of yet another sad/silly/surprising death you've experienced in any roguelike.",noteWallDescription:"Tales of sad, silly, and surprising deaths in roguelikes of all kinds!"},riddles:["There once was a roguelike programmer,\nWhose game worked procedurally;\nThe output was same-y:\nThe play of the game-y,\nWas ten thousand bowls of me.","Before I went a-questing,\nI was but a simple tree;\n'Til once an artificer came,\nAnd cut myself from me;\nThe energies in me infused,\nI cannot understand;\nBut take my firmly in thy grip,\nAnd lightning you'll command.","I don't quite belong here,\nThat much is clear;\nThe brochure understated,\nThe peril and fear;\nBut I set to make the best of it,\nAnd site-see what I can;\nI took lots of photos,\nOf the things from which I ran.","\"You'll go down, then up again;\nOr you'll go there and back.\nYou'll find me on the overmap,\nBut off of the beaten track.\nI'm monster, loot, and cunning trap;\nI'm corridor and room.\nI'm big bad, orb, and re-ascent,\nAnd of course, I am your doom.\""]},oracle:{id:"oracle",displayName:"Outside the Oracle of Delphi",shortName:"the Oracle of Delphi",hidden:!0,noMediaChat:!0,description:'This usually peaceful space is decorated with burbling fountains, stately marble columns, and finely carved statues of centaurs in various poses. Strangely though, the fountains aren\'t uniformly flowing water - some are filled with strange gooey substances, at least one looks like it\'s full of cheese sauce. A hastily scrawled sign stuck to one of the fountains says "The Oracle Is In", with an arrow to a [[small temple->majorConsultation]]. On a pedestal rests a bowl of fortune cookies labeled [["minor consultations"->getFortune]]. Alternately, you can go back to the [[dungeon you came from->ascii]].'},majorConsultation:{id:"majorConsultation",displayName:"A Major Consultation with the Oracle",shortName:"the inside of the Oracle Temple",hidden:!0,noMediaChat:!0,description:"The Oracle of Delphi - a truly beautiful @ in shimmering blue - perks up at your presence.<br/><br/>\"Oh, hi there! Sorry about all the mess, the fountain liquids all shifting, the map being all out of true - some ridiculous chaos demons have been messing with the fabric of space around here. They've scattered a dozen riddles around - some even within the useful spaces, those poor dogs - which apparently build some kind of code phrase that's important to them.<br/><br/>If you figure a riddle out, I think you can use that \"/go\" invocation you used to get here to see what visions it brings you. I suspect things might be finicky when it comes to translocation magic - again, chaos - but I *believe* my centaurs got things to a point where all lowercase components work.<br/><br/>Hopefully if you figure that code phrase out and /go to them, maybe you'll get some kind of explaination, or at least a neat bauble...? I dunno, I'm kinda stuck here. But good luck!\"<br/><br/> If you want a space where you can talk with others about the puzzles without spoiling them, feel free to chat [[nearby->spoil]]. You can return to the [[fountains->oracle]]."},spoil:{id:"spoil",displayName:"Spoiler Containment Zone",shortName:"the spoiler zone",hidden:!0,description:"This is a space for talking through the riddles without worrying about spoiling people in other rooms. Or head back to [[the Oracle->majorConsultation]]."},wildchaospit:{id:"wildchaospit",displayName:"The Wild Chaos Pit",shortName:"wild chaos pit",hidden:!0,noMediaChat:!0,description:'You invoke the spell you\'ve discovered and the world melts around you. You had been standing in the conference hall; now you\'re floating in an endless abyss. No, that\'s not right: you\'re *falling through* it, from the material plane to a realm of pure, elemental chaos. Wild, fantastical shapes emerge from swirling mists as you descend, nightmares made real that advance upon you only to be torn apart and dissolve back into mist. Eventually your hellish journey ends and you land, with essentially no fanfare, at the very center of the Wild Chaos Pit.\n    </br></br>You\'re in a small room with off-white walls and no exits. There\'s a desk with some kind of demon in a poorly fitted suit, typing away on a computer terminal. It spares you a glance as you enter and greets you in a droning monotone. "Oh, hello. Welcome to the Wild Chaos Pit. Cower in fear at our terrifying splendor." The demon gestures to an inspiration poster of a skeleton hanging from a telephone wire as evidence of this. "We would like to take this opportunity to thank you for your assistance in our mission. The forces of Chaos have had a great quarter, and we could not have succeeded in meeting our operational goals without the dedication and support of you, the player. Please avail yourself of our fabulous facilities before returning to your realm." The demon, their speech finished, turns their attention back to the computer. Without looking up, they drone: "Oh, my apologies. Before returning to your realm, *mortal*."\n    </br></br>Apart from the desk and skeleton poster, the room is minimally furnished. There\'s some sort of [[swag table->pitSwag]] you can investigate. "Exit through the gift shop," says the demon. "Emphasis on exit." They nod at the other end of the room, where [[four pentagrams->pitPentagrams]] are etched into the floor.',hasNoteWall:!0,noteWallData:{roomWallDescription:"There's a ring-bound logbook hovering in a corner for non-Chaos visitors to note their comings and goings; a ball point pen dangles from a thin chain tied to it. Do you want to sign the log book to prove you made it here?",noteWallButton:"Sign the logbook",addNoteLinkText:"sign the logbook",addNotePrompt:"How do you want to sign it?",noteWallDescription:"A list of recent visitors to the Wild Chaos Pit."}},pitSwag:{id:"pitSwag",displayName:"Division Leaders 3Q21 - Grab Your Swag!",shortName:"the chaos pit swag tables",hidden:!0,noMediaChat:!0,description:'A banner is strung above a cheap plastic foldable table. Heaped on the table are what appear to be Orbs of Zot. Another, even bigger pile contains what must be thousands of Amulets of Yendor, and the third "pile" is a single, already-opened box of 8 crayons. The demon is totally ignoring you; you can very easily get an [[Orb of Zot->item]] or [[Amulet of Yendor->item]], or even that [[box of crayons->item]] if that\'s your fancy.<br/><br/>You can also head [[back there->wildchaospit]] before you go, or go straight to the [[pentagrams->pitPentagrams]] they were gesturing at.'},pitPentagrams:{id:"pitPentagrams",displayName:"Four Pentagrams",shortName:"the pentagrams",hidden:!0,noMediaChat:!0,description:"One pentagram looks very [[high tech->pentagramHighTech]]. Another is more [[minimalist and austere->pentagramMinimalist]]. A third is [[wavey and almost comical->pentagramComical]]. The last pentagram seems somehow [[extremely normal->pentagramNormal]].<br/><br/>As the demon said, these are the exits. Now that you know the phrase, you could get back here when you wanted. But maybe you want to check out that [[swag table->pitSwag]] or [[logbook->wildchaospit]] before you go."},wand:{id:"wand",displayName:"The Forest of Wands",shortName:"The Wand",hidden:!0,noMediaChat:!1,description:"You're transported to a grove of impossibly tall silver trees. Golden leaves the size of your head float gently down from distant boughs. The air feels thick with some kind of energy that makes your hair stand on end and your teeth buzz. An alter of hewn stone sits ahead of you, and on it rests a single Tarot card depicting a hand emerging from a thundercloud to grasping a single branch: the Ace of Wands. Someone has affixed three more tarot cards to trees lining the clearing with brass pins: the Five of Swords, the Nine of Pentacles and the Page of Cups. On closer inspection, there's a riddle scrawled on each of these cards.",riddles:["Be careful, brave adventurer, should you and I e'er meet;\nFor e'en should you vanquish me (to be clear: quite the feat);\nI shan't e'en then be through with you; I'll catch you unawares;\nTake caution all who'd wield my flesh: thine enemy is stairs.","Thou scurrilous rogue!\nThou trecherous rake!\nThou shouldst not do over-\nThou didst a mistake!\nBut hark- thou hast backups?\nThen so mote it be.\nThou sullied thine honor,\nWhen thou performed me.","Value me as you do life,\nFor what I am is you;\nAnd if perchance some loot should drop,\nWe'll both get something new;\nI may be limited in scope,\nOr by what you'll endure;\nIn either case our goal's the same:\nTo live is to procure."]},identify:{id:"identify",displayName:"Tome of Identify: It Is What It Is",shortName:"Identify",hidden:!0,noMediaChat:!1,description:"You're in a room dominated by a single large tome on a table. On the cover of the book, letters inlaid with gold leaf read \"It Is What It Is, Part 2: Clear Potion through Frotz, Scroll of\". Flipping through the book you find it's filled with thousands of tables allowing you to look up any object based on its weight, appearance, general shape, and what merchants might offer for it (so long as the item is in its alphabetical range). You're struck with the notion that some might seek to sit down and memorize the thing in full."},losing:{id:"losing",displayName:"The Losing Fortress",shortName:"losing",hidden:!0,noMediaChat:!1,description:"You find yourself in the remains of a once-might fortress of the dwarves. Signs of struggle are everywhere. Struggle, and a truly staggering amount of lava. Really, whose idea was all the lava? You get the sense that maybe it was meant to be a defensive measure but it clearly backfired spectacularly. Oh well, it was probably Fun while it lasted. Admist the ruins you find an intact marble chair, finely crafted, and embellished with what appear to be scenes of the invasion that destroyed the fortress. The art conveys a fell mood and relates to the number 3."},dungeon:{id:"dungeon",displayName:"The Dungeon's Maze",shortName:"The Dungeon",hidden:!0,noMediaChat:!1,description:"You find yourself in a maze of twisty little passages, all alike. From down some of the corridors you can hear distant echoing noises that suggest there may be more than just riddle-solving adventurers lurking in these halls. The dungeon is damp, and dark, and your torch only illuminates a few dozen feet away from you before the darkness takes over. An shelf set into the wall here holds 4 candles. There are also two tomes. The leather cover of one has what appears to be a tower embossed in it; the other is absolutely blank.",riddles:["Tis not thy hands that move, but mine;\n      To beat the march of death.\n      And while I shan't count minutes;\n      Thou shalt count thine every breath.\n      A goblin's dirk's is deadly, yes-\n      But once they're slain, benign.\n      I'll motivate thy progress, friend:\n      Starvation takes its time.","Before thou shuffle thyself off,\n      Of yonder mortal coil;\n      Consider thee thine life so far,\n      A path of strife and toil;\n      Unique; alone; a one-off trek\n      No mortal should endure it.\n      Fear not- thou shalt but start again.\n      In fact, I will ensure it."]},hunger:{id:"hunger",displayName:"The Village of Hunger",shortName:"Hunger",hidden:!0,noMediaChat:!1,description:"In a flash you are in a village square. Everything is muted brown and gray. A cold, dry wind blows, and pushes gentle waves of dust across the cobblestones at your feat. In the distance, beyond the village, you can see what must once have been verdant, fertile fields, dried out and dead. Above you, towering over the remains of a church, is a tower clock. The minute hand must have been lost long ago, perhaps stolen, but the hour hand remains stuck on 6. The dark, billowing clouds above you offer no rain: only a nebulous and unstated threat. Your stomach growls; it feels like ages since you've had a bite to eat."},oatmeal:{id:"oatmeal",displayName:"Endless Oatmeal",shortName:"Oatmeal",hidden:!0,noMediaChat:!1,description:"Wow, this place is... something. You're in an endless pool of oatmeal, stretching from horizon to horizon. The area near you has some raisins in it. A little further off you can see that the surface of the oatmeal is dusted with cinnamon. But it's all oatmeal. The only features of note are within the small island you find yourself on, a large, looping pile of loose, dry oats in the shape of a figure 8. Floating in each hollow of the 8 is a bowl of cereal; it looks like the kind where each piece is a letter of the alphabet? Perhaps they have a message for you.",riddles:["Some call me a game;\n\n      Some call me a chore;\n\n      Some call me a risk;\n\n      Some call me a bore;\n\n      Without me you cannot,\n\n      Know what is in store;\n\n      'Til you quaff that potion,\n\n      You will not be sure.","When the ceilings collapsed,\n\n      When the barricades fell,\n\n      When the lava pipes burst,\n\n      And the halls turned to hell;\n\n      When the arrows of kobolds,\n\n      Blotted out the noon sun,\n\n      Said one dwarf to the other:\n\n      Well, *this* is fun."]},savescum:{id:"savescum",displayName:"The Savescum Chessboard",shortName:"savescum",hidden:!0,noMediaChat:!1,description:"You are in the corner of a giant chess board. The walls of the room containing it lavishly decorated in the style of a medieval court, with portraits of an imperious-looking king and queen and a bunch of minor nobility you can't place. In the center of the chessboard you see an Orb on a pedestal; your adventuring reflex immediate kicks in: an Orb is to collect, after all. Between you and the Orb, however, are dozens of chess pieces larger than yourself, scattered about the board as if midway through a game.<br/><br/>You take a few steps towards the Orb and nothing happens. Maybe this won't be too complicated? But on your next step, a Knight swoops in and knocks you down; you've been Captured. You eye the square you started at, yards back. Why walk all the way? You just return to the last safe square you were at and try a different path. It works! You've gone another few steps when your foot lands on a white square and a Bishop you hadn't noticed swoops in from the far side of the board and caroms into you. Ok, well, you're *definitely* not going to go back to the starting square now; you just slink back to where you were before the Bishop attack and try again.<br/><br/>Thus you make your way, in fits and starts, to the Orb, backing up to safe spaces when you encounter danger to feel out a new path. Eventually you arrive, but the Orb seems to be attached to the pedestal through a mechanism unknown to you. Gazing into it, you see that at its heart there's an elaborately carved crystal in the shape of spiral: it's a 9."},permadeath:{id:"permadeath",displayName:"The Permadeath Dig",shortName:"permadeath",hidden:!0,noMediaChat:!1,description:'You have a sudden vision of archaeological dig, the sun hot above you, the remnants of ancient Babylon below. On a table in front of you, one of your research assistants has laid out a series of stone tablets. The medium was a demanding one for the written word; any mistake would be immutable, as eternal as the stone itself. The original author seemed to be working towards something, but each time made a mistake in the telling and was forced to start over. Despite this, you notice differences in each attempt; the stories, despite the same goal, diverged as the stone carver repeatedly attempted to complete their tale. "How many tablets did we find?" you ask your assistant. The grad student responds, "We found 10, professor."'},inventory:{id:"inventory",displayName:"The Inventory Warehouse",shortName:"inventory",hidden:!0,noMediaChat:!1,description:"\"This is the most crowded space you've ever been in. It's some sort of warehouse, but there are no shelves or cabinets or even really boxes, just... piles of stuff. When you appeared here you slipped and fell into a giant pile of stopped up beakers, each filled with Cloudy Potion. The glass must be pretty sturdy since none of them broke, and you slid down the pile to the ground, thankfully coming to stop before you rolled into a haphazard stack of daggers, dirks, knives, and shivs. You look around: there stacks of scrolls, spelunking equipment, weaponry, armor, and two truly enormous heaps of coins (all sorts) and food (seems to be mostly iron rations). Most of it the items you see have some utility, none of them seems especially, specifically mission-critical, and *all* of them take up space.<br/><br/>It dawns on you that this must be the Space Inventory, a dangerous realm never meant to be opened: the mythical elemental plane of Stuff. It's awe-inspiring in its own way, but most terrifying things are.<br/><br/>You idly putter about for a bit looking for anything worth taking (that's how the rogues do) but this is an inventory of inventories: all these things belong to other players somewhere in the multiverse and you aren't able to grab them. Eventually you reach an outer wall and find a sign: Inventory #11.\""}};var jr,Br;(Br=jr||(jr={})).RainbowDoor="RAINBOW_DOOR",Br.DullDoor="DULL_DOOR";const Fr={id:"doctorPaint",displayName:"An incredibly complicated machine",shortName:"an incredibly complicated machine",description:"You find yourself in a space dominate by an incredibly complicated machine. Arcs of aetheric energy jump between leyden jars, and what appears to be an enormous water clock is driving an incomprehensible mass of gearwork. At the center of it all, like a tiny egg in rather large nest, is a simple chair. A frenetic individual in a white coat, their features obscured by thick googles and safety gear is tightening a bolt on the machine when you walk up.<br/><br/>Or maybe you should just [[leave->dyes]].",specialFeatures:[jr.RainbowDoor]},Ur={id:"shower",displayName:"The Secondarily-Hydrogenated Oxygen Weighted Emulsion Remover",shortName:"the S.H.O.W.E.R.",description:"There's a large glass object here, embedded in a cage of tubes and wires. It's almost like a giant vacuum tube or a huge beaker closed off at the top, except that there's an opening in the side large enough to step through.<br/><br/>Or simply [[return->dyes]].",specialFeatures:[jr.DullDoor]};var qr;!function(e){e.RainbowDoor="RAINBOW_DOOR",e.DullDoor="DULL_DOOR",e.FullRoomIndex="FULL_ROOM_INDEX",e.VendingMachine="VENDING_MACHINE"}(qr||(qr={}));const zr={...{entryway:{id:"entryway",displayName:"Registration Desk",shortName:"the registration desk",description:"A big banner before you reads 'Welcome to Roguelike Celebration 2021!' Beyond the doorway you hear welcoming chatter and merriment. Once you've got your bearings about you, you can move through to the [[Central Hall->hall]].",hidden:!0},hall:{id:"hall",displayName:"Central Hall",shortName:"the hall",description:"A magnificent hall stretches ahead of you, reminiscent of the grand terminal of a metropolis. Conversations echo on stone hewn walls, surrounding you in a warming background murmur of humanity. The vaulted ceiling feels impossibly high and depicts constellations of ASCII that look random at first but reveal hidden meaning the longer you stare.\n    <br/><br/>\n    In the center of the hall you see a circular booth overflowing with bits and bobs, labelled the [[Swag Table->swag]]. Further on, an ornate staircase leads up to the [[Bar->bar]], a carpeted hallway leads up to the [[library]], and blinking lights above a door advertise the [[Theater->theater]] entrance. \n    <br/><br/>\n    To your right, a short hallway leads to the [[unconferencing rooms->unconference]]. To your left, a much longer hallway labelled [[Destinations->destinations]].",hasNoteWall:!0,noteWallData:{roomWallDescription:'A big bulletin board sits in the middle of the hall, with a banner on top - "Social Space Feedback". An array of markers and sticky notes are nearby.',noteWallButton:"Add feedback",addNoteLinkText:"Add feedback",addNotePrompt:"What feedback do you have about the social space itself?",noteWallDescription:"Social Space Feedback"}},destinations:{id:"destinations",displayName:"Destinations",shortName:"the destinations hallway",description:"Lining both sides of this hall, huge doorways promise journeys to thrilling destinations. The majority of them are shut, with taped up [[paper signs->readClosedSign]] providing increasingly ludicrous reasons for their closure.<br/><br/>Only two halls are open, and while it's hard from here to tell where they'll go, one door shines with [[glass and chrome->sfHub]], and the other is [[covered in brass gears and pipes->exploreHub]].<br/><br/>You can also return to the [[Central Hall->hall]]"},swag:{id:"swag",displayName:"Swag Table",shortName:"the swag table",description:'A circular booth seems entirely packed with mismatched swag, spilling over the edge and forming messy piles of goods. At the top of the pile, you see items such as [[Roguelike Celebration mousepads->item]], [[a +1 longbow->item]], [[an unidentified scroll->item]], and (surprisingly!) [[a tiny puppy->item]].\n    <br/><br/>\n    There\'s also a set of <a href="https://www.aatwebstore.com/rc2021/shop/home" target="_blank">beautiful physical shirts and mousepads you can buy in real life</a>, designed by <a href="https://marlowedobbe.com/" target="_blank">Marlowe Dobbe</a> and printed by Ann Arbor T-shirt Company.\n    <br/><br/>\n    A plaque set into the floor here shows a list of <a href="https://github.com/lazerwalker/azure-mud/graphs/contributors" target="_blank" rel="noreferrer">code contributors</a>.\n    <br/><br/>\n    From here, you can walk back to the rest of the [[hall]].'},bar:{id:"bar",displayName:"Bar",shortName:"the bar",description:"The bustle of the hall fades away as you ascend the stairs, coming upon a beautiful long bar with hundreds of colourful bottles spanning up to the ceiling. A friendly bartender will happily make you whatever you want, sliding glasses over the table with ease. A laminated sign on the bartop advertises tonight's specials: [[Divine Nectar->item]] (a locally crafted mead, donated by intelligent philanthropic bees), [[the Fizzbuzz->item]] (a non-alcoholic flavored seltzer which alternates sour and sweet), and [[Yet Another Silly Drink->item]] (a colorful, layered drink with a toy cockatrice floating on top).\n    <br/>A self-serve table nearby has two crates packed to the brim with potions. One is loaded with [[colourful potions->drinkPolymorph]] of many shapes and hues, and the other with [[plain potions of clear liquid->drinkCancellation]].\n    <br/><br/>\n    Four areas provide opportunities to sit and enjoy conversation in smaller groups - by the [[railing->railing]], seated [[along the bar->stools]], by a central [[stage->barStage]], and tucked away [[at the back->back]]. Stairs at the back lead directly to the [[theater]], or back to the [[Central Hall->hall]].",hasNoteWall:!0,noteWallData:{roomWallDescription:"By the bathrooms there's a pile of pens and markers - it seems the bar decided if they can't stop graffitti, they might as well encourage patrons to use glitter pens instead of boring ballpoint.",noteWallButton:"Add your mark",addNoteLinkText:"Contribute",addNotePrompt:"Contribute to the graffitti?",noteWallDescription:"Someone has scratched ‘Rodney was here’ on an absurdly large unisex bathroom stall wall."}},railing:{id:"railing",displayName:"Booth Along the Railing",shortName:"the booth by the railing",description:"A cozy booth with a perfect view down to your fellow attendees coming and going from the main hall.</br></br>\n      From here, you can see [[the seats at the bar->stools]], the [[stage->barStage]], or [[at the back of the room->back]], and the [[rest of the bar->bar]]."},stools:{id:"stools",displayName:"Seats Along the Bar",shortName:"the stools by the bar",description:"Seats let you comfortably squeeze in at the bar for fast service and casual conversation. Most importantly, they swivel. Whee!</br></br>\n      From here, you can see tables [[by the railing->railing]], the [[stage->barStage]], or [[at the back->back]], and the [[rest of the bar->bar]]."},barStage:{id:"barStage",displayName:"Stage Near the Bar",shortName:"the bar stage",description:"You can /dance if you want to. And indeed, maybe you should, to upstage that terrible bard who thinks [[cheesy pick up lines->hearPickupLine]] are the height of comedy.</br></br>From here you can see tables at the [[railing]], [[along the bar->stools]], the [[back]], and the [[rest of the bar->bar]]."},back:{id:"back",displayName:"Booth at the Back",shortName:"the booth at the back",description:"A secluded booth, tucked in a corner and quiet enough to speak without raising your voice. A brooding mysterious figure in a cloak stands awkwardly nearby, looking petulant at losing their preferred seat.<br/><br/>\n      From here, you can see tables [[at the railing->railing]], the [[stage->barStage]], or [[along the bar->stools]], and the [[rest of the bar->bar]]."},theater:Dr,warrior:{id:"warrior",displayName:"Breakout room: Warrior's Training Grounds",shortName:"Warrior Breakout",description:"Stout training dummies, plenty of armour, a large variety of weapons - polearms with funny names, extremely sharp swords. A poster on the wall describes creatures that should not be attacked with blades - hydras, puddings. Or you can head back to the [[theater]]."},mage:{id:"mage",displayName:"Breakout room: Mage's Circle",shortName:"Mage Breakout",description:"Ever-changing sigils on the ground, pulsing with an eerie glow. A cauldrun bubbling in the corner, being stirred continuously by a capybara with a purple cape. Or you can head back to the [[theater]]."},rogue:{id:"rogue",displayName:"Breakout room: Rogue's Hideaway",shortName:"Rogue Breakout",description:"A mostly dark room; what you can see looks like scrolls in incomprehensible codes, and cloaks that flicker in and out of view. In another corner, targets, plus bows and crossbows and plenty of arrows and bolts. Or you can head back to the [[theater]]."},tourist:{id:"tourist",displayName:"Breakout room: Tourist's Gate",shortName:"Tourist Breakout",description:'Shockingly modern - the gate to an airport. Two very good dogs are manning the desk. One dog wants to give you a [[Platinum Yendorian Express Card->item]]. The other has a dog tag labeled "GNU Terry Pratchett" and wants you to tell it about the clacks. A nearby kiosk is selling aloha shirts, staffed by an argyle terrier. Despite there being tons of travelers milling about the airport, you can only see a dozen shirts at the terrier\'s shack, and sadly none of them are your size. Or you can head back to the [[theater]].'},unconference:{id:"unconference",displayName:"Unconferencing Lobby",shortName:"the unconferencing lobby",description:"Winding corridors lead to a large dungeon-like room. Sticky notes and magic markers are piled up on tables along with assorted adventuring gear. White banners with blocky black text label several hallways leading to the unconferencing rooms - [[cockatrice]], [[dragon]], [[naga]], [[skeleton]], [[tengu]], and [[yak]]. You can also return back to the [[hall]].",noMediaChat:!0,hasNoteWall:!0,noteWallData:{roomWallDescription:'One wall of this room is taken up by a large whiteboard titled "UNCONFERENCE TOPIC SUGGESTIONS!" Smaller font clarifies "Write what you want to chat with others about, and upvote topics you find interesting. Moderators will assign the top six topics rooms, 5 minutes into each unconference block. Have fun!"',noteWallButton:"Inspect the topics",addNoteLinkText:"suggest a topic",addNotePrompt:"What would you like to suggest?",noteWallDescription:"Topics for unconferencing discussion, ranked by upvotes."}},cockatrice:{id:"cockatrice",displayName:"Unconferencing: Cockatrice Containment",shortName:"Unconferencing: Cockatrice",description:'This is an unconferencing room. A table labelled "NECESSARY PRECAUTIONS" in huge block letters has buckets for gloves, earplugs, and lizards... but troublingly all are empty. It\'s probably fine. There\'s a statue of a hapless adventurer, cunningly carved in granite that captures their likeness midway through an apparent tumble down a flight of steps. The statue is labeled "Newb Descending a Staircase #5."<br/><br/>We encourage you to use this space to talk "face-to-face" using <a href="https://us02web.zoom.us/j/87385558857?pwd=UHREZEgyRjQ1L2dta1N1amdWMmF6dz09" target="_blank">the Zoom meeting for this room</a>, which you can access at any time during the conference. (Passcode 270805)<br/><br/>The other unconferencing rooms are [[dragon]], [[naga]], [[skeleton]], [[tengu]], and [[yak]]. Or you can climb the stairs back up to the [[unconferencing lobby->unconference]].',noMediaChat:!0,hasNoteWall:!0},dragon:{id:"dragon",displayName:"Unconferencing: Dragon's Lair",shortName:"Unconferencing: Dragon",description:'This is an unconferencing room. It\'s a bit difficult to move around as the floor is stacked with piles of coins, gems, and scales. Passive aggressive post-its outline an outstanding series of arguments about which colour is superior and therefore deserves the most floor space. Best not to get involved.<br/><br/>We encourage you to use this space to talk "face-to-face" using <a href="https://us02web.zoom.us/j/84647465158?pwd=Z1dsQ2lvK0Fta3I0RzR4bXNMaEU3UT09" target="_blank">the Zoom meeting for this room</a>, which you can access at any time during the conference. (Passcode 299447)<br/><br/>The other unconferencing rooms are [[cockatrice]], [[naga]], [[skeleton]], [[tengu]], and [[yak]]. Or you can climb the stairs back up to the [[unconferencing lobby->unconference]].',noMediaChat:!0,hasNoteWall:!0},naga:{id:"naga",displayName:"Unconferencing: Naga Den",shortName:"Unconferencing: Naga",description:'This is an unconferencing room. The door swings open with a push, not requiring you to use your hands. The floor is sandy and warm to the touch. Piled in a corner are Roguelike Celebration socks from various years, looking entirely unused for some reason.<br/><br/>We encourage you to use this space to talk "face-to-face" using <a href="https://us02web.zoom.us/j/84946016673?pwd=OTNRWjZKdmx0RGthWVVueHlqUm84Zz09" target="_blank">the Zoom meeting for this room</a>, which you can access at any time during the conference. (Passcode 046256)<br/><br/>The other unconferencing rooms are [[cockatrice]], [[dragon]], [[skeleton]], [[tengu]], and [[yak]]. Or you can climb the stairs back up to the [[unconferencing lobby->unconference]].',noMediaChat:!0,hasNoteWall:!0},skeleton:{id:"skeleton",displayName:"Unconferencing: Skeleton Clubhouse",shortName:"Unconferencing: Skeleton",description:'This is an unconferencing room. The walls are plastered with unconventional [[motivational posters->readPoster]]. A mini-fridge hums in the corner, but when you pop it open is stocked only with jugs of milk.<br/><br/>We encourage you to use this space to talk "face-to-face" using <a href="https://us02web.zoom.us/j/87320810860?pwd=WmhISXBza1hPZ1k3MFhDdDZwVEtPQT09" target="_blank">the Zoom meeting for this room</a>, which you can access at any time during the conference. (Passcode 799782)<br/><br/>The other unconferencing rooms are [[cockatrice]], [[dragon]], [[naga]], [[tengu]], and [[yak]]. Or you can climb the stairs back up to the [[unconferencing lobby->unconference]].',noMediaChat:!0,hasNoteWall:!0},tengu:{id:"tengu",displayName:"Unconferencing: Tengu Workshop",shortName:"Unconferencing: Tengu",description:'This is an unconferencing room. Feathers of all sizes and hues are scattered through the room, and the seating options include traditional chairs as well as perches. Do take care sitting down - whoopie cushions, wet paint, and similar mischief is to be expected here.<br/><br/>We encourage you to use this space to talk "face-to-face" using <a href="https://us02web.zoom.us/j/82349098446?pwd=QjA5Q2pYV1pjMUxkQjNwMmFUTmMrQT09" target="_blank">the Zoom meeting for this room</a>, which you can access at any time during the conference. (Passcode 809263)<br/><br/>The other unconferencing rooms are [[cockatrice]], [[dragon]], [[naga]], [[skeleton]], and [[yak]]. Or you can climb the stairs back up to the [[unconferencing lobby->unconference]].',noMediaChat:!0,hasNoteWall:!0},yak:{id:"yak",displayName:"Unconferencing: Yak Pen",shortName:"Unconferencing: Yak",description:'This is an unconferencing room. The smell in here is... a lot. A sign at the entrance pleads "Please, no shaving!" A table is set up as if to offer refreshments but atop it are just blocks of solid salt, carved into abstract shapes by the licking of very large tongues.<br/><br/>We encourage you to use this space to talk "face-to-face" using <a href="https://us02web.zoom.us/j/82669162828?pwd=L3kxdkhHUjRqQWdFbU11Y0tocGlBdz09" target="_blank">the Zoom meeting for this room</a>, which you can access at any time during the conference. (Passcode 379872)<br/><br/>The other unconferencing rooms are [[cockatrice]], [[dragon]], [[naga]], [[skeleton]], and [[tengu]]. Or you can climb the stairs back up to the [[unconferencing lobby->unconference]].',noMediaChat:!0,hasNoteWall:!0},sfHub:{id:"sfHub",displayName:"Space Hangar Observation Lounge",shortName:"the Space Lounge",description:"An impossibly fast elevator whisks you up to a bright lounge of steel, chrome, and futuristic plastics. Spacecraft of all shapes and sizes constantly come and go in view of the giant observation window. Constrasting the vast depths of space, the lounge itself is strangely cozy. Floor-to-ceiling hexagonal bookshelves provide all the reading material you could ask for, with oddly shaped but fluffy ottoman-like chairs to settle into. A [[vending machine->vendingMachine]] offers refreshment, along with an extensive bar serving Cosmic Cryo-Brewed Coffee, Terrific Techno-Tea, and apple juice.</br></br>A little robot, sensing you might need a place to relax quietly, beckons you to the [[Robot Fabrication Lab->robots]]. In the corner, a [[dusty machine->timeMachine]] blinks invitingly. You can also go back to the central [[hall]].",hasNoteWall:!0,noteWallData:{roomWallDescription:'Among the seemingly infinite bookshelves, one has been emptied out and contains only a small pile of notebooks. A sign next to it reads "BOOKMARKS - PLEASE HELP US SIFT THE GOOD STUFF!"',noteWallButton:"Add a link",addNoteLinkText:"add a link",addNotePrompt:"What would you like to link to?",noteWallDescription:"Contributions of links to slides, videos, and articles of interest."}},robots:{id:"robots",displayName:"Robot Fabrication Lab",shortName:"the robot lab",noMediaChat:!0,description:"This room is dominated by the quiet hum of machinery doing what it was designed to with minimal fuss and expertly crafted efficiency. Sprockets are being socketed in in one device. A robot arm picks up the socketed sprocket and passes it to a CNC spot welder, which welds it closed. The locked socketed sprockets are conveyed into an opening on the biggest machine, just one of many components for [[the robots->watchRobot]] produced at this fab lab. The entire dance is carried out with a ballet-like elegance, not a movement wasted. It's aggressively, profoundly satisfying. When you feel ready, you can go back to the [[Space Hangar->sfHub]]."},timeMachine:{id:"timeMachine",displayName:"Space Hangar - Strange Device",shortName:"a strange item at the Space Hangar",hidden:!0,riddles:["A grid of glyphs in rows arrayed,\nIs how I'll tell your tale;\nFrom decades past to present day,\nMy codepage has prevailed;\nTiles are fine if you have have time,\nBut I shall never stale;\nNow speak my name as if you'd /go,\nAnd I shall fill your sail."],description:"You can't get the machine to do anything but blink, no matter what you do, plug in or unplug. However, there is an inscription on it, that examined closely appears to be a riddle...</br></br>Go back to the [[Space Hangar->sfHub]]."},vendingMachine:{id:"vendingMachine",displayName:"Space Hangar - Vending Machine",shortName:"the vending machine",description:'Set into the wall is a curious-looking vending machine labelled "Munxip\'s Magnifient Munchies". A touch screen flashes "[[Get Random Food!->generateFood]]" in cycling colours.</br></br>Go back to the [[Space Hangar->sfHub]].'},exploreHub:{id:"exploreHub",displayName:"Adventurer's Guild Hall",shortName:"the Guild",description:'A shockingly fast steam engine whisks you to a grand lounge of bronze, dark woods, and ivy trellises. Every once in a while you hear the pneumatic "whoosh" as items are carried through tubing. There\'s plenty of sturdy tufted couches and velvet lounge chairs, and a variety of elegantly carved coffee tables covered in books and journals.</br></br>You can go back to the central [[hall]], or check in at the [[Office of Transmutations->transmute]] or the [[Office of Steam->steam]].',hasNoteWall:!0,noteWallData:{roomWallDescription:'One journal is open, a black tome decorated with silvery and bronze swirls - "Procedural Generation Surprises" on the cover. Quill pens are nearby.',noteWallButton:"Contribute",addNoteLinkText:"Contribute",addNotePrompt:"Tell us of a time a procedural generator has surprised or delighted you!",noteWallDescription:"Tales of strange, delightful emergent results from procedural generators."}},transmute:{id:"transmute",displayName:"Office of Transmutations",shortName:"the Office of Transmutations",description:"Most of the workers are busy crafting potions - you recognize the crates they're filling as matching the ones from the [[bar]]. While most of the hallways are blocked off by swathes of alchemical gear, you can just squeeze through to one, with an ornate sign for [[Dye Machines->dyes]]. Or you can return to the [[Guild Hall->exploreHub]]."},dyes:{id:"dyes",displayName:"Dye Machines",shortName:"the dye machines",description:"There are huge archways on either side of this large room. One is covered in [[gears and paint splatters->doctorPaint]]; the other is dominated by delicate [[glass tubes->shower]]. Or you can turn around and return to [[the office->transmute]]."},doctorPaint:Fr,shower:Ur,steam:{id:"steam",displayName:"Office of Steam",shortName:"the Office of Steam",description:'A hulking steam engine is under glass, powering an ancient computer. It\'s hooked to a typewriter, akin to teletext, and regularly printing out game [[recommendations->getGameRec]]. If you\'d like, you can investigate the <a href="https://store.steampowered.com/sale/roguelikecelebration2021" target="_blank">source of its steam power</a>, or go back to the [[Guild Hall->exploreHub]].'},library:{id:"library",displayName:"The Library of Procedural Studies",shortName:"the library",noMediaChat:!0,description:'A hush falls over you. Every possible space is filled with books and tomes - all the books in the entire space must be loans from here. A large sign over the circulation desk says "NO AUDIO - TEXT ONLY! ~ Management"<br/><br/>From here you can return to the [[hall]].'},hiddenPortalRoom:{id:"hiddenPortalRoom",displayName:"Portal Room",shortName:"the portal room",description:'In the center of the room is a shimmering portal. Next to the portal is a pedestal with an open book. To your right is a table with a sign hung behind it, reading "Lending Table" in flowery wizard script. On the table you can see [[a wand of digging->item]], [[a Proof of Stremf->item]], [[a pair of seven league boots->item]], and [[Planepacked->item]], the legendary limestone statue.<br/><br/>\n      Once you\'ve finished here, you can [[leap into the shimmering portal->hall]]',specialFeatures:[qr.FullRoomIndex],hidden:!0}},...Nr,...Lr};a=o("6Ti1v");function Vr(e){return e.text&&("string"==typeof e.text||e.text instanceof String)&&e.roomId?"string"==typeof e.roomId||e.roomId instanceof String:!e.externalLink||("string"==typeof e.externalLink||e.externalLink instanceof String)}var Wr,Hr,Kr,Gr;(Hr=Wr||(Wr={})).Blue="Blue",Hr.Cyan="Cyan",Hr.Green="Green",Hr.Magenta="Magenta",Hr.Orange="Orange",Hr.Red="Red",Hr.Violet="Violet",Hr.Yellow="Yellow",(Gr=Kr||(Kr={})).Comic="Comic",Gr.Classic="Classic",Gr.Impactful="Impactful";var Yr=o("2lxET");const Qr=()=>{const t=e(a).useContext(qq);return e(a).createElement("div",{id:"rainbow-gate-div",className:"feature-room-view"},e(a).createElement("p",null,"Do you, in fact, approach the chair? ",e(a).createElement("button",{id:"rainbow-gate-button",className:"link-styled-button",onClick:async()=>{await Yr.incrementGateVisits();t(Gt(function(e){const t=Object.values(e);return t[Math.floor(Math.random()*t.length)]}(Wr))),t(en(fn.FeatureRainbowGate))}},"Approach the chair.")))};function Jr(){const{userMap:t,myId:n}=a.useContext(zq),[r,i]=a.useState(0);return a.useEffect((()=>{(async()=>{i(await Yr.getGateVisits())})()}),[]),1===r?e(a).createElement("div",null,e(a).createElement("h1",null,"It's a miracle of modern science!"),e(a).createElement("p",null,"\"Oho! Why, you've arrived just in time for the most amazing experience you'll ever... experience! Just sit in this chair, pull that lever, and you'll in for a truly eye-opening journey. Why, it's a miracle of modern science!\""),e(a).createElement("p",null,"You sit in the chair (it's not especially comfortable and it's... slightly wet?) and pull the lever. There's a shudder as the machine rumbles to life and things start happening. Gears spin, lightning arcs up two metal trusses you hadn't noticed. Your hair begins to stand on end. The doctor (you didn't see any diplomas, so who's to say?) starts to cackle wildly, yelling, \"It works! It WORKS!\" to no one in particular. The machine's hum hits a crescendo when suddenly everything comes to a stop. All is silence. You wait for a moment when you hear a buzz above you."),e(a).createElement("p",null,'Looking up, you see a mechanical arm holding a bucket extend out and rotate, spilling a bucket of paint all over you. "Yes!" yells the doctor (?) "They said it couldn\'t be done! Now... if you\'ll excuse me, I need to clean the paint off the chair." They hold up a sponge and bucket of water and gesture at you to make yourself scarce.'),e(a).createElement("p",null,e(a).createElement("em",null,"Your chat name color is now ",e(a).createElement("span",{className:`name ${t[n].nameColor}`},t[n].nameColor)),".")):e(a).createElement("div",null,e(a).createElement("h1",null,"Back for more?"),e(a).createElement("p",null,'The ambiguously credentialed operator gives you a nod. "Back for more, huh? Er, wait, no. I mean... *ahem* So! You\'ve returned for another glimpse at the uncanny realities beyond human perception! Well sit right down and pull yon lever, my friend." They floridly gesture to the chair at the center of the paint-dumping apparatus.'),e(a).createElement("p",null,'You pull the lever and nothing appears to happen. Then the machine operator runs up with a bucket of paint and spills it all over you. "So sorry, we only have the aetheric budget to do the big show once per person. Grant writing, am I right?" They look you over. "You know, you don\'t look that different to me, but what do I know?" They tap the multi-lensed googles obscuring most of their face. "With these things on it\'s a wonder I can see at all. Everything is coming through like an original Game Boy screen."'),e(a).createElement("p",null,e(a).createElement("em",null,"Your chat name color is now ",e(a).createElement("span",{className:`name ${t[n].nameColor}`},t[n].nameColor)),"."))}a=o("6Ti1v"),Yr=o("2lxET");const Zr=()=>{const t=e(a).useContext(qq),{userMap:n,myId:r}=a.useContext(zq),i=n[r];return e(a).createElement("div",{id:"dull-door-div",className:"feature-room-view"},e(a).createElement("p",null,'Inside the glass tube there\'s nothing in particular, though you note that there\'s a grate on the floor. A damp sign next to the tube\'s opening says "Secondarily-Hydrogenated Oxygen Weighted Emulsion Remover". A smaller sign below that reads "For Dirts, Dyes, and Distress!" ',e(a).createElement("button",{id:"dull-door-button",className:"link-styled-button",onClick:()=>{i.nameColor?Yr.setWasColoredEntering(!0):Yr.setWasColoredEntering(!1),t(en(fn.FeatureDullDoor))}},"Step on the grate"),"."))};function Xr(){const t=e(a).useContext(qq),[n,r]=a.useState(!1);a.useEffect((()=>{(async()=>{r(await Yr.getWasColoredEntering())})()}),[]);return n?e(a).createElement("div",null,e(a).createElement("h1",null,"Could be refreshing?"),e(a).createElement("p",null,"You tentatively press a toe onto the grate. Suddenly the machine gurgles and from openings the top of the tube, warm Secondarily-Hydrogenated Oxygen (miracle of the modern age!) streams down! It certainly seems like any Dirts, Dyes, or Distress you may have accrued will be washed away if you step in fully. It'll probably be refreshing, but it will ",e(a).createElement("em",null,"definitely")," take the paint from the doctor(?) with it."),e(a).createElement("p",null,e(a).createElement("strong",null,"Fully enter the S.H.O.W.E.R.?")),e(a).createElement("button",{id:"dull-door-agree",onClick:()=>{t(Gt(null)),t(tn())}},"Enter"),e(a).createElement("button",{id:"dull-door-agree",onClick:()=>{t(tn())}},"Leave")):e(a).createElement("div",null,e(a).createElement("h1",null,"Refreshing!"),e(a).createElement("p",null,"As you step into the tube, the grating beneath you depresses and clicks. Suddenly the machine gurgles and from openings the top of the tube, warm Secondarily-Hydrogenated Oxygen (miracle of the modern age!) streams down on you and rinses any Dirts, Dyes, or Distress you may have accrued away. It's soothing, in its own odd way, but you aren't sure this so-called S.H.O.W.E.R. will catch on with the masses."))}a=o("6Ti1v");const $r=()=>{const t=e(a).useContext(qq);return e(a).createElement("div",{id:"full-room-index-div",className:"feature-room-view"},e(a).createElement("button",{id:"full-room-index-button",onClick:()=>{t(en(fn.FeatureFullRoomIndex))}},"Read the book"))};function ei(t){return e(a).createElement("div",null,e(a).createElement("h1",null,"Unerring Teleport"),e(a).createElement("p",null,"Verbal elements - either the True Name of the destination, the two common names of the destination, or the name of the destination from an adjoining location (which can only be known from that destination, and is colored in green for whatever reason). The name must exact, but the volume of the incantation is irrelevant."),e(a).createElement("p",null,"Somatic elements - /go or /move"),e(a).createElement("p",null,"Material components - none"),e(a).createElement("p",null,"This spell will take you to whichever place you wish, hidden or not. The only issue is that the names of the hidden places are obscured by dark magics. I, the Great Wizard Teleportus, have researched long and hard, and at last produced a complete list of all the room in this space. Bow before my awesome intelligence!"),e(a).createElement("p",null,"Examples:"),e(a).createElement("ul",null,e(a).createElement("li",{key:"example-0"},e(a).createElement("em",null,"/go hiddenPortalRoom")," utilizes the true name to return here"),e(a).createElement("li",{key:"example-1"},e(a).createElement("em",null,"/move leap into the shimmering portal")," utilizes the name of the destination ('leap into the shimmering portal') from the adjacent room (here)"),e(a).createElement("li",{key:"example-2"},e(a).createElement("em",null,"/move Unconferencing: Sokoban")," utilizes the first common name"),e(a).createElement("li",{key:"example-3"},e(a).createElement("em",null,"/go the artists' atelier")," utilizes the second common name")),e(a).createElement("table",null,e(a).createElement("tbody",null,e(a).createElement("tr",null,e(a).createElement("th",{key:"common-1-header"},"common (first)"),e(a).createElement("th",{key:"common-2-header"},"common (second)"),e(a).createElement("th",{key:"true-header"},"true")),t.rooms.map((t=>e(a).createElement("tr",{key:t.id},e(a).createElement("td",{key:`common-1-${t.id}`},t.name),e(a).createElement("td",{key:`common-2-${t.id}`},t.shortName),e(a).createElement("td",{key:`true-${t.id}`},t.id)))))))}const ti={generateFood:()=>{!async function(e){await mr("pickUpItem",{list:e})}("vendingMachineFood")},pickUpPuppy:()=>{cr("a tiny puppy")},drinkPolymorph:()=>{dr(Ut(),"/get colourful potion")},drinkCancellation:()=>{dr(Ut(),"/get clear potion")},getFortune:()=>{dr(Ut(),"/get fortune cookie")},readPoster:()=>{lr("motivationPosters")},readClosedSign:()=>{lr("closedSigns")},getGameRec:()=>{lr("gameRecommendations")},pentagramHighTech:()=>{ni("Impactful")},pentagramMinimalist:()=>{ni("Classic")},pentagramComical:()=>{ni("Comic")},pentagramNormal:()=>{ni("")},hearPickupLine:()=>{lr("pickupLines")},watchRobot:()=>{lr("robots")}},ni=function(e){ur(Ut(),e),dr(Ut(),"/go ASCII"),async function(e){await mr("displayMessage",{message:e})}("You feel changed by your journey through the pentagram...")};a=o("6Ti1v");const ri=e=>{throw Error("Not Implemented")},ii=e(a=o("6Ti1v")).createContext({prepareForMediaChat:async()=>console.log("Not implemented"),prepareMediaDevices:async()=>console.log("Not implemented"),publishMedia:()=>console.log("Not implemented"),publishAudio:()=>console.log("Not implemented"),unpublishMedia:()=>console.log("Not implemented"),publishingCamera:!1,publishingMic:!1,cameras:[],mics:[],setCurrentCamera:ri,setCurrentMic:ri,currentMic:void 0,currentCamera:void 0,localStreamView:e(a).createElement("div"),inCall:!1,joinCallFailed:!1,joinCall:ri,leaveCall:()=>console.log("Not implemented"),callParticipants:void 0,cameraEnabled:!1,micEnabled:!1,setCameraEnabled:e=>console.log("Not implemented"),setMicEnabled:e=>console.log("Not implemented")}),oi=()=>a.useContext(ii);a=o("6Ti1v"),a=o("6Ti1v");var ai,si=()=>{const{userMap:t,myId:n}=a.useContext(zq),r=t[n];return r.item?e(a).createElement("span",null,"You are holding ",r.item,"."," ",e(a).createElement("button",{className:"link-styled-button",onClick:()=>{!async function(){await mr("pickUpItem",{drop:!0})}()}},"Drop it"),"."):null};a=o("6Ti1v"),a=o("6Ti1v");o.register("3YQAp",(function(e,t){"use strict";var n=o("F0GiY");function r(){}function i(){}i.resetWarningCache=r,e.exports=function(){function e(e,t,r,i,o,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var o={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return o.PropTypes=o,o}})),o.register("F0GiY",(function(e,t){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"})),ai=o("3YQAp")();var ui={};!function(){var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if("string"===o||"number"===o)n.push(i);else if(Array.isArray(i)&&i.length){var a=t.apply(null,i);a&&n.push(a)}else if("object"===o)for(var s in i)e.call(i,s)&&i[s]&&n.push(s)}}return n.join(" ")}ui?(t.default=t,ui=t):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],(function(){return t})):window.classNames=t}();var ci=o("1zGN4");ci=o("1zGN4");function li(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"==typeof e&&e.apply(void 0,n)}function hi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var fi="react-contextmenu",di="react-contextmenu--visible",pi="react-contextmenu-wrapper",mi="react-contextmenu-item",vi="react-contextmenu-item--active",gi="react-contextmenu-item--disabled",yi="react-contextmenu-item--divider",bi="react-contextmenu-item--selected",wi="react-contextmenu-submenu",_i={},ki=Boolean("undefined"!=typeof window&&window.document&&window.document.createElement),Si="REACT_CONTEXTMENU_SHOW",Ei="REACT_CONTEXTMENU_HIDE";function Mi(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,i=void 0;"function"==typeof window.CustomEvent?i=new window.CustomEvent(t,{detail:n}):(i=document.createEvent("CustomEvent")).initCustomEvent(t,!1,!0,n),r&&(r.dispatchEvent(i),e(ci)(_i,n))}function Ti(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];Mi(Si,e(ci)({},t,{type:Si}),n)}function Ci(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];Mi(Ei,e(ci)({},t,{type:Ei}),n)}var Ii=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handleShowEvent=function(e){for(var n in t.callbacks)hi(t.callbacks,n)&&t.callbacks[n].show(e)},this.handleHideEvent=function(e){for(var n in t.callbacks)hi(t.callbacks,n)&&t.callbacks[n].hide(e)},this.register=function(e,n){var r=Math.random().toString(36).substring(7);return t.callbacks[r]={show:e,hide:n},r},this.unregister=function(e){e&&t.callbacks[e]&&delete t.callbacks[e]},this.callbacks={},ki&&(window.addEventListener(Si,this.handleShowEvent),window.addEventListener(Ei,this.handleHideEvent))},xi=(a=o("6Ti1v"),a=o("6Ti1v"),ci=o("1zGN4"),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Ai=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Pi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ri(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Di=function(t){function n(){var t,r,i;Oi(this,n);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return r=i=Ri(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(a))),i.handleClick=function(t){0!==t.button&&1!==t.button&&t.preventDefault(),i.props.disabled||i.props.divider||(li(i.props.onClick,t,e(ci)({},i.props.data,_i.data),_i.target),i.props.preventClose||Ci())},Ri(i,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),Ai(n,[{key:"render",value:function(){var t,n=this,r=this.props,i=r.attributes,o=r.children,s=r.className,u=r.disabled,c=r.divider,l=r.selected,h=e(ui)(s,mi,i.className,(Pi(t={},e(ui)(gi,i.disabledClassName),u),Pi(t,e(ui)(yi,i.dividerClassName),c),Pi(t,e(ui)(bi,i.selectedClassName),l),t));return e(a).createElement("div",xi({},i,{className:h,role:"menuitem",tabIndex:"-1","aria-disabled":u?"true":"false","aria-orientation":c?"horizontal":null,ref:function(e){n.ref=e},onMouseMove:this.props.onMouseMove,onMouseLeave:this.props.onMouseLeave,onTouchEnd:this.handleClick,onClick:this.handleClick}),c?null:o)}}]),n}(a.Component);Di.propTypes={attributes:e(ai).object,children:e(ai).node,className:e(ai).string,data:e(ai).object,disabled:e(ai).bool,divider:e(ai).bool,onClick:e(ai).func,onMouseLeave:e(ai).func,onMouseMove:e(ai).func,preventClose:e(ai).bool,selected:e(ai).bool},Di.defaultProps={attributes:{},children:null,className:"",data:{},disabled:!1,divider:!1,onClick:function(){return null},onMouseMove:function(){return null},onMouseLeave:function(){return null},preventClose:!1,selected:!1};var Ni=Di;var Li=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return ji.call(n),n.seletedItemRef=null,n.state={selectedItem:null,forceSubMenuOpen:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(a.Component);Li.propTypes={children:e(ai).node.isRequired};var ji=function(){var t=this;this.handleKeyNavigation=function(e){if(!1!==t.state.isVisible)switch(e.keyCode){case 37:case 27:e.preventDefault(),t.hideMenu(e);break;case 38:e.preventDefault(),t.selectChildren(!0);break;case 40:e.preventDefault(),t.selectChildren(!1);break;case 39:t.tryToOpenSubMenu(e);break;case 13:e.preventDefault(),t.tryToOpenSubMenu(e);var n=t.seletedItemRef&&t.seletedItemRef.props&&t.seletedItemRef.props.disabled;t.seletedItemRef&&t.seletedItemRef.ref instanceof HTMLElement&&!n?t.seletedItemRef.ref.click():t.hideMenu(e)}},this.handleForceClose=function(){t.setState({forceSubMenuOpen:!1})},this.tryToOpenSubMenu=function(e){t.state.selectedItem&&t.state.selectedItem.type===t.getSubMenuType()&&(e.preventDefault(),t.setState({forceSubMenuOpen:!0}))},this.selectChildren=function(n){var r=t.state.selectedItem,i=[],o=0,s={};if(e(a).Children.forEach(t.props.children,(function n(r,u){r&&([Ni,t.getSubMenuType()].indexOf(r.type)<0?e(a).Children.forEach(r.props.children,n):r.props.divider||(r.props.disabled&&(++o,s[u]=!0),i.push(r)))})),o!==i.length){var u=function(e){var t=e;do{n?--t:++t,t<0?t=i.length-1:t>=i.length&&(t=0)}while(t!==e&&s[t]);return t===e?null:t}(i.indexOf(r));null!==u&&t.setState({selectedItem:i[u],forceSubMenuOpen:!1})}},this.onChildMouseMove=function(e){t.state.selectedItem!==e&&t.setState({selectedItem:e,forceSubMenuOpen:!1})},this.onChildMouseLeave=function(){t.setState({selectedItem:null,forceSubMenuOpen:!1})},this.renderChildren=function(n){return e(a).Children.map(n,(function(n){var r={};return e(a).isValidElement(n)?[Ni,t.getSubMenuType()].indexOf(n.type)<0?(r.children=t.renderChildren(n.props.children),e(a).cloneElement(n,r)):(r.onMouseLeave=t.onChildMouseLeave.bind(t),n.type===t.getSubMenuType()&&(r.forceOpen=t.state.forceSubMenuOpen&&t.state.selectedItem===n,r.forceClose=t.handleForceClose,r.parentKeyNavigationHandler=t.handleKeyNavigation),n.props.divider||t.state.selectedItem!==n?(r.onMouseMove=function(){return t.onChildMouseMove(n)},e(a).cloneElement(n,r)):(r.selected=!0,r.ref=function(e){t.seletedItemRef=e},e(a).cloneElement(n,r))):n}))}},Bi=Li,Fi=(a=o("6Ti1v"),ci=o("1zGN4"),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),Ui=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function qi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zi=function(t){function n(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return r.getMenuPosition=function(){var e=window,t=e.innerWidth,n=e.innerHeight,i=r.subMenu.getBoundingClientRect(),o={};return i.bottom>n?o.bottom=0:o.top=0,i.right<t?o.left="100%":o.right="100%",o},r.getRTLMenuPosition=function(){var e=window.innerHeight,t=r.subMenu.getBoundingClientRect(),n={};return t.bottom>e?n.bottom=0:n.top=0,t.left<0?n.left="100%":n.right="100%",n},r.hideSubMenu=function(e){e.detail&&e.detail.id&&r.menu&&e.detail.id!==r.menu.id||(r.props.forceOpen&&r.props.forceClose(),r.setState({visible:!1,selectedItem:null}),r.unregisterHandlers())},r.handleClick=function(t){t.preventDefault(),r.props.disabled||(li(r.props.onClick,t,e(ci)({},r.props.data,_i.data),_i.target),r.props.onClick&&!r.props.preventCloseOnClick&&Ci())},r.handleMouseEnter=function(){r.closetimer&&clearTimeout(r.closetimer),r.props.disabled||r.state.visible||(r.opentimer=setTimeout((function(){return r.setState({visible:!0,selectedItem:null})}),r.props.hoverDelay))},r.handleMouseLeave=function(){r.opentimer&&clearTimeout(r.opentimer),r.state.visible&&(r.closetimer=setTimeout((function(){return r.setState({visible:!1,selectedItem:null})}),r.props.hoverDelay))},r.menuRef=function(e){r.menu=e},r.subMenuRef=function(e){r.subMenu=e},r.registerHandlers=function(){document.removeEventListener("keydown",r.props.parentKeyNavigationHandler),document.addEventListener("keydown",r.handleKeyNavigation)},r.unregisterHandlers=function(e){document.removeEventListener("keydown",r.handleKeyNavigation),e||document.addEventListener("keydown",r.props.parentKeyNavigationHandler)},r.state=e(ci)({},r.state,{visible:!1}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),Ui(n,[{key:"componentDidMount",value:function(){this.listenId=Ii.register((function(){}),this.hideSubMenu)}},{key:"getSubMenuType",value:function(){return n}},{key:"shouldComponentUpdate",value:function(e,t){return this.isVisibilityChange=!(this.state.visible===t.visible&&this.props.forceOpen===e.forceOpen||this.state.visible&&e.forceOpen||this.props.forceOpen&&t.visible),!0}},{key:"componentDidUpdate",value:function(){var e=this;if(this.isVisibilityChange)if(this.props.forceOpen||this.state.visible){(window.requestAnimationFrame||setTimeout)((function(){var t=e.props.rtl?e.getRTLMenuPosition():e.getMenuPosition();e.subMenu.style.removeProperty("top"),e.subMenu.style.removeProperty("bottom"),e.subMenu.style.removeProperty("left"),e.subMenu.style.removeProperty("right"),hi(t,"top")&&(e.subMenu.style.top=t.top),hi(t,"left")&&(e.subMenu.style.left=t.left),hi(t,"bottom")&&(e.subMenu.style.bottom=t.bottom),hi(t,"right")&&(e.subMenu.style.right=t.right),e.subMenu.classList.add(di),e.registerHandlers(),e.setState({selectedItem:null})}))}else{this.subMenu.addEventListener("transitionend",(function t(){e.subMenu.removeEventListener("transitionend",t),e.subMenu.style.removeProperty("bottom"),e.subMenu.style.removeProperty("right"),e.subMenu.style.top=0,e.subMenu.style.left="100%",e.unregisterHandlers()})),this.subMenu.classList.remove(di)}}},{key:"componentWillUnmount",value:function(){this.listenId&&Ii.unregister(this.listenId),this.opentimer&&clearTimeout(this.opentimer),this.closetimer&&clearTimeout(this.closetimer),this.unregisterHandlers(!0)}},{key:"render",value:function(){var t,n=this.props,r=n.children,i=n.attributes,o=n.disabled,s=n.title,u=n.selected,c=this.state.visible,l={ref:this.menuRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,className:e(ui)(mi,wi,i.listClassName),style:{position:"relative"}},h={className:e(ui)(mi,i.className,(t={},qi(t,e(ui)(gi,i.disabledClassName),o),qi(t,e(ui)(vi,i.visibleClassName),c),qi(t,e(ui)(bi,i.selectedClassName),u),t)),onMouseMove:this.props.onMouseMove,onMouseOut:this.props.onMouseOut,onClick:this.handleClick},f={ref:this.subMenuRef,style:{position:"absolute",transition:"opacity 1ms",top:0,left:"100%"},className:e(ui)(fi,this.props.className)};return e(a).createElement("nav",Fi({},l,{role:"menuitem",tabIndex:"-1","aria-haspopup":"true"}),e(a).createElement("div",Fi({},i,h),s),e(a).createElement("nav",Fi({},f,{role:"menu",tabIndex:"-1"}),this.renderChildren(r)))}}]),n}(Bi);zi.propTypes={children:e(ai).node.isRequired,attributes:e(ai).object,title:e(ai).node.isRequired,className:e(ai).string,disabled:e(ai).bool,hoverDelay:e(ai).number,rtl:e(ai).bool,selected:e(ai).bool,onMouseMove:e(ai).func,onMouseOut:e(ai).func,forceOpen:e(ai).bool,forceClose:e(ai).func,parentKeyNavigationHandler:e(ai).func},zi.defaultProps={disabled:!1,hoverDelay:500,attributes:{},className:"",rtl:!1,selected:!1,onMouseMove:function(){return null},onMouseOut:function(){return null},forceOpen:!1,forceClose:function(){return null},parentKeyNavigationHandler:function(){return null}};var Vi=zi,Wi=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Hi=function(t){function n(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return r.registerHandlers=function(){document.addEventListener("mousedown",r.handleOutsideClick),document.addEventListener("touchstart",r.handleOutsideClick),r.props.preventHideOnScroll||document.addEventListener("scroll",r.handleHide),r.props.preventHideOnContextMenu||document.addEventListener("contextmenu",r.handleHide),document.addEventListener("keydown",r.handleKeyNavigation),r.props.preventHideOnResize||window.addEventListener("resize",r.handleHide)},r.unregisterHandlers=function(){document.removeEventListener("mousedown",r.handleOutsideClick),document.removeEventListener("touchstart",r.handleOutsideClick),document.removeEventListener("scroll",r.handleHide),document.removeEventListener("contextmenu",r.handleHide),document.removeEventListener("keydown",r.handleKeyNavigation),window.removeEventListener("resize",r.handleHide)},r.handleShow=function(e){if(e.detail.id===r.props.id&&!r.state.isVisible){var t=e.detail.position,n=t.x,i=t.y;r.setState({isVisible:!0,x:n,y:i}),r.registerHandlers(),li(r.props.onShow,e)}},r.handleHide=function(e){!r.state.isVisible||e.detail&&e.detail.id&&e.detail.id!==r.props.id||(r.unregisterHandlers(),r.setState({isVisible:!1,selectedItem:null,forceSubMenuOpen:!1}),li(r.props.onHide,e))},r.handleOutsideClick=function(e){r.menu.contains(e.target)||Ci()},r.handleMouseLeave=function(t){t.preventDefault(),li(r.props.onMouseLeave,t,e(ci)({},r.props.data,_i.data),_i.target),r.props.hideOnLeave&&Ci()},r.handleContextMenu=function(e){e.preventDefault(),r.handleHide(e)},r.hideMenu=function(e){27!==e.keyCode&&13!==e.keyCode||Ci()},r.getMenuPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={top:t,left:e};if(!r.menu)return n;var i=window,o=i.innerWidth,a=i.innerHeight,s=r.menu.getBoundingClientRect();return t+s.height>a&&(n.top-=s.height),e+s.width>o&&(n.left-=s.width),n.top<0&&(n.top=s.height<a?(a-s.height)/2:0),n.left<0&&(n.left=s.width<o?(o-s.width)/2:0),n},r.getRTLMenuPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={top:t,left:e};if(!r.menu)return n;var i=window,o=i.innerWidth,a=i.innerHeight,s=r.menu.getBoundingClientRect();return n.left=e-s.width,t+s.height>a&&(n.top-=s.height),n.left<0&&(n.left+=s.width),n.top<0&&(n.top=s.height<a?(a-s.height)/2:0),n.left+s.width>o&&(n.left=s.width<o?(o-s.width)/2:0),n},r.menuRef=function(e){r.menu=e},r.state=e(ci)({},r.state,{x:0,y:0,isVisible:!1}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),Wi(n,[{key:"getSubMenuType",value:function(){return Vi}},{key:"componentDidMount",value:function(){this.listenId=Ii.register(this.handleShow,this.handleHide)}},{key:"componentDidUpdate",value:function(){var e=this,t=window.requestAnimationFrame||setTimeout;this.state.isVisible?t((function(){var n=e.state,r=n.x,i=n.y,o=e.props.rtl?e.getRTLMenuPosition(r,i):e.getMenuPosition(r,i),a=o.top,s=o.left;t((function(){e.menu&&(e.menu.style.top=a+"px",e.menu.style.left=s+"px",e.menu.style.opacity=1,e.menu.style.pointerEvents="auto")}))})):t((function(){e.menu&&(e.menu.style.opacity=0,e.menu.style.pointerEvents="none")}))}},{key:"componentWillUnmount",value:function(){this.listenId&&Ii.unregister(this.listenId),this.unregisterHandlers()}},{key:"render",value:function(){var t,n,r,i=this.props,o=i.children,s=i.className,u=i.style,c=this.state.isVisible,l=e(ci)({},u,{position:"fixed",opacity:0,pointerEvents:"none"}),h=e(ui)(fi,s,(r=c,(n=di)in(t={})?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t));return e(a).createElement("nav",{role:"menu",tabIndex:"-1",ref:this.menuRef,style:l,className:h,onContextMenu:this.handleContextMenu,onMouseLeave:this.handleMouseLeave},this.renderChildren(o))}}]),n}(Bi);Hi.propTypes={id:e(ai).string.isRequired,children:e(ai).node.isRequired,data:e(ai).object,className:e(ai).string,hideOnLeave:e(ai).bool,rtl:e(ai).bool,onHide:e(ai).func,onMouseLeave:e(ai).func,onShow:e(ai).func,preventHideOnContextMenu:e(ai).bool,preventHideOnResize:e(ai).bool,preventHideOnScroll:e(ai).bool,style:e(ai).object},Hi.defaultProps={className:"",data:{},hideOnLeave:!1,rtl:!1,onHide:function(){return null},onMouseLeave:function(){return null},onShow:function(){return null},preventHideOnContextMenu:!1,preventHideOnResize:!1,preventHideOnScroll:!1,style:{}};var Ki=Hi,Gi=(a=o("6Ti1v"),ci=o("1zGN4"),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function Yi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qi(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Ji=function(t){function n(){var t,r,i;Yi(this,n);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return r=i=Qi(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(a))),i.touchHandled=!1,i.handleMouseDown=function(e){i.props.holdToDisplay>=0&&0===e.button&&(e.persist(),e.stopPropagation(),i.mouseDownTimeoutId=setTimeout((function(){return i.handleContextClick(e)}),i.props.holdToDisplay)),li(i.props.attributes.onMouseDown,e)},i.handleMouseUp=function(e){0===e.button&&clearTimeout(i.mouseDownTimeoutId),li(i.props.attributes.onMouseUp,e)},i.handleMouseOut=function(e){0===e.button&&clearTimeout(i.mouseDownTimeoutId),li(i.props.attributes.onMouseOut,e)},i.handleTouchstart=function(e){i.touchHandled=!1,i.props.holdToDisplay>=0&&(e.persist(),e.stopPropagation(),i.touchstartTimeoutId=setTimeout((function(){i.handleContextClick(e),i.touchHandled=!0}),i.props.holdToDisplay)),li(i.props.attributes.onTouchStart,e)},i.handleTouchEnd=function(e){i.touchHandled&&e.preventDefault(),clearTimeout(i.touchstartTimeoutId),li(i.props.attributes.onTouchEnd,e)},i.handleContextMenu=function(e){e.button===i.props.mouseButton&&i.handleContextClick(e),li(i.props.attributes.onContextMenu,e)},i.handleMouseClick=function(e){e.button===i.props.mouseButton&&i.handleContextClick(e),li(i.props.attributes.onClick,e)},i.handleContextClick=function(t){if(!(i.props.disable||i.props.disableIfShiftIsPressed&&t.shiftKey)){t.preventDefault(),t.stopPropagation();var n=t.clientX||t.touches&&t.touches[0].pageX,r=t.clientY||t.touches&&t.touches[0].pageY;i.props.posX&&(n-=i.props.posX),i.props.posY&&(r-=i.props.posY),Ci();var o=li(i.props.collect,i.props),a={position:{x:n,y:r},target:i.elem,id:i.props.id};o&&"function"==typeof o.then?o.then((function(n){a.data=e(ci)({},n,{target:t.target}),Ti(a)})):(a.data=e(ci)({},o,{target:t.target}),Ti(a))}},i.elemRef=function(e){i.elem=e},Qi(i,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),Gi(n,[{key:"render",value:function(){var t=this.props,n=t.renderTag,r=t.attributes,i=t.children,o=e(ci)({},r,{className:e(ui)(pi,r.className),onContextMenu:this.handleContextMenu,onClick:this.handleMouseClick,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onTouchStart:this.handleTouchstart,onTouchEnd:this.handleTouchEnd,onMouseOut:this.handleMouseOut,ref:this.elemRef});return e(a).createElement(n,o,i)}}]),n}(a.Component);Ji.propTypes={id:e(ai).string.isRequired,children:e(ai).node.isRequired,attributes:e(ai).object,collect:e(ai).func,disable:e(ai).bool,holdToDisplay:e(ai).number,posX:e(ai).number,posY:e(ai).number,renderTag:e(ai).elementType,mouseButton:e(ai).number,disableIfShiftIsPressed:e(ai).bool},Ji.defaultProps={attributes:{},collect:function(){return null},disable:!1,holdToDisplay:1e3,renderTag:"div",posX:0,posY:0,mouseButton:2,disableIfShiftIsPressed:!1};var Zi=Ji;a=o("6Ti1v"),Object.assign,function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}}();[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Object.keys(Zi.propTypes)),["children"]);a=o("6Ti1v");var Xi="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),$i=new Uint8Array(16);function eo(){if(!Xi)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xi($i)}for(var to=[],no=0;no<256;++no)to[no]=(no+256).toString(16).substr(1);var ro=function(e,t){var n=t||0,r=to;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")};var io=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||eo)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[r+o]=i[o];return t||ro(i)};function oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ao(e,t,n){return t&&oo(e.prototype,t),n&&oo(e,n),e}function so(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uo(){return(uo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?co(Object(n),!0).forEach((function(t){so(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):co(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ho(e){return(ho=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fo(e,t){return(fo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function po(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var mo={HIDE:"__react_tooltip_hide_event",REBUILD:"__react_tooltip_rebuild_event",SHOW:"__react_tooltip_show_event"},vo=function(e,t){var n;"function"==typeof window.CustomEvent?n=new window.CustomEvent(e,{detail:t}):(n=document.createEvent("Event")).initEvent(e,!1,!0,t),window.dispatchEvent(n)};var go=function(e,t){var n=this.state.show,r=this.props.id,i=this.isCapture(t.currentTarget),o=t.currentTarget.getAttribute("currentItem");i||t.stopPropagation(),n&&"true"===o?e||this.hideTooltip(t):(t.currentTarget.setAttribute("currentItem","true"),yo(t.currentTarget,this.getTargetArray(r)),this.showTooltip(t))},yo=function(e,t){for(var n=0;n<t.length;n++)e!==t[n]?t[n].setAttribute("currentItem","false"):t[n].setAttribute("currentItem","true")},bo={id:"9b69f92e-d3fe-498b-b1b4-c5e63a51b0cf",set:function(e,t,n){this.id in e?e[this.id][t]=n:Object.defineProperty(e,this.id,{configurable:!0,value:so({},t,n)})},get:function(e,t){var n=e[this.id];if(void 0!==n)return n[t]}};var wo=function(e,t,n){var r=t.respectEffect,i=void 0!==r&&r,o=t.customEvent,a=void 0!==o&&o,s=this.props.id,u=n.target.getAttribute("data-tip")||null,c=n.target.getAttribute("data-for")||null,l=n.target;if(!this.isCustomEvent(l)||a){var h=null==s&&null==c||c===s;if(null!=u&&(!i||"float"===this.getEffect(l))&&h){var f=function(e){var t={};for(var n in e)"function"==typeof e[n]?t[n]=e[n].bind(e):t[n]=e[n];return t}(n);f.currentTarget=l,e(f)}}},_o=function(e,t){var n={};return e.forEach((function(e){var r=e.getAttribute(t);r&&r.split(" ").forEach((function(e){return n[e]=!0}))})),n},ko=function(){return document.getElementsByTagName("body")[0]};function So(e,t,n,r,i,o,a){for(var s=Eo(n),u=s.width,c=s.height,l=Eo(t),h=l.width,f=l.height,d=Mo(e,t,o),p=d.mouseX,m=d.mouseY,v=To(o,h,f,u,c),g=Co(a),y=g.extraOffsetX,b=g.extraOffsetY,w=window.innerWidth,_=window.innerHeight,k=Io(n),S=k.parentTop,E=k.parentLeft,M=function(e){var t=v[e].l;return p+t+y},T=function(e){var t=v[e].t;return m+t+b},C=function(e){return t=v[e].r,p+t+y>w;var t},I=function(e){return t=v[e].b,m+t+b>_;var t},x=function(e){return function(e){return M(e)<0}(e)||C(e)||function(e){return T(e)<0}(e)||I(e)},A=function(e){return!x(e)},P=["top","bottom","left","right"],O=[],R=0;R<4;R++){var D=P[R];A(D)&&O.push(D)}var N,L=!1,j=i!==r;return A(i)&&j?(L=!0,N=i):O.length>0&&x(i)&&x(r)&&(L=!0,N=O[0]),L?{isNewState:!0,newState:{place:N}}:{isNewState:!1,position:{left:parseInt(M(r)-E,10),top:parseInt(T(r)-S,10)}}}var Eo=function(e){var t=e.getBoundingClientRect(),n=t.height,r=t.width;return{height:parseInt(n,10),width:parseInt(r,10)}},Mo=function(e,t,n){var r=t.getBoundingClientRect(),i=r.top,o=r.left,a=Eo(t),s=a.width,u=a.height;return"float"===n?{mouseX:e.clientX,mouseY:e.clientY}:{mouseX:o+s/2,mouseY:i+u/2}},To=function(e,t,n,r,i){var o,a,s,u;return"float"===e?(o={l:-r/2,r:r/2,t:-(i+3+2),b:-3},s={l:-r/2,r:r/2,t:15,b:i+3+2+12},u={l:-(r+3+2),r:-3,t:-i/2,b:i/2},a={l:3,r:r+3+2,t:-i/2,b:i/2}):"solid"===e&&(o={l:-r/2,r:r/2,t:-(n/2+i+2),b:-n/2},s={l:-r/2,r:r/2,t:n/2,b:n/2+i+2},u={l:-(r+t/2+2),r:-t/2,t:-i/2,b:i/2},a={l:t/2,r:r+t/2+2,t:-i/2,b:i/2}),{top:o,bottom:s,left:u,right:a}},Co=function(e){var t=0,n=0;for(var r in"[object String]"===Object.prototype.toString.apply(e)&&(e=JSON.parse(e.toString().replace(/'/g,'"'))),e)"top"===r?n-=parseInt(e[r],10):"bottom"===r?n+=parseInt(e[r],10):"left"===r?t-=parseInt(e[r],10):"right"===r&&(t+=parseInt(e[r],10));return{extraOffsetX:t,extraOffsetY:n}},Io=function(e){for(var t=e;t&&"none"===window.getComputedStyle(t).getPropertyValue("transform");)t=t.parentElement;return{parentTop:t&&t.getBoundingClientRect().top||0,parentLeft:t&&t.getBoundingClientRect().left||0}};function xo(t,n,r,i){if(n)return n;if(null!=r)return r;if(null===r)return null;var o=/<br\s*\/?>/;return i&&"false"!==i&&o.test(t)?t.split(o).map((function(t,n){return e(a).createElement("span",{key:n,className:"multi-line"},t)})):t}function Ao(e){var t={};return Object.keys(e).filter((function(e){return/(^aria-\w+$|^role$)/.test(e)})).forEach((function(n){t[n]=e[n]})),t}function Po(e){var t=e.length;return e.hasOwnProperty?Array.prototype.slice.call(e):new Array(t).fill().map((function(t){return e[t]}))}!function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t)}}('.__react_component_tooltip {\n  border-radius: 3px;\n  display: inline-block;\n  font-size: 13px;\n  left: -999em;\n  opacity: 0;\n  padding: 8px 21px;\n  position: fixed;\n  pointer-events: none;\n  transition: opacity 0.3s ease-out;\n  top: -999em;\n  visibility: hidden;\n  z-index: 999;\n}\n.__react_component_tooltip.allow_hover, .__react_component_tooltip.allow_click {\n  pointer-events: auto;\n}\n.__react_component_tooltip::before, .__react_component_tooltip::after {\n  content: "";\n  width: 0;\n  height: 0;\n  position: absolute;\n}\n.__react_component_tooltip.show {\n  opacity: 0.9;\n  margin-top: 0;\n  margin-left: 0;\n  visibility: visible;\n}\n.__react_component_tooltip.place-top::before {\n  border-left: 10px solid transparent;\n  border-right: 10px solid transparent;\n  bottom: -8px;\n  left: 50%;\n  margin-left: -10px;\n}\n.__react_component_tooltip.place-bottom::before {\n  border-left: 10px solid transparent;\n  border-right: 10px solid transparent;\n  top: -8px;\n  left: 50%;\n  margin-left: -10px;\n}\n.__react_component_tooltip.place-left::before {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  right: -8px;\n  top: 50%;\n  margin-top: -5px;\n}\n.__react_component_tooltip.place-right::before {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  left: -8px;\n  top: 50%;\n  margin-top: -5px;\n}\n.__react_component_tooltip .multi-line {\n  display: block;\n  padding: 2px 0;\n  text-align: center;\n}');var Oo,Ro,Do,No={dark:{text:"#fff",background:"#222",border:"transparent",arrow:"#222"},success:{text:"#fff",background:"#8DC572",border:"transparent",arrow:"#8DC572"},warning:{text:"#fff",background:"#F0AD4E",border:"transparent",arrow:"#F0AD4E"},error:{text:"#fff",background:"#BE6464",border:"transparent",arrow:"#BE6464"},info:{text:"#fff",background:"#337AB7",border:"transparent",arrow:"#337AB7"},light:{text:"#222",background:"#fff",border:"transparent",arrow:"#fff"}};function Lo(e,t,n,r){return function(e,t){var n=t.text,r=t.background,i=t.border,o=t.arrow;return"\n  \t.".concat(e," {\n\t    color: ").concat(n,";\n\t    background: ").concat(r,";\n\t    border: 1px solid ").concat(i,";\n  \t}\n\n  \t.").concat(e,".place-top {\n        margin-top: -10px;\n    }\n    .").concat(e,".place-top::before {\n        border-top: 8px solid ").concat(i,";\n    }\n    .").concat(e,".place-top::after {\n        border-left: 8px solid transparent;\n        border-right: 8px solid transparent;\n        bottom: -6px;\n        left: 50%;\n        margin-left: -8px;\n        border-top-color: ").concat(o,";\n        border-top-style: solid;\n        border-top-width: 6px;\n    }\n\n    .").concat(e,".place-bottom {\n        margin-top: 10px;\n    }\n    .").concat(e,".place-bottom::before {\n        border-bottom: 8px solid ").concat(i,";\n    }\n    .").concat(e,".place-bottom::after {\n        border-left: 8px solid transparent;\n        border-right: 8px solid transparent;\n        top: -6px;\n        left: 50%;\n        margin-left: -8px;\n        border-bottom-color: ").concat(o,";\n        border-bottom-style: solid;\n        border-bottom-width: 6px;\n    }\n\n    .").concat(e,".place-left {\n        margin-left: -10px;\n    }\n    .").concat(e,".place-left::before {\n        border-left: 8px solid ").concat(i,";\n    }\n    .").concat(e,".place-left::after {\n        border-top: 5px solid transparent;\n        border-bottom: 5px solid transparent;\n        right: -6px;\n        top: 50%;\n        margin-top: -4px;\n        border-left-color: ").concat(o,";\n        border-left-style: solid;\n        border-left-width: 6px;\n    }\n\n    .").concat(e,".place-right {\n        margin-left: 10px;\n    }\n    .").concat(e,".place-right::before {\n        border-right: 8px solid ").concat(i,";\n    }\n    .").concat(e,".place-right::after {\n        border-top: 5px solid transparent;\n        border-bottom: 5px solid transparent;\n        left: -6px;\n        top: 50%;\n        margin-top: -4px;\n        border-right-color: ").concat(o,";\n        border-right-style: solid;\n        border-right-width: 6px;\n    }\n  ")}(e,function(e,t,n){var r=e.text,i=e.background,o=e.border,a=e.arrow?e.arrow:e.background,s=function(e){return No[e]?lo({},No[e]):void 0}(t);r&&(s.text=r);i&&(s.background=i);n&&(s.border=o||("light"===t?"black":"white"));a&&(s.arrow=a);return s}(t,n,r))}var jo,Bo=function(e){e.hide=function(e){vo(mo.HIDE,{target:e})},e.rebuild=function(){vo(mo.REBUILD)},e.show=function(e){vo(mo.SHOW,{target:e})},e.prototype.globalRebuild=function(){this.mount&&(this.unbindListener(),this.bindListener())},e.prototype.globalShow=function(e){if(this.mount){var t=!!(e&&e.detail&&e.detail.target);this.showTooltip({currentTarget:t&&e.detail.target},!0)}},e.prototype.globalHide=function(e){if(this.mount){var t=!!(e&&e.detail&&e.detail.target);this.hideTooltip({currentTarget:t&&e.detail.target},t)}}}(Oo=function(e){e.prototype.bindWindowEvents=function(e){window.removeEventListener(mo.HIDE,this.globalHide),window.addEventListener(mo.HIDE,this.globalHide,!1),window.removeEventListener(mo.REBUILD,this.globalRebuild),window.addEventListener(mo.REBUILD,this.globalRebuild,!1),window.removeEventListener(mo.SHOW,this.globalShow),window.addEventListener(mo.SHOW,this.globalShow,!1),e&&(window.removeEventListener("resize",this.onWindowResize),window.addEventListener("resize",this.onWindowResize,!1))},e.prototype.unbindWindowEvents=function(){window.removeEventListener(mo.HIDE,this.globalHide),window.removeEventListener(mo.REBUILD,this.globalRebuild),window.removeEventListener(mo.SHOW,this.globalShow),window.removeEventListener("resize",this.onWindowResize)},e.prototype.onWindowResize=function(){this.mount&&this.hideTooltip()}}(Oo=function(e){e.prototype.isCustomEvent=function(e){return this.state.event||!!e.getAttribute("data-event")},e.prototype.customBindListener=function(e){var t=this,n=this.state,r=n.event,i=n.eventOff,o=e.getAttribute("data-event")||r,a=e.getAttribute("data-event-off")||i;o.split(" ").forEach((function(n){e.removeEventListener(n,bo.get(e,n));var r=go.bind(t,a);bo.set(e,n,r),e.addEventListener(n,r,!1)})),a&&a.split(" ").forEach((function(n){e.removeEventListener(n,t.hideTooltip),e.addEventListener(n,t.hideTooltip,!1)}))},e.prototype.customUnbindListener=function(e){var t=this.state,n=t.event,r=t.eventOff,i=n||e.getAttribute("data-event"),o=r||e.getAttribute("data-event-off");e.removeEventListener(i,bo.get(e,n)),o&&e.removeEventListener(o,this.hideTooltip)}}(Oo=function(e){e.prototype.isCapture=function(e){return e&&"true"===e.getAttribute("data-iscapture")||this.props.isCapture||!1}}(Oo=function(e){e.prototype.getEffect=function(e){return e.getAttribute("data-effect")||this.props.effect||"float"}}(Oo=function(e){e.prototype.isBodyMode=function(){return!!this.props.bodyMode},e.prototype.bindBodyListener=function(e){var t=this,n=this.state,r=n.event,i=n.eventOff,o=n.possibleCustomEvents,a=n.possibleCustomEventsOff,s=ko(),u=_o(e,"data-event"),c=_o(e,"data-event-off");null!=r&&(u[r]=!0),null!=i&&(c[i]=!0),o.split(" ").forEach((function(e){return u[e]=!0})),a.split(" ").forEach((function(e){return c[e]=!0})),this.unbindBodyListener(s);var l=this.bodyModeListeners={};for(var h in null==r&&(l.mouseover=wo.bind(this,this.showTooltip,{}),l.mousemove=wo.bind(this,this.updateTooltip,{respectEffect:!0}),l.mouseout=wo.bind(this,this.hideTooltip,{})),u)l[h]=wo.bind(this,(function(e){var n=e.currentTarget.getAttribute("data-event-off")||i;go.call(t,n,e)}),{customEvent:!0});for(var f in c)l[f]=wo.bind(this,this.hideTooltip,{customEvent:!0});for(var d in l)s.addEventListener(d,l[d])},e.prototype.unbindBodyListener=function(e){e=e||ko();var t=this.bodyModeListeners;for(var n in t)e.removeEventListener(n,t[n])}}((Do=Ro=function(t){function n(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(t=po(this,ho(n).call(this,e))).state={uuid:e.uuid||"t"+io(),place:e.place||"top",desiredPlace:e.place||"top",type:"dark",effect:"float",show:!1,border:!1,customColors:{},offset:{},extraClass:"",html:!1,delayHide:0,delayShow:0,event:e.event||null,eventOff:e.eventOff||null,currentEvent:null,currentTarget:null,ariaProps:Ao(e),isEmptyTip:!1,disable:!1,possibleCustomEvents:e.possibleCustomEvents||"",possibleCustomEventsOff:e.possibleCustomEventsOff||"",originTooltip:null,isMultiline:!1},t.bind(["showTooltip","updateTooltip","hideTooltip","hideTooltipOnScroll","getTooltipContent","globalRebuild","globalShow","globalHide","onWindowResize","mouseOnToolTip"]),t.mount=!0,t.delayShowLoop=null,t.delayHideLoop=null,t.delayReshow=null,t.intervalUpdateContent=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fo(e,t)}(n,t),ao(n,null,[{key:"propTypes",get:function(){return{uuid:e(ai).string,children:e(ai).any,place:e(ai).string,type:e(ai).string,effect:e(ai).string,offset:e(ai).object,multiline:e(ai).bool,border:e(ai).bool,textColor:e(ai).string,backgroundColor:e(ai).string,borderColor:e(ai).string,arrowColor:e(ai).string,insecure:e(ai).bool,class:e(ai).string,className:e(ai).string,id:e(ai).string,html:e(ai).bool,delayHide:e(ai).number,delayUpdate:e(ai).number,delayShow:e(ai).number,event:e(ai).string,eventOff:e(ai).string,isCapture:e(ai).bool,globalEventOff:e(ai).string,getContent:e(ai).any,afterShow:e(ai).func,afterHide:e(ai).func,overridePosition:e(ai).func,disable:e(ai).bool,scrollHide:e(ai).bool,resizeHide:e(ai).bool,wrapper:e(ai).string,bodyMode:e(ai).bool,possibleCustomEvents:e(ai).string,possibleCustomEventsOff:e(ai).string,clickable:e(ai).bool}}}]),ao(n,[{key:"bind",value:function(e){var t=this;e.forEach((function(e){t[e]=t[e].bind(t)}))}},{key:"componentDidMount",value:function(){var e=this.props,t=(e.insecure,e.resizeHide);this.bindListener(),this.bindWindowEvents(t)}},{key:"componentWillUnmount",value:function(){this.mount=!1,this.clearTimer(),this.unbindListener(),this.removeScrollListener(this.state.currentTarget),this.unbindWindowEvents()}},{key:"mouseOnToolTip",value:function(){return!(!this.state.show||!this.tooltipRef)&&(this.tooltipRef.matches||(this.tooltipRef.msMatchesSelector?this.tooltipRef.matches=this.tooltipRef.msMatchesSelector:this.tooltipRef.matches=this.tooltipRef.mozMatchesSelector),this.tooltipRef.matches(":hover"))}},{key:"getTargetArray",value:function(e){var t,n=[];if(e){var r=e.replace(/\\/g,"\\\\").replace(/"/g,'\\"');t='[data-tip][data-for="'.concat(r,'"]')}else t="[data-tip]:not([data-for])";return Po(document.getElementsByTagName("*")).filter((function(e){return e.shadowRoot})).forEach((function(e){n=n.concat(Po(e.shadowRoot.querySelectorAll(t)))})),n.concat(Po(document.querySelectorAll(t)))}},{key:"bindListener",value:function(){var e=this,t=this.props,n=t.id,r=t.globalEventOff,i=t.isCapture,o=this.getTargetArray(n);o.forEach((function(t){null===t.getAttribute("currentItem")&&t.setAttribute("currentItem","false"),e.unbindBasicListener(t),e.isCustomEvent(t)&&e.customUnbindListener(t)})),this.isBodyMode()?this.bindBodyListener(o):o.forEach((function(t){var n=e.isCapture(t),r=e.getEffect(t);e.isCustomEvent(t)?e.customBindListener(t):(t.addEventListener("mouseenter",e.showTooltip,n),"float"===r&&t.addEventListener("mousemove",e.updateTooltip,n),t.addEventListener("mouseleave",e.hideTooltip,n))})),r&&(window.removeEventListener(r,this.hideTooltip),window.addEventListener(r,this.hideTooltip,i)),this.bindRemovalTracker()}},{key:"unbindListener",value:function(){var e=this,t=this.props,n=t.id,r=t.globalEventOff;this.isBodyMode()?this.unbindBodyListener():this.getTargetArray(n).forEach((function(t){e.unbindBasicListener(t),e.isCustomEvent(t)&&e.customUnbindListener(t)})),r&&window.removeEventListener(r,this.hideTooltip),this.unbindRemovalTracker()}},{key:"unbindBasicListener",value:function(e){var t=this.isCapture(e);e.removeEventListener("mouseenter",this.showTooltip,t),e.removeEventListener("mousemove",this.updateTooltip,t),e.removeEventListener("mouseleave",this.hideTooltip,t)}},{key:"getTooltipContent",value:function(){var e,t=this.props,n=t.getContent,r=t.children;return n&&(e=Array.isArray(n)?n[0]&&n[0](this.state.originTooltip):n(this.state.originTooltip)),xo(this.state.originTooltip,r,e,this.state.isMultiline)}},{key:"isEmptyTip",value:function(e){return"string"==typeof e&&""===e||null===e}},{key:"showTooltip",value:function(e,t){if(this.tooltipRef){if(t&&!this.getTargetArray(this.props.id).some((function(t){return t===e.currentTarget})))return;var n=this.props,r=n.multiline,i=n.getContent,o=e.currentTarget.getAttribute("data-tip"),a=e.currentTarget.getAttribute("data-multiline")||r||!1,s=e instanceof window.FocusEvent||t,u=!0;e.currentTarget.getAttribute("data-scroll-hide")?u="true"===e.currentTarget.getAttribute("data-scroll-hide"):null!=this.props.scrollHide&&(u=this.props.scrollHide);var c=e.currentTarget.getAttribute("data-place")||this.props.place||"top",l=s?"solid":this.getEffect(e.currentTarget),h=e.currentTarget.getAttribute("data-offset")||this.props.offset||{},f=So(e,e.currentTarget,this.tooltipRef,c,c,l,h);f.position&&this.props.overridePosition&&(f.position=this.props.overridePosition(f.position,e,e.currentTarget,this.tooltipRef,c,c,l,h));var d=f.isNewState?f.newState.place:c;this.clearTimer();var p=e.currentTarget,m=this.state.show?p.getAttribute("data-delay-update")||this.props.delayUpdate:0,v=this,g=function(){v.setState({originTooltip:o,isMultiline:a,desiredPlace:c,place:d,type:p.getAttribute("data-type")||v.props.type||"dark",customColors:{text:p.getAttribute("data-text-color")||v.props.textColor||null,background:p.getAttribute("data-background-color")||v.props.backgroundColor||null,border:p.getAttribute("data-border-color")||v.props.borderColor||null,arrow:p.getAttribute("data-arrow-color")||v.props.arrowColor||null},effect:l,offset:h,html:(p.getAttribute("data-html")?"true"===p.getAttribute("data-html"):v.props.html)||!1,delayShow:p.getAttribute("data-delay-show")||v.props.delayShow||0,delayHide:p.getAttribute("data-delay-hide")||v.props.delayHide||0,delayUpdate:p.getAttribute("data-delay-update")||v.props.delayUpdate||0,border:(p.getAttribute("data-border")?"true"===p.getAttribute("data-border"):v.props.border)||!1,extraClass:p.getAttribute("data-class")||v.props.class||v.props.className||"",disable:(p.getAttribute("data-tip-disable")?"true"===p.getAttribute("data-tip-disable"):v.props.disable)||!1,currentTarget:p},(function(){u&&v.addScrollListener(v.state.currentTarget),v.updateTooltip(e),i&&Array.isArray(i)&&(v.intervalUpdateContent=setInterval((function(){if(v.mount){var e=v.props.getContent,t=xo(o,"",e[0](),a),n=v.isEmptyTip(t);v.setState({isEmptyTip:n}),v.updatePosition()}}),i[1]))}))};m?this.delayReshow=setTimeout(g,m):g()}}},{key:"updateTooltip",value:function(e){var t=this,n=this.state,r=n.delayShow,i=n.disable,o=this.props.afterShow,a=this.getTooltipContent(),s=parseInt(r,10),u=e.currentTarget||e.target;if(!this.mouseOnToolTip()&&!this.isEmptyTip(a)&&!i){var c=function(){if(Array.isArray(a)&&a.length>0||a){var n=!t.state.show;t.setState({currentEvent:e,currentTarget:u,show:!0},(function(){t.updatePosition(),n&&o&&o(e)}))}};clearTimeout(this.delayShowLoop),r?this.delayShowLoop=setTimeout(c,s):c()}}},{key:"listenForTooltipExit",value:function(){this.state.show&&this.tooltipRef&&this.tooltipRef.addEventListener("mouseleave",this.hideTooltip)}},{key:"removeListenerForTooltipExit",value:function(){this.state.show&&this.tooltipRef&&this.tooltipRef.removeEventListener("mouseleave",this.hideTooltip)}},{key:"hideTooltip",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isScroll:!1},i=this.state.disable,o=r.isScroll,a=o?0:this.state.delayHide,s=this.props.afterHide,u=this.getTooltipContent();if(this.mount&&!this.isEmptyTip(u)&&!i){if(t){var c=this.getTargetArray(this.props.id),l=c.some((function(t){return t===e.currentTarget}));if(!l||!this.state.show)return}var h=function(){var t=n.state.show;n.mouseOnToolTip()?n.listenForTooltipExit():(n.removeListenerForTooltipExit(),n.setState({show:!1},(function(){n.removeScrollListener(n.state.currentTarget),t&&s&&s(e)})))};this.clearTimer(),a?this.delayHideLoop=setTimeout(h,parseInt(a,10)):h()}}},{key:"hideTooltipOnScroll",value:function(e,t){this.hideTooltip(e,t,{isScroll:!0})}},{key:"addScrollListener",value:function(e){var t=this.isCapture(e);window.addEventListener("scroll",this.hideTooltipOnScroll,t)}},{key:"removeScrollListener",value:function(e){var t=this.isCapture(e);window.removeEventListener("scroll",this.hideTooltipOnScroll,t)}},{key:"updatePosition",value:function(){var e=this,t=this.state,n=t.currentEvent,r=t.currentTarget,i=t.place,o=t.desiredPlace,a=t.effect,s=t.offset,u=this.tooltipRef,c=So(n,r,u,i,o,a,s);if(c.position&&this.props.overridePosition&&(c.position=this.props.overridePosition(c.position,n,r,u,i,o,a,s)),c.isNewState)return this.setState(c.newState,(function(){e.updatePosition()}));u.style.left=c.position.left+"px",u.style.top=c.position.top+"px"}},{key:"clearTimer",value:function(){clearTimeout(this.delayShowLoop),clearTimeout(this.delayHideLoop),clearTimeout(this.delayReshow),clearInterval(this.intervalUpdateContent)}},{key:"hasCustomColors",value:function(){var e=this;return Boolean(Object.keys(this.state.customColors).find((function(t){return"border"!==t&&e.state.customColors[t]}))||this.state.border&&this.state.customColors.border)}},{key:"render",value:function(){var t=this,r=this.state,i=r.extraClass,o=r.html,s=r.ariaProps,u=r.disable,c=this.getTooltipContent(),l=this.isEmptyTip(c),h=Lo(this.state.uuid,this.state.customColors,this.state.type,this.state.border),f="__react_component_tooltip"+" ".concat(this.state.uuid)+(!this.state.show||u||l?"":" show")+(this.state.border?" border":"")+" place-".concat(this.state.place)+" type-".concat(this.hasCustomColors()?"custom":this.state.type)+(this.props.delayUpdate?" allow_hover":"")+(this.props.clickable?" allow_click":""),d=this.props.wrapper;n.supportedWrappers.indexOf(d)<0&&(d=n.defaultProps.wrapper);var p=[f,i].filter(Boolean).join(" ");if(o){var m="".concat(c,"\n<style>").concat(h,"</style>");return e(a).createElement(d,uo({className:"".concat(p),id:this.props.id,ref:function(e){return t.tooltipRef=e}},s,{"data-id":"tooltip",dangerouslySetInnerHTML:{__html:m}}))}return e(a).createElement(d,uo({className:"".concat(p),id:this.props.id},s,{ref:function(e){return t.tooltipRef=e},"data-id":"tooltip"}),e(a).createElement("style",{dangerouslySetInnerHTML:{__html:h}}),c)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.ariaProps,r=Ao(e);return Object.keys(r).some((function(e){return r[e]!==n[e]}))?lo({},t,{ariaProps:r}):null}}]),n}(e(a).Component),so(Ro,"defaultProps",{insecure:!0,resizeHide:!0,wrapper:"div",clickable:!1}),so(Ro,"supportedWrappers",["div","span"]),so(Ro,"displayName","ReactTooltip"),(jo=Oo=Do).prototype.bindRemovalTracker=function(){var e=this,t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(null!=t){var n=new t((function(t){for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.removedNodes.length;i++)if(r.removedNodes[i]===e.state.currentTarget)return void e.hideTooltip()}));n.observe(window.document,{childList:!0,subtree:!0}),this.removalTracker=n}},Oo=void(jo.prototype.unbindRemovalTracker=function(){this.removalTracker&&(this.removalTracker.disconnect(),this.removalTracker=null)})||Oo))||Oo)||Oo)||Oo)||Oo)||Oo)||Oo;function Fo(t){const n=a.useContext(qq),{useSimpleNames:r}=a.useContext(Vq),{userMap:i,myId:o}=a.useContext(zq),s=i[t.userId],u=s&&s.username,c=s&&s.isMod,l=s&&s.isBanned,h=i[o],f=h&&h.isMod,d=(e,t)=>{n(tn()),pr(t.id)},p=f?e(a).createElement(Ni,{data:{id:t.userId,username:u},onClick:(e,t)=>{var r;confirm(`Are you sure you would like to ${l?"unban":"ban"} the user '${t.username}'?`)&&n((r=t.id,{type:Bt.BanToggle,value:r}))}},l?"Unban":"Ban"):"",m=f?e(a).createElement(Ni,{data:{id:t.userId,username:u},onClick:(e,t)=>{var r;confirm(`Are you sure you would like to ${c?"remove":"add"} the user '${t.username}' ${c?"from":"to"} the mod list?`)&&n((r=t.id,{type:Bt.ModToggle,value:r}))}},c?"Remove Mod":"Make Mod"):"";var v="name";!r&&s&&s.nameColor&&(v=v+" "+s.nameColor),!r&&s&&s.fontReward&&(v=v+" font-"+s.fontReward);const g={whiteSpace:t.nowrap?"nowrap":void 0};return e(a).createElement("span",{className:v,"data-tip":s&&s.pronouns,style:g},e(a).createElement(Zi,{id:t.id,renderTag:"span",holdToDisplay:0},e(a).createElement("strong",{className:c?"mod":""},c?"[Mod] ":"",!r&&s&&s.polymorph||"",u||"unknown")),e(a).createElement(Ki,{id:t.id},e(a).createElement(Ni,{data:{id:t.userId},onClick:d},"Profile"),e(a).createElement(Ni,{data:{id:t.userId},onClick:d},"Whisper"),p,m),e(a).createElement(Bo,null))}var Uo=t=>{const{userMap:n}=e(a).useContext(zq);let{users:r,userId:i}=t;const{callParticipants:o}=oi();let s,u;if(o){const e=Array.from(o.values());s=e.filter((e=>e.audioTracks.size>0)).map((e=>e.identity)),u=e.filter((e=>e.videoTracks.size>0)).map((e=>e.identity))}if(r&&i&&(r=r.filter((e=>e!==i))),r){let i;if(0===r.length)return e(a).createElement("div",{id:"dynamic-room-description"},"You are all alone here. ",e(a).createElement(si,null));if("theater"===t.roomId)return e(a).createElement("div",{id:"dynamic-room-description"},"There are ",r.length," other people sitting in here.");const o=r.map(((t,r)=>{const i=n[t];if(!i)return e(a).createElement("span",null);const o=`presence-${r}`;return e(a).createElement("span",{key:`room-presence-${o}`},e(a).createElement(Fo,{userId:t,id:o,key:o}),s&&s.includes(i.id)?e(a).createElement(Or,{className:"has-audio"}):null,u&&u.includes(i.id)?e(a).createElement(Ar,{className:"has-video"}):null,i.item?` (holding ${i.item})`:null)}));return i=1===r.length?o[0]:2===r.length?e(a).createElement("span",null,o[0]," and ",o[1]):e(a).createElement("span",null,(c=o.slice(0,r.length-1),l=", ",0===c.length?[]:c.slice(1).reduce((function(e,t,n){return e.concat([l,t])}),[c[0]])),", and"," ",o[o.length-1]),e(a).createElement("div",{id:"dynamic-room-description"},"Also here ",1===r.length?"is":"are"," ",i,". ",e(a).createElement(si,null))}return e(a).createElement("div",{id:"dynamic-room-description"});var c,l};function qo(e){const t=a.useContext(qq),{prepareForMediaChat:n,currentMic:r,currentCamera:i,joinCall:o,unpublishMedia:s}=oi(),{room:u}=e,[c,l]=a.useState(!0);a.useEffect((()=>{u&&!u.noMediaChat&&!e.textOnlyMode&&e.hasDismissedAModal&&(e.keepCameraWhenMoving||h(),n(),o(e.room.id,e.keepCameraWhenMoving))}),[e.room.id,e.hasDismissedAModal]);const h=()=>{t(Qt()),s()},f=()=>{t(en(fn.NoteWall))};let d;return u&&u.hasNoteWall&&(d=u.noteWallData?a.createElement("div",null,u.noteWallData.roomWallDescription," ",a.createElement("button",{onClick:f},u.noteWallData.noteWallButton)):a.createElement("div",null,"One of the walls has space for attendees to put up sticky notes."," ",a.createElement("button",{onClick:f},"View note wall"))),a.createElement("div",{id:"room"},a.createElement("h1",{id:"room-name"},u?u.name:"Loading...",a.createElement("button",{type:"button",id:"room-collapse-button",className:"link-styled-button",onClick:e=>{l(!c)}},c?a.createElement("span",null,"Hide Description ",a.createElement(Mr,null)):a.createElement("span",null,"Show Description ",a.createElement(Er,null)))),a.createElement("div",{id:"full-room-description",className:c?"":"collapsed"},a.createElement("div",{id:"static-room-description",onClick:e=>{const t=e.target&&e.target.getAttribute&&e.target.getAttribute("data-room");if(t)return void fr(t);const n=e.target&&e.target.getAttribute&&e.target.getAttribute("data-item");n&&cr(n);const r=e.target&&e.target.getAttribute&&e.target.getAttribute("data-action");r&&ti[r]()},dangerouslySetInnerHTML:{__html:u?zo(u.description,e.roomData):"Loading current room..."}}),u&&"theater"===u.id?a.createElement(Vo,null):null,u&&u.specialFeatures&&u.specialFeatures.includes(qr.RainbowDoor)?a.createElement(Qr,null):"",u&&u.specialFeatures&&u.specialFeatures.includes(qr.DullDoor)?a.createElement(Zr,null):"",u&&u.specialFeatures&&u.specialFeatures.includes(qr.FullRoomIndex)?a.createElement($r,null):"",u&&u.riddles?a.createElement("button",{id:"riddle-button",onClick:()=>{t(en(fn.Riddles))}},u.riddles.length>1?"Examine the Riddles":"Examine the Riddle"):"",d),u?a.createElement(Uo,{users:u.users,userId:e.userId,roomId:u.id}):"",e.mediaChatView||"")}function zo(e,t){return e=(e=e.replace(/\[\[([^\]]*?)\-\>([^\]]*?)\]\]/g,((e,n,r)=>{const i=t[r];if("item"===r)return`<a class='room-link' href='#' data-item='${n}'>${n}</a>`;if(i){return`<a class='room-link' href='#' data-room='${r}'>${n}${i&&i.users&&i.users.length>0?` (${i.users.length})`:""}</a>`}if(ti[r])return`<a class='room-link' href='#' data-action='${r}'>${n}</a>`;console.log(`Dev warning: tried to link to room ${r}, which doesn't exist`)}))).replace(/\[\[(.+?)\]\]/g,((e,n)=>{const r=t[n];r||console.log(`Dev warning: tried to link to room ${n}, which doesn't exist`);return`<a class='room-link' href='#' data-room='${n}'>${n}${r&&r.users&&r.users.length>0?` (${r.users.length})`:""}</a>`}))}function Vo(){const e=a.useRef(null),t=a.useRef(null);return a.createElement("div",{id:"iframes",style:{margin:"auto"}},a.createElement("iframe",{width:"560",title:"stream",ref:e,height:"315",src:"https://www.youtube.com/embed/live_stream?channel=UCKv_QzXft4mD6TXmQBZtzIA",frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),a.createElement("iframe",{id:"captions",title:"captions",ref:t,width:"560",height:"100",src:"https://www.streamtext.net/player/?event=RoguelikeCelebration&chat=false&header=false&footer=false&indicator=false&ff=Consolas&fgc=93a1a1",frameBorder:"0",allow:"autoplay; encrypted-media;",allowFullScreen:!0}))}a=o("6Ti1v"),a=o("6Ti1v");var Wo={};Object.defineProperty(Wo,"__esModule",{value:!0});var Ho={};Object.defineProperty(Ho,"__esModule",{value:!0});var Ko=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Go=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a=o("6Ti1v")),Yo={};Object.defineProperty(Yo,"__esModule",{value:!0});var Qo=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a=o("6Ti1v"));Yo.default=function(e,t,n){return Qo.createElement("a",{href:e,key:n},t)};var Jo=ya(Yo),Zo={};Object.defineProperty(Zo,"__esModule",{value:!0}),Zo.default=function(e){return e};var Xo=ya(Zo),$o={};Object.defineProperty($o,"__esModule",{value:!0});function ea(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach((function(t){t&&Object.keys(t).forEach((function(n){e[n]=t[n]}))})),e}function ta(e){return Object.prototype.toString.call(e)}function na(e){return"[object Function]"===ta(e)}function ra(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var ia={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var oa={"http:":{validate:function(e,t,n){var r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){var r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){var r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},aa="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function sa(e){var t=e.re=o("4KzKK")(e.__opts__),n=e.__tlds__.slice();function r(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||n.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),n.push(t.src_xn),t.src_tlds=n.join("|"),t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");var i=[];function a(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach((function(t){var n=e.__schemas__[t];if(null!==n){var r={validate:null,link:null};if(e.__compiled__[t]=r,"[object Object]"===ta(n))return!function(e){return"[object RegExp]"===ta(e)}(n.validate)?na(n.validate)?r.validate=n.validate:a(t,n):r.validate=function(e){return function(t,n){var r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}(n.validate),void(na(n.normalize)?r.normalize=n.normalize:n.normalize?a(t,n):r.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===ta(e)}(n)?a(t,n):i.push(t)}})),i.forEach((function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)})),e.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};var s=Object.keys(e.__compiled__).filter((function(t){return t.length>0&&e.__compiled__[t]})).map(ra).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+s+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+s+")","ig"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function ua(e,t){var n=e.__index__,r=e.__last_index__,i=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=i,this.text=i,this.url=i}function ca(e,t){var n=new ua(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function la(e,t){if(!(this instanceof la))return new la(e,t);var n;t||(n=e,Object.keys(n||{}).reduce((function(e,t){return e||ia.hasOwnProperty(t)}),!1)&&(t=e,e={})),this.__opts__=ea({},ia,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=ea({},oa,e),this.__compiled__={},this.__tlds__=aa,this.__tlds_replaced__=!1,this.re={},sa(this)}o.register("4KzKK",(function(e,t){"use strict";e.exports=function(e){var t={};t.src_Any=o("1NQQc").source,t.src_Cc=o("6cqwU").source,t.src_Z=o("2IcUM").source,t.src_P=o("5M8aG").source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");return t.src_pseudo_letter="(?:(?![><｜]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><｜]|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+"[><｜]|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,4}[a-zA-Z0-9%/]|\\.(?!"+t.src_ZCc+"|[.]).|"+(e&&e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+t.src_ZCc+").|\\!(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy='(^|[><｜]|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}})),o.register("1NQQc",(function(e,t){e.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/})),o.register("6cqwU",(function(e,t){e.exports=/[\0-\x1F\x7F-\x9F]/})),o.register("2IcUM",(function(e,t){e.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/})),o.register("5M8aG",(function(e,t){e.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/})),la.prototype.add=function(e,t){return this.__schemas__[e]=t,sa(this),this},la.prototype.set=function(e){return this.__opts__=ea(this.__opts__,e),this},la.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,n,r,i,o,a,s,u;if(this.re.schema_test.test(e))for((s=this.re.schema_search).lastIndex=0;null!==(t=s.exec(e));)if(i=this.testSchemaAt(e,t[2],s.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+i;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||u<this.__index__)&&null!==(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(o=n.index+n[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=n.index+n[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(r=e.match(this.re.email_fuzzy))&&(o=r.index+r[1].length,a=r.index+r[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=a)),this.__index__>=0},la.prototype.pretest=function(e){return this.re.pretest.test(e)},la.prototype.testSchemaAt=function(e,t,n){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,n,this):0},la.prototype.match=function(e){var t=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(ca(this,t)),t=this.__last_index__);for(var r=t?e.slice(t):e;this.test(r);)n.push(ca(this,t)),r=r.slice(this.__last_index__),t+=this.__last_index__;return n.length?n:null},la.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter((function(e,t,n){return e!==n[t-1]})).reverse(),sa(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,sa(this),this)},la.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},la.prototype.onCompile=function(){};var ha=da(la),fa=da(JSON.parse('["aaa","aarp","abarth","abb","abbott","abbvie","abc","able","abogado","abudhabi","ac","academy","accenture","accountant","accountants","aco","actor","ad","adac","ads","adult","ae","aeg","aero","aetna","af","afamilycompany","afl","africa","ag","agakhan","agency","ai","aig","airbus","airforce","airtel","akdn","al","alfaromeo","alibaba","alipay","allfinanz","allstate","ally","alsace","alstom","am","amazon","americanexpress","americanfamily","amex","amfam","amica","amsterdam","analytics","android","anquan","anz","ao","aol","apartments","app","apple","aq","aquarelle","ar","arab","aramco","archi","army","arpa","art","arte","as","asda","asia","associates","at","athleta","attorney","au","auction","audi","audible","audio","auspost","author","auto","autos","avianca","aw","aws","ax","axa","az","azure","ba","baby","baidu","banamex","bananarepublic","band","bank","bar","barcelona","barclaycard","barclays","barefoot","bargains","baseball","basketball","bauhaus","bayern","bb","bbc","bbt","bbva","bcg","bcn","bd","be","beats","beauty","beer","bentley","berlin","best","bestbuy","bet","bf","bg","bh","bharti","bi","bible","bid","bike","bing","bingo","bio","biz","bj","black","blackfriday","blockbuster","blog","bloomberg","blue","bm","bms","bmw","bn","bnpparibas","bo","boats","boehringer","bofa","bom","bond","boo","book","booking","bosch","bostik","boston","bot","boutique","box","br","bradesco","bridgestone","broadway","broker","brother","brussels","bs","bt","budapest","bugatti","build","builders","business","buy","buzz","bv","bw","by","bz","bzh","ca","cab","cafe","cal","call","calvinklein","cam","camera","camp","cancerresearch","canon","capetown","capital","capitalone","car","caravan","cards","care","career","careers","cars","casa","case","caseih","cash","casino","cat","catering","catholic","cba","cbn","cbre","cbs","cc","cd","ceb","center","ceo","cern","cf","cfa","cfd","cg","ch","chanel","channel","charity","chase","chat","cheap","chintai","christmas","chrome","church","ci","cipriani","circle","cisco","citadel","citi","citic","city","cityeats","ck","cl","claims","cleaning","click","clinic","clinique","clothing","cloud","club","clubmed","cm","cn","co","coach","codes","coffee","college","cologne","com","comcast","commbank","community","company","compare","computer","comsec","condos","construction","consulting","contact","contractors","cooking","cookingchannel","cool","coop","corsica","country","coupon","coupons","courses","cpa","cr","credit","creditcard","creditunion","cricket","crown","crs","cruise","cruises","csc","cu","cuisinella","cv","cw","cx","cy","cymru","cyou","cz","dabur","dad","dance","data","date","dating","datsun","day","dclk","dds","de","deal","dealer","deals","degree","delivery","dell","deloitte","delta","democrat","dental","dentist","desi","design","dev","dhl","diamonds","diet","digital","direct","directory","discount","discover","dish","diy","dj","dk","dm","dnp","do","docs","doctor","dog","domains","dot","download","drive","dtv","dubai","duck","dunlop","dupont","durban","dvag","dvr","dz","earth","eat","ec","eco","edeka","edu","education","ee","eg","email","emerck","energy","engineer","engineering","enterprises","epson","equipment","er","ericsson","erni","es","esq","estate","et","etisalat","eu","eurovision","eus","events","exchange","expert","exposed","express","extraspace","fage","fail","fairwinds","faith","family","fan","fans","farm","farmers","fashion","fast","fedex","feedback","ferrari","ferrero","fi","fiat","fidelity","fido","film","final","finance","financial","fire","firestone","firmdale","fish","fishing","fit","fitness","fj","fk","flickr","flights","flir","florist","flowers","fly","fm","fo","foo","food","foodnetwork","football","ford","forex","forsale","forum","foundation","fox","fr","free","fresenius","frl","frogans","frontdoor","frontier","ftr","fujitsu","fujixerox","fun","fund","furniture","futbol","fyi","ga","gal","gallery","gallo","gallup","game","games","gap","garden","gay","gb","gbiz","gd","gdn","ge","gea","gent","genting","george","gf","gg","ggee","gh","gi","gift","gifts","gives","giving","gl","glade","glass","gle","global","globo","gm","gmail","gmbh","gmo","gmx","gn","godaddy","gold","goldpoint","golf","goo","goodyear","goog","google","gop","got","gov","gp","gq","gr","grainger","graphics","gratis","green","gripe","grocery","group","gs","gt","gu","guardian","gucci","guge","guide","guitars","guru","gw","gy","hair","hamburg","hangout","haus","hbo","hdfc","hdfcbank","health","healthcare","help","helsinki","here","hermes","hgtv","hiphop","hisamitsu","hitachi","hiv","hk","hkt","hm","hn","hockey","holdings","holiday","homedepot","homegoods","homes","homesense","honda","horse","hospital","host","hosting","hot","hoteles","hotels","hotmail","house","how","hr","hsbc","ht","hu","hughes","hyatt","hyundai","ibm","icbc","ice","icu","id","ie","ieee","ifm","ikano","il","im","imamat","imdb","immo","immobilien","in","inc","industries","infiniti","info","ing","ink","institute","insurance","insure","int","intel","international","intuit","investments","io","ipiranga","iq","ir","irish","is","ismaili","ist","istanbul","it","itau","itv","iveco","jaguar","java","jcb","jcp","je","jeep","jetzt","jewelry","jio","jll","jm","jmp","jnj","jo","jobs","joburg","jot","joy","jp","jpmorgan","jprs","juegos","juniper","kaufen","kddi","ke","kerryhotels","kerrylogistics","kerryproperties","kfh","kg","kh","ki","kia","kim","kinder","kindle","kitchen","kiwi","km","kn","koeln","komatsu","kosher","kp","kpmg","kpn","kr","krd","kred","kuokgroup","kw","ky","kyoto","kz","la","lacaixa","lamborghini","lamer","lancaster","lancia","land","landrover","lanxess","lasalle","lat","latino","latrobe","law","lawyer","lb","lc","lds","lease","leclerc","lefrak","legal","lego","lexus","lgbt","li","lidl","life","lifeinsurance","lifestyle","lighting","like","lilly","limited","limo","lincoln","linde","link","lipsy","live","living","lixil","lk","llc","llp","loan","loans","locker","locus","loft","lol","london","lotte","lotto","love","lpl","lplfinancial","lr","ls","lt","ltd","ltda","lu","lundbeck","lupin","luxe","luxury","lv","ly","ma","macys","madrid","maif","maison","makeup","man","management","mango","map","market","marketing","markets","marriott","marshalls","maserati","mattel","mba","mc","mckinsey","md","me","med","media","meet","melbourne","meme","memorial","men","menu","merckmsd","metlife","mg","mh","miami","microsoft","mil","mini","mint","mit","mitsubishi","mk","ml","mlb","mls","mm","mma","mn","mo","mobi","mobile","moda","moe","moi","mom","monash","money","monster","mormon","mortgage","moscow","moto","motorcycles","mov","movie","mp","mq","mr","ms","msd","mt","mtn","mtr","mu","museum","mutual","mv","mw","mx","my","mz","na","nab","nagoya","name","nationwide","natura","navy","nba","nc","ne","nec","net","netbank","netflix","network","neustar","new","newholland","news","next","nextdirect","nexus","nf","nfl","ng","ngo","nhk","ni","nico","nike","nikon","ninja","nissan","nissay","nl","no","nokia","northwesternmutual","norton","now","nowruz","nowtv","np","nr","nra","nrw","ntt","nu","nyc","nz","obi","observer","off","office","okinawa","olayan","olayangroup","oldnavy","ollo","om","omega","one","ong","onl","online","onyourside","ooo","open","oracle","orange","org","organic","origins","osaka","otsuka","ott","ovh","pa","page","panasonic","paris","pars","partners","parts","party","passagens","pay","pccw","pe","pet","pf","pfizer","pg","ph","pharmacy","phd","philips","phone","photo","photography","photos","physio","pics","pictet","pictures","pid","pin","ping","pink","pioneer","pizza","pk","pl","place","play","playstation","plumbing","plus","pm","pn","pnc","pohl","poker","politie","porn","post","pr","pramerica","praxi","press","prime","pro","prod","productions","prof","progressive","promo","properties","property","protection","pru","prudential","ps","pt","pub","pw","pwc","py","qa","qpon","quebec","quest","qvc","racing","radio","raid","re","read","realestate","realtor","realty","recipes","red","redstone","redumbrella","rehab","reise","reisen","reit","reliance","ren","rent","rentals","repair","report","republican","rest","restaurant","review","reviews","rexroth","rich","richardli","ricoh","ril","rio","rip","rmit","ro","rocher","rocks","rodeo","rogers","room","rs","rsvp","ru","rugby","ruhr","run","rw","rwe","ryukyu","sa","saarland","safe","safety","sakura","sale","salon","samsclub","samsung","sandvik","sandvikcoromant","sanofi","sap","sarl","sas","save","saxo","sb","sbi","sbs","sc","sca","scb","schaeffler","schmidt","scholarships","school","schule","schwarz","science","scjohnson","scot","sd","se","search","seat","secure","security","seek","select","sener","services","ses","seven","sew","sex","sexy","sfr","sg","sh","shangrila","sharp","shaw","shell","shia","shiksha","shoes","shop","shopping","shouji","show","showtime","shriram","si","silk","sina","singles","site","sj","sk","ski","skin","sky","skype","sl","sling","sm","smart","smile","sn","sncf","so","soccer","social","softbank","software","sohu","solar","solutions","song","sony","soy","space","sport","spot","spreadbetting","sr","srl","ss","st","stada","staples","star","statebank","statefarm","stc","stcgroup","stockholm","storage","store","stream","studio","study","style","su","sucks","supplies","supply","support","surf","surgery","suzuki","sv","swatch","swiftcover","swiss","sx","sy","sydney","systems","sz","tab","taipei","talk","taobao","target","tatamotors","tatar","tattoo","tax","taxi","tc","tci","td","tdk","team","tech","technology","tel","temasek","tennis","teva","tf","tg","th","thd","theater","theatre","tiaa","tickets","tienda","tiffany","tips","tires","tirol","tj","tjmaxx","tjx","tk","tkmaxx","tl","tm","tmall","tn","to","today","tokyo","tools","top","toray","toshiba","total","tours","town","toyota","toys","tr","trade","trading","training","travel","travelchannel","travelers","travelersinsurance","trust","trv","tt","tube","tui","tunes","tushu","tv","tvs","tw","tz","ua","ubank","ubs","ug","uk","unicom","university","uno","uol","ups","us","uy","uz","va","vacations","vana","vanguard","vc","ve","vegas","ventures","verisign","versicherung","vet","vg","vi","viajes","video","vig","viking","villas","vin","vip","virgin","visa","vision","viva","vivo","vlaanderen","vn","vodka","volkswagen","volvo","vote","voting","voto","voyage","vu","vuelos","wales","walmart","walter","wang","wanggou","watch","watches","weather","weatherchannel","webcam","weber","website","wed","wedding","weibo","weir","wf","whoswho","wien","wiki","williamhill","win","windows","wine","winners","wme","wolterskluwer","woodside","work","works","world","wow","ws","wtc","wtf","xbox","xerox","xfinity","xihuan","xin","कॉम","セール","佛山","ಭಾರತ","慈善","集团","在线","한국","ଭାରତ","大众汽车","点看","คอม","ভাৰত","ভারত","八卦","موقع","বাংলা","公益","公司","香格里拉","网站","移动","我爱你","москва","қаз","католик","онлайн","сайт","联通","срб","бг","бел","קום","时尚","微博","淡马锡","ファッション","орг","नेट","ストア","アマゾン","삼성","சிங்கப்பூர்","商标","商店","商城","дети","мкд","ею","ポイント","新闻","家電","كوم","中文网","中信","中国","中國","娱乐","谷歌","భారత్","ලංකා","電訊盈科","购物","クラウド","ભારત","通販","भारतम्","भारत","भारोत","网店","संगठन","餐厅","网络","ком","укр","香港","亚马逊","诺基亚","食品","飞利浦","台湾","台灣","手机","мон","الجزائر","عمان","ارامكو","ایران","العليان","اتصالات","امارات","بازار","موريتانيا","پاکستان","الاردن","بارت","بھارت","المغرب","ابوظبي","البحرين","السعودية","ڀارت","كاثوليك","سودان","همراه","عراق","مليسيا","澳門","닷컴","政府","شبكة","بيتك","عرب","გე","机构","组织机构","健康","ไทย","سورية","招聘","рус","рф","تونس","大拿","ລາວ","みんな","グーグル","ευ","ελ","世界","書籍","ഭാരതം","ਭਾਰਤ","网址","닷넷","コム","天主教","游戏","vermögensberater","vermögensberatung","企业","信息","嘉里大酒店","嘉里","مصر","قطر","广东","இலங்கை","இந்தியா","հայ","新加坡","فلسطين","政务","xxx","xyz","yachts","yahoo","yamaxun","yandex","ye","yodobashi","yoga","yokohama","you","youtube","yt","yun","za","zappos","zara","zero","zip","zm","zone","zuerich","zw"]'));function da(e){return e&&e.__esModule?e:{default:e}}var pa=new ha.default;pa.tlds(fa.default),$o.default=function(e){return pa.match(e)};var ma=ya($o),va={};Object.defineProperty(va,"__esModule",{value:!0}),va.default=function(e){return e};var ga=ya(va);function ya(e){return e&&e.__esModule?e:{default:e}}function ba(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wa(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _a=function(e){function t(){return ba(this,t),wa(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Ko(t,[{key:"parseString",value:function(e){var t=this;if(""===e)return e;var n=this.props.matchDecorator(e);if(!n)return e;var r=[],i=0;return n.forEach((function(n,o){n.index>i&&r.push(e.substring(i,n.index));var a=t.props.hrefDecorator(n.url),s=t.props.textDecorator(n.text),u=t.props.componentDecorator(a,s,o);r.push(u),i=n.lastIndex})),e.length>i&&r.push(e.substring(i)),1===r.length?r[0]:r}},{key:"parse",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"string"==typeof e?this.parseString(e):Go.isValidElement(e)&&"a"!==e.type&&"button"!==e.type?Go.cloneElement(e,{key:n},this.parse(e.props.children)):Array.isArray(e)?e.map((function(e,n){return t.parse(e,n)})):e}},{key:"render",value:function(){return Go.createElement(Go.Fragment,null,this.parse(this.props.children))}}]),t}(Go.Component);_a.defaultProps={componentDecorator:Jo.default,hrefDecorator:Xo.default,matchDecorator:ma.default,textDecorator:ga.default},Ho.default=_a;var ka,Sa,Ea=(ka=Ho)&&ka.__esModule?ka:{default:ka};function Ma(e){return[Sa.Chat,Sa.Emote,Sa.Shout,Sa.Dance,Sa.Caption].includes(e.type)}Wo.default=Ea.default,function(e){e.Connected="CONNECTED",e.Disconnected="DISCONNECTED",e.Entered="ENTERED",e.Left="LEFT",e.MovedRoom="MOVED",e.SameRoom="SAME",e.Chat="CHAT",e.Whisper="WHISPER",e.Shout="SHOUT",e.Emote="EMOTE",e.Dance="DANCE",e.Mod="MOD",e.Error="ERROR",e.Command="COMMAND",e.Caption="CAPTION"}(Sa||(Sa={}));const Ta=(e,t,n)=>({type:Sa.Chat,messageId:e,userId:t,message:n,timestamp:new Date}),Ca=(e,t,n)=>({type:Sa.Caption,messageId:e,userId:t,message:n,timestamp:new Date}),Ia=(e,t,n=!1)=>({type:Sa.Whisper,userId:e,message:t,senderIsSelf:n,timestamp:new Date}),xa=e=>({type:Sa.Error,error:e,timestamp:new Date}),Aa=e=>({type:Sa.Command,command:e,timestamp:new Date}),Pa=new Intl.DateTimeFormat("en",{hour:"numeric",minute:"numeric"});function Oa(t){const{message:n}=t;if(!n)return e(a).createElement("div",null);const r={[Sa.Connected]:La,[Sa.Disconnected]:ja,[Sa.Entered]:Ba,[Sa.Left]:Fa,[Sa.MovedRoom]:Ua,[Sa.SameRoom]:qa,[Sa.Chat]:za,[Sa.Whisper]:Wa,[Sa.Shout]:Ka,[Sa.Emote]:Ga,[Sa.Dance]:Ya,[Sa.Caption]:Va,[Sa.Error]:Qa,[Sa.Mod]:Ha,[Sa.Command]:Ja}[n.type];if(!r)return console.log("Unexpected message type",n.type),e(a).createElement("div",null);const i="string"==typeof n.timestamp?new Date(n.timestamp):n.timestamp;let o="message-wrapper";return t.msgIndex%2==0&&(o+=" even-message"),e(a).createElement("div",{className:o},e(a).createElement("div",{className:`time ${t.hideTimestamp?"show-on-hover":null}`},Pa.format(i)),e(a).createElement(r,{...n,id:t.id}))}const Ra=(e,t)=>{confirm(`Are you sure you would like to delete the message '${t.message}'?`)&&async function(e){await mr("deleteMessage",{messageId:e})}(t.messageId)},Da=(t,n,r)=>e(a).createElement("a",{href:t,key:r,target:"_blank",rel:"noopener noreferrer"},n),Na=t=>{const{userMap:n,myId:r}=a.useContext(zq);return n[r]&&n[r].isMod?e(a).createElement(e(Wo),{componentDecorator:Da},e(a).createElement("span",{className:"deleteMenu"},e(a).createElement(Zi,{id:t.messageId,mouseButton:2,renderTag:"span"},t.children),e(a).createElement(Ki,{id:t.messageId},e(a).createElement(Ni,{data:{messageId:t.messageId,message:t.children},onClick:Ra},"Delete Message?")),e(a).createElement(Bo,null))):e(a).createElement(e(Wo),{componentDecorator:Da},t.children)},La=t=>e(a).createElement("div",{className:"message"},e(a).createElement(Fo,{userId:t.userId,id:t.id})," has connected."),ja=t=>e(a).createElement("div",{className:"message"},e(a).createElement(Fo,{userId:t.userId,id:t.id})," has disconnected."),Ba=t=>{const n=()=>{fr(t.fromId)},r=a.useContext(Hq);if(r[t.fromId]){const i=r[t.fromId].hidden?e(a).createElement("text",null,"somewhere..."):e(a).createElement("button",{onClick:n,className:"link-styled-button"},t.fromName,".");return e(a).createElement("div",{className:"message movement-message"},e(a).createElement(Fo,{userId:t.userId,id:t.id})," has entered from"," ",i)}return null},Fa=t=>{const n=()=>{fr(t.toId)},r=a.useContext(Hq);if(r[t.toId]){const i=r[t.toId].hidden?e(a).createElement("text",null,"somewhere..."):e(a).createElement("button",{onClick:n,className:"link-styled-button"},t.toName,".");return e(a).createElement("div",{className:"message movement-message"},e(a).createElement(Fo,{id:t.id,userId:t.userId})," has wandered off to"," ",i)}return null},Ua=t=>e(a).createElement("div",{className:"message"},"You have moved to ",t.to,"."),qa=t=>e(a).createElement("div",{className:"message"},"You are already in ",t.roomId,"."),za=t=>e(a).createElement("div",{className:"message"},e(a).createElement(Fo,{userId:t.userId,id:t.id}),": ",e(a).createElement(Na,{messageId:t.messageId},t.message)),Va=t=>e(a).createElement("div",{className:"message"},e(a).createElement(Fo,{userId:t.userId,id:t.id})," (spoken): ",e(a).createElement(Na,{messageId:t.messageId},t.message)),Wa=t=>{a.useContext(qq);const n=()=>{pr(t.userId)};return t.senderIsSelf?e(a).createElement("div",{className:"whisper",onClick:n},"You whisper to ",e(a).createElement(Fo,{id:t.id,userId:t.userId}),":"," ",t.message):e(a).createElement("div",{className:"whisper",onClick:n},e(a).createElement(Fo,{userId:t.userId,id:t.id})," whispers:"," ",t.message)},Ha=t=>t.senderIsSelf?e(a).createElement("div",{className:"message"},e(a).createElement("em",null,e(a).createElement("strong",null,"You")," said to the ",e(a).createElement("strong",null,"mod team"),":"," ",t.message,e(a).createElement("br",null),"Someone from the ",e(a).createElement("strong",null,"mod team")," will be in touch soon.")):e(a).createElement("div",{className:"message"},e(a).createElement("em",null,e(a).createElement("span",{role:"img","aria-label":"red exclamation point"},"❗"),e(a).createElement(Fo,{userId:t.userId,id:t.id})," says to the"," ",e(a).createElement("strong",null,"mods"),":",t.message,e(a).createElement("span",{role:"img","aria-label":"red exclamation point"},"❗"))),Ka=t=>e(a).createElement("div",{className:"message"},e(a).createElement(Fo,{userId:t.userId,id:t.id})," shouts: ",e(a).createElement(Na,{messageId:t.messageId},t.message)),Ga=t=>e(a).createElement("div",{className:"message"},e(a).createElement("em",null,e(a).createElement(Fo,{userId:t.userId,id:t.id})," ",e(a).createElement(Na,{messageId:t.messageId},t.message))),Ya=t=>e(a).createElement("div",{className:"message"},e(a).createElement("em",null,e(a).createElement(Fo,{userId:t.userId,id:t.id})," ",e(a).createElement("span",{dangerouslySetInnerHTML:{__html:t.message}}))),Qa=t=>e(a).createElement("div",{className:"error"},t.error),Ja=t=>e(a).createElement("div",{className:"message"},e(a).createElement("em",null,e(a).createElement("span",{dangerouslySetInnerHTML:{__html:t.command}})));function Za(t){const n=a.useContext(qq);function r(e){return((n=e).type===Sa.Connected||n.type===Sa.Disconnected||n.type===Sa.Entered||n.type===Sa.Left)&&(t.serverSettings.movementMessagesHideRoomIds.includes(e.roomId)||e.numUsersInRoom>t.serverSettings.movementMessagesHideThreshold);var n}e(a).useEffect((()=>{const e=document.querySelector("#messages .message-wrapper:last-of-type");e&&t.autoscrollChat&&(e.parentNode.scrollTop=e.offsetTop-e.parentNode.offsetTop)}));const i=t.messages.filter((e=>!r(e))).filter((e=>!!t.captionsEnabled||e.type!==Sa.Caption));return e(a).createElement("div",{id:"messages",onScroll:()=>{const e=document.querySelector("#messages"),r=e.scrollHeight===e.scrollTop+e.clientHeight;r&&!t.autoscrollChat?n({type:Bt.ActivateAutoscroll}):!r&&t.autoscrollChat&&n({type:Bt.DeactivateAutoscroll})}},i.slice(-150).map(((n,r)=>{let i=!1;const o=t.messages[r-1];if(o&&o.userId&&n.userId&&o.userId===n.userId){new Date(n.timestamp).getTime()-new Date(o.timestamp).getTime()<18e4&&(i=!0)}const s=`message-${r}`;return e(a).createElement(Oa,{message:n,key:s,id:s,hideTimestamp:i,msgIndex:r})})))}a=o("6Ti1v");var Xa={};function $a(t){a.useContext(qq);const[n,r]=a.useState(""),i=()=>{t.sendMessage(n),r("")};return a.useEffect((()=>{document.getElementById("chat-input").focus(),t.prepopulated&&r(t.prepopulated)}),[t.prepopulated]),e(a).createElement("div",{id:"input"},e(a).createElement("input",{type:"text",id:"chat-input",onChange:e=>{const t=Xa.emojify(e.currentTarget.value);r(t)},onKeyPress:e=>{"Enter"===e.key&&i()},value:n,"aria-label":"Chat text input box",autoComplete:"off"}),e(a).createElement("button",{id:"send",onClick:i},"Send"))}o.register("3qoO9",(function(e,t){var n=o("6yvnz"),r=o("dhMhc"),i=/:([a-zA-Z0-9_\-\+]+):/g,a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function s(e){var t=e.indexOf(":");return t>-1?t===e.length-1?s(e=e.substring(0,t)):s(e=e.substr(t+1)):e}function u(e){return"string"==typeof e&&e.length>0?":"+e+":":e}var c=String.fromCharCode(65039),l=new RegExp(c,"g");function h(e){return e.replace(l,"")}var f=Object.keys(r).reduce((function(e,t){return e[h(r[t])]=t,e}),{}),d={emoji:r};d._get=function(e){return r.hasOwnProperty(e)?r[e]:"string"==typeof(t=e)&&":"!==t[0]?u(t):t;var t},d.get=function(e){return e=s(e),d._get(e)},d.find=function(e){return d.findByName(e)||d.findByCode(e)},d.findByName=function(e){var t=s(e),n=r[t];return n?{emoji:n,key:t}:void 0},d.findByCode=function(e){var t=h(e),n=f[t];return n?{emoji:r[n],key:n}:void 0},d.hasEmoji=function(e){return d.hasEmojiByName(e)||d.hasEmojiByCode(e)},d.hasEmojiByName=function(e){var t=d.findByName(e);return!!t&&t.key===s(e)},d.hasEmojiByCode=function(e){var t=d.findByCode(e);return!!t&&h(t.emoji)===h(e)},d.which=function(e,t){var n=h(e),r=f[n];return t?u(r):r},d.emojify=function(e,t,n){return e?e.split(i).map((function(e,r){if(r%2==0)return e;var i=d._get(e),o=i.indexOf(":")>-1;return o&&"function"==typeof t?t(e):o||"function"!=typeof n?i:n(i,e)})).join(""):""},d.random=function(){var e=Object.keys(r),t=e[Math.floor(Math.random()*e.length)];return{key:t,emoji:d._get(t)}},d.search=function(e){var t=Object.keys(r),n=s(e);return t.filter((function(e){return 0===e.toString().indexOf(n)})).map((function(e){return{key:e,emoji:d._get(e)}}))},d.unemojify=function(e){return e?n(e).map((function(e){return d.which(e,!0)||e})).join(""):""},d.replace=function(e,t,r){if(!e)return"";var i="function"==typeof t?t:function(){return t},o=n(e),s=o.map((function(e,t){var n=d.findByCode(e);return n&&r&&" "===o[t+1]&&(o[t+1]=""),n?i(n):e})).join("");return r?s.replace(a,""):s},d.strip=function(e){return d.replace(e,"",!0)},e.exports=d})),o.register("6yvnz",(function(e,t){var r=9007199254740991,i="[object Arguments]",o="[object Map]",a="[object Promise]",s="[object Set]",u="[object WeakMap]",c="[object DataView]",l=/^\[object .+?Constructor\]$/,h=/^(?:0|[1-9]\d*)$/,f="[\\ud800-\\udfff]",d="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",p="[^\\ud800-\\udfff]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",v="[\\ud800-\\udbff][\\udc00-\\udfff]",g="(?:"+d+"|"+"\\ud83c[\\udffb-\\udfff])"+"?",y="[\\ufe0e\\ufe0f]?",b=y+g+("(?:\\u200d(?:"+[p,m,v].join("|")+")"+y+g+")*"),w="(?:"+[p+d+"?",d,m,v,f].join("|")+")",_=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+w+b,"g"),k=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),S="object"==typeof n&&n&&n.Object===Object&&n,E="object"==typeof self&&self&&self.Object===Object&&self,M=S||E||Function("return this")();function T(e,t){return function(e,t){for(var n=-1,r=e?e.length:0,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(t,(function(t){return e[t]}))}function C(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function I(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function x(e){return function(e){return k.test(e)}(e)?function(e){return e.match(_)||[]}(e):function(e){return e.split("")}(e)}var A,P,O,R=Function.prototype,D=Object.prototype,N=M["__core-js_shared__"],L=(A=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"",j=R.toString,B=D.hasOwnProperty,F=D.toString,U=RegExp("^"+j.call(B).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),q=M.Symbol,z=q?q.iterator:void 0,V=D.propertyIsEnumerable,W=(P=Object.keys,O=Object,function(e){return P(O(e))}),H=ie(M,"DataView"),K=ie(M,"Map"),G=ie(M,"Promise"),Y=ie(M,"Set"),Q=ie(M,"WeakMap"),J=se(H),Z=se(K),X=se(G),$=se(Y),ee=se(Q);function te(e,t){var n=ue(e)||function(e){return function(e){return fe(e)&&ce(e)}(e)&&B.call(e,"callee")&&(!V.call(e,"callee")||F.call(e)==i)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,o=!!r;for(var a in e)!t&&!B.call(e,a)||o&&("length"==a||ae(a,r))||n.push(a);return n}function ne(e){return!(!he(e)||function(e){return!!L&&L in e}(e))&&(le(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?U:l).test(se(e))}function re(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||D,t!==r)return W(e);var t,n,r,i=[];for(var o in Object(e))B.call(e,o)&&"constructor"!=o&&i.push(o);return i}function ie(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return ne(n)?n:void 0}var oe=function(e){return F.call(e)};function ae(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||h.test(e))&&e>-1&&e%1==0&&e<t}function se(e){if(null!=e){try{return j.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(H&&oe(new H(new ArrayBuffer(1)))!=c||K&&oe(new K)!=o||G&&oe(G.resolve())!=a||Y&&oe(new Y)!=s||Q&&oe(new Q)!=u)&&(oe=function(e){var t=F.call(e),n="[object Object]"==t?e.constructor:void 0,r=n?se(n):void 0;if(r)switch(r){case J:return c;case Z:return o;case X:return a;case $:return s;case ee:return u}return t});var ue=Array.isArray;function ce(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!le(e)}function le(e){var t=he(e)?F.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function he(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function fe(e){return!!e&&"object"==typeof e}function de(e){return e?T(e,function(e){return ce(e)?te(e):re(e)}(e)):[]}e.exports=function(e){if(!e)return[];if(ce(e))return function(e){return"string"==typeof e||!ue(e)&&fe(e)&&"[object String]"==F.call(e)}(e)?x(e):function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(e);if(z&&e[z])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[z]());var t=oe(e);return(t==o?C:t==s?I:de)(e)}})),o.register("dhMhc",(function(e,t){e.exports=JSON.parse('{"100":"💯","1234":"🔢","umbrella_with_rain_drops":"☔","coffee":"☕","aries":"♈","taurus":"♉","sagittarius":"♐","capricorn":"♑","aquarius":"♒","pisces":"♓","anchor":"⚓","white_check_mark":"✅","sparkles":"✨","question":"❓","grey_question":"❔","grey_exclamation":"❕","exclamation":"❗","heavy_exclamation_mark":"❗","heavy_plus_sign":"➕","heavy_minus_sign":"➖","heavy_division_sign":"➗","hash":"#️⃣","keycap_star":"*️⃣","zero":"0️⃣","one":"1️⃣","two":"2️⃣","three":"3️⃣","four":"4️⃣","five":"5️⃣","six":"6️⃣","seven":"7️⃣","eight":"8️⃣","nine":"9️⃣","copyright":"©️","registered":"®️","mahjong":"🀄","black_joker":"🃏","a":"🅰️","b":"🅱️","o2":"🅾️","parking":"🅿️","ab":"🆎","cl":"🆑","cool":"🆒","free":"🆓","id":"🆔","new":"🆕","ng":"🆖","ok":"🆗","sos":"🆘","up":"🆙","vs":"🆚","flag-ac":"🇦🇨","flag-ad":"🇦🇩","flag-ae":"🇦🇪","flag-af":"🇦🇫","flag-ag":"🇦🇬","flag-ai":"🇦🇮","flag-al":"🇦🇱","flag-am":"🇦🇲","flag-ao":"🇦🇴","flag-aq":"🇦🇶","flag-ar":"🇦🇷","flag-as":"🇦🇸","flag-at":"🇦🇹","flag-au":"🇦🇺","flag-aw":"🇦🇼","flag-ax":"🇦🇽","flag-az":"🇦🇿","flag-ba":"🇧🇦","flag-bb":"🇧🇧","flag-bd":"🇧🇩","flag-be":"🇧🇪","flag-bf":"🇧🇫","flag-bg":"🇧🇬","flag-bh":"🇧🇭","flag-bi":"🇧🇮","flag-bj":"🇧🇯","flag-bl":"🇧🇱","flag-bm":"🇧🇲","flag-bn":"🇧🇳","flag-bo":"🇧🇴","flag-bq":"🇧🇶","flag-br":"🇧🇷","flag-bs":"🇧🇸","flag-bt":"🇧🇹","flag-bv":"🇧🇻","flag-bw":"🇧🇼","flag-by":"🇧🇾","flag-bz":"🇧🇿","flag-ca":"🇨🇦","flag-cc":"🇨🇨","flag-cd":"🇨🇩","flag-cf":"🇨🇫","flag-cg":"🇨🇬","flag-ch":"🇨🇭","flag-ci":"🇨🇮","flag-ck":"🇨🇰","flag-cl":"🇨🇱","flag-cm":"🇨🇲","cn":"🇨🇳","flag-cn":"🇨🇳","flag-co":"🇨🇴","flag-cp":"🇨🇵","flag-cr":"🇨🇷","flag-cu":"🇨🇺","flag-cv":"🇨🇻","flag-cw":"🇨🇼","flag-cx":"🇨🇽","flag-cy":"🇨🇾","flag-cz":"🇨🇿","de":"🇩🇪","flag-de":"🇩🇪","flag-dg":"🇩🇬","flag-dj":"🇩🇯","flag-dk":"🇩🇰","flag-dm":"🇩🇲","flag-do":"🇩🇴","flag-dz":"🇩🇿","flag-ea":"🇪🇦","flag-ec":"🇪🇨","flag-ee":"🇪🇪","flag-eg":"🇪🇬","flag-eh":"🇪🇭","flag-er":"🇪🇷","es":"🇪🇸","flag-es":"🇪🇸","flag-et":"🇪🇹","flag-eu":"🇪🇺","flag-fi":"🇫🇮","flag-fj":"🇫🇯","flag-fk":"🇫🇰","flag-fm":"🇫🇲","flag-fo":"🇫🇴","fr":"🇫🇷","flag-fr":"🇫🇷","flag-ga":"🇬🇦","gb":"🇬🇧","uk":"🇬🇧","flag-gb":"🇬🇧","flag-gd":"🇬🇩","flag-ge":"🇬🇪","flag-gf":"🇬🇫","flag-gg":"🇬🇬","flag-gh":"🇬🇭","flag-gi":"🇬🇮","flag-gl":"🇬🇱","flag-gm":"🇬🇲","flag-gn":"🇬🇳","flag-gp":"🇬🇵","flag-gq":"🇬🇶","flag-gr":"🇬🇷","flag-gs":"🇬🇸","flag-gt":"🇬🇹","flag-gu":"🇬🇺","flag-gw":"🇬🇼","flag-gy":"🇬🇾","flag-hk":"🇭🇰","flag-hm":"🇭🇲","flag-hn":"🇭🇳","flag-hr":"🇭🇷","flag-ht":"🇭🇹","flag-hu":"🇭🇺","flag-ic":"🇮🇨","flag-id":"🇮🇩","flag-ie":"🇮🇪","flag-il":"🇮🇱","flag-im":"🇮🇲","flag-in":"🇮🇳","flag-io":"🇮🇴","flag-iq":"🇮🇶","flag-ir":"🇮🇷","flag-is":"🇮🇸","it":"🇮🇹","flag-it":"🇮🇹","flag-je":"🇯🇪","flag-jm":"🇯🇲","flag-jo":"🇯🇴","jp":"🇯🇵","flag-jp":"🇯🇵","flag-ke":"🇰🇪","flag-kg":"🇰🇬","flag-kh":"🇰🇭","flag-ki":"🇰🇮","flag-km":"🇰🇲","flag-kn":"🇰🇳","flag-kp":"🇰🇵","kr":"🇰🇷","flag-kr":"🇰🇷","flag-kw":"🇰🇼","flag-ky":"🇰🇾","flag-kz":"🇰🇿","flag-la":"🇱🇦","flag-lb":"🇱🇧","flag-lc":"🇱🇨","flag-li":"🇱🇮","flag-lk":"🇱🇰","flag-lr":"🇱🇷","flag-ls":"🇱🇸","flag-lt":"🇱🇹","flag-lu":"🇱🇺","flag-lv":"🇱🇻","flag-ly":"🇱🇾","flag-ma":"🇲🇦","flag-mc":"🇲🇨","flag-md":"🇲🇩","flag-me":"🇲🇪","flag-mf":"🇲🇫","flag-mg":"🇲🇬","flag-mh":"🇲🇭","flag-mk":"🇲🇰","flag-ml":"🇲🇱","flag-mm":"🇲🇲","flag-mn":"🇲🇳","flag-mo":"🇲🇴","flag-mp":"🇲🇵","flag-mq":"🇲🇶","flag-mr":"🇲🇷","flag-ms":"🇲🇸","flag-mt":"🇲🇹","flag-mu":"🇲🇺","flag-mv":"🇲🇻","flag-mw":"🇲🇼","flag-mx":"🇲🇽","flag-my":"🇲🇾","flag-mz":"🇲🇿","flag-na":"🇳🇦","flag-nc":"🇳🇨","flag-ne":"🇳🇪","flag-nf":"🇳🇫","flag-ng":"🇳🇬","flag-ni":"🇳🇮","flag-nl":"🇳🇱","flag-no":"🇳🇴","flag-np":"🇳🇵","flag-nr":"🇳🇷","flag-nu":"🇳🇺","flag-nz":"🇳🇿","flag-om":"🇴🇲","flag-pa":"🇵🇦","flag-pe":"🇵🇪","flag-pf":"🇵🇫","flag-pg":"🇵🇬","flag-ph":"🇵🇭","flag-pk":"🇵🇰","flag-pl":"🇵🇱","flag-pm":"🇵🇲","flag-pn":"🇵🇳","flag-pr":"🇵🇷","flag-ps":"🇵🇸","flag-pt":"🇵🇹","flag-pw":"🇵🇼","flag-py":"🇵🇾","flag-qa":"🇶🇦","flag-re":"🇷🇪","flag-ro":"🇷🇴","flag-rs":"🇷🇸","ru":"🇷🇺","flag-ru":"🇷🇺","flag-rw":"🇷🇼","flag-sa":"🇸🇦","flag-sb":"🇸🇧","flag-sc":"🇸🇨","flag-sd":"🇸🇩","flag-se":"🇸🇪","flag-sg":"🇸🇬","flag-sh":"🇸🇭","flag-si":"🇸🇮","flag-sj":"🇸🇯","flag-sk":"🇸🇰","flag-sl":"🇸🇱","flag-sm":"🇸🇲","flag-sn":"🇸🇳","flag-so":"🇸🇴","flag-sr":"🇸🇷","flag-ss":"🇸🇸","flag-st":"🇸🇹","flag-sv":"🇸🇻","flag-sx":"🇸🇽","flag-sy":"🇸🇾","flag-sz":"🇸🇿","flag-ta":"🇹🇦","flag-tc":"🇹🇨","flag-td":"🇹🇩","flag-tf":"🇹🇫","flag-tg":"🇹🇬","flag-th":"🇹🇭","flag-tj":"🇹🇯","flag-tk":"🇹🇰","flag-tl":"🇹🇱","flag-tm":"🇹🇲","flag-tn":"🇹🇳","flag-to":"🇹🇴","flag-tr":"🇹🇷","flag-tt":"🇹🇹","flag-tv":"🇹🇻","flag-tw":"🇹🇼","flag-tz":"🇹🇿","flag-ua":"🇺🇦","flag-ug":"🇺🇬","flag-um":"🇺🇲","flag-un":"🇺🇳","us":"🇺🇸","flag-us":"🇺🇸","flag-uy":"🇺🇾","flag-uz":"🇺🇿","flag-va":"🇻🇦","flag-vc":"🇻🇨","flag-ve":"🇻🇪","flag-vg":"🇻🇬","flag-vi":"🇻🇮","flag-vn":"🇻🇳","flag-vu":"🇻🇺","flag-wf":"🇼🇫","flag-ws":"🇼🇸","flag-xk":"🇽🇰","flag-ye":"🇾🇪","flag-yt":"🇾🇹","flag-za":"🇿🇦","flag-zm":"🇿🇲","flag-zw":"🇿🇼","koko":"🈁","sa":"🈂️","u7121":"🈚","u6307":"🈯","u7981":"🈲","u7a7a":"🈳","u5408":"🈴","u6e80":"🈵","u6709":"🈶","u6708":"🈷️","u7533":"🈸","u5272":"🈹","u55b6":"🈺","ideograph_advantage":"🉐","accept":"🉑","cyclone":"🌀","foggy":"🌁","closed_umbrella":"🌂","night_with_stars":"🌃","sunrise_over_mountains":"🌄","sunrise":"🌅","city_sunset":"🌆","city_sunrise":"🌇","rainbow":"🌈","bridge_at_night":"🌉","ocean":"🌊","volcano":"🌋","milky_way":"🌌","earth_africa":"🌍","earth_americas":"🌎","earth_asia":"🌏","globe_with_meridians":"🌐","new_moon":"🌑","waxing_crescent_moon":"🌒","first_quarter_moon":"🌓","moon":"🌔","waxing_gibbous_moon":"🌔","full_moon":"🌕","waning_gibbous_moon":"🌖","last_quarter_moon":"🌗","waning_crescent_moon":"🌘","crescent_moon":"🌙","new_moon_with_face":"🌚","first_quarter_moon_with_face":"🌛","last_quarter_moon_with_face":"🌜","full_moon_with_face":"🌝","sun_with_face":"🌞","star2":"🌟","stars":"🌠","thermometer":"🌡️","mostly_sunny":"🌤️","sun_small_cloud":"🌤️","barely_sunny":"🌥️","sun_behind_cloud":"🌥️","partly_sunny_rain":"🌦️","sun_behind_rain_cloud":"🌦️","rain_cloud":"🌧️","snow_cloud":"🌨️","lightning":"🌩️","lightning_cloud":"🌩️","tornado":"🌪️","tornado_cloud":"🌪️","fog":"🌫️","wind_blowing_face":"🌬️","hotdog":"🌭","taco":"🌮","burrito":"🌯","chestnut":"🌰","seedling":"🌱","evergreen_tree":"🌲","deciduous_tree":"🌳","palm_tree":"🌴","cactus":"🌵","hot_pepper":"🌶️","tulip":"🌷","cherry_blossom":"🌸","rose":"🌹","hibiscus":"🌺","sunflower":"🌻","blossom":"🌼","corn":"🌽","ear_of_rice":"🌾","herb":"🌿","four_leaf_clover":"🍀","maple_leaf":"🍁","fallen_leaf":"🍂","leaves":"🍃","mushroom":"🍄","tomato":"🍅","eggplant":"🍆","grapes":"🍇","melon":"🍈","watermelon":"🍉","tangerine":"🍊","lemon":"🍋","banana":"🍌","pineapple":"🍍","apple":"🍎","green_apple":"🍏","pear":"🍐","peach":"🍑","cherries":"🍒","strawberry":"🍓","hamburger":"🍔","pizza":"🍕","meat_on_bone":"🍖","poultry_leg":"🍗","rice_cracker":"🍘","rice_ball":"🍙","rice":"🍚","curry":"🍛","ramen":"🍜","spaghetti":"🍝","bread":"🍞","fries":"🍟","sweet_potato":"🍠","dango":"🍡","oden":"🍢","sushi":"🍣","fried_shrimp":"🍤","fish_cake":"🍥","icecream":"🍦","shaved_ice":"🍧","ice_cream":"🍨","doughnut":"🍩","cookie":"🍪","chocolate_bar":"🍫","candy":"🍬","lollipop":"🍭","custard":"🍮","honey_pot":"🍯","cake":"🍰","bento":"🍱","stew":"🍲","fried_egg":"🍳","cooking":"🍳","fork_and_knife":"🍴","tea":"🍵","sake":"🍶","wine_glass":"🍷","cocktail":"🍸","tropical_drink":"🍹","beer":"🍺","beers":"🍻","baby_bottle":"🍼","knife_fork_plate":"🍽️","champagne":"🍾","popcorn":"🍿","ribbon":"🎀","gift":"🎁","birthday":"🎂","jack_o_lantern":"🎃","christmas_tree":"🎄","santa":"🎅","fireworks":"🎆","sparkler":"🎇","balloon":"🎈","tada":"🎉","confetti_ball":"🎊","tanabata_tree":"🎋","crossed_flags":"🎌","bamboo":"🎍","dolls":"🎎","flags":"🎏","wind_chime":"🎐","rice_scene":"🎑","school_satchel":"🎒","mortar_board":"🎓","medal":"🎖️","reminder_ribbon":"🎗️","studio_microphone":"🎙️","level_slider":"🎚️","control_knobs":"🎛️","film_frames":"🎞️","admission_tickets":"🎟️","carousel_horse":"🎠","ferris_wheel":"🎡","roller_coaster":"🎢","fishing_pole_and_fish":"🎣","microphone":"🎤","movie_camera":"🎥","cinema":"🎦","headphones":"🎧","art":"🎨","tophat":"🎩","circus_tent":"🎪","ticket":"🎫","clapper":"🎬","performing_arts":"🎭","video_game":"🎮","dart":"🎯","slot_machine":"🎰","8ball":"🎱","game_die":"🎲","bowling":"🎳","flower_playing_cards":"🎴","musical_note":"🎵","notes":"🎶","saxophone":"🎷","guitar":"🎸","musical_keyboard":"🎹","trumpet":"🎺","violin":"🎻","musical_score":"🎼","running_shirt_with_sash":"🎽","tennis":"🎾","ski":"🎿","basketball":"🏀","checkered_flag":"🏁","snowboarder":"🏂","woman-running":"🏃‍♀️","man-running":"🏃‍♂️","runner":"🏃‍♂️","running":"🏃‍♂️","woman-surfing":"🏄‍♀️","man-surfing":"🏄‍♂️","surfer":"🏄‍♂️","sports_medal":"🏅","trophy":"🏆","horse_racing":"🏇","football":"🏈","rugby_football":"🏉","woman-swimming":"🏊‍♀️","man-swimming":"🏊‍♂️","swimmer":"🏊‍♂️","woman-lifting-weights":"🏋️‍♀️","man-lifting-weights":"🏋️‍♂️","weight_lifter":"🏋️‍♂️","woman-golfing":"🏌️‍♀️","man-golfing":"🏌️‍♂️","golfer":"🏌️‍♂️","racing_motorcycle":"🏍️","racing_car":"🏎️","cricket_bat_and_ball":"🏏","volleyball":"🏐","field_hockey_stick_and_ball":"🏑","ice_hockey_stick_and_puck":"🏒","table_tennis_paddle_and_ball":"🏓","snow_capped_mountain":"🏔️","camping":"🏕️","beach_with_umbrella":"🏖️","building_construction":"🏗️","house_buildings":"🏘️","cityscape":"🏙️","derelict_house_building":"🏚️","classical_building":"🏛️","desert":"🏜️","desert_island":"🏝️","national_park":"🏞️","stadium":"🏟️","house":"🏠","house_with_garden":"🏡","office":"🏢","post_office":"🏣","european_post_office":"🏤","hospital":"🏥","bank":"🏦","atm":"🏧","hotel":"🏨","love_hotel":"🏩","convenience_store":"🏪","school":"🏫","department_store":"🏬","factory":"🏭","izakaya_lantern":"🏮","lantern":"🏮","japanese_castle":"🏯","european_castle":"🏰","rainbow-flag":"🏳️‍🌈","waving_white_flag":"🏳️","flag-england":"🏴󠁧󠁢󠁥󠁮󠁧󠁿","flag-scotland":"🏴󠁧󠁢󠁳󠁣󠁴󠁿","flag-wales":"🏴󠁧󠁢󠁷󠁬󠁳󠁿","waving_black_flag":"🏴","rosette":"🏵️","label":"🏷️","badminton_racquet_and_shuttlecock":"🏸","bow_and_arrow":"🏹","amphora":"🏺","skin-tone-2":"🏻","skin-tone-3":"🏼","skin-tone-4":"🏽","skin-tone-5":"🏾","skin-tone-6":"🏿","rat":"🐀","mouse2":"🐁","ox":"🐂","water_buffalo":"🐃","cow2":"🐄","tiger2":"🐅","leopard":"🐆","rabbit2":"🐇","cat2":"🐈","dragon":"🐉","crocodile":"🐊","whale2":"🐋","snail":"🐌","snake":"🐍","racehorse":"🐎","ram":"🐏","goat":"🐐","sheep":"🐑","monkey":"🐒","rooster":"🐓","chicken":"🐔","dog2":"🐕","pig2":"🐖","boar":"🐗","elephant":"🐘","octopus":"🐙","shell":"🐚","bug":"🐛","ant":"🐜","bee":"🐝","honeybee":"🐝","beetle":"🐞","fish":"🐟","tropical_fish":"🐠","blowfish":"🐡","turtle":"🐢","hatching_chick":"🐣","baby_chick":"🐤","hatched_chick":"🐥","bird":"🐦","penguin":"🐧","koala":"🐨","poodle":"🐩","dromedary_camel":"🐪","camel":"🐫","dolphin":"🐬","flipper":"🐬","mouse":"🐭","cow":"🐮","tiger":"🐯","rabbit":"🐰","cat":"🐱","dragon_face":"🐲","whale":"🐳","horse":"🐴","monkey_face":"🐵","dog":"🐶","pig":"🐷","frog":"🐸","hamster":"🐹","wolf":"🐺","bear":"🐻","panda_face":"🐼","pig_nose":"🐽","feet":"🐾","paw_prints":"🐾","chipmunk":"🐿️","eyes":"👀","eye-in-speech-bubble":"👁️‍🗨️","eye":"👁️","ear":"👂","nose":"👃","lips":"👄","tongue":"👅","point_up_2":"👆","point_down":"👇","point_left":"👈","point_right":"👉","facepunch":"👊","punch":"👊","wave":"👋","ok_hand":"👌","+1":"👍","thumbsup":"👍","-1":"👎","thumbsdown":"👎","clap":"👏","open_hands":"👐","crown":"👑","womans_hat":"👒","eyeglasses":"👓","necktie":"👔","shirt":"👕","tshirt":"👕","jeans":"👖","dress":"👗","kimono":"👘","bikini":"👙","womans_clothes":"👚","purse":"👛","handbag":"👜","pouch":"👝","mans_shoe":"👞","shoe":"👞","athletic_shoe":"👟","high_heel":"👠","sandal":"👡","boot":"👢","footprints":"👣","bust_in_silhouette":"👤","busts_in_silhouette":"👥","boy":"👦","girl":"👧","male-farmer":"👨‍🌾","male-cook":"👨‍🍳","male-student":"👨‍🎓","male-singer":"👨‍🎤","male-artist":"👨‍🎨","male-teacher":"👨‍🏫","male-factory-worker":"👨‍🏭","man-boy-boy":"👨‍👦‍👦","man-boy":"👨‍👦","man-girl-boy":"👨‍👧‍👦","man-girl-girl":"👨‍👧‍👧","man-girl":"👨‍👧","man-man-boy":"👨‍👨‍👦","man-man-boy-boy":"👨‍👨‍👦‍👦","man-man-girl":"👨‍👨‍👧","man-man-girl-boy":"👨‍👨‍👧‍👦","man-man-girl-girl":"👨‍👨‍👧‍👧","man-woman-boy":"👨‍👩‍👦","family":"👨‍👩‍👦","man-woman-boy-boy":"👨‍👩‍👦‍👦","man-woman-girl":"👨‍👩‍👧","man-woman-girl-boy":"👨‍👩‍👧‍👦","man-woman-girl-girl":"👨‍👩‍👧‍👧","male-technologist":"👨‍💻","male-office-worker":"👨‍💼","male-mechanic":"👨‍🔧","male-scientist":"👨‍🔬","male-astronaut":"👨‍🚀","male-firefighter":"👨‍🚒","male-doctor":"👨‍⚕️","male-judge":"👨‍⚖️","male-pilot":"👨‍✈️","man-heart-man":"👨‍❤️‍👨","man-kiss-man":"👨‍❤️‍💋‍👨","man":"👨","female-farmer":"👩‍🌾","female-cook":"👩‍🍳","female-student":"👩‍🎓","female-singer":"👩‍🎤","female-artist":"👩‍🎨","female-teacher":"👩‍🏫","female-factory-worker":"👩‍🏭","woman-boy-boy":"👩‍👦‍👦","woman-boy":"👩‍👦","woman-girl-boy":"👩‍👧‍👦","woman-girl-girl":"👩‍👧‍👧","woman-girl":"👩‍👧","woman-woman-boy":"👩‍👩‍👦","woman-woman-boy-boy":"👩‍👩‍👦‍👦","woman-woman-girl":"👩‍👩‍👧","woman-woman-girl-boy":"👩‍👩‍👧‍👦","woman-woman-girl-girl":"👩‍👩‍👧‍👧","female-technologist":"👩‍💻","female-office-worker":"👩‍💼","female-mechanic":"👩‍🔧","female-scientist":"👩‍🔬","female-astronaut":"👩‍🚀","female-firefighter":"👩‍🚒","female-doctor":"👩‍⚕️","female-judge":"👩‍⚖️","female-pilot":"👩‍✈️","woman-heart-man":"👩‍❤️‍👨","couple_with_heart":"👩‍❤️‍👨","woman-heart-woman":"👩‍❤️‍👩","woman-kiss-man":"👩‍❤️‍💋‍👨","couplekiss":"👩‍❤️‍💋‍👨","woman-kiss-woman":"👩‍❤️‍💋‍👩","woman":"👩","couple":"👫","man_and_woman_holding_hands":"👫","two_men_holding_hands":"👬","two_women_holding_hands":"👭","female-police-officer":"👮‍♀️","male-police-officer":"👮‍♂️","cop":"👮‍♂️","woman-with-bunny-ears-partying":"👯‍♀️","dancers":"👯‍♀️","man-with-bunny-ears-partying":"👯‍♂️","bride_with_veil":"👰","blond-haired-woman":"👱‍♀️","blond-haired-man":"👱‍♂️","person_with_blond_hair":"👱‍♂️","man_with_gua_pi_mao":"👲","woman-wearing-turban":"👳‍♀️","man-wearing-turban":"👳‍♂️","man_with_turban":"👳‍♂️","older_man":"👴","older_woman":"👵","baby":"👶","female-construction-worker":"👷‍♀️","male-construction-worker":"👷‍♂️","construction_worker":"👷‍♂️","princess":"👸","japanese_ogre":"👹","japanese_goblin":"👺","ghost":"👻","angel":"👼","alien":"👽","space_invader":"👾","imp":"👿","skull":"💀","woman-tipping-hand":"💁‍♀️","information_desk_person":"💁‍♀️","man-tipping-hand":"💁‍♂️","female-guard":"💂‍♀️","male-guard":"💂‍♂️","guardsman":"💂‍♂️","dancer":"💃","lipstick":"💄","nail_care":"💅","woman-getting-massage":"💆‍♀️","massage":"💆‍♀️","man-getting-massage":"💆‍♂️","woman-getting-haircut":"💇‍♀️","haircut":"💇‍♀️","man-getting-haircut":"💇‍♂️","barber":"💈","syringe":"💉","pill":"💊","kiss":"💋","love_letter":"💌","ring":"💍","gem":"💎","bouquet":"💐","wedding":"💒","heartbeat":"💓","broken_heart":"💔","two_hearts":"💕","sparkling_heart":"💖","heartpulse":"💗","cupid":"💘","blue_heart":"💙","green_heart":"💚","yellow_heart":"💛","purple_heart":"💜","gift_heart":"💝","revolving_hearts":"💞","heart_decoration":"💟","diamond_shape_with_a_dot_inside":"💠","bulb":"💡","anger":"💢","bomb":"💣","zzz":"💤","boom":"💥","collision":"💥","sweat_drops":"💦","droplet":"💧","dash":"💨","hankey":"💩","poop":"💩","shit":"💩","muscle":"💪","dizzy":"💫","speech_balloon":"💬","thought_balloon":"💭","white_flower":"💮","moneybag":"💰","currency_exchange":"💱","heavy_dollar_sign":"💲","credit_card":"💳","yen":"💴","dollar":"💵","euro":"💶","pound":"💷","money_with_wings":"💸","chart":"💹","seat":"💺","computer":"💻","briefcase":"💼","minidisc":"💽","floppy_disk":"💾","cd":"💿","dvd":"📀","file_folder":"📁","open_file_folder":"📂","page_with_curl":"📃","page_facing_up":"📄","date":"📅","calendar":"📆","card_index":"📇","chart_with_upwards_trend":"📈","chart_with_downwards_trend":"📉","bar_chart":"📊","clipboard":"📋","pushpin":"📌","round_pushpin":"📍","paperclip":"📎","straight_ruler":"📏","triangular_ruler":"📐","bookmark_tabs":"📑","ledger":"📒","notebook":"📓","notebook_with_decorative_cover":"📔","closed_book":"📕","book":"📖","open_book":"📖","green_book":"📗","blue_book":"📘","orange_book":"📙","books":"📚","name_badge":"📛","scroll":"📜","memo":"📝","pencil":"📝","telephone_receiver":"📞","pager":"📟","fax":"📠","satellite_antenna":"📡","loudspeaker":"📢","mega":"📣","outbox_tray":"📤","inbox_tray":"📥","package":"📦","e-mail":"📧","incoming_envelope":"📨","envelope_with_arrow":"📩","mailbox_closed":"📪","mailbox":"📫","mailbox_with_mail":"📬","mailbox_with_no_mail":"📭","postbox":"📮","postal_horn":"📯","newspaper":"📰","iphone":"📱","calling":"📲","vibration_mode":"📳","mobile_phone_off":"📴","no_mobile_phones":"📵","signal_strength":"📶","camera":"📷","camera_with_flash":"📸","video_camera":"📹","tv":"📺","radio":"📻","vhs":"📼","film_projector":"📽️","prayer_beads":"📿","twisted_rightwards_arrows":"🔀","repeat":"🔁","repeat_one":"🔂","arrows_clockwise":"🔃","arrows_counterclockwise":"🔄","low_brightness":"🔅","high_brightness":"🔆","mute":"🔇","speaker":"🔈","sound":"🔉","loud_sound":"🔊","battery":"🔋","electric_plug":"🔌","mag":"🔍","mag_right":"🔎","lock_with_ink_pen":"🔏","closed_lock_with_key":"🔐","key":"🔑","lock":"🔒","unlock":"🔓","bell":"🔔","no_bell":"🔕","bookmark":"🔖","link":"🔗","radio_button":"🔘","back":"🔙","end":"🔚","on":"🔛","soon":"🔜","top":"🔝","underage":"🔞","keycap_ten":"🔟","capital_abcd":"🔠","abcd":"🔡","symbols":"🔣","abc":"🔤","fire":"🔥","flashlight":"🔦","wrench":"🔧","hammer":"🔨","nut_and_bolt":"🔩","hocho":"🔪","knife":"🔪","gun":"🔫","microscope":"🔬","telescope":"🔭","crystal_ball":"🔮","six_pointed_star":"🔯","beginner":"🔰","trident":"🔱","black_square_button":"🔲","white_square_button":"🔳","red_circle":"🔴","large_blue_circle":"🔵","large_orange_diamond":"🔶","large_blue_diamond":"🔷","small_orange_diamond":"🔸","small_blue_diamond":"🔹","small_red_triangle":"🔺","small_red_triangle_down":"🔻","arrow_up_small":"🔼","arrow_down_small":"🔽","om_symbol":"🕉️","dove_of_peace":"🕊️","kaaba":"🕋","mosque":"🕌","synagogue":"🕍","menorah_with_nine_branches":"🕎","clock1":"🕐","clock2":"🕑","clock3":"🕒","clock4":"🕓","clock5":"🕔","clock6":"🕕","clock7":"🕖","clock8":"🕗","clock9":"🕘","clock10":"🕙","clock11":"🕚","clock12":"🕛","clock130":"🕜","clock230":"🕝","clock330":"🕞","clock430":"🕟","clock530":"🕠","clock630":"🕡","clock730":"🕢","clock830":"🕣","clock930":"🕤","clock1030":"🕥","clock1130":"🕦","clock1230":"🕧","candle":"🕯️","mantelpiece_clock":"🕰️","hole":"🕳️","man_in_business_suit_levitating":"🕴️","female-detective":"🕵️‍♀️","male-detective":"🕵️‍♂️","sleuth_or_spy":"🕵️‍♂️","dark_sunglasses":"🕶️","spider":"🕷️","spider_web":"🕸️","joystick":"🕹️","man_dancing":"🕺","linked_paperclips":"🖇️","lower_left_ballpoint_pen":"🖊️","lower_left_fountain_pen":"🖋️","lower_left_paintbrush":"🖌️","lower_left_crayon":"🖍️","raised_hand_with_fingers_splayed":"🖐️","middle_finger":"🖕","reversed_hand_with_middle_finger_extended":"🖕","spock-hand":"🖖","black_heart":"🖤","desktop_computer":"🖥️","printer":"🖨️","three_button_mouse":"🖱️","trackball":"🖲️","frame_with_picture":"🖼️","card_index_dividers":"🗂️","card_file_box":"🗃️","file_cabinet":"🗄️","wastebasket":"🗑️","spiral_note_pad":"🗒️","spiral_calendar_pad":"🗓️","compression":"🗜️","old_key":"🗝️","rolled_up_newspaper":"🗞️","dagger_knife":"🗡️","speaking_head_in_silhouette":"🗣️","left_speech_bubble":"🗨️","right_anger_bubble":"🗯️","ballot_box_with_ballot":"🗳️","world_map":"🗺️","mount_fuji":"🗻","tokyo_tower":"🗼","statue_of_liberty":"🗽","japan":"🗾","moyai":"🗿","grinning":"😀","grin":"😁","joy":"😂","smiley":"😃","smile":"😄","sweat_smile":"😅","laughing":"😆","satisfied":"😆","innocent":"😇","smiling_imp":"😈","wink":"😉","blush":"😊","yum":"😋","relieved":"😌","heart_eyes":"😍","sunglasses":"😎","smirk":"😏","neutral_face":"😐","expressionless":"😑","unamused":"😒","sweat":"😓","pensive":"😔","confused":"😕","confounded":"😖","kissing":"😗","kissing_heart":"😘","kissing_smiling_eyes":"😙","kissing_closed_eyes":"😚","stuck_out_tongue":"😛","stuck_out_tongue_winking_eye":"😜","stuck_out_tongue_closed_eyes":"😝","disappointed":"😞","worried":"😟","angry":"😠","rage":"😡","cry":"😢","persevere":"😣","triumph":"😤","disappointed_relieved":"😥","frowning":"😦","anguished":"😧","fearful":"😨","weary":"😩","sleepy":"😪","tired_face":"😫","grimacing":"😬","sob":"😭","open_mouth":"😮","hushed":"😯","cold_sweat":"😰","scream":"😱","astonished":"😲","flushed":"😳","sleeping":"😴","dizzy_face":"😵","no_mouth":"😶","mask":"😷","smile_cat":"😸","joy_cat":"😹","smiley_cat":"😺","heart_eyes_cat":"😻","smirk_cat":"😼","kissing_cat":"😽","pouting_cat":"😾","crying_cat_face":"😿","scream_cat":"🙀","slightly_frowning_face":"🙁","slightly_smiling_face":"🙂","upside_down_face":"🙃","face_with_rolling_eyes":"🙄","woman-gesturing-no":"🙅‍♀️","no_good":"🙅‍♀️","man-gesturing-no":"🙅‍♂️","woman-gesturing-ok":"🙆‍♀️","ok_woman":"🙆‍♀️","man-gesturing-ok":"🙆‍♂️","woman-bowing":"🙇‍♀️","man-bowing":"🙇‍♂️","bow":"🙇‍♂️","see_no_evil":"🙈","hear_no_evil":"🙉","speak_no_evil":"🙊","woman-raising-hand":"🙋‍♀️","raising_hand":"🙋‍♀️","man-raising-hand":"🙋‍♂️","raised_hands":"🙌","woman-frowning":"🙍‍♀️","person_frowning":"🙍‍♀️","man-frowning":"🙍‍♂️","woman-pouting":"🙎‍♀️","person_with_pouting_face":"🙎‍♀️","man-pouting":"🙎‍♂️","pray":"🙏","rocket":"🚀","helicopter":"🚁","steam_locomotive":"🚂","railway_car":"🚃","bullettrain_side":"🚄","bullettrain_front":"🚅","train2":"🚆","metro":"🚇","light_rail":"🚈","station":"🚉","tram":"🚊","train":"🚋","bus":"🚌","oncoming_bus":"🚍","trolleybus":"🚎","busstop":"🚏","minibus":"🚐","ambulance":"🚑","fire_engine":"🚒","police_car":"🚓","oncoming_police_car":"🚔","taxi":"🚕","oncoming_taxi":"🚖","car":"🚗","red_car":"🚗","oncoming_automobile":"🚘","blue_car":"🚙","truck":"🚚","articulated_lorry":"🚛","tractor":"🚜","monorail":"🚝","mountain_railway":"🚞","suspension_railway":"🚟","mountain_cableway":"🚠","aerial_tramway":"🚡","ship":"🚢","woman-rowing-boat":"🚣‍♀️","man-rowing-boat":"🚣‍♂️","rowboat":"🚣‍♂️","speedboat":"🚤","traffic_light":"🚥","vertical_traffic_light":"🚦","construction":"🚧","rotating_light":"🚨","triangular_flag_on_post":"🚩","door":"🚪","no_entry_sign":"🚫","smoking":"🚬","no_smoking":"🚭","put_litter_in_its_place":"🚮","do_not_litter":"🚯","potable_water":"🚰","non-potable_water":"🚱","bike":"🚲","no_bicycles":"🚳","woman-biking":"🚴‍♀️","man-biking":"🚴‍♂️","bicyclist":"🚴‍♂️","woman-mountain-biking":"🚵‍♀️","man-mountain-biking":"🚵‍♂️","mountain_bicyclist":"🚵‍♂️","woman-walking":"🚶‍♀️","man-walking":"🚶‍♂️","walking":"🚶‍♂️","no_pedestrians":"🚷","children_crossing":"🚸","mens":"🚹","womens":"🚺","restroom":"🚻","baby_symbol":"🚼","toilet":"🚽","wc":"🚾","shower":"🚿","bath":"🛀","bathtub":"🛁","passport_control":"🛂","customs":"🛃","baggage_claim":"🛄","left_luggage":"🛅","couch_and_lamp":"🛋️","sleeping_accommodation":"🛌","shopping_bags":"🛍️","bellhop_bell":"🛎️","bed":"🛏️","place_of_worship":"🛐","octagonal_sign":"🛑","shopping_trolley":"🛒","hammer_and_wrench":"🛠️","shield":"🛡️","oil_drum":"🛢️","motorway":"🛣️","railway_track":"🛤️","motor_boat":"🛥️","small_airplane":"🛩️","airplane_departure":"🛫","airplane_arriving":"🛬","satellite":"🛰️","passenger_ship":"🛳️","scooter":"🛴","motor_scooter":"🛵","canoe":"🛶","sled":"🛷","flying_saucer":"🛸","zipper_mouth_face":"🤐","money_mouth_face":"🤑","face_with_thermometer":"🤒","nerd_face":"🤓","thinking_face":"🤔","face_with_head_bandage":"🤕","robot_face":"🤖","hugging_face":"🤗","the_horns":"🤘","sign_of_the_horns":"🤘","call_me_hand":"🤙","raised_back_of_hand":"🤚","left-facing_fist":"🤛","right-facing_fist":"🤜","handshake":"🤝","crossed_fingers":"🤞","hand_with_index_and_middle_fingers_crossed":"🤞","i_love_you_hand_sign":"🤟","face_with_cowboy_hat":"🤠","clown_face":"🤡","nauseated_face":"🤢","rolling_on_the_floor_laughing":"🤣","drooling_face":"🤤","lying_face":"🤥","woman-facepalming":"🤦‍♀️","man-facepalming":"🤦‍♂️","face_palm":"🤦","sneezing_face":"🤧","face_with_raised_eyebrow":"🤨","face_with_one_eyebrow_raised":"🤨","star-struck":"🤩","grinning_face_with_star_eyes":"🤩","zany_face":"🤪","grinning_face_with_one_large_and_one_small_eye":"🤪","shushing_face":"🤫","face_with_finger_covering_closed_lips":"🤫","face_with_symbols_on_mouth":"🤬","serious_face_with_symbols_covering_mouth":"🤬","face_with_hand_over_mouth":"🤭","smiling_face_with_smiling_eyes_and_hand_covering_mouth":"🤭","face_vomiting":"🤮","face_with_open_mouth_vomiting":"🤮","exploding_head":"🤯","shocked_face_with_exploding_head":"🤯","pregnant_woman":"🤰","breast-feeding":"🤱","palms_up_together":"🤲","selfie":"🤳","prince":"🤴","man_in_tuxedo":"🤵","mrs_claus":"🤶","mother_christmas":"🤶","woman-shrugging":"🤷‍♀️","man-shrugging":"🤷‍♂️","shrug":"🤷","woman-cartwheeling":"🤸‍♀️","man-cartwheeling":"🤸‍♂️","person_doing_cartwheel":"🤸","woman-juggling":"🤹‍♀️","man-juggling":"🤹‍♂️","juggling":"🤹","fencer":"🤺","woman-wrestling":"🤼‍♀️","man-wrestling":"🤼‍♂️","wrestlers":"🤼","woman-playing-water-polo":"🤽‍♀️","man-playing-water-polo":"🤽‍♂️","water_polo":"🤽","woman-playing-handball":"🤾‍♀️","man-playing-handball":"🤾‍♂️","handball":"🤾","wilted_flower":"🥀","drum_with_drumsticks":"🥁","clinking_glasses":"🥂","tumbler_glass":"🥃","spoon":"🥄","goal_net":"🥅","first_place_medal":"🥇","second_place_medal":"🥈","third_place_medal":"🥉","boxing_glove":"🥊","martial_arts_uniform":"🥋","curling_stone":"🥌","croissant":"🥐","avocado":"🥑","cucumber":"🥒","bacon":"🥓","potato":"🥔","carrot":"🥕","baguette_bread":"🥖","green_salad":"🥗","shallow_pan_of_food":"🥘","stuffed_flatbread":"🥙","egg":"🥚","glass_of_milk":"🥛","peanuts":"🥜","kiwifruit":"🥝","pancakes":"🥞","dumpling":"🥟","fortune_cookie":"🥠","takeout_box":"🥡","chopsticks":"🥢","bowl_with_spoon":"🥣","cup_with_straw":"🥤","coconut":"🥥","broccoli":"🥦","pie":"🥧","pretzel":"🥨","cut_of_meat":"🥩","sandwich":"🥪","canned_food":"🥫","crab":"🦀","lion_face":"🦁","scorpion":"🦂","turkey":"🦃","unicorn_face":"🦄","eagle":"🦅","duck":"🦆","bat":"🦇","shark":"🦈","owl":"🦉","fox_face":"🦊","butterfly":"🦋","deer":"🦌","gorilla":"🦍","lizard":"🦎","rhinoceros":"🦏","shrimp":"🦐","squid":"🦑","giraffe_face":"🦒","zebra_face":"🦓","hedgehog":"🦔","sauropod":"🦕","t-rex":"🦖","cricket":"🦗","cheese_wedge":"🧀","face_with_monocle":"🧐","adult":"🧑","child":"🧒","older_adult":"🧓","bearded_person":"🧔","person_with_headscarf":"🧕","woman_in_steamy_room":"🧖‍♀️","man_in_steamy_room":"🧖‍♂️","person_in_steamy_room":"🧖‍♂️","woman_climbing":"🧗‍♀️","person_climbing":"🧗‍♀️","man_climbing":"🧗‍♂️","woman_in_lotus_position":"🧘‍♀️","person_in_lotus_position":"🧘‍♀️","man_in_lotus_position":"🧘‍♂️","female_mage":"🧙‍♀️","mage":"🧙‍♀️","male_mage":"🧙‍♂️","female_fairy":"🧚‍♀️","fairy":"🧚‍♀️","male_fairy":"🧚‍♂️","female_vampire":"🧛‍♀️","vampire":"🧛‍♀️","male_vampire":"🧛‍♂️","mermaid":"🧜‍♀️","merman":"🧜‍♂️","merperson":"🧜‍♂️","female_elf":"🧝‍♀️","male_elf":"🧝‍♂️","elf":"🧝‍♂️","female_genie":"🧞‍♀️","male_genie":"🧞‍♂️","genie":"🧞‍♂️","female_zombie":"🧟‍♀️","male_zombie":"🧟‍♂️","zombie":"🧟‍♂️","brain":"🧠","orange_heart":"🧡","billed_cap":"🧢","scarf":"🧣","gloves":"🧤","coat":"🧥","socks":"🧦","bangbang":"‼️","interrobang":"⁉️","tm":"™️","information_source":"ℹ️","left_right_arrow":"↔️","arrow_up_down":"↕️","arrow_upper_left":"↖️","arrow_upper_right":"↗️","arrow_lower_right":"↘️","arrow_lower_left":"↙️","leftwards_arrow_with_hook":"↩️","arrow_right_hook":"↪️","watch":"⌚","hourglass":"⌛","keyboard":"⌨️","eject":"⏏️","fast_forward":"⏩","rewind":"⏪","arrow_double_up":"⏫","arrow_double_down":"⏬","black_right_pointing_double_triangle_with_vertical_bar":"⏭️","black_left_pointing_double_triangle_with_vertical_bar":"⏮️","black_right_pointing_triangle_with_double_vertical_bar":"⏯️","alarm_clock":"⏰","stopwatch":"⏱️","timer_clock":"⏲️","hourglass_flowing_sand":"⏳","double_vertical_bar":"⏸️","black_square_for_stop":"⏹️","black_circle_for_record":"⏺️","m":"Ⓜ️","black_small_square":"▪️","white_small_square":"▫️","arrow_forward":"▶️","arrow_backward":"◀️","white_medium_square":"◻️","black_medium_square":"◼️","white_medium_small_square":"◽","black_medium_small_square":"◾","sunny":"☀️","cloud":"☁️","umbrella":"☂️","snowman":"☃️","comet":"☄️","phone":"☎️","telephone":"☎️","ballot_box_with_check":"☑️","shamrock":"☘️","point_up":"☝️","skull_and_crossbones":"☠️","radioactive_sign":"☢️","biohazard_sign":"☣️","orthodox_cross":"☦️","star_and_crescent":"☪️","peace_symbol":"☮️","yin_yang":"☯️","wheel_of_dharma":"☸️","white_frowning_face":"☹️","relaxed":"☺️","female_sign":"♀️","male_sign":"♂️","gemini":"♊","cancer":"♋","leo":"♌","virgo":"♍","libra":"♎","scorpius":"♏","spades":"♠️","clubs":"♣️","hearts":"♥️","diamonds":"♦️","hotsprings":"♨️","recycle":"♻️","wheelchair":"♿","hammer_and_pick":"⚒️","crossed_swords":"⚔️","medical_symbol":"⚕️","staff_of_aesculapius":"⚕️","scales":"⚖️","alembic":"⚗️","gear":"⚙️","atom_symbol":"⚛️","fleur_de_lis":"⚜️","warning":"⚠️","zap":"⚡","white_circle":"⚪","black_circle":"⚫","coffin":"⚰️","funeral_urn":"⚱️","soccer":"⚽","baseball":"⚾","snowman_without_snow":"⛄","partly_sunny":"⛅","thunder_cloud_and_rain":"⛈️","ophiuchus":"⛎","pick":"⛏️","helmet_with_white_cross":"⛑️","chains":"⛓️","no_entry":"⛔","shinto_shrine":"⛩️","church":"⛪","mountain":"⛰️","umbrella_on_ground":"⛱️","fountain":"⛲","golf":"⛳","ferry":"⛴️","boat":"⛵","sailboat":"⛵","skier":"⛷️","ice_skate":"⛸️","woman-bouncing-ball":"⛹️‍♀️","man-bouncing-ball":"⛹️‍♂️","person_with_ball":"⛹️‍♂️","tent":"⛺","fuelpump":"⛽","scissors":"✂️","airplane":"✈️","email":"✉️","envelope":"✉️","fist":"✊","hand":"✋","raised_hand":"✋","v":"✌️","writing_hand":"✍️","pencil2":"✏️","black_nib":"✒️","heavy_check_mark":"✔️","heavy_multiplication_x":"✖️","latin_cross":"✝️","star_of_david":"✡️","eight_spoked_asterisk":"✳️","eight_pointed_black_star":"✴️","snowflake":"❄️","sparkle":"❇️","x":"❌","negative_squared_cross_mark":"❎","heavy_heart_exclamation_mark_ornament":"❣️","heart":"❤️","arrow_right":"➡️","curly_loop":"➰","loop":"➿","arrow_heading_up":"⤴️","arrow_heading_down":"⤵️","arrow_left":"⬅️","arrow_up":"⬆️","arrow_down":"⬇️","black_large_square":"⬛","white_large_square":"⬜","star":"⭐","o":"⭕","wavy_dash":"〰️","part_alternation_mark":"〽️","congratulations":"㊗️","secret":"㊙️"}')})),Xa=o("3qoO9");const es=(e,t,n,r)=>({type:e,description:t,invocations:n,singleParameter:r});var ts,ns;(ns=ts||(ts={})).Help="HELP",ns.Move="MOVE",ns.Whisper="WHISPER",ns.Shout="SHOUT",ns.Emote="EMOTE",ns.Dance="DANCE",ns.Interact="INTERACT",ns.ContactMod="CONTACT_MOD",ns.Look="LOOK";const rs=[es(ts.Help,"Lists the available commands",["/help"],!0),es(ts.Move,"Move from one room to another. You can also click on the link in the room description.",["/go","/move"],!1),es(ts.Whisper,"Whisper another user. You can also click directly on their name and select the whisper option.",["/whisper"],!1),es(ts.Shout,"Sends a message to everybody at once - has a 5 minute cooldown. Do not abuse this!",["/shout"],!1),es(ts.Emote,"Like a normal message, but in italics!",["/emote","/me"],!1),es(ts.Dance,"Bust a move!",["/dance"],!0),es(ts.ContactMod,"Sends a message to the mod team. We will be in touch shortly afterwards.",["/mod","/mods","/moderator","/moderators"],!1),es(ts.Look,"View the profile of another user. You can also click on their name and select the Profile option.",["/look"],!1),es(ts.Interact,"Interact with or get something in a room by referencing the name in the description - experiment as you explore!",["/interact","/get"],!1)];Yr=o("2lxET");console.log(vn);const is={firebaseApp:er.initializeApp(vn),authenticated:!1,checkedAuthentication:!1,hasRegistered:!1,messages:[],whispers:[],visibleSpeakers:[],autoscrollChat:!0,userMap:{},roomData:{},inMediaChat:!1,activeModal:fn.None,activeModalOptions:{},isBanned:!1,serverSettings:{movementMessagesHideThreshold:20,movementMessagesHideRoomIds:["theater"],happeningNowEntries:[],spaceIsClosed:!1},numberOfFaces:5,captionsEnabled:!1,hasDismissedAModal:!1};var os=(e,t)=>{console.log("In reducer",t);const n=JSON.parse(JSON.stringify(e));if(n.prepopulatedInput=void 0,t.type===Bt.ReceivedMyProfile&&(n.profileData=t.value),t.type===Bt.ReceivedServerSettings&&(n.serverSettings=t.value),t.type===Bt.UpdatedCurrentRoom){const e=n.roomId;if(n.roomId=t.value,"entryway"!==n.roomId&&n.hasDismissedAModal||(n.activeModal=fn.Welcome),n.roomData&&n.roomData[t.value]){const i=n.roomData[t.value];n.roomId!==e?ss(n,(r=i.shortName,{type:Sa.MovedRoom,to:r,timestamp:new Date})):ss(n,(e=>({type:Sa.SameRoom,roomId:e,timestamp:new Date}))(i.shortName))}}var r,i,o,a,s;if(t.type===Bt.UpdatedRoomData&&(n.roomData={...n.roomData,...t.value}),t.type===Bt.UpdatedPresence&&Object.keys(t.value).forEach((e=>{n.roomData[e]&&(n.roomData[e].users=t.value[e])})),t.type===Bt.PlayerConnected){const e=t.value,r=n.roomData[n.roomId];r.users.includes(e.id)||(r.users.push(e.id),ss(n,(i=e.id,o=n.roomId,a=r.users.length,{type:Sa.Connected,userId:i,roomId:o,numUsersInRoom:a,timestamp:new Date}))),n.userMap[e.id]=e}if(t.type===Bt.PlayerDisconnected){const e=n.roomData[n.roomId];e.users=e.users.filter((e=>e!==t.value)),ss(n,((e,t,n)=>({type:Sa.Disconnected,userId:e,roomId:t,numUsersInRoom:n,timestamp:new Date}))(t.value,n.roomId,e.users.length))}if(t.type===Bt.PlayerEntered){const e=n.roomData[n.roomId];e.users.includes(t.value.name)||(e.users.push(t.value.name),ss(n,((e,t,n,r,i)=>({type:Sa.Entered,userId:e,fromId:t,fromName:n,roomId:r,numUsersInRoom:i,timestamp:new Date}))(t.value.name,t.value.fromId,t.value.fromName,n.roomId,e.users.length)))}if(t.type===Bt.PlayerLeft){const e=n.roomData[n.roomId];e.users=e.users.filter((e=>e!==t.value.name)),ss(n,((e,t,n,r,i)=>({type:Sa.Left,userId:e,toId:t,toName:n,roomId:r,numUsersInRoom:i,timestamp:new Date}))(t.value.name,t.value.toId,t.value.toName,n.roomId,e.users.length))}if(t.type===Bt.ChatMessage&&ss(n,Ta(t.value.messageId,t.value.name,t.value.message)),t.type===Bt.CaptionMessage&&ss(n,Ca(t.value.messageId,t.value.name,t.value.message)),t.type===Bt.Whisper){const e=Ia(t.value.name,t.value.message);ss(n,e),as(n,e)}if(t.type===Bt.ModMessage&&ss(n,((e,t,n=!1)=>({type:Sa.Mod,userId:e,message:t,senderIsSelf:n,timestamp:new Date}))(t.value.name,t.value.message,t.value.name===n.userId)),t.type===Bt.DeleteMessage&&function(e,t){const n=e.messages.find((e=>Ma(e)&&e.messageId===t));Ma(n)&&(n.message="message was removed by moderator",Yr.setMessages(e.messages))}(n,t.value.targetMessageId),t.type===Bt.Shout&&ss(n,((e,t,n)=>({type:Sa.Shout,messageId:e,userId:t,message:n,timestamp:new Date}))(t.value.messageId,t.value.name,t.value.message)),t.type===Bt.Emote&&ss(n,((e,t,n)=>({type:Sa.Emote,messageId:e,userId:t,message:n,timestamp:new Date}))(t.value.messageId,t.value.name,t.value.message)),t.type===Bt.Dance&&ss(n,((e,t,n)=>({type:Sa.Dance,messageId:e,userId:t,message:n,timestamp:new Date}))(t.value.messageId,t.value.name,t.value.message)),t.type===Bt.UserMap&&(n.userMap={...n.userMap,...t.value},n.visibleProfile&&n.userMap[n.visibleProfile.id]&&pr(n.visibleProfile.id)),t.type===Bt.PlayerBanned&&(t.value.id===n.userId?n.isBanned=!0:(n.userMap[t.value.id].isBanned=!0,ss(n,xa("User "+t.value.username+" was banned!")))),t.type===Bt.PlayerUnbanned&&(n.userMap[t.value.id]&&(n.userMap[t.value.id].isBanned=!1),ss(n,xa("User "+t.value.username+" was unbanned!"))),t.type===Bt.UpdateProfileColor&&(n.userMap[n.userId].nameColor=t.color,t.color?ss(n,xa("Your name color was changed to "+t.color)):ss(n,xa("Your name color has changed back to its original state.")),async function(e,t){await mr("updateProfileColor",{userId:e,color:t})}(n.userId,t.color)),t.type===Bt.UpdateFontReward&&(n.userMap[n.userId].fontReward=t.font,t.font?ss(n,xa("You feel invigorated, and like you've become more... "+t.font)):ss(n,xa("You feel yourself return to your normal state, like you never went riddling to begin with.")),ur(n.userId,t.font)),t.type===Bt.Error&&ss(n,xa(t.value)),t.type===Bt.MediaReceivedSpeakingData&&(n.currentSpeaker=t.value,null!==t.value&&t.value!==n.userId&&!n.visibleSpeakers.find((([e,n])=>e===t.value))))if(n.visibleSpeakers.length<n.numberOfFaces)n.visibleSpeakers.push([t.value,new Date]);else{let e=-1,r=new Date;for(let t=0;t<n.visibleSpeakers.length;t++)n.visibleSpeakers[t][1]<r&&(r=n.visibleSpeakers[t][1],e=t);n.visibleSpeakers[e]=[t.value,new Date]}if(t.type===Bt.SetNumberOfFaces&&(n.numberOfFaces=t.value),t.type===Bt.StartVideoChat&&(n.inMediaChat=!0),t.type===Bt.StopVideoChat&&(n.inMediaChat=!1),t.type===Bt.SendMessage){const e=Ut(),r=t.value.trim(),i=/^\/.+?/.exec(r),o=i?(s=r,rs.find((e=>e.invocations.find((t=>e.singleParameter?s.startsWith(t):s.startsWith(t+" ")))))):void 0;if(r.length>hn)ss(n,xa("Your message is too long! Please try to keep it under ~600 characters!"));else if(r.split(" ").find((e=>e.length>60)))ss(n,xa("Your message has a word that is too long! Please keep it under 60 characters!"));else if(i&&void 0===o){const e=/^(\/.+?) (.+)/.exec(r);ss(n,xa(`Your command ${e?e[1]:t.value} is not a registered slash command!`))}else if(i&&o.type===ts.Whisper){const t=/^(\/.+?) (.+)/.exec(r),i=/^(.+?) (.+)/.exec(t[2]);if(i){dr(e,r);const[t,o,a]=i,s=Object.values(n.userMap).find((e=>e.username===o)),u=s&&s.id;if(u){const e=Ia(u,a,!0);ss(n,e),as(n,e)}}else ss(n,xa(`Your whisper to ${t[2]} had no message!`))}else if(i&&o.type===ts.Help)n.activeModal=fn.Help,ss(n,Aa("You consult the help docs. (You can also find them in sidebar!)"));else if(i&&o.type===ts.Look){const t=/^(\/.+?) (.+)/.exec(r);ss(n,Aa(`You attempt to examine ${t[2]}. (You can also click on their username and select Profile!)`)),dr(e,r)}else i?dr(e,r):(dr(e,t.value),ss(n,Ta(e,n.userId,t.value)))}if(t.type===Bt.SendCaption){const e=Ut();!async function(e,t){if(t.length>hn)return void console.log("Sorry, can't send messages over 631 characters!");const n=await mr("sendCaption",{id:e,text:t});console.log(n),n&&n.error&&ir(Jt(n.error))}(e,t.value),ss(n,Ca(e,n.userId,t.value))}if(t.type===Bt.StartWhisper&&(n.prepopulatedInput=`/whisper ${t.value} `),t.type===Bt.HideModalAction&&(n.activeModal=fn.None,n.hasDismissedAModal=!0),t.type===Bt.ShowProfile&&(n.visibleProfile=t.value),t.type===Bt.HideProfile&&(n.visibleProfile=null),t.type===Bt.ShowModal&&(n.activeModal=t.value,n.activeModalOptions={}),t.type===Bt.ShowModalWithOptions&&(console.log("Showing",t),n.activeModal=t.value.modal,n.activeModalOptions=t.value.options),t.type===Bt.ShowSideMenu&&(n.mobileSideMenuIsVisible=!0),t.type===Bt.HideSideMenu&&(n.mobileSideMenuIsVisible=!1),t.type===Bt.DeactivateAutoscroll&&(n.autoscrollChat=!1),t.type===Bt.ActivateAutoscroll&&(n.autoscrollChat=!0),t.type===Bt.SetUseSimpleNames&&(n.useSimpleNames=t.value,Yr.setUseSimpleNames(t.value)),t.type===Bt.SetKeepCameraWhenMoving&&(n.keepCameraWhenMoving=t.value,Yr.setKeepCameraWhenMoving(t.value)),t.type===Bt.SetCaptionsEnabled&&(n.captionsEnabled=t.value,Yr.setCaptionsEnabled(t.value)),t.type===Bt.SetTextOnlyMode&&(n.textOnlyMode=t.textOnlyMode,t.refresh?Yr.setTextOnlyMode(t.textOnlyMode).then((()=>window.location.reload())):Yr.setTextOnlyMode(t.textOnlyMode)),t.type===Bt.SetAudioOnlyMode&&(n.audioOnlyMode=t.value),t.type===Bt.Authenticate&&(n.checkedAuthentication=!0,n.authenticationProvider=t.value.provider,n.mustVerifyEmail=t.value.mustVerifyEmail,t.value.userId&&t.value.name?(n.authenticated=!0,n.userId=t.value.userId,n.userMap[t.value.userId]={id:t.value.userId,username:t.value.name}):(n.authenticated=void 0,n.userId=void 0)),t.type===Bt.IsRegistered&&(n.hasRegistered=!0),t.type===Bt.BanToggle&&async function(e){await mr("banUser",{userId:e})}(t.value),t.type===Bt.ModToggle&&async function(e){await mr("toggleModStatus",{userId:e})}(t.value),t.type===Bt.LoadMessageArchive&&(n.messages=t.messages,n.whispers=t.whispers||[]),t.type===Bt.NoteAdd){const e=n.roomData&&n.roomData[t.value.roomId];e.hasNoteWall&&(e.notes||(e.notes=[]),e.notes.push(t.value.note))}if(t.type===Bt.NoteRemove){const e=n.roomData&&n.roomData[t.value.roomId];e.hasNoteWall&&(e.notes||(e.notes=[]),e.notes=e.notes.filter((e=>e.id!==t.value.noteId)))}if(t.type===Bt.NoteUpdateLikes){const e=n.roomData&&n.roomData[t.value.roomId];if(e.hasNoteWall){e.notes||(e.notes=[]);const n=e.notes.find((e=>e.id===t.value.noteId));n&&(n.likes=t.value.likes)}}if(t.type===Bt.NoteUpdateRoom){const e=n.roomData&&n.roomData[t.value.roomId];e.hasNoteWall&&(e.notes=t.value.notes)}if(t.type===Bt.SpaceIsClosed&&(n.isClosed=!0),t.type===Bt.SpaceOpenedOrClosed&&(n.userMap[n.userId].isMod?(n.isClosed=t.value,ss(n,Aa("The space is now "+(t.value?"closed":"open")))):window.location.reload()),t.type===Bt.CommandMessage){const e=Aa(t.value);ss(n,e)}return n};async function as(e,t){e.whispers.push(t),Yr.setWhispers(e.whispers)}async function ss(e,t){e.messages.push(t),e.messages=e.messages.slice(-500),Yr.setMessages(e.messages)}a=o("6Ti1v");const us=t=>{const{otherUser:n}=t;return t.senderIsSelf?e(a).createElement("div",{className:"whisper-message"},e(a).createElement("em",null,"You:"," ",t.message)):e(a).createElement("div",{className:"whisper-message"},e(a).createElement("em",null,e(a).createElement("span",{"data-tip":n&&n.pronouns},n.username),":"," ",t.message,e(a).createElement(Bo,null)))};function cs(t){const{user:n,whispers:r}=t,i=a.useContext(qq);e(a).useEffect((()=>{const e=document.querySelector("#chat .whisper-message:last-of-type");e&&(e.parentNode.scrollTop=e.offsetTop-e.parentNode.offsetTop)}));const o=(r||[]).filter(((e,t)=>e.userId===n.id)),s=n.realName?e(a).createElement("div",{id:"profile-realName"},n.realName):null,u=n.twitterHandle?e(a).createElement("div",{id:"profile-twitter"},e(a).createElement("strong",null,"Twitter"),":"," ",e(a).createElement("a",{href:`https://twitter.com/${n.twitterHandle}`,target:"_blank",rel:"noreferrer"},"@",n.twitterHandle)):null,c=n.url?e(a).createElement("div",{id:"profile-url"},e(a).createElement("strong",null,"Web Site"),":"," ",n.url):null,l=n.description?e(a).createElement("div",{id:"profile-description"},n.description):null,h=n.askMeAbout?e(a).createElement("div",{id:"profile-askme"},e(a).createElement("strong",null,"Ask me about:")," ",n.askMeAbout):null;return e(a).createElement(e(Wo),{componentDecorator:(t,n,r)=>e(a).createElement("a",{href:t,key:r,target:"_blank",rel:"noopener noreferrer"},n)},e(a).createElement("div",{id:"profile"},e(a).createElement("div",{className:"fixed"},e(a).createElement("div",{id:"header"},e(a).createElement("h2",{className:n.isMod?"mod":""},e(a).createElement(Fo,{userId:n.id,id:`profile-nameview-${n.id}`})),e(a).createElement("button",{className:"close-profile",onClick:()=>i({type:Bt.HideProfile})},"X")),e(a).createElement("p",null,s,e(a).createElement("div",{id:"profile-pronouns"},n.pronouns),l),n.item?e(a).createElement("p",null,n.username," is currently holding ",n.item):null,e(a).createElement("p",null,u,c,h),e(a).createElement("div",{id:"chat-container"},e(a).createElement("div",{id:"chat-header"},"Whisper Chat"),e(a).createElement("div",{id:"chat"},o.length>0?o.map(((t,r)=>{const i=`whisper-message-${r}`;return e(a).createElement(us,{...t,key:i,id:i,otherUser:n})})):e(a).createElement("em",null,`This is the beginning of your whisper chat with ${n.username}`)),e(a).createElement($a,{sendMessage:e=>i(Xt(`/whisper ${n.username} ${e}`))})))))}a=o("6Ti1v");a=o("6Ti1v"),a=o("6Ti1v");function ls(t){const n=a.useContext(qq),{localStreamView:r,setMicEnabled:i,setCameraEnabled:o,cameraEnabled:s,micEnabled:u}=oi();return r?e(a).createElement("div",{className:"my-video"},"You",s?r:e(a).createElement(Ir,{size:90,style:{textAlign:"center"},className:"placeholder-avatar"}),t.hideUI?"":e(a).createElement("div",null,e(a).createElement("button",{id:"send-video",onClick:e=>{o(!s)},className:"link-styled-button video-button "+(s?"enabled":"disabled"),"aria-label":"Toggle Video"},s?e(a).createElement(Ar,null):e(a).createElement(xr,null)),e(a).createElement("button",{id:"send-audio",onClick:e=>{i(!u)},className:"link-styled-button video-button "+(u?"enabled":"disabled"),"aria-label":"Toggle Audio"},u?e(a).createElement(Or,null):e(a).createElement(Pr,null)),e(a).createElement("button",{id:"show-media-selector",onClick:()=>{n(en(fn.MediaSelector))},className:"link-styled-button video-button","aria-label":"Show Media Selector"},e(a).createElement(Tr,null)))):null}a=o("6Ti1v"),a=o("6Ti1v"),a=o("6Ti1v"),a=o("6Ti1v");a=o("6Ti1v");function hs({track:e}){const t=a.useRef();return a.useEffect((()=>(t.current=e.attach(),t.current.setAttribute("data-cy-audio-track-name",e.name),document.body.appendChild(t.current),()=>e.detach().forEach((e=>e.remove())))),[e]),null}a=o("6Ti1v"),a=o("6Ti1v");a=o("6Ti1v");function fs({track:t,isLocal:n,priority:r}){const i=a.useRef(null),o=function(e){const[t,n]=a.useState(e?.mediaStreamTrack);return a.useEffect((()=>{if(n(e?.mediaStreamTrack),e){const t=()=>{console.log("Set media stream track!"),n(e.mediaStreamTrack)};return e.on("started",t),()=>{e.off("started",t)}}}),[e]),t}(t),s=function(e){const[t,n]=a.useState(e?.dimensions);return a.useEffect((()=>{if(n(e?.dimensions),e){const t=e=>n({width:e.dimensions.width,height:e.dimensions.height});return e.on("dimensionsChanged",t),()=>{e.off("dimensionsChanged",t)}}}),[e]),t}(t),u=(s?.height??0)>(s?.width??0);console.log("Rendering videotrack",t),a.useEffect((()=>{const e=i.current;return e.muted=!0,t.setPriority&&r&&t.setPriority(r),t.attach(e),()=>{t.detach(e),t.setPriority&&r&&t.setPriority(null)}}),[t,r,o]);const c="environment"!==o?.getSettings().facingMode,l={transform:n&&c?"rotateY(180deg)":"",objectFit:u||t.name.includes("screen")?"contain":"cover"};return e(a).createElement("video",{ref:i,style:l})}function ds({publication:t,isLocalParticipant:n,videoOnly:r,videoPriority:i}){const o=function(e){const[t,n]=a.useState(e&&e.track);return a.useEffect((()=>{if(n(e&&e.track),e){const t=()=>n(null);return e.on("subscribed",n),e.on("unsubscribed",t),()=>{e.off("subscribed",n),e.off("unsubscribed",t)}}}),[e]),t}(t);if(!o)return null;switch(o.kind){case"video":return e(a).createElement(fs,{track:o,priority:i,isLocal:o.name.includes("camera")&&n});case"audio":return r?null:e(a).createElement(hs,{track:o});default:return null}}a=o("6Ti1v");function ps({participant:t,displayVideo:n,displayAudio:r,videoOnly:i,videoPriority:o,isLocalParticipant:s}){const u=function(e){const[t,n]=a.useState([]);return a.useEffect((()=>{n(Array.from(e.tracks.values()));const t=e=>n((t=>[...t,e])),r=e=>n((t=>t.filter((t=>t!==e))));return e.on("trackPublished",t),e.on("trackUnpublished",r),()=>{e.off("trackPublished",t),e.off("trackUnpublished",r)}}),[e]),t}(t),c=u.filter((e=>"video"===e.kind)),l=u.filter((e=>"audio"===e.kind));let h=[];return n&&c.length>0&&h.push(c[0]),r&&(h=h.concat(l)),e(a).createElement(e(a).Fragment,null,h.map((t=>e(a).createElement(ds,{key:t.kind,publication:t,isLocalParticipant:s,videoOnly:i,videoPriority:o}))))}function ms(t){const[n,r]=e(a).useState(t.renderAsFace),[i,o]=e(a).useState(!0),s={border:t.isDominant?"solid":void 0};if(!t.renderAsFace)return e(a).createElement(ps,{participant:t.participant,displayVideo:!1,displayAudio:i});const u=t.participant.videoTracks.size>0;if(!(t.participant.audioTracks.size+t.participant.videoTracks.size>0))return e(a).createElement("div",{key:`stream-wrapper-${t.participant.identity}`});let c;return n&&u||(c=e(a).createElement(Ir,{size:90,style:{textAlign:"center"},className:"placeholder-avatar"})),e(a).createElement("div",{key:`stream-wrapper-${t.participant.identity}`,className:"participant-track-square other-participant",style:s},e(a).createElement(Fo,{userId:t.participant.identity,id:`stream-nameview-${t.participant.identity}`,nowrap:!0}),e(a).createElement(ps,{participant:t.participant,displayVideo:n,displayAudio:i}),u?e(a).createElement("button",{id:"play-video",onClick:e=>{r(!n)},className:"link-styled-button video-button "+(n?"enabled":"disabled"),"aria-label":`Toggle Video ${t.participant.identity}`},n?e(a).createElement(Ar,null):e(a).createElement(xr,null)):null,c,e(a).createElement("button",{id:"play-audio",onClick:e=>{o(!i)},className:"link-styled-button video-button "+(i?"enabled":"disabled"),"aria-label":`Toggle Audio ${t.participant.identity}`},i?e(a).createElement(Or,null):e(a).createElement(Pr,null)))}a=o("6Ti1v");var vs=t=>{const{currentMic:n,currentCamera:r,publishingCamera:i,publishingMic:o,inCall:s,publishMedia:u,publishAudio:c,unpublishMedia:l}=oi(),h=e(a).useContext(qq),f=()=>{h(Qt()),l()},d=()=>{h(en(fn.MediaSelector))};let p;if(t.inMediaChat){let t="";i&&o?t="Turn off Webcam and Mic":i?t="Turn off Webcam":o&&(t="Turn off Mic"),p=e(a).createElement(e(a).Fragment,null,e(a).createElement("button",{onClick:f,id:"join-video-chat"},t),e(a).createElement("button",{key:"show-media-selector",id:"big-reconfigure-media-selector",onClick:d,className:"link-styled-button video-button","aria-label":"Show Media Selector"},e(a).createElement(Tr,null)))}else p=t.textOnlyMode?[e(a).createElement("button",{key:"text-only-mode",onClick:()=>{confirm("Re-enabling video and audio mode means that you will be able to see and hear video and audio from other participants. Your camera and microphone will default to off when you switch modes.\b\n\nSwitching modes will refresh your page - please be patient while it reloads.")&&h(on(!1,!0))},id:"toggle-text-only-mode"},"Re-Enable Audio/Video")]:[e(a).createElement("button",{key:"join-video",onClick:async()=>{n||r?u():h(en(fn.MediaSelector))},id:"join-video-chat"},s?"Turn on Webcam + Mic":e(a).createElement("s",null,"Turn on Webcam + Mic")),e(a).createElement("button",{key:"join-audio",onClick:async()=>{var e,t;n?c():h((e=fn.MediaSelector,t={hideVideo:!0},{type:Bt.ShowModalWithOptions,value:{modal:e,options:t}}))},id:"join-audio-chat"},s?"Turn on Mic":e(a).createElement("s",null,"Turn on Mic")),e(a).createElement("button",{key:"show-media-selector",id:"big-reconfigure-media-selector",onClick:d,className:"link-styled-button video-button","aria-label":"Show Media Selector"},e(a).createElement(Tr,null))];var m;return t.totalCount>0&&(m=e(a).createElement("div",{className:"offscreen-count"},t.totalCount," ",1===t.totalCount?"person is":"people are"," in the call",i||o?", not including you":"",".")),e(a).createElement("div",{id:"media-chat-buttons"},m,p,e(a).createElement("div",null,e(a).createElement("button",{key:"audio-only-mode",onClick:()=>{let e;e=t.audioOnlyMode?"This will show you others&apos; webcam feeds. This will not affect whether or not you are sending your own webcam feed to others.":"This will hide all video feeds from other attendees. You will still be able to hear them, but you won't see them. This may improve performance if things are slow.\n\nNote that you will still broadcast your webcam feed to others if you enable it, and you will still be able to see the talks broadcast in the Theater.";var n;confirm(e)&&h((n=!t.audioOnlyMode,{type:Bt.SetAudioOnlyMode,value:n}))},id:"toggle-audio-only-mode",className:"link-styled-button"},t.audioOnlyMode?"Show":"Hide"," all video feeds"),e(a).createElement("button",{key:"text-only-mode",onClick:()=>{confirm("This will disable all audio/video aspects of this space other than the stream in the theater. You will no longer be able to see or hear other participants, but you can still interact via text chat.\n\nSwitching modes will refresh your page - please be patient while it reloads.")&&h(on(!0,!0))},id:"toggle-text-only-mode",className:"link-styled-button"},"Mute all audio and video")))};function gs(t){const{publishingCamera:n,callParticipants:r,inCall:i,joinCallFailed:o}=oi(),s=e(a).useContext(qq),u=(t.visibleSpeakers||[]).map((e=>e[0]));if(console.log("Re-rendering media chat view?"),!i){if(o)return e(a).createElement("div",{id:"media-wrapper"},e(a).createElement("strong",null,"Could not connect to audio/video! Rooms are max 50 chatters - if you want to use audio/video, try moving to another room. Otherwise, it may be a network issue."));if(t.textOnlyMode){const t=()=>{confirm("Entering video/audio mode means that you will be able to see and hear video and audio from other participants. Your camera and microphone will default to off when you switch modes. Switching modes will refresh your page - please be patient while it reloads.")&&s(on(!1,!0))};return e(a).createElement("div",{id:"media-wrapper"},"There may be a voice/video call happening here that you can't see.",e(a).createElement("button",{className:"link-styled-button",onClick:t,style:{marginLeft:"1em"}},"Disable Text-Only Mode"),".")}return e(a).createElement("div",{id:"media-wrapper"},e(a).createElement("strong",null,"Attempting to connect to room."))}if(!r)return e(a).createElement("div",{id:"media-view"});let c;n&&(c=e(a).createElement(ls,{speaking:!1}));const l=Array.from(r.values()).filter((e=>e.audioTracks.size+e.videoTracks.size>0)),h=l.filter((e=>u.includes(e.identity))),f=l.filter((e=>!u.includes(e.identity)));for(console.log("[NUM_FACES]: ",t.numberOfFaces);h.length<t.numberOfFaces&&f.length>0;)h.push(f.shift());const d=h.map((n=>e(a).createElement(ms,{key:`participant-chat-view-${n.identity}`,participant:n,isDominant:t.currentSpeaker===n.identity,renderAsFace:!t.audioOnlyMode}))),p=f.map((e=>{t.currentSpeaker,e.identity})),m={height:c||!t.audioOnlyMode&&d.length>0?void 0:"0px"};return e(a).createElement("div",{id:"media-wrapper"},e(a).createElement("div",{id:"media-view",style:m},c," ",d," ",p),e(a).createElement(vs,{textOnlyMode:t.textOnlyMode,inMediaChat:t.inMediaChat,totalCount:d.length+p.length,offscreenCount:t.audioOnlyMode?d.length+p.length:p.length,audioOnlyMode:t.audioOnlyMode}))}a=o("6Ti1v");function ys(e){if(e.includes(" ")){for(console.log("spaces detected "+e);e.includes(" ");)e=e.replace(" ","-");console.log("spaces crushed: "+e)}return e}function bs(t){a.useContext(qq);const{defaultHandle:n,user:r,prepopulateTwitterWithDefaultHandle:i}=t,[o,s]=a.useState(r&&r.username||n||""),[u,c]=a.useState(r&&r.realName||""),[l,h]=a.useState(r&&r.pronouns||""),[f,d]=a.useState(r&&r.description||""),[p,m]=a.useState(r&&r.askMeAbout||""),[v,g]=a.useState(r&&r.url||""),[y,b]=a.useState(r&&r.twitterHandle||i&&n||""),w=()=>{!async function(e,t){const n=await mr("updateProfile",{user:e,isNew:t});n.valid?t?window.location.reload():(ir(qt(n.user)),ir(tn())):n.error&&alert(n.error)}({username:o,realName:u,pronouns:l,description:f,askMeAbout:p,twitterHandle:y,url:v,hostname:mn},t.isFTUE)};return e(a).createElement("div",{id:"profile-edit",className:"container "+(t.isFTUE?"ftue":"")},e(a).createElement("div",{className:"form"},e(a).createElement("h1",null,(t.isFTUE?"Create":"Edit")+" Name Badge"),e(a).createElement("div",{style:{marginTop:"2em",marginBottom:"2em"}},"This is your virtual conference badge!",e(a).createElement("br",null),"Whatever you enter will be visible to other attendees.",e(a).createElement("br",null),"You can come back and change this at any time."),e(a).createElement("div",{className:"grid"},e(a).createElement("div",{className:"field"},e(a).createElement("label",{htmlFor:"username"},"Chat Handle"),e(a).createElement("em",null,"What shows up when you send messages"),e(a).createElement("input",{type:"text",id:"username",value:o,onChange:e=>{const t=ys(e.currentTarget.value);0!==t.localeCompare(e.currentTarget.value)&&(e.currentTarget.value=t),s(e.currentTarget.value)}})),e(a).createElement("div",{className:"field"},e(a).createElement("label",{htmlFor:"realname"},"Name"),e(a).createElement("em",null,'Optional: Your "IRL" name.'),e(a).createElement("input",{type:"text",id:"real-name",value:u,onChange:e=>c(e.currentTarget.value)})),e(a).createElement("div",{className:"field"},e(a).createElement("label",{htmlFor:"description"},"Character Description"),e(a).createElement("em",null,"Optional: Describe your avatar!"),e(a).createElement("input",{type:"text",id:"description",value:f,onChange:e=>d(e.currentTarget.value)})),e(a).createElement("div",{className:"field"},e(a).createElement("label",{htmlFor:"pronouns"},"Pronouns"),e(a).createElement("em",null,'e.g. "she/her" or "he/they"'),e(a).createElement("input",{type:"text",id:"pronouns",value:l,onChange:e=>h(e.currentTarget.value)})),e(a).createElement("div",{className:"field"},e(a).createElement("label",{htmlFor:"website"},"Website"),e(a).createElement("em",null,"Optional: Your personal site!"),e(a).createElement("input",{type:"text",id:"website",value:v,onChange:e=>g(e.currentTarget.value)})),e(a).createElement("div",{className:"field"},e(a).createElement("label",{htmlFor:"twitter"},"Twitter Handle"),e(a).createElement("em",null,"Optional: Don't include the @"),e(a).createElement("input",{type:"text",id:"twitter",value:y,onChange:e=>b(e.currentTarget.value)})),e(a).createElement("div",{className:"field"},e(a).createElement("label",{htmlFor:"ask-me-about"},"Ask Me About"),e(a).createElement("em",null,"Optional: What are you excited to talk about?"),e(a).createElement("input",{type:"text",id:"ask-me-about",value:p,onChange:e=>m(e.currentTarget.value)}))),e(a).createElement("button",{onClick:e=>{s(ys(o)),w()},className:"submit"},"Save Changes")))}a=o("6Ti1v"),a=o("6Ti1v");function ws(){return ks(er.auth().currentUser)}function _s(){return er.auth().signOut()}const ks=e=>{const t=1===e.providerData.length&&"password"===e.providerData[0].providerId&&!e.emailVerified;return{id:e.uid,displayName:e.displayName,email:e.email,emailVerified:e.emailVerified,providerId:e.providerId,shouldVerifyEmail:t,isSignInWithEmailLink:e=>er.auth().isSignInWithEmailLink(e)}};function Ss(e){const t={url:window.location.href,handleCodeInApp:!0};er.auth().sendSignInLinkToEmail(e,t).then((()=>{console.log(`Sign-in email sent to ${e}!`)}))}function Es(t){const n=a.useContext(qq),{userMap:r,myId:i}=a.useContext(zq),o=r[i],s=o&&o.isMod,u=e(a).createElement(Ni,{onClick:()=>{confirm(`Are you sure you would like to ${t.spaceIsClosed?"open":"close"} the space for all non-mod users?`)&&async function(e){await mr("openOrCloseSpace",{spaceIsClosed:e})}(!t.spaceIsClosed)}},t.spaceIsClosed?"Open":"Close"," the Space");return e(a).createElement("div",{id:"menu-button"},e(a).createElement(Zi,{id:"topMenu",holdToDisplay:0},e(a).createElement("strong",null,t.username)," ",e(a).createElement(Tr,null)),e(a).createElement(Ki,{id:"topMenu"},e(a).createElement(Ni,{onClick:()=>{pr(i)}},"View Profile"),e(a).createElement(Ni,{onClick:()=>{n(en(fn.ProfileEdit))}},"Edit Profile"),e(a).createElement(Ni,{onClick:()=>{n(en(fn.Settings))}},"Settings & Theme"),s?u:null,s?e(a).createElement(Ni,{onClick:()=>{n(en(fn.ServerSettings))}},"Server Settings"):null,e(a).createElement(Ni,{onClick:()=>{confirm("Are you sure you want to log out?")&&async function(e){await mr("disconnect")}().then((()=>{_s().then((()=>{window.location.reload()}))})).catch((e=>{console.log("error signing out",e),window.location.reload()}))}},"Log Out")))}a=o("6Ti1v"),a=o("6Ti1v");function Ms(t){const n=a.useContext(qq),{roomData:r,currentRoomId:i}=t;let o,s;if(t.isMiniMap?(o=8,s=13):(o=10,s=21),e(a).useEffect((()=>{const e=document.getElementById(`${t.isMiniMap?"minimap-":""}clickable-room-${i}`);e&&e.scrollIntoView({block:"center",inline:"center"})}),t.isMiniMap?null:[]),!r)return e(a).createElement("div",null);let u=Ts;Cs.forEach(((e,t)=>{let n="[0]";r[e]&&r[e].users&&r[e].users.length>0&&(n=`[${r[e].users.length}]`),n=n.padEnd(4,"."),u=u.replace(`(${t.toString().padStart(2,"0")})`,n)})),u=u.replace(/\[([0-9]*)\]/g,"($1)");const c=e=>{const t=e.target&&e.target.getAttribute&&e.target.getAttribute("data-room");t&&(fr(t),n(tn()))},l=Is.map((n=>e(a).createElement("div",{style:{position:"absolute",left:n.x*o+"px",top:n.y*s+"px",width:n.width*o+"px",height:n.height*s+"px",cursor:"pointer"},key:n.roomId,onClick:c,"data-room":n.roomId,id:`${t.isMiniMap?"minimap-":""}clickable-room-${n.roomId}`})));return e(a).createElement("div",{className:"map",style:{position:"relative",margin:"15px"}},l,e(a).createElement("pre",{style:{letterSpacing:"2px",fontFamily:"IBM Plex Mono"}},e(a).createElement("code",null,u)))}const Ts="                        ┌────────────────────────────────────────────┐                                        \n┌────────────────┐      │............................................│   ┌──────────┐     ┌──────────┐        \n│................│      │.................Theater....................│   │.Warrior..│     │.. Mage...│        \n│.Robot Labs.....│      │...................(05).....................│   │...(12)...│     │...(13)...│        \n│...(00).........│      │............................................│   └─────#────┘     └─────#────┘        \n│................│      │............................................│         #                #             \n│................│      │............................................############################             \n└──────────#─────┘      │............................................│         #                #             \n┌──────────#─────┐      │............................................│   ┌─────#────┐     ┌─────#────┐        \n│............... │      │............................................│   │..Rogue...│     │.Tourist..│        \n│.Space.Hangar...│      │............................................│   │...(14)...│     │...(15)...│        \n│.Lounge.........│      │............................................│   └──────────┘     └──────────┘        \n│...(01).........│      │............................................│                                        \n│................│      │............................................│                                        \n│┌────────────┐..│      │............................................│                                        \n││.Vending....│..###    │............................................│                                        \n││.Machine....│..│ ##   └────────────────────#───────────────────────┘                                        \n││...(02).....│..│  ###                      #           ┌──────────────────────────────────────────────────┐ \n│└────────────┘..│     ###        ┌──────────#────────┐  │..................Unconferencing..................│ \n└────────────────┘       ###      │...................####..................Lobby ..(16)....................│ \n┌────────────┐         ┌────────────┐.................│  └──────────────#───────────────────#───────────────┘ \n│.Office Of..│         │Destinations│..Central Hall...│  ┌──────────┐   #    ┌──────────┐   #   ┌──────────┐  \n│.Steam......│         │..(06)......│.....(10)........│  │Cockatrice│   #    │...Naga...│   #   │..Tengu...│  \n│...(27).....│         └────────────┘.................│  │...(17)...##########...(18)...│########...(19)...│  \n└───────#────┘         ###        │...................│  └──────────┘   #    └──────────┘   #   └──────────┘  \n┌───────#────────┐   ###          │...................│  ┌──────────┐   #    ┌──────────┐   #   ┌──────────┐  \n│................│ ###            │...................│  │..Dragon..│   #    │.Skeleton.│   #   │...Yak....│  \n│.Adventurers....│##              │..┌────────────┐...│  │...(20)...##########...(21)...#########...(22)...│  \n│.Guild..........##               │..│.Swag Table.│...│  └──────────┘        └──────────┘       └──────────┘  \n│...(03).........│   ┌──────────┐ │..│...(11).....│...│ ┌──────────────────────────────────────────────┐      \n│................│   │...Paint..│ │..└────────────┘...│ │....................................┌───────┐.│      \n│................│   │...(07)...│ │...................###.................Bar ..(23).........│Railing│.│      \n│................│   └────#─────┘ │...................│ │....................................│..(25).│.│      \n└───────#────────┘   ┌────#─────┐ └──────────#────────┘ │..┌───────┐.....┌────────────┐......└───────┘.│      \n┌───────#────────┐   │...Dyes...│            #          │..│Stools │.....│....Stage...│................│      \n│................│  ##...(08)...│            #          │..│..(24).│.....│....(29)....│................│      \n│.Office of......│###└────#─────┘ ┌──────────#────────┐ │..└───────┘.....└────────────┘................│      \n│.Transmutation..##  ┌────#─────┐ │.....Library.......│ │.....................┌────────────┐...........│      \n│...(04).........│   │..SHOWER..│ │.......(28)........│ │.....................│Back...(26).│...........│      \n│................│   │...(09)...│ │...................│ │.....................└────────────┘...........│      \n└────────────────┘   └──────────┘ └───────────────────┘ └──────────────────────────────────────────────┘      \n",Cs=["robots","sfHub","vendingMachine","exploreHub","transmute","theater","destinations","doctorPaint","dyes","shower","hall","swag","warrior","mage","rogue","tourist","unconference","cockatrice","naga","tengu","dragon","skeleton","yak","bar","stools","railing","back","steam","library","barStage"],Is=[{roomId:"robots",x:0,y:1,width:18,height:7},{roomId:"sfHub",x:0,y:8,width:18,height:12},{roomId:"vendingMachine",x:1,y:14,width:14,height:5},{roomId:"exploreHub",x:0,y:25,width:18,height:9},{roomId:"transmute",x:0,y:34,width:18,height:7},{roomId:"theater",x:24,y:0,width:46,height:17},{roomId:"destinations",x:23,y:20,width:14,height:4},{roomId:"doctorPaint",x:21,y:29,width:12,height:4},{roomId:"dyes",x:21,y:33,width:12,height:4},{roomId:"shower",x:21,y:37,width:12,height:4},{roomId:"hall",x:34,y:18,width:21,height:16},{roomId:"swag",x:37,y:27,width:14,height:4},{roomId:"warrior",x:73,y:1,width:12,height:4},{roomId:"mage",x:90,y:1,width:12,height:4},{roomId:"rogue",x:73,y:8,width:12,height:4},{roomId:"tourist",x:90,y:8,width:12,height:4},{roomId:"unconference",x:57,y:17,width:52,height:4},{roomId:"cockatrice",x:57,y:21,width:12,height:4},{roomId:"naga",x:77,y:21,width:12,height:4},{roomId:"tengu",x:96,y:21,width:12,height:4},{roomId:"dragon",x:57,y:25,width:12,height:4},{roomId:"skeleton",x:77,y:25,width:12,height:4},{roomId:"yak",x:96,y:25,width:12,height:4},{roomId:"bar",x:56,y:29,width:48,height:12},{roomId:"stools",x:59,y:33,width:9,height:4},{roomId:"railing",x:93,y:30,width:9,height:4},{roomId:"back",x:78,y:37,width:14,height:3},{roomId:"steam",x:0,y:20,width:14,height:5},{roomId:"library",x:34,y:36,width:21,height:5},{roomId:"barStage",x:73,y:33,width:14,height:4}];function xs(t){const n=a.useContext(qq);return e(a).createElement("div",{id:"mini-map",onClickCapture:e=>{n(en(fn.Map)),e.stopPropagation()},style:{cursor:"pointer"}},e(a).createElement(Ms,{roomData:t.roomData,currentRoomId:t.currentRoomId,isMiniMap:!0}))}function As(t){const n=a.useContext(Wq),r=a.useContext(qq);return e(a).createElement("nav",{id:"side-menu",role:"navigation","aria-label":"List of rooms you can navigate to"},n?e(a).createElement("button",{onClick:()=>{r({type:Bt.HideSideMenu})},id:"close-button",className:"close"},"x"):"",e(a).createElement(Es,{username:t.username,spaceIsClosed:t.spaceIsClosed}),e(a).createElement("button",{id:"happening-now-button",onClick:()=>{r(en(fn.HappeningNow))}},"Happening Now"),e(a).createElement("button",{id:"nav-map-button",onClick:()=>{r(en(fn.Map))}},"Map"),e(a).createElement("ul",null,e(a).createElement(Ps,{title:"Schedule",modal:fn.Schedule}),e(a).createElement(Ps,{title:"Room List",modal:fn.RoomList}),e(a).createElement(Ps,{title:"Code of Conduct",modal:fn.CodeOfConduct}),e(a).createElement(Ps,{title:"Help",modal:fn.Help})),t.roomData&&t.currentRoomId?e(a).createElement(xs,{roomData:t.roomData,currentRoomId:t.currentRoomId}):null)}const Ps=t=>{const n=a.useContext(qq);return e(a).createElement("li",null,e(a).createElement("button",{className:"nav-item",onClick:()=>{n(en(t.modal))}},e(a).createElement("strong",null,t.title)))};a=o("6Ti1v"),a=o("6Ti1v");function Os(t){const{userMap:n,myId:r}=a.useContext(zq),i=t.note,o=n[r].isMod||i.authorId===r,s=i.authorId!==r,u=i.likes&&i.likes.includes(r),c=i.likes?i.likes.length:0;let l;u&&(l=i.likes.map((e=>n[e].username)).join(", "));return e(a).createElement(e(Wo),{componentDecorator:(t,n,r)=>e(a).createElement("a",{href:t,key:r,target:"_blank",rel:"noopener noreferrer"},n)},e(a).createElement("div",{className:"note"},o?e(a).createElement("button",{onClick:()=>{confirm("Are you sure you would like to delete this?")&&hr(i.id)},className:"link-styled-button note-delete"},"X"):"",i.message," ",e(a).createElement("br",null),e(a).createElement("button",{className:"link-styled-button like-button "+(u||!s?"liked":"unliked"),onClick:()=>{s&&(u?async function(e){await mr("likeRoomNote",{noteId:e,like:!1})}(i.id):async function(e){await mr("likeRoomNote",{noteId:e,like:!0})}(i.id))},"data-tip":l},c,u?e(a).createElement(Cr,null):e(a).createElement(Rr,null),e(a).createElement(Bo,null)),"-",e(a).createElement(Fo,{userId:i.authorId,id:`noteAuthor-${i.id}`})," ",e(a).createElement("br",null)))}const Rs=["cockatrice","dragon","naga","skeleton","tengu","yak"];function Ds(e){return e.likes?e.likes.length:0}function Ns(t){const n=(t.notes||[]).sort(((e,t)=>{const n=e.likes?e.likes.length:0;return(t.likes?t.likes.length:0)-n})).map((t=>e(a).createElement(Os,{key:t.id,note:t}))),r=t.noteWallData?t.noteWallData.noteWallDescription:"You are looking at a wall with space for people to place sticky notes.",i=t.noteWallData?t.noteWallData.addNoteLinkText:"add a note",o=t.user&&t.user.isMod?e(a).createElement("button",{onClick:()=>{confirm("Are you sure you want to delete all notes?")&&t.notes.map((e=>hr(e.id)))}},"Mod: Delete all notes"):"",s=t.user&&t.user.isMod?e(a).createElement("button",{onClick:()=>{if(confirm("This will assign the top 6 rooms to the unconferencing rooms, are you sure?")&&t.notes.length>0){const n=JSON.parse(JSON.stringify(t.serverSettings)),r=t.notes.sort(((e,t)=>Ds(e)<Ds(t)?1:-1)),i=[];for(var e=0;e<Math.min(r.length,Rs.length);e++)i.push({text:`Unconference: ${r[e].message} in the ${Rs[e]} room.`,roomId:Rs[e]});n.happeningNowEntries=i.concat(n.happeningNowEntries),sr(n)}}},"Mod: Set as unconferencing topics"):"";return e(a).createElement("div",null,o,s,e(a).createElement("div",{className:"note-wall-description"},r,e(a).createElement("br",null),e(a).createElement("br",null),"If you'd like, you can ",e(a).createElement("button",{onClick:()=>{const e=t.noteWallData?t.noteWallData.addNotePrompt:"What do you type on the note wall?";!async function(e){if(null!==e&&e.length>0){const t=Ut();await mr("addRoomNote",{id:t,message:e})}}(prompt(e))},id:"addNote",className:"link-styled-button"},i),"."),n)}a=o("6Ti1v"),s=o("3zkYw");const Ls=t=>{const n=a.useContext(qq);a.useEffect((()=>{function e(e){27===e.keyCode&&n(tn())}return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}));const r=e=>{"modal-wrapper"!==e.target.id&&"close-button"!==e.target.id||n(tn())};return e(s).createPortal(e(a).createElement("div",{id:"modal-wrapper",onClick:r,role:"dialog","aria-modal":!0},e(a).createElement("div",{id:"modal",className:t.fullScreen?"full-screen":null},e(a).createElement("button",{onClick:r,id:"close-button",className:"close"},"x"),t.children)),document.body)};a=o("6Ti1v"),Yr=o("2lxET"),a=o("6Ti1v");function js(t){const n=a.useContext(qq),r=e=>{const t="true"===e.target.value;n(rn(t))};return e(a).createElement("div",{className:"videoAudioSettingsContainer"},e(a).createElement("form",{className:"form",id:"video-audio-selection-form"},e(a).createElement("label",{htmlFor:"video-audio-selection-form",className:"form-header"},"Video/Audio Options:"),e(a).createElement("div",{className:"radio"},e(a).createElement("input",{type:"radio",id:"keep-camera-when-moving",value:"true",checked:!0===t.keepCameraWhenMoving,onChange:r}),"Keep video/audio status when moving rooms"),e(a).createElement("div",{className:"radio"},e(a).createElement("input",{type:"radio",id:"keep-camera-when-moving",value:"false",checked:!1===t.keepCameraWhenMoving,onChange:r}),"Always leave video/audio when moving rooms")))}function Bs(t){const n=a.useContext(qq),{useSimpleNames:r}=a.useContext(Vq),[i,o]=e(a).useState("default");a.useEffect((()=>{(async()=>{o(await Yr.currentTheme())})()}));const s=e=>{console.log(i,e.target.value),document.body.classList.replace(i,e.target.value),o(e.target.value),Yr.setTheme(e.target.value)},u=e=>{n(nn(e))},c=e=>{"captions-enabled"===e.target.value?n(an(!0)):"captions-disabled"===e.target.value&&n(an(!1))};return e(a).createElement("div",{className:"settingsContainer"},e(a).createElement("div",{className:"form",id:"themeSelectionForm"},e(a).createElement("label",{htmlFor:"themeSelectionForm",className:"form-header"},"Select Theme:"),e(a).createElement("div",{className:"radio"},e(a).createElement("input",{type:"radio",id:"default-theme",value:"default",checked:"default"===i,onChange:s}),e(a).createElement("label",{htmlFor:"default-theme"},"Default (Dark)")),e(a).createElement("div",{className:"radio"},e(a).createElement("input",{type:"radio",id:"solarized-dark",value:"solarized-dark",checked:"solarized-dark"===i,onChange:s}),e(a).createElement("label",{htmlFor:"solarized-dark"},"Solarized Dark")),e(a).createElement("div",{className:"radio"},e(a).createElement("input",{type:"radio",id:"solarized-light",value:"solarized-light",checked:"solarized-light"===i,onChange:s}),e(a).createElement("label",{htmlFor:"solarized-light"},"Solarized Light"))),e(a).createElement("div",{className:"form",id:"simpleNamesSelectionForm"},e(a).createElement("label",{htmlFor:"simpleNamesSelectionForm",className:"form-header"},"Username Display Mode:"),e(a).createElement("div",{className:"radio"},e(a).createElement("label",null,e(a).createElement("input",{type:"radio",name:"simpleNameSelection",id:"useDefaultName",checked:!r,onChange:()=>u(!1)}),"Use Default Names (shows colors, fonts, and polymorph potion emojis)")),e(a).createElement("div",{className:"radio"},e(a).createElement("label",null,e(a).createElement("input",{type:"radio",name:"simpleNameSelection",id:"useSimpleName",checked:r,onChange:()=>u(!0)}),"Use Simple Names (text only)"))),e(a).createElement("div",{className:"form",id:"captionsEnabled"},e(a).createElement("label",{htmlFor:"captionsEnabled",className:"form-header",style:{marginBottom:0}},"Enable Captions (Experimental):"),e(a).createElement("span",{style:{marginBottom:"1em"}},"This will automatically transcribe spoken audio as messages in the text chat."),e(a).createElement("div",{className:"radio"},e(a).createElement("input",{type:"radio",id:"captions-enabled",value:"captions-enabled",checked:t.captionsEnabled,onChange:c}),e(a).createElement("label",{htmlFor:"captions-enabled"},"Enabled")),e(a).createElement("div",{className:"radio"},e(a).createElement("input",{type:"radio",id:"captions-disabled",value:"captions-disabled",checked:!t.captionsEnabled,onChange:c}),e(a).createElement("label",{htmlFor:"captions-disabled"},"Disabled"))),e(a).createElement(js,{keepCameraWhenMoving:t.keepCameraWhenMoving}))}a=o("6Ti1v");function Fs(t){const n=a.useContext(qq),{prepareMediaDevices:r,cameras:i,mics:o,currentMic:s,setCurrentMic:u,currentCamera:c,setCurrentCamera:l,publishMedia:h,publishAudio:f,publishingCamera:d,publishingMic:p,unpublishMedia:m}=oi();a.useEffect((()=>((async()=>{s||(await r(),console.log("Prepared for media chat"))})(),()=>{d&&p||m()})),[]);const v=t=>e(a).createElement("option",{value:t.id,key:t.id},t.name);let g;t.hideVideo||(g=e(a).createElement(e(a).Fragment,null,e(a).createElement("label",{htmlFor:"#video-select"},"Webcam"),e(a).createElement("select",{name:"Video",id:"video-select",onChange:e=>{l(e.target.value)},defaultValue:c&&c.id},(i||[]).map(v)),e(a).createElement("br",null)));return e(a).createElement("div",{id:"media-selector",style:{display:"flex","flex-direction":"column"}},e(a).createElement("div",null,t.hideVideo?"":e(a).createElement(ls,{speaking:t.userIsSpeaking,hideUI:!0}),e(a).createElement("div",{className:"selects"},g,e(a).createElement("label",{htmlFor:"#audio-select"},"Audio"),e(a).createElement("select",{name:"Audio",id:"audio-select",onChange:e=>{u(e.target.value)},defaultValue:s&&s.id},(o||[]).map(v)))),e(a).createElement("div",null,e(a).createElement(js,{keepCameraWhenMoving:t.keepCameraWhenMoving})),e(a).createElement("button",{id:"join",onClick:()=>{n(tn())}},"Use These Devices"))}a=o("6Ti1v");function Us(){return e(a).createElement("div",{id:"code-of-conduct"},e(a).createElement("p",null,"Our goal is to have a fun and welcoming celebration of roguelike games, so we have a formalized code of conduct that sets these expectations."),e(a).createElement("p",null,e(a).createElement("a",{href:"https://roguelike.club/code.html",target:"_blank",rel:"noreferrer"},"Read our Code of Conduct.")),e(a).createElement("p",null,"If you're being harassed, notice someone being harassed, or have any other concerns related to the code of conduct, you have a few options:"),e(a).createElement("ul",null,e(a).createElement("li",null,"Type ",e(a).createElement("code",null,"/mod")," into the chat box, followed by a message, to contact all moderators."),e(a).createElement("li",null,"Email ",e(a).createElement("a",{href:"mailto:contact@roguelike.club"},"contact@roguelike.club"),"."),e(a).createElement("li",null,"If you have a report or concern related to an organizer, please contact a different member of the ",e(a).createElement("a",{href:"https://roguelike.club/who.html",target:"_blank",rel:"noreferrer"},"organizing team")," outside of this tool (via email, Twitter DM, Discord, or some other service).")))}a=o("6Ti1v");const qs="Social Time";function zs(e,t,n,r,i){return 1===t?{time:(o=e,new Date(`2021-10-16T${o}:00.000-07:00`)),text:n,roomIds:r,breakoutRoomId:i}:2===t?{time:(e=>new Date(`2021-10-17T${e}:00.000-07:00`))(e),text:n,roomIds:r,breakoutRoomId:i}:void console.error("Your static data is messed up, somehow.");var o}const Vs=[zs("09:00",2,"Doors Open"),zs("09:15",2,"Kickoff",["theater"]),zs("09:30",2,"Michael Langford: For the Squishies ⚡ Making Roguelikes Accessible to (Younger) Children and their Parents",["theater"],"warrior"),zs("09:45",2,"Younès Rabii: Pokemon Glitch - Story of A Roguelike With No Author",["theater"],"tourist"),zs("10:00",2,"Sraëka-Lillian: Procedural Phonology: Generating Name Generators",["theater"],"rogue"),zs("10:15",1,qs),zs("10:30",2,"Unconferencing",["unconference"]),zs("11:30",2,"Alice Lai: All Together Now: Creating Multiplicative Power in Hades",["theater"],"warrior"),zs("12:00",2,"Brian Cronin: Off The Rails - Lessons Learned from Monster Train Development",["theater"],"rogue"),zs("12:30",2,qs),zs("13:30",2,"Chris McCormick: Building Juicy Minimal Roguelikes in the Browser",["theater"],"mage"),zs("14:00",2,"Rich Wilson: Roguelikes, Immersive Sims, and the Church of the Simulation",["theater"],"rogue"),zs("14:30",2,"Xalavier Nelson Jr.: Building an Economic Flesh Simulation Will Make You Disassociate from Reality",["theater"],"tourist"),zs("15:00",2,qs),zs("15:30",2,"Kristen Yu: Video Game Quest Theory for Improved Procedural Content Generation",["theater"],"mage"),zs("16:00",2,"Ally Brinken & Michelle Webb, En Rogue: Who’s the Boss (And How and Why)?",["theater"],"warrior"),zs("16:30",2,"John Harris: The Lost Roguelikes",["theater"],"rogue"),zs("17:00",2,qs),zs("17:30",2,"Nick McConnell: Things I've Learnt from Maintaining Angband",["theater"],"rogue"),zs("17:45",2,"Nathan Savant: One Quest To Rule Them All: Quest Design in Non-Games Media",["theater"],"warrior"),zs("18:00",2,"Noah Swartz: The Tombs of Atuan: The Original Roguelike?",["theater"],"mage"),zs("18:15",2,qs),zs("19:00",2,"Doors Close")];function Ws(){const t=new Intl.DateTimeFormat("en",{hour:"numeric",minute:"numeric"}),n=t.resolvedOptions().timeZone,r=Vs.flatMap((n=>n.text===qs?[e(a).createElement("tr",{key:t.format(n.time)+"hr1"},e(a).createElement("th",{className:"break",colSpan:2},e(a).createElement("hr",null))),e(a).createElement("tr",{key:t.format(n.time)+"text"},e(a).createElement("td",{className:"time"},t.format(n.time)),e(a).createElement("td",{className:"segment"},"Social Time")),e(a).createElement("tr",{key:t.format(n.time)+"hr2"},e(a).createElement("th",{className:"break",colSpan:2},e(a).createElement("hr",null)))]:[e(a).createElement("tr",{key:t.format(n.time)},e(a).createElement("td",{className:"time"},t.format(n.time)),e(a).createElement("td",{className:"segment"},n.text))]));return e(a).createElement("div",{id:"Schedule"},e(a).createElement("h1",null,"Schedule"),e(a).createElement("p",null,"Times below should be in your local time zone. We believe your time zone is ",n,"."),e(a).createElement("table",null,e(a).createElement("tbody",null,r)))}a=o("6Ti1v");function Hs(){const t=rs.map((t=>e(a).createElement("tr",{key:t.type},e(a).createElement("td",null,t.invocations.join(", ")),e(a).createElement("td",null,t.description))));return e(a).createElement("div",null,e(a).createElement("h1",null,"Welcome!"),e(a).createElement("p",null,"Welcome to the Roguelike Celebration social space! This is an open-source chat app / virtual world built specifically for Roguelike Celebration."),e(a).createElement("p",null,"You can access this reference at any time by clicking the ",e(a).createElement("strong",null,"Help")," button in the left sidebar or by typing ",e(a).createElement("strong",null,"/help")," into the chat box."),e(a).createElement("p",null,"If you have questions, feedback, or need to report a code of conduct violation, you can contact us via the ",e(a).createElement("strong",null,"/mod")," command."),e(a).createElement("h2",null,"Command Reference"),e(a).createElement("p",null,"You can enter any of these commands by typing directly into the chat box."),e(a).createElement("table",null,t))}a=o("6Ti1v");function Ks(t){const n=a.useContext(qq);return e(a).createElement("div",null,e(a).createElement("h1",null,"Map"),e(a).createElement("p",null,"Click on a room to move there!"),e(a).createElement("p",null,"If you find the map difficult to use, you can also view a ",e(a).createElement("button",{className:"link-styled-button",onClick:()=>{n(en(fn.RoomList))}},"list of all rooms"),"."),e(a).createElement(Ms,{roomData:t.roomData,currentRoomId:t.currentRoomId}))}var Gs;o.register("1mq7S",(function(r,i){t(r.exports,"auth",(()=>s));var a=o("3yyN7");o("1IS2I"),o("62iKi"),o("6nLIH"),o("54uZF"),o("37sSj"),function(){(function(){var e,t,r="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)t=Object.setPrototypeOf;else{var i;e:{var o={};try{o.__proto__={xb:!0},i=o.xb;break e}catch(e){}i=!1}t=i?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var a=t;function s(e,t){if(e.prototype=r(t.prototype),e.prototype.constructor=e,a)a(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.K=t.prototype}var u="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},c="undefined"!=typeof window&&window===this?this:void 0!==n&&null!=n?n:this;function l(e,t){if(t){var n=c;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];i in n||(n[i]={}),n=n[i]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&u(n,e,{configurable:!0,writable:!0,value:t})}}l("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),l("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var i=n[t];if(i===e||Object.is(i,e))return!0}return!1}}));var h=this;function f(e){return void 0!==e}function d(e){return"string"==typeof e}var p=/^[\w+/_-]+[=]{0,2}$/,m=null;function v(){}function g(e){e.W=void 0,e.Xa=function(){return e.W?e.W:e.W=new e}}function y(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function b(e){return"array"==y(e)}function w(e){var t=y(e);return"array"==t||"object"==t&&"number"==typeof e.length}function _(e){return"function"==y(e)}function k(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var S="closure_uid_"+(1e9*Math.random()>>>0),E=0;function M(e,t,n){return e.call.apply(e.bind,arguments)}function T(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function C(e,t,n){return(C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?M:T).apply(null,arguments)}function I(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function x(e,t){for(var n in t)e[n]=t[n]}var A,P=Date.now||function(){return+new Date};function O(e,t){e=e.split(".");var n,r=h;e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)!e.length&&f(t)?r[n]=t:r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}}function R(e,t){function n(){}n.prototype=t.prototype,e.K=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.wc=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function D(e){if(Error.captureStackTrace)Error.captureStackTrace(this,D);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function N(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");D.call(this,n+e[r])}function L(e,t){throw new N("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}R(D,Error),D.prototype.name="CustomError",R(N,D),N.prototype.name="AssertionError";var j=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(d(e))return d(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},B=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=d(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};var F=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,o=d(e)?e.split(""):e,a=0;a<n;a++)if(a in o){var s=o[a];t.call(void 0,s,a,e)&&(r[i++]=s)}return r},U=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i=d(e)?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},q=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=d(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function z(e,t){return 0<=j(e,t)}function V(e,t){var n;return(n=0<=(t=j(e,t)))&&W(e,t),n}function W(e,t){return 1==Array.prototype.splice.call(e,t,1).length}function H(e,t){!function(e,t){for(var n=d(e)?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&W(e,r)&&0}))}function K(e){return Array.prototype.concat.apply([],arguments)}function G(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Y(e,t,n){return 2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,n)}var Q=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},J=/&/g,Z=/</g,X=/>/g,$=/"/g,ee=/'/g,te=/\x00/g,ne=/[\x00&<>"']/;function re(e,t){return e<t?-1:e>t?1:0}function ie(e){return ne.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(J,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(Z,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(X,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace($,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(ee,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(te,"&#0;"))),e}function oe(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function ae(e){var t,n={};for(t in e)n[t]=e[t];return n}var se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<se.length;o++)n=se[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}var ce="StopIteration"in h?h.StopIteration:{message:"StopIteration",stack:""};function le(){}function he(e){if(e instanceof le)return e;if("function"==typeof e.ha)return e.ha(!1);if(w(e)){var t=0,n=new le;return n.next=function(){for(;;){if(t>=e.length)throw ce;if(t in e)return e[t++];t++}},n}throw Error("Not implemented")}function fe(e){if(w(e))return G(e);e=he(e);var t=[];return function(e,t){if(w(e))try{B(e,t,void 0)}catch(e){if(e!==ce)throw e}else{e=he(e);try{for(;;)t.call(void 0,e.next(),void 0,e)}catch(e){if(e!==ce)throw e}}}(e,(function(e){t.push(e)})),t}function de(e,t){this.g={},this.a=[],this.j=this.h=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof de)for(n=e.ja(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function pe(e){if(e.h!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];me(e.g,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.h!=e.a.length){var i={};for(n=t=0;t<e.a.length;)me(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function me(e,t){return Object.prototype.hasOwnProperty.call(e,t)}le.prototype.next=function(){throw ce},le.prototype.ha=function(){return this},(e=de.prototype).la=function(){pe(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.g[this.a[t]]);return e},e.ja=function(){return pe(this),this.a.concat()},e.clear=function(){this.g={},this.j=this.h=this.a.length=0},e.get=function(e,t){return me(this.g,e)?this.g[e]:t},e.set=function(e,t){me(this.g,e)||(this.h++,this.a.push(e),this.j++),this.g[e]=t},e.forEach=function(e,t){for(var n=this.ja(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}},e.ha=function(e){pe(this);var t=0,n=this.j,r=this,i=new le;return i.next=function(){if(n!=r.j)throw Error("The map has changed since the iterator was created");if(t>=r.a.length)throw ce;var i=r.a[t++];return e?i:r.g[i]},i};var ve=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ge(e,t,n,r){for(var i=n.length;0<=(t=e.indexOf(n,t))&&t<r;){var o=e.charCodeAt(t-1);if(!(38!=o&&63!=o||(o=e.charCodeAt(t+i))&&61!=o&&38!=o&&35!=o))return t;t+=i+1}return-1}var ye=/#|$/;function be(e,t){var n=e.search(ye),r=ge(e,0,t,n);if(0>r)return null;var i=e.indexOf("&",r);return(0>i||i>n)&&(i=n),r+=t.length+1,decodeURIComponent(e.substr(r,i-r).replace(/\+/g," "))}var we=/[?&]($|#)/;function _e(e,t){var n;this.h=this.A=this.j="",this.C=null,this.s=this.g="",this.i=!1,e instanceof _e?(this.i=f(t)?t:e.i,ke(this,e.j),this.A=e.A,this.h=e.h,Se(this,e.C),this.g=e.g,Ee(this,Be(e.a)),this.s=e.s):e&&(n=String(e).match(ve))?(this.i=!!t,ke(this,n[1]||"",!0),this.A=Te(n[2]||""),this.h=Te(n[3]||"",!0),Se(this,n[4]),this.g=Te(n[5]||"",!0),Ee(this,n[6]||"",!0),this.s=Te(n[7]||"")):(this.i=!!t,this.a=new De(null,this.i))}function ke(e,t,n){e.j=n?Te(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Se(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.C=t}else e.C=null}function Ee(e,t,n){t instanceof De?(e.a=t,function(e,t){t&&!e.j&&(Ne(e),e.h=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Le(this,t),Le(this,n),0<e.length&&(this.h=null,this.a.set(Fe(this,n),G(e)),this.g+=e.length))}),e)),e.j=t}(e.a,e.i)):(n||(t=Ce(t,Oe)),e.a=new De(t,e.i))}function Me(e){return e instanceof _e?new _e(e):new _e(e,void 0)}function Te(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ce(e,t,n){return d(e)?(e=encodeURI(e).replace(t,Ie),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ie(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}_e.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ce(t,xe,!0),":");var n=this.h;return(n||"file"==t)&&(e.push("//"),(t=this.A)&&e.push(Ce(t,xe,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.C)&&e.push(":",String(n))),(n=this.g)&&(this.h&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ce(n,"/"==n.charAt(0)?Pe:Ae,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.s)&&e.push("#",Ce(n,Re)),e.join("")};var xe=/[#\/\?@]/g,Ae=/[#\?:]/g,Pe=/[#\?]/g,Oe=/[#\?@]/g,Re=/#/g;function De(e,t){this.g=this.a=null,this.h=e||null,this.j=!!t}function Ne(e){e.a||(e.a=new de,e.g=0,e.h&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.h,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Le(e,t){Ne(e),t=Fe(e,t),me(e.a.g,t)&&(e.h=null,e.g-=e.a.get(t).length,me((e=e.a).g,t)&&(delete e.g[t],e.h--,e.j++,e.a.length>2*e.h&&pe(e)))}function je(e,t){return Ne(e),t=Fe(e,t),me(e.a.g,t)}function Be(e){var t=new De;return t.h=e.h,e.a&&(t.a=new de(e.a),t.g=e.g),t}function Fe(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ue(e){this.a=Me(e)}function qe(e){return e.a.a.get(We.Pa)||null}function ze(e,t){t?e.a.a.set(We.PROVIDER_ID,t):Le(e.a.a,We.PROVIDER_ID)}(e=De.prototype).add=function(e,t){Ne(this),this.h=null,e=Fe(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.g+=1,this},e.clear=function(){this.a=this.h=null,this.g=0},e.forEach=function(e,t){Ne(this),this.a.forEach((function(n,r){B(n,(function(n){e.call(t,n,r,this)}),this)}),this)},e.ja=function(){Ne(this);for(var e=this.a.la(),t=this.a.ja(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.la=function(e){Ne(this);var t=[];if(d(e))je(this,e)&&(t=K(t,this.a.get(Fe(this,e))));else{e=this.a.la();for(var n=0;n<e.length;n++)t=K(t,e[n])}return t},e.set=function(e,t){return Ne(this),this.h=null,je(this,e=Fe(this,e))&&(this.g-=this.a.get(e).length),this.a.set(e,[t]),this.g+=1,this},e.get=function(e,t){return e&&0<(e=this.la(e)).length?String(e[0]):t},e.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var e=[],t=this.a.ja(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.la(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.h=e.join("&")},Ue.prototype.toString=function(){return this.a.toString()};var Ve,We={Pa:"ui_auid",mc:"apiKey",Qa:"ui_sd",ub:"mode",$a:"oobCode",PROVIDER_ID:"ui_pid",Sa:"ui_sid",vb:"tenantId"};e:{var He=h.navigator;if(He){var Ke=He.userAgent;if(Ke){Ve=Ke;break e}}Ve=""}function Ge(e){return-1!=Ve.indexOf(e)}function Ye(){return(Ge("Chrome")||Ge("CriOS"))&&!Ge("Edge")}function Qe(e){return Qe[" "](e),e}Qe[" "]=v;var Je,Ze=Ge("Opera"),Xe=Ge("Trident")||Ge("MSIE"),$e=Ge("Edge"),et=$e||Xe,tt=Ge("Gecko")&&!(-1!=Ve.toLowerCase().indexOf("webkit")&&!Ge("Edge"))&&!(Ge("Trident")||Ge("MSIE"))&&!Ge("Edge"),nt=-1!=Ve.toLowerCase().indexOf("webkit")&&!Ge("Edge"),rt=nt&&Ge("Mobile"),it=Ge("Macintosh");function ot(){var e=h.document;return e?e.documentMode:void 0}e:{var at="",st=function(){var e=Ve;return tt?/rv:([^\);]+)(\)|;)/.exec(e):$e?/Edge\/([\d\.]+)/.exec(e):Xe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):nt?/WebKit\/(\S+)/.exec(e):Ze?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(st&&(at=st?st[1]:""),Xe){var ut=ot();if(null!=ut&&ut>parseFloat(at)){Je=String(ut);break e}}Je=at}var ct,lt={};function ht(e){return function(e,t){var n=lt;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=Q(String(Je)).split("."),r=Q(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=re(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||re(0==a[2].length,0==s[2].length)||re(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}var ft=h.document;function dt(e,t){this.a=e===mt&&t||"",this.g=pt}ct=ft&&Xe?ot()||("CSS1Compat"==ft.compatMode?parseInt(Je,10):5):void 0,dt.prototype.ma=!0,dt.prototype.ka=function(){return this.a},dt.prototype.toString=function(){return"Const{"+this.a+"}"};var pt={},mt={};function vt(){this.a="",this.h=yt}function gt(e){return e instanceof vt&&e.constructor===vt&&e.h===yt?e.a:(L("expected object of type TrustedResourceUrl, got '"+e+"' of type "+y(e)),"type_error:TrustedResourceUrl")}vt.prototype.ma=!0,vt.prototype.ka=function(){return this.a.toString()},vt.prototype.g=function(){return 1},vt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var yt={};function bt(){this.a="",this.h=Et}function wt(e){return e instanceof bt&&e.constructor===bt&&e.h===Et?e.a:(L("expected object of type SafeUrl, got '"+e+"' of type "+y(e)),"type_error:SafeUrl")}bt.prototype.ma=!0,bt.prototype.ka=function(){return this.a.toString()},bt.prototype.g=function(){return 1},bt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var _t=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function kt(e){return e instanceof bt?e:(e="object"==typeof e&&e.ma?e.ka():String(e),_t.test(e)||(e="about:invalid#zClosurez"),Mt(e))}function St(e){return e instanceof bt?e:(e="object"==typeof e&&e.ma?e.ka():String(e),_t.test(e)||(e="about:invalid#zClosurez"),Mt(e))}var Et={};function Mt(e){var t=new bt;return t.a=e,t}function Tt(){this.a="",this.g=Ct}Mt("about:blank"),Tt.prototype.ma=!0;var Ct={};function It(){this.a="",this.j=At,this.h=null}function xt(e){return e instanceof It&&e.constructor===It&&e.j===At?e.a:(L("expected object of type SafeHtml, got '"+e+"' of type "+y(e)),"type_error:SafeHtml")}Tt.prototype.ka=function(){return this.a},Tt.prototype.toString=function(){return"SafeStyle{"+this.a+"}"},It.prototype.g=function(){return this.h},It.prototype.ma=!0,It.prototype.ka=function(){return this.a.toString()},It.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var At={};function Pt(e,t){var n=new It;return n.a=e,n.h=t,n}Pt("<!DOCTYPE html>",0);var Ot=Pt("",0);Pt("<br>",0);var Rt,Dt,Nt=(Dt=!1,function(){return Dt||(Rt=function(){if("undefined"==typeof document)return!1;var e=document.createElement("div"),t=document.createElement("div");return t.appendChild(document.createElement("div")),e.appendChild(t),!!e.firstChild&&(t=e.firstChild.firstChild,e.innerHTML=xt(Ot),!t.parentElement)}(),Dt=!0),Rt});function Lt(e,t){t=t instanceof bt?t:St(t),e.assign(wt(t))}function jt(e,t){this.a=f(e)?e:0,this.g=f(t)?t:0}function Bt(e,t){this.width=e,this.height=t}function Ft(e){return e?new Qt(Kt(e)):A||(A=new Qt)}function Ut(e,t){var n=t||document;return n.querySelectorAll&&n.querySelector?n.querySelectorAll("."+e):zt(document,e,t)}function qt(e,t){var n=t||document;if(n.getElementsByClassName)e=n.getElementsByClassName(e)[0];else{n=document;var r=t||n;e=r.querySelectorAll&&r.querySelector&&e?r.querySelector(e?"."+e:""):zt(n,e,t)[0]||null}return e||null}function zt(e,t,n){var r;if((e=n||e).querySelectorAll&&e.querySelector&&t)return e.querySelectorAll(t?"."+t:"");if(t&&e.getElementsByClassName){var i=e.getElementsByClassName(t);return i}if(i=e.getElementsByTagName("*"),t){var o={};for(n=r=0;e=i[n];n++){var a=e.className;"function"==typeof a.split&&z(a.split(/\s+/),t)&&(o[r++]=e)}return o.length=r,o}return i}jt.prototype.toString=function(){return"("+this.a+", "+this.g+")"},jt.prototype.ceil=function(){return this.a=Math.ceil(this.a),this.g=Math.ceil(this.g),this},jt.prototype.floor=function(){return this.a=Math.floor(this.a),this.g=Math.floor(this.g),this},jt.prototype.round=function(){return this.a=Math.round(this.a),this.g=Math.round(this.g),this},(e=Bt.prototype).toString=function(){return"("+this.width+" x "+this.height+")"},e.aspectRatio=function(){return this.width/this.height},e.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},e.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},e.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};var Vt={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Wt(e){return e.scrollingElement?e.scrollingElement:(nt||"CSS1Compat"!=e.compatMode)&&e.body||e.documentElement}function Ht(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Kt(e){return 9==e.nodeType?e:e.ownerDocument||e.document}function Gt(e,t){if("textContent"in e)e.textContent=t;else if(3==e.nodeType)e.data=String(t);else if(e.firstChild&&3==e.firstChild.nodeType){for(;e.lastChild!=e.firstChild;)e.removeChild(e.lastChild);e.firstChild.data=String(t)}else{for(var n;n=e.firstChild;)e.removeChild(n);e.appendChild(Kt(e).createTextNode(String(t)))}}function Yt(e,t){return t?function(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}(e,(function(e){return!t||d(e.className)&&z(e.className.split(/\s+/),t)})):null}function Qt(e){this.a=e||h.document||document}Qt.prototype.N=function(){return d(void 0)?this.a.getElementById(void 0):void 0};var Jt={Gc:!0},Zt={Ic:!0},Xt={Fc:!0},$t={Hc:!0};function en(){throw Error("Do not instantiate directly")}function tn(e,t,n,r){if(e=e(t||rn,void 0,n),r=(r||Ft()).a.createElement("DIV"),(e=function(e){if(!k(e))return ie(String(e));if(e instanceof en){if(e.fa===Jt)return e.content;if(e.fa===$t)return ie(e.content)}return L("Soy template output is unsafe for use as HTML: "+e),"zSoyz"}(e)).match(nn),e=Pt(e,null),Nt())for(;r.lastChild;)r.removeChild(r.lastChild);return r.innerHTML=xt(e),1==r.childNodes.length&&(1==(e=r.firstChild).nodeType&&(r=e)),r}en.prototype.va=null,en.prototype.toString=function(){return this.content};var nn=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,rn={};function on(){en.call(this)}function an(e){return null!=e&&e.fa===Jt?e:e instanceof It?ln(xt(e).toString(),e.g()):ln(ie(String(String(e))),function(e){if(null!=e)switch(e.va){case 1:return 1;case-1:return-1;case 0:return 0}return null}(e))}function sn(){en.call(this)}function un(e,t){this.content=String(e),this.va=null!=t?t:null}function cn(e){return new un(e,void 0)}R(on,en),on.prototype.fa=Jt,R(sn,en),sn.prototype.fa=Zt,sn.prototype.va=1,R(un,en),un.prototype.fa=$t;var ln=function(e){function t(e){this.content=e}return t.prototype=e.prototype,function(e,n){return e=new t(String(e)),void 0!==n&&(e.va=n),e}}(on),hn=function(e){function t(e){this.content=e}return t.prototype=e.prototype,function(e){return new t(String(e))}}(sn);function fn(e){return(e=String(e))?new un(e,void 0):""}var dn=function(e){function t(e){this.content=e}return t.prototype=e.prototype,function(e,n){return(e=String(e))?(e=new t(e),void 0!==n&&(e.va=n),e):""}}(on);function pn(e){return null!=e&&e.fa===Jt?String(String(e.content).replace(Mn,"").replace(Tn,"&lt;")).replace(_n,yn):ie(String(e))}function mn(e){return null!=e&&e.fa===Zt?e=String(e).replace(kn,wn):e instanceof bt?e=String(wt(e).toString()).replace(kn,wn):(e=String(e),En.test(e)?e=e.replace(kn,wn):(L("Bad value `%s` for |filterNormalizeUri",[e]),e="#zSoyz")),e}function vn(e){return null!=e&&e.fa===Xt?e=e.content:null==e?e="":e instanceof Tt?e instanceof Tt&&e.constructor===Tt&&e.g===Ct?e=e.a:(L("expected object of type SafeStyle, got '"+e+"' of type "+y(e)),e="type_error:SafeStyle"):(e=String(e),Sn.test(e)||(L("Bad value `%s` for |filterCssValue",[e]),e="zSoyz")),e}var gn={"\0":"&#0;","\t":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","":"&#133;"," ":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function yn(e){return gn[e]}var bn={"\0":"%00","":"%01","":"%02","":"%03","":"%04","":"%05","":"%06","":"%07","\b":"%08","\t":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D","":"%0E","":"%0F","":"%10","":"%11","":"%12","":"%13","":"%14","":"%15","":"%16","":"%17","":"%18","":"%19","":"%1A","":"%1B","":"%1C","":"%1D","":"%1E","":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","":"%7F","":"%C2%85"," ":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","！":"%EF%BC%81","＃":"%EF%BC%83","＄":"%EF%BC%84","＆":"%EF%BC%86","＇":"%EF%BC%87","（":"%EF%BC%88","）":"%EF%BC%89","＊":"%EF%BC%8A","＋":"%EF%BC%8B","，":"%EF%BC%8C","／":"%EF%BC%8F","：":"%EF%BC%9A","；":"%EF%BC%9B","＝":"%EF%BC%9D","？":"%EF%BC%9F","＠":"%EF%BC%A0","［":"%EF%BC%BB","］":"%EF%BC%BD"};function wn(e){return bn[e]}var _n=/[\x00\x22\x27\x3c\x3e]/g,kn=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,Sn=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,En=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,Mn=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,Tn=/</g;function Cn(){return cn("Enter a valid phone number")}function In(){return cn("Unable to send password reset code to specified email")}function xn(){return cn("Something went wrong. Please try again.")}function An(){return cn("This email already exists without any means of sign-in. Please reset the password to recover.")}function Pn(e){var t="";switch((e=e||{}).code){case"invalid-argument":t+="Client specified an invalid argument.";break;case"invalid-configuration":t+="Client specified an invalid project configuration.";break;case"failed-precondition":t+="Request can not be executed in the current system state.";break;case"out-of-range":t+="Client specified an invalid range.";break;case"unauthenticated":t+="Request not authenticated due to missing, invalid, or expired OAuth token.";break;case"permission-denied":t+="Client does not have sufficient permission.";break;case"not-found":t+="Specified resource is not found.";break;case"aborted":t+="Concurrency conflict, such as read-modify-write conflict.";break;case"already-exists":t+="The resource that a client tried to create already exists.";break;case"resource-exhausted":t+="Either out of resource quota or reaching rate limiting.";break;case"cancelled":t+="Request cancelled by the client.";break;case"data-loss":t+="Unrecoverable data loss or data corruption.";break;case"unknown":t+="Unknown server error.";break;case"internal":t+="Internal server error.";break;case"not-implemented":t+="API method not implemented by the server.";break;case"unavailable":t+="Service unavailable.";break;case"deadline-exceeded":t+="Request deadline exceeded.";break;case"auth/user-disabled":t+="The user account has been disabled by an administrator.";break;case"auth/timeout":t+="The operation has timed out.";break;case"auth/too-many-requests":t+="We have blocked all requests from this device due to unusual activity. Try again later.";break;case"auth/quota-exceeded":t+="The quota for this operation has been exceeded. Try again later.";break;case"auth/network-request-failed":t+="A network error has occurred. Try again later.";break;case"restart-process":t+="An issue was encountered when authenticating your request. Please visit the URL that redirected you to this page again to restart the authentication process.";break;case"no-matching-tenant-for-email":t+="No sign-in provider is available for the given email, please try with a different email."}return cn(t)}function On(){return cn("Please login again to perform this operation")}function Rn(e,t,n){var r=Error.call(this);if(this.message=r.message,"stack"in r&&(this.stack=r.stack),this.code=Dn+e,!(e=t)){switch(e="",this.code){case"firebaseui/merge-conflict":e+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.";break;default:e+=xn()}e=cn(e).toString()}this.message=e||"",this.credential=n||null}s(Rn,Error),Rn.prototype.toJSON=function(){return{code:this.code,message:this.message}};var Dn="firebaseui/";function Nn(){0!=Ln&&(jn[this[S]||(this[S]=++E)]=this),this.T=this.T,this.C=this.C}var Ln=0,jn={};function Bn(e,t){e.T?f(void 0)?t.call(void 0):t():(e.C||(e.C=[]),e.C.push(f(void 0)?C(t,void 0):t))}function Fn(e){e&&"function"==typeof e.m&&e.m()}Nn.prototype.T=!1,Nn.prototype.m=function(){if(!this.T&&(this.T=!0,this.o(),0!=Ln)){var e=this[S]||(this[S]=++E);if(0!=Ln&&this.C&&0<this.C.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete jn[e]}},Nn.prototype.o=function(){if(this.C)for(;this.C.length;)this.C.shift()()};var Un=Object.freeze||function(e){return e},qn=!Xe||9<=Number(ct),zn=Xe&&!ht("9"),Vn=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{h.addEventListener("test",v,t),h.removeEventListener("test",v,t)}catch(e){}return e}();function Wn(e,t){this.type=e,this.g=this.target=t,this.h=!1,this.qb=!0}function Hn(e,t){if(Wn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.j=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(tt){e:{try{Qe(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.keyCode=e.keyCode||0,this.key=e.key||"",this.j=e.charCode||("keypress"==n?e.keyCode:0),this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=d(e.pointerType)?e.pointerType:Kn[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}Wn.prototype.stopPropagation=function(){this.h=!0},Wn.prototype.preventDefault=function(){this.qb=!1},R(Hn,Wn);var Kn=Un({2:"touch",3:"pen",4:"mouse"});Hn.prototype.stopPropagation=function(){Hn.K.stopPropagation.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},Hn.prototype.preventDefault=function(){Hn.K.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,zn)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}};var Gn="closure_listenable_"+(1e6*Math.random()|0),Yn=0;function Qn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.La=i,this.key=++Yn,this.sa=this.Ia=!1}function Jn(e){e.sa=!0,e.listener=null,e.proxy=null,e.src=null,e.La=null}function Zn(e){this.src=e,this.a={},this.g=0}function Xn(e,t){var n=t.type;n in e.a&&V(e.a[n],t)&&(Jn(t),0==e.a[n].length&&(delete e.a[n],e.g--))}function $n(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.sa&&o.listener==t&&o.capture==!!n&&o.La==r)return i}return-1}Zn.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.g++);var a=$n(e,t,r,i);return-1<a?(t=e[a],n||(t.Ia=!1)):((t=new Qn(t,this.src,o,!!r,i)).Ia=n,e.push(t)),t};var tr="closure_lm_"+(1e6*Math.random()|0),nr={};function rr(e,t,n,r,i){if(r&&r.once)return or(e,t,n,r,i);if(b(t)){for(var o=0;o<t.length;o++)rr(e,t[o],n,r,i);return null}return n=pr(n),e&&e[Gn]?e.J.add(String(t),n,!1,k(r)?!!r.capture:!!r,i):ir(e,t,n,!1,r,i)}function ir(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=k(i)?!!i.capture:!!i,s=fr(e);if(s||(e[tr]=s=new Zn(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=hr,t=qn?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Vn||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ur(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function or(e,t,n,r,i){if(b(t)){for(var o=0;o<t.length;o++)or(e,t[o],n,r,i);return null}return n=pr(n),e&&e[Gn]?e.J.add(String(t),n,!0,k(r)?!!r.capture:!!r,i):ir(e,t,n,!0,r,i)}function ar(e,t,n,r,i){if(b(t))for(var o=0;o<t.length;o++)ar(e,t[o],n,r,i);else r=k(r)?!!r.capture:!!r,n=pr(n),e&&e[Gn]?(e=e.J,(t=String(t).toString())in e.a&&(-1<(n=$n(o=e.a[t],n,r,i))&&(Jn(o[n]),W(o,n),0==o.length&&(delete e.a[t],e.g--)))):e&&(e=fr(e))&&(t=e.a[t.toString()],e=-1,t&&(e=$n(t,n,r,i)),(n=-1<e?t[e]:null)&&sr(n))}function sr(e){if("number"!=typeof e&&e&&!e.sa){var t=e.src;if(t&&t[Gn])Xn(t.J,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ur(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=fr(t))?(Xn(n,e),0==n.g&&(n.src=null,t[tr]=null)):Jn(e)}}}function ur(e){return e in nr?nr[e]:nr[e]="on"+e}function cr(e,t,n,r){var i=!0;if((e=fr(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.sa&&(o=lr(o,r),i=i&&!1!==o)}return i}function lr(e,t){var n=e.listener,r=e.La||e.src;return e.Ia&&sr(e),n.call(r,t)}function hr(e,t){if(e.sa)return!0;if(!qn){if(!t)e:{t=["window","event"];for(var n=h,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Hn(r=t,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.g;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;!t.h&&0<=i;i--){t.g=r[i];var o=cr(r[i],e,!0,t);n=n&&o}for(i=0;!t.h&&i<r.length;i++)t.g=r[i],o=cr(r[i],e,!1,t),n=n&&o}return n}return lr(e,new Hn(t,this))}function fr(e){return(e=e[tr])instanceof Zn?e:null}var dr="__closure_events_fn_"+(1e9*Math.random()>>>0);function pr(e){return _(e)?e:(e[dr]||(e[dr]=function(t){return e.handleEvent(t)}),e[dr])}function mr(){Nn.call(this),this.J=new Zn(this),this.wb=this,this.Ha=null}function vr(e,t){var n,r=e.Ha;if(r)for(n=[];r;r=r.Ha)n.push(r);if(e=e.wb,r=t.type||t,d(t))t=new Wn(t,e);else if(t instanceof Wn)t.target=t.target||e;else{var i=t;ue(t=new Wn(r,e),i)}if(i=!0,n)for(var o=n.length-1;!t.h&&0<=o;o--){var a=t.g=n[o];i=gr(a,r,!0,t)&&i}if(t.h||(i=gr(a=t.g=e,r,!0,t)&&i,t.h||(i=gr(a,r,!1,t)&&i)),n)for(o=0;!t.h&&o<n.length;o++)i=gr(a=t.g=n[o],r,!1,t)&&i;return i}function gr(e,t,n,r){if(!(t=e.J.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.sa&&a.capture==n){var s=a.listener,u=a.La||a.src;a.Ia&&Xn(e.J,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.qb}R(mr,Nn),mr.prototype[Gn]=!0,mr.prototype.Za=function(e){this.Ha=e},mr.prototype.removeEventListener=function(e,t,n,r){ar(this,e,t,n,r)},mr.prototype.o=function(){if(mr.K.o.call(this),this.J){var e,t=this.J;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)Jn(n[r]);delete t.a[e],t.g--}}this.Ha=null};var yr={},br=0;function wr(e,t){if(!e)throw Error("Event target element must be provided!");if(e=kr(e),yr[e]&&yr[e].length)for(var n=0;n<yr[e].length;n++)vr(yr[e][n],t)}function _r(e){var t=kr(e.N());yr[t]&&yr[t].length&&(function(e,t){e:{for(var n=e.length,r=d(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}0<=t&&W(e,t)}(yr[t],(function(t){return t==e})),yr[t].length||delete yr[t])}function kr(e){return void 0===e.a&&(e.a=br,br++),e.a}function Sr(e){if(!e)throw Error("Event target element must be provided!");mr.call(this),this.a=e}function Er(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function Mr(e,t){this.h=e,this.j=t,this.g=0,this.a=null}function Tr(e,t){e.j(t),100>e.g&&(e.g++,t.next=e.a,e.a=t)}function Cr(){this.g=this.a=null}s(Sr,mr),Sr.prototype.N=function(){return this.a},Sr.prototype.register=function(){var e=kr(this.N());yr[e]?z(yr[e],this)||yr[e].push(this):yr[e]=[this]},Mr.prototype.get=function(){if(0<this.g){this.g--;var e=this.a;this.a=e.next,e.next=null}else e=this.h();return e};var Ir,xr,Ar=new Mr((function(){return new Or}),(function(e){e.reset()}));function Pr(){var e=Lr,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.g=null),t.next=null),t}function Or(){this.next=this.g=this.a=null}function Rr(e){h.setTimeout((function(){throw e}),0)}function Dr(e,t){xr||function(){if(h.Promise&&h.Promise.resolve){var e=h.Promise.resolve(void 0);xr=function(){e.then(jr)}}else xr=function(){var e=jr;!_(h.setImmediate)||h.Window&&h.Window.prototype&&!Ge("Edge")&&h.Window.prototype.setImmediate==h.setImmediate?(Ir||(Ir=function(){var e=h.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Ge("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(""),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=C((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0!==e&&!Ge("Trident")&&!Ge("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(f(n.next)){var e=(n=n.next).gb;n.gb=null,e()}},function(e){r.next={gb:e},r=r.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){h.setTimeout(e,0)}}()),Ir(e)):h.setImmediate(e)}}(),Nr||(xr(),Nr=!0),Lr.add(e,t)}Cr.prototype.add=function(e,t){var n=Ar.get();n.set(e,t),this.g?this.g.next=n:this.a=n,this.g=n},Or.prototype.set=function(e,t){this.a=e,this.g=t,this.next=null},Or.prototype.reset=function(){this.next=this.g=this.a=null};var Nr=!1,Lr=new Cr;function jr(){for(var e;e=Pr();){try{e.a.call(e.g)}catch(e){Rr(e)}Tr(Ar,e)}Nr=!1}function Br(e){if(this.a=Fr,this.A=void 0,this.j=this.g=this.h=null,this.s=this.i=!1,e!=v)try{var t=this;e.call(void 0,(function(e){Jr(t,Ur,e)}),(function(e){if(!(e instanceof ni))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}Jr(t,qr,e)}))}catch(e){Jr(this,qr,e)}}var Fr=0,Ur=2,qr=3;function zr(){this.next=this.j=this.g=this.s=this.a=null,this.h=!1}zr.prototype.reset=function(){this.j=this.g=this.s=this.a=null,this.h=!1};var Vr=new Mr((function(){return new zr}),(function(e){e.reset()}));function Wr(e,t,n){var r=Vr.get();return r.s=e,r.g=t,r.j=n,r}function Hr(e){if(e instanceof Br)return e;var t=new Br(v);return Jr(t,Ur,e),t}function Kr(e){return new Br((function(t,n){n(e)}))}function Gr(e,t){if(e.a==Fr)if(e.h){var n=e.h;if(n.g){for(var r=0,i=null,o=null,a=n.g;a&&(a.h||(r++,a.a==e&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Fr&&1==r?Gr(n,t):(o?((r=o).next==n.j&&(n.j=r),r.next=r.next.next):Xr(n),$r(n,i,qr,t)))}e.h=null}else Jr(e,qr,t)}function Yr(e,t){e.g||e.a!=Ur&&e.a!=qr||Zr(e),e.j?e.j.next=t:e.g=t,e.j=t}function Qr(e,t,n,r){var i=Wr(null,null,null);return i.a=new Br((function(e,o){i.s=t?function(n){try{var i=t.call(r,n);e(i)}catch(e){o(e)}}:e,i.g=n?function(t){try{var i=n.call(r,t);!f(i)&&t instanceof ni?o(t):e(i)}catch(e){o(e)}}:o})),i.a.h=e,Yr(e,i),i.a}function Jr(e,t,n){if(e.a==Fr){e===n&&(t=qr,n=new TypeError("Promise cannot resolve to itself")),e.a=1;e:{var r=n,i=e.hc,o=e.ic;if(r instanceof Br){Yr(r,Wr(i||v,o||null,e));var a=!0}else if(Er(r))r.then(i,o,e),a=!0;else{if(k(r))try{var s=r.then;if(_(s)){!function(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}function a(e){s||(s=!0,n.call(i,e))}var s=!1;try{t.call(e,a,o)}catch(e){o(e)}}(r,s,i,o,e),a=!0;break e}}catch(t){o.call(e,t),a=!0;break e}a=!1}}a||(e.A=n,e.a=t,e.h=null,Zr(e),t!=qr||n instanceof ni||function(e,t){e.s=!0,Dr((function(){e.s&&ti.call(null,t)}))}(e,n))}}function Zr(e){e.i||(e.i=!0,Dr(e.Hb,e))}function Xr(e){var t=null;return e.g&&(t=e.g,e.g=t.next,t.next=null),e.g||(e.j=null),t}function $r(e,t,n,r){if(n==qr&&t.g&&!t.h)for(;e&&e.s;e=e.h)e.s=!1;if(t.a)t.a.h=null,ei(t,n,r);else try{t.h?t.s.call(t.j):ei(t,n,r)}catch(e){ti.call(null,e)}Tr(Vr,t)}function ei(e,t,n){t==Ur?e.s.call(e.j,n):e.g&&e.g.call(e.j,n)}Br.prototype.then=function(e,t,n){return Qr(this,_(e)?e:null,_(t)?t:null,n)},Br.prototype.$goog_Thenable=!0,(e=Br.prototype).fc=function(e,t){return(e=Wr(e,e,t)).h=!0,Yr(this,e),this},e.Ca=function(e,t){return Qr(this,null,e,t)},e.cancel=function(e){this.a==Fr&&Dr((function(){Gr(this,new ni(e))}),this)},e.hc=function(e){this.a=Fr,Jr(this,Ur,e)},e.ic=function(e){this.a=Fr,Jr(this,qr,e)},e.Hb=function(){for(var e;e=Xr(this);)$r(this,e,this.a,this.A);this.i=!1};var ti=Rr;function ni(e){D.call(this,e)}function ri(e,t,n){t||(t={}),n=n||window;var r=e instanceof bt?e:kt(void 0!==e.href?e.href:String(e));e=t.target||e.target;var i=[];for(o in t)switch(o){case"width":case"height":case"top":case"left":i.push(o+"="+t[o]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(o+"="+(t[o]?1:0))}var o=i.join(",");return(Ge("iPhone")&&!Ge("iPod")&&!Ge("iPad")||Ge("iPad")||Ge("iPod"))&&n.navigator&&n.navigator.standalone&&e&&"_self"!=e?(o=n.document.createElement("A"),r=r instanceof bt?r:St(r),o.href=wt(r),o.setAttribute("target",e),t.noreferrer&&o.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,n,1),o.dispatchEvent(t),n={}):t.noreferrer?(n=n.open("",e,o),t=wt(r).toString(),n&&(et&&-1!=t.indexOf(";")&&(t="'"+t.replace(/'/g,"%27")+"'"),n.opener=null,t=Pt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+ie(t)+'">',null),n.document.write(xt(t)),n.document.close())):(n=n.open(wt(r).toString(),e,o))&&t.noopener&&(n.opener=null),n}function ii(){try{return!(!window.opener||!window.opener.location||window.opener.location.hostname!==window.location.hostname||window.opener.location.protocol!==window.location.protocol)}catch(e){}return!1}function oi(e){ri(e,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}function ai(e,t){if(null==(e=k(e)&&1==e.nodeType?e:document.querySelector(String(e))))throw Error(t||"Cannot find element.");return e}function si(){return window.location.href}function ui(e){var t=bi;this.s=[],this.T=t,this.O=e||null,this.j=this.a=!1,this.h=void 0,this.J=this.l=this.A=!1,this.i=0,this.g=null,this.C=0}function ci(e,t,n){e.a=!0,e.h=n,e.j=!t,di(e)}function li(e){if(e.a){if(!e.J)throw new pi(e);e.J=!1}}function hi(e,t,n){e.s.push([t,n,void 0]),e.a&&di(e)}function fi(e){return q(e.s,(function(e){return _(e[1])}))}function di(e){if(e.i&&e.a&&fi(e)){var t=e.i,n=gi[t];n&&(h.clearTimeout(n.a),delete gi[t]),e.i=0}e.g&&(e.g.C--,delete e.g),t=e.h;for(var r=n=!1;e.s.length&&!e.A;){var i=e.s.shift(),o=i[0],a=i[1];if(i=i[2],o=e.j?a:o)try{var s=o.call(i||e.O,t);f(s)&&(e.j=e.j&&(s==t||s instanceof Error),e.h=t=s),(Er(t)||"function"==typeof h.Promise&&t instanceof h.Promise)&&(r=!0,e.A=!0)}catch(r){t=r,e.j=!0,fi(e)||(n=!0)}}e.h=t,r&&(s=C(e.L,e,!0),r=C(e.L,e,!1),t instanceof ui?(hi(t,s,r),t.l=!0):t.then(s,r)),n&&(t=new vi(t),gi[t.a]=t,e.i=t.a)}function pi(){D.call(this)}function mi(){D.call(this)}function vi(e){this.a=h.setTimeout(C(this.h,this),0),this.g=e}R(ni,D),ni.prototype.name="cancel",ui.prototype.cancel=function(e){if(this.a)this.h instanceof ui&&this.h.cancel();else{if(this.g){var t=this.g;delete this.g,e?t.cancel(e):(t.C--,0>=t.C&&t.cancel())}this.T?this.T.call(this.O,this):this.J=!0,this.a||(e=new mi(this),li(this),ci(this,!1,e))}},ui.prototype.L=function(e,t){this.A=!1,ci(this,e,t)},ui.prototype.callback=function(e){li(this),ci(this,!0,e)},ui.prototype.then=function(e,t,n){var r,i,o=new Br((function(e,t){r=e,i=t}));return hi(this,r,(function(e){e instanceof mi?o.cancel():i(e)})),o.then(e,t,n)},ui.prototype.$goog_Thenable=!0,R(pi,D),pi.prototype.message="Deferred has already fired",pi.prototype.name="AlreadyCalledError",R(mi,D),mi.prototype.message="Deferred was canceled",mi.prototype.name="CanceledError",vi.prototype.h=function(){throw delete gi[this.a],this.g};var gi={};function yi(e){var t={},n=t.document||document,r=gt(e).toString(),i=document.createElement("SCRIPT"),o={rb:i,sb:void 0},a=new ui(o),s=null,u=null!=t.timeout?t.timeout:5e3;return 0<u&&(s=window.setTimeout((function(){wi(i,!0);var e=new Si(ki,"Timeout reached for loading script "+r);li(a),ci(a,!1,e)}),u),o.sb=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(wi(i,t.yc||!1,s),a.callback(null))},i.onerror=function(){wi(i,!0,s);var e=new Si(_i,"Error while loading script "+r);li(a),ci(a,!1,e)},ue(o=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),function(e,t){oe(t,(function(t,n){t&&"object"==typeof t&&t.ma&&(t=t.ka()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:Vt.hasOwnProperty(n)?e.setAttribute(Vt[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}(i,o),function(e,t){e.src=gt(t),null===m&&(m=(t=(t=h.document).querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&p.test(t)?t:""),(t=m)&&e.setAttribute("nonce",t)}(i,e),function(e){var t=(e||document).getElementsByTagName("HEAD");return t&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),a}function bi(){if(this&&this.rb){var e=this.rb;e&&"SCRIPT"==e.tagName&&wi(e,!0,this.sb)}}function wi(e,t,n){null!=n&&h.clearTimeout(n),e.onload=v,e.onerror=v,e.onreadystatechange=v,t&&window.setTimeout((function(){Ht(e)}),0)}var _i=0,ki=1;function Si(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),D.call(this,n),this.code=e}function Ei(){return h.google&&h.google.accounts&&h.google.accounts.id||null}function Mi(e){this.a=e||Ei(),this.h=!1,this.g=null}function Ti(e,t,n){return e.a&&t?(e.h=!0,new Br((function(r){e.g=r,e.a.initialize({client_id:t,callback:r,auto_select:!n}),e.a.prompt()}))):Hr(t?Ii.Xa().load().then((function(){return e.a=Ei(),Ti(e,t,n)})).Ca((function(){return null})):null)}R(Si,D),Mi.prototype.cancel=function(){this.a&&this.h&&(this.g&&this.g(null),this.a.cancel())},g(Mi);var Ci=new dt(mt,"https://accounts.google.com/gsi/client");function Ii(){this.a=null}function xi(e,t){this.a=e,this.g=t||function(e){throw e}}function Ai(e,t,n){this.reset(e,t,n,void 0,void 0)}Ii.prototype.load=function(){var e=this;if(this.a)return this.a;var t=function(){var e=Ci;e instanceof dt&&e.constructor===dt&&e.g===pt?e=e.a:(L("expected object of type Const, got '"+e+"'"),e="type_error:Const");var t=new vt;return t.a=e,t}();return Ei()?Hr():this.a=function(){var e=null;return new Br((function(t){"complete"==h.document.readyState?t():(e=function(){t()},or(window,"load",e))})).Ca((function(t){throw ar(window,"load",e),t}))}().then((function(){if(!Ei())return new Br((function(n,r){var i=setTimeout((function(){e.a=null,r(Error("Network error!"))}),1e4);h.onGoogleLibraryLoad=function(){clearTimeout(i),n()},Hr(yi(t)).then((function(){Ei()&&n()})).Ca((function(t){clearTimeout(i),e.a=null,r(t)}))}))}))},g(Ii),xi.prototype.confirm=function(e){return Hr(this.a.confirm(e)).Ca(this.g)},Ai.prototype.a=null;function Pi(e){this.s=e,this.a=this.h=this.j=this.g=null}function Oi(e,t){this.name=e,this.value=t}Ai.prototype.reset=function(e,t,n,r,i){"number"==typeof i||0,this.h=r||P(),this.j=e,this.s=t,this.g=n,delete this.a},Oi.prototype.toString=function(){return this.name};var Ri=new Oi("SEVERE",1e3),Di=new Oi("WARNING",900),Ni=new Oi("CONFIG",700);function Li(e){return e.j?e.j:e.g?Li(e.g):(L("Root logger has no level set."),null)}Pi.prototype.log=function(e,t,n){if(e.value>=Li(this).value)for(_(t)&&(t=t()),e=new Ai(e,String(t),this.s),n&&(e.a=n),n=this;n;){var r=n,i=e;if(r.a)for(var o=0;t=r.a[o];o++)t(i);n=n.g}};var ji={},Bi=null;function Fi(){Bi||(Bi=new Pi(""),ji[""]=Bi,Bi.j=Ni)}function Ui(){this.a=P()}var qi=null;function zi(e){this.j=e||"",qi||(qi=new Ui),this.s=qi}function Vi(e){return 10>e?"0"+e:String(e)}function Wi(e){zi.call(this,e)}function Hi(){this.s=C(this.h,this),this.a=new Wi,this.a.g=!1,this.a.h=!1,this.g=this.a.a=!1,this.j={}}Ui.prototype.set=function(e){this.a=e},Ui.prototype.reset=function(){this.set(P())},Ui.prototype.get=function(){return this.a},zi.prototype.a=!0,zi.prototype.g=!0,zi.prototype.h=!1,R(Wi,zi),Hi.prototype.h=function(e){if(!this.j[e.g]){var t=function(e,t){var n=[];if(n.push(e.j," "),e.g){var r=new Date(t.h);n.push("[",Vi(r.getFullYear()-2e3)+Vi(r.getMonth()+1)+Vi(r.getDate())+" "+Vi(r.getHours())+":"+Vi(r.getMinutes())+":"+Vi(r.getSeconds())+"."+Vi(Math.floor(r.getMilliseconds()/10)),"] ")}return n.push("[",function(e,t){t=(e=(e.h-t)/1e3).toFixed(3);var n=0;if(1>e)n=2;else for(;100>e;)n++,e*=10;for(;0<n--;)t=" "+t;return t}(t,e.s.get()),"s] "),n.push("[",t.g,"] "),n.push(t.s),e.h&&(t=t.a)&&n.push("\n",t instanceof Error?t.message:t.toString()),e.a&&n.push("\n"),n.join("")}(this.a,e);if(Gi)!function(e,t,n,r){e[t]?e[t](n,r||""):e.log(n,r||"")}(Gi,function(e){if(e){if(e.value>=Ri.value)return"error";if(e.value>=Di.value)return"warn";if(e.value>=Ni.value)return"log"}return"debug"}(e.j),t,e.a)}};var Ki,Gi=h.console;function Yi(e,t){Ki&&Ki.log(Ri,e,t)}Ki=function e(t){var n;if(Fi(),!(n=ji[t])){n=new Pi(t);var r=t.lastIndexOf("."),i=t.substr(r+1);(r=e(t.substr(0,r))).h||(r.h={}),r.h[i]=n,n.g=r,ji[t]=n}return n}("firebaseui");var Qi=new Hi;if(1!=Qi.g){var Ji;Fi(),Ji=Bi;var Zi=Qi.s;Ji.a||(Ji.a=[]),Ji.a.push(Zi),Qi.g=!0}function Xi(e){Ki&&Ki.log(Di,e,void 0)}function $i(){this.a=("undefined"==typeof document?null:document)||{cookie:""}}function eo(e){e=(e.a.cookie||"").split(";");for(var t,n,r=[],i=[],o=0;o<e.length;o++)-1==(t=(n=Q(e[o])).indexOf("="))?(r.push(""),i.push(n)):(r.push(n.substring(0,t)),i.push(n.substring(t+1)));return{keys:r,values:i}}(e=$i.prototype).set=function(e,t,n,r,i,o){if(/[;=\s]/.test(e))throw Error('Invalid cookie name "'+e+'"');if(/[;\r\n]/.test(t))throw Error('Invalid cookie value "'+t+'"');f(n)||(n=-1),i=i?";domain="+i:"",r=r?";path="+r:"",o=o?";secure":"",n=0>n?"":0==n?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(P()+1e3*n).toUTCString(),this.a.cookie=e+"="+t+i+r+n+o},e.get=function(e,t){for(var n,r=e+"=",i=(this.a.cookie||"").split(";"),o=0;o<i.length;o++){if(0==(n=Q(i[o])).lastIndexOf(r,0))return n.substr(r.length);if(n==e)return""}return t},e.ja=function(){return eo(this).keys},e.la=function(){return eo(this).values},e.clear=function(){for(var e=eo(this).keys,t=e.length-1;0<=t;t--){var n=e[t];this.get(n),this.set(n,"",0,void 0,void 0)}};var to=new $i;function no(){}function ro(e,t,n,r){this.h=null!=e?e:-1,this.g=t||null,this.a=n||null,this.j=!!r}function io(e,t){this.g=e,this.a=t||null}function oo(e){return{email:e.g,credential:e.a&&e.a.toJSON()}}function ao(e){if(e&&e.email){var t=e.credential&&er.auth.AuthCredential.fromJSON(e.credential);return new io(e.email,t)}return null}function so(e){this.a=e||null}function uo(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);255<i&&(t[n++]=255&i,i>>=8),t[n++]=i}return t}function co(e){return U(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}function lo(e){for(this.i=e,this.g=this.i.length/4,this.j=this.g+6,this.h=[[],[],[],[]],this.s=[[],[],[],[]],this.a=Array(ho*(this.j+1)),e=0;e<this.g;e++)this.a[e]=[this.i[4*e],this.i[4*e+1],this.i[4*e+2],this.i[4*e+3]];var t=Array(4);for(e=this.g;e<ho*(this.j+1);e++){if(t[0]=this.a[e-1][0],t[1]=this.a[e-1][1],t[2]=this.a[e-1][2],t[3]=this.a[e-1][3],0==e%this.g){var n=t,r=n[0];n[0]=n[1],n[1]=n[2],n[2]=n[3],n[3]=r,bo(t),t[0]^=ko[e/this.g][0],t[1]^=ko[e/this.g][1],t[2]^=ko[e/this.g][2],t[3]^=ko[e/this.g][3]}else 6<this.g&&4==e%this.g&&bo(t);this.a[e]=Array(4),this.a[e][0]=this.a[e-this.g][0]^t[0],this.a[e][1]=this.a[e-this.g][1]^t[1],this.a[e][2]=this.a[e-this.g][2]^t[2],this.a[e][3]=this.a[e-this.g][3]^t[3]}}s(ro,no),ro.prototype.set=function(e,t){to.set(e,t,this.h,this.g,this.a,this.j)},ro.prototype.get=function(e){return to.get(e)||null},ro.prototype.ra=function(e){var t=this.g,n=this.a;to.get(e),to.set(e,"",0,t,n)},lo.prototype.A=16;var ho=lo.prototype.A/4;function fo(e,t){for(var n,r=0;r<ho;r++)for(var i=0;4>i;i++)n=t[n=4*i+r],e.h[r][i]=n}function po(e){for(var t=[],n=0;n<ho;n++)for(var r=0;4>r;r++)t[4*r+n]=e.h[n][r];return t}function mo(e,t){for(var n=0;4>n;n++)for(var r=0;4>r;r++)e.h[n][r]^=e.a[4*t+r][n]}function vo(e,t){for(var n=0;4>n;n++)for(var r=0;4>r;r++)e.h[n][r]=t[e.h[n][r]]}function go(e){for(var t=1;4>t;t++)for(var n=0;4>n;n++)e.s[t][n]=e.h[t][n];for(t=1;4>t;t++)for(n=0;4>n;n++)e.h[t][n]=e.s[t][(n+t)%ho]}function yo(e){for(var t=1;4>t;t++)for(var n=0;4>n;n++)e.s[t][(n+t)%ho]=e.h[t][n];for(t=1;4>t;t++)for(n=0;4>n;n++)e.h[t][n]=e.s[t][n]}function bo(e){e[0]=wo[e[0]],e[1]=wo[e[1]],e[2]=wo[e[2]],e[3]=wo[e[3]]}var wo=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],_o=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],ko=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],So=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],Eo=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],Mo=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],To=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],Co=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],Io=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141];function xo(e,t){e=new lo(Po(e));for(var n,r=(t=uo(t)).splice(0,16),i="";r.length;){n=16-r.length;for(var o=0;o<n;o++)r.push(0);for(fo(n=e,r),mo(n,0),r=1;r<n.j;++r){vo(n,wo),go(n),o=n.h;for(var a=n.s[0],s=0;4>s;s++)a[0]=o[0][s],a[1]=o[1][s],a[2]=o[2][s],a[3]=o[3][s],o[0][s]=So[a[0]]^Eo[a[1]]^a[2]^a[3],o[1][s]=a[0]^So[a[1]]^Eo[a[2]]^a[3],o[2][s]=a[0]^a[1]^So[a[2]]^Eo[a[3]],o[3][s]=Eo[a[0]]^a[1]^a[2]^So[a[3]];mo(n,r)}vo(n,wo),go(n),mo(n,n.j),i+=co(po(n)),r=t.splice(0,16)}return i}function Ao(e,t){e=new lo(Po(e));for(var n=[],r=0;r<t.length;r+=2)n.push(parseInt(t.substring(r,r+2),16));var i=n.splice(0,16);for(t="";i.length;){for(fo(r=e,i),mo(r,r.j),i=1;i<r.j;++i){yo(r),vo(r,_o),mo(r,r.j-i);for(var o=r.h,a=r.s[0],s=0;4>s;s++)a[0]=o[0][s],a[1]=o[1][s],a[2]=o[2][s],a[3]=o[3][s],o[0][s]=Io[a[0]]^To[a[1]]^Co[a[2]]^Mo[a[3]],o[1][s]=Mo[a[0]]^Io[a[1]]^To[a[2]]^Co[a[3]],o[2][s]=Co[a[0]]^Mo[a[1]]^Io[a[2]]^To[a[3]],o[3][s]=To[a[0]]^Co[a[1]]^Mo[a[2]]^Io[a[3]]}if(yo(r),vo(r,_o),mo(r,0),8192>=(r=po(r)).length)r=String.fromCharCode.apply(null,r);else{for(i="",o=0;o<r.length;o+=8192)i+=String.fromCharCode.apply(null,Y(r,o,o+8192));r=i}t+=r,i=n.splice(0,16)}return t.replace(/(\x00)+$/,"")}function Po(e){for(var t=32-(e=uo(e.substring(0,32))).length,n=0;n<t;n++)e.push(0);return e}function Oo(e){var t=[];return Do(new Ro,e,t),t.join("")}function Ro(){}function Do(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(b(t)){var r=t;t=r.length,n.push("[");for(var i="",o=0;o<t;o++)n.push(i),Do(e,r[o],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(r in n.push("{"),i="",t)Object.prototype.hasOwnProperty.call(t,r)&&("function"!=typeof(o=t[r])&&(n.push(i),jo(r,n),n.push(":"),Do(e,o,n),i=","));return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":jo(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}var No={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Lo=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function jo(e,t){t.push('"',e.replace(Lo,(function(e){var t=No[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),No[e]=t),t})),'"')}function Bo(e){this.a=e}function Fo(){}function Uo(e){this.a=e}function qo(e){if(!e.a)return!1;try{return e.a.setItem("__sak","1"),e.a.removeItem("__sak"),!0}catch(e){return!1}}function zo(){var e=null;try{e=window.localStorage||null}catch(e){}this.a=e}function Vo(){var e=null;try{e=window.sessionStorage||null}catch(e){}this.a=e}function Wo(e,t){this.g=e,this.a=t+"::"}Bo.prototype.set=function(e,t){f(t)?this.a.set(e,Oo(t)):this.a.ra(e)},Bo.prototype.get=function(e){try{var t=this.a.get(e)}catch(e){return}if(null!==t)try{return JSON.parse(t)}catch(e){throw"Storage: Invalid value was encountered"}},R(Fo,no),Fo.prototype.clear=function(){var e=fe(this.ha(!0)),t=this;B(e,(function(e){t.ra(e)}))},R(Uo,Fo),(e=Uo.prototype).set=function(e,t){try{this.a.setItem(e,t)}catch(e){if(0==this.a.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded"}},e.get=function(e){if(!d(e=this.a.getItem(e))&&null!==e)throw"Storage mechanism: Invalid value was encountered";return e},e.ra=function(e){this.a.removeItem(e)},e.ha=function(e){var t=0,n=this.a,r=new le;return r.next=function(){if(t>=n.length)throw ce;var r=n.key(t++);if(e)return r;if(!d(r=n.getItem(r)))throw"Storage mechanism: Invalid value was encountered";return r},r},e.clear=function(){this.a.clear()},e.key=function(e){return this.a.key(e)},R(zo,Uo),R(Vo,Uo),R(Wo,Fo),Wo.prototype.set=function(e,t){this.g.set(this.a+e,t)},Wo.prototype.get=function(e){return this.g.get(this.a+e)},Wo.prototype.ra=function(e){this.g.ra(this.a+e)},Wo.prototype.ha=function(e){var t=this.g.ha(!0),n=this,r=new le;return r.next=function(){for(var r=t.next();r.substr(0,n.a.length)!=n.a;)r=t.next();return e?r.substr(n.a.length):n.g.get(r)},r},qo(new zo);var Ho=new Vo,Ko=new Bo(qo(Ho)?new Wo(Ho,"firebaseui"):null),Go={name:"pendingEmailCredential",storage:Ko},Yo={name:"redirectStatus",storage:Ko},Qo={name:"redirectUrl",storage:Ko},Jo={name:"emailForSignIn",storage:new Bo(new ro(3600,"/"))},Zo={name:"pendingEncryptedCredential",storage:new Bo(new ro(3600,"/"))};function Xo(e,t){return e.storage.get(t?e.name+":"+t:e.name)}function $o(e,t){e.storage.a.ra(t?e.name+":"+t:e.name)}function ea(e,t,n){e.storage.set(n?e.name+":"+n:e.name,t)}function ta(e){return Xo(Qo,e)||null}function na(e){return ao(e=Xo(Go,e)||null)}function ra(e){$o(Go,e)}function ia(e,t){ea(Go,oo(e),t)}function oa(e){return(e=Xo(Yo,e)||null)&&void 0!==e.tenantId?new so(e.tenantId):null}function aa(){this.W={}}function sa(e,t,n){if(t.toLowerCase()in e.W)throw Error("Configuration "+t+" has already been defined.");e.W[t.toLowerCase()]=n}function ua(e,t,n){if(!(t.toLowerCase()in e.W))throw Error("Configuration "+t+" is not defined.");e.W[t.toLowerCase()]=n}function ca(e,t){if(!(e=e.get(t)))throw Error("Configuration "+t+" is required.");return e}function la(){this.g=void 0,this.a={}}function ha(e,t,n,r){for(var i=0;i<t.length;i++){var o=t.charAt(i);e.a[o]||(e.a[o]=new la),e=e.a[o]}if(r&&void 0!==e.g)throw Error('The collection already contains the key "'+t+'"');e.g=n}function fa(e,t){for(var n in void 0!==e.g&&t.push(e.g),e.a)fa(e.a[n],t)}function da(e,t,n){for(var r in void 0!==e.g&&n.push(t),e.a)da(e.a[r],t+r,n)}function pa(e){for(this.a=e,this.g=new la,e=0;e<this.a.length;e++){var t=this.g.get("+"+this.a[e].b);t?t.push(this.a[e]):this.g.add("+"+this.a[e].b,[this.a[e]])}}function ma(e,t){var n={},r=0;for(void 0!==(e=e.g).g&&(n[r]=e.g);r<t.length;r++){var i=t.charAt(r);if(!(i in e.a))break;void 0!==(e=e.a[i]).g&&(n[r]=e.g)}for(var o in n)if(n.hasOwnProperty(o))return n[o];return[]}function va(e){for(var t=0;t<wa.length;t++)if(wa[t].c===e)return wa[t];return null}function ga(e){e=e.toUpperCase();for(var t=[],n=0;n<wa.length;n++)wa[n].f===e&&t.push(wa[n]);return t}function ya(e){if(0<e.length&&"+"==e.charAt(0)){e=e.substring(1);for(var t=[],n=0;n<wa.length;n++)wa[n].b==e&&t.push(wa[n]);e=t}else e=ga(e);return e}function ba(e){e.sort((function(e,t){return e.name.localeCompare(t.name,"en")}))}aa.prototype.get=function(e){if(!(e.toLowerCase()in this.W))throw Error("Configuration "+e+" is not defined.");return this.W[e.toLowerCase()]},(e=la.prototype).set=function(e,t){ha(this,e,t,!1)},e.add=function(e,t){ha(this,e,t,!0)},e.get=function(e){e:{for(var t=this,n=0;n<e.length;n++)if(!(t=t.a[e.charAt(n)])){e=void 0;break e}e=t}return e?e.g:void 0},e.la=function(){var e=[];return fa(this,e),e},e.ja=function(){var e=[];return da(this,"",e),e},e.clear=function(){this.a={},this.g=void 0};var wa=[{name:"Afghanistan",c:"93-AF-0",b:"93",f:"AF"},{name:"Åland Islands",c:"358-AX-0",b:"358",f:"AX"},{name:"Albania",c:"355-AL-0",b:"355",f:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",f:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",f:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",f:"AD"},{name:"Angola",c:"244-AO-0",b:"244",f:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",f:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",f:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",f:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",f:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",f:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",f:"AC"},{name:"Australia",c:"61-AU-0",b:"61",f:"AU"},{name:"Austria",c:"43-AT-0",b:"43",f:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",f:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",f:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",f:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",f:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",f:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",f:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",f:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",f:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",f:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",f:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",f:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",f:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",f:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",f:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",f:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",f:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",f:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",f:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",f:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",f:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",f:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",f:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",f:"CM"},{name:"Canada",c:"1-CA-0",b:"1",f:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",f:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",f:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",f:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",f:"CF"},{name:"Chad",c:"235-TD-0",b:"235",f:"TD"},{name:"Chile",c:"56-CL-0",b:"56",f:"CL"},{name:"China",c:"86-CN-0",b:"86",f:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",f:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",f:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",f:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",f:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",f:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",f:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",f:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",f:"CR"},{name:"Côte d'Ivoire",c:"225-CI-0",b:"225",f:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",f:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",f:"CU"},{name:"Curaçao",c:"599-CW-0",b:"599",f:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",f:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",f:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",f:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",f:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",f:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",f:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",f:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",f:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",f:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",f:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",f:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",f:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",f:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",f:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",f:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",f:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",f:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",f:"FI"},{name:"France",c:"33-FR-0",b:"33",f:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",f:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",f:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",f:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",f:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",f:"GE"},{name:"Germany",c:"49-DE-0",b:"49",f:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",f:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",f:"GI"},{name:"Greece",c:"30-GR-0",b:"30",f:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",f:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",f:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",f:"GP"},{name:"Guam",c:"1-GU-0",b:"1",f:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",f:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",f:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",f:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",f:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",f:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",f:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",f:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",f:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",f:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",f:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",f:"IS"},{name:"India",c:"91-IN-0",b:"91",f:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",f:"ID"},{name:"Iran",c:"98-IR-0",b:"98",f:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",f:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",f:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",f:"IM"},{name:"Israel",c:"972-IL-0",b:"972",f:"IL"},{name:"Italy",c:"39-IT-0",b:"39",f:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",f:"JM"},{name:"Japan",c:"81-JP-0",b:"81",f:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",f:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",f:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",f:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",f:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",f:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",f:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",f:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",f:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",f:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",f:"KG"},{name:"Laos",c:"856-LA-0",b:"856",f:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",f:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",f:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",f:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",f:"LR"},{name:"Libya",c:"218-LY-0",b:"218",f:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",f:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",f:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",f:"LU"},{name:"Macau",c:"853-MO-0",b:"853",f:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",f:"MK"},{name:"Madagascar",c:"261-MG-0",b:"261",f:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",f:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",f:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",f:"MV"},{name:"Mali",c:"223-ML-0",b:"223",f:"ML"},{name:"Malta",c:"356-MT-0",b:"356",f:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",f:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",f:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",f:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",f:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",f:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",f:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",f:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",f:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",f:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",f:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",f:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",f:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",f:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",f:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",f:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",f:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",f:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",f:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",f:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",f:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",f:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",f:"NI"},{name:"Niger",c:"227-NE-0",b:"227",f:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",f:"NG"},{name:"Niue",c:"683-NU-0",b:"683",f:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",f:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",f:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",f:"MP"},{name:"Norway",c:"47-NO-0",b:"47",f:"NO"},{name:"Oman",c:"968-OM-0",b:"968",f:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",f:"PK"},{name:"Palau",c:"680-PW-0",b:"680",f:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",f:"PS"},{name:"Panama",c:"507-PA-0",b:"507",f:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",f:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",f:"PY"},{name:"Peru",c:"51-PE-0",b:"51",f:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",f:"PH"},{name:"Poland",c:"48-PL-0",b:"48",f:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",f:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",f:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",f:"QA"},{name:"Réunion",c:"262-RE-0",b:"262",f:"RE"},{name:"Romania",c:"40-RO-0",b:"40",f:"RO"},{name:"Russia",c:"7-RU-0",b:"7",f:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",f:"RW"},{name:"Saint Barthélemy",c:"590-BL-0",b:"590",f:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",f:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",f:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",f:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",f:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",f:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",f:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",f:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",f:"SM"},{name:"São Tomé and Príncipe",c:"239-ST-0",b:"239",f:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",f:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",f:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",f:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",f:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",f:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",f:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",f:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",f:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",f:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",f:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",f:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",f:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",f:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",f:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",f:"SS"},{name:"Spain",c:"34-ES-0",b:"34",f:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",f:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",f:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",f:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",f:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",f:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",f:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",f:"CH"},{name:"Syria",c:"963-SY-0",b:"963",f:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",f:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",f:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",f:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",f:"TH"},{name:"Togo",c:"228-TG-0",b:"228",f:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",f:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",f:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",f:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",f:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",f:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",f:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",f:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",f:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",f:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",f:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",f:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",f:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",f:"GB"},{name:"United States",c:"1-US-0",b:"1",f:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",f:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",f:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",f:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",f:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",f:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",f:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",f:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",f:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",f:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",f:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",f:"ZW"}];ba(wa);var _a=new pa(wa);function ka(e,t){this.a=e,this.Aa=t}function Sa(e){e=Q(e);var t=ma(_a,e);return 0<t.length?new ka("1"==t[0].b?"1-US-0":t[0].c,Q(e.substr(t[0].b.length+1))):null}function Ea(e){var t=va(e.a);if(!t)throw Error("Country ID "+e.a+" not found.");return"+"+t.b+e.Aa}function Ma(e,t){for(var n=0;n<e.length;n++)if(!z(Ta,e[n])&&(null!==Ca&&e[n]in Ca||z(t,e[n])))return e[n];return null}var Ta=["emailLink","password","phone"],Ca={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"};function Ia(){this.a=new aa,sa(this.a,"acUiConfig"),sa(this.a,"autoUpgradeAnonymousUsers"),sa(this.a,"callbacks"),sa(this.a,"credentialHelper",is),sa(this.a,"immediateFederatedRedirect",!1),sa(this.a,"popupMode",!1),sa(this.a,"privacyPolicyUrl"),sa(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl"),sa(this.a,"queryParameterForWidgetMode","mode"),sa(this.a,"signInFlow"),sa(this.a,"signInOptions"),sa(this.a,"signInSuccessUrl"),sa(this.a,"siteName"),sa(this.a,"tosUrl"),sa(this.a,"widgetUrl"),sa(this.a,"adminRestrictedOperation")}function xa(e){var t=!!e.a.get("autoUpgradeAnonymousUsers");return t&&!Ja(e)&&Yi('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0),t}function Aa(e){e=e.a.get("signInOptions")||[];for(var t=[],n=0;n<e.length;n++){var r=e[n];(r=k(r)?r:{provider:r}).provider&&t.push(r)}return t}function Pa(e,t){e=Aa(e);for(var n=0;n<e.length;n++)if(e[n].provider===t)return e[n];return null}function Oa(e){return Aa(e).map((function(e){return e.provider}))}function Ra(e,t){e=Da(e);for(var n=0;n<e.length;n++)if(e[n].providerId===t)return e[n];return null}function Da(e){return Aa(e).map((function(e){if(Ca[e.provider]||z(cs,e.provider)){for(var t in e={providerId:e.provider,S:e.providerName||null,V:e.fullLabel||null,ta:e.buttonColor||null,za:e.iconUrl?wt(kt(e.iconUrl)).toString():null})null===e[t]&&delete e[t];return e}return{providerId:e.provider,S:e.providerName||null,V:e.fullLabel||null,ta:e.buttonColor||null,za:e.iconUrl?wt(kt(e.iconUrl)).toString():null,Ob:e.loginHintKey||null}}))}function Na(e){var t=Pa(e,er.auth.GoogleAuthProvider.PROVIDER_ID);return t&&t.clientId&&function(e){if("http:"!==(window.location&&window.location.protocol)&&"https:"!==(window.location&&window.location.protocol))return is;if((e=e.a.get("credentialHelper"))===ns)return is;for(var t in os)if(os[t]===e)return os[t];return is}(e)===rs&&t.clientId||null}function La(e){return!!((e=Pa(e,er.auth.EmailAuthProvider.PROVIDER_ID))&&e.disableSignUp&&e.disableSignUp.status)}function ja(e){return!(!(e=e.a.get("adminRestrictedOperation")||null)||!e.status)}function Ba(e,t){return e=(e=Pa(e,t))&&e.scopes,Array.isArray(e)?e:[]}function Fa(e,t){return k(e=(e=Pa(e,t))&&e.customParameters)?(e=ae(e),t===er.auth.GoogleAuthProvider.PROVIDER_ID&&delete e.login_hint,t===er.auth.GithubAuthProvider.PROVIDER_ID&&delete e.login,e):null}function Ua(e){if(!(e=Pa(e,er.auth.PhoneAuthProvider.PROVIDER_ID)))return null;var t=e.whitelistedCountries,n=e.blacklistedCountries;if(void 0!==t&&(!Array.isArray(t)||0==t.length))throw Error("WhitelistedCountries must be a non-empty array.");if(void 0!==n&&!Array.isArray(n))throw Error("BlacklistedCountries must be an array.");if(t&&n)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!t&&!n)return wa;if(e=[],t){n={};for(var r=0;r<t.length;r++)for(var i=ya(t[r]),o=0;o<i.length;o++)n[i[o].c]=i[o];for(var a in n)n.hasOwnProperty(a)&&e.push(n[a])}else{for(a={},t=0;t<n.length;t++)for(i=ya(n[t]),r=0;r<i.length;r++)a[i[r].c]=i[r];for(i=0;i<wa.length;i++)null!==a&&wa[i].c in a||e.push(wa[i])}return e}function qa(e){return ca(e.a,"queryParameterForWidgetMode")}function za(e){var t=e.a.get("tosUrl")||null;if(e=e.a.get("privacyPolicyUrl")||null,t&&!e&&Xi("Privacy Policy URL is missing, the link will not be displayed."),t&&e){if("function"==typeof t)return t;if("string"==typeof t)return function(){oi(t)}}return null}function Va(e){var t=e.a.get("tosUrl")||null,n=e.a.get("privacyPolicyUrl")||null;if(n&&!t&&Xi("Term of Service URL is missing, the link will not be displayed."),t&&n){if("function"==typeof n)return n;if("string"==typeof n)return function(){oi(n)}}return null}function Wa(e){return!(e=Pa(e,er.auth.EmailAuthProvider.PROVIDER_ID))||void 0===e.requireDisplayName||!!e.requireDisplayName}function Ha(e){return!(!(e=Pa(e,er.auth.EmailAuthProvider.PROVIDER_ID))||e.signInMethod!==er.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function Ka(e){var t=!!e.a.get("immediateFederatedRedirect"),n=Oa(e);return e=Ga(e),t&&1==n.length&&!z(Ta,n[0])&&e==as}function Ga(e){for(var t in e=e.a.get("signInFlow"),ss)if(ss[t]==e)return ss[t];return as}function Ya(e){return Za(e).signInSuccess||null}function Qa(e){return Za(e).signInSuccessWithAuthResult||null}function Ja(e){return Za(e).signInFailure||null}function Za(e){return e.a.get("callbacks")||{}}var Xa,$a,es,ts,ns="accountchooser.com",rs="googleyolo",is="none",os={lc:ns,oc:rs,NONE:is},as="redirect",ss={rc:"popup",sc:as},us={nc:"callback",RECOVER_EMAIL:"recoverEmail",tc:"resetPassword",REVERT_SECOND_FACTOR_ADDITION:"revertSecondFactorAddition",uc:"select",vc:"signIn",VERIFY_AND_CHANGE_EMAIL:"verifyAndChangeEmail",VERIFY_EMAIL:"verifyEmail"},cs=["anonymous"],ls=["sitekey","tabindex","callback","expired-callback"],hs={};function fs(e,t,n,r){hs[e].apply(null,Array.prototype.slice.call(arguments,1))}function ds(e){return e.classList?e.classList:d(e=e.className)&&e.match(/\S+/g)||[]}function ps(e,t){return e.classList?e.classList.contains(t):z(ds(e),t)}function ms(e,t){e.classList?e.classList.add(t):ps(e,t)||(e.className+=0<e.className.length?" "+t:t)}function vs(e,t){e.classList?e.classList.remove(t):ps(e,t)&&(e.className=F(ds(e),(function(e){return e!=t})).join(" "))}function gs(e){var t=e.type;switch(d(t)&&t.toLowerCase()){case"checkbox":case"radio":return e.checked?e.value:null;case"select-one":return 0<=(t=e.selectedIndex)?e.options[t].value:null;case"select-multiple":t=[];for(var n,r=0;n=e.options[r];r++)n.selected&&t.push(n.value);return t.length?t:null;default:return null!=e.value?e.value:null}}function ys(e,t){var n=e.type;switch(d(n)&&n.toLowerCase()){case"checkbox":case"radio":e.checked=t;break;case"select-one":if(e.selectedIndex=-1,d(t))for(var r=0;n=e.options[r];r++)if(n.value==t){n.selected=!0;break}break;case"select-multiple":for(d(t)&&(t=[t]),r=0;n=e.options[r];r++)if(n.selected=!1,t)for(var i,o=0;i=t[o];o++)n.value==i&&(n.selected=!0);break;default:e.value=null!=t?t:""}}function bs(e,t,n,r,i,o){if(nt&&!ht("525"))return!0;if(it&&i)return ws(e);if(i&&!r)return!1;if(!tt&&("number"==typeof t&&(t=_s(t)),(!n||it)&&(17==t||18==t||it&&91==t)||it&&16==t&&(r||o)))return!1;if((nt||$e)&&r&&n)switch(e){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(Xe&&r&&t==e)return!1;switch(e){case 13:return!tt||!o&&!i&&!(n&&r);case 27:return!(nt||$e||tt)}return(!tt||!(r||i||o))&&ws(e)}function ws(e){if(48<=e&&57>=e||96<=e&&106>=e||65<=e&&90>=e||(nt||$e)&&0==e)return!0;switch(e){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;case 173:return tt;default:return!1}}function _s(e){if(tt)e=function(e){switch(e){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return e}}(e);else if(it&&nt)switch(e){case 93:e=91}return e}function ks(e){mr.call(this),this.a=e,rr(e,"keydown",this.g,!1,this),rr(e,"click",this.h,!1,this)}function Ss(e,t){var n=new Ms(t);if(vr(e,n)){n=new Es(t);try{vr(e,n)}finally{t.stopPropagation()}}}function Es(e){Hn.call(this,e.a),this.type="action"}function Ms(e){Hn.call(this,e.a),this.type="beforeaction"}function Ts(e){mr.call(this),this.a=e,e=Xe?"focusout":"blur",this.g=rr(this.a,Xe?"focusin":"focus",this,!Xe),this.h=rr(this.a,e,this,!Xe)}function Cs(e,t){mr.call(this),this.g=e||1,this.a=t||h,this.h=C(this.gc,this),this.j=P()}function Is(e){e.Ka=!1,e.aa&&(e.a.clearTimeout(e.aa),e.aa=null)}function xs(e){Nn.call(this),this.g=e,this.a={}}R(ks,mr),ks.prototype.g=function(e){(13==e.keyCode||nt&&3==e.keyCode)&&Ss(this,e)},ks.prototype.h=function(e){Ss(this,e)},ks.prototype.o=function(){ks.K.o.call(this),ar(this.a,"keydown",this.g,!1,this),ar(this.a,"click",this.h,!1,this),delete this.a},R(Es,Hn),R(Ms,Hn),R(Ts,mr),Ts.prototype.handleEvent=function(e){var t=new Hn(e.a);t.type="focusin"==e.type||"focus"==e.type?"focusin":"focusout",vr(this,t)},Ts.prototype.o=function(){Ts.K.o.call(this),sr(this.g),sr(this.h),delete this.a},R(Cs,mr),(e=Cs.prototype).Ka=!1,e.aa=null,e.gc=function(){if(this.Ka){var e=P()-this.j;0<e&&e<.8*this.g?this.aa=this.a.setTimeout(this.h,this.g-e):(this.aa&&(this.a.clearTimeout(this.aa),this.aa=null),vr(this,"tick"),this.Ka&&(Is(this),this.start()))}},e.start=function(){this.Ka=!0,this.aa||(this.aa=this.a.setTimeout(this.h,this.g),this.j=P())},e.o=function(){Cs.K.o.call(this),Is(this),delete this.a},R(xs,Nn);var As=[];function Ps(e,t,n,r){b(n)||(n&&(As[0]=n.toString()),n=As);for(var i=0;i<n.length;i++){var o=rr(t,n[i],r||e.handleEvent,!1,e.g||e);if(!o)break;e.a[o.key]=o}}function Os(e){oe(e.a,(function(e,t){this.a.hasOwnProperty(t)&&sr(e)}),e),e.a={}}function Rs(e){mr.call(this),this.a=null,this.g=e,e=Xe||$e||nt&&!ht("531")&&"TEXTAREA"==e.tagName,this.h=new xs(this),Ps(this.h,this.g,e?["keydown","paste","cut","drop","input"]:"input",this)}function Ds(e){null!=e.a&&(h.clearTimeout(e.a),e.a=null)}function Ns(e){return(e=new Hn(e.a)).type="input",e}function Ls(e,t){mr.call(this),e&&(this.Oa&&qs(this),this.qa=e,this.Na=rr(this.qa,"keypress",this,t),this.Ya=rr(this.qa,"keydown",this.Jb,t,this),this.Oa=rr(this.qa,"keyup",this.Kb,t,this))}xs.prototype.o=function(){xs.K.o.call(this),Os(this)},xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},R(Rs,mr),Rs.prototype.handleEvent=function(e){if("input"==e.type)Xe&&ht(10)&&0==e.keyCode&&0==e.j||(Ds(this),vr(this,Ns(e)));else if("keydown"!=e.type||function(e){if(e.altKey&&!e.ctrlKey||e.metaKey||112<=e.keyCode&&123>=e.keyCode)return!1;if(ws(e.keyCode))return!0;switch(e.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!tt;default:return 166>e.keyCode||183<e.keyCode}}(e)){var t="keydown"==e.type?this.g.value:null;Xe&&229==e.keyCode&&(t=null);var n=Ns(e);Ds(this),this.a=function(e,t){if(_(e))t&&(e=C(e,t));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=C(e.handleEvent,e)}return 2147483647<Number(0)?-1:h.setTimeout(e,0)}((function(){this.a=null,this.g.value!=t&&vr(this,n)}),this)}},Rs.prototype.o=function(){Rs.K.o.call(this),this.h.m(),Ds(this),delete this.g},R(Ls,mr),(e=Ls.prototype).qa=null,e.Na=null,e.Ya=null,e.Oa=null,e.R=-1,e.X=-1,e.Ua=!1;var js={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Bs={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Fs=!nt||ht("525"),Us=it&&tt;function qs(e){e.Na&&(sr(e.Na),sr(e.Ya),sr(e.Oa),e.Na=null,e.Ya=null,e.Oa=null),e.qa=null,e.R=-1,e.X=-1}function zs(e,t,n,r){Hn.call(this,r),this.type="key",this.keyCode=e,this.j=t,this.repeat=n}function Vs(e,t,n,r){this.top=e,this.right=t,this.bottom=n,this.left=r}function Ws(e,t){var n=Kt(e);return n.defaultView&&n.defaultView.getComputedStyle&&(e=n.defaultView.getComputedStyle(e,null))&&(e[t]||e.getPropertyValue(t))||""}function Hs(e){try{var t=e.getBoundingClientRect()}catch(e){return{left:0,top:0,right:0,bottom:0}}return Xe&&e.ownerDocument.body&&(e=e.ownerDocument,t.left-=e.documentElement.clientLeft+e.body.clientLeft,t.top-=e.documentElement.clientTop+e.body.clientTop),t}function Ks(e){var t=Kt(e),n=new jt(0,0),r=t?Kt(t):document;return e==(r=!Xe||9<=Number(ct)||"CSS1Compat"==Ft(r).a.compatMode?r.documentElement:r.body)||(e=Hs(e),t=Wt(r=Ft(t).a),r=r.parentWindow||r.defaultView,t=Xe&&ht("10")&&r.pageYOffset!=t.scrollTop?new jt(t.scrollLeft,t.scrollTop):new jt(r.pageXOffset||t.scrollLeft,r.pageYOffset||t.scrollTop),n.a=e.left+t.a,n.g=e.top+t.g),n}(e=Ls.prototype).Jb=function(e){(nt||$e)&&(17==this.R&&!e.ctrlKey||18==this.R&&!e.altKey||it&&91==this.R&&!e.metaKey)&&(this.X=this.R=-1),-1==this.R&&(e.ctrlKey&&17!=e.keyCode?this.R=17:e.altKey&&18!=e.keyCode?this.R=18:e.metaKey&&91!=e.keyCode&&(this.R=91)),Fs&&!bs(e.keyCode,this.R,e.shiftKey,e.ctrlKey,e.altKey,e.metaKey)?this.handleEvent(e):(this.X=_s(e.keyCode),Us&&(this.Ua=e.altKey))},e.Kb=function(e){this.X=this.R=-1,this.Ua=e.altKey},e.handleEvent=function(e){var t=e.a,n=t.altKey;if(Xe&&"keypress"==e.type)var r=this.X,i=13!=r&&27!=r?t.keyCode:0;else(nt||$e)&&"keypress"==e.type?(r=this.X,i=0<=t.charCode&&63232>t.charCode&&ws(r)?t.charCode:0):Ze&&!nt?i=ws(r=this.X)?t.keyCode:0:("keypress"==e.type?(Us&&(n=this.Ua),t.keyCode==t.charCode?32>t.keyCode?(r=t.keyCode,i=0):(r=this.X,i=t.charCode):(r=t.keyCode||this.X,i=t.charCode||0)):(r=t.keyCode||this.X,i=t.charCode||0),it&&63==i&&224==r&&(r=191));var o=r=_s(r);r?63232<=r&&r in js?o=js[r]:25==r&&e.shiftKey&&(o=9):t.keyIdentifier&&t.keyIdentifier in Bs&&(o=Bs[t.keyIdentifier]),tt&&Fs&&"keypress"==e.type&&!bs(o,this.R,e.shiftKey,e.ctrlKey,n,e.metaKey)||(e=o==this.R,this.R=o,(t=new zs(o,i,e,t)).altKey=n,vr(this,t))},e.N=function(){return this.qa},e.o=function(){Ls.K.o.call(this),qs(this)},R(zs,Hn),Vs.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},Vs.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},Vs.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},Vs.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};var Gs={thin:2,medium:4,thick:6};function Ys(e,t){if("none"==(e.currentStyle?e.currentStyle[t+"Style"]:null))return 0;var n=e.currentStyle?e.currentStyle[t+"Width"]:null;if(n in Gs)e=Gs[n];else if(/^\d+px?$/.test(n))e=parseInt(n,10);else{t=e.style.left;var r=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,e.style.left=n,n=e.style.pixelLeft,e.style.left=t,e.runtimeStyle.left=r,e=+n}return e}function Qs(){}function Js(e){mr.call(this),this.s=e||Ft(),this.cb=null,this.na=!1,this.g=null,this.L=void 0,this.oa=this.Ea=this.Y=null}function Zs(e,t){return e.g?qt(t,e.g||e.s.a):null}function Xs(e){return e.L||(e.L=new xs(e)),e.L}function $s(e,t){e.Ea&&B(e.Ea,t,void 0)}function eu(e,t){var n=Yt(e,"firebaseui-textfield");t?(vs(e,"firebaseui-input-invalid"),ms(e,"firebaseui-input"),n&&vs(n,"firebaseui-textfield-invalid")):(vs(e,"firebaseui-input"),ms(e,"firebaseui-input-invalid"),n&&ms(n,"firebaseui-textfield-invalid"))}function tu(e,t,n){Bn(e,I(Fn,t=new Rs(t))),Ps(Xs(e),t,"input",n)}function nu(e,t,n){Bn(e,I(Fn,t=new Ls(t))),Ps(Xs(e),t,"key",(function(e){13==e.keyCode&&(e.stopPropagation(),e.preventDefault(),n(e))}))}function ru(e,t,n){Bn(e,I(Fn,t=new ks(t))),Ps(Xs(e),t,"action",(function(e){e.stopPropagation(),e.preventDefault(),n(e)}))}function iu(e){ms(e,"firebaseui-hidden")}function ou(e,t){t&&Gt(e,t),vs(e,"firebaseui-hidden")}function au(e){return!ps(e,"firebaseui-hidden")&&"none"!=e.style.display}function su(e){var t=(e=e||{}).email,n=e.disabled,r='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-email-input">';return r=e.xc?r+"Enter new email address":r+"Email",r+='</label><input type="email" name="email" id="ui-sign-in-email-input" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+pn(null!=t?t:"")+'"'+(n?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>',ln(r)}function uu(e){var t='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';return t=(e=(e=e||{}).label)?t+an(e):t+"Next",ln(t+"</button>")}function cu(){var e=""+uu({label:fn("Sign In")});return ln(e)}function lu(){var e=""+uu({label:fn("Save")});return ln(e)}function hu(){var e=""+uu({label:fn("Continue")});return ln(e)}function fu(e){var t='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-new-password-input">';return t=(e=(e=e||{}).label)?t+an(e):t+"Choose password",ln(t+'</label><input type="password" name="newPassword" id="ui-sign-in-new-password-input" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function du(){var e='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-password-input">';return ln((e={}.current?e+"Current password":e+"Password")+'</label><input type="password" name="password" id="ui-sign-in-password-input" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}function pu(){return ln('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function mu(e){var t='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';return t=(e=(e=e||{}).label)?t+an(e):t+"Cancel",ln(t+"</button>")}function vu(e){var t="";return e.F&&e.D&&(t+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>'),ln(t)}function gu(e){var t="";return e.F&&e.D&&(t+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>'),ln(t)}function yu(e){return e='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+an(e.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>',ln(e)}function bu(e){var t=e.content;return e=e.Ab,ln('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+(e?" "+pn(e):"")+'">'+an(t)+"</dialog>")}function wu(e){var t=e.message;return ln(bu({content:dn('<div class="firebaseui-dialog-icon-wrapper"><div class="'+pn(e.Ma)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+an(t)+"</div>")}))}function _u(e){for(var t='<div class="firebaseui-list-box-actions">',n=(e=e.items).length,r=0;r<n;r++){var i=e[r];t+='<button type="button" data-listboxid="'+pn(i.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(i.Ma?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+pn(i.Ma)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+an(i.label)+"</div></button>"}return t=""+bu({Ab:fn("firebaseui-list-box-dialog"),content:dn(t+"</div>")}),ln(t)}function ku(e){return ln((e=e||{}).tb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}function Su(e,t){return cn((e=(e=e||{}).ga).S?e.S:t.hb[e.providerId]?""+t.hb[e.providerId]:e.providerId&&0==e.providerId.indexOf("saml.")||e.providerId&&0==e.providerId.indexOf("oidc.")?e.providerId.substring(5):""+e.providerId)}function Eu(e){Cu(e,"upgradeElement")}function Mu(e){Cu(e,"downgradeElements")}g(Qs),Qs.prototype.a=0,R(Js,mr),(e=Js.prototype).Lb=Qs.Xa(),e.N=function(){return this.g},e.Za=function(e){if(this.Y&&this.Y!=e)throw Error("Method not supported");Js.K.Za.call(this,e)},e.kb=function(){this.g=this.s.a.createElement("DIV")},e.render=function(e){if(this.na)throw Error("Component already rendered");this.g||this.kb(),e?e.insertBefore(this.g,null):this.s.a.body.appendChild(this.g),this.Y&&!this.Y.na||this.v()},e.v=function(){this.na=!0,$s(this,(function(e){!e.na&&e.N()&&e.v()}))},e.ya=function(){$s(this,(function(e){e.na&&e.ya()})),this.L&&Os(this.L),this.na=!1},e.o=function(){this.na&&this.ya(),this.L&&(this.L.m(),delete this.L),$s(this,(function(e){e.m()})),this.g&&Ht(this.g),this.Y=this.g=this.oa=this.Ea=null,Js.K.o.call(this)},e.removeChild=function(e,t){if(e){var n=d(e)?e:e.cb||(e.cb=":"+(e.Lb.a++).toString(36));if(this.oa&&n?e=(null!==(e=this.oa)&&n in e?e[n]:void 0)||null:e=null,n&&e){var r=this.oa;if(n in r&&delete r[n],V(this.Ea,e),t&&(e.ya(),e.g&&Ht(e.g)),null==(t=e))throw Error("Unable to set parent component");t.Y=null,Js.K.Za.call(t,null)}}if(!e)throw Error("Child is not in parent component");return e},yu.a="firebaseui.auth.soy2.element.infoBar",wu.a="firebaseui.auth.soy2.element.progressDialog",_u.a="firebaseui.auth.soy2.element.listBoxDialog",ku.a="firebaseui.auth.soy2.element.busyIndicator";var Tu=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"];function Cu(e,t){e&&window.componentHandler&&window.componentHandler[t]&&Tu.forEach((function(n){ps(e,n)&&window.componentHandler[t](e),B(Ut(n,e),(function(e){window.componentHandler[t](e)}))}))}function Iu(e,t,n){if(xu.call(this),document.body.appendChild(e),e.showModal||window.dialogPolyfill.registerDialog(e),e.showModal(),Eu(e),t&&ru(this,e,(function(t){var n=e.getBoundingClientRect();(t.clientX<n.left||n.left+n.width<t.clientX||t.clientY<n.top||n.top+n.height<t.clientY)&&xu.call(this)})),!n){var r=this.N().parentElement||this.N().parentNode;if(r){var i=this;this.da=function(){if(e.open){var t=e.getBoundingClientRect().height,n=r.getBoundingClientRect().height,o=r.getBoundingClientRect().top-document.body.getBoundingClientRect().top,a=r.getBoundingClientRect().left-document.body.getBoundingClientRect().left,s=e.getBoundingClientRect().width,u=r.getBoundingClientRect().width;e.style.top=(o+(n-t)/2).toString()+"px",t=a+(u-s)/2,e.style.left=t.toString()+"px",e.style.right=(document.body.getBoundingClientRect().width-t-s).toString()+"px"}else window.removeEventListener("resize",i.da)},this.da(),window.addEventListener("resize",this.da,!1)}}}function xu(){var e=Au.call(this);e&&(Mu(e),e.open&&e.close(),Ht(e),this.da&&window.removeEventListener("resize",this.da))}function Au(){return qt("firebaseui-id-dialog")}function Pu(){Ht(Ou.call(this))}function Ou(){return Zs(this,"firebaseui-id-info-bar")}function Ru(){return Zs(this,"firebaseui-id-dismiss-info-bar")}var Du={xa:{"google.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","github.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg","facebook.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg","twitter.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",password:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",phone:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",anonymous:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png","microsoft.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/microsoft.svg","yahoo.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/yahoo.svg","apple.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/apple.png",saml:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/saml.svg",oidc:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/oidc.svg"},wa:{"google.com":"#ffffff","github.com":"#333333","facebook.com":"#3b5998","twitter.com":"#55acee",password:"#db4437",phone:"#02bd7e",anonymous:"#f4b400","microsoft.com":"#2F2F2F","yahoo.com":"#720E9E","apple.com":"#000000",saml:"#007bff",oidc:"#007bff"},hb:{"google.com":"Google","github.com":"GitHub","facebook.com":"Facebook","twitter.com":"Twitter",password:"Password",phone:"Phone",anonymous:"Guest","microsoft.com":"Microsoft","yahoo.com":"Yahoo","apple.com":"Apple"}};function Nu(e,t,n){for(var r in Wn.call(this,e,t),n)this[r]=n[r]}function Lu(e,t,n,r,i){Js.call(this,n),this.fb=e,this.eb=t,this.Fa=!1,this.Ga=r||null,this.A=this.ca=null,this.Z=ae(Du),ue(this.Z,i||{})}function ju(e){return e.N().parentElement||e.N().parentNode}function Bu(e,t,n){nu(e,t,(function(){n.focus()}))}function Fu(e,t,n){nu(e,t,(function(){n()}))}function Uu(e,t,n){t=(e=e||{}).Va;var r=e.ia;return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+su(e)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(t?mu(null):"")+uu(null)+'</div></div><div class="firebaseui-card-footer">'+(r?gu(n):vu(n))+"</div></form></div>",ln(e)}function qu(e,t,n){return t=(e=e||{}).ia,e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+su(e)+du()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+pu()+'</div><div class="firebaseui-form-actions">'+cu()+'</div></div><div class="firebaseui-card-footer">'+(t?gu(n):vu(n))+"</div></form></div>",ln(e)}function zu(e,t,n){var r=(e=e||{}).Tb;t=e.Ta;var i=e.ia,o='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+su(e);return r?(e='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-name-input">First &amp; last name</label><input type="text" name="name" id="ui-sign-in-name-input" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+pn(null!=(e=(e=e||{}).name)?e:"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>',e=ln(e)):e="",n=o+e+fu(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(t?mu(null):"")+lu()+'</div></div><div class="firebaseui-card-footer">'+(i?gu(n):vu(n))+"</div></form></div>",ln(n)}function Vu(e,t,n){return t=(e=e||{}).Ta,e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+su(e)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(t?mu(null):"")+uu({label:fn("Send")})+'</div></div><div class="firebaseui-card-footer">'+vu(n)+"</div></form></div>",ln(e)}function Wu(e,t,n){t=e.G;var r="";return r+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="Follow the instructions sent to <strong>"+an(e.email)+"</strong> to recover your password")+'</p></div><div class="firebaseui-card-actions">',t&&(r+='<div class="firebaseui-form-actions">'+uu({label:fn("Done")})+"</div>"),r+='</div><div class="firebaseui-card-footer">'+vu(n)+"</div></div>",ln(r)}function Hu(e,t,n){return ln('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+ku(null)+"</div></div>")}function Ku(e,t,n){return ln('<div class="firebaseui-container firebaseui-id-page-spinner">'+ku({tb:!0})+"</div>")}function Gu(){return ln('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}function Yu(e,t,n){return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+(e="A sign-in email with additional instructions was sent to <strong>"+an(e.email)+"</strong>. Check your email to complete sign-in.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+ln('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>')+'</div><div class="firebaseui-form-actions">'+mu({label:fn("Back")})+'</div></div><div class="firebaseui-card-footer">'+vu(n)+"</div></form></div>",ln(t)}function Qu(e,t,n){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn\'t work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+ln('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+mu({label:fn("Back")})+'</div></div><div class="firebaseui-card-footer">'+vu(n)+"</div></form></div>",ln(e)}function Ju(e,t,n){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+su(e)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+mu(null)+uu(null)+'</div></div><div class="firebaseui-card-footer">'+vu(n)+"</div></form></div>",ln(e)}function Zu(){var e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+mu({label:fn("Dismiss")})+"</div></div></div>";return ln(e)}function Xu(){var e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+mu({label:fn("Dismiss")})+"</div></div></div>";return ln(e)}function $u(e,t,n){return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(e="You’ve already used <strong>"+an(e.email)+"</strong> to sign in. Enter your password for that account.")+"</p>"+du()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+pu()+'</div><div class="firebaseui-form-actions">'+cu()+'</div></div><div class="firebaseui-card-footer">'+vu(n)+"</div></form></div>",ln(t)}function ec(e,t,n){var r=e.email;return t="",e=fn(e=""+Su(e,n)),t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+(r="You’ve already used <strong>"+an(r)+"</strong>. You can connect your <strong>"+an(e)+"</strong> account with <strong>"+an(r)+"</strong> by signing in with email link below.")+'<p class="firebaseui-text firebaseui-text-justify">'+(e="For this flow to successfully connect your "+an(e)+" account with this email, you have to open the link on the same device or browser.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+cu()+'</div></div><div class="firebaseui-card-footer">'+vu(n)+"</div></form></div>",ln(t)}function tc(e,t,n){t="";var r=""+Su(e,n);return t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+(e="You originally intended to connect <strong>"+an(r=fn(r))+"</strong> to your email account but have opened the link on a different device where you are not signed in.")+'</p><p class="firebaseui-text firebaseui-text-justify">'+(r="If you still want to connect your <strong>"+an(r)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+hu()+'</div></div><div class="firebaseui-card-footer">'+vu(n)+"</div></form></div>",ln(t)}function nc(e,t,n){var r=e.email;return t="",e=fn(e=""+Su(e,n)),t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(r="You’ve already used <strong>"+an(r)+"</strong>. Sign in with "+an(e)+" to continue.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+uu({label:fn("Sign in with "+e)})+'</div></div><div class="firebaseui-card-footer">'+vu(n)+"</div></form></div>",ln(t)}function rc(e,t,n){var r=(e=e||{}).kc;t=e.yb,e=e.Eb;var i='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unauthorized-user"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Not Authorized</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';return r?i+=r="<strong>"+an(r)+"</strong> is not authorized to view the requested page.":i+="User is not authorized to view the requested page.",i+="</p>",t&&(i+='<p class="firebaseui-text firebaseui-id-unauthorized-user-admin-email">'+(t="Please contact <strong>"+an(t)+"</strong> for authorization.")+"</p>"),i+='</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">',e&&(i+='<a class="firebaseui-link firebaseui-id-unauthorized-user-help-link" href="javascript:void(0)" target="_blank">Learn More</a>'),i+='</div><div class="firebaseui-form-actions">'+mu({label:fn("Back")})+'</div></div><div class="firebaseui-card-footer">'+vu(n)+"</div></form></div>",ln(i)}function ic(e,t,n){return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unsupported-provider"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="To continue sign in with <strong>"+an(e.email)+"</strong> on this device, you have to recover the password.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+mu(null)+uu({label:fn("Recover password")})+'</div></div><div class="firebaseui-card-footer">'+vu(n)+"</div></form></div>",ln(t)}function oc(e){var t="";return t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content">'+('<p class="firebaseui-text">for <strong>'+an(e.email)+"</strong></p>")+fu(function(e){function t(){}var n={label:fn("New password")};for(var r in t.prototype=e,e=new t,n)e[r]=n[r];return e}(e))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+lu()+"</div></div></form></div>",ln(t)}function ac(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+hu()+"</div>":"")+"</div></div>",ln(e)}function sc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+hu()+"</div>":"")+"</div></div>",ln(e)}function uc(e){var t=e.G,n="";return n+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="Your sign-in email address has been changed back to <strong>"+an(e.email)+"</strong>.")+'</p><p class="firebaseui-text">If you didn’t ask to change your sign-in email, it’s possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(t?'<div class="firebaseui-form-actions">'+hu()+"</div>":"")+"</div></form></div>",ln(n)}function cc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still can’t reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+hu()+"</div>":"")+"</div></div>",ln(e)}function lc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+hu()+"</div>":"")+"</div></div>",ln(e)}function hc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+hu()+"</div>":"")+"</div></div>",ln(e)}function fc(e){var t=e.G,n="";return n+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified and changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(e="You can now sign in with your new email <strong>"+an(e.email)+"</strong>.")+'</p></div><div class="firebaseui-card-actions">'+(t?'<div class="firebaseui-form-actions">'+hu()+"</div>":"")+"</div></div>",ln(n)}function dc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try updating your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify and update your email has expired or the link has already been used.</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+hu()+"</div>":"")+"</div></div>",ln(e)}function pc(e){var t=e.factorId,n=e.phoneNumber;e=e.G;var r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Removed second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';switch(t){case"phone":r+=t="The <strong>"+an(t)+" "+an(n)+"</strong> was removed as a second authentication step.";break;default:r+="The device or app was removed as a second authentication step."}return r+='</p><p class="firebaseui-text">If you don\'t recognize this device, someone might be trying to access your account. Consider <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">changing your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(e?'<div class="firebaseui-form-actions">'+hu()+"</div>":"")+"</div></form></div>",ln(r)}function mc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Couldn\'t remove your second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Something went wrong removing your second factor.</p><p class="firebaseui-text">Try removing it again. If that doesn\'t work, contact support for assistance.</p></div><div class="firebaseui-card-actions">'+((e=e||{}).G?'<div class="firebaseui-form-actions">'+hu()+"</div>":"")+"</div></div>",ln(e)}function vc(e){var t=e.zb;return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-recoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+an(e.errorMessage)+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">',t&&(e+=uu({label:fn("Retry")})),ln(e+"</div></div></div>")}function gc(e){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+an(e.errorMessage)+"</p></div></div>",ln(e)}function yc(e,t,n){var r=e.Qb;return t="",t+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+(e="Continue with "+an(e.jc)+"?")+'</h2><p class="firebaseui-text">'+(r="You originally wanted to sign in with "+an(r))+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+mu(null)+uu({label:fn("Continue")})+'</div></div><div class="firebaseui-card-footer">'+vu(n)+"</div></form></div>",ln(t)}function bc(e,t,n){var r='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';t=(e=e.Sb).length;for(var i=0;i<t;i++){var o={ga:e[i]},a=n,s=(o=o||{}).ga,u=o,c="";switch((u=u||{}).ga.providerId){case"google.com":c+="firebaseui-idp-google";break;case"github.com":c+="firebaseui-idp-github";break;case"facebook.com":c+="firebaseui-idp-facebook";break;case"twitter.com":c+="firebaseui-idp-twitter";break;case"phone":c+="firebaseui-idp-phone";break;case"anonymous":c+="firebaseui-idp-anonymous";break;case"password":c+="firebaseui-idp-password";break;default:c+="firebaseui-idp-generic"}u=(u='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+pn(cn(c))+' firebaseui-id-idp-button" data-provider-id="'+pn(s.providerId)+'" style="background-color:')+pn(vn(cn((c=(c=(c=o)||{}).ga).ta?c.ta:a.wa[c.providerId]?""+a.wa[c.providerId]:0==c.providerId.indexOf("saml.")?""+a.wa.saml:0==c.providerId.indexOf("oidc.")?""+a.wa.oidc:""+a.wa.password)))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="';var l=o;c=a,l=(l=l||{}).ga,c=hn(l.za?mn(l.za):c.xa[l.providerId]?mn(c.xa[l.providerId]):0==l.providerId.indexOf("saml.")?mn(c.xa.saml):0==l.providerId.indexOf("oidc.")?mn(c.xa.oidc):mn(c.xa.password)),u=u+pn(mn(c))+'"></span>',"password"==s.providerId?(u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',s.V?u+=an(s.V):s.S?u+=o="Sign in with "+an(Su(o,a)):u+="Sign in with email",u+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',u=s.S?u+an(s.S):u+"Email",u+="</span>"):"phone"==s.providerId?(u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',s.V?u+=an(s.V):s.S?u+=o="Sign in with "+an(Su(o,a)):u+="Sign in with phone",u+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',u=s.S?u+an(s.S):u+"Phone",u+="</span>"):"anonymous"==s.providerId?(u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',s.V?u+=an(s.V):s.S?u+=o="Sign in with "+an(Su(o,a)):u+="Continue as guest",u+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',u=s.S?u+an(s.S):u+"Guest",u+="</span>"):(u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',s.V?u+=an(s.V):u+=c="Sign in with "+an(Su(o,a)),u+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+(s.S?an(s.S):an(Su(o,a)))+"</span>"),r+='<li class="firebaseui-list-item">'+(s=ln(u+"</button>"))+"</li>"}return r+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+gu(n)+"</div></div>",ln(r)}function wc(e,t,n){var r,i=(e=e||{}).Gb,o=e.Va;return t=e.ia,e='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-number-input">Phone number</label><input type="tel" name="phoneNumber" id="ui-sign-in-phone-number-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+pn(null!=(e=(e=e||{}).Aa)?e:"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>',r=(e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+ln(e))+(r=i?ln('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):"")+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(o?mu(null):"")+uu({label:fn("Verify")})+'</div></div><div class="firebaseui-card-footer">',t?(t='<p class="firebaseui-tos firebaseui-phone-tos">',t=n.F&&n.D?t+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':t+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.",n=ln(t+"</p>")):n=ln('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+vu(n),ln(r+n+"</div></form></div>")}function _c(e,t,n){var r="";return e='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+an(t=(e=e||{}).phoneNumber)+"</a>",an(t),t=r,n='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+e+"</p>"+(r=ln('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-confirmation-code-input">6-digit code</label><input type="number" name="phoneConfirmationCode" id="ui-sign-in-phone-confirmation-code-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>'))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+mu(null)+uu({label:fn("Continue")})+'</div></div><div class="firebaseui-card-footer">'+vu(n)+"</div></form>",e=ln('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>'),ln(t+(n+e+"</div>"))}function kc(){return ln('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-out"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign Out</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You are now successfully signed out.</p></div></div>')}function Sc(e,t,n){var r='<div class="firebaseui-container firebaseui-page-select-tenant firebaseui-id-page-select-tenant"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-tenant-list">';t=(e=e.ec).length;for(var i=0;i<t;i++){var o=e[i],a="",s=an(o.displayName),u=o.tenantId?o.tenantId:"top-level-project";a+='<button class="firebaseui-tenant-button mdl-button mdl-js-button mdl-button--raised firebaseui-tenant-selection-'+pn(u=fn(u))+' firebaseui-id-tenant-selection-button"'+(o.tenantId?'data-tenant-id="'+pn(o.tenantId)+'"':"")+'style="background-color:'+pn(vn(o.ta))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="'+pn(mn(o.za))+'"></span><span class="firebaseui-idp-text firebaseui-idp-text-long">',o.V?a+=an(o.V):a+=o="Sign in to "+an(o.displayName),r+='<li class="firebaseui-list-item">'+(a=ln(a+'</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+s+"</span></button>"))+"</li>"}return r+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+gu(n)+"</div></div>",ln(r)}function Ec(e,t,n){return e='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-provider-match-by-email"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+su(null)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+uu(null)+'</div></div><div class="firebaseui-card-footer">'+gu(n)+"</div></form></div>",ln(e)}function Mc(){return Zs(this,"firebaseui-id-submit")}function Tc(){return Zs(this,"firebaseui-id-secondary-link")}function Cc(e,t){ru(this,Mc.call(this),(function(t){e(t)}));var n=Tc.call(this);n&&t&&ru(this,n,(function(e){t(e)}))}function Ic(){return Zs(this,"firebaseui-id-password")}function xc(){return Zs(this,"firebaseui-id-password-error")}function Ac(){var e=Ic.call(this),t=xc.call(this);tu(this,e,(function(){au(t)&&(eu(e,!0),iu(t))}))}function Pc(){var e=Ic.call(this),t=xc.call(this);return gs(e)?(eu(e,!0),iu(t),t=!0):(eu(e,!1),ou(t,cn("Enter your password").toString()),t=!1),t?gs(e):null}function Oc(e,t,n,r,i,o){Lu.call(this,$u,{email:e},o,"passwordLinking",{F:r,D:i}),this.w=t,this.H=n}R(Nu,Wn),R(Lu,Js),(e=Lu.prototype).kb=function(){var e=tn(this.fb,this.eb,this.Z,this.s);Eu(e),this.g=e},e.v=function(){if(Lu.K.v.call(this),wr(ju(this),new Nu("pageEnter",ju(this),{pageId:this.Ga})),this.bb()&&this.Z.F){var e=this.Z.F;ru(this,this.bb(),(function(){e()}))}if(this.ab()&&this.Z.D){var t=this.Z.D;ru(this,this.ab(),(function(){t()}))}},e.ya=function(){wr(ju(this),new Nu("pageExit",ju(this),{pageId:this.Ga})),Lu.K.ya.call(this)},e.o=function(){window.clearTimeout(this.ca),this.eb=this.fb=this.ca=null,this.Fa=!1,this.A=null,Mu(this.N()),Lu.K.o.call(this)},e.I=function(e,t,n,r){function i(){if(o.T)return null;o.Fa=!1,window.clearTimeout(o.ca),o.ca=null,o.A&&(Mu(o.A),Ht(o.A),o.A=null)}var o=this;return o.Fa?null:(function(e){e.Fa=!0;var t=ps(e.N(),"firebaseui-use-spinner");e.ca=window.setTimeout((function(){e.N()&&null===e.A&&(e.A=tn(ku,{tb:t},null,e.s),e.N().appendChild(e.A),Eu(e.A))}),500)}(o),e.apply(null,t).then(n,r).then(i,i))},x(Lu.prototype,{a:function(e){Pu.call(this);var t=tn(yu,{message:e},null,this.s);this.N().appendChild(t),ru(this,Ru.call(this),(function(){Ht(t)}))},zc:Pu,Bc:Ou,Ac:Ru,$:function(e,t){e=tn(wu,{Ma:e,message:t},null,this.s),Iu.call(this,e)},h:xu,Cb:Au,Dc:function(){return Zs(this,"firebaseui-tos")},bb:function(){return Zs(this,"firebaseui-tos-link")},ab:function(){return Zs(this,"firebaseui-pp-link")},Ec:function(){return Zs(this,"firebaseui-tos-list")}}),Uu.a="firebaseui.auth.soy2.page.signIn",qu.a="firebaseui.auth.soy2.page.passwordSignIn",zu.a="firebaseui.auth.soy2.page.passwordSignUp",Vu.a="firebaseui.auth.soy2.page.passwordRecovery",Wu.a="firebaseui.auth.soy2.page.passwordRecoveryEmailSent",Hu.a="firebaseui.auth.soy2.page.callback",Ku.a="firebaseui.auth.soy2.page.spinner",Gu.a="firebaseui.auth.soy2.page.blank",Yu.a="firebaseui.auth.soy2.page.emailLinkSignInSent",Qu.a="firebaseui.auth.soy2.page.emailNotReceived",Ju.a="firebaseui.auth.soy2.page.emailLinkSignInConfirmation",Zu.a="firebaseui.auth.soy2.page.differentDeviceError",Xu.a="firebaseui.auth.soy2.page.anonymousUserMismatch",$u.a="firebaseui.auth.soy2.page.passwordLinking",ec.a="firebaseui.auth.soy2.page.emailLinkSignInLinking",tc.a="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice",nc.a="firebaseui.auth.soy2.page.federatedLinking",rc.a="firebaseui.auth.soy2.page.unauthorizedUser",ic.a="firebaseui.auth.soy2.page.unsupportedProvider",oc.a="firebaseui.auth.soy2.page.passwordReset",ac.a="firebaseui.auth.soy2.page.passwordResetSuccess",sc.a="firebaseui.auth.soy2.page.passwordResetFailure",uc.a="firebaseui.auth.soy2.page.emailChangeRevokeSuccess",cc.a="firebaseui.auth.soy2.page.emailChangeRevokeFailure",lc.a="firebaseui.auth.soy2.page.emailVerificationSuccess",hc.a="firebaseui.auth.soy2.page.emailVerificationFailure",fc.a="firebaseui.auth.soy2.page.verifyAndChangeEmailSuccess",dc.a="firebaseui.auth.soy2.page.verifyAndChangeEmailFailure",pc.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionSuccess",mc.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionFailure",vc.a="firebaseui.auth.soy2.page.recoverableError",gc.a="firebaseui.auth.soy2.page.unrecoverableError",yc.a="firebaseui.auth.soy2.page.emailMismatch",bc.a="firebaseui.auth.soy2.page.providerSignIn",wc.a="firebaseui.auth.soy2.page.phoneSignInStart",_c.a="firebaseui.auth.soy2.page.phoneSignInFinish",kc.a="firebaseui.auth.soy2.page.signOut",Sc.a="firebaseui.auth.soy2.page.selectTenant",Ec.a="firebaseui.auth.soy2.page.providerMatchByEmail",s(Oc,Lu),Oc.prototype.v=function(){this.P(),this.M(this.w,this.H),Fu(this,this.i(),this.w),this.i().focus(),Lu.prototype.v.call(this)},Oc.prototype.o=function(){this.w=null,Lu.prototype.o.call(this)},Oc.prototype.j=function(){return gs(Zs(this,"firebaseui-id-email"))},x(Oc.prototype,{i:Ic,B:xc,P:Ac,u:Pc,ea:Mc,ba:Tc,M:Cc});var Rc=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function Dc(){return Zs(this,"firebaseui-id-email")}function Nc(){return Zs(this,"firebaseui-id-email-error")}function Lc(e){var t=Dc.call(this),n=Nc.call(this);tu(this,t,(function(){au(n)&&(eu(t,!0),iu(n))})),e&&nu(this,t,(function(){e()}))}function jc(){return Q(gs(Dc.call(this))||"")}function Bc(){var e=Dc.call(this),t=Nc.call(this),n=gs(e)||"";return n?Rc.test(n)?(eu(e,!0),iu(t),t=!0):(eu(e,!1),ou(t,cn("That email address isn't correct").toString()),t=!1):(eu(e,!1),ou(t,cn("Enter your email address to continue").toString()),t=!1),t?Q(gs(e)):null}function Fc(e,t,n,r,i,o,a){Lu.call(this,qu,{email:n,ia:!!o},a,"passwordSignIn",{F:r,D:i}),this.w=e,this.H=t}function Uc(e,t,n,r,i,o){Lu.call(this,e,t,r,i||"notice",o),this.i=n||null}function qc(e,t,n,r,i){Uc.call(this,Wu,{email:e,G:!!t},t,i,"passwordRecoveryEmailSent",{F:n,D:r})}function zc(e,t){Uc.call(this,lc,{G:!!e},e,t,"emailVerificationSuccess")}function Vc(e,t){Uc.call(this,hc,{G:!!e},e,t,"emailVerificationFailure")}function Wc(e,t,n){Uc.call(this,fc,{email:e,G:!!t},t,n,"verifyAndChangeEmailSuccess")}function Hc(e,t){Uc.call(this,dc,{G:!!e},e,t,"verifyAndChangeEmailFailure")}function Kc(e,t){Uc.call(this,mc,{G:!!e},e,t,"revertSecondFactorAdditionFailure")}function Gc(e){Uc.call(this,kc,void 0,void 0,e,"signOut")}function Yc(e,t){Uc.call(this,ac,{G:!!e},e,t,"passwordResetSuccess")}function Qc(e,t){Uc.call(this,sc,{G:!!e},e,t,"passwordResetFailure")}function Jc(e,t){Uc.call(this,cc,{G:!!e},e,t,"emailChangeRevokeFailure")}function Zc(e,t,n){Uc.call(this,vc,{errorMessage:e,zb:!!t},t,n,"recoverableError")}function Xc(e,t){Uc.call(this,gc,{errorMessage:e},void 0,t,"unrecoverableError")}function $c(e){if("auth/invalid-credential"===e.code&&e.message&&-1!==e.message.indexOf("error=consent_required"))return{code:"auth/user-cancelled"};if(e.message&&-1!==e.message.indexOf("HTTP Cloud Function returned an error:")){var t=JSON.parse(e.message.substring(e.message.indexOf("{"),e.message.lastIndexOf("}")+1));return{code:e.code,message:t&&t.error&&t.error.message||e.message}}return e}function el(e,t,n,r){function i(n){if(!n.name||"cancel"!=n.name){e:{var r=n.message;try{var i=((JSON.parse(r).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(i&&i.length){var o=!0;break e}}catch(e){}o=!1}if(o)n=ju(t),t.m(),sl(e,n,void 0,cn("Your sign-in session has expired. Please try again.").toString());else{if(o=n&&n.message||"",n.code){if("auth/email-already-in-use"==n.code||"auth/credential-already-in-use"==n.code)return;o=rl(n)}t.a(o)}}}if(Oh(e),r)return tl(e,n),Hr();if(!n.credential)throw Error("No credential found!");if(!kh(e).currentUser&&!n.user)throw Error("User not logged in.");try{var o=function(e,t){return Nh(e),xh(e,(function(n){if(e.j&&!e.j.isAnonymous&&xa(Dh(e))&&!kh(e).currentUser)return jh(e).then((function(){return"password"==t.credential.providerId&&(t.credential=null),t}));if(n)return jh(e).then((function(){return n.linkWithCredential(t.credential)})).then((function(e){return t.user=e.user,t.credential=e.credential,t.operationType=e.operationType,t.additionalUserInfo=e.additionalUserInfo,t}),(function(n){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential)throw n;return Bh(e,n,t.credential)}));if(!t.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return jh(e).then((function(){return Sh(e).updateCurrentUser(t.user)})).then((function(){return t.user=Sh(e).currentUser,t.operationType="signIn",t.credential&&t.credential.providerId&&"password"==t.credential.providerId&&(t.credential=null),t}))}))}(e,n)}catch(e){return Yi(e.code||e.message,e),t.a(e.code||e.message),Hr()}return n=o.then((function(t){tl(e,t)}),i).then(void 0,i),Ph(e,o),Hr(n)}function tl(e,t){if(!t.user)throw Error("No user found");var n=Qa(Dh(e));if(Ya(Dh(e))&&n&&Xi("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked."),n){n=Qa(Dh(e));var r=ta(Eh(e))||void 0;$o(Qo,Eh(e));var i=!1;ii()?(n&&!n(t,r)||(i=!0,Lt(window.opener.location,nl(e,r))),n||window.close()):n&&!n(t,r)||(i=!0,Lt(window.location,nl(e,r))),i||e.reset()}else{n=t.user,t=t.credential,r=Ya(Dh(e)),i=ta(Eh(e))||void 0,$o(Qo,Eh(e));var o=!1;ii()?(r&&!r(n,t,i)||(o=!0,Lt(window.opener.location,nl(e,i))),r||window.close()):r&&!r(n,t,i)||(o=!0,Lt(window.location,nl(e,i))),o||e.reset()}}function nl(e,t){if(!(e=t||Dh(e).a.get("signInSuccessUrl")))throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return e}function rl(e){var t={code:e.code},n="";switch((t=t||{}).code){case"auth/email-already-in-use":n+="The email address is already used by another account";break;case"auth/requires-recent-login":n+=On();break;case"auth/too-many-requests":n+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":n+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":n+="That email address doesn't match an existing account";break;case"auth/user-token-expired":n+=On();break;case"auth/weak-password":n+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":n+="The email and password you entered don't match";break;case"auth/network-request-failed":n+="A network error has occurred";break;case"auth/invalid-phone-number":n+=Cn();break;case"auth/invalid-verification-code":n+=cn("Wrong code. Try again.");break;case"auth/code-expired":n+="This code is no longer valid";break;case"auth/expired-action-code":n+="This code has expired.";break;case"auth/invalid-action-code":n+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(t=cn(n).toString())return t;try{return JSON.parse(e.message),Yi("Internal error: "+e.message,void 0),xn().toString()}catch(t){return e.message}}function il(e,t,n,r){function i(){!function(e,t){ea(Yo,{tenantId:e.a},t)}(new so(e.h.tenantId||null),Eh(e)),Ph(e,t.I(C(e.dc,e),[u],(function(){if("file:"===(window.location&&window.location.protocol))return Ph(e,bh(e).then((function(n){t.m(),$o(Yo,Eh(e)),fs("callback",e,s,Hr(n))}),o))}),a))}function o(r){if($o(Yo,Eh(e)),!r.name||"cancel"!=r.name)switch(r=$c(r),r.code){case"auth/popup-blocked":i();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":t.a(rl(r));break;case"auth/admin-restricted-operation":t.m(),ja(Dh(e))?fs("handleUnauthorizedUser",e,s,null,n):fs("callback",e,s,Kr(r));break;default:t.m(),fs("callback",e,s,Kr(r))}}function a(n){$o(Yo,Eh(e)),n.name&&"cancel"==n.name||(Yi("signInWithRedirect: "+n.code,void 0),n=rl(n),"blank"==t.Ga&&Ka(Dh(e))?(t.m(),fs("providerSignIn",e,s,n)):t.a(n))}var s=ju(t),u=function(e,t,n){var r=Ca[t]&&er.auth[Ca[t]]?new er.auth[Ca[t]]:0==t.indexOf("saml.")?new er.auth.SAMLAuthProvider(t):new er.auth.OAuthProvider(t);if(!r)throw Error("Invalid Firebase Auth provider!");var i=Ba(Dh(e),t);if(r.addScope)for(var o=0;o<i.length;o++)r.addScope(i[o]);return i=Fa(Dh(e),t)||{},n&&(e=t==er.auth.GoogleAuthProvider.PROVIDER_ID?"login_hint":t==er.auth.GithubAuthProvider.PROVIDER_ID?"login":(e=Ra(Dh(e),t))&&e.Ob)&&(i[e]=n),r.setCustomParameters&&r.setCustomParameters(i),r}(e,n,r);Ga(Dh(e))==as?i():Ph(e,function(e,t){return Nh(e),xh(e,(function(n){return n&&!na(Eh(e))?n.linkWithPopup(t).then((function(e){return e}),(function(t){if(t&&"auth/email-already-in-use"==t.code&&t.email&&t.credential)throw t;return Bh(e,t)})):kh(e).signInWithPopup(t)}))}(e,u).then((function(n){t.m(),fs("callback",e,s,Hr(n))}),o))}function ol(e){return 1==(e=Oa(Dh(e))).length&&e[0]==er.auth.EmailAuthProvider.PROVIDER_ID}function al(e){return 1==(e=Oa(Dh(e))).length&&e[0]==er.auth.PhoneAuthProvider.PROVIDER_ID}function sl(e,t,n,r){ol(e)?r?fs("signIn",e,t,n,r):hl(e,t,n):e&&al(e)&&!r?fs("phoneSignInStart",e,t):e&&Ka(Dh(e))&&!r?fs("federatedRedirect",e,t,n):fs("providerSignIn",e,t,r,n)}function ul(e,t,n,r){var i=ju(t);Ph(e,t.I(C(kh(e).fetchSignInMethodsForEmail,kh(e)),[n],(function(o){t.m(),cl(e,i,o,n,r)}),(function(e){e=rl(e),t.a(e)})))}function cl(e,t,n,r,i,o){n.length||Ha(Dh(e))&&!Ha(Dh(e))?z(n,er.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?fs("passwordSignIn",e,t,r,o):1==n.length&&n[0]===er.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?Ha(Dh(e))?fs("sendEmailLinkForSignIn",e,t,r,(function(){fs("signIn",e,t)})):fs("unsupportedProvider",e,t,r):(n=Ma(n,Oa(Dh(e))))?(ia(new io(r),Eh(e)),fs("federatedSignIn",e,t,r,n,i)):fs("unsupportedProvider",e,t,r):La(Dh(e))?fs("handleUnauthorizedUser",e,t,r,er.auth.EmailAuthProvider.PROVIDER_ID):Ha(Dh(e))?fs("sendEmailLinkForSignIn",e,t,r,(function(){fs("signIn",e,t)})):fs("passwordSignUp",e,t,r,void 0,void 0,o)}function ll(e,t,n,r,i,o){var a=ju(t);Ph(e,t.I(C(e.Ib,e),[n,o],(function(){t.m(),fs("emailLinkSignInSent",e,a,n,r,o)}),i))}function hl(e,t,n){n?fs("prefilledEmailSignIn",e,t,n):fs("signIn",e,t)}function fl(){return be(si(),"oobCode")}function dl(){var e=be(si(),"continueUrl");return e?function(){Lt(window.location,e)}:null}function pl(e,t){Lu.call(this,Xu,void 0,t,"anonymousUserMismatch"),this.i=e}function ml(e){Lu.call(this,Hu,void 0,e,"callback")}function vl(e,t,n){if(n.user){var r={user:n.user,credential:n.credential,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo},i=na(Eh(e)),o=i&&i.g;if(o&&!function(e,t){if(t==e.email)return!0;if(e.providerData)for(var n=0;n<e.providerData.length;n++)if(t==e.providerData[n].email)return!0;return!1}(n.user,o))!function(e,t,n){var r=ju(t);Ph(e,jh(e).then((function(){t.m(),fs("emailMismatch",e,r,n)}),(function(e){e.name&&"cancel"==e.name||(e=rl(e.code),t.a(e))})))}(e,t,r);else{var a=i&&i.a;a?Ph(e,n.user.linkWithCredential(a).then((function(n){r={user:n.user,credential:a,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo},gl(e,t,r)}),(function(n){yl(e,t,n)}))):gl(e,t,r)}}else n=ju(t),t.m(),ra(Eh(e)),sl(e,n)}function gl(e,t,n){ra(Eh(e)),el(e,t,n)}function yl(e,t,n){var r=ju(t);ra(Eh(e)),n=rl(n),t.m(),sl(e,r,void 0,n)}function bl(e,t,n,r){var i=ju(t);Ph(e,kh(e).fetchSignInMethodsForEmail(n).then((function(o){t.m(),o.length?z(o,er.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?fs("passwordLinking",e,i,n):1==o.length&&o[0]===er.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?fs("emailLinkSignInLinking",e,i,n):(o=Ma(o,Oa(Dh(e))))?fs("federatedLinking",e,i,n,o,r):(ra(Eh(e)),fs("unsupportedProvider",e,i,n)):(ra(Eh(e)),fs("passwordRecovery",e,i,n,!1,An().toString()))}),(function(n){yl(e,t,n)})))}function wl(e,t){Lu.call(this,Zu,void 0,t,"differentDeviceError"),this.i=e}function _l(e,t,n,r){Lu.call(this,uc,{email:e,G:!!n},r,"emailChangeRevoke"),this.l=t,this.i=n||null}function kl(){return Zs(this,"firebaseui-id-new-password")}function Sl(){return Zs(this,"firebaseui-id-password-toggle")}function El(){this.Ra=!this.Ra;var e=Sl.call(this),t=kl.call(this);this.Ra?(t.type="text",ms(e,"firebaseui-input-toggle-off"),vs(e,"firebaseui-input-toggle-on")):(t.type="password",ms(e,"firebaseui-input-toggle-on"),vs(e,"firebaseui-input-toggle-off")),t.focus()}function Ml(){return Zs(this,"firebaseui-id-new-password-error")}function Tl(){this.Ra=!1;var e=kl.call(this);e.type="password";var t=Ml.call(this);tu(this,e,(function(){au(t)&&(eu(e,!0),iu(t))}));var n=Sl.call(this);ms(n,"firebaseui-input-toggle-on"),vs(n,"firebaseui-input-toggle-off"),function(e,t,n){Bn(e,I(Fn,t=new Ts(t))),Ps(Xs(e),t,"focusin",n)}(this,e,(function(){ms(n,"firebaseui-input-toggle-focus"),vs(n,"firebaseui-input-toggle-blur")})),function(e,t,n){Bn(e,I(Fn,t=new Ts(t))),Ps(Xs(e),t,"focusout",n)}(this,e,(function(){ms(n,"firebaseui-input-toggle-blur"),vs(n,"firebaseui-input-toggle-focus")})),ru(this,n,C(El,this))}function Cl(){var e=kl.call(this),t=Ml.call(this);return gs(e)?(eu(e,!0),iu(t),t=!0):(eu(e,!1),ou(t,cn("Enter your password").toString()),t=!1),t?gs(e):null}function Il(e,t,n){Lu.call(this,oc,{email:e},n,"passwordReset"),this.l=t}function xl(e,t,n,r,i){Lu.call(this,pc,{factorId:e,phoneNumber:n||null,G:!!r},i,"revertSecondFactorAdditionSuccess"),this.l=t,this.i=r||null}function Al(e,t,n,r){"auth/weak-password"==(r&&r.code)?(e=rl(r),eu(n.i(),!1),ou(n.w(),e),n.i().focus()):(n&&n.m(),(n=new Qc).render(t),wh(e,n))}function Pl(e,t){try{var n="number"==typeof e.selectionStart}catch(e){n=!1}n?(e.selectionStart=t,e.selectionEnd=t):Xe&&!ht("9")&&("textarea"==e.type&&(t=e.value.substring(0,t).replace(/(\r\n|\r|\n)/g,"\n").length),(e=e.createTextRange()).collapse(!0),e.move("character",t),e.select())}function Ol(e,t,n,r,i,o){Lu.call(this,Ju,{email:n},o,"emailLinkSignInConfirmation",{F:r,D:i}),this.l=e,this.u=t}function Rl(e,t,n,r,i){Lu.call(this,tc,{ga:e},i,"emailLinkSignInLinkingDifferentDevice",{F:n,D:r}),this.i=t}function Dl(e){Lu.call(this,Gu,void 0,e,"blank")}function Nl(e,t,n,r,i){var o=new Dl,a=new Ue(n),s=a.a.a.get(We.$a)||"",u=a.a.a.get(We.Sa)||"",c="1"===a.a.a.get(We.Qa),l=qe(a),h=a.a.a.get(We.PROVIDER_ID)||null;a=a.a.a.get(We.vb)||null,Rh(e,a);var f=!Xo(Jo,Eh(e)),d=r||function(e,t){var n=null;if(t=Xo(Jo,t))try{var r=Ao(e,t),i=JSON.parse(r);n=i&&i.email||null}catch(e){}return n}(u,Eh(e)),p=(r=function(e,t){var n=null;if(t=Xo(Zo,t))try{var r=Ao(e,t);n=JSON.parse(r)}catch(e){}return ao(n||null)}(u,Eh(e)))&&r.a;h&&p&&p.providerId!==h&&(p=null),o.render(t),wh(e,o),Ph(e,o.I((function(){var t=Hr(null);t=l&&f||f&&c?Kr(Error("anonymous-user-not-found")):function(e,t){var n=qe(new Ue(t));return n?(t=new Br((function(t,r){var i=Sh(e).onAuthStateChanged((function(e){i(),e&&e.isAnonymous&&e.uid===n?t(e):e&&e.isAnonymous&&e.uid!==n?r(Error("anonymous-user-mismatch")):r(Error("anonymous-user-not-found"))}));Ph(e,i)})),Ph(e,t),t):Hr(null)}(e,n).then((function(e){if(h&&!p)throw Error("pending-credential-not-found");return e}));var r=null;return t.then((function(t){return r=t,i?null:kh(e).checkActionCode(s)})).then((function(){return r}))}),[],(function(r){d?function(e,t,n,r,i,o){var a=ju(t);t.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",cn("Signing in...").toString());var s=null;i=(o?function(e,t,n,r,i){Nh(e);var o=i||null,a=er.auth.EmailAuthProvider.credentialWithLink(n,r);return n=o?kh(e).signInWithEmailLink(n,r).then((function(e){return e.user.linkWithCredential(o)})).then((function(){return jh(e)})).then((function(){return Bh(e,{code:"auth/email-already-in-use"},o)})):kh(e).fetchSignInMethodsForEmail(n).then((function(n){return n.length?Bh(e,{code:"auth/email-already-in-use"},a):t.linkWithCredential(a)})),Ph(e,n),n}(e,o,n,r,i):function(e,t,n,r){Nh(e);var i,o=r||null;return t=kh(e).signInWithEmailLink(t,n).then((function(e){if(i={user:e.user,credential:null,operationType:e.operationType,additionalUserInfo:e.additionalUserInfo},o)return e.user.linkWithCredential(o).then((function(e){i={user:e.user,credential:o,operationType:i.operationType,additionalUserInfo:e.additionalUserInfo}}))})).then((function(){jh(e)})).then((function(){return Sh(e).updateCurrentUser(i.user)})).then((function(){return i.user=Sh(e).currentUser,i})),Ph(e,t),t}(e,n,r,i)).then((function(n){$o(Zo,Eh(e)),$o(Jo,Eh(e)),t.h(),t.$("firebaseui-icon-done",cn("Signed in!").toString()),s=setTimeout((function(){t.h(),el(e,t,n,!0)}),1e3),Ph(e,(function(){t&&(t.h(),t.m()),clearTimeout(s)}))}),(function(i){if(t.h(),t.m(),!i.name||"cancel"!=i.name){var o=rl(i=$c(i));"auth/email-already-in-use"==i.code||"auth/credential-already-in-use"==i.code?($o(Zo,Eh(e)),$o(Jo,Eh(e))):"auth/invalid-email"==i.code?(o=cn("The email provided does not match the current sign-in session.").toString(),fs("emailLinkConfirmation",e,a,r,Ll,null,o)):sl(e,a,n,o)}})),Ph(e,i)}(e,o,d,n,p,r):c?(o.m(),fs("differentDeviceError",e,t)):(o.m(),fs("emailLinkConfirmation",e,t,n,Ll))}),(function(r){var i=void 0;if(!r||!r.name||"cancel"!=r.name)switch(o.m(),r&&r.message){case"anonymous-user-not-found":fs("differentDeviceError",e,t);break;case"anonymous-user-mismatch":fs("anonymousUserMismatch",e,t);break;case"pending-credential-not-found":fs("emailLinkNewDeviceLinking",e,t,n,jl);break;default:r&&(i=rl(r)),sl(e,t,void 0,i)}})))}function Ll(e,t,n,r){Nl(e,t,r,n,!0)}function jl(e,t,n){Nl(e,t,n)}function Bl(e,t,n,r,i,o){Lu.call(this,ec,{email:e,ga:t},o,"emailLinkSignInLinking",{F:r,D:i}),this.i=n}function Fl(e,t,n,r,i,o){Lu.call(this,Yu,{email:e},o,"emailLinkSignInSent",{F:r,D:i}),this.u=t,this.i=n}function Ul(e,t,n,r,i,o,a){Lu.call(this,yc,{jc:e,Qb:t},a,"emailMismatch",{F:i,D:o}),this.l=n,this.i=r}function ql(e,t,n,r,i){Lu.call(this,Qu,void 0,i,"emailNotReceived",{F:n,D:r}),this.l=e,this.i=t}function zl(e,t,n,r,i,o){Lu.call(this,nc,{email:e,ga:t},o,"federatedLinking",{F:r,D:i}),this.i=n}function Vl(e,t,n,r,i,o){Lu.call(this,Vu,{email:n,Ta:!!t},o,"passwordRecovery",{F:r,D:i}),this.l=e,this.u=t}function Wl(){return Zs(this,"firebaseui-id-name")}function Hl(){return Zs(this,"firebaseui-id-name-error")}function Kl(e,t,n,r,i,o,a,s,u){Lu.call(this,zu,{email:r,Tb:e,name:i,Ta:!!n,ia:!!s},u,"passwordSignUp",{F:o,D:a}),this.w=t,this.H=n,this.B=e}function Gl(e,t){var n=Wa(Dh(e)),r=t.j(),i=null;n&&(i=t.M());var o=t.P();if(r){if(n){if(!i)return void t.u().focus();i=ie(i)}if(o){var a=er.auth.EmailAuthProvider.credential(r,o);Ph(e,t.I(C(e.Yb,e),[r,o],(function(r){var o={user:r.user,credential:a,operationType:r.operationType,additionalUserInfo:r.additionalUserInfo};return n?(r=r.user.updateProfile({displayName:i}).then((function(){return el(e,t,o)})),Ph(e,r),r):el(e,t,o)}),(function(n){if(!n.name||"cancel"!=n.name){var i=$c(n);switch(n=rl(i),i.code){case"auth/email-already-in-use":return function(e,t,n,r){function i(){var e=rl(r);eu(t.i(),!1),ou(t.U(),e),t.i().focus()}var o=kh(e).fetchSignInMethodsForEmail(n).then((function(r){r.length?i():(r=ju(t),t.m(),fs("passwordRecovery",e,r,n,!1,An().toString()))}),(function(){i()}));return Ph(e,o),o}(e,t,r,i);case"auth/too-many-requests":n=cn("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":eu(t.l(),!1),ou(t.ba(),n);break;case"auth/admin-restricted-operation":ja(Dh(e))?(n=ju(t),t.m(),fs("handleUnauthorizedUser",e,n,r,er.auth.EmailAuthProvider.PROVIDER_ID)):t.a(n);break;default:Yi(i="setAccountInfo: "+Oo(i),void 0),t.a(n)}}})))}else t.l().focus()}else t.i().focus()}function Yl(){return Zs(this,"firebaseui-id-phone-confirmation-code")}function Ql(){return Zs(this,"firebaseui-id-phone-confirmation-code-error")}function Jl(){return Zs(this,"firebaseui-id-resend-countdown")}function Zl(e,t,n,r,i,o,a,s,u){Lu.call(this,_c,{phoneNumber:i},u,"phoneSignInFinish",{F:a,D:s}),this.jb=o,this.i=new Cs(1e3),this.B=o,this.P=e,this.l=t,this.H=n,this.M=r}s(Fc,Lu),Fc.prototype.v=function(){this.P(),this.ea(),this.ba(this.w,this.H),Bu(this,this.l(),this.i()),Fu(this,this.i(),this.w),gs(this.l())?this.i().focus():this.l().focus(),Lu.prototype.v.call(this)},Fc.prototype.o=function(){this.H=this.w=null,Lu.prototype.o.call(this)},x(Fc.prototype,{l:Dc,U:Nc,P:Lc,M:jc,j:Bc,i:Ic,B:xc,ea:Ac,u:Pc,ua:Mc,pa:Tc,ba:Cc}),R(Uc,Lu),Uc.prototype.v=function(){this.i&&(this.u(this.i),this.l().focus()),Uc.K.v.call(this)},Uc.prototype.o=function(){this.i=null,Uc.K.o.call(this)},x(Uc.prototype,{l:Mc,w:Tc,u:Cc}),R(qc,Uc),R(zc,Uc),R(Vc,Uc),R(Wc,Uc),R(Hc,Uc),R(Kc,Uc),R(Gc,Uc),R(Yc,Uc),R(Qc,Uc),R(Jc,Uc),R(Zc,Uc),R(Xc,Uc),s(pl,Lu),pl.prototype.v=function(){var e=this;ru(this,this.l(),(function(){e.i()})),this.l().focus(),Lu.prototype.v.call(this)},pl.prototype.o=function(){this.i=null,Lu.prototype.o.call(this)},x(pl.prototype,{l:Tc}),hs.anonymousUserMismatch=function(e,t){var n=new pl((function(){n.m(),sl(e,t)}));n.render(t),wh(e,n)},s(ml,Lu),ml.prototype.I=function(e,t,n,r){return e.apply(null,t).then(n,r)},hs.callback=function(e,t,n){var r=new ml;r.render(t),wh(e,r),n=n||bh(e),Ph(e,n.then((function(t){vl(e,r,t)}),(function(n){if((n=$c(n))&&("auth/account-exists-with-different-credential"==n.code||"auth/email-already-in-use"==n.code)&&n.email&&n.credential)ia(new io(n.email,n.credential),Eh(e)),bl(e,r,n.email);else if(n&&"auth/user-cancelled"==n.code){var i=na(Eh(e)),o=rl(n);i&&i.a?bl(e,r,i.g,o):i?ul(e,r,i.g,o):yl(e,r,n)}else n&&"auth/credential-already-in-use"==n.code||(n&&"auth/operation-not-supported-in-this-environment"==n.code&&ol(e)?vl(e,r,{user:null,credential:null}):n&&"auth/admin-restricted-operation"==n.code&&ja(Dh(e))?(r.m(),ra(Eh(e)),fs("handleUnauthorizedUser",e,t,null,null)):yl(e,r,n))})))},s(wl,Lu),wl.prototype.v=function(){var e=this;ru(this,this.l(),(function(){e.i()})),this.l().focus(),Lu.prototype.v.call(this)},wl.prototype.o=function(){this.i=null,Lu.prototype.o.call(this)},x(wl.prototype,{l:Tc}),hs.differentDeviceError=function(e,t){var n=new wl((function(){n.m(),sl(e,t)}));n.render(t),wh(e,n)},s(_l,Lu),_l.prototype.v=function(){var e=this;ru(this,Zs(this,"firebaseui-id-reset-password-link"),(function(){e.l()})),this.i&&(this.w(this.i),this.u().focus()),Lu.prototype.v.call(this)},_l.prototype.o=function(){this.l=this.i=null,Lu.prototype.o.call(this)},x(_l.prototype,{u:Mc,B:Tc,w:Cc}),s(Il,Lu),Il.prototype.v=function(){this.H(),this.B(this.l),Fu(this,this.i(),this.l),this.i().focus(),Lu.prototype.v.call(this)},Il.prototype.o=function(){this.l=null,Lu.prototype.o.call(this)},x(Il.prototype,{i:kl,w:Ml,M:Sl,H:Tl,u:Cl,U:Mc,P:Tc,B:Cc}),s(xl,Lu),xl.prototype.v=function(){var e=this;ru(this,Zs(this,"firebaseui-id-reset-password-link"),(function(){e.l()})),this.i&&(this.w(this.i),this.u().focus()),Lu.prototype.v.call(this)},xl.prototype.o=function(){this.l=this.i=null,Lu.prototype.o.call(this)},x(xl.prototype,{u:Mc,B:Tc,w:Cc}),hs.passwordReset=function(e,t,n,r){Ph(e,kh(e).verifyPasswordResetCode(n).then((function(i){var o=new Il(i,(function(){!function(e,t,n,r,i){var o=n.u();o&&Ph(e,n.I(C(kh(e).confirmPasswordReset,kh(e)),[r,o],(function(){n.m();var r=new Yc(i);r.render(t),wh(e,r)}),(function(r){Al(e,t,n,r)})))}(e,t,o,n,r)}));o.render(t),wh(e,o)}),(function(){Al(e,t)})))},hs.emailChangeRevocation=function(e,t,n){var r=null;Ph(e,kh(e).checkActionCode(n).then((function(t){return r=t.data.email,kh(e).applyActionCode(n)})).then((function(){!function(e,t,n){var r=new _l(n,(function(){Ph(e,r.I(C(kh(e).sendPasswordResetEmail,kh(e)),[n],(function(){r.m(),(r=new qc(n,void 0,za(Dh(e)),Va(Dh(e)))).render(t),wh(e,r)}),(function(){r.a(In().toString())})))}));r.render(t),wh(e,r)}(e,t,r)}),(function(){var n=new Jc;n.render(t),wh(e,n)})))},hs.emailVerification=function(e,t,n,r){Ph(e,kh(e).applyActionCode(n).then((function(){var n=new zc(r);n.render(t),wh(e,n)}),(function(){var n=new Vc;n.render(t),wh(e,n)})))},hs.revertSecondFactorAddition=function(e,t,n){var r=null,i=null;Ph(e,kh(e).checkActionCode(n).then((function(t){return r=t.data.email,i=t.data.multiFactorInfo,kh(e).applyActionCode(n)})).then((function(){!function(e,t,n,r){var i=new xl(r.factorId,(function(){i.I(C(kh(e).sendPasswordResetEmail,kh(e)),[n],(function(){i.m(),(i=new qc(n,void 0,za(Dh(e)),Va(Dh(e)))).render(t),wh(e,i)}),(function(){i.a(In().toString())}))}),r.phoneNumber);i.render(t),wh(e,i)}(e,t,r,i)}),(function(){var n=new Kc;n.render(t),wh(e,n)})))},hs.verifyAndChangeEmail=function(e,t,n,r){var i=null;Ph(e,kh(e).checkActionCode(n).then((function(t){return i=t.data.email,kh(e).applyActionCode(n)})).then((function(){var n=new Wc(i,r);n.render(t),wh(e,n)}),(function(){var n=new Hc;n.render(t),wh(e,n)})))},s(Ol,Lu),Ol.prototype.v=function(){this.w(this.l),this.B(this.l,this.u),this.i().focus(),Pl(this.i(),(this.i().value||"").length),Lu.prototype.v.call(this)},Ol.prototype.o=function(){this.u=this.l=null,Lu.prototype.o.call(this)},x(Ol.prototype,{i:Dc,M:Nc,w:Lc,H:jc,j:Bc,U:Mc,P:Tc,B:Cc}),hs.emailLinkConfirmation=function(e,t,n,r,i,o){var a=new Ol((function(){var i=a.j();i?(a.m(),r(e,t,i,n)):a.i().focus()}),(function(){a.m(),sl(e,t,i||void 0)}),i||void 0,za(Dh(e)),Va(Dh(e)));a.render(t),wh(e,a),o&&a.a(o)},s(Rl,Lu),Rl.prototype.v=function(){this.u(this.i),this.l().focus(),Lu.prototype.v.call(this)},Rl.prototype.o=function(){this.i=null,Lu.prototype.o.call(this)},x(Rl.prototype,{l:Mc,u:Cc}),hs.emailLinkNewDeviceLinking=function(e,t,n,r){var i=new Ue(n);if(n=i.a.a.get(We.PROVIDER_ID)||null,ze(i,null),n){var o=new Rl(Ra(Dh(e),n),(function(){o.m(),r(e,t,i.toString())}),za(Dh(e)),Va(Dh(e)));o.render(t),wh(e,o)}else sl(e,t)},s(Dl,Lu),hs.emailLinkSignInCallback=Nl,s(Bl,Lu),Bl.prototype.v=function(){this.u(this.i),this.l().focus(),Lu.prototype.v.call(this)},Bl.prototype.o=function(){this.i=null,Lu.prototype.o.call(this)},x(Bl.prototype,{l:Mc,u:Cc}),hs.emailLinkSignInLinking=function(e,t,n){var r=na(Eh(e));if(ra(Eh(e)),r){var i=r.a.providerId,o=new Bl(n,Ra(Dh(e),i),(function(){!function(e,t,n,r){var i=ju(t);ll(e,t,n,(function(){sl(e,i,n)}),(function(r){if(!r.name||"cancel"!=r.name){var o=rl(r);r&&"auth/network-request-failed"==r.code?t.a(o):(t.m(),sl(e,i,n,o))}}),r)}(e,o,n,r)}),za(Dh(e)),Va(Dh(e)));o.render(t),wh(e,o)}else sl(e,t)},s(Fl,Lu),Fl.prototype.v=function(){var e=this;ru(this,this.l(),(function(){e.i()})),ru(this,Zs(this,"firebaseui-id-trouble-getting-email-link"),(function(){e.u()})),this.l().focus(),Lu.prototype.v.call(this)},Fl.prototype.o=function(){this.i=this.u=null,Lu.prototype.o.call(this)},x(Fl.prototype,{l:Tc}),hs.emailLinkSignInSent=function(e,t,n,r,i){var o=new Fl(n,(function(){o.m(),fs("emailNotReceived",e,t,n,r,i)}),(function(){o.m(),r()}),za(Dh(e)),Va(Dh(e)));o.render(t),wh(e,o)},s(Ul,Lu),Ul.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),Lu.prototype.v.call(this)},Ul.prototype.o=function(){this.i=null,Lu.prototype.o.call(this)},x(Ul.prototype,{u:Mc,B:Tc,w:Cc}),hs.emailMismatch=function(e,t,n){var r=na(Eh(e));if(r){var i=new Ul(n.user.email,r.g,(function(){var t=i;ra(Eh(e)),el(e,t,n)}),(function(){var t=n.credential.providerId,o=ju(i);i.m(),r.a?fs("federatedLinking",e,o,r.g,t):fs("federatedSignIn",e,o,r.g,t)}),za(Dh(e)),Va(Dh(e)));i.render(t),wh(e,i)}else sl(e,t)},s(ql,Lu),ql.prototype.v=function(){var e=this;ru(this,this.u(),(function(){e.i()})),ru(this,this.Da(),(function(){e.l()})),this.u().focus(),Lu.prototype.v.call(this)},ql.prototype.Da=function(){return Zs(this,"firebaseui-id-resend-email-link")},ql.prototype.o=function(){this.i=this.l=null,Lu.prototype.o.call(this)},x(ql.prototype,{u:Tc}),hs.emailNotReceived=function(e,t,n,r,i){var o=new ql((function(){ll(e,o,n,r,(function(e){e=rl(e),o.a(e)}),i)}),(function(){o.m(),sl(e,t,n)}),za(Dh(e)),Va(Dh(e)));o.render(t),wh(e,o)},s(zl,Lu),zl.prototype.v=function(){this.u(this.i),this.l().focus(),Lu.prototype.v.call(this)},zl.prototype.o=function(){this.i=null,Lu.prototype.o.call(this)},x(zl.prototype,{l:Mc,u:Cc}),hs.federatedLinking=function(e,t,n,r,i){var o=na(Eh(e));if(o&&o.a){var a=new zl(n,Ra(Dh(e),r),(function(){il(e,a,r,n)}),za(Dh(e)),Va(Dh(e)));a.render(t),wh(e,a),i&&a.a(i)}else sl(e,t)},hs.federatedRedirect=function(e,t,n){var r=new Dl;r.render(t),wh(e,r),il(e,r,t=Oa(Dh(e))[0],n)},hs.federatedSignIn=function(e,t,n,r,i){var o=new zl(n,Ra(Dh(e),r),(function(){il(e,o,r,n)}),za(Dh(e)),Va(Dh(e)));o.render(t),wh(e,o),i&&o.a(i)},hs.passwordLinking=function(e,t,n){var r=na(Eh(e));ra(Eh(e));var i=r&&r.a;if(i){var o=new Oc(n,(function(){!function(e,t,n,r){var i=t.u();i?Ph(e,t.I(C(e.Xb,e),[n,i],(function(n){return n=n.user.linkWithCredential(r).then((function(n){return el(e,t,{user:n.user,credential:r,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo})})),Ph(e,n),n}),(function(e){if(!e.name||"cancel"!=e.name)switch(e.code){case"auth/wrong-password":eu(t.i(),!1),ou(t.B(),rl(e));break;case"auth/too-many-requests":t.a(rl(e));break;default:Yi("signInWithEmailAndPassword: "+e.message,void 0),t.a(rl(e))}}))):t.i().focus()}(e,o,n,i)}),(function(){o.m(),fs("passwordRecovery",e,t,n)}),za(Dh(e)),Va(Dh(e)));o.render(t),wh(e,o)}else sl(e,t)},s(Vl,Lu),Vl.prototype.v=function(){this.B(),this.H(this.l,this.u),gs(this.i())||this.i().focus(),Fu(this,this.i(),this.l),Lu.prototype.v.call(this)},Vl.prototype.o=function(){this.u=this.l=null,Lu.prototype.o.call(this)},x(Vl.prototype,{i:Dc,w:Nc,B:Lc,M:jc,j:Bc,U:Mc,P:Tc,H:Cc}),hs.passwordRecovery=function(e,t,n,r,i){var o=new Vl((function(){!function(e,t){var n=t.j();if(n){var r=ju(t);Ph(e,t.I(C(kh(e).sendPasswordResetEmail,kh(e)),[n],(function(){t.m();var i=new qc(n,(function(){i.m(),sl(e,r)}),za(Dh(e)),Va(Dh(e)));i.render(r),wh(e,i)}),(function(e){eu(t.i(),!1),ou(t.w(),rl(e))})))}else t.i().focus()}(e,o)}),r?void 0:function(){o.m(),sl(e,t)},n,za(Dh(e)),Va(Dh(e)));o.render(t),wh(e,o),i&&o.a(i)},hs.passwordSignIn=function(e,t,n,r){var i=new Fc((function(){!function(e,t){var n=t.j(),r=t.u();if(n)if(r){var i=er.auth.EmailAuthProvider.credential(n,r);Ph(e,t.I(C(e.bc,e),[n,r],(function(n){return el(e,t,{user:n.user,credential:i,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo})}),(function(e){if(!e.name||"cancel"!=e.name)switch(e.code){case"auth/email-already-in-use":break;case"auth/email-exists":eu(t.l(),!1),ou(t.U(),rl(e));break;case"auth/too-many-requests":case"auth/wrong-password":eu(t.i(),!1),ou(t.B(),rl(e));break;default:Yi("verifyPassword: "+e.message,void 0),t.a(rl(e))}})))}else t.i().focus();else t.l().focus()}(e,i)}),(function(){var n=i.M();i.m(),fs("passwordRecovery",e,t,n)}),n,za(Dh(e)),Va(Dh(e)),r);i.render(t),wh(e,i)},s(Kl,Lu),Kl.prototype.v=function(){this.ea(),this.B&&this.Ja(),this.ua(),this.pa(this.w,this.H),this.B?(Bu(this,this.i(),this.u()),Bu(this,this.u(),this.l())):Bu(this,this.i(),this.l()),this.w&&Fu(this,this.l(),this.w),gs(this.i())?this.B&&!gs(this.u())?this.u().focus():this.l().focus():this.i().focus(),Lu.prototype.v.call(this)},Kl.prototype.o=function(){this.H=this.w=null,Lu.prototype.o.call(this)},x(Kl.prototype,{i:Dc,U:Nc,ea:Lc,jb:jc,j:Bc,u:Wl,Cc:Hl,Ja:function(){var e=Wl.call(this),t=Hl.call(this);tu(this,e,(function(){au(t)&&(eu(e,!0),iu(t))}))},M:function(){var e=Wl.call(this),t=Hl.call(this),n=gs(e);return eu(e,n=!/^[\s\xa0]*$/.test(null==n?"":String(n))),n?(iu(t),t=!0):(ou(t,cn("Enter your account name").toString()),t=!1),t?Q(gs(e)):null},l:kl,ba:Ml,lb:Sl,ua:Tl,P:Cl,Nb:Mc,Mb:Tc,pa:Cc}),hs.passwordSignUp=function(e,t,n,r,i,o){var a=new Kl(Wa(Dh(e)),(function(){Gl(e,a)}),i?void 0:function(){a.m(),sl(e,t)},n,r,za(Dh(e)),Va(Dh(e)),o);a.render(t),wh(e,a)},s(Zl,Lu),Zl.prototype.v=function(){var e=this;this.U(this.jb),rr(this.i,"tick",this.w,!1,this),this.i.start(),ru(this,Zs(this,"firebaseui-id-change-phone-number-link"),(function(){e.P()})),ru(this,this.Da(),(function(){e.M()})),this.Ja(this.l),this.ea(this.l,this.H),this.u().focus(),Lu.prototype.v.call(this)},Zl.prototype.o=function(){this.M=this.H=this.l=this.P=null,Is(this.i),ar(this.i,"tick",this.w),this.i=null,Lu.prototype.o.call(this)},Zl.prototype.w=function(){--this.B,0<this.B?this.U(this.B):(Is(this.i),ar(this.i,"tick",this.w),this.ua(),this.lb())},x(Zl.prototype,{u:Yl,pa:Ql,Ja:function(e){var t=Yl.call(this),n=Ql.call(this);tu(this,t,(function(){au(n)&&(eu(t,!0),iu(n))})),e&&nu(this,t,(function(){e()}))},ba:function(){var e=Q(gs(Yl.call(this))||"");return/^\d{6}$/.test(e)?e:null},Fb:Jl,U:function(e){Gt(Jl.call(this),cn("Resend code in "+(9<e?"0:":"0:0")+e).toString())},ua:function(){iu(this.Fb())},Da:function(){return Zs(this,"firebaseui-id-resend-link")},lb:function(){ou(this.Da())},Nb:Mc,Mb:Tc,ea:Cc}),hs.phoneSignInFinish=function(e,t,n,r,i,o){var a=new Zl((function(){a.m(),fs("phoneSignInStart",e,t,n)}),(function(){!function(e,t,n,r){function i(e){t.u().focus(),eu(t.u(),!1),ou(t.pa(),e)}var o=t.ba();o?(t.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",cn("Verifying...").toString()),Ph(e,t.I(C(r.confirm,r),[o],(function(n){t.h(),t.$("firebaseui-icon-done",cn("Verified!").toString());var r=setTimeout((function(){t.h(),t.m();var r={user:Sh(e).currentUser,credential:null,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo};el(e,t,r,!0)}),1e3);Ph(e,(function(){t&&t.h(),clearTimeout(r)}))}),(function(r){if(r.name&&"cancel"==r.name)t.h();else{var o=$c(r);switch(r=rl(o),o.code){case"auth/credential-already-in-use":t.h();break;case"auth/code-expired":o=ju(t),t.h(),t.m(),fs("phoneSignInStart",e,o,n,r);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":t.h(),i(r);break;default:t.h(),t.a(r)}}})))):i(cn("Wrong code. Try again.").toString())}(e,a,n,i)}),(function(){a.m(),sl(e,t)}),(function(){a.m(),fs("phoneSignInStart",e,t,n)}),Ea(n),r,za(Dh(e)),Va(Dh(e)));a.render(t),wh(e,a),o&&a.a(o)};var Xl=!(Xe||Ge("Safari")&&!(Ye()||Ge("Coast")||Ge("Opera")||Ge("Edge")||Ge("Firefox")||Ge("FxiOS")||Ge("Silk")||Ge("Android")));function $l(e,t){return/-[a-z]/.test(t)?null:Xl&&e.dataset?!Ge("Android")||Ye()||Ge("Firefox")||Ge("FxiOS")||Ge("Opera")||Ge("Silk")||t in e.dataset?void 0===(e=e.dataset[t])?null:e:null:e.getAttribute("data-"+String(t).replace(/([A-Z])/g,"-$1").toLowerCase())}function eh(e,t,n){var r=this;e=tn(_u,{items:e},null,this.s),Iu.call(this,e,!0,!0),n&&(n=function(e,t){e=(e||document).getElementsByTagName("BUTTON");for(var n=0;n<e.length;n++)if($l(e[n],"listboxid")===t)return e[n];return null}(e,n))&&(n.focus(),function(e,t){var n=(t=t||Wt(document))||Wt(document),r=Ks(e),i=Ks(n);if(!Xe||9<=Number(ct)){a=Ws(n,"borderLeftWidth");var o=Ws(n,"borderRightWidth");s=Ws(n,"borderTopWidth"),u=Ws(n,"borderBottomWidth"),o=new Vs(parseFloat(s),parseFloat(o),parseFloat(u),parseFloat(a))}else{var a=Ys(n,"borderLeft");o=Ys(n,"borderRight");var s=Ys(n,"borderTop"),u=Ys(n,"borderBottom");o=new Vs(s,o,u,a)}n==Wt(document)?(a=r.a-n.scrollLeft,r=r.g-n.scrollTop,!Xe||10<=Number(ct)||(a+=o.left,r+=o.top)):(a=r.a-i.a-o.left,r=r.g-i.g-o.top),i=e.offsetWidth,o=e.offsetHeight,s=nt&&!i&&!o,e=f(i)&&!s||!e.getBoundingClientRect?new Bt(i,o):new Bt((e=Hs(e)).right-e.left,e.bottom-e.top),i=n.clientHeight-e.height,o=n.scrollLeft,s=n.scrollTop,n=new jt(o+=Math.min(a,Math.max(a-(n.clientWidth-e.width),0)),s+=Math.min(r,Math.max(r-i,0))),t.scrollLeft=n.a,t.scrollTop=n.g}(n,e)),ru(this,e,(function(e){(e=(e=Yt(e.target,"firebaseui-id-list-box-dialog-button"))&&$l(e,"listboxid"))&&(xu.call(r),t(e))}))}function th(){return Zs(this,"firebaseui-id-phone-number")}function nh(){return Zs(this,"firebaseui-id-country-selector")}function rh(){return Zs(this,"firebaseui-id-phone-number-error")}function ih(e,t){var n=e.a,r=oh("1-US-0",n),i=null;if(!(i=t&&oh(t,n)?t:r?"1-US-0":0<n.length?n[0].c:null))throw Error("No available default country");uh.call(this,i,e)}function oh(e,t){return!(!(e=va(e))||!z(t,e))}function ah(e){return"firebaseui-flag-"+e.f}function sh(e){var t=this;eh.call(this,function(e){return e.map((function(e){return{id:e.c,Ma:"firebaseui-flag "+ah(e),label:e.name+" ‎+"+e.b}}))}(e.a),(function(n){uh.call(t,n,e,!0),t.O().focus()}),this.Ba)}function uh(e,t,n){var r=va(e);r&&(n&&((t=ma(t,n=Q(gs(th.call(this))||""))).length&&t[0].b!=r.b&&(n="+"+r.b+n.substr(t[0].b.length+1),ys(th.call(this),n))),t=va(this.Ba),this.Ba=e,e=Zs(this,"firebaseui-id-country-selector-flag"),t&&vs(e,ah(t)),ms(e,ah(r)),Gt(Zs(this,"firebaseui-id-country-selector-code"),"‎+"+r.b))}function ch(e,t,n,r,i,o,a,s,u,c){Lu.call(this,wc,{Gb:t,Aa:u||null,Va:!!n,ia:!!o},c,"phoneSignInStart",{F:r,D:i}),this.H=s||null,this.M=t,this.l=e,this.w=n||null,this.pa=a||null}function lh(e,t,n,r){try{var i=t.U(es)}catch(e){return}i?Xa?(t.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",cn("Verifying...").toString()),Ph(e,t.I(C(e.cc,e),[Ea(i),n],(function(n){var r=ju(t);t.$("firebaseui-icon-done",cn("Code sent!").toString());var o=setTimeout((function(){t.h(),t.m(),fs("phoneSignInFinish",e,r,i,15,n)}),1e3);Ph(e,(function(){t&&t.h(),clearTimeout(o)}))}),(function(n){if(t.h(),!n.name||"cancel"!=n.name){grecaptcha.reset(ts),Xa=null;var r=n&&n.message||"";if(n.code)switch(n.code){case"auth/too-many-requests":r=cn("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":return t.O().focus(),void ou(t.B(),Cn().toString());case"auth/admin-restricted-operation":if(ja(Dh(e)))return n=ju(t),t.m(),void fs("handleUnauthorizedUser",e,n,Ea(i),er.auth.PhoneAuthProvider.PROVIDER_ID);r=rl(n);break;default:r=rl(n)}t.a(r)}})))):$a?ou(t.u(),cn("Solve the reCAPTCHA").toString()):!$a&&r&&t.i().click():(t.O().focus(),ou(t.B(),Cn().toString()))}function hh(e,t,n,r,i){Lu.call(this,bc,{Sb:t},i,"providerSignIn",{F:n,D:r}),this.i=e}function fh(e,t,n,r,i,o,a){Lu.call(this,Uu,{email:n,Va:!!t,ia:!!o},a,"signIn",{F:r,D:i}),this.i=e,this.u=t}function dh(e,t,n,r,i,o,a){Lu.call(this,rc,{kc:e,yb:n,Eb:!!r},a,"unauthorizedUser",{F:i,D:o}),this.l=t,this.i=r}function ph(e,t,n,r,i,o){Lu.call(this,ic,{email:e},o,"unsupportedProvider",{F:r,D:i}),this.l=t,this.i=n}function mh(e,t){this.$=!1;var n=yh(t);if(gh[n])throw Error('An AuthUI instance already exists for the key "'+n+'"');gh[n]=this,this.a=e,this.u=null,this.Y=!1,vh(this.a),this.h=er.initializeApp({apiKey:e.app.options.apiKey,authDomain:e.app.options.authDomain},e.app.name+"-firebaseui-temp").auth(),(e=e.emulatorConfig)&&(n=e.port,this.h.useEmulator(e.protocol+"://"+e.host+(null===n?"":":"+n),e.options)),vh(this.h),this.h.setPersistence&&this.h.setPersistence(er.auth.Auth.Persistence.SESSION),this.oa=t,this.ca=new Ia,this.g=this.T=this.i=this.J=this.O=null,this.s=[],this.Z=!1,this.l=Mi.Xa(),this.j=this.C=null,this.da=this.A=!1}function vh(e){e&&e.INTERNAL&&e.INTERNAL.logFramework&&e.INTERNAL.logFramework("FirebaseUI-web")}s(ch,Lu),ch.prototype.v=function(){this.ea(this.pa,this.H),this.P(this.l,this.w||void 0),this.M||Bu(this,this.O(),this.i()),Fu(this,this.i(),this.l),this.O().focus(),Pl(this.O(),(this.O().value||"").length),Lu.prototype.v.call(this)},ch.prototype.o=function(){this.w=this.l=null,Lu.prototype.o.call(this)},x(ch.prototype,{Cb:Au,O:th,B:rh,ea:function(e,t,n){var r=this,i=th.call(this),o=nh.call(this),a=rh.call(this),s=e||_a,u=s.a;if(0==u.length)throw Error("No available countries provided.");ih.call(r,s,t),ru(this,o,(function(){sh.call(r,s)})),tu(this,i,(function(){au(a)&&(eu(i,!0),iu(a));var e=Q(gs(i)||""),t=va(this.Ba),n=ma(s,e);e=oh("1-US-0",u),n.length&&n[0].b!=t.b&&(t=n[0],uh.call(r,"1"==t.b&&e?"1-US-0":t.c,s))})),n&&nu(this,i,(function(){n()}))},U:function(e){var t=Q(gs(th.call(this))||""),n=(e=e||_a).a,r=ma(_a,t);if(r.length&&!z(n,r[0]))throw ys(th.call(this)),th.call(this).focus(),ou(rh.call(this),cn("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");return n=va(this.Ba),r.length&&r[0].b!=n.b&&uh.call(this,r[0].c,e),r.length&&(t=t.substr(r[0].b.length+1)),t?new ka(this.Ba,t):null},Ja:nh,ba:function(){return Zs(this,"firebaseui-recaptcha-container")},u:function(){return Zs(this,"firebaseui-id-recaptcha-error")},i:Mc,ua:Tc,P:Cc}),hs.phoneSignInStart=function(e,t,n,r){var i=function(e){var t=null;if(Aa(e).forEach((function(e){e.provider==er.auth.PhoneAuthProvider.PROVIDER_ID&&k(e.recaptchaParameters)&&!Array.isArray(e.recaptchaParameters)&&(t=ae(e.recaptchaParameters))})),t){var n=[];ls.forEach((function(e){void 0!==t[e]&&(n.push(e),delete t[e])})),n.length&&Xi('The following provided "recaptchaParameters" keys are not allowed: '+n.join(", "))}return t}(Dh(e))||{};Xa=null,$a=!(i&&"invisible"===i.size);var o=al(e),a=function(e){var t=(e=Pa(e,er.auth.PhoneAuthProvider.PROVIDER_ID))&&e.defaultCountry||null;t=t&&ga(t);var n=null;return e&&"string"==typeof e.loginHint&&(n=Sa(e.loginHint)),t&&t[0]||n&&va(n.a)||null}(Dh(e)),s=o?function(e){var t=null;return(e=Pa(e,er.auth.PhoneAuthProvider.PROVIDER_ID))&&"string"==typeof e.loginHint&&(t=Sa(e.loginHint)),e&&e.defaultNationalNumber||t&&t.Aa||null}(Dh(e)):null;a=n&&n.a||a&&a.c||null,n=n&&n.Aa||s,(s=Ua(Dh(e)))&&ba(s),es=s?new pa(Ua(Dh(e))):_a;var u=new ch((function(t){lh(e,u,c,!(!t||!t.keyCode))}),$a,o?null:function(){c.clear(),u.m(),sl(e,t)},za(Dh(e)),Va(Dh(e)),o,es,a,n);u.render(t),wh(e,u),r&&u.a(r),i.callback=function(t){u.u()&&iu(u.u()),Xa=t,$a||lh(e,u,c)},i["expired-callback"]=function(){Xa=null};var c=new er.auth.RecaptchaVerifier($a?u.ba():u.i(),i,Sh(e).app);Ph(e,u.I(C(c.render,c),[],(function(e){ts=e}),(function(n){n.name&&"cancel"==n.name||(n=rl(n),u.m(),sl(e,t,void 0,n))})))},hs.prefilledEmailSignIn=function(e,t,n){var r=new Dl;r.render(t),wh(e,r),Ph(e,r.I(C(kh(e).fetchSignInMethodsForEmail,kh(e)),[n],(function(i){r.m();var o=!(!ol(e)||!Mh(e));cl(e,t,i,n,void 0,o)}),(function(i){i=rl(i),r.m(),fs("signIn",e,t,n,i)})))},s(hh,Lu),hh.prototype.v=function(){this.l(this.i),Lu.prototype.v.call(this)},hh.prototype.o=function(){this.i=null,Lu.prototype.o.call(this)},x(hh.prototype,{l:function(e){function t(t){e(t)}for(var n=this.g?Ut("firebaseui-id-idp-button",this.g||this.s.a):[],r=0;r<n.length;r++){var i=n[r];ru(this,i,I(t,$l(i,"providerId")))}}}),hs.providerSignIn=function(e,t,n,r){var i=new hh((function(n){n==er.auth.EmailAuthProvider.PROVIDER_ID?(i.m(),hl(e,t,r)):n==er.auth.PhoneAuthProvider.PROVIDER_ID?(i.m(),fs("phoneSignInStart",e,t)):"anonymous"==n?function(e,t){Ph(e,t.I(C(e.$b,e),[],(function(n){return t.m(),el(e,t,n,!0)}),(function(e){e.name&&"cancel"==e.name||(Yi("ContinueAsGuest: "+e.code,void 0),e=rl(e),t.a(e))})))}(e,i):il(e,i,n,r),Nh(e),e.l.cancel()}),Da(Dh(e)),za(Dh(e)),Va(Dh(e)));i.render(t),wh(e,i),n&&i.a(n),function(e){Nh(e);try{Ti(e.l,Na(Dh(e)),function(e){var t;return Nh(e),(t=e.Z)||(e=Fa(e=Dh(e),er.auth.GoogleAuthProvider.PROVIDER_ID),t=!(!e||"select_account"!==e.prompt)),t}(e)).then((function(t){return!!e.g&&function(e,t,n){if(n&&n.credential&&n.clientId===Na(Dh(e))){if(Ba(Dh(e),er.auth.GoogleAuthProvider.PROVIDER_ID).length){try{var r=JSON.parse(atob(n.credential.split(".")[1])).email}catch(i){}return il(e,t,er.auth.GoogleAuthProvider.PROVIDER_ID,r),Hr(!0)}return i=er.auth.GoogleAuthProvider.credential(n.credential),o=!1,i=t.I(C(e.ac,e),[i],(function(n){var r=ju(t);t.m(),fs("callback",e,r,Hr(n)),o=!0}),(function(n){if(!(n.name&&"cancel"==n.name||n&&"auth/credential-already-in-use"==n.code))if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential){var r=ju(t);t.m(),fs("callback",e,r,Kr(n))}else n&&"auth/admin-restricted-operation"==n.code&&ja(Dh(e))?(n=ju(t),t.m(),fs("handleUnauthorizedUser",e,n,null,er.auth.GoogleAuthProvider.PROVIDER_ID)):(n=rl(n),t.a(n))})),Ph(e,i),i.then((function(){return o}),(function(){return!1}))}var i,o;return n&&t.a(cn("The selected credential for the authentication provider is not supported!").toString()),Hr(!1)}(e,e.g,t)}))}catch(e){}}(e)},hs.sendEmailLinkForSignIn=function(e,t,n,r){var i=new ml;i.render(t),wh(e,i),ll(e,i,n,r,(function(r){i.m(),r&&"auth/admin-restricted-operation"==r.code&&ja(Dh(e))?fs("handleUnauthorizedUser",e,t,n,er.auth.EmailAuthProvider.PROVIDER_ID):(r=rl(r),fs("signIn",e,t,n,r))}))},s(fh,Lu),fh.prototype.v=function(){this.w(this.i),this.B(this.i,this.u||void 0),this.l().focus(),Pl(this.l(),(this.l().value||"").length),Lu.prototype.v.call(this)},fh.prototype.o=function(){this.u=this.i=null,Lu.prototype.o.call(this)},x(fh.prototype,{l:Dc,M:Nc,w:Lc,H:jc,j:Bc,U:Mc,P:Tc,B:Cc}),hs.signIn=function(e,t,n,r){var i=ol(e),o=new fh((function(){var t=o,n=t.j()||"";n&&ul(e,t,n)}),i?null:function(){o.m(),sl(e,t,n)},n,za(Dh(e)),Va(Dh(e)),i);o.render(t),wh(e,o),r&&o.a(r)},s(dh,Lu),dh.prototype.v=function(){var e=this,t=Zs(this,"firebaseui-id-unauthorized-user-help-link");this.i&&t&&ru(this,t,(function(){e.i()})),ru(this,this.u(),(function(){e.l()})),this.u().focus(),Lu.prototype.v.call(this)},dh.prototype.o=function(){this.i=this.l=null,Lu.prototype.o.call(this)},x(dh.prototype,{u:Tc}),hs.handleUnauthorizedUser=function(e,t,n,r){function i(){sl(e,t)}r===er.auth.EmailAuthProvider.PROVIDER_ID?i=function(){hl(e,t)}:r===er.auth.PhoneAuthProvider.PROVIDER_ID&&(i=function(){fs("phoneSignInStart",e,t)});var o=null,a=null;r===er.auth.EmailAuthProvider.PROVIDER_ID&&La(Dh(e))?(o=function(e){return(e=Pa(e,er.auth.EmailAuthProvider.PROVIDER_ID))&&e.disableSignUp&&e.disableSignUp.adminEmail||null}(Dh(e)),a=function(e){if((e=Pa(e,er.auth.EmailAuthProvider.PROVIDER_ID))&&e.disableSignUp){var t=e.disableSignUp.helpLink||null;if(t&&"string"==typeof t)return function(){oi(t)}}return null}(Dh(e))):ja(Dh(e))&&(o=function(e){return(e=e.a.get("adminRestrictedOperation"))&&e.adminEmail?e.adminEmail:null}(Dh(e)),a=function(e){if(e=e.a.get("adminRestrictedOperation")||null){var t=e.helpLink||null;if(t&&"string"==typeof t)return function(){oi(t)}}return null}(Dh(e)));var s=new dh(n,(function(){s.m(),i()}),o,a,za(Dh(e)),Va(Dh(e)));s.render(t),wh(e,s)},s(ph,Lu),ph.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),Lu.prototype.v.call(this)},ph.prototype.o=function(){this.i=this.l=null,Lu.prototype.o.call(this)},x(ph.prototype,{u:Mc,B:Tc,w:Cc}),hs.unsupportedProvider=function(e,t,n){var r=new ph(n,(function(){r.m(),fs("passwordRecovery",e,t,n)}),(function(){r.m(),sl(e,t,n)}),za(Dh(e)),Va(Dh(e)));r.render(t),wh(e,r)};var gh={};function yh(e){return e||"[DEFAULT]"}function bh(e){return Nh(e),e.i||(e.i=xh(e,(function(t){return t&&!na(Eh(e))?Hr(Sh(e).getRedirectResult().then((function(e){return e}),(function(t){if(t&&"auth/email-already-in-use"==t.code&&t.email&&t.credential)throw t;return Bh(e,t)}))):Hr(kh(e).getRedirectResult().then((function(t){return xa(Dh(e))&&!t.user&&e.j&&!e.j.isAnonymous?Sh(e).getRedirectResult():t})))}))),e.i}function wh(e,t){Nh(e),e.g=t}var _h=null;function kh(e){return Nh(e),e.h}function Sh(e){return Nh(e),e.a}function Eh(e){return Nh(e),e.oa}function Mh(e){return Nh(e),e.O?e.O.emailHint:void 0}function Th(e){return"signIn"===((e=new Ue(e)).a.a.get(We.ub)||null)&&!!e.a.a.get(We.$a)}function Ch(e,t,n,r){Nh(e),void 0!==e.a.languageCode&&(e.u=e.a.languageCode);var i="en".replace(/_/g,"-");e.a.languageCode=i,e.h.languageCode=i,e.Y=!0,void 0!==e.a.tenantId&&(e.h.tenantId=e.a.tenantId),e.ib(n),e.O=r||null;var o=h.document;e.C?e.C.then((function(){"complete"==o.readyState?Ih(e,t):or(window,"load",(function(){Ih(e,t)}))})):"complete"==o.readyState?Ih(e,t):or(window,"load",(function(){Ih(e,t)}))}function Ih(e,t){var n=ai(t,"Could not find the FirebaseUI widget element on the page.");if(n.setAttribute("lang","en".replace(/_/g,"-")),_h){var r=_h;Nh(r),na(Eh(r))&&Xi("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset."),_h.reset()}if(_h=e,e.T=n,function(e,t){e.L=null,e.J=new Sr(t),e.J.register(),rr(e.J,"pageEnter",(function(t){if(t=t&&t.pageId,e.L!=t){var n=Dh(e);(n=Za(n).uiChanged||null)&&n(e.L,t),e.L=t}}))}(e,n),qo(new zo)&&qo(new Vo)){t=ai(t,"Could not find the FirebaseUI widget element on the page."),n=(n=be(n=si(),r=ca(Dh(e).a,"queryParameterForSignInSuccessUrl")))?wt(kt(n)).toString():null;e:{r=si();var i=qa(Dh(e));for(o in r=be(r,i)||"",us)if(us[o].toLowerCase()==r.toLowerCase()){var o=us[o];break e}o="callback"}switch(o){case"callback":n&&(o=Eh(e),ea(Qo,n,o)),e.nb()?fs("callback",e,t):sl(e,t,Mh(e));break;case"resetPassword":fs("passwordReset",e,t,fl(),dl());break;case"recoverEmail":fs("emailChangeRevocation",e,t,fl());break;case"revertSecondFactorAddition":fs("revertSecondFactorAddition",e,t,fl());break;case"verifyEmail":fs("emailVerification",e,t,fl(),dl());break;case"verifyAndChangeEmail":fs("verifyAndChangeEmail",e,t,fl(),dl());break;case"signIn":fs("emailLinkSignInCallback",e,t,si()),Lh();break;case"select":n&&(o=Eh(e),ea(Qo,n,o)),sl(e,t);break;default:throw Error("Unhandled widget operation.")}(t=Za(t=Dh(e)).uiShown||null)&&t()}else t=ai(t,"Could not find the FirebaseUI widget element on the page."),(o=new Xc(cn("The browser you are using does not support Web Storage. Please try again in a different browser.").toString())).render(t),wh(e,o);t=e.g&&"blank"==e.g.Ga&&Ka(Dh(e)),oa(Eh(e))&&!t&&(Rh(e,(t=oa(Eh(e))).a),$o(Yo,Eh(e)))}function xh(e,t){if(e.A)return t(Ah(e));if(Ph(e,(function(){e.A=!1})),xa(Dh(e))){var n=new Br((function(n){Ph(e,e.a.onAuthStateChanged((function(r){e.j=r,e.A||(e.A=!0,n(t(Ah(e))))})))}));return Ph(e,n),n}return e.A=!0,t(null)}function Ah(e){return Nh(e),xa(Dh(e))&&e.j&&e.j.isAnonymous?e.j:null}function Ph(e,t){if(Nh(e),t){e.s.push(t);var n=function(){H(e.s,(function(e){return e==t}))};"function"!=typeof t&&t.then(n,n)}}function Oh(e){void 0!==e.a.languageCode&&e.Y&&(e.Y=!1,e.a.languageCode=e.u)}function Rh(e,t){e.a.tenantId=t,e.h.tenantId=t}function Dh(e){return Nh(e),e.ca}function Nh(e){if(e.$)throw Error("AuthUI instance is deleted!")}function Lh(){var e=si();if(Th(e)){for(var t in e=new Ue(e),We)We.hasOwnProperty(t)&&Le(e.a.a,We[t]);t={state:"signIn",mode:"emailLink",operation:"clear"};var n=h.document.title;h.history&&h.history.replaceState&&h.history.replaceState(t,n,e.toString())}}function jh(e){return Nh(e),kh(e).signOut()}function Bh(e,t,n){if(Nh(e),t&&t.code&&("auth/email-already-in-use"==t.code||"auth/credential-already-in-use"==t.code)){var r=Ja(Dh(e));return Hr().then((function(){return r(new Rn("anonymous-upgrade-merge-conflict",null,n||t.credential))})).then((function(){throw e.g&&(e.g.m(),e.g=null),t}))}return Kr(t)}function Fh(e,t,n,r){Lu.call(this,Ec,void 0,r,"providerMatchByEmail",{F:t,D:n}),this.i=e}function Uh(e,t,n,r,i){Lu.call(this,Sc,{ec:t},i,"selectTenant",{F:n,D:r}),this.i=e}function qh(e){Lu.call(this,Ku,void 0,e,"spinner")}function zh(e){for(var t in this.a=new aa,sa(this.a,"authDomain"),sa(this.a,"displayMode",Jh),sa(this.a,"tenants"),sa(this.a,"callbacks"),sa(this.a,"tosUrl"),sa(this.a,"privacyPolicyUrl"),e)if(e.hasOwnProperty(t))try{ua(this.a,t,e[t])}catch(e){Yi('Invalid config: "'+t+'"',void 0)}}function Vh(e){return e.a.get("callbacks")||{}}function Wh(e){var t=e.a.get("tosUrl")||null;if(e=e.a.get("privacyPolicyUrl")||null,t&&!e&&Xi("Privacy Policy URL is missing, the link will not be displayed."),t&&e){if("function"==typeof t)return t;if("string"==typeof t)return function(){oi(t)}}return null}function Hh(e){var t=e.a.get("tosUrl")||null,n=e.a.get("privacyPolicyUrl")||null;if(n&&!t&&Xi("Terms of Service URL is missing, the link will not be displayed."),t&&n){if("function"==typeof n)return n;if("string"==typeof n)return function(){oi(n)}}return null}function Kh(e,t){if(!(e=e.a.get("tenants"))||!e.hasOwnProperty(t)&&!e.hasOwnProperty(Xh))throw Error("Invalid tenant configuration!")}function Gh(e,t,n){if(!(e=e.a.get("tenants")))throw Error("Invalid tenant configuration!");var r=[];if(!(e=e[t]||e[Xh]))return Yi("Invalid tenant configuration: "+t+" is not configured!",void 0),r;if(!(t=e.signInOptions))throw Error("Invalid tenant configuration: signInOptions are invalid!");return t.forEach((function(e){if("string"==typeof e)r.push(e);else if("string"==typeof e.provider){var t=e.hd;t&&n?(t instanceof RegExp?t:new RegExp("@"+t.replace(".","\\.")+"$")).test(n)&&r.push(e.provider):r.push(e.provider)}else Yi(e="Invalid tenant configuration: signInOption "+JSON.stringify(e)+" is invalid!",void 0)})),r}function Yh(e,t,n){return e=function(e,t){var n=Qh,r=void 0===r?{}:r;return Kh(e,t),function(e,t,n){return n=void 0===n?{}:n,Object.keys(e).filter((function(e){return t.includes(e)})).reduce((function(t,n){return t[n]=e[n],t}),n)}((e=e.a.get("tenants"))[t]||e[Xh],n,r)}(e,t),(t=e.signInOptions)&&n&&(t=t.filter((function(e){return"string"==typeof e?n.includes(e):n.includes(e.provider)})),e.signInOptions=t),e}(e=mh.prototype).nb=function(){return Nh(this),!!oa(Eh(this))||Th(si())},e.start=function(e,t){Ch(this,e,t)},e.Db=function(){Nh(this),this.Z=!0},e.reset=function(){Nh(this);var e=this;this.T&&this.T.removeAttribute("lang"),this.J&&_r(this.J),Oh(this),this.O=null,Lh(),$o(Yo,Eh(this)),Nh(this),this.l.cancel(),this.i=Hr({user:null,credential:null}),_h==this&&(_h=null),this.T=null;for(var t=0;t<this.s.length;t++)"function"==typeof this.s[t]?this.s[t]():this.s[t].cancel&&this.s[t].cancel();this.s=[],ra(Eh(this)),this.g&&(this.g.m(),this.g=null),this.L=null,this.h&&(this.C=jh(this).then((function(){e.C=null}),(function(){e.C=null})))},e.ib=function(e){Nh(this);var t,n=this.ca;for(t in e)try{ua(n.a,t,e[t])}catch(e){Yi('Invalid config: "'+t+'"',void 0)}rt&&ua(n.a,"popupMode",!1),Ua(n),!this.da&&Ya(Dh(this))&&(Xi("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.da=!0)},e.Wb=function(){Nh(this);var e=Dh(this),t=ca(e.a,"widgetUrl");e=qa(e);for(var n,r=t.search(ye),i=0,o=[];0<=(n=ge(t,i,e,r));)o.push(t.substring(i,n)),i=Math.min(t.indexOf("&",n)+1||r,r);o.push(t.substr(i)),t=o.join("").replace(we,"$1"),(e+=r="="+encodeURIComponent("select"))?(0>(r=t.indexOf("#"))&&(r=t.length),0>(i=t.indexOf("?"))||i>r?(i=r,n=""):n=t.substring(i+1,r),r=(t=[t.substr(0,i),n,t.substr(r)])[1],t[1]=e?r?r+"&"+e:e:r,r=t[0]+(t[1]?"?"+t[1]:"")+t[2]):r=t,Dh(this).a.get("popupMode")?(r=r||"about:blank",(e={width:500,height:600,top:0<(e=(window.screen.availHeight-600)/2)?e:0,left:0<(t=(window.screen.availWidth-500)/2)?t:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1}).target=e.target||r.target||"google_popup",e.width=e.width||690,e.height=e.height||500,(e=ri(r,e))&&e.focus()):Lt(window.location,r)},e.Wa=function(){var e=this;return Nh(this),this.h.app.delete().then((function(){var t=yh(Eh(e));delete gh[t],e.reset(),e.$=!0}))},e.Ib=function(e,t){Nh(this);var n=this,r=function(){for(var e=32,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();if(!Ha(Dh(this)))return Kr(Error("Email link sign-in should be enabled to trigger email sending."));var i=function(e){if(Ha(e)){var t={url:si(),handleCodeInApp:!0};(e=Pa(e,er.auth.EmailAuthProvider.PROVIDER_ID))&&"function"==typeof e.emailLinkSignIn&&ue(t,e.emailLinkSignIn()),e=t.url;var n=si();n instanceof _e||(n=Me(n)),e instanceof _e||(e=Me(e));var r=n;n=new _e(r);var i=!!e.j;i?ke(n,e.j):i=!!e.A,i?n.A=e.A:i=!!e.h,i?n.h=e.h:i=null!=e.C;var o=e.g;if(i)Se(n,e.C);else if(i=!!e.g)if("/"!=o.charAt(0)&&(r.h&&!r.g?o="/"+o:-1!=(r=n.g.lastIndexOf("/"))&&(o=n.g.substr(0,r+1)+o)),".."==o||"."==o)o="";else if(-1!=o.indexOf("./")||-1!=o.indexOf("/.")){r=0==o.lastIndexOf("/",0),o=o.split("/");for(var a=[],s=0;s<o.length;){var u=o[s++];"."==u?r&&s==o.length&&a.push(""):".."==u?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&s==o.length&&a.push("")):(a.push(u),r=!0)}o=a.join("/")}return i?n.g=o:i=""!==e.a.toString(),i?Ee(n,Be(e.a)):i=!!e.s,i&&(n.s=e.s),t.url=n.toString(),t}return null}(Dh(this)),o=new Ue(i.url);return function(e,t){t?e.a.a.set(We.Sa,t):Le(e.a.a,We.Sa)}(o,r),t&&t.a&&(function(e,t,n){ea(Zo,xo(e,JSON.stringify(oo(t))),n)}(r,t,Eh(this)),ze(o,t.a.providerId)),function(e,t){null!==t?e.a.a.set(We.Qa,t?"1":"0"):Le(e.a.a,We.Qa)}(o,function(e){return!(!(e=Pa(e,er.auth.EmailAuthProvider.PROVIDER_ID))||!e.forceSameDevice)}(Dh(this))),xh(this,(function(t){return t&&((t=t.uid)?o.a.a.set(We.Pa,t):Le(o.a.a,We.Pa)),i.url=o.toString(),kh(n).sendSignInLinkToEmail(e,i)})).then((function(){var t=Eh(n),i={};i.email=e,ea(Jo,xo(r,JSON.stringify(i)),t)}),(function(e){throw $o(Zo,Eh(n)),$o(Jo,Eh(n)),e}))},e.bc=function(e,t){Nh(this);var n=this;return kh(this).signInWithEmailAndPassword(e,t).then((function(r){return xh(n,(function(i){return i?jh(n).then((function(){return Bh(n,{code:"auth/email-already-in-use"},er.auth.EmailAuthProvider.credential(e,t))})):r}))}))},e.Yb=function(e,t){Nh(this);var n=this;return xh(this,(function(r){if(r){var i=er.auth.EmailAuthProvider.credential(e,t);return r.linkWithCredential(i)}return kh(n).createUserWithEmailAndPassword(e,t)}))},e.ac=function(e){Nh(this);var t=this;return xh(this,(function(n){return n?n.linkWithCredential(e).then((function(e){return e}),(function(n){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential)throw n;return Bh(t,n,e)})):kh(t).signInWithCredential(e)}))},e.dc=function(e){Nh(this);var t=this,n=this.i;return this.i=null,xh(this,(function(n){return n&&!na(Eh(t))?n.linkWithRedirect(e):kh(t).signInWithRedirect(e)})).then((function(){}),(function(e){throw t.i=n,e}))},e.cc=function(e,t){Nh(this);var n=this;return xh(this,(function(r){return r?r.linkWithPhoneNumber(e,t).then((function(e){return new xi(e,(function(e){if("auth/credential-already-in-use"==e.code)return Bh(n,e);throw e}))})):Sh(n).signInWithPhoneNumber(e,t).then((function(e){return new xi(e)}))}))},e.$b=function(){return Nh(this),Sh(this).signInAnonymously()},e.Xb=function(e,t){return Nh(this),kh(this).signInWithEmailAndPassword(e,t)},s(Fh,Lu),Fh.prototype.v=function(){this.u(this.i),this.w(this.i),this.l().focus(),Pl(this.l(),(this.l().value||"").length),Lu.prototype.v.call(this)},Fh.prototype.o=function(){this.i=null,Lu.prototype.o.call(this)},x(Fh.prototype,{l:Dc,H:Nc,u:Lc,B:jc,j:Bc,M:Mc,w:Cc}),s(Uh,Lu),Uh.prototype.v=function(){!function(e,t){function n(e){t(e)}for(var r=e.g?Ut("firebaseui-id-tenant-selection-button",e.g||e.s.a):[],i=0;i<r.length;i++){var o=r[i];ru(e,o,I(n,$l(o,"tenantId")))}}(this,this.i),Lu.prototype.v.call(this)},Uh.prototype.o=function(){this.i=null,Lu.prototype.o.call(this)},s(qh,Lu);var Qh=["immediateFederatedRedirect","privacyPolicyUrl","signInFlow","signInOptions","tosUrl"],Jh="optionFirst",Zh={qc:Jh,pc:"identifierFirst"},Xh="*";function $h(e,t){var n=this;this.s=ai(e),this.a={},Object.keys(t).forEach((function(e){n.a[e]=new zh(t[e])})),this.ob=this.g=this.A=this.h=this.i=this.j=null,Object.defineProperty(this,"languageCode",{get:function(){return this.ob},set:function(e){this.ob=e||null},enumerable:!1})}function ef(e){e.j&&e.j.reset(),e.mb(),e.g&&e.g.m()}(e=$h.prototype).Ub=function(e,t){var n=this;ef(this);var r=e.apiKey;return new Br((function(e,i){if(n.a.hasOwnProperty(r)){var o=Vh(n.a[r]).selectTenantUiHidden||null;if(function(e){for(var t in e=e.a.get("displayMode"),Zh)if(Zh[t]===e)return Zh[t];return Jh}(n.a[r])===Jh){var a=[];t.forEach((function(e){e=e||"_";var t=n.a[r].a.get("tenants");if(!t)throw Error("Invalid tenant configuration!");(t=t[e]||t[Xh])?e={tenantId:"_"!==e?e:null,V:t.fullLabel||null,displayName:t.displayName,za:t.iconUrl,ta:t.buttonColor}:(Yi("Invalid tenant configuration: "+e+" is not configured!",void 0),e=null),e&&a.push(e)}));var s=function(t){t={tenantId:t,providerIds:Gh(n.a[r],t||"_")},e(t)};if(1===a.length)return void s(a[0].tenantId);n.g=new Uh((function(e){ef(n),o&&o(),s(e)}),a,Wh(n.a[r]),Hh(n.a[r]))}else n.g=new Fh((function(){var i=n.g.j();if(i){for(var a=0;a<t.length;a++){var s=Gh(n.a[r],t[a]||"_",i);if(0!==s.length)return i={tenantId:t[a],providerIds:s,email:i},ef(n),o&&o(),void e(i)}n.g.a(Pn({code:"no-matching-tenant-for-email"}).toString())}}),Wh(n.a[r]),Hh(n.a[r]));n.g.render(n.s),(i=Vh(n.a[r]).selectTenantUiShown||null)&&i()}else{var u=Error("Invalid project configuration: API key is invalid!");u.code="invalid-configuration",n.pb(u),i(u)}}))},e.Pb=function(e,t){if(!this.a.hasOwnProperty(e))throw Error("Invalid project configuration: API key is invalid!");var n=t||void 0;Kh(this.a[e],t||"_");try{this.i=er.app(n).auth()}catch(i){var r=this.a[e].a.get("authDomain");if(!r)throw Error("Invalid project configuration: authDomain is required!");(e=er.initializeApp({apiKey:e,authDomain:r},n)).auth().tenantId=t,this.i=e.auth()}return this.i},e.Zb=function(e,t){var n=this;return new Br((function(r,i){function o(t,r){n.j=new mh(e),Ch(n.j,n.s,t,r)}var a=e.app.options.apiKey;n.a.hasOwnProperty(a)||i(Error("Invalid project configuration: API key is invalid!"));var s=Yh(n.a[a],e.tenantId||"_",t&&t.providerIds);ef(n),i={signInSuccessWithAuthResult:function(e){return r(e),!1}};var u,c=Vh(n.a[a]).signInUiShown||null,l=!1;i.uiChanged=function(t,r){null===t&&"callback"===r?((t=qt("firebaseui-id-page-callback",n.s))&&iu(t),n.h=new qh,n.h.render(n.s)):l||null===t&&"spinner"===r||"blank"===r||(n.h&&(n.h.m(),n.h=null),l=!0,c&&c(e.tenantId))},s.callbacks=i,s.credentialHelper="none",t&&t.email&&(u={emailHint:t.email}),n.j?n.j.Wa().then((function(){o(s,u)})):o(s,u)}))},e.reset=function(){var e=this;return Hr().then((function(){e.j&&e.j.Wa()})).then((function(){e.j=null,ef(e)}))},e.Vb=function(){var e=this;this.h||this.A||(this.A=window.setTimeout((function(){ef(e),e.h=new qh,e.g=e.h,e.h.render(e.s),e.A=null}),500))},e.mb=function(){window.clearTimeout(this.A),this.A=null,this.h&&(this.h.m(),this.h=null)},e.Bb=function(){return ef(this),this.g=new Gc,this.g.render(this.s),Hr()},e.pb=function(e){var t,n=this,r=Pn({code:e.code}).toString()||e.message;ef(this),e.retry&&"function"==typeof e.retry&&(t=function(){n.reset(),e.retry()}),this.g=new Zc(r,t),this.g.render(this.s)},e.Rb=function(e){var t=this;return Hr().then((function(){var n=t.i&&t.i.app.options.apiKey;if(!t.a.hasOwnProperty(n))throw Error("Invalid project configuration: API key is invalid!");if(Kh(t.a[n],e.tenantId||"_"),!t.i.currentUser||t.i.currentUser.uid!==e.uid)throw Error("The user being processed does not match the signed in user!");return(n=Vh(t.a[n]).beforeSignInSuccess||null)?n(e):e})).then((function(t){if(t.uid!==e.uid)throw Error("User with mismatching UID returned.");return t}))},O("firebaseui.auth.FirebaseUiHandler",$h),O("firebaseui.auth.FirebaseUiHandler.prototype.selectTenant",$h.prototype.Ub),O("firebaseui.auth.FirebaseUiHandler.prototype.getAuth",$h.prototype.Pb),O("firebaseui.auth.FirebaseUiHandler.prototype.startSignIn",$h.prototype.Zb),O("firebaseui.auth.FirebaseUiHandler.prototype.reset",$h.prototype.reset),O("firebaseui.auth.FirebaseUiHandler.prototype.showProgressBar",$h.prototype.Vb),O("firebaseui.auth.FirebaseUiHandler.prototype.hideProgressBar",$h.prototype.mb),O("firebaseui.auth.FirebaseUiHandler.prototype.completeSignOut",$h.prototype.Bb),O("firebaseui.auth.FirebaseUiHandler.prototype.handleError",$h.prototype.pb),O("firebaseui.auth.FirebaseUiHandler.prototype.processUser",$h.prototype.Rb),O("firebaseui.auth.AuthUI",mh),O("firebaseui.auth.AuthUI.getInstance",(function(e){return e=yh(e),gh[e]?gh[e]:null})),O("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",mh.prototype.Db),O("firebaseui.auth.AuthUI.prototype.start",mh.prototype.start),O("firebaseui.auth.AuthUI.prototype.setConfig",mh.prototype.ib),O("firebaseui.auth.AuthUI.prototype.signIn",mh.prototype.Wb),O("firebaseui.auth.AuthUI.prototype.reset",mh.prototype.reset),O("firebaseui.auth.AuthUI.prototype.delete",mh.prototype.Wa),O("firebaseui.auth.AuthUI.prototype.isPendingRedirect",mh.prototype.nb),O("firebaseui.auth.AuthUIError",Rn),O("firebaseui.auth.AuthUIError.prototype.toJSON",Rn.prototype.toJSON),O("firebaseui.auth.CredentialHelper.ACCOUNT_CHOOSER_COM",ns),O("firebaseui.auth.CredentialHelper.GOOGLE_YOLO",rs),O("firebaseui.auth.CredentialHelper.NONE",is),O("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous"),Br.prototype.catch=Br.prototype.Ca,Br.prototype.finally=Br.prototype.fc}).apply(void 0!==n?n:"undefined"!=typeof self?self:window)}.apply(void 0!==n?n:"undefined"!=typeof self?self:window),"undefined"!=typeof window&&(window.dialogPolyfill=e(a));var s=firebaseui.auth})),o.register("3yyN7",(function(e,t){!function(){var t=window.CustomEvent;function n(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement}return null}function r(e){e&&e.blur&&e!==document.body&&e.blur()}function i(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1}function o(e){return!(!e||!e.hasAttribute("method"))&&"dialog"===e.getAttribute("method").toLowerCase()}function a(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),"MutationObserver"in window){new MutationObserver(this.maybeHideModal.bind(this)).observe(e,{attributes:!0,attributeFilter:["open"]})}else{var t,n=!1,r=function(){n?this.downgradeModal():this.maybeHideModal(),n=!1}.bind(this),i=function(i){if(i.target===e){var o="DOMNodeRemoved";n|=i.type.substr(0,o.length)===o,window.clearTimeout(t),t=window.setTimeout(r,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach((function(t){e.addEventListener(t,i)}))}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}t&&"object"!=typeof t||((t=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),n}).prototype=window.Event.prototype),a.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),s.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var t=document.createElement("div");this.dialog_.insertBefore(t,this.dialog_.firstChild),t.tabIndex=-1,t.focus(),this.dialog_.removeChild(t)}var n=document.createEvent("MouseEvents");n.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(n),e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!e&&this.dialog_.tabIndex>=0&&(e=this.dialog_),!e){var t=["button","input","keygen","select","textarea"].map((function(e){return e+":not([disabled])"}));t.push('[tabindex]:not([disabled]):not([tabindex=""])'),e=this.dialog_.querySelector(t.join(", "))}r(document.activeElement),e&&e.focus()},updateZIndex:function(e,t){if(e<t)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e,this.backdrop_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!s.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(e){for(;e&&e!==document.body;){var t=window.getComputedStyle(e),n=function(e,n){return!(void 0===t[e]||t[e]===n)};if(t.opacity<1||n("zIndex","auto")||n("transform","none")||n("mixBlendMode","normal")||n("filter","none")||n("perspective","none")||"isolate"===t.isolation||"fixed"===t.position||"touch"===t.webkitOverflowScrolling)return!0;e=e.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,s.needsCentering(this.dialog_)?(s.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(e){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==e&&(this.dialog_.returnValue=e);var n=new t("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(n)}};var s={reposition:function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,n=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,n)+"px"},isInlinePositionSetByStylesheet:function(e){for(var t=0;t<document.styleSheets.length;++t){var n=document.styleSheets[t],r=null;try{r=n.cssRules}catch(e){}if(r)for(var o=0;o<r.length;++o){var a=r[o],s=null;try{s=document.querySelectorAll(a.selectorText)}catch(e){}if(s&&i(s,e)){var u=a.style.getPropertyValue("top"),c=a.style.getPropertyValue("bottom");if(u&&"auto"!==u||c&&"auto"!==c)return!0}}}return!1},needsCentering:function(e){return"absolute"===window.getComputedStyle(e).position&&(!("auto"!==e.style.top&&""!==e.style.top||"auto"!==e.style.bottom&&""!==e.style.bottom)&&!s.isInlinePositionSetByStylesheet(e))},forceRegisterDialog:function(e){if((window.HTMLDialogElement||e.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"dialog"!==e.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new a(e)},registerDialog:function(e){e.showModal||s.forceRegisterDialog(e)},DialogManager:function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(t){this.forwardTab_=void 0,t.stopPropagation(),e([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver((function(t){var n=[];t.forEach((function(e){for(var t,r=0;t=e.removedNodes[r];++r)t instanceof Element&&("dialog"===t.localName&&n.push(t),n=n.concat(t.querySelectorAll("dialog")))})),n.length&&e(n)})))}};if(s.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},s.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},s.DialogManager.prototype.updateStacking=function(){for(var e,t=this.zIndexHigh_,n=0;e=this.pendingDialogStack[n];++n)e.updateZIndex(--t,--t),0===n&&(this.overlay.style.zIndex=--t);var r=this.pendingDialogStack[0];r?(r.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},s.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=n(e);){for(var t,r=0;t=this.pendingDialogStack[r];++r)if(t.dialog===e)return 0===r;e=e.parentElement}return!1},s.DialogManager.prototype.handleFocus_=function(e){if(!this.containedByTopDialog_(e.target)&&(e.preventDefault(),e.stopPropagation(),r(e.target),void 0!==this.forwardTab_)){var t=this.pendingDialogStack[0];return t.dialog.compareDocumentPosition(e.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?t.focus_():document.documentElement.focus()),!1}},s.DialogManager.prototype.handleKey_=function(e){if(this.forwardTab_=void 0,27===e.keyCode){e.preventDefault(),e.stopPropagation();var n=new t("cancel",{bubbles:!1,cancelable:!0}),r=this.pendingDialogStack[0];r&&r.dialog.dispatchEvent(n)&&r.dialog.close()}else 9===e.keyCode&&(this.forwardTab_=!e.shiftKey)},s.DialogManager.prototype.checkDOM_=function(e){this.pendingDialogStack.slice().forEach((function(t){-1!==e.indexOf(t.dialog)?t.downgradeModal():t.maybeHideModal()}))},s.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t)&&(1===this.pendingDialogStack.unshift(e)&&this.blockDocument(),this.updateStacking(),!0)},s.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);-1!==t&&(this.pendingDialogStack.splice(t,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},s.dm=new s.DialogManager,s.formSubmitter=null,s.useValue=null,void 0===window.HTMLDialogElement){var u=document.createElement("form");if(u.setAttribute("method","dialog"),"dialog"!==u.method){var c=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(c){var l=c.get;c.get=function(){return o(this)?"dialog":l.call(this)};var h=c.set;c.set=function(e){return"string"==typeof e&&"dialog"===e.toLowerCase()?this.setAttribute("method",e):h.call(this,e)},Object.defineProperty(HTMLFormElement.prototype,"method",c)}}document.addEventListener("click",(function(e){if(s.formSubmitter=null,s.useValue=null,!e.defaultPrevented){var t=e.target;if(t&&o(t.form)){if(!("submit"===t.type&&["button","input"].indexOf(t.localName)>-1)){if("input"!==t.localName||"image"!==t.type)return;s.useValue=e.offsetX+","+e.offsetY}n(t)&&(s.formSubmitter=t)}}}),!1);var f=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!o(this))return f.call(this);var e=n(this);e&&e.close()},document.addEventListener("submit",(function(e){var t=e.target;if(o(t)){e.preventDefault();var r=n(t);if(r){var i=s.formSubmitter;i&&i.form===t?r.close(s.useValue||i.value):r.close(),s.formSubmitter=null}}}),!0)}s.forceRegisterDialog=s.forceRegisterDialog,s.registerDialog=s.registerDialog,"function"==typeof define&&"amd"in define?define((function(){return s})):"object"==typeof e.exports?e.exports=s:window.dialogPolyfill=s}()})),o.register("1IS2I",(function(e,t){
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var n={upgradeDom:function(e,t){},upgradeElement:function(e,t){},upgradeElements:function(e){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(e,t){},register:function(e){},downgradeElements:function(e){}};(n=function(){var e=[],t=[],n="mdlComponentConfigInternal_";function r(t,n){for(var r=0;r<e.length;r++)if(e[r].className===t)return void 0!==n&&(e[r]=n),e[r];return!1}function i(e){var t=e.getAttribute("data-upgraded");return null===t?[""]:t.split(",")}function o(e,t){return-1!==i(e).indexOf(t)}function a(e,t,n){if("CustomEvent"in window&&"function"==typeof window.CustomEvent)return new CustomEvent(e,{bubbles:t,cancelable:n});var r=document.createEvent("Events");return r.initEvent(e,t,n),r}function s(t,n){if(void 0===t&&void 0===n)for(var i=0;i<e.length;i++)s(e[i].className,e[i].cssClass);else{var o=t;if(void 0===n){var a=r(o);a&&(n=a.cssClass)}for(var c=document.querySelectorAll("."+n),l=0;l<c.length;l++)u(c[l],o)}}function u(s,u){if(!("object"==typeof s&&s instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var c=a("mdl-componentupgrading",!0,!0);if(s.dispatchEvent(c),!c.defaultPrevented){var l=i(s),h=[];if(u)o(s,u)||h.push(r(u));else{var f=s.classList;e.forEach((function(e){f.contains(e.cssClass)&&-1===h.indexOf(e)&&!o(s,e.className)&&h.push(e)}))}for(var d,p=0,m=h.length;p<m;p++){if(!(d=h[p]))throw new Error("Unable to find a registered component for the given class.");l.push(d.className),s.setAttribute("data-upgraded",l.join(","));var v=new d.classConstructor(s);v[n]=d,t.push(v);for(var g=0,y=d.callbacks.length;g<y;g++)d.callbacks[g](s);d.widget&&(s[d.className]=v);var b=a("mdl-componentupgraded",!0,!1);s.dispatchEvent(b)}}}function c(e){if(e){var r=t.indexOf(e);t.splice(r,1);var i=e.element_.getAttribute("data-upgraded").split(","),o=i.indexOf(e[n].classAsString);i.splice(o,1),e.element_.setAttribute("data-upgraded",i.join(","));var s=a("mdl-componentdowngraded",!0,!1);e.element_.dispatchEvent(s)}}return{upgradeDom:s,upgradeElement:u,upgradeElements:function e(t){Array.isArray(t)||(t=t instanceof Element?[t]:Array.prototype.slice.call(t));for(var n,r=0,i=t.length;r<i;r++)(n=t[r])instanceof HTMLElement&&(u(n),n.children.length>0&&e(n.children))},upgradeAllRegistered:function(){for(var t=0;t<e.length;t++)s(e[t].className)},registerUpgradedCallback:function(e,t){var n=r(e);n&&n.callbacks.push(t)},register:function(t){var i=!0;void 0===t.widget&&void 0===t.widget||(i=t.widget||t.widget);var o={classConstructor:t.constructor||t.constructor,className:t.classAsString||t.classAsString,cssClass:t.cssClass||t.cssClass,widget:i,callbacks:[]};if(e.forEach((function(e){if(e.cssClass===o.cssClass)throw new Error("The provided cssClass has already been registered: "+e.cssClass);if(e.className===o.className)throw new Error("The provided className has already been registered")})),t.constructor.prototype.hasOwnProperty(n))throw new Error("MDL component classes must not have mdlComponentConfigInternal_ defined as a property.");r(t.classAsString,o)||e.push(o)},downgradeElements:function(e){var n=function(e){t.filter((function(t){return t.element_===e})).forEach(c)};if(e instanceof Array||e instanceof NodeList)for(var r=0;r<e.length;r++)n(e[r]);else{if(!(e instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");n(e)}}}}()).ComponentConfigPublic,n.ComponentConfig,n.Component,n.upgradeDom=n.upgradeDom,n.upgradeElement=n.upgradeElement,n.upgradeElements=n.upgradeElements,n.upgradeAllRegistered=n.upgradeAllRegistered,n.registerUpgradedCallback=n.registerUpgradedCallback,n.register=n.register,n.downgradeElements=n.downgradeElements,window.componentHandler=n,window.componentHandler=n,window.addEventListener("load",(function(){"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),n.upgradeAllRegistered()):(n.upgradeElement=function(){},n.register=function(){})}))})),o.register("62iKi",(function(e,t){
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var n;n=function(e){this.element_=e,this.init()},window.MaterialButton=n,n.prototype.Constant_={},n.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},n.prototype.blurHandler_=function(e){e&&this.element_.blur()},n.prototype.disable=function(){this.element_.disabled=!0},n.prototype.disable=n.prototype.disable,n.prototype.enable=function(){this.element_.disabled=!1},n.prototype.enable=n.prototype.enable,n.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},componentHandler.register({constructor:n,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0})})),o.register("6nLIH",(function(e,t){
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var n;n=function(e){this.element_=e,this.init()},window.MaterialProgress=n,n.prototype.Constant_={},n.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},n.prototype.setProgress=function(e){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=e+"%")},n.prototype.setProgress=n.prototype.setProgress,n.prototype.setBuffer=function(e){this.bufferbar_.style.width=e+"%",this.auxbar_.style.width=100-e+"%"},n.prototype.setBuffer=n.prototype.setBuffer,n.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.className="progressbar bar bar1",this.element_.appendChild(e),this.progressbar_=e,(e=document.createElement("div")).className="bufferbar bar bar2",this.element_.appendChild(e),this.bufferbar_=e,(e=document.createElement("div")).className="auxbar bar bar3",this.element_.appendChild(e),this.auxbar_=e,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:n,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0})})),o.register("54uZF",(function(e,t){
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var n;n=function(e){this.element_=e,this.init()},window.MaterialSpinner=n,n.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},n.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},n.prototype.createLayer=function(e){var t=document.createElement("div");t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),n.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var r=document.createElement("div");r.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),i.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var o=[n,r,i],a=0;a<o.length;a++){var s=document.createElement("div");s.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),o[a].appendChild(s)}t.appendChild(n),t.appendChild(r),t.appendChild(i),this.element_.appendChild(t)},n.prototype.createLayer=n.prototype.createLayer,n.prototype.stop=function(){this.element_.classList.remove("is-active")},n.prototype.stop=n.prototype.stop,n.prototype.start=function(){this.element_.classList.add("is-active")},n.prototype.start=n.prototype.start,n.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:n,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0})})),o.register("37sSj",(function(e,t){
/**
 * @license
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var n;n=function(e){this.element_=e,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()},window.MaterialTextfield=n,n.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},n.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},n.prototype.onKeyDown_=function(e){var t=e.target.value.split("\n").length;13===e.keyCode&&t>=this.maxRows&&e.preventDefault()},n.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},n.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},n.prototype.onReset_=function(e){this.updateClasses_()},n.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},n.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},n.prototype.checkDisabled=n.prototype.checkDisabled,n.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},n.prototype.checkFocus=n.prototype.checkFocus,n.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},n.prototype.checkValidity=n.prototype.checkValidity,n.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},n.prototype.checkDirty=n.prototype.checkDirty,n.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},n.prototype.disable=n.prototype.disable,n.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},n.prototype.enable=n.prototype.enable,n.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},n.prototype.change=n.prototype.change,n.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},componentHandler.register({constructor:n,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0})})),Gs=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";t.__esModule=!0;var r,i=(r=n(1))&&r.__esModule?r:{default:r},o=Promise.resolve(),a=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.uiConfig=n.uiConfig,r.firebaseAuth=n.firebaseAuth,r.className=n.className,r.uiCallback=n.uiCallback,r.unregisterAuthObserver=function(){},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this;n(2);var t=n(7);return o.then((function(){e.firebaseUiWidget=t.auth.AuthUI.getInstance()||new t.auth.AuthUI(e.firebaseAuth),"popup"===e.uiConfig.signInFlow&&e.firebaseUiWidget.reset(),e.userSignedIn=!1,e.unregisterAuthObserver=e.firebaseAuth.onAuthStateChanged((function(t){!t&&e.userSignedIn&&e.firebaseUiWidget.reset(),e.userSignedIn=!!t})),e.uiCallback&&e.uiCallback(e.firebaseUiWidget),e.firebaseUiWidget.start("#firebaseui_container",e.uiConfig)}))},t.prototype.componentWillUnmount=function(){var e=this;return o=o.then((function(){return e.unregisterAuthObserver(),e.firebaseUiWidget.delete()}))},t.prototype.render=function(){return i.default.createElement("div",{className:this.className,id:"firebaseui_container"})},t}(i.default.Component);t.default=a},function(e,t){e.exports=o("6Ti1v")},function(e,t,n){var r=n(3);"string"==typeof r&&(r=[[e.i,r,""]]);n(5)(r,{hmr:!0,transform:void 0,insertInto:void 0}),r.locals&&(e.exports=r.locals)},function(e,t,n){(t=e.exports=n(4)(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css?family=Roboto:400,500,700&display=swap);",""]),t.push([e.i,'.mdl-button{background:0 0;border:none;border-radius:2px;color:#000;position:relative;height:36px;margin:0;min-width:64px;padding:0 16px;display:inline-block;font-family:Roboto,Helvetica,Arial,sans-serif;font-size:14px;font-weight:500;text-transform:uppercase;line-height:1;letter-spacing:0;overflow:hidden;will-change:box-shadow;transition:box-shadow .2s cubic-bezier(.4,0,1,1),background-color .2s cubic-bezier(.4,0,.2,1),color .2s cubic-bezier(.4,0,.2,1);outline:0;cursor:pointer;text-decoration:none;text-align:center;line-height:36px;vertical-align:middle}.mdl-button::-moz-focus-inner{border:0}.mdl-button:hover{background-color:hsla(0,0%,62%,.2)}.mdl-button:focus:not(:active){background-color:rgba(0,0,0,.12)}.mdl-button:active{background-color:hsla(0,0%,62%,.4)}.mdl-button.mdl-button--colored{color:#3f51b5}.mdl-button.mdl-button--colored:focus:not(:active){background-color:rgba(0,0,0,.12)}input.mdl-button[type=submit]{-webkit-appearance:none}.mdl-button--raised{background:hsla(0,0%,62%,.2);box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12)}.mdl-button--raised:active{box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.2);background-color:hsla(0,0%,62%,.4)}.mdl-button--raised:focus:not(:active){box-shadow:0 0 8px rgba(0,0,0,.18),0 8px 16px rgba(0,0,0,.36);background-color:hsla(0,0%,62%,.4)}.mdl-button--raised.mdl-button--colored{background:#3f51b5;color:#fff}.mdl-button--raised.mdl-button--colored:active,.mdl-button--raised.mdl-button--colored:focus:not(:active),.mdl-button--raised.mdl-button--colored:hover{background-color:#3f51b5}.mdl-button--raised.mdl-button--colored .mdl-ripple{background:#fff}.mdl-button--fab{border-radius:50%;font-size:24px;height:56px;margin:auto;min-width:56px;width:56px;padding:0;overflow:hidden;background:hsla(0,0%,62%,.2);box-shadow:0 1px 1.5px 0 rgba(0,0,0,.12),0 1px 1px 0 rgba(0,0,0,.24);position:relative;line-height:normal}.mdl-button--fab .material-icons{position:absolute;top:50%;left:50%;transform:translate(-12px,-12px);line-height:24px;width:24px}.mdl-button--fab.mdl-button--mini-fab{height:40px;min-width:40px;width:40px}.mdl-button--fab .mdl-button__ripple-container{border-radius:50%;-webkit-mask-image:-webkit-radial-gradient(circle,#fff,#000)}.mdl-button--fab:active{box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.2);background-color:hsla(0,0%,62%,.4)}.mdl-button--fab:focus:not(:active){box-shadow:0 0 8px rgba(0,0,0,.18),0 8px 16px rgba(0,0,0,.36);background-color:hsla(0,0%,62%,.4)}.mdl-button--fab.mdl-button--colored{background:#ff4081;color:#fff}.mdl-button--fab.mdl-button--colored:active,.mdl-button--fab.mdl-button--colored:focus:not(:active),.mdl-button--fab.mdl-button--colored:hover{background-color:#ff4081}.mdl-button--fab.mdl-button--colored .mdl-ripple{background:#fff}.mdl-button--icon{border-radius:50%;font-size:24px;height:32px;margin-left:0;margin-right:0;min-width:32px;width:32px;padding:0;overflow:hidden;color:inherit;line-height:normal}.mdl-button--icon .material-icons{position:absolute;top:50%;left:50%;transform:translate(-12px,-12px);line-height:24px;width:24px}.mdl-button--icon.mdl-button--mini-icon{height:24px;min-width:24px;width:24px}.mdl-button--icon.mdl-button--mini-icon .material-icons{top:0;left:0}.mdl-button--icon .mdl-button__ripple-container{border-radius:50%;-webkit-mask-image:-webkit-radial-gradient(circle,#fff,#000)}.mdl-button__ripple-container{display:block;height:100%;left:0;position:absolute;top:0;width:100%;z-index:0;overflow:hidden}.mdl-button.mdl-button--disabled .mdl-button__ripple-container .mdl-ripple,.mdl-button[disabled] .mdl-button__ripple-container .mdl-ripple{background-color:transparent}.mdl-button--primary.mdl-button--primary{color:#3f51b5}.mdl-button--primary.mdl-button--primary .mdl-ripple{background:#fff}.mdl-button--primary.mdl-button--primary.mdl-button--fab,.mdl-button--primary.mdl-button--primary.mdl-button--raised{color:#fff;background-color:#3f51b5}.mdl-button--accent.mdl-button--accent{color:#ff4081}.mdl-button--accent.mdl-button--accent .mdl-ripple{background:#fff}.mdl-button--accent.mdl-button--accent.mdl-button--fab,.mdl-button--accent.mdl-button--accent.mdl-button--raised{color:#fff;background-color:#ff4081}.mdl-button.mdl-button--disabled.mdl-button--disabled,.mdl-button[disabled][disabled]{color:rgba(0,0,0,.26);cursor:default;background-color:transparent}.mdl-button--fab.mdl-button--disabled.mdl-button--disabled,.mdl-button--fab[disabled][disabled]{background-color:rgba(0,0,0,.12);color:rgba(0,0,0,.26)}.mdl-button--raised.mdl-button--disabled.mdl-button--disabled,.mdl-button--raised[disabled][disabled]{background-color:rgba(0,0,0,.12);color:rgba(0,0,0,.26);box-shadow:none}.mdl-button--colored.mdl-button--disabled.mdl-button--disabled,.mdl-button--colored[disabled][disabled]{color:rgba(0,0,0,.26)}.mdl-button .material-icons{vertical-align:middle}.mdl-card{display:flex;flex-direction:column;font-size:16px;font-weight:400;min-height:200px;overflow:hidden;width:330px;z-index:1;position:relative;background:#fff;border-radius:2px;box-sizing:border-box}.mdl-card__media{background-color:#ff4081;background-repeat:repeat;background-position:50% 50%;background-size:cover;background-origin:padding-box;background-attachment:scroll;box-sizing:border-box}.mdl-card__title{align-items:center;color:#000;display:block;display:flex;justify-content:stretch;line-height:normal;padding:16px;perspective-origin:165px 56px;transform-origin:165px 56px;box-sizing:border-box}.mdl-card__title.mdl-card--border{border-bottom:1px solid rgba(0,0,0,.1)}.mdl-card__title-text{align-self:flex-end;color:inherit;display:block;display:flex;font-size:24px;font-weight:300;line-height:normal;overflow:hidden;transform-origin:149px 48px;margin:0}.mdl-card__subtitle-text{font-size:14px;color:rgba(0,0,0,.54);margin:0}.mdl-card__supporting-text{color:rgba(0,0,0,.54);font-size:1rem;line-height:18px;overflow:hidden;padding:16px;width:90%}.mdl-card__supporting-text.mdl-card--border{border-bottom:1px solid rgba(0,0,0,.1)}.mdl-card__actions{font-size:16px;line-height:normal;width:100%;background-color:transparent;padding:8px;box-sizing:border-box}.mdl-card__actions.mdl-card--border{border-top:1px solid rgba(0,0,0,.1)}.mdl-card--expand{flex-grow:1}.mdl-card__menu{position:absolute;right:16px;top:16px}.mdl-dialog{border:none;box-shadow:0 9px 46px 8px rgba(0,0,0,.14),0 11px 15px -7px rgba(0,0,0,.12),0 24px 38px 3px rgba(0,0,0,.2);width:280px}.mdl-dialog__title{padding:24px 24px 0;margin:0;font-size:2.5rem}.mdl-dialog__actions{padding:8px 8px 8px 24px;display:flex;flex-direction:row-reverse;flex-wrap:wrap}.mdl-dialog__actions>*{margin-right:8px;height:36px}.mdl-dialog__actions>:first-child{margin-right:0}.mdl-dialog__actions--full-width{padding:0 0 8px}.mdl-dialog__actions--full-width>*{height:48px;flex:0 0 100%;padding-right:16px;margin-right:0;text-align:right}.mdl-dialog__content{padding:20px 24px 24px;color:rgba(0,0,0,.54)}.mdl-progress{display:block;position:relative;height:4px;width:500px;max-width:100%}.mdl-progress>.bar{display:block;position:absolute;top:0;bottom:0;width:0;transition:width .2s cubic-bezier(.4,0,.2,1)}.mdl-progress>.progressbar{background-color:#3f51b5;z-index:1;left:0}.mdl-progress>.bufferbar{background-image:linear-gradient(90deg,hsla(0,0%,100%,.7),hsla(0,0%,100%,.7)),linear-gradient(90deg,#3f51b5,#3f51b5);z-index:0;left:0}.mdl-progress>.auxbar{right:0}@supports (-webkit-appearance:none){.mdl-progress:not(.mdl-progress--indeterminate):not(.mdl-progress--indeterminate)>.auxbar,.mdl-progress:not(.mdl-progress__indeterminate):not(.mdl-progress__indeterminate)>.auxbar{background-image:linear-gradient(90deg,hsla(0,0%,100%,.7),hsla(0,0%,100%,.7)),linear-gradient(90deg,#3f51b5,#3f51b5);mask:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+Cjxzdmcgd2lkdGg9IjEyIiBoZWlnaHQ9IjQiIHZpZXdQb3J0PSIwIDAgMTIgNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxlbGxpcHNlIGN4PSIyIiBjeT0iMiIgcng9IjIiIHJ5PSIyIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN4IiBmcm9tPSIyIiB0bz0iLTEwIiBkdXI9IjAuNnMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiAvPgogIDwvZWxsaXBzZT4KICA8ZWxsaXBzZSBjeD0iMTQiIGN5PSIyIiByeD0iMiIgcnk9IjIiIGNsYXNzPSJsb2FkZXIiPgogICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iY3giIGZyb209IjE0IiB0bz0iMiIgZHVyPSIwLjZzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgLz4KICA8L2VsbGlwc2U+Cjwvc3ZnPgo=)}}.mdl-progress:not(.mdl-progress--indeterminate)>.auxbar,.mdl-progress:not(.mdl-progress__indeterminate)>.auxbar{background-image:linear-gradient(90deg,hsla(0,0%,100%,.9),hsla(0,0%,100%,.9)),linear-gradient(90deg,#3f51b5,#3f51b5)}.mdl-progress.mdl-progress--indeterminate>.bar1,.mdl-progress.mdl-progress__indeterminate>.bar1{background-color:#3f51b5;animation-name:indeterminate1;animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:linear}.mdl-progress.mdl-progress--indeterminate>.bar3,.mdl-progress.mdl-progress__indeterminate>.bar3{background-image:none;background-color:#3f51b5;animation-name:indeterminate2;animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:linear}@keyframes indeterminate1{0%{left:0;width:0}50%{left:25%;width:75%}75%{left:100%;width:0}}@keyframes indeterminate2{0%{left:0;width:0}50%{left:0;width:0}75%{left:0;width:25%}to{left:100%;width:0}}.mdl-shadow--2dp{box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12)}.mdl-shadow--3dp{box-shadow:0 3px 4px 0 rgba(0,0,0,.14),0 3px 3px -2px rgba(0,0,0,.2),0 1px 8px 0 rgba(0,0,0,.12)}.mdl-shadow--4dp{box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.2)}.mdl-shadow--6dp{box-shadow:0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12),0 3px 5px -1px rgba(0,0,0,.2)}.mdl-shadow--8dp{box-shadow:0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12),0 5px 5px -3px rgba(0,0,0,.2)}.mdl-shadow--16dp{box-shadow:0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12),0 8px 10px -5px rgba(0,0,0,.2)}.mdl-shadow--24dp{box-shadow:0 9px 46px 8px rgba(0,0,0,.14),0 11px 15px -7px rgba(0,0,0,.12),0 24px 38px 3px rgba(0,0,0,.2)}.mdl-spinner{display:inline-block;position:relative;width:28px;height:28px}.mdl-spinner:not(.is-upgraded).is-active:after{content:"Loading..."}.mdl-spinner.is-upgraded.is-active{animation:mdl-spinner__container-rotate 1.568s linear infinite}@keyframes mdl-spinner__container-rotate{to{transform:rotate(1turn)}}.mdl-spinner__layer{position:absolute;width:100%;height:100%;opacity:0}.mdl-spinner__layer-1{border-color:#42a5f5}.mdl-spinner--single-color .mdl-spinner__layer-1{border-color:#3f51b5}.mdl-spinner.is-active .mdl-spinner__layer-1{animation:mdl-spinner__fill-unfill-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdl-spinner__layer-1-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mdl-spinner__layer-2{border-color:#f44336}.mdl-spinner--single-color .mdl-spinner__layer-2{border-color:#3f51b5}.mdl-spinner.is-active .mdl-spinner__layer-2{animation:mdl-spinner__fill-unfill-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdl-spinner__layer-2-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mdl-spinner__layer-3{border-color:#fdd835}.mdl-spinner--single-color .mdl-spinner__layer-3{border-color:#3f51b5}.mdl-spinner.is-active .mdl-spinner__layer-3{animation:mdl-spinner__fill-unfill-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdl-spinner__layer-3-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}.mdl-spinner__layer-4{border-color:#4caf50}.mdl-spinner--single-color .mdl-spinner__layer-4{border-color:#3f51b5}.mdl-spinner.is-active .mdl-spinner__layer-4{animation:mdl-spinner__fill-unfill-rotate 5332ms cubic-bezier(.4,0,.2,1) infinite both,mdl-spinner__layer-4-fade-in-out 5332ms cubic-bezier(.4,0,.2,1) infinite both}@keyframes mdl-spinner__fill-unfill-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}to{transform:rotate(3turn)}}@keyframes mdl-spinner__layer-1-fade-in-out{0%{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdl-spinner__layer-2-fade-in-out{0%{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}}@keyframes mdl-spinner__layer-3-fade-in-out{0%{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}}@keyframes mdl-spinner__layer-4-fade-in-out{0%{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}.mdl-spinner__gap-patch{position:absolute;box-sizing:border-box;top:0;left:45%;width:10%;height:100%;overflow:hidden;border-color:inherit}.mdl-spinner__gap-patch .mdl-spinner__circle{width:1000%;left:-450%}.mdl-spinner__circle-clipper{display:inline-block;position:relative;width:50%;height:100%;overflow:hidden;border-color:inherit}.mdl-spinner__circle-clipper.mdl-spinner__left{float:left}.mdl-spinner__circle-clipper.mdl-spinner__right{float:right}.mdl-spinner__circle-clipper .mdl-spinner__circle{width:200%}.mdl-spinner__circle{box-sizing:border-box;height:100%;border-width:3px;border-style:solid;border-color:inherit;border-bottom-color:transparent!important;border-radius:50%;animation:none;position:absolute;top:0;right:0;bottom:0;left:0}.mdl-spinner__left .mdl-spinner__circle{border-right-color:transparent!important;transform:rotate(129deg)}.mdl-spinner.is-active .mdl-spinner__left .mdl-spinner__circle{animation:mdl-spinner__left-spin 1333ms cubic-bezier(.4,0,.2,1) infinite both}.mdl-spinner__right .mdl-spinner__circle{left:-100%;border-left-color:transparent!important;transform:rotate(-129deg)}.mdl-spinner.is-active .mdl-spinner__right .mdl-spinner__circle{animation:mdl-spinner__right-spin 1333ms cubic-bezier(.4,0,.2,1) infinite both}@keyframes mdl-spinner__left-spin{0%{transform:rotate(130deg)}50%{transform:rotate(-5deg)}to{transform:rotate(130deg)}}@keyframes mdl-spinner__right-spin{0%{transform:rotate(-130deg)}50%{transform:rotate(5deg)}to{transform:rotate(-130deg)}}.mdl-textfield{position:relative;font-size:16px;display:inline-block;box-sizing:border-box;width:300px;max-width:100%;margin:0;padding:20px 0}.mdl-textfield .mdl-button{position:absolute;bottom:20px}.mdl-textfield--align-right{text-align:right}.mdl-textfield--full-width{width:100%}.mdl-textfield--expandable{min-width:32px;width:auto;min-height:32px}.mdl-textfield--expandable .mdl-button--icon{top:16px}.mdl-textfield__input{border:none;border-bottom:1px solid rgba(0,0,0,.12);display:block;font-size:16px;font-family:Helvetica,Arial,sans-serif;margin:0;padding:4px 0;width:100%;background:0 0;text-align:left;color:inherit}.mdl-textfield__input[type=number]{-moz-appearance:textfield}.mdl-textfield__input[type=number]::-webkit-inner-spin-button,.mdl-textfield__input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.mdl-textfield.is-focused .mdl-textfield__input{outline:0}.mdl-textfield.is-invalid .mdl-textfield__input{border-color:#d50000;box-shadow:none}.mdl-textfield.is-disabled .mdl-textfield__input,fieldset[disabled] .mdl-textfield .mdl-textfield__input{background-color:transparent;border-bottom:1px dotted rgba(0,0,0,.12);color:rgba(0,0,0,.26)}.mdl-textfield textarea.mdl-textfield__input{display:block}.mdl-textfield__label{bottom:0;color:rgba(0,0,0,.26);font-size:16px;left:0;right:0;pointer-events:none;position:absolute;display:block;top:24px;width:100%;overflow:hidden;white-space:nowrap;text-align:left}.mdl-textfield.has-placeholder .mdl-textfield__label,.mdl-textfield.is-dirty .mdl-textfield__label{visibility:hidden}.mdl-textfield--floating-label .mdl-textfield__label{transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1)}.mdl-textfield--floating-label.has-placeholder .mdl-textfield__label{transition:none}.mdl-textfield.is-disabled.is-disabled .mdl-textfield__label,fieldset[disabled] .mdl-textfield .mdl-textfield__label{color:rgba(0,0,0,.26)}.mdl-textfield--floating-label.has-placeholder .mdl-textfield__label,.mdl-textfield--floating-label.is-dirty .mdl-textfield__label,.mdl-textfield--floating-label.is-focused .mdl-textfield__label{color:#3f51b5;font-size:12px;top:4px;visibility:visible}.mdl-textfield--floating-label.has-placeholder .mdl-textfield__expandable-holder .mdl-textfield__label,.mdl-textfield--floating-label.is-dirty .mdl-textfield__expandable-holder .mdl-textfield__label,.mdl-textfield--floating-label.is-focused .mdl-textfield__expandable-holder .mdl-textfield__label{top:-16px}.mdl-textfield--floating-label.is-invalid .mdl-textfield__label{color:#d50000;font-size:12px}.mdl-textfield__label:after{background-color:#3f51b5;bottom:20px;content:"";height:2px;left:45%;position:absolute;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1);visibility:hidden;width:10px}.mdl-textfield.is-focused .mdl-textfield__label:after{left:0;visibility:visible;width:100%}.mdl-textfield.is-invalid .mdl-textfield__label:after{background-color:#d50000}.mdl-textfield__error{color:#d50000;position:absolute;font-size:12px;margin-top:3px;visibility:hidden;display:block}.mdl-textfield.is-invalid .mdl-textfield__error{visibility:visible}.mdl-textfield__expandable-holder{position:relative;margin-left:32px;transition-duration:.2s;transition-timing-function:cubic-bezier(.4,0,.2,1);display:inline-block;max-width:.1px}.mdl-textfield.is-dirty .mdl-textfield__expandable-holder,.mdl-textfield.is-focused .mdl-textfield__expandable-holder{max-width:600px}.mdl-textfield__expandable-holder .mdl-textfield__label:after{bottom:0}dialog{position:absolute;left:0;right:0;width:-moz-fit-content;width:-webkit-fit-content;width:fit-content;height:-moz-fit-content;height:-webkit-fit-content;height:fit-content;margin:auto;border:solid;padding:1em;background:#fff;color:#000;display:block}dialog:not([open]){display:none}dialog+.backdrop{background:rgba(0,0,0,.1)}._dialog_overlay,dialog+.backdrop{position:fixed;top:0;right:0;bottom:0;left:0}dialog.fixed{position:fixed;top:50%;transform:translateY(-50%)}.firebaseui-container{background-color:#fff;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;color:rgba(0,0,0,.87);direction:ltr;font:16px Roboto,arial,sans-serif;margin:0 auto;max-width:360px;overflow:visible;position:relative;text-align:left;width:100%}.firebaseui-container.mdl-card{overflow:visible}.firebaseui-card-header{padding:24px 24px 0}.firebaseui-card-content,.firebaseui-card-footer{padding:0 24px}.firebaseui-card-actions{box-sizing:border-box;display:table;font-size:14px;padding:8px 24px 24px;text-align:left;width:100%}.firebaseui-form-links{display:table-cell;vertical-align:middle;width:100%}.firebaseui-form-actions{display:table-cell;text-align:right;white-space:nowrap;width:100%}.firebaseui-subtitle,.firebaseui-title{color:rgba(0,0,0,.87);direction:ltr;font-size:20px;font-weight:500;line-height:24px;margin:0;padding:0;text-align:left}.firebaseui-title{padding-bottom:16px}.firebaseui-subtitle{margin:16px 0}.firebaseui-text{color:rgba(0,0,0,.87);direction:ltr;font-size:16px;line-height:24px;text-align:left}.firebaseui-id-page-password-recovery-email-sent p.firebaseui-text{margin:16px 0}.firebaseui-text-emphasis{font-weight:700}.firebaseui-error{color:#dd2c00;direction:ltr;font-size:12px;line-height:16px;margin:0;text-align:left}.firebaseui-text-input-error{margin:-16px 0 16px}.firebaseui-error-wrapper{min-height:16px}.firebaseui-list-item{direction:ltr;margin:0;padding:0;text-align:left}.firebaseui-hidden{display:none}.firebaseui-relative-wrapper{position:relative}.firebaseui-label{color:rgba(0,0,0,.54);direction:ltr;font-size:16px;text-align:left}.mdl-textfield--floating-label.is-dirty .mdl-textfield__label,.mdl-textfield--floating-label.is-focused .mdl-textfield__label{color:#757575}.firebaseui-input,.firebaseui-input-invalid{border-radius:0;color:rgba(0,0,0,.87);direction:ltr;font-size:16px;width:100%}input.firebaseui-input,input.firebaseui-input-invalid{direction:ltr;text-align:left}.firebaseui-input-invalid{border-color:#dd2c00}.firebaseui-textfield{width:100%}.firebaseui-textfield.mdl-textfield .firebaseui-input{border-color:rgba(0,0,0,.12)}.firebaseui-textfield.mdl-textfield .firebaseui-label:after{background-color:#3f51b5}.firebaseui-textfield-invalid.mdl-textfield .firebaseui-input{border-color:#dd2c00}.firebaseui-textfield-invalid.mdl-textfield .firebaseui-label:after{background-color:#dd2c00}.firebaseui-button{display:inline-block;height:36px;margin-left:8px;min-width:88px}.firebaseui-link{color:#4285f4;font-variant:normal;font-weight:400;text-decoration:none}.firebaseui-link:hover{text-decoration:underline}.firebaseui-indent{margin-left:1em}.firebaseui-tos{color:#757575;direction:ltr;font-size:12px;line-height:16px;margin-bottom:24px;margin-top:0;text-align:left}.firebaseui-provider-sign-in-footer>.firebaseui-tos{text-align:center}.firebaseui-tos-list{list-style:none;text-align:right}.firebaseui-inline-list-item{display:inline-block;margin-left:5px;margin-right:5px}.firebaseui-page-provider-sign-in,.firebaseui-page-select-tenant{background:inherit}.firebaseui-idp-list,.firebaseui-tenant-list{list-style:none;margin:1em 0;padding:0}.firebaseui-idp-button,.firebaseui-tenant-button{direction:ltr;font-weight:500;height:auto;line-height:normal;max-width:220px;min-height:40px;padding:8px 16px;text-align:left;width:100%}.firebaseui-idp-list>.firebaseui-list-item,.firebaseui-tenant-list>.firebaseui-list-item{margin-bottom:15px;text-align:center}.firebaseui-idp-icon-wrapper{display:table-cell;vertical-align:middle}.firebaseui-idp-icon{height:18px;width:18px}.firebaseui-idp-favicon,.firebaseui-idp-icon{border:none;display:inline-block;vertical-align:middle}.firebaseui-idp-favicon{height:14px;margin-right:5px;width:14px}.firebaseui-idp-text{color:#fff;display:table-cell;font-size:14px;padding-left:16px;text-transform:none;vertical-align:middle}.firebaseui-idp-text.firebaseui-idp-text-long{display:table-cell}.firebaseui-idp-text.firebaseui-idp-text-short{display:none}@media (max-width:268px){.firebaseui-idp-text.firebaseui-idp-text-long{display:none}.firebaseui-idp-text.firebaseui-idp-text-short{display:table-cell}}@media (max-width:320px){.firebaseui-recaptcha-container>div>div{transform:scale(.9);-webkit-transform:scale(.9);transform-origin:0 0;-webkit-transform-origin:0 0}}.firebaseui-idp-google>.firebaseui-idp-text{color:#757575}[data-provider-id="yahoo.com"]>.firebaseui-idp-icon-wrapper>.firebaseui-idp-icon{height:22px;width:22px}.firebaseui-info-bar{background-color:#f9edbe;border:1px solid #f0c36d;box-shadow:0 2px 4px rgba(0,0,0,.2);-webkit-box-shadow:0 2px 4px rgba(0,0,0,.2);-moz-box-shadow:0 2px 4px rgba(0,0,0,.2);left:10%;padding:8px 16px;position:absolute;right:10%;text-align:center;top:0}.firebaseui-info-bar-message{font-size:12px;margin:0}.firebaseui-dialog{box-sizing:border-box;color:rgba(0,0,0,.87);font:16px Roboto,arial,sans-serif;height:auto;max-height:fit-content;padding:24px;text-align:left}.firebaseui-dialog-icon-wrapper{display:table-cell;vertical-align:middle}.firebaseui-dialog-icon{float:left;height:40px;margin-right:24px;width:40px}.firebaseui-progress-dialog-message{display:table-cell;font-size:16px;font-weight:400;min-height:40px;vertical-align:middle}.firebaseui-progress-dialog-loading-icon{height:28px;margin:6px 30px 6px 6px;width:28px}.firebaseui-icon-done{background-image:url(https://www.gstatic.com/images/icons/material/system/2x/done_googgreen_36dp.png);background-position:50%;background-repeat:no-repeat;background-size:36px 36px}.firebaseui-phone-number{display:flex}.firebaseui-country-selector{background-image:url(https://www.gstatic.com/images/icons/material/system/1x/arrow_drop_down_grey600_18dp.png);background-position:100%;background-repeat:no-repeat;background-size:18px auto;border-radius:0;border-bottom:1px solid rgba(0,0,0,.12);color:rgba(0,0,0,.87);flex-shrink:0;font-size:16px;font-weight:400;height:auto;line-height:normal;margin:20px 24px 20px 0;padding:4px 20px 4px 0;width:90px}.firebaseui-country-selector-flag{display:inline-block;margin-right:1ex}.firebaseui-flag{background-image:url(https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/flags_sprite_2x.png);background-size:100% auto;filter:drop-shadow(1px 1px 1px rgba(0,0,0,.54));height:14px;width:24px}.firebaseui-list-box-dialog{max-height:90%;overflow:auto;padding:8px 0 0}.firebaseui-list-box-actions{padding-bottom:8px}.firebaseui-list-box-icon-wrapper{padding-right:24px}.firebaseui-list-box-icon-wrapper,.firebaseui-list-box-label-wrapper{display:table-cell;vertical-align:top}.firebaseui-list-box-dialog-button{color:rgba(0,0,0,.87);direction:ltr;font-size:16px;font-weight:400;height:auto;line-height:normal;min-height:48px;padding:14px 24px;text-align:left;text-transform:none;width:100%}.firebaseui-phone-number-error{margin-left:114px}.mdl-progress.firebaseui-busy-indicator{height:2px;left:0;position:absolute;top:55px;width:100%}.mdl-spinner.firebaseui-busy-indicator{direction:ltr;height:56px;left:0;margin:auto;position:absolute;right:0;top:30%;width:56px}.firebaseui-callback-indicator-container .firebaseui-busy-indicator{top:0}.firebaseui-callback-indicator-container{height:120px}.firebaseui-new-password-component{display:inline-block;position:relative;width:100%}.firebaseui-input-floating-button{background-position:50%;background-repeat:no-repeat;display:block;height:24px;position:absolute;right:0;top:20px;width:24px}.firebaseui-input-toggle-on{background-image:url(https://www.gstatic.com/images/icons/material/system/1x/visibility_black_24dp.png)}.firebaseui-input-toggle-off{background-image:url(https://www.gstatic.com/images/icons/material/system/1x/visibility_off_black_24dp.png)}.firebaseui-input-toggle-focus{opacity:.87}.firebaseui-input-toggle-blur{opacity:.38}.firebaseui-recaptcha-wrapper{display:table;margin:0 auto;padding-bottom:8px}.firebaseui-recaptcha-container{display:table-cell}.firebaseui-recaptcha-error-wrapper{caption-side:bottom;display:table-caption}.firebaseui-change-phone-number-link{display:block}.firebaseui-resend-container{direction:ltr;margin:20px 0;text-align:center}.firebaseui-id-resend-countdown{color:rgba(0,0,0,.38)}.firebaseui-id-page-phone-sign-in-start .firebaseui-form-actions div{float:left}@media (max-width:480px){.firebaseui-container{box-shadow:none;max-width:none;width:100%}.firebaseui-card-header{border-bottom:1px solid #e0e0e0;margin-bottom:16px;padding:16px 24px 0}.firebaseui-title{padding-bottom:16px}.firebaseui-card-actions{padding-right:24px}.firebaseui-busy-indicator{top:0}}.mdl-textfield__label{font-weight:400;margin-bottom:0}.firebaseui-id-page-blank,.firebaseui-id-page-spinner{background:inherit;height:64px}.firebaseui-email-sent{background-image:url(https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/success_status.png);background-position:50%;background-repeat:no-repeat;background-size:64px 64px;height:64px;margin-top:16px;text-align:center}.firebaseui-text-justify{text-align:justify}.firebaseui-flag-KY{background-position:0 0}.firebaseui-flag-AC{background-position:0 -14px}.firebaseui-flag-AE{background-position:0 -28px}.firebaseui-flag-AF{background-position:0 -42px}.firebaseui-flag-AG{background-position:0 -56px}.firebaseui-flag-AI{background-position:0 -70px}.firebaseui-flag-AL{background-position:0 -84px}.firebaseui-flag-AM{background-position:0 -98px}.firebaseui-flag-AO{background-position:0 -112px}.firebaseui-flag-AQ{background-position:0 -126px}.firebaseui-flag-AR{background-position:0 -140px}.firebaseui-flag-AS{background-position:0 -154px}.firebaseui-flag-AT{background-position:0 -168px}.firebaseui-flag-AU{background-position:0 -182px}.firebaseui-flag-AW{background-position:0 -196px}.firebaseui-flag-AX{background-position:0 -210px}.firebaseui-flag-AZ{background-position:0 -224px}.firebaseui-flag-BA{background-position:0 -238px}.firebaseui-flag-BB{background-position:0 -252px}.firebaseui-flag-BD{background-position:0 -266px}.firebaseui-flag-BE{background-position:0 -280px}.firebaseui-flag-BF{background-position:0 -294px}.firebaseui-flag-BG{background-position:0 -308px}.firebaseui-flag-BH{background-position:0 -322px}.firebaseui-flag-BI{background-position:0 -336px}.firebaseui-flag-BJ{background-position:0 -350px}.firebaseui-flag-BL{background-position:0 -364px}.firebaseui-flag-BM{background-position:0 -378px}.firebaseui-flag-BN{background-position:0 -392px}.firebaseui-flag-BO{background-position:0 -406px}.firebaseui-flag-BQ{background-position:0 -420px}.firebaseui-flag-BR{background-position:0 -434px}.firebaseui-flag-BS{background-position:0 -448px}.firebaseui-flag-BT{background-position:0 -462px}.firebaseui-flag-BV{background-position:0 -476px}.firebaseui-flag-BW{background-position:0 -490px}.firebaseui-flag-BY{background-position:0 -504px}.firebaseui-flag-BZ{background-position:0 -518px}.firebaseui-flag-CA{background-position:0 -532px}.firebaseui-flag-CC{background-position:0 -546px}.firebaseui-flag-CD{background-position:0 -560px}.firebaseui-flag-CF{background-position:0 -574px}.firebaseui-flag-CG{background-position:0 -588px}.firebaseui-flag-CH{background-position:0 -602px}.firebaseui-flag-CI{background-position:0 -616px}.firebaseui-flag-CK{background-position:0 -630px}.firebaseui-flag-CL{background-position:0 -644px}.firebaseui-flag-CM{background-position:0 -658px}.firebaseui-flag-CN{background-position:0 -672px}.firebaseui-flag-CO{background-position:0 -686px}.firebaseui-flag-CP{background-position:0 -700px}.firebaseui-flag-CR{background-position:0 -714px}.firebaseui-flag-CU{background-position:0 -728px}.firebaseui-flag-CV{background-position:0 -742px}.firebaseui-flag-CW{background-position:0 -756px}.firebaseui-flag-CX{background-position:0 -770px}.firebaseui-flag-CY{background-position:0 -784px}.firebaseui-flag-CZ{background-position:0 -798px}.firebaseui-flag-DE{background-position:0 -812px}.firebaseui-flag-DG{background-position:0 -826px}.firebaseui-flag-DJ{background-position:0 -840px}.firebaseui-flag-DK{background-position:0 -854px}.firebaseui-flag-DM{background-position:0 -868px}.firebaseui-flag-DO{background-position:0 -882px}.firebaseui-flag-DZ{background-position:0 -896px}.firebaseui-flag-EA{background-position:0 -910px}.firebaseui-flag-EC{background-position:0 -924px}.firebaseui-flag-EE{background-position:0 -938px}.firebaseui-flag-EG{background-position:0 -952px}.firebaseui-flag-EH{background-position:0 -966px}.firebaseui-flag-ER{background-position:0 -980px}.firebaseui-flag-ES{background-position:0 -994px}.firebaseui-flag-ET{background-position:0 -1008px}.firebaseui-flag-EU{background-position:0 -1022px}.firebaseui-flag-FI{background-position:0 -1036px}.firebaseui-flag-FJ{background-position:0 -1050px}.firebaseui-flag-FK{background-position:0 -1064px}.firebaseui-flag-FM{background-position:0 -1078px}.firebaseui-flag-FO{background-position:0 -1092px}.firebaseui-flag-FR{background-position:0 -1106px}.firebaseui-flag-GA{background-position:0 -1120px}.firebaseui-flag-GB{background-position:0 -1134px}.firebaseui-flag-GD{background-position:0 -1148px}.firebaseui-flag-GE{background-position:0 -1162px}.firebaseui-flag-GF{background-position:0 -1176px}.firebaseui-flag-GG{background-position:0 -1190px}.firebaseui-flag-GH{background-position:0 -1204px}.firebaseui-flag-GI{background-position:0 -1218px}.firebaseui-flag-GL{background-position:0 -1232px}.firebaseui-flag-GM{background-position:0 -1246px}.firebaseui-flag-GN{background-position:0 -1260px}.firebaseui-flag-GP{background-position:0 -1274px}.firebaseui-flag-GQ{background-position:0 -1288px}.firebaseui-flag-GR{background-position:0 -1302px}.firebaseui-flag-GS{background-position:0 -1316px}.firebaseui-flag-GT{background-position:0 -1330px}.firebaseui-flag-GU{background-position:0 -1344px}.firebaseui-flag-GW{background-position:0 -1358px}.firebaseui-flag-GY{background-position:0 -1372px}.firebaseui-flag-HK{background-position:0 -1386px}.firebaseui-flag-HM{background-position:0 -1400px}.firebaseui-flag-HN{background-position:0 -1414px}.firebaseui-flag-HR{background-position:0 -1428px}.firebaseui-flag-HT{background-position:0 -1442px}.firebaseui-flag-HU{background-position:0 -1456px}.firebaseui-flag-IC{background-position:0 -1470px}.firebaseui-flag-ID{background-position:0 -1484px}.firebaseui-flag-IE{background-position:0 -1498px}.firebaseui-flag-IL{background-position:0 -1512px}.firebaseui-flag-IM{background-position:0 -1526px}.firebaseui-flag-IN{background-position:0 -1540px}.firebaseui-flag-IO{background-position:0 -1554px}.firebaseui-flag-IQ{background-position:0 -1568px}.firebaseui-flag-IR{background-position:0 -1582px}.firebaseui-flag-IS{background-position:0 -1596px}.firebaseui-flag-IT{background-position:0 -1610px}.firebaseui-flag-JE{background-position:0 -1624px}.firebaseui-flag-JM{background-position:0 -1638px}.firebaseui-flag-JO{background-position:0 -1652px}.firebaseui-flag-JP{background-position:0 -1666px}.firebaseui-flag-KE{background-position:0 -1680px}.firebaseui-flag-KG{background-position:0 -1694px}.firebaseui-flag-KH{background-position:0 -1708px}.firebaseui-flag-KI{background-position:0 -1722px}.firebaseui-flag-KM{background-position:0 -1736px}.firebaseui-flag-KN{background-position:0 -1750px}.firebaseui-flag-KP{background-position:0 -1764px}.firebaseui-flag-KR{background-position:0 -1778px}.firebaseui-flag-KW{background-position:0 -1792px}.firebaseui-flag-AD{background-position:0 -1806px}.firebaseui-flag-KZ{background-position:0 -1820px}.firebaseui-flag-LA{background-position:0 -1834px}.firebaseui-flag-LB{background-position:0 -1848px}.firebaseui-flag-LC{background-position:0 -1862px}.firebaseui-flag-LI{background-position:0 -1876px}.firebaseui-flag-LK{background-position:0 -1890px}.firebaseui-flag-LR{background-position:0 -1904px}.firebaseui-flag-LS{background-position:0 -1918px}.firebaseui-flag-LT{background-position:0 -1932px}.firebaseui-flag-LU{background-position:0 -1946px}.firebaseui-flag-LV{background-position:0 -1960px}.firebaseui-flag-LY{background-position:0 -1974px}.firebaseui-flag-MA{background-position:0 -1988px}.firebaseui-flag-MC{background-position:0 -2002px}.firebaseui-flag-MD{background-position:0 -2016px}.firebaseui-flag-ME{background-position:0 -2030px}.firebaseui-flag-MF{background-position:0 -2044px}.firebaseui-flag-MG{background-position:0 -2058px}.firebaseui-flag-MH{background-position:0 -2072px}.firebaseui-flag-MK{background-position:0 -2086px}.firebaseui-flag-ML{background-position:0 -2100px}.firebaseui-flag-MM{background-position:0 -2114px}.firebaseui-flag-MN{background-position:0 -2128px}.firebaseui-flag-MO{background-position:0 -2142px}.firebaseui-flag-MP{background-position:0 -2156px}.firebaseui-flag-MQ{background-position:0 -2170px}.firebaseui-flag-MR{background-position:0 -2184px}.firebaseui-flag-MS{background-position:0 -2198px}.firebaseui-flag-MT{background-position:0 -2212px}.firebaseui-flag-MU{background-position:0 -2226px}.firebaseui-flag-MV{background-position:0 -2240px}.firebaseui-flag-MW{background-position:0 -2254px}.firebaseui-flag-MX{background-position:0 -2268px}.firebaseui-flag-MY{background-position:0 -2282px}.firebaseui-flag-MZ{background-position:0 -2296px}.firebaseui-flag-NA{background-position:0 -2310px}.firebaseui-flag-NC{background-position:0 -2324px}.firebaseui-flag-NE{background-position:0 -2338px}.firebaseui-flag-NF{background-position:0 -2352px}.firebaseui-flag-NG{background-position:0 -2366px}.firebaseui-flag-NI{background-position:0 -2380px}.firebaseui-flag-NL{background-position:0 -2394px}.firebaseui-flag-NO{background-position:0 -2408px}.firebaseui-flag-NP{background-position:0 -2422px}.firebaseui-flag-NR{background-position:0 -2436px}.firebaseui-flag-NU{background-position:0 -2450px}.firebaseui-flag-NZ{background-position:0 -2464px}.firebaseui-flag-OM{background-position:0 -2478px}.firebaseui-flag-PA{background-position:0 -2492px}.firebaseui-flag-PE{background-position:0 -2506px}.firebaseui-flag-PF{background-position:0 -2520px}.firebaseui-flag-PG{background-position:0 -2534px}.firebaseui-flag-PH{background-position:0 -2548px}.firebaseui-flag-PK{background-position:0 -2562px}.firebaseui-flag-PL{background-position:0 -2576px}.firebaseui-flag-PM{background-position:0 -2590px}.firebaseui-flag-PN{background-position:0 -2604px}.firebaseui-flag-PR{background-position:0 -2618px}.firebaseui-flag-PS{background-position:0 -2632px}.firebaseui-flag-PT{background-position:0 -2646px}.firebaseui-flag-PW{background-position:0 -2660px}.firebaseui-flag-PY{background-position:0 -2674px}.firebaseui-flag-QA{background-position:0 -2688px}.firebaseui-flag-RE{background-position:0 -2702px}.firebaseui-flag-RO{background-position:0 -2716px}.firebaseui-flag-RS{background-position:0 -2730px}.firebaseui-flag-RU{background-position:0 -2744px}.firebaseui-flag-RW{background-position:0 -2758px}.firebaseui-flag-SA{background-position:0 -2772px}.firebaseui-flag-SB{background-position:0 -2786px}.firebaseui-flag-SC{background-position:0 -2800px}.firebaseui-flag-SD{background-position:0 -2814px}.firebaseui-flag-SE{background-position:0 -2828px}.firebaseui-flag-SG{background-position:0 -2842px}.firebaseui-flag-SH{background-position:0 -2856px}.firebaseui-flag-SI{background-position:0 -2870px}.firebaseui-flag-SJ{background-position:0 -2884px}.firebaseui-flag-SK{background-position:0 -2898px}.firebaseui-flag-SL{background-position:0 -2912px}.firebaseui-flag-SM{background-position:0 -2926px}.firebaseui-flag-SN{background-position:0 -2940px}.firebaseui-flag-SO{background-position:0 -2954px}.firebaseui-flag-SR{background-position:0 -2968px}.firebaseui-flag-SS{background-position:0 -2982px}.firebaseui-flag-ST{background-position:0 -2996px}.firebaseui-flag-SV{background-position:0 -3010px}.firebaseui-flag-SX{background-position:0 -3024px}.firebaseui-flag-SY{background-position:0 -3038px}.firebaseui-flag-SZ{background-position:0 -3052px}.firebaseui-flag-TA{background-position:0 -3066px}.firebaseui-flag-TC{background-position:0 -3080px}.firebaseui-flag-TD{background-position:0 -3094px}.firebaseui-flag-TF{background-position:0 -3108px}.firebaseui-flag-TG{background-position:0 -3122px}.firebaseui-flag-TH{background-position:0 -3136px}.firebaseui-flag-TJ{background-position:0 -3150px}.firebaseui-flag-TK{background-position:0 -3164px}.firebaseui-flag-TL{background-position:0 -3178px}.firebaseui-flag-TM{background-position:0 -3192px}.firebaseui-flag-TN{background-position:0 -3206px}.firebaseui-flag-TO{background-position:0 -3220px}.firebaseui-flag-TR{background-position:0 -3234px}.firebaseui-flag-TT{background-position:0 -3248px}.firebaseui-flag-TV{background-position:0 -3262px}.firebaseui-flag-TW{background-position:0 -3276px}.firebaseui-flag-TZ{background-position:0 -3290px}.firebaseui-flag-UA{background-position:0 -3304px}.firebaseui-flag-UG{background-position:0 -3318px}.firebaseui-flag-UM{background-position:0 -3332px}.firebaseui-flag-UN{background-position:0 -3346px}.firebaseui-flag-US{background-position:0 -3360px}.firebaseui-flag-UY{background-position:0 -3374px}.firebaseui-flag-UZ{background-position:0 -3388px}.firebaseui-flag-VA{background-position:0 -3402px}.firebaseui-flag-VC{background-position:0 -3416px}.firebaseui-flag-VE{background-position:0 -3430px}.firebaseui-flag-VG{background-position:0 -3444px}.firebaseui-flag-VI{background-position:0 -3458px}.firebaseui-flag-VN{background-position:0 -3472px}.firebaseui-flag-VU{background-position:0 -3486px}.firebaseui-flag-WF{background-position:0 -3500px}.firebaseui-flag-WS{background-position:0 -3514px}.firebaseui-flag-XK{background-position:0 -3528px}.firebaseui-flag-YE{background-position:0 -3542px}.firebaseui-flag-YT{background-position:0 -3556px}.firebaseui-flag-ZA{background-position:0 -3570px}.firebaseui-flag-ZM{background-position:0 -3584px}.firebaseui-flag-ZW{background-position:0 -3598px}',""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r=e[1]||"",i=e[3];if(!i)return r;if(t&&"function"==typeof btoa){var o=(n=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[r].concat(a).concat([o]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var r,i,o,a={},s=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),u=function(e){return document.querySelector(e)},c=(o={},function(e){if("function"==typeof e)return e();if(void 0===o[e]){var t=u.call(this,e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}o[e]=t}return o[e]}),l=null,h=0,f=[],d=n(6);function p(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=a[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(w(r.parts[o],t))}else{var s=[];for(o=0;o<r.parts.length;o++)s.push(w(r.parts[o],t));a[r.id]={id:r.id,refs:1,parts:s}}}}function m(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function v(e,t){var n=c(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=f[f.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),f.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=c(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=f.indexOf(e);t>=0&&f.splice(t,1)}function y(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),b(t,e.attrs),v(e,t),t}function b(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function w(e,t){var n,r,i,o,a,s;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var u=h++;n=l||(l=y(t)),r=S.bind(null,n,u,!1),i=S.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=t,s=document.createElement("link"),void 0===a.attrs.type&&(a.attrs.type="text/css"),a.attrs.rel="stylesheet",b(s,a.attrs),v(a,s),n=s,r=M.bind(null,n,t),i=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=y(t),r=E.bind(null,n),i=function(){g(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=m(e,t);return p(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var o=n[i];(s=a[o.id]).refs--,r.push(s)}for(e&&p(m(e,t),t),i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete a[s.id]}}}};var _,k=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function S(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=k(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function E(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function M(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=d(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(e,t){e.exports=o("1mq7S")}]);a=o("6Ti1v"),bn=o("1xTls");var Ys=function(e,t){return(Ys=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Qs(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ys(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Js=function(){return(Js=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Zs(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function Xs(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}Object.create;function $s(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function eu(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function tu(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var nu=o("7lbf0"),ru="";function iu(e){ru=e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ou,au=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),bn.stringify(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:bn.jsonEval(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),su=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return bn.contains(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),uu=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new au(t)}}catch(e){}return new su},cu=uu("localStorage"),lu=uu("sessionStorage"),hu=new Bn("@firebase/database"),fu=(ou=1,function(){return ou++}),du=function(e){var t=bn.stringToByteArray(e),n=new bn.Sha1;n.update(t);var r=n.digest();return bn.base64.encodeByteArray(r)},pu=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var i=e[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=pu.apply(null,i):n+="object"==typeof i?bn.stringify(i):i,n+=" "}return n},mu=null,vu=!0,gu=function(e,t){bn.assert(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(hu.logLevel=Pn.VERBOSE,mu=hu.log.bind(hu),t&&lu.set("logging_enabled",!0)):"function"==typeof e?mu=e:(mu=null,lu.remove("logging_enabled"))},yu=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===vu&&(vu=!1,null===mu&&!0===lu.get("logging_enabled")&&gu(!0)),mu){var n=pu.apply(null,e);mu(n)}},bu=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];yu.apply(void 0,tu([e],eu(t)))}},wu=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+pu.apply(void 0,tu([],eu(e)));hu.error(n)},_u=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+pu.apply(void 0,tu([],eu(e)));throw hu.error(n),new Error(n)},ku=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+pu.apply(void 0,tu([],eu(e)));hu.warn(n)},Su=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Eu="[MIN_NAME]",Mu="[MAX_NAME]",Tu=function(e,t){if(e===t)return 0;if(e===Eu||t===Mu)return-1;if(t===Eu||e===Mu)return 1;var n=Lu(e),r=Lu(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Cu=function(e,t){return e===t?0:e<t?-1:1},Iu=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+bn.stringify(t))},xu=function(e){if("object"!=typeof e||null===e)return bn.stringify(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)0!==i&&(r+=","),r+=bn.stringify(t[i]),r+=":",r+=xu(e[t[i]]);return r+="}"},Au=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Ou=function(e){bn.assert(!Su(e),"Invalid JSON number");var t,n,r,i,o,a=1023;0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),a))+a,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(o=0;o<64;o+=8){var l=parseInt(u.substr(o,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var Ru=new RegExp("^-?(0*)\\d{1,10}$"),Du=-2147483648,Nu=2147483647,Lu=function(e){if(Ru.test(e)){var t=Number(e);if(t>=Du&&t<=Nu)return t}return null},ju=function(e){try{e()}catch(e){setTimeout((function(){var t=e.stack||"";throw ku("Exception was thrown by user callback.",t),e}),Math.floor(0))}},Bu=function(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n},Fu=function(){function e(e,t){var n=this;this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then((function(e){return n.appCheck=e}))}return e.prototype.getToken=function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))},e.prototype.addTokenChangeListener=function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){ku('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},e}(),Uu=function(){function e(e,t,n){var r=this;this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(e){return r.auth_=e}))}return e.prototype.getToken=function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(yu("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))},e.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))},e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ku(e)},e}(),qu=function(){function e(e){this.accessToken=e}return e.prototype.getToken=function(e){return Promise.resolve({accessToken:this.accessToken})},e.prototype.addTokenChangeListener=function(e){e(this.accessToken)},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){},e.OWNER="owner",e}(),zu="5",Vu=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Wu="websocket",Hu="long_polling",Ku=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=cu.get("host:"+e)||this._host}return e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&cu.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+e+this.host+"/"+t},e}();function Gu(e,t,n){var r;if(bn.assert("string"==typeof t,"typeof type must == string"),bn.assert("object"==typeof n,"typeof params must == object"),t===Wu)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Hu)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Pu(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yu=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),bn.contains(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return bn.deepCopy(this.counters_)},e}(),Qu={},Ju={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(e){var t=e.toString();return Qu[t]||(Qu[t]=new Yu),Qu[t]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Xu=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&ju((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},e}(),$u="start",ec="close",tc=function(){function e(e,t,n,r,i,o,a){var s=this;this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bu(e),this.stats_=Zu(t),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),Gu(t,Hu,e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Xu(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(bn.isNodeSdk()||"complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new nc((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=eu(e,5),i=r[0],o=r[1],a=r[2];if(r[3],r[4],n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===$u)n.id=o,n.password=a;else{if(i!==ec)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=eu(e,2),i=r[0],o=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=zu,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&Vu.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!bn.isNodeSdk()&&(!!e.forceAllow_||!(e.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=bn.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=bn.base64Encode(t),r=Au(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!bn.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=bn.stringify(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),nc=function(){function e(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,bn.isNodeSdk())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=fu(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))o='<script>document.domain="'+document.domain+'";<\/script>';var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(e){yu("frame writing exception"),e.stack&&yu(e.stack),yu(e)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||yu("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))},e.prototype.addTag=function(e,t){var n=this;bn.isNodeSdk()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){yu("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(e){}}),Math.floor(1))},e}(),rc=null;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */"undefined"!=typeof MozWebSocket?rc=MozWebSocket:"undefined"!=typeof WebSocket&&(rc=WebSocket);var ic=function(){function e(t,n,r,i,o,a,s){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bu(this.connId),this.stats_=Zu(n),this.connURL=e.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(e,t,n,r){var i={};return i.v=zu,!bn.isNodeSdk()&&"undefined"!=typeof location&&location.hostname&&Vu.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),Gu(e,Wu,i)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,cu.set("previous_websocket_failure",!0);try{if(bn.isNodeSdk()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+ru+"/"+nu.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var o=nu.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new rc(this.connURL,[],i)}else{i={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new rc(this.connURL,[],i)}}catch(e){this.log_("Error instantiating WebSocket.");var s=e.message||e.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==rc&&!e.forceDisallow_},e.previouslyFailed=function(){return cu.isInMemoryStorage||!0===cu.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){cu.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=bn.jsonEval(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if(bn.assert(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=bn.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Au(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),oc=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[tc,ic]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=ic&&ic.isAvailable(),o=i&&!ic.previouslyFailed();if(t.webSocketOnly&&(i||ku("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[ic];else{var a=this.transports_=[];try{for(var s=$s(e.ALL_TRANSPORTS),u=s.next();!u.done;u=s.next()){var c=u.value;c&&c.isAvailable()&&a.push(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),ac=function(){function e(e,t,n,r,i,o,a,s,u,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bu("c:"+this.id+":"),this.transportManager_=new oc(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Bu((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=Iu("t",e),n=Iu("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=Iu("t",e),n=Iu("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=Iu("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?wu("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wu("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),zu!==n&&ku("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Bu((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Bu((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(cu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),sc=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.refreshAppCheckToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),uc=function(){function e(e){this.allowedEvents_=e,this.listeners_={},bn.assert(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=tu([],eu(this.listeners_[e])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){bn.assert(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},e}(),cc=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||bn.isMobileCordova()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}return Qs(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return bn.assert("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(uc),lc=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(){return new lc("")}function fc(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function dc(e){return e.pieces_.length-e.pieceNum_}function pc(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new lc(e.pieces_,t)}function mc(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function vc(e,t){return void 0===t&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function gc(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new lc(t,0)}function yc(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof lc)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new lc(n,0)}function bc(e){return e.pieceNum_>=e.pieces_.length}function wc(e,t){var n=fc(e),r=fc(t);if(null===n)return t;if(n===r)return wc(pc(e),pc(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function _c(e,t){for(var n=vc(e,0),r=vc(t,0),i=0;i<n.length&&i<r.length;i++){var o=Tu(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function kc(e,t){if(dc(e)!==dc(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Sc(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(dc(e)>dc(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Ec=function(e,t){this.errorPrefix_=t,this.parts_=vc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=bn.stringLength(this.parts_[n]);Mc(this)};function Mc(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Tc(e))}function Tc(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cc,Ic,xc=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",t="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))}),!1),r}return Qs(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return bn.assert("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(uc),Ac=1e3,Pc=function(e){function t(n,r,i,o,a,s,u,c){var l=e.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=o,l.onServerInfoUpdate_=a,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=t.nextPersistentConnectionId_++,l.log_=bu("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Ac,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!bn.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return xc.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&cc.getInstance().on("online",l.onOnline_,l),l}return Qs(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(bn.stringify(i)),bn.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.get=function(e){var t=this;this.initConnection_();var n=new bn.Deferred,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[o];void 0!==e&&i===e&&(delete t.outstandingGets_[o],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},t.prototype.listen=function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),bn.assert(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),bn.assert(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},t.prototype.sendGet_=function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};e.tag&&(a.q=r._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;t.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===e&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,s))}))},t.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&bn.contains(e,"w")){var n=bn.safeGet(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();ku("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||bn.isAdmin(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.refreshAppCheckToken=function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=bn.isValidFormat(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},t.prototype.tryAppCheck=function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))},t.prototype.unlisten=function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),bn.assert(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){this.initConnection_();var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+bn.stringify(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):wu("Unrecognized action received from server: "+bn.stringify(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;bn.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},t.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ac,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ac,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ac),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){return Zs(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,h,f,d,p,m=this;return Xs(this,(function(v){switch(v.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,s=null,u=function(){s?s.close():(a=!0,r())},c=function(e){bn.assert(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:u,sendRequest:c},l=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,v.label=1;case 1:return v.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)])];case 2:return h=eu.apply(void 0,[v.sent(),2]),f=h[0],d=h[1],a?yu("getToken() completed but was canceled"):(yu("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=d&&d.token,s=new ac(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,(function(e){ku(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),[3,4];case 3:return p=v.sent(),this.log_("Failed to get token: "+p),a||(this.repoInfo_.nodeAdmin&&ku(p),u()),[3,4];case 4:return[2]}}))}))},t.prototype.interrupt=function(e){yu("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){yu("Resuming connection for reason: "+e),delete this.interruptReasons_[e],bn.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=Ac,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map((function(e){return xu(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new lc(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){yu("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onAppCheckRevoked_=function(e,t){yu("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=$s(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,$s(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},t.prototype.sendConnectStats_=function(){var e={},t="js";bn.isNodeSdk()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+ru.replace(/\./g,"-")]=1,bn.isMobileCordova()?e["framework.cordova"]=1:bn.isReactNative()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=cc.getInstance().currentlyOnline();return bn.isEmpty(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(sc),Oc=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),Rc=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new Oc(Eu,e),r=new Oc(Eu,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return Oc.MIN},e}(),Dc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qs(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return Cc},set:function(e){Cc=e},enumerable:!1,configurable:!0}),t.prototype.compare=function(e,t){return Tu(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw bn.assertionError("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return Oc.MIN},t.prototype.maxPost=function(){return new Oc(Mu,Cc)},t.prototype.makePost=function(e,t){return bn.assert("string"==typeof e,"KeyIndex indexValue must always be a string."),new Oc(e,Cc)},t.prototype.toString=function(){return".key"},t}(Rc),Nc=new Dc,Lc=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),jc=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Fc.EMPTY_NODE,this.right=null!=o?o:Fc.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return Fc.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Fc.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),Bc=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new jc(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),Fc=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,jc.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,jc.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new Lc(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new Lc(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new Lc(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new Lc(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new Bc,e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Uc(e,t){return Tu(e.name,t.name)}function qc(e,t){return Tu(e,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zc,Vc,Wc,Hc=function(e){return"number"==typeof e?"number:"+Ou(e):"string:"+e},Kc=function(e){if(e.isLeafNode()){var t=e.val();bn.assert("string"==typeof t||"number"==typeof t||"object"==typeof t&&bn.contains(t,".sv"),"Priority must be a string or number.")}else bn.assert(e===Ic||e.isEmpty(),"priority of unexpected type.");bn.assert(e===Ic||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Gc=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,bn.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Kc(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return zc},set:function(e){zc=e},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return bc(t)?this:".priority"===fc(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=fc(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(bn.assert(".priority"!==r||1===dc(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(pc(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Hc(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Ou(this.value_):this.value_,this.lazyHash_=du(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(bn.assert(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(r);return bn.assert(i>=0,"Unknown leaf type: "+n),bn.assert(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();var Yc,Qc,Jc=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qs(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Tu(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return Oc.MIN},t.prototype.maxPost=function(){return new Oc(Mu,new Gc("[PRIORITY-POST]",Wc))},t.prototype.makePost=function(e,t){var n=Vc(e);return new Oc(t,new Gc("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(Rc)),Zc=Math.log(2),Xc=function(){function e(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Zc,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),$c=function(e,t,n,r){e.sort(t);var i=function(t,r){var o,a,s=r-t;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new jc(a,o.node,jc.BLACK,null,null);var u=parseInt(s/2,10)+t,c=i(t,u),l=i(u+1,r);return o=e[u],a=n?n(o):o,new jc(a,o.node,jc.BLACK,c,l)},o=function(t){for(var r=null,o=null,a=e.length,s=function(t,r){var o=a-t,s=a;a-=t;var c=i(o+1,s),l=e[o],h=n?n(l):l;u(new jc(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(o=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,jc.BLACK):(s(h,jc.BLACK),s(h,jc.RED))}return o}(new Xc(e.length));return new Fc(r||t,o)},el={},tl=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return bn.assert(el&&Jc,"ChildrenNode.ts has not been loaded"),Yc=Yc||new e({".priority":el},{".priority":Jc})},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=bn.safeGet(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Fc?t:null},e.prototype.hasIndex=function(e){return bn.contains(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){bn.assert(t!==Nc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(Oc.Wrap),s=a.getNext();s;)o=o||t.isDefinedOn(s.node),i.push(s),s=a.getNext();r=o?$c(i,t.getCompare()):el;var u=t.toString(),c=Js({},this.indexSet_);c[u]=t;var l=Js({},this.indexes_);return l[u]=r,new e(l,c)},e.prototype.addToIndexes=function(t,n){var r=this;return new e(bn.map(this.indexes_,(function(e,i){var o=bn.safeGet(r.indexSet_,i);if(bn.assert(o,"Missing index implementation for "+i),e===el){if(o.isDefinedOn(t.node)){for(var a=[],s=n.getIterator(Oc.Wrap),u=s.getNext();u;)u.name!==t.name&&a.push(u),u=s.getNext();return a.push(t),$c(a,o.getCompare())}return el}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Oc(t.name,c))),l.insert(t,t.node)})),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e(bn.map(this.indexes_,(function(e){if(e===el)return e;var r=n.get(t.name);return r?e.remove(new Oc(t.name,r)):e})),this.indexSet_)},e}(),nl=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Kc(this.priorityNode_),this.children_.isEmpty()&&bn.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return Qc||(Qc=new e(new Fc(qc),null,tl.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||Qc},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Qc:t},e.prototype.getChild=function(e){var t=fc(e);return null===t?this:this.getImmediateChild(t).getChild(pc(e))},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(bn.assert(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new Oc(t,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Qc:this.priorityNode_;return new e(i,a,o)},e.prototype.updateChild=function(e,t){var n=fc(e);if(null===n)return t;bn.assert(".priority"!==fc(e)||1===dc(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(pc(e),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Jc,(function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!t&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Hc(this.getPriority().val())+":"),this.forEachChild(Jc,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":du(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Oc(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new Oc(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new Oc(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Oc.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Oc.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===rl?-1:0},e.prototype.withIndex=function(t){if(t===Nc||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===Nc||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Jc),r=t.getIterator(Jc),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===Nc?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),rl=new(function(e){function t(){return e.call(this,new Fc(qc),nl.EMPTY_NODE,tl.Default)||this}return Qs(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return nl.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(nl));Object.defineProperties(Oc,{MIN:{value:new Oc(Eu,nl.EMPTY_NODE)},MAX:{value:new Oc(Mu,rl)}}),Dc.__EMPTY_NODE=nl.EMPTY_NODE,Gc.__childrenNodeConstructor=nl,Ic=rl,function(e){Wc=e}(rl);function il(e,t){if(void 0===t&&(t=null),null===e)return nl.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),bn.assert(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Gc(e,il(t));if(e instanceof Array){var n=nl.EMPTY_NODE;return Pu(e,(function(t,r){if(bn.contains(e,t)&&"."!==t.substring(0,1)){var i=il(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(il(t))}var r=[],i=!1;if(Pu(e,(function(e,t){if("."!==e.substring(0,1)){var n=il(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Oc(e,n)))}})),0===r.length)return nl.EMPTY_NODE;var o=$c(r,Uc,(function(e){return e.name}),qc);if(i){var a=$c(r,Jc.getCompare());return new nl(o,il(t),new tl({".priority":a},{".priority":Jc}))}return new nl(o,il(t),tl.Default)}!function(e){Vc=e}(il);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ol,al,sl=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,bn.assert(!bc(t)&&".priority"!==fc(t),"Can't create PathIndex with empty path or .priority key"),n}return Qs(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Tu(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=il(e),r=nl.EMPTY_NODE.updateChild(this.indexPath_,n);return new Oc(t,r)},t.prototype.maxPost=function(){var e=nl.EMPTY_NODE.updateChild(this.indexPath_,rl);return new Oc(Mu,e)},t.prototype.toString=function(){return vc(this.indexPath_,0).join("/")},t}(Rc),ul=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qs(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?Tu(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return Oc.MIN},t.prototype.maxPost=function(){return Oc.MAX},t.prototype.makePost=function(e,t){var n=il(e);return new Oc(t,n)},t.prototype.toString=function(){return".value"},t}(Rc)),cl="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ll=(ol=0,al=[],function(e){var t,n=e===ol;ol=e;var r=new Array(8);for(t=7;t>=0;t--)r[t]=cl.charAt(e%64),e=Math.floor(e/64);bn.assert(0===e,"Cannot push at time == 0");var i=r.join("");if(n){for(t=11;t>=0&&63===al[t];t--)al[t]=0;al[t]++}else for(t=0;t<12;t++)al[t]=Math.floor(64*Math.random());for(t=0;t<12;t++)i+=cl.charAt(al[t]);return bn.assert(20===i.length,"nextPushId: Length should be 20."),i}),hl=function(e){if("2147483647"===e)return"-";var t=Lu(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return Mu;var o=n[i],a=cl.charAt(cl.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},fl=function(e){if("-2147483648"===e)return Eu;var t=Lu(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=cl.charAt(cl.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function dl(e){return{type:"value",snapshotNode:e}}function pl(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ml(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function vl(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var gl=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,o){bn.assert(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(ml(t,a)):bn.assert(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(pl(t,n)):o.trackChildChange(vl(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Jc,(function(e,r){t.hasChild(e)||n.trackChildChange(ml(e,r))})),t.isLeafNode()||t.forEachChild(Jc,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(vl(t,r,i))}else n.trackChildChange(pl(t,r))}))),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?nl.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),yl=function(){function e(t){this.indexedFilter_=new gl(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new Oc(t,n))||(n=nl.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=nl.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(nl.EMPTY_NODE);var i=this;return t.forEachChild(Jc,(function(e,t){i.matches(new Oc(e,t))||(r=r.updateImmediateChild(e,nl.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),bl=function(){function e(e){this.rangedFilter_=new yl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new Oc(t,n))||(n=nl.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=nl.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=nl.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(nl.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(e,t){return l(t,e)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){a=i.getNext();!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,nl.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(e,t){return a(t,e)}}else o=this.index_.getCompare();var s=e;bn.assert(s.numChildren()===this.limit_,"");var u=new Oc(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:o(f,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(vl(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(ml(t,h));var p=s.updateImmediateChild(t,nl.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(pl(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&o(c,u)>=0?(null!=i&&(i.trackChildChange(ml(c.name,c.node)),i.trackChildChange(pl(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,nl.EMPTY_NODE)):e},e}(),wl=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jc}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},e.prototype.getIndexStartValue=function(){return bn.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return bn.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Eu},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return bn.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return bn.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Mu},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return bn.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Jc},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function kl(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Sl(e,t){var n=e.copy();return n.index_=t,n}function El(e){var t,n={};return e.isDefault()||(e.index_===Jc?t="$priority":e.index_===ul?t="$value":e.index_===Nc?t="$key":(bn.assert(e.index_ instanceof sl,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=bn.stringify(t),e.startSet_&&(n.startAt=bn.stringify(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+bn.stringify(e.indexStartName_))),e.endSet_&&(n.endAt=bn.stringify(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+bn.stringify(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function Ml(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Jc&&(t.i=e.index_.toString()),t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tl=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.repoInfo_=t,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=bu("p:rest:"),o.listens_={},o}return Qs(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(bn.assert(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())},t.prototype.listen=function(e,n,r,i){var o=this,a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);var s=t.getListenId_(e,r),u={};this.listens_[s]=u;var c=El(e._queryParams);this.restRequest_(a+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&o.onDataUpdate_(a,n,!1,r),bn.safeGet(o.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.get=function(e){var t=this,n=El(e._queryParams),r=e._path.toString(),i=new bn.Deferred;return this.restRequest_(r+".json",n,(function(e,n){var o=n;404===e&&(o=null,e=null),null===e?(t.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;return void 0===t&&(t={}),t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var o=eu(i,2),a=o[0],s=o[1];a&&a.accessToken&&(t.auth=a.accessToken),s&&s.token&&(t.ac=s.token);var u=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+bn.querystring(t);r.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(n&&4===c.readyState){r.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=bn.jsonEval(c.responseText)}catch(e){ku("Failed to parse JSON response for "+u+": "+c.responseText)}n(null,e)}else 401!==c.status&&404!==c.status&&ku("Got unsuccessful REST response for "+u+" Status: "+c.status),n(c.status);n=null}},c.open("GET",u,!0),c.send()}))},t}(sc),Cl=function(){function e(){this.rootNode_=nl.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Il(){return{value:null,children:new Map}}function xl(e,t,n){if(bc(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=fc(t);e.children.has(r)||e.children.set(r,Il()),xl(e.children.get(r),t=pc(t),n)}}function Al(e,t){if(bc(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(Jc,(function(t,n){xl(e,new lc(t),n)})),Al(e,t)}if(e.children.size>0){var r=fc(t);if(t=pc(t),e.children.has(r))Al(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function Pl(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,(function(e,r){Pl(r,new lc(t.toString()+"/"+e),n)}))}var Ol,Rl,Dl=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=Js({},e);return this.last_&&Pu(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},e}(),Nl=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Dl(e);var n=1e4+2e4*Math.random();Bu(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Pu(t,(function(t,i){i>0&&bn.contains(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Bu(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Rl=Ol||(Ol={}))[Rl.OVERWRITE=0]="OVERWRITE",Rl[Rl.MERGE=1]="MERGE",Rl[Rl.ACK_USER_WRITE=2]="ACK_USER_WRITE",Rl[Rl.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var jl,Bl=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Ol.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return e.prototype.operationForChild=function(t){if(bc(this.path)){if(null!=this.affectedTree.value)return bn.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new lc(t));return new e(hc(),n,this.revert)}return bn.assert(fc(this.path)===t,"operationForChild called for unrelated child."),new e(pc(this.path),this.affectedTree,this.revert)},e}(),Fl=function(){function e(e,t){this.source=e,this.path=t,this.type=Ol.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return bc(this.path)?new e(this.source,hc()):new e(this.source,pc(this.path))},e}(),Ul=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Ol.OVERWRITE}return e.prototype.operationForChild=function(t){return bc(this.path)?new e(this.source,hc(),this.snap.getImmediateChild(t)):new e(this.source,pc(this.path),this.snap)},e}(),ql=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Ol.MERGE}return e.prototype.operationForChild=function(t){if(bc(this.path)){var n=this.children.subtree(new lc(t));return n.isEmpty()?null:n.value?new Ul(this.source,hc(),n.value):new e(this.source,hc(),n)}return bn.assert(fc(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,pc(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),zl=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(bc(e))return this.isFullyInitialized()&&!this.filtered_;var t=fc(e);return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),Vl=function(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(e,t,n,r,i,o){var a=r.filter((function(e){return e.type===n}));a.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw bn.assertionError("Should only compare child_ events.");var r=new Oc(t.childName,t.snapshotNode),i=new Oc(n.childName,n.snapshotNode);return e.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t,n)})),a.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Hl(e,t){return{eventCache:e,serverCache:t}}function Kl(e,t,n,r){return Hl(new zl(t,n,r),e.serverCache)}function Gl(e,t,n,r){return Hl(e.eventCache,new zl(t,n,r))}function Yl(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ql(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jl=function(){function e(e,t){void 0===t&&(jl||(jl=new Fc(Cu)),t=jl),this.value=e,this.children=t}return e.fromObject=function(t){var n=new e(null);return Pu(t,(function(e,t){n=n.set(new lc(e),t)})),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:hc(),value:this.value};if(bc(e))return null;var n=fc(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(pc(e),t);return null!=i?{path:yc(new lc(n),i.path),value:i.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},e.prototype.subtree=function(t){if(bc(t))return this;var n=fc(t),r=this.children.get(n);return null!==r?r.subtree(pc(t)):new e(null)},e.prototype.set=function(t,n){if(bc(t))return new e(n,this.children);var r=fc(t),i=(this.children.get(r)||new e(null)).set(pc(t),n),o=this.children.insert(r,i);return new e(this.value,o)},e.prototype.remove=function(t){if(bc(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=fc(t),r=this.children.get(n);if(r){var i=r.remove(pc(t)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new e(null):new e(this.value,o)}return this},e.prototype.get=function(e){if(bc(e))return this.value;var t=fc(e),n=this.children.get(t);return n?n.get(pc(e)):null},e.prototype.setTree=function(t,n){if(bc(t))return n;var r=fc(t),i=(this.children.get(r)||new e(null)).setTree(pc(t),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,o)},e.prototype.fold=function(e){return this.fold_(hc(),e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(yc(e,r),t)})),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,hc(),t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(bc(e))return null;var i=fc(e),o=this.children.get(i);return o?o.findOnPath_(pc(e),yc(t,i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,hc(),t)},e.prototype.foreachOnPath_=function(t,n,r){if(bc(t))return this;this.value&&r(n,this.value);var i=fc(t),o=this.children.get(i);return o?o.foreachOnPath_(pc(t),yc(n,i),r):new e(null)},e.prototype.foreach=function(e){this.foreach_(hc(),e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(yc(e,n),t)})),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},e}(),Zl=function(){function e(e){this.writeTree_=e}return e.empty=function(){return new e(new Jl(null))},e}();function Xl(e,t,n){if(bc(t))return new Zl(new Jl(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,a=wc(i,t);return o=o.updateChild(a,n),new Zl(e.writeTree_.set(i,o))}var s=new Jl(n),u=e.writeTree_.setTree(t,s);return new Zl(u)}function $l(e,t,n){var r=e;return Pu(n,(function(e,n){r=Xl(r,yc(t,e),n)})),r}function eh(e,t){if(bc(t))return Zl.empty();var n=e.writeTree_.setTree(t,new Jl(null));return new Zl(n)}function th(e,t){return null!=nh(e,t)}function nh(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(wc(n.path,t)):null}function rh(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Jc,(function(e,n){t.push(new Oc(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Oc(e,n.value))})),t}function ih(e,t){if(bc(t))return e;var n=nh(e,t);return new Zl(null!=n?new Jl(n):e.writeTree_.subtree(t))}function oh(e){return e.writeTree_.isEmpty()}function ah(e,t){return sh(hc(),e.writeTree_,t)}function sh(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(bn.assert(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=sh(yc(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(yc(e,".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(e,t){return _h(t,e)}function ch(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));bn.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,o=!1,a=e.allWrites.length-1;i&&a>=0;){var s=e.allWrites[a];s.visible&&(a>=n&&lh(s,r.path)?i=!1:Sc(r.path,s.path)&&(o=!0)),a--}if(i){if(o)return function(e){e.visibleWrites=fh(e.allWrites,hh,hc()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=eh(e.visibleWrites,r.path):Pu(r.children,(function(t){e.visibleWrites=eh(e.visibleWrites,yc(r.path,t))}));return!0}return!1}function lh(e,t){if(e.snap)return Sc(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Sc(yc(e.path,n),t))return!0;return!1}function hh(e){return e.visible}function fh(e,t,n){for(var r=Zl.empty(),i=0;i<e.length;++i){var o=e[i];if(t(o)){var a=o.path,s=void 0;if(o.snap)Sc(n,a)?r=Xl(r,s=wc(n,a),o.snap):Sc(a,n)&&(s=wc(a,n),r=Xl(r,hc(),o.snap.getChild(s)));else{if(!o.children)throw bn.assertionError("WriteRecord should have .snap or .children");if(Sc(n,a))r=$l(r,s=wc(n,a),o.children);else if(Sc(a,n))if(bc(s=wc(a,n)))r=$l(r,hc(),o.children);else{var u=bn.safeGet(o.children,fc(s));if(u){var c=u.getChild(pc(s));r=Xl(r,hc(),c)}}}}}return r}function dh(e,t,n,r,i){if(r||i){var o=ih(e.visibleWrites,t);if(!i&&oh(o))return n;if(i||null!=n||th(o,hc())){return ah(fh(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Sc(e.path,t)||Sc(t,e.path))}),t),n||nl.EMPTY_NODE)}return null}var a=nh(e.visibleWrites,t);if(null!=a)return a;var s=ih(e.visibleWrites,t);return oh(s)?n:null!=n||th(s,hc())?ah(s,n||nl.EMPTY_NODE):null}function ph(e,t,n,r){return dh(e.writeTree,e.treePath,t,n,r)}function mh(e,t){return function(e,t,n){var r=nl.EMPTY_NODE,i=nh(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Jc,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var o=ih(e.visibleWrites,t);return n.forEachChild(Jc,(function(e,t){var n=ah(ih(o,new lc(e)),t);r=r.updateImmediateChild(e,n)})),rh(o).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return rh(ih(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function vh(e,t,n,r){return function(e,t,n,r,i){bn.assert(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=yc(t,n);if(th(e.visibleWrites,o))return null;var a=ih(e.visibleWrites,o);return oh(a)?i.getChild(n):ah(a,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function gh(e,t){return function(e,t){return nh(e.visibleWrites,t)}(e.writeTree,yc(e.treePath,t))}function yh(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){var s,u=ih(e.visibleWrites,t),c=nh(u,hc());if(null!=c)s=c;else{if(null==n)return[];s=ah(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,o)}function bh(e,t,n){return function(e,t,n,r){var i=yc(t,n),o=nh(e.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?ah(ih(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function wh(e,t){return _h(yc(e.treePath,t),e.writeTree)}function _h(e,t){return{treePath:e,writeTree:t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kh=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;bn.assert("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),bn.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,vl(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,ml(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,pl(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw bn.assertionError("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,vl(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),Sh=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),Eh=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new zl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return bh(this.writes_,e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ql(this.viewCache_),i=yh(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(e,t,n,r,i){var o,a,s=new kh;if(n.type===Ol.OVERWRITE){var u=n;u.source.fromUser?o=Ih(e,t,u.path,u.snap,r,i,s):(bn.assert(u.source.fromServer,"Unknown source."),a=u.source.tagged||t.serverCache.isFiltered()&&!bc(u.path),o=Ch(e,t,u.path,u.snap,r,i,a,s))}else if(n.type===Ol.MERGE){var c=n;c.source.fromUser?o=function(e,t,n,r,i,o,a){var s=t;return r.foreach((function(r,u){var c=yc(n,r);xh(t,fc(c))&&(s=Ih(e,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=yc(n,r);xh(t,fc(c))||(s=Ih(e,s,c,u,i,o,a))})),s}(e,t,c.path,c.children,r,i,s):(bn.assert(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),o=Ph(e,t,c.path,c.children,r,i,a,s))}else if(n.type===Ol.ACK_USER_WRITE){var l=n;o=l.revert?function(e,t,n,r,i,o){var a;if(null!=gh(r,n))return t;var s=new Eh(r,t,i),u=t.eventCache.getNode(),c=void 0;if(bc(n)||".priority"===fc(n)){var l=void 0;if(t.serverCache.isFullyInitialized())l=ph(r,Ql(t));else{var h=t.serverCache.getNode();bn.assert(h instanceof nl,"serverChildren would be complete if leaf node"),l=mh(r,h)}c=e.filter.updateFullNode(u,l,o)}else{var f=fc(n),d=bh(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?e.filter.updateChild(u,f,d,pc(n),s,o):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(u,f,nl.EMPTY_NODE,pc(n),s,o):u).isEmpty()&&t.serverCache.isFullyInitialized()&&(a=ph(r,Ql(t))).isLeafNode()&&(c=e.filter.updateFullNode(c,a,o))}return a=t.serverCache.isFullyInitialized()||null!=gh(r,hc()),Kl(t,c,a,e.filter.filtersNodes())}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t,l.path,r,i,s):function(e,t,n,r,i,o,a){if(null!=gh(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(bc(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Ch(e,t,n,u.getNode().getChild(n),i,o,s,a);if(bc(n)){var c=new Jl(null);return u.getNode().forEachChild(Nc,(function(e,t){c=c.set(new lc(e),t)})),Ph(e,t,n,c,i,o,s,a)}return t}var l=new Jl(null);return r.foreach((function(e,t){var r=yc(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),Ph(e,t,n,l,i,o,s,a)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==Ol.LISTEN_COMPLETE)throw bn.assertionError("Unknown operation type: "+n.type);o=function(e,t,n,r,i){var o=t.serverCache,a=Gl(t,o.getNode(),o.isFullyInitialized()||bc(n),o.isFiltered());return Th(e,a,n,r,Sh,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Yl(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(dl(Yl(t)))}}(t,o,h),{viewCache:o,changes:h}}function Th(e,t,n,r,i,o){var a=t.eventCache;if(null!=gh(r,n))return t;var s=void 0,u=void 0;if(bc(n))if(bn.assert(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=Ql(t),l=mh(r,c instanceof nl?c:nl.EMPTY_NODE);s=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{var h=ph(r,Ql(t));s=e.filter.updateFullNode(t.eventCache.getNode(),h,o)}else{var f=fc(n);if(".priority"===f){bn.assert(1===dc(n),"Can't have a priority with additional path components");var d=a.getNode(),p=vh(r,n,d,u=t.serverCache.getNode());s=null!=p?e.filter.updatePriority(d,p):a.getNode()}else{var m=pc(n),v=void 0;if(a.isCompleteForChild(f)){u=t.serverCache.getNode();var g=vh(r,n,a.getNode(),u);v=null!=g?a.getNode().getImmediateChild(f).updateChild(m,g):a.getNode().getImmediateChild(f)}else v=bh(r,f,t.serverCache);s=null!=v?e.filter.updateChild(a.getNode(),f,v,m,i,o):a.getNode()}}return Kl(t,s,a.isFullyInitialized()||bc(n),e.filter.filtersNodes())}function Ch(e,t,n,r,i,o,a,s){var u,c=t.serverCache,l=a?e.filter:e.filter.getIndexedFilter();if(bc(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=fc(n);if(!c.isCompleteForPath(n)&&dc(n)>1)return t;var d=pc(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,Sh,null)}var m=Gl(t,u,c.isFullyInitialized()||bc(n),l.filtersNodes());return Th(e,m,n,i,new Eh(i,m,o),s)}function Ih(e,t,n,r,i,o,a){var s,u,c=t.eventCache,l=new Eh(i,t,o);if(bc(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,a),s=Kl(t,u,!0,e.filter.filtersNodes());else{var h=fc(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=Kl(t,u,c.isFullyInitialized(),c.isFiltered());else{var f=pc(n),d=c.getNode().getImmediateChild(h),p=void 0;if(bc(f))p=r;else{var m=l.getCompleteChild(h);p=null!=m?".priority"===mc(f)&&m.getChild(gc(f)).isEmpty()?m:m.updateChild(f,r):nl.EMPTY_NODE}if(d.equals(p))s=t;else s=Kl(t,e.filter.updateChild(c.getNode(),h,p,f,l,a),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function xh(e,t){return e.eventCache.isCompleteForChild(t)}function Ah(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Ph(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=bc(n)?r:new Jl(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=Ah(0,t.serverCache.getNode().getImmediateChild(n),r);c=Ch(e,c,new lc(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=Ah(0,t.serverCache.getNode().getImmediateChild(n),r);c=Ch(e,c,new lc(n),h,i,o,a,s)}})),c}var Oh,Rh=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new gl(r.getIndex()),o=(n=r).loadsAllData()?new gl(n.getIndex()):n.hasLimit()?new bl(n):new yl(n);this.processor_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return{filter:e}}(o);var a=t.serverCache,s=t.eventCache,u=i.updateFullNode(nl.EMPTY_NODE,a.getNode(),null),c=o.updateFullNode(nl.EMPTY_NODE,s.getNode(),null),l=new zl(u,a.isFullyInitialized(),i.filtersNodes()),h=new zl(c,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=Hl(h,l),this.eventGenerator_=new Vl(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();function Dh(e,t){var n=Ql(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!bc(t)&&!n.getImmediateChild(fc(t)).isEmpty())?n.getChild(t):null}function Nh(e){return 0===e.eventRegistrations_.length}function Lh(e,t,n){var r=[];if(n){bn.assert(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var o=[],a=0;a<e.eventRegistrations_.length;++a){var s=e.eventRegistrations_[a];if(s.matches(t)){if(t.hasAnyCallback()){o=o.concat(e.eventRegistrations_.slice(a+1));break}}else o.push(s)}e.eventRegistrations_=o}else e.eventRegistrations_=[];return r}function jh(e,t,n,r){t.type===Ol.MERGE&&null!==t.source.queryId&&(bn.assert(Ql(e.viewCache_),"We should always have a full cache before handling merges"),bn.assert(Yl(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,o,a=e.viewCache_,s=Mh(e.processor_,a,t,n,r);return i=e.processor_,o=s.viewCache,bn.assert(o.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),bn.assert(o.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),bn.assert(s.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Bh(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Bh(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],o=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Wl(e,i,"child_removed",t,r,n),Wl(e,i,"child_added",t,r,n),Wl(e,i,"child_moved",o,r,n),Wl(e,i,"child_changed",t,r,n),Wl(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fh,Uh=function(){this.views=new Map};function qh(e,t,n,r){var i,o,a=t.source.queryId;if(null!==a){var s=e.views.get(a);return bn.assert(null!=s,"SyncTree gave us an op for an invalid query."),jh(s,t,n,r)}var u=[];try{for(var c=$s(e.views.values()),l=c.next();!l.done;l=c.next()){s=l.value;u=u.concat(jh(s,t,n,r))}}catch(e){i={error:e}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u}function zh(e,t,n,r,i){var o=t._queryIdentifier,a=e.views.get(o);if(!a){var s=ph(n,i?r:null),u=!1;s?u=!0:r instanceof nl?(s=mh(n,r),u=!1):(s=nl.EMPTY_NODE,u=!1);var c=Hl(new zl(s,u,!1),new zl(r,i,!1));return new Rh(t,c)}return a}function Vh(e,t,n,r,i,o){var a=zh(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Jc,(function(e,t){r.push(pl(e,t))})),n.isFullyInitialized()&&r.push(dl(n.getNode())),Bh(e,r,n.getNode(),t)}(a,n)}function Wh(e,t,n,r){var i,o,a=t._queryIdentifier,s=[],u=[],c=Qh(e);if("default"===a)try{for(var l=$s(e.views.entries()),h=l.next();!h.done;h=l.next()){var f=eu(h.value,2),d=f[0],p=f[1];u=u.concat(Lh(p,n,r)),Nh(p)&&(e.views.delete(d),p.query._queryParams.loadsAllData()||s.push(p.query))}}catch(e){i={error:e}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}else(p=e.views.get(a))&&(u=u.concat(Lh(p,n,r)),Nh(p)&&(e.views.delete(a),p.query._queryParams.loadsAllData()||s.push(p.query)));return c&&!Qh(e)&&s.push(new(bn.assert(Oh,"Reference.ts has not been loaded"),Oh)(t._repo,t._path)),{removed:s,events:u}}function Hh(e){var t,n,r=[];try{for(var i=$s(e.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function Kh(e,t){var n,r,i=null;try{for(var o=$s(e.views.values()),a=o.next();!a.done;a=o.next()){var s=a.value;i=i||Dh(s,t)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Gh(e,t){if(t._queryParams.loadsAllData())return Jh(e);var n=t._queryIdentifier;return e.views.get(n)}function Yh(e,t){return null!=Gh(e,t)}function Qh(e){return null!=Jh(e)}function Jh(e){var t,n;try{for(var r=$s(e.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zh=1,Xh=function(e){this.listenProvider_=e,this.syncPointTree_=new Jl(null),this.pendingWriteTree_={visibleWrites:Zl.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function $h(e,t,n,r,i){return function(e,t,n,r,i){bn.assert(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Xl(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?uf(e,new Ul({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function ef(e,t,n,r){!function(e,t,n,r){bn.assert(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=$l(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=Jl.fromObject(n);return uf(e,new ql({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function tf(e,t,n){void 0===n&&(n=!1);var r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(ch(e.pendingWriteTree_,t)){var i=new Jl(null);return null!=r.snap?i=i.set(hc(),!0):Pu(r.children,(function(e){i=i.set(new lc(e),!0)})),uf(e,new Bl(r.path,i,n))}return[]}function nf(e,t,n){return uf(e,new Ul({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function rf(e,t,n,r){var i=t._path,o=e.syncPointTree_.get(i),a=[];if(o&&("default"===t._queryIdentifier||Yh(o,t))){var s=Wh(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return Qh(t)}));if(c&&!l){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&Qh(t))return[Jh(t)];var r=[];return t&&(r=Hh(t)),Pu(n,(function(e,t){r=r.concat(t)})),r}))}(h),d=0;d<f.length;++d){var p=f[d],m=p.query,v=hf(e,p);e.listenProvider_.startListening(gf(m),ff(e,m),v.hashFn,v.onComplete)}}if(!l&&u.length>0&&!r)if(c){e.listenProvider_.stopListening(gf(t),null)}else u.forEach((function(t){var n=e.queryToTagMap.get(df(t));e.listenProvider_.stopListening(gf(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=df(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}(e,u)}return a}function of(e,t,n){var r=t._path,i=null,o=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=wc(e,r);i=i||Kh(t,n),o=o||Qh(t)}));var a,s=e.syncPointTree_.get(r);(s?(o=o||Qh(s),i=i||Kh(s,hc())):(s=new Uh,e.syncPointTree_=e.syncPointTree_.set(r,s)),null!=i)?a=!0:(a=!1,i=nl.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=Kh(t,hc());n&&(i=i.updateImmediateChild(e,n))})));var u=Yh(s,t);if(!u&&!t._queryParams.loadsAllData()){var c=df(t);bn.assert(!e.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=Zh++;e.queryToTagMap.set(c,l),e.tagToQueryMap.set(l,c)}var h=Vh(s,t,n,uh(e.pendingWriteTree_,r),i,a);if(!u&&!o){var f=Gh(s,t);h=h.concat(function(e,t,n){var r=t._path,i=ff(e,t),o=hf(e,n),a=e.listenProvider_.startListening(gf(t),i,o.hashFn,o.onComplete),s=e.syncPointTree_.subtree(r);if(i)bn.assert(!Qh(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!bc(e)&&t&&Qh(t))return[Jh(t).query];var r=[];return t&&(r=r.concat(Hh(t).map((function(e){return e.query})))),Pu(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(gf(l),ff(e,l))}return a}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t,f))}return h}function af(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Kh(n,wc(e,t));if(r)return r}));return dh(r,t,i,n,!0)}function sf(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=wc(e,n);r=r||Kh(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||Kh(i,hc()):(i=new Uh,e.syncPointTree_=e.syncPointTree_.set(n,i));var o=null!=r,a=o?new zl(r,!0,!1):null;return function(e){return Yl(e.viewCache_)}(zh(i,t,uh(e.pendingWriteTree_,t._path),o?a.getNode():nl.EMPTY_NODE,o))}function uf(e,t){return cf(t,e.syncPointTree_,null,uh(e.pendingWriteTree_,hc()))}function cf(e,t,n,r){if(bc(e.path))return lf(e,t,n,r);var i=t.get(hc());null==n&&null!=i&&(n=Kh(i,hc()));var o=[],a=fc(e.path),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=wh(r,a);o=o.concat(cf(s,u,c,l))}return i&&(o=o.concat(qh(i,e,r,n))),o}function lf(e,t,n,r){var i=t.get(hc());null==n&&null!=i&&(n=Kh(i,hc()));var o=[];return t.children.inorderTraversal((function(t,i){var a=n?n.getImmediateChild(t):null,s=wh(r,t),u=e.operationForChild(t);u&&(o=o.concat(lf(u,i,a,s)))})),i&&(o=o.concat(qh(i,e,r,n))),o}function hf(e,t){var n=t.query,r=ff(e,n);return{hashFn:function(){return(function(e){return e.viewCache_.serverCache.getNode()}(t)||nl.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=pf(e,n);if(r){var i=mf(r),o=i.path,a=i.queryId,s=wc(o,t);return vf(e,o,new Fl(Ll(a),s))}return[]}(e,n._path,r):function(e,t){return uf(e,new Fl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return rf(e,n,null,i)}}}function ff(e,t){var n=df(t);return e.queryToTagMap.get(n)}function df(e){return e._path.toString()+"$"+e._queryIdentifier}function pf(e,t){return e.tagToQueryMap.get(t)}function mf(e){var t=e.indexOf("$");return bn.assert(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new lc(e.substr(0,t))}}function vf(e,t,n){var r=e.syncPointTree_.get(t);return bn.assert(r,"Missing sync point for query tag that we're tracking"),qh(r,n,uh(e.pendingWriteTree_,t),null)}function gf(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(bn.assert(Fh,"Reference.ts has not been loaded"),Fh)(e._repo,e._path):e}var yf=function(){function e(e){this.node_=e}return e.prototype.getImmediateChild=function(t){return new e(this.node_.getImmediateChild(t))},e.prototype.node=function(){return this.node_},e}(),bf=function(){function e(e,t){this.syncTree_=e,this.path_=t}return e.prototype.getImmediateChild=function(t){var n=yc(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return af(this.syncTree_,this.path_)},e}(),wf=function(e,t,n){return e&&"object"==typeof e?(bn.assert(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?_f(e[".sv"],t,n):"object"==typeof e[".sv"]?kf(e[".sv"],t):void bn.assert(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},_f=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:bn.assert(!1,"Unexpected server value: "+e)}},kf=function(e,t,n){e.hasOwnProperty("increment")||bn.assert(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!=typeof r&&bn.assert(!1,"Unexpected increment value: "+r);var i=t.node();if(bn.assert(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},Sf=function(e,t,n,r){return Mf(t,new bf(n,e),r)},Ef=function(e,t,n){return Mf(e,new yf(t),n)};function Mf(e,t,n){var r,i=e.getPriority().val(),o=wf(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var a=e,s=wf(a.getValue(),t,n);return s!==a.getValue()||o!==a.getPriority().val()?new Gc(s,il(o)):e}var u=e;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Gc(o))),u.forEachChild(Jc,(function(e,i){var o=Mf(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tf=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n={children:{},childCount:0}),this.name=e,this.parent=t,this.node=n};function Cf(e,t){for(var n=t instanceof lc?t:new lc(t),r=e,i=fc(n);null!==i;){var o=bn.safeGet(r.node.children,i)||{children:{},childCount:0};r=new Tf(i,r,o),i=fc(n=pc(n))}return r}function If(e){return e.node.value}function xf(e,t){e.node.value=t,Df(e)}function Af(e){return e.node.childCount>0}function Pf(e,t){Pu(e.node.children,(function(n,r){t(new Tf(n,e,r))}))}function Of(e,t,n,r){n&&!r&&t(e),Pf(e,(function(e){Of(e,t,!0,r)})),n&&r&&t(e)}function Rf(e){return new lc(null===e.parent?e.name:Rf(e.parent)+"/"+e.name)}function Df(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===If(e)&&!Af(e)}(n),i=bn.contains(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Df(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Df(e))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.parent,e.name,e)}var Nf=/[\[\].#$\/\u0000-\u001F\u007F]/,Lf=/[\[\].#$\u0000-\u001F\u007F]/,jf=10485760,Bf=function(e){return"string"==typeof e&&0!==e.length&&!Nf.test(e)},Ff=function(e){return"string"==typeof e&&0!==e.length&&!Lf.test(e)},Uf=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!Su(e)||e&&"object"==typeof e&&bn.contains(e,".sv")},qf=function(e,t,n,r){r&&void 0===t||zf(bn.errorPrefix(e,"value"),t,n)},zf=function(e,t,n){var r=n instanceof lc?new Ec(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Tc(r));if("function"==typeof t)throw new Error(e+"contains a function "+Tc(r)+" with contents = "+t.toString());if(Su(t))throw new Error(e+"contains "+t.toString()+" "+Tc(r));if("string"==typeof t&&t.length>3495253.3333333335&&bn.stringLength(t)>jf)throw new Error(e+"contains a string greater than "+"10485760 utf8 bytes "+Tc(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(Pu(t,(function(t,n){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!Bf(t)))throw new Error(e+" contains an invalid key ("+t+") "+Tc(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,s;s=t,(a=r).parts_.length>0&&(a.byteLength_+=1),a.parts_.push(s),a.byteLength_+=bn.stringLength(s),Mc(a),zf(e,n,r),function(e){var t=e.parts_.pop();e.byteLength_-=bn.stringLength(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),i&&o)throw new Error(e+' contains ".value" child '+Tc(r)+" in addition to actual children.")}},Vf=function(e,t,n,r){if(!r||void 0!==t){var i=bn.errorPrefix(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var o=[];Pu(t,(function(e,t){var r=new lc(e);if(zf(i,t,yc(n,r)),".priority"===mc(r)&&!Uf(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=vc(r=t[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Bf(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(_c);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&Sc(a,r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,o)}},Wf=function(e,t,n){if(!n||void 0!==t){if(Su(t))throw new Error(bn.errorPrefix(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Uf(t))throw new Error(bn.errorPrefix(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Hf=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(bn.errorPrefix(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Kf=function(e,t,n,r){if(!(r&&void 0===n||Bf(n)))throw new Error(bn.errorPrefix(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Gf=function(e,t,n,r){if(!(r&&void 0===n||Ff(n)))throw new Error(bn.errorPrefix(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Yf=function(e,t){if(".info"===fc(t))throw new Error(e+" failed = Can't modify data under /.info/")},Qf=function(e,t){var n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Bf(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Ff(e)}(n))throw new Error(bn.errorPrefix(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Jf=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(bn.errorPrefix(e,t)+"must be a boolean.")},Zf=function(){this.eventLists_=[],this.recursionDepth_=0};function Xf(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.getPath();null===n||kc(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function $f(e,t,n){Xf(e,n),td(e,(function(e){return kc(e,t)}))}function ed(e,t,n){Xf(e,n),td(e,(function(e){return Sc(e,t)||Sc(t,e)}))}function td(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(nd(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function nd(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();mu&&yu("event: "+n.toString()),ju(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rd="repo_interrupt",id=function(){function e(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Zf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Il(),this.transactionQueueTree_=new Tf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();function od(e,t,n){if(e.stats_=Zu(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Tl(e.repoInfo_,(function(t,n,r,i){ud(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return cd(e,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{bn.stringify(n)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}e.persistentConnection_=new Pc(e.repoInfo_,t,(function(t,n,r,i){ud(e,t,n,r,i)}),(function(t){cd(e,t)}),(function(t){!function(e,t){Pu(t,(function(t,n){ld(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}var r,i,o;e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=(r=e.repoInfo_,i=function(){return new Nl(e.stats_,e.server_)},o=r.toString(),Ju[o]||(Ju[o]=i()),Ju[o]),e.infoData_=new Cl,e.infoSyncTree_=new Xh({startListening:function(t,n,r,i){var o=[],a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=nf(e.infoSyncTree_,t._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),ld(e,"connected",!1),e.serverSyncTree_=new Xh({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var o=i(n,r);ed(e.eventQueue_,t._path,o)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function ad(e){var t=e.infoData_.getNode(new lc(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function sd(e){return(t=(t={timestamp:ad(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function ud(e,t,n,r,i){e.dataUpdateCount++;var o=new lc(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var a=[];if(i)if(r){var s=bn.map(n,(function(e){return il(e)}));a=function(e,t,n,r){var i=pf(e,r);if(i){var o=mf(i),a=o.path,s=o.queryId,u=wc(a,t),c=Jl.fromObject(n);return vf(e,a,new ql(Ll(s),u,c))}return[]}(e.serverSyncTree_,o,s,i)}else{var u=il(n);a=function(e,t,n,r){var i=pf(e,r);if(null!=i){var o=mf(i),a=o.path,s=o.queryId,u=wc(a,t);return vf(e,a,new Ul(Ll(s),u,n))}return[]}(e.serverSyncTree_,o,u,i)}else if(r){var c=bn.map(n,(function(e){return il(e)}));a=function(e,t,n){var r=Jl.fromObject(n);return uf(e,new ql({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,c)}else{var l=il(n);a=nf(e.serverSyncTree_,o,l)}var h=o;a.length>0&&(h=_d(e,o)),ed(e.eventQueue_,h,a)}function cd(e,t){ld(e,"connected",t),!1===t&&function(e){gd(e,"onDisconnectEvents");var t=sd(e),n=Il();Pl(e.onDisconnect_,hc(),(function(r,i){var o=Sf(r,i,e.serverSyncTree_,t);xl(n,r,o)}));var r=[];Pl(n,hc(),(function(t,n){r=r.concat(nf(e.serverSyncTree_,t,n));var i=Td(e,t);_d(e,i)})),e.onDisconnect_=Il(),ed(e.eventQueue_,hc(),r)}(e)}function ld(e,t,n){var r=new lc("/.info/"+t),i=il(n);e.infoData_.updateSnapshot(r,i);var o=nf(e.infoSyncTree_,r,i);ed(e.eventQueue_,r,o)}function hd(e){return e.nextWriteId_++}function fd(e,t,n,r,i){gd(e,"set",{path:t.toString(),value:n,priority:r});var o=sd(e),a=il(n,r),s=af(e.serverSyncTree_,t),u=Ef(a,s,o),c=hd(e),l=$h(e.serverSyncTree_,t,u,c,!0);Xf(e.eventQueue_,l),e.server_.put(t.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||ku("set at "+t+" failed: "+n);var a=tf(e.serverSyncTree_,c,!o);ed(e.eventQueue_,t,a),yd(e,i,n,r)}));var h=Td(e,t);_d(e,h),ed(e.eventQueue_,h,[])}function dd(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&Al(e.onDisconnect_,t),yd(e,n,r,i)}))}function pd(e,t,n,r){var i=il(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,o){"ok"===n&&xl(e.onDisconnect_,t,i),yd(e,r,n,o)}))}function md(e,t,n){var r;r=".info"===fc(t._path)?rf(e.infoSyncTree_,t,n):rf(e.serverSyncTree_,t,n),$f(e.eventQueue_,t._path,r)}function vd(e){e.persistentConnection_&&e.persistentConnection_.interrupt(rd)}function gd(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),yu.apply(void 0,tu([r],eu(t)))}function yd(e,t,n,r){t&&ju((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var o=new Error(i);o.code=e,t(o)}}))}function bd(e,t,n){return af(e.serverSyncTree_,t,n)||nl.EMPTY_NODE}function wd(e,t){if(void 0===t&&(t=e.transactionQueueTree_),t||Md(e,t),If(t)){var n=Sd(e,t);bn.assert(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=bd(e,t,r),o=i,a=i.hash(),s=0;s<n.length;s++){var u=n[s];bn.assert(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=wc(t,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){gd(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(t){n[t].status=2,i=i.concat(tf(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&o.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)a(s);Md(e,Cf(e.transactionQueueTree_,t)),wd(e,e.transactionQueueTree_),ed(e.eventQueue_,t,i);for(s=0;s<o.length;s++)ju(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else{ku("transaction at "+h.toString()+" failed: "+r);for(s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r}_d(e,t)}}),a)}(e,Rf(t),n)}else Af(t)&&Pf(t,(function(t){wd(e,t)}))}function _d(e,t){var n=kd(e,t),r=Rf(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],o=t.filter((function(e){return 0===e.status})).map((function(e){return e.currentWriteId})),a=function(a){var s,u,c=t[a],l=wc(n,c.path),h=!1;if(bn.assert(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,s=c.abortReason,i=i.concat(tf(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,s="maxretry",i=i.concat(tf(e.serverSyncTree_,c.currentWriteId,!0));else{var f=bd(e,c.path,o);c.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){zf("transaction failed: Data returned ",d,c.path);var p=il(d);"object"==typeof d&&null!=d&&bn.contains(d,".priority")||(p=p.updatePriority(f.getPriority()));var m=c.currentWriteId,v=sd(e),g=Ef(p,f,v);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=g,c.currentWriteId=hd(e),o.splice(o.indexOf(m),1),i=(i=i.concat($h(e.serverSyncTree_,c.path,g,c.currentWriteId,c.applyLocally))).concat(tf(e.serverSyncTree_,m,!0))}else h=!0,s="nodata",i=i.concat(tf(e.serverSyncTree_,c.currentWriteId,!0))}ed(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===s?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(s),!1,null)}))))},s=0;s<t.length;s++)a(s);Md(e,e.transactionQueueTree_);for(s=0;s<r.length;s++)ju(r[s]);wd(e,e.transactionQueueTree_)}(e,Sd(e,n),r),r}function kd(e,t){var n,r=e.transactionQueueTree_;for(n=fc(t);null!==n&&void 0===If(r);)r=Cf(r,n),n=fc(t=pc(t));return r}function Sd(e,t){var n=[];return Ed(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Ed(e,t,n){var r=If(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Pf(t,(function(t){Ed(e,t,n)}))}function Md(e,t){var n=If(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,xf(t,n.length>0?n:void 0)}Pf(t,(function(t){Md(e,t)}))}function Td(e,t){var n=Rf(kd(e,t)),r=Cf(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Cd(e,t)})),Cd(e,r),Of(r,(function(t){Cd(e,t)})),n}function Cd(e,t){var n=If(t);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(bn.assert(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):(bn.assert(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(tf(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));-1===o?xf(t,void 0):n.length=o+1,ed(e.eventQueue_,Rf(t),i);for(a=0;a<r.length;a++)ju(r[a])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Id=function(e,t){var n=xd(e),r=n.namespace;"firebase.com"===n.domain&&_u(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||_u("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ku("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Ku(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new lc(n.pathString)}},xd=function(e){var t="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"==typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=$s(e.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):ku("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(a="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},Ad=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+bn.stringify(this.snapshot.exportVal())},e}(),Pd=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),Od=function(){function e(e,t){this.snapshotCallback=e,this.cancelCallback=t}return e.prototype.onValue=function(e,t){this.snapshotCallback.call(null,e,t)},e.prototype.onCancel=function(e){return bn.assert(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)},Object.defineProperty(e.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),e.prototype.matches=function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context},e}(),Rd=function(){function e(e,t){this._repo=e,this._path=t}return e.prototype.cancel=function(){var e=new bn.Deferred;return dd(this._repo,this._path,e.wrapCallback((function(){}))),e.promise},e.prototype.remove=function(){Yf("OnDisconnect.remove",this._path);var e=new bn.Deferred;return pd(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise},e.prototype.set=function(e){Yf("OnDisconnect.set",this._path),qf("OnDisconnect.set",e,this._path,!1);var t=new bn.Deferred;return pd(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise},e.prototype.setWithPriority=function(e,t){Yf("OnDisconnect.setWithPriority",this._path),qf("OnDisconnect.setWithPriority",e,this._path,!1),Wf("OnDisconnect.setWithPriority",t,!1);var n=new bn.Deferred;return function(e,t,n,r,i){var o=il(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),(function(n,r){"ok"===n&&xl(e.onDisconnect_,t,o),yd(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise},e.prototype.update=function(e){Yf("OnDisconnect.update",this._path),Vf("OnDisconnect.update",e,this._path,!1);var t=new bn.Deferred;return function(e,t,n,r){if(bn.isEmpty(n))return yu("onDisconnect().update() called with empty data.  Don't do anything."),void yd(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,o){"ok"===i&&Pu(n,(function(n,r){var i=il(r);xl(e.onDisconnect_,yc(t,n),i)})),yd(0,r,i,o)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise},e}(),Dd=function(){function e(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(e.prototype,"key",{get:function(){return bc(this._path)?null:mc(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Bd(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryIdentifier",{get:function(){var e=Ml(this._queryParams),t=xu(e);return"{}"===t?"default":t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryObject",{get:function(){return Ml(this._queryParams)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!((t=bn.getModularInstance(t))instanceof e))return!1;var n=this._repo===t._repo,r=kc(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i},e.prototype.toJSON=function(){return this.toString()},e.prototype.toString=function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)},e}();function Nd(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Ld(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Nc){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Eu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Mu)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===Jc){if(null!=t&&!Uf(t)||null!=n&&!Uf(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(bn.assert(e.getIndex()instanceof sl||e.getIndex()===ul,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function jd(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Bd=function(e){function t(t,n){return e.call(this,t,n,new wl,!1)||this}return Qs(t,e),Object.defineProperty(t.prototype,"parent",{get:function(){var e=gc(this._path);return null===e?null:new t(this._repo,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e},enumerable:!1,configurable:!0}),t}(Dd),Fd=function(){function e(e,t,n){this._node=e,this.ref=t,this._index=n}return Object.defineProperty(e.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),e.prototype.child=function(t){var n=new lc(t),r=zd(this.ref,t);return new e(this._node.getChild(n),r,Jc)},e.prototype.exists=function(){return!this._node.isEmpty()},e.prototype.exportVal=function(){return this._node.val(!0)},e.prototype.forEach=function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,zd(n.ref,r),Jc))}))},e.prototype.hasChild=function(e){var t=new lc(e);return!this._node.getChild(t).isEmpty()},e.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},e.prototype.toJSON=function(){return this.exportVal()},e.prototype.val=function(){return this._node.val()},e}();function Ud(e,t){return(e=bn.getModularInstance(e))._checkNotDeleted("ref"),void 0!==t?zd(e._root,t):e._root}function qd(e,t){(e=bn.getModularInstance(e))._checkNotDeleted("refFromURL");var n=Id(t,e._repo.repoInfo_.nodeAdmin);Qf("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||_u("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Ud(e,n.path.toString())}function zd(e,t){var n,r,i,o;return null===fc((e=bn.getModularInstance(e))._path)?(n="child",r="path",o=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Gf(n,r,i,o)):Gf("child","path",t,!1),new Bd(e._repo,yc(e._path,t))}function Vd(e,t){e=bn.getModularInstance(e),Yf("push",e._path),qf("push",t,e._path,!0);var n,r=ad(e._repo),i=ll(r),o=zd(e,i),a=zd(e,i);return n=null!=t?Hd(a,t).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),o}function Wd(e){return Yf("remove",e._path),Hd(e,null)}function Hd(e,t){e=bn.getModularInstance(e),Yf("set",e._path),qf("set",t,e._path,!1);var n=new bn.Deferred;return fd(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function Kd(e,t){e=bn.getModularInstance(e),Yf("setPriority",e._path),Wf("setPriority",t,!1);var n=new bn.Deferred;return fd(e._repo,yc(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function Gd(e,t,n){if(Yf("setWithPriority",e._path),qf("setWithPriority",t,e._path,!1),Wf("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new bn.Deferred;return fd(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function Yd(e,t){Vf("update",t,e._path,!1);var n=new bn.Deferred;return function(e,t,n,r){gd(e,"update",{path:t.toString(),value:n});var i=!0,o=sd(e),a={};if(Pu(n,(function(n,r){i=!1,a[n]=Sf(yc(t,n),il(r),e.serverSyncTree_,o)})),i)yu("update() called with empty data.  Don't do anything."),yd(0,r,"ok",void 0);else{var s=hd(e),u=ef(e.serverSyncTree_,t,a,s);Xf(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var o="ok"===n;o||ku("update at "+t+" failed: "+n);var a=tf(e.serverSyncTree_,s,!o),u=a.length>0?_d(e,t):t;ed(e.eventQueue_,u,a),yd(0,r,n,i)})),Pu(n,(function(n){var r=Td(e,yc(t,n));_d(e,r)})),ed(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function Qd(e){return function(e,t){var n=sf(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=il(n).withIndex(t._queryParams.getIndex()),i=nf(e.serverSyncTree_,t._path,r);return $f(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return gd(e,"get for query "+bn.stringify(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=bn.getModularInstance(e))._repo,e).then((function(t){return new Fd(t,new Bd(e._repo,e._path),e._queryParams.getIndex())}))}var Jd=function(){function e(e){this.callbackContext=e}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t._queryParams.getIndex();return new Ad("value",this,new Fd(e.snapshotNode,new Bd(t._repo,t._path),n))},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new Pd(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))},e.prototype.hasAnyCallback=function(){return null!==this.callbackContext},e}(),Zd=function(){function e(e,t){this.eventType=e,this.callbackContext=t}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new Pd(this,e,t):null},e.prototype.createEvent=function(e,t){bn.assert(null!=e.childName,"Child events should have a childName.");var n=zd(new Bd(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Ad(e.type,this,new Fd(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}},e.prototype.matches=function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))},e.prototype.hasAnyCallback=function(){return!!this.callbackContext},e}();function Xd(e,t,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(t,n){md(e._repo,e,c),a(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new Od(n,o||void 0),c="value"===t?new Jd(u):new Zd(t,u);return function(e,t,n){var r;r=".info"===fc(t._path)?of(e.infoSyncTree_,t,n):of(e.serverSyncTree_,t,n),$f(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return md(e._repo,e,c)}}function $d(e,t,n,r){return Xd(e,"value",t,n,r)}function ep(e,t,n,r){return Xd(e,"child_added",t,n,r)}function tp(e,t,n,r){return Xd(e,"child_changed",t,n,r)}function np(e,t,n,r){return Xd(e,"child_moved",t,n,r)}function rp(e,t,n,r){return Xd(e,"child_removed",t,n,r)}function ip(e,t,n){var r=null,i=n?new Od(n):null;"value"===t?r=new Jd(i):t&&(r=new Zd(t,i)),md(e._repo,e,r)}var op=function(){},ap=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return Qs(t,e),t.prototype._apply=function(e){qf("endAt",this._value,e._path,!0);var t=kl(e._queryParams,this._value,this._key);if(jd(t),Ld(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Dd(e._repo,e._path,t,e._orderByCalled)},t}(op);function sp(e,t){return Kf("endAt","key",t,!0),new ap(e,t)}var up=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return Qs(t,e),t.prototype._apply=function(e){qf("endBefore",this._value,e._path,!1);var t,n,r,i,o=(t=e._queryParams,n=this._value,r=this._key,t.index_===Nc?("string"==typeof n&&(n=fl(n)),i=kl(t,n,r)):i=kl(t,n,null==r?Eu:fl(r)),i.endBeforeSet_=!0,i);if(jd(o),Ld(o),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Dd(e._repo,e._path,o,e._orderByCalled)},t}(op);function cp(e,t){return Kf("endBefore","key",t,!0),new up(e,t)}var lp=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return Qs(t,e),t.prototype._apply=function(e){qf("startAt",this._value,e._path,!0);var t=_l(e._queryParams,this._value,this._key);if(jd(t),Ld(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Dd(e._repo,e._path,t,e._orderByCalled)},t}(op);function hp(e,t){return void 0===e&&(e=null),Kf("startAt","key",t,!0),new lp(e,t)}var fp=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return Qs(t,e),t.prototype._apply=function(e){qf("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;e.index_===Nc?("string"==typeof t&&(t=hl(t)),r=_l(e,t,n)):r=_l(e,t,null==n?Mu:hl(n));return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(jd(t),Ld(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Dd(e._repo,e._path,t,e._orderByCalled)},t}(op);function dp(e,t){return Kf("startAfter","key",t,!0),new fp(e,t)}var pp=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return Qs(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Dd(e._repo,e._path,(t=e._queryParams,n=this._limit,(r=t.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="l",r),e._orderByCalled);var t,n,r},t}(op);function mp(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new pp(e)}var vp=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return Qs(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Dd(e._repo,e._path,(t=e._queryParams,n=this._limit,(r=t.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="r",r),e._orderByCalled);var t,n,r},t}(op);function gp(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new vp(e)}var yp=function(e){function t(t){var n=e.call(this)||this;return n._path=t,n}return Qs(t,e),t.prototype._apply=function(e){Nd(e,"orderByChild");var t=new lc(this._path);if(bc(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new sl(t),r=Sl(e._queryParams,n);return Ld(r),new Dd(e._repo,e._path,r,!0)},t}(op);function bp(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Gf("orderByChild","path",e,!1),new yp(e)}var wp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qs(t,e),t.prototype._apply=function(e){Nd(e,"orderByKey");var t=Sl(e._queryParams,Nc);return Ld(t),new Dd(e._repo,e._path,t,!0)},t}(op);function _p(){return new wp}var kp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qs(t,e),t.prototype._apply=function(e){Nd(e,"orderByPriority");var t=Sl(e._queryParams,Jc);return Ld(t),new Dd(e._repo,e._path,t,!0)},t}(op);function Sp(){return new kp}var Ep=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Qs(t,e),t.prototype._apply=function(e){Nd(e,"orderByValue");var t=Sl(e._queryParams,ul);return Ld(t),new Dd(e._repo,e._path,t,!0)},t}(op);function Mp(){return new Ep}var Tp=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return Qs(t,e),t.prototype._apply=function(e){if(qf("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ap(this._value,this._key)._apply(new lp(this._value,this._key)._apply(e))},t}(op);function Cp(e,t){return Kf("equalTo","key",t,!0),new Tp(e,t)}function Ip(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=bn.getModularInstance(e);try{for(var a=$s(r),s=a.next();!s.done;s=a.next()){var u=s.value;o=u._apply(o)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o}!function(e){bn.assert(!Oh,"__referenceConstructor has already been defined"),Oh=e}(Bd),function(e){bn.assert(!Fh,"__referenceConstructor has already been defined"),Fh=e}(Bd);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xp={},Ap=!1;function Pp(e,t,n,r,i){var o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||_u("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),yu("Using default host for project ",e.options.projectId),o=e.options.projectId+"-default-rtdb.firebaseio.com");var a,s=Id(o,i),u=s.repoInfo,c=void 0;void 0!==nu&&(c=nu.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(a=!0,o="http://"+c+"?ns="+u.namespace,u=(s=Id(o,i)).repoInfo):a=!s.repoInfo.secure;var l=i&&a?new qu(qu.OWNER):new Uu(e.name,e.options,t);Qf("Invalid Firebase Database URL",s),bc(s.path)||_u("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=xp[t.name];i||(i={},xp[t.name]=i);var o=i[e.toURLString()];o&&_u("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new id(e,Ap,n,r),i[e.toURLString()]=o,o}(u,e,l,new Fu(e.name,n));return new Op(h,e)}var Op=function(){function e(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}return Object.defineProperty(e.prototype,"_repo",{get:function(){return this._instanceStarted||(od(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Bd(this._repo,hc())),this._rootInternal},enumerable:!1,configurable:!0}),e.prototype._delete=function(){var e,t,n;return null!==this._rootInternal&&(e=this._repo,t=this.app.name,(n=xp[t])&&n[e.key]===e||_u("Database "+t+"("+e.repoInfo_+") has already been deleted."),vd(e),delete n[e.key],this._repoInternal=null,this._rootInternal=null),Promise.resolve()},e.prototype._checkNotDeleted=function(e){null===this._rootInternal&&_u("Cannot call "+e+" on a deleted database.")},e}();function Rp(e,t,n,r){void 0===r&&(r={}),(e=bn.getModularInstance(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&_u("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,o=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&_u('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new qu(qu.OWNER);else if(r.mockUserToken){var a="string"==typeof r.mockUserToken?r.mockUserToken:bn.createMockUserToken(r.mockUserToken,e.app.options.projectId);o=new qu(a)}!function(e,t,n,r){e.repoInfo_=new Ku(t+":"+n,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}(i,t,n,o)}function Dp(e){(e=bn.getModularInstance(e))._checkNotDeleted("goOffline"),vd(e._repo)}function Np(e){var t;(e=bn.getModularInstance(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(rd)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lp={".sv":"timestamp"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var jp=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();function Bp(e,t,n){var r;if(e=bn.getModularInstance(e),Yf("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,o=new bn.Deferred,a=$d(e,(function(){}));return function(e,t,n,r,i,o){gd(e,"transaction on "+t);var a={path:t,update:n,onComplete:r,status:null,order:fu(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=bd(e,t,void 0);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{zf("transaction failed: Data returned ",u,a.path),a.status=0;var c=Cf(e.transactionQueueTree_,t),l=If(c)||[];l.push(a),xf(c,l);var h=void 0;"object"==typeof u&&null!==u&&bn.contains(u,".priority")?(h=bn.safeGet(u,".priority"),bn.assert(Uf(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(af(e.serverSyncTree_,t)||nl.EMPTY_NODE).getPriority().val();var f=sd(e),d=il(u,h),p=Ef(d,s,f);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=p,a.currentWriteId=hd(e);var m=$h(e.serverSyncTree_,t,p,a.currentWriteId,a.applyLocally);ed(e.eventQueue_,t,m),wd(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?o.reject(t):(i=new Fd(r,new Bd(e._repo,e._path),Jc),o.resolve(new jp(n,i)))}),a,i),o.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fp=function(){function e(e){this._delegate=e}return e.prototype.cancel=function(e){bn.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),bn.validateCallback("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},e.prototype.remove=function(e){bn.validateArgCount("OnDisconnect.remove",0,1,arguments.length),bn.validateCallback("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},e.prototype.set=function(e,t){bn.validateArgCount("OnDisconnect.set",1,2,arguments.length),bn.validateCallback("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},e.prototype.setWithPriority=function(e,t,n){bn.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),bn.validateCallback("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r},e.prototype.update=function(e,t){if(bn.validateArgCount("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,ku("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}bn.validateCallback("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i},e}(),Up=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return bn.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),qp=function(){function e(e,t){this._database=e,this._delegate=t}return e.prototype.val=function(){return bn.validateArgCount("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},e.prototype.exportVal=function(){return bn.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},e.prototype.toJSON=function(){return bn.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.exists=function(){return bn.validateArgCount("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},e.prototype.child=function(t){return bn.validateArgCount("DataSnapshot.child",0,1,arguments.length),t=String(t),Gf("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))},e.prototype.hasChild=function(e){return bn.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),Gf("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)},e.prototype.getPriority=function(){return bn.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},e.prototype.forEach=function(t){var n=this;return bn.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),bn.validateCallback("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))},e.prototype.hasChildren=function(){return bn.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(e.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return bn.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},e.prototype.getRef=function(){return bn.validateArgCount("DataSnapshot.ref",0,0,arguments.length),new Vp(this._database,this._delegate.ref)},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),zp=function(){function e(e,t){this.database=e,this._delegate=t}return e.prototype.on=function(t,n,r,i){var o,a=this;bn.validateArgCount("Query.on",2,4,arguments.length),bn.validateCallback("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new qp(a.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(t){case"value":return $d(this._delegate,u,c),n;case"child_added":return ep(this._delegate,u,c),n;case"child_removed":return rp(this._delegate,u,c),n;case"child_changed":return tp(this._delegate,u,c),n;case"child_moved":return np(this._delegate,u,c),n;default:throw new Error(bn.errorPrefix("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},e.prototype.off=function(e,t,n){if(bn.validateArgCount("Query.off",0,3,arguments.length),Hf("Query.off",e,!0),bn.validateCallback("Query.off","callback",t,!0),bn.validateContextObject("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,ip(this._delegate,e,r)}else ip(this._delegate,e)},e.prototype.get=function(){var e=this;return Qd(this._delegate).then((function(t){return new qp(e.database,t)}))},e.prototype.once=function(t,n,r,i){var o=this;bn.validateArgCount("Query.once",1,4,arguments.length),bn.validateCallback("Query.once","callback",n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,i),s=new bn.Deferred,u=function(e,t){var r=new qp(o.database,e);n&&n.call(a.context,r,t),s.resolve(r)};u.userCallback=n,u.context=a.context;var c=function(e){a.cancel&&a.cancel.call(a.context,e),s.reject(e)};switch(t){case"value":$d(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":ep(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":rp(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":tp(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":np(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(bn.errorPrefix("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise},e.prototype.limitToFirst=function(t){return bn.validateArgCount("Query.limitToFirst",1,1,arguments.length),new e(this.database,Ip(this._delegate,mp(t)))},e.prototype.limitToLast=function(t){return bn.validateArgCount("Query.limitToLast",1,1,arguments.length),new e(this.database,Ip(this._delegate,gp(t)))},e.prototype.orderByChild=function(t){return bn.validateArgCount("Query.orderByChild",1,1,arguments.length),new e(this.database,Ip(this._delegate,bp(t)))},e.prototype.orderByKey=function(){return bn.validateArgCount("Query.orderByKey",0,0,arguments.length),new e(this.database,Ip(this._delegate,_p()))},e.prototype.orderByPriority=function(){return bn.validateArgCount("Query.orderByPriority",0,0,arguments.length),new e(this.database,Ip(this._delegate,Sp()))},e.prototype.orderByValue=function(){return bn.validateArgCount("Query.orderByValue",0,0,arguments.length),new e(this.database,Ip(this._delegate,Mp()))},e.prototype.startAt=function(t,n){return void 0===t&&(t=null),bn.validateArgCount("Query.startAt",0,2,arguments.length),new e(this.database,Ip(this._delegate,hp(t,n)))},e.prototype.startAfter=function(t,n){return void 0===t&&(t=null),bn.validateArgCount("Query.startAfter",0,2,arguments.length),new e(this.database,Ip(this._delegate,dp(t,n)))},e.prototype.endAt=function(t,n){return void 0===t&&(t=null),bn.validateArgCount("Query.endAt",0,2,arguments.length),new e(this.database,Ip(this._delegate,sp(t,n)))},e.prototype.endBefore=function(t,n){return void 0===t&&(t=null),bn.validateArgCount("Query.endBefore",0,2,arguments.length),new e(this.database,Ip(this._delegate,cp(t,n)))},e.prototype.equalTo=function(t,n){return bn.validateArgCount("Query.equalTo",1,2,arguments.length),new e(this.database,Ip(this._delegate,Cp(t,n)))},e.prototype.toString=function(){return bn.validateArgCount("Query.toString",0,0,arguments.length),this._delegate.toString()},e.prototype.toJSON=function(){return bn.validateArgCount("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.isEqual=function(t){if(bn.validateArgCount("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,bn.validateCallback(e,"cancel",r.cancel,!0),r.context=n,bn.validateContextObject(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(bn.errorPrefix(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return new Vp(this.database,new Bd(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),e}(),Vp=function(e){function t(t,n){var r=e.call(this,t,new Dd(n._repo,n._path,new wl,!1))||this;return r.database=t,r._delegate=n,r}return Qs(t,e),t.prototype.getKey=function(){return bn.validateArgCount("Reference.key",0,0,arguments.length),this._delegate.key},t.prototype.child=function(e){return bn.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new t(this.database,zd(this._delegate,e))},t.prototype.getParent=function(){bn.validateArgCount("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new t(this.database,e):null},t.prototype.getRoot=function(){return bn.validateArgCount("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)},t.prototype.set=function(e,t){bn.validateArgCount("Reference.set",1,2,arguments.length),bn.validateCallback("Reference.set","onComplete",t,!0);var n=Hd(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},t.prototype.update=function(e,t){if(bn.validateArgCount("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,ku("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Yf("Reference.update",this._delegate._path),bn.validateCallback("Reference.update","onComplete",t,!0);var i=Yd(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i},t.prototype.setWithPriority=function(e,t,n){bn.validateArgCount("Reference.setWithPriority",2,3,arguments.length),bn.validateCallback("Reference.setWithPriority","onComplete",n,!0);var r=Gd(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r},t.prototype.remove=function(e){bn.validateArgCount("Reference.remove",0,1,arguments.length),bn.validateCallback("Reference.remove","onComplete",e,!0);var t=Wd(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},t.prototype.transaction=function(e,t,n){var r=this;bn.validateArgCount("Reference.transaction",1,3,arguments.length),bn.validateCallback("Reference.transaction","transactionUpdate",e,!1),bn.validateCallback("Reference.transaction","onComplete",t,!0),Jf("Reference.transaction","applyLocally",n,!0);var i=Bp(this._delegate,e,{applyLocally:n}).then((function(e){return new Up(e.committed,new qp(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i},t.prototype.setPriority=function(e,t){bn.validateArgCount("Reference.setPriority",1,2,arguments.length),bn.validateCallback("Reference.setPriority","onComplete",t,!0);var n=Kd(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},t.prototype.push=function(e,n){var r=this;bn.validateArgCount("Reference.push",0,2,arguments.length),bn.validateCallback("Reference.push","onComplete",n,!0);var i=Vd(this._delegate,e),o=i.then((function(e){return new t(r.database,e)}));n&&o.then((function(){return n(null)}),(function(e){return n(e)}));var a=new t(this.database,i);return a.then=o.then.bind(o),a.catch=o.catch.bind(o,void 0),a},t.prototype.onDisconnect=function(){return Yf("Reference.onDisconnect",this._delegate._path),new Fp(new Rd(this._delegate._repo,this._delegate._path))},Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(zp),Wp=function(){function e(e,t){var n=this;this._delegate=e,this.app=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),Rp(this._delegate,e,t,n)},e.prototype.ref=function(e){if(bn.validateArgCount("database.ref",0,1,arguments.length),e instanceof Vp){var t=qd(this._delegate,e.toString());return new Vp(this,t)}t=Ud(this._delegate,e);return new Vp(this,t)},e.prototype.refFromURL=function(e){var t="database.refFromURL";bn.validateArgCount(t,1,1,arguments.length);var n=qd(this._delegate,e);return new Vp(this,n)},e.prototype.goOffline=function(){return bn.validateArgCount("database.goOffline",0,0,arguments.length),Dp(this._delegate)},e.prototype.goOnline=function(){return bn.validateArgCount("database.goOnline",0,0,arguments.length),Np(this._delegate)},e.ServerValue={TIMESTAMP:Lp,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hp=Object.freeze({__proto__:null,forceLongPolling:function(){ic.forceDisallow(),tc.forceAllow()},forceWebSockets:function(){tc.forceDisallow()},isWebSocketsAvailable:function(){return ic.isAvailable()},setSecurityDebugCallback:function(e,t){e._delegate._repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){!function(e,t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var n;t?(e.statsListener_||(e.statsListener_=new Dl(e.stats_)),n=e.statsListener_.get()):n=e.stats_.get();var r=Object.keys(n).reduce((function(e,t){return Math.max(t.length,e)}),0);Pu(n,(function(e,t){for(var n=e,i=e.length;i<r+2;i++)n+=" ";console.log(n+t)}))}}(e._delegate._repo,t)},statsIncrementCounter:function(e,t){!function(e,t){var n,r;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */e.stats_.incrementCounter(t),n=e.statsReporter_,r=t,n.statsToReport_[r]=!0}(e._delegate._repo,t)},dataUpdateCount:function(e){return e._delegate._repo.dataUpdateCount},interceptServerData:function(e,t){return function(e,t){e.interceptServerDataCallback_=t}(e._delegate._repo,t)},initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,o=e.namespace,a=e.nodeAdmin,s=void 0!==a&&a;iu(r);var u=new Cn("auth-internal",new xn("database-standalone"));return u.setComponent(new Mn("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Wp(Pp(t,u,void 0,n,s),t),namespace:o}}}),Kp=Pc;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pc.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Pc.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var Gp=ac,Yp=Ku,Qp=Object.freeze({__proto__:null,DataConnection:Kp,RealTimeConnection:Gp,hijackHash:function(e){var t=Pc.prototype.put;return Pc.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){Pc.prototype.put=t}},ConnectionTarget:Yp,queryIdentifier:function(e){return e._delegate._queryIdentifier},forceRestClient:function(e){!function(e){Ap=e}(e)}}),Jp=Wp.ServerValue;!function(e){iu(e.SDK_VERSION);var t=e.INTERNAL.registerComponent(new Mn("database",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new Wp(Pp(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:Vp,Query:zp,Database:Wp,DataSnapshot:qp,enableLogging:gu,INTERNAL:Hp,ServerValue:Jp,TEST_ACCESS:Qp}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.11.0"),bn.isNodeSdk()&&t}(er);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Zp=function(e,t){return(Zp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Xp(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Zp(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function $p(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function em(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}Object.create;function tm(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;bn=o("1xTls");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nm=function(e,t){return(nm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function rm(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var im,om="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},am=am||{},sm=om||self;function um(){}function cm(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function lm(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var hm="closure_uid_"+(1e9*Math.random()>>>0),fm=0;function dm(e,t,n){return e.call.apply(e.bind,arguments)}function pm(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function mm(e,t,n){return(mm=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dm:pm).apply(null,arguments)}function vm(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function gm(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function ym(){this.s=this.s,this.o=this.o}var bm={};ym.prototype.s=!1,ym.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,hm)&&e[hm]||(e[hm]=++fm)}(this);delete bm[e]}},ym.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var wm=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},_m=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function km(e){return Array.prototype.concat.apply([],arguments)}function Sm(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Em(e){return/^[\s\xa0]*$/.test(e)}var Mm,Tm=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Cm(e,t){return-1!=e.indexOf(t)}function Im(e,t){return e<t?-1:e>t?1:0}e:{var xm=sm.navigator;if(xm){var Am=xm.userAgent;if(Am){Mm=Am;break e}}Mm=""}function Pm(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Om(e){var t={};for(var n in e)t[n]=e[n];return t}var Rm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Dm(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<Rm.length;o++)n=Rm[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Nm(e){return Nm[" "](e),e}Nm[" "]=um;var Lm,jm=Cm(Mm,"Opera"),Bm=Cm(Mm,"Trident")||Cm(Mm,"MSIE"),Fm=Cm(Mm,"Edge"),Um=Fm||Bm,qm=Cm(Mm,"Gecko")&&!(Cm(Mm.toLowerCase(),"webkit")&&!Cm(Mm,"Edge"))&&!(Cm(Mm,"Trident")||Cm(Mm,"MSIE"))&&!Cm(Mm,"Edge"),zm=Cm(Mm.toLowerCase(),"webkit")&&!Cm(Mm,"Edge");function Vm(){var e=sm.document;return e?e.documentMode:void 0}e:{var Wm="",Hm=function(){var e=Mm;return qm?/rv:([^\);]+)(\)|;)/.exec(e):Fm?/Edge\/([\d\.]+)/.exec(e):Bm?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):zm?/WebKit\/(\S+)/.exec(e):jm?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Hm&&(Wm=Hm?Hm[1]:""),Bm){var Km=Vm();if(null!=Km&&Km>parseFloat(Wm)){Lm=String(Km);break e}}Lm=Wm}var Gm,Ym={};function Qm(){return function(e){var t=Ym;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Tm(String(Lm)).split("."),n=Tm("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=Im(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||Im(0==o[2].length,0==a[2].length)||Im(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}))}if(sm.document&&Bm){var Jm=Vm();Gm=Jm||(parseInt(Lm,10)||void 0)}else Gm=void 0;var Zm=Gm,Xm=function(){if(!sm.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{sm.addEventListener("test",um,t),sm.removeEventListener("test",um,t)}catch(e){}return e}();function $m(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function ev(e,t){if($m.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(qm){e:{try{Nm(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:tv[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ev.Z.h.call(this)}}$m.prototype.h=function(){this.defaultPrevented=!0},gm(ev,$m);var tv={2:"touch",3:"pen",4:"mouse"};ev.prototype.h=function(){ev.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var nv="closure_listenable_"+(1e6*Math.random()|0),rv=0;function iv(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++rv,this.ca=this.fa=!1}function ov(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function av(e){this.src=e,this.g={},this.h=0}function sv(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=wm(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ov(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function uv(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}av.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=uv(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new iv(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var cv="closure_lm_"+(1e6*Math.random()|0),lv={};function hv(e,t,n,r,i){if(r&&r.once)return dv(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)hv(e,t[o],n,r,i);return null}return n=wv(n),e&&e[nv]?e.N(t,n,lm(r)?!!r.capture:!!r,i):fv(e,t,n,!1,r,i)}function fv(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=lm(i)?!!i.capture:!!i,s=yv(e);if(s||(e[cv]=s=new av(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=gv;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Xm||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(vv(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function dv(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)dv(e,t[o],n,r,i);return null}return n=wv(n),e&&e[nv]?e.O(t,n,lm(r)?!!r.capture:!!r,i):fv(e,t,n,!0,r,i)}function pv(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)pv(e,t[o],n,r,i);else r=lm(r)?!!r.capture:!!r,n=wv(n),e&&e[nv]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=uv(o=e.g[t],n,r,i))&&(ov(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=yv(e))&&(t=e.g[t.toString()],e=-1,t&&(e=uv(t,n,r,i)),(n=-1<e?t[e]:null)&&mv(n))}function mv(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[nv])sv(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(vv(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=yv(t))?(sv(n,e),0==n.h&&(n.src=null,t[cv]=null)):ov(e)}}}function vv(e){return e in lv?lv[e]:lv[e]="on"+e}function gv(e,t){if(e.ca)e=!0;else{t=new ev(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&mv(e),e=n.call(r,t)}return e}function yv(e){return(e=e[cv])instanceof av?e:null}var bv="__closure_events_fn_"+(1e9*Math.random()>>>0);function wv(e){return"function"==typeof e?e:(e[bv]||(e[bv]=function(t){return e.handleEvent(t)}),e[bv])}function _v(){ym.call(this),this.i=new av(this),this.P=this,this.I=null}function kv(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new $m(t,e);else if(t instanceof $m)t.target=t.target||e;else{var i=t;Dm(t=new $m(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=Sv(a,r,!0,t)&&i}if(i=Sv(a=t.g=e,r,!0,t)&&i,i=Sv(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Sv(a=t.g=n[o],r,!1,t)&&i}function Sv(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&sv(e.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}gm(_v,ym),_v.prototype[nv]=!0,_v.prototype.removeEventListener=function(e,t,n,r){pv(this,e,t,n,r)},_v.prototype.M=function(){if(_v.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ov(n[r]);delete t.g[e],t.h--}}this.I=null},_v.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},_v.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ev=sm.JSON.stringify;function Mv(){var e=Rv,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Tv,Cv=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=Iv.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),Iv=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},e}())((function(){return new xv}),(function(e){return e.reset()})),xv=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function Av(e){sm.setTimeout((function(){throw e}),0)}function Pv(e,t){Tv||function(){var e=sm.Promise.resolve(void 0);Tv=function(){e.then(Dv)}}(),Ov||(Tv(),Ov=!0),Rv.add(e,t)}var Ov=!1,Rv=new Cv;function Dv(){for(var e;e=Mv();){try{e.h.call(e.g)}catch(e){Av(e)}var t=Iv;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ov=!1}function Nv(e,t){_v.call(this),this.h=e||1,this.g=t||sm,this.j=mm(this.kb,this),this.l=Date.now()}function Lv(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function jv(e,t,n){if("function"==typeof e)n&&(e=mm(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=mm(e.handleEvent,e)}return 2147483647<Number(t)?-1:sm.setTimeout(e,t||0)}function Bv(e){e.g=jv((function(){e.g=null,e.i&&(e.i=!1,Bv(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}gm(Nv,_v),(im=Nv.prototype).da=!1,im.S=null,im.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),kv(this,"tick"),this.da&&(Lv(this),this.start()))}},im.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},im.M=function(){Nv.Z.M.call(this),Lv(this),delete this.g};var Fv=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}nm(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:Bv(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(sm.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(ym);function Uv(e){ym.call(this),this.h=e,this.g={}}gm(Uv,ym);var qv=[];function zv(e,t,n,r){Array.isArray(n)||(n&&(qv[0]=n.toString()),n=qv);for(var i=0;i<n.length;i++){var o=hv(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Vv(e){Pm(e.g,(function(e,t){this.g.hasOwnProperty(t)&&mv(e)}),e),e.g={}}function Wv(){this.g=!0}function Hv(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Ev(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Uv.prototype.M=function(){Uv.Z.M.call(this),Vv(this)},Uv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wv.prototype.Aa=function(){this.g=!1},Wv.prototype.info=function(){};var Kv={},Gv=null;function Yv(){return Gv=Gv||new _v}function Qv(e){$m.call(this,Kv.Ma,e)}function Jv(e){var t=Yv();kv(t,new Qv(t,e))}function Zv(e,t){$m.call(this,Kv.STAT_EVENT,e),this.stat=t}function Xv(e){var t=Yv();kv(t,new Zv(t,e))}function $v(e,t){$m.call(this,Kv.Na,e),this.size=t}function eg(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return sm.setTimeout((function(){e()}),t)}Kv.Ma="serverreachability",gm(Qv,$m),Kv.STAT_EVENT="statevent",gm(Zv,$m),Kv.Na="timingevent",gm($v,$m);var tg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ng={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function rg(){}function ig(e){return e.h||(e.h=e.i())}function og(){}rg.prototype.h=null;var ag,sg={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ug(){$m.call(this,"d")}function cg(){$m.call(this,"c")}function lg(){}function hg(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Uv(this),this.P=dg,e=Um?125:void 0,this.W=new Nv(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new fg}function fg(){this.i=null,this.g="",this.h=!1}gm(ug,$m),gm(cg,$m),gm(lg,rg),lg.prototype.g=function(){return new XMLHttpRequest},lg.prototype.i=function(){return{}},ag=new lg;var dg=45e3,pg={},mg={};function vg(e,t,n){e.K=1,e.v=Fg(Rg(t)),e.s=n,e.U=!0,gg(e,null)}function gg(e,t){e.F=Date.now(),_g(e),e.A=Rg(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Xg(n.h,"t",r),e.C=0,n=e.l.H,e.h=new fg,e.g=$y(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Fv(mm(e.Ia,e,e.g),e.O)),zv(e.V,e.g,"readystatechange",e.gb),t=e.H?Om(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Jv(1),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function yg(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function bg(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=wg(e,n))==mg){4==t&&(e.o=4,Xv(14),i=!1),Hv(e.j,e.m,null,"[Incomplete Response]");break}if(r==pg){e.o=4,Xv(15),Hv(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Hv(e.j,e.m,r,null),Tg(e,r)}yg(e)&&r!=mg&&r!=pg&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Xv(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Hy(t),t.L=!0,Xv(11))):(Hv(e.j,e.m,n,"[Invalid Chunked Response]"),Mg(e),Eg(e))}function wg(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?mg:(n=Number(t.substring(n,r)),isNaN(n)?pg:(r+=1)+n>t.length?mg:(t=t.substr(r,n),e.C=r+n,t))}function _g(e){e.Y=Date.now()+e.P,kg(e,e.P)}function kg(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=eg(mm(e.eb,e),t)}function Sg(e){e.B&&(sm.clearTimeout(e.B),e.B=null)}function Eg(e){0==e.l.G||e.I||Yy(e.l,e)}function Mg(e){Sg(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Lv(e.W),Vv(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Tg(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||oy(n.i,e)))if(n.I=e.N,!e.J&&oy(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(n.u)n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=eg(mm(n.ab,n),6e3));else{if(n.g){if(!(n.g.F+3e3<e.F))break e;Gy(n),Ly(n)}Wy(n),Xv(18)}if(1>=iy(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else Jy(n,11)}else if((e.J||n.g==e)&&Gy(n),!Em(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Cm(l,"spdy")||Cm(l,"quic")||Cm(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(ay(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Bg(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Xy(r,r.H?r.la:null,r.W),d.J){sy(r.i,d);var p=d,m=r.K;m&&p.setTimeout(m),p.B&&(Sg(p),_g(p)),r.g=d}else Vy(r);0<n.l.length&&Fy(n)}else"stop"!=o[0]&&"close"!=o[0]||Jy(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Jy(n,7):Ny(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Jv(4)}catch(o){}}function Cg(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(cm(e)||"string"==typeof e)_m(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(cm(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(cm(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Ig(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ig)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function xg(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Ag(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Ag(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Ag(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(im=hg.prototype).setTimeout=function(e){this.P=e},im.gb=function(e){e=e.target;var t=this.L;t&&3==Ay(e)?t.l():this.Ia(e)},im.Ia=function(e){try{if(e==this.g)e:{var t=Ay(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Um||this.g&&(this.h.h||this.g.ga()||Py(this.g)))){this.I||4!=t||7==n||Jv(8==n||0>=r?3:2),Sg(this);var i=this.g.ba();this.N=i;t:if(yg(this)){var o=Py(this.g);e="";var a=o.length,s=4==Ay(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Mg(this),Eg(this);var u="";break t}this.h.i=new sm.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Em(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,Xv(12),Mg(this),Eg(this);break e}Hv(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Tg(this,i)}this.U?(bg(this,t,u),Um&&this.i&&3==t&&(zv(this.V,this.W,"tick",this.fb),this.W.start())):(Hv(this.j,this.m,u,null),Tg(this,u)),4==t&&Mg(this),this.i&&!this.I&&(4==t?Yy(this.l,this):(this.i=!1,_g(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Xv(12)):(this.o=0,Xv(13)),Mg(this),Eg(this)}}}catch(t){}},im.fb=function(){if(this.g){var e=Ay(this.g),t=this.g.ga();this.C<t.length&&(Sg(this),bg(this,e,t),this.i&&4!=e&&_g(this))}},im.cancel=function(){this.I=!0,Mg(this)},im.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Jv(3),Xv(17)),Mg(this),this.o=2,Eg(this)):kg(this,this.Y-e)},(im=Ig.prototype).R=function(){xg(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},im.T=function(){return xg(this),this.g.concat()},im.get=function(e,t){return Ag(this.h,e)?this.h[e]:t},im.set=function(e,t){Ag(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},im.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Pg=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Og(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Og){this.g=void 0!==t?t:e.g,Dg(this,e.j),this.s=e.s,Ng(this,e.i),Lg(this,e.m),this.l=e.l,t=e.h;var n=new Yg;n.i=t.i,t.g&&(n.g=new Ig(t.g),n.h=t.h),jg(this,n),this.o=e.o}else e&&(n=String(e).match(Pg))?(this.g=!!t,Dg(this,n[1]||"",!0),this.s=Ug(n[2]||""),Ng(this,n[3]||"",!0),Lg(this,n[4]),this.l=Ug(n[5]||"",!0),jg(this,n[6]||"",!0),this.o=Ug(n[7]||"")):(this.g=!!t,this.h=new Yg(null,this.g))}function Rg(e){return new Og(e)}function Dg(e,t,n){e.j=n?Ug(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ng(e,t,n){e.i=n?Ug(t,!0):t}function Lg(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function jg(e,t,n){t instanceof Yg?(e.h=t,function(e,t){t&&!e.j&&(Qg(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Jg(this,t),Xg(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=qg(t,Kg)),e.h=new Yg(t,e.g))}function Bg(e,t,n){e.h.set(t,n)}function Fg(e){return Bg(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ug(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function qg(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,zg),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function zg(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Og.prototype.toString=function(){var e=[],t=this.j;t&&e.push(qg(t,Vg,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(qg(t,Vg,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(qg(n,"/"==n.charAt(0)?Hg:Wg,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",qg(n,Gg)),e.join("")};var Vg=/[#\/\?@]/g,Wg=/[#\?:]/g,Hg=/[#\?]/g,Kg=/[#\?@]/g,Gg=/#/g;function Yg(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Qg(e){e.g||(e.g=new Ig,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Jg(e,t){Qg(e),t=$g(e,t),Ag(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Ag((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&xg(e)))}function Zg(e,t){return Qg(e),t=$g(e,t),Ag(e.g.h,t)}function Xg(e,t,n){Jg(e,t),0<n.length&&(e.i=null,e.g.set($g(e,t),Sm(n)),e.h+=n.length)}function $g(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(im=Yg.prototype).add=function(e,t){Qg(this),this.i=null,e=$g(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},im.forEach=function(e,t){Qg(this),this.g.forEach((function(n,r){_m(n,(function(n){e.call(t,n,r,this)}),this)}),this)},im.T=function(){Qg(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},im.R=function(e){Qg(this);var t=[];if("string"==typeof e)Zg(this,e)&&(t=km(t,this.g.get($g(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=km(t,e[n])}return t},im.set=function(e,t){return Qg(this),this.i=null,Zg(this,e=$g(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},im.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},im.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.i=e.join("&")};var ey=function(e,t){this.h=e,this.g=t};function ty(e){this.l=e||ny,sm.PerformanceNavigationTiming?e=0<(e=sm.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(sm.g&&sm.g.Ea&&sm.g.Ea()&&sm.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ny=10;function ry(e){return!!e.h||!!e.g&&e.g.size>=e.j}function iy(e){return e.h?1:e.g?e.g.size:0}function oy(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ay(e,t){e.g?e.g.add(t):e.h=t}function sy(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function uy(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=rm(e.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return Sm(e.i)}function cy(){}function ly(){this.g=new cy}function hy(e,t,n){var r=n||"";try{Cg(e,(function(e,n){var i=e;lm(e)&&(i=Ev(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function fy(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function dy(e){this.l=e.$b||null,this.j=e.ib||!1}function py(e,t){_v.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=my,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ty.prototype.cancel=function(){var e,t;if(this.i=uy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=rm(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},cy.prototype.stringify=function(e){return sm.JSON.stringify(e,void 0)},cy.prototype.parse=function(e){return sm.JSON.parse(e,void 0)},gm(dy,rg),dy.prototype.g=function(){return new py(this.l,this.j)},dy.prototype.i=function(e){return function(){return e}}({}),gm(py,_v);var my=0;function vy(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function gy(e){e.readyState=4,e.l=null,e.j=null,e.A=null,yy(e)}function yy(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(im=py.prototype).open=function(e,t){if(this.readyState!=my)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,yy(this)},im.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||sm).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},im.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,gy(this)),this.readyState=my},im.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,yy(this)),this.g&&(this.readyState=3,yy(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==sm.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vy(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},im.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?gy(this):yy(this),3==this.readyState&&vy(this)}},im.Ua=function(e){this.g&&(this.response=this.responseText=e,gy(this))},im.Ta=function(e){this.g&&(this.response=e,gy(this))},im.ha=function(){this.g&&gy(this)},im.setRequestHeader=function(e,t){this.v.append(e,t)},im.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},im.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(py.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var by=sm.JSON.parse;function wy(e){_v.call(this),this.headers=new Ig,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=_y,this.K=this.L=!1}gm(wy,_v);var _y="",ky=/^https?$/i,Sy=["POST","PUT"];function Ey(e){return"content-type"==e.toLowerCase()}function My(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ty(e),Iy(e)}function Ty(e){e.D||(e.D=!0,kv(e,"complete"),kv(e,"error"))}function Cy(e){if(e.h&&void 0!==am&&(!e.C[1]||4!=Ay(e)||2!=e.ba()))if(e.v&&4==Ay(e))jv(e.Fa,0,e);else if(kv(e,"readystatechange"),4==Ay(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.H).match(Pg)[1]||null;if(!o&&sm.self&&sm.self.location){var a=sm.self.location.protocol;o=a.substr(0,a.length-1)}i=!ky.test(o?o.toLowerCase():"")}t=i}if(t)kv(e,"complete"),kv(e,"success");else{e.m=6;try{var s=2<Ay(e)?e.g.statusText:""}catch(e){s=""}e.j=s+" ["+e.ba()+"]",Ty(e)}}finally{Iy(e)}}}function Iy(e,t){if(e.g){xy(e);var n=e.g,r=e.C[0]?um:null;e.g=null,e.C=null,t||kv(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function xy(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(sm.clearTimeout(e.A),e.A=null)}function Ay(e){return e.g?e.g.readyState:0}function Py(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case _y:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Oy(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Pm(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Bg(e,t,n))}function Ry(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Dy(e){this.za=0,this.l=[],this.h=new Wv,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ry("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ry("baseRetryDelayMs",5e3,e),this.$a=Ry("retryDelaySeedMs",1e4,e),this.Ya=Ry("forwardChannelMaxRetries",2,e),this.ra=Ry("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new ty(e&&e.concurrentRequestLimit),this.Ca=new ly,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Ny(e){if(jy(e),3==e.G){var t=e.V++,n=Rg(e.F);Bg(n,"SID",e.J),Bg(n,"RID",t),Bg(n,"TYPE","terminate"),qy(e,n),(t=new hg(e,e.h,t,void 0)).K=2,t.v=Fg(Rg(n)),n=!1,sm.navigator&&sm.navigator.sendBeacon&&(n=sm.navigator.sendBeacon(t.v.toString(),"")),!n&&sm.Image&&((new Image).src=t.v,n=!0),n||(t.g=$y(t.l,null),t.g.ea(t.v)),t.F=Date.now(),_g(t)}Zy(e)}function Ly(e){e.g&&(Hy(e),e.g.cancel(),e.g=null)}function jy(e){Ly(e),e.u&&(sm.clearTimeout(e.u),e.u=null),Gy(e),e.i.cancel(),e.m&&("number"==typeof e.m&&sm.clearTimeout(e.m),e.m=null)}function By(e,t){e.l.push(new ey(e.Za++,t)),3==e.G&&Fy(e)}function Fy(e){ry(e.i)||e.m||(e.m=!0,Pv(e.Ha,e),e.C=0)}function Uy(e,t){var n;n=t?t.m:e.V++;var r=Rg(e.F);Bg(r,"SID",e.J),Bg(r,"RID",n),Bg(r,"AID",e.U),qy(e,r),e.o&&e.s&&Oy(r,e.o,e.s),n=new hg(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=zy(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),ay(e.i,n),vg(n,r,t)}function qy(e,t){e.j&&Cg({},(function(e,n){Bg(t,n,e)}))}function zy(e,t,n){n=Math.min(e.l.length,n);var r=e.j?mm(e.j.Oa,e.j,e):null;e:for(var i=e.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{hy(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Vy(e){e.g||e.u||(e.Y=1,Pv(e.Ga,e),e.A=0)}function Wy(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=eg(mm(e.Ga,e),Qy(e,e.A)),e.A++,!0)}function Hy(e){null!=e.B&&(sm.clearTimeout(e.B),e.B=null)}function Ky(e){e.g=new hg(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Rg(e.oa);Bg(t,"RID","rpc"),Bg(t,"SID",e.J),Bg(t,"CI",e.N?"0":"1"),Bg(t,"AID",e.U),qy(e,t),Bg(t,"TYPE","xmlhttp"),e.o&&e.s&&Oy(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Fg(Rg(t)),n.s=null,n.U=!0,gg(n,e)}function Gy(e){null!=e.v&&(sm.clearTimeout(e.v),e.v=null)}function Yy(e,t){var n=null;if(e.g==t){Gy(e),Hy(e),e.g=null;var r=2}else{if(!oy(e.i,t))return;n=t.D,sy(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;kv(r=Yv(),new $v(r,n,t,i)),Fy(e)}else Vy(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(iy(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=eg(mm(e.Ha,e,t),Qy(e,e.C)),e.C++,0)))}(e,t)||2==r&&Wy(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Jy(e,5);break;case 4:Jy(e,10);break;case 3:Jy(e,6);break;default:Jy(e,2)}}function Qy(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Jy(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=mm(e.jb,e);n||(n=new Og("//www.google.com/images/cleardot.gif"),sm.location&&"http"==sm.location.protocol||Dg(n,"https"),Fg(n)),function(e,t){var n=new Wv;if(sm.Image){var r=new Image;r.onload=vm(fy,n,r,"TestLoadImage: loaded",!0,t),r.onerror=vm(fy,n,r,"TestLoadImage: error",!1,t),r.onabort=vm(fy,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=vm(fy,n,r,"TestLoadImage: timeout",!1,t),sm.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Xv(2);e.G=0,e.j&&e.j.va(t),Zy(e),jy(e)}function Zy(e){e.G=0,e.I=-1,e.j&&(0==uy(e.i).length&&0==e.l.length||(e.i.i.length=0,Sm(e.l),e.l.length=0),e.j.ua())}function Xy(e,t,n){var r=function(e){return e instanceof Og?Rg(e):new Og(e,void 0)}(n);if(""!=r.i)t&&Ng(r,t+"."+r.i),Lg(r,r.m);else{var i=sm.location;r=function(e,t,n,r){var i=new Og(null,void 0);return e&&Dg(i,e),t&&Ng(i,t),n&&Lg(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Pm(e.aa,(function(e,t){Bg(r,t,e)})),t=e.D,n=e.sa,t&&n&&Bg(r,t,n),Bg(r,"VER",e.ma),qy(e,r),r}function $y(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new wy(new dy({ib:!0})):new wy(e.qa)).L=e.H,t}function eb(){}function tb(){if(Bm&&!(10<=Number(Zm)))throw Error("Environmental error: no available transport.")}function nb(e,t){_v.call(this),this.g=new Dy(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Em(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Em(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ob(this)}function rb(e){ug.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ib(){cg.call(this),this.status=1}function ob(e){this.g=e}(im=wy.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ag.g(),this.C=this.u?ig(this.u):ig(ag),this.g.onreadystatechange=mm(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void My(this,e)}e=n||"";var i=new Ig(this.headers);r&&Cg(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Ey,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=sm.FormData&&e instanceof sm.FormData,!(0<=wm(Sy,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{xy(this),0<this.B&&((this.K=function(e){return Bm&&Qm()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=mm(this.pa,this)):this.A=jv(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){My(this,e)}},im.pa=function(){void 0!==am&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kv(this,"timeout"),this.abort(8))},im.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,kv(this,"complete"),kv(this,"abort"),Iy(this))},im.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Iy(this,!0)),wy.Z.M.call(this)},im.Fa=function(){this.s||(this.F||this.v||this.l?Cy(this):this.cb())},im.cb=function(){Cy(this)},im.ba=function(){try{return 2<Ay(this)?this.g.status:-1}catch(e){return-1}},im.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},im.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),by(t)}},im.Da=function(){return this.m},im.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(im=Dy.prototype).ma=8,im.G=1,im.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},im.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new hg(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Dm(n=Om(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=zy(this,t,r),Bg(i=Rg(this.F),"RID",e),Bg(i,"CVER",22),this.D&&Bg(i,"X-HTTP-Session-Id",this.D),qy(this,i),this.o&&n&&Oy(i,this.o,n),ay(this.i,t),this.Ra&&Bg(i,"TYPE","init"),this.ja?(Bg(i,"$req",r),Bg(i,"SID","null"),t.$=!0,vg(t,i,null)):vg(t,i,r),this.G=2}}else 3==this.G&&(e?Uy(this,e):0==this.l.length||ry(this.i)||Uy(this))},im.Ga=function(){if(this.u=null,Ky(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=eg(mm(this.bb,this),e)}},im.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Xv(10),Ly(this),Ky(this))},im.ab=function(){null!=this.v&&(this.v=null,Ly(this),Wy(this),Xv(19))},im.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Xv(2)):(this.h.info("Failed to ping google.com"),Xv(1))},(im=eb.prototype).xa=function(){},im.wa=function(){},im.va=function(){},im.ua=function(){},im.Oa=function(){},tb.prototype.g=function(e,t){return new nb(e,t)},gm(nb,_v),nb.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Pv(mm(e.hb,e,t))),Xv(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Xy(e,null,e.W),Fy(e)},nb.prototype.close=function(){Ny(this.g)},nb.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,By(this.g,t)}else this.v?((t={}).__data__=Ev(e),By(this.g,t)):By(this.g,e)},nb.prototype.M=function(){this.g.j=null,delete this.j,Ny(this.g),delete this.g,nb.Z.M.call(this)},gm(rb,ug),gm(ib,cg),gm(ob,eb),ob.prototype.xa=function(){kv(this.g,"a")},ob.prototype.wa=function(e){kv(this.g,new rb(e))},ob.prototype.va=function(e){kv(this.g,new ib(e))},ob.prototype.ua=function(){kv(this.g,"b")},tb.prototype.createWebChannel=tb.prototype.g,nb.prototype.send=nb.prototype.u,nb.prototype.open=nb.prototype.m,nb.prototype.close=nb.prototype.close,tg.NO_ERROR=0,tg.TIMEOUT=8,tg.HTTP_ERROR=6,ng.COMPLETE="complete",og.EventType=sg,sg.OPEN="a",sg.CLOSE="b",sg.ERROR="c",sg.MESSAGE="d",_v.prototype.listen=_v.prototype.N,wy.prototype.listenOnce=wy.prototype.O,wy.prototype.getLastError=wy.prototype.La,wy.prototype.getLastErrorCode=wy.prototype.Da,wy.prototype.getStatus=wy.prototype.ba,wy.prototype.getResponseJson=wy.prototype.Qa,wy.prototype.getResponseText=wy.prototype.ga,wy.prototype.send=wy.prototype.ea;var ab=function(){return new tb},sb=function(){return Yv()},ub=tg,cb=ng,lb=Kv,hb={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},fb=dy,db=og,pb=wy,mb=(nu=o("7lbf0"),function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.t(e)},this.i=function(e){return t.writeSequenceNumber(e)})}return e.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},e}());mb.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},gb=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Xp(t,e),t}(Error),yb=new Bn("@firebase/firestore");function bb(){return yb.logLevel}function wb(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(yb.logLevel<=Pn.DEBUG){var r=t.map(Sb);yb.debug.apply(yb,tm(["Firestore (8.10.0): "+e],r))}}function _b(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(yb.logLevel<=Pn.ERROR){var r=t.map(Sb);yb.error.apply(yb,tm(["Firestore (8.10.0): "+e],r))}}function kb(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(yb.logLevel<=Pn.WARN){var r=t.map(Sb);yb.warn.apply(yb,tm(["Firestore (8.10.0): "+e],r))}}function Sb(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+e;throw _b(t),new Error(t)}function Mb(e,t){e||Eb()}function Tb(e,t){return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ib=function(){function e(){}return e.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Cb(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},e}();function xb(e,t){return e<t?-1:e>t?1:0}function Ab(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Pb(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ob=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new gb(vb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new gb(vb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new gb(vb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new gb(vb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?xb(this.nanoseconds,e.nanoseconds):xb(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),Rb=function(){function e(e){this.timestamp=e}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new Ob(0,0))},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Nb(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Lb(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jb=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&Eb(),void 0===n?n=e.length-t:n>e.length-t&&Eb(),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),Bb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xp(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new gb(vb.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(e){return e.length>0})))}return new t(r)},t.emptyPath=function(){return new t([])},t}(jb),Fb=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ub=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xp(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return Fb.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new gb(vb.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new gb(vb.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new gb(vb.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new gb(vb.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.emptyPath=function(){return new t([])},t}(jb),qb=function(){function e(e){this.fields=e,e.sort(Ub.comparator)}return e.prototype.covers=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].isPrefixOf(e))return!0;return!1},e.prototype.isEqual=function(e){return Ab(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))},e}(),zb=function(){function e(e){this.binaryString=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){var e;return e=this.binaryString,btoa(e)},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(e){return xb(this.binaryString,e.binaryString)},e.prototype.isEqual=function(e){return this.binaryString===e.binaryString},e}();zb.EMPTY_BYTE_STRING=new zb("");var Vb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wb(e){if(Mb(!!e),"string"==typeof e){var t=0,n=Vb.exec(e);if(Mb(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Hb(e.seconds),nanos:Hb(e.nanos)}}function Hb(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Kb(e){return"string"==typeof e?zb.fromBase64String(e):zb.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Yb(e){var t=e.mapValue.fields.__previous_value__;return Gb(t)?Yb(t):t}function Qb(e){var t=Wb(e.mapValue.fields.__local_write_time__.timestampValue);return new Ob(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(e){return null==e}function Zb(e){return 0===e&&1/e==-1/0}function Xb(e){return"number"==typeof e&&Number.isInteger(e)&&!Zb(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $b=function(){function e(e){this.path=e}return e.fromPath=function(t){return new e(Bb.fromString(t))},e.fromName=function(t){return new e(Bb.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===Bb.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return Bb.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new Bb(t.slice()))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Gb(e)?4:10:Eb()}function tw(e,t){var n,r=ew(e);if(r!==ew(t))return!1;switch(r){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Qb(e).isEqual(Qb(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Wb(e.timestampValue),r=Wb(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return n=t,Kb(e.bytesValue).isEqual(Kb(n.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Hb(e.geoPointValue.latitude)===Hb(t.geoPointValue.latitude)&&Hb(e.geoPointValue.longitude)===Hb(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Hb(e.integerValue)===Hb(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Hb(e.doubleValue),r=Hb(t.doubleValue);return n===r?Zb(n)===Zb(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ab(e.arrayValue.values||[],t.arrayValue.values||[],tw);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Db(n)!==Db(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!tw(n[i],r[i])))return!1;return!0}(e,t);default:return Eb()}}function nw(e,t){return void 0!==(e.values||[]).find((function(e){return tw(e,t)}))}function rw(e,t){var n,r,i,o,a=ew(e),s=ew(t);if(a!==s)return xb(a,s);switch(a){case 0:return 0;case 1:return xb(e.booleanValue,t.booleanValue);case 2:return r=t,i=Hb((n=e).integerValue||n.doubleValue),o=Hb(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return iw(e.timestampValue,t.timestampValue);case 4:return iw(Qb(e),Qb(t));case 5:return xb(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Kb(e),r=Kb(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=xb(n[i],r[i]);if(0!==o)return o}return xb(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=xb(Hb(e.latitude),Hb(t.latitude));return 0!==n?n:xb(Hb(e.longitude),Hb(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=rw(n[i],r[i]);if(o)return o}return xb(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=xb(r[a],o[a]);if(0!==s)return s;var u=rw(n[r[a]],i[o[a]]);if(0!==u)return u}return xb(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Eb()}}function iw(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return xb(e,t);var n=Wb(e),r=Wb(t),i=xb(n.seconds,r.seconds);return 0!==i?i:xb(n.nanos,r.nanos)}function ow(e){return aw(e)}function aw(e){var t,n,r,i;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(r=e.timestampValue,"time("+(i=Wb(r)).seconds+","+i.nanos+")"):"stringValue"in e?e.stringValue:"bytesValue"in e?Kb(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,$b.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(e){for(var t="[",n=!0,r=0,i=e.values||[];r<i.length;r++)n?n=!1:t+=",",t+=aw(i[r]);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var t="{",n=!0,r=0,i=Object.keys(e.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:t+=",",t+=o+":"+aw(e.fields[o])}return t+"}"}(e.mapValue):Eb()}function sw(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function uw(e){return!!e&&"integerValue"in e}function cw(e){return!!e&&"arrayValue"in e}function lw(e){return!!e&&"nullValue"in e}function hw(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function fw(e){return!!e&&"mapValue"in e}function dw(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Nb(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=dw(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=dw(e.arrayValue.values[r]);return n}return Object.assign({},e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pw=function(){function e(e){this.value=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!fw(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},e.prototype.set=function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dw(t)},e.prototype.setAll=function(e){var t=this,n=Ub.emptyPath(),r={},i=[];e.forEach((function(e,o){if(!n.isImmediateParentOf(o)){var a=t.getFieldsMap(n);t.applyChanges(a,r,i),r={},i=[],n=o.popLast()}e?r[o.lastSegment()]=dw(e):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},e.prototype.delete=function(e){var t=this.field(e.popLast());fw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]},e.prototype.isEqual=function(e){return tw(this.value,e.value)},e.prototype.getFieldsMap=function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];fw(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields},e.prototype.applyChanges=function(e,t,n){Nb(t,(function(t,n){return e[t]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete e[o]}},e.prototype.clone=function(){return new e(dw(this.value))},e}();function mw(e){var t=[];return Nb(e.fields,(function(e,n){var r=new Ub([e]);if(fw(n)){var i=mw(n.mapValue).fields;if(0===i.length)t.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];t.push(r.child(s))}}else t.push(r)})),new qb(t)}var vw=function(){function e(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}return e.newInvalidDocument=function(t){return new e(t,0,Rb.min(),pw.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,pw.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,pw.empty(),2)},e.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},e.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=pw.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=pw.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return 0!==this.documentType},e.prototype.isFoundDocument=function(){return 1===this.documentType},e.prototype.isNoDocument=function(){return 2===this.documentType},e.prototype.isUnknownDocument=function(){return 3===this.documentType},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),gw=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(e,t,n,r,i,o,a){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new gw(e,t,n,r,i,o,a)}function bw(e){var t=Tb(e);if(null===t.h){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+ow(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return(t=e).field.canonicalString()+t.dir;var t})).join(","),Jb(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Ow(t.startAt)),t.endAt&&(n+="|ub:",n+=Ow(t.endAt)),t.h=n}return t.h}function ww(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Dw(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!tw(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Lw(e.startAt,t.startAt)&&Lw(e.endAt,t.endAt)}function _w(e){return $b.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var kw=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return Xp(t,e),t.create=function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.l(e,n,r):new Sw(e,n,r):"array-contains"===n?new Cw(e,r):"in"===n?new Iw(e,r):"not-in"===n?new xw(e,r):"array-contains-any"===n?new Aw(e,r):new t(e,n,r)},t.l=function(e,t,n){return"in"===t?new Ew(e,n):new Mw(e,n)},t.prototype.matches=function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.m(rw(t,this.value)):null!==t&&ew(this.value)===ew(t)&&this.m(rw(t,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Eb()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}((function(){})),Sw=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=$b.fromName(r.referenceValue),i}return Xp(t,e),t.prototype.matches=function(e){var t=$b.comparator(e.key,this.key);return this.m(t)},t}(kw),Ew=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=Tw("in",n),r}return Xp(t,e),t.prototype.matches=function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))},t}(kw),Mw=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=Tw("not-in",n),r}return Xp(t,e),t.prototype.matches=function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))},t}(kw);function Tw(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return $b.fromName(e.referenceValue)}))}var Cw=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return Xp(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return cw(t)&&nw(t.arrayValue,this.value)},t}(kw),Iw=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return Xp(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return null!==t&&nw(this.value.arrayValue,t)},t}(kw),xw=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return Xp(t,e),t.prototype.matches=function(e){if(nw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!nw(this.value.arrayValue,t)},t}(kw),Aw=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return Xp(t,e),t.prototype.matches=function(e){var t=this,n=e.data.field(this.field);return!(!cw(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return nw(t.value.arrayValue,e)}))},t}(kw),Pw=function(e,t){this.position=e,this.before=t};function Ow(e){return(e.before?"b":"a")+":"+e.position.map((function(e){return ow(e)})).join(",")}var Rw=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function Dw(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Nw(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?$b.comparator($b.fromName(a.referenceValue),n.key):rw(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Lw(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!tw(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jw=function(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Bw(e,t,n,r,i,o,a,s){return new jw(e,t,n,r,i,o,a,s)}function Fw(e){return new jw(e)}function Uw(e){return!Jb(e.limit)&&"F"===e.limitType}function qw(e){return!Jb(e.limit)&&"L"===e.limitType}function zw(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Vw(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function Ww(e){return null!==e.collectionGroup}function Hw(e){var t=Tb(e);if(null===t.p){t.p=[];var n=Vw(t),r=zw(t);if(null!==n&&null===r)n.isKeyField()||t.p.push(new Rw(n)),t.p.push(new Rw(Ub.keyField(),"asc"));else{for(var i=!1,o=0,a=t.explicitOrderBy;o<a.length;o++){var s=a[o];t.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Rw(Ub.keyField(),u))}}}return t.p}function Kw(e){var t=Tb(e);if(!t.T)if("F"===t.limitType)t.T=yw(t.path,t.collectionGroup,Hw(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=Hw(t);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Rw(o.field,a))}var s=t.endAt?new Pw(t.endAt.position,!t.endAt.before):null,u=t.startAt?new Pw(t.startAt.position,!t.startAt.before):null;t.T=yw(t.path,t.collectionGroup,n,t.filters,t.limit,s,u)}return t.T}function Gw(e,t,n){return new jw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Yw(e,t){return ww(Kw(e),Kw(t))&&e.limitType===t.limitType}function Qw(e){return bw(Kw(e))+"|lt:"+e.limitType}function Jw(e){return"Query(target="+(t=Kw(e),n=t.path.canonicalString(),null!==t.collectionGroup&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: ["+t.filters.map((function(e){var t;return(t=e).field.canonicalString()+" "+t.op+" "+ow(t.value)})).join(", ")+"]"),Jb(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: ["+t.orderBy.map((function(e){return(t=e).field.canonicalString()+" ("+t.dir+")";var t})).join(", ")+"]"),t.startAt&&(n+=", startAt: "+Ow(t.startAt)),t.endAt&&(n+=", endAt: "+Ow(t.endAt)),"Target("+n+"); limitType=")+e.limitType+")";var t,n}function Zw(e,t){return t.isFoundDocument()&&(n=e,i=(r=t).key.path,null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):$b.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i))&&function(e,t){for(var n=0,r=e.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!Nw(e.startAt,Hw(e),t)||e.endAt&&Nw(e.endAt,Hw(e),t))}(e,t);var n,r,i}function Xw(e){return function(t,n){for(var r=!1,i=0,o=Hw(e);i<o.length;i++){var a=o[i],s=$w(a,t,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function $w(e,t,n){var r,i,o,a,s=e.field.isKeyField()?$b.comparator(t.key,n.key):(r=e.field,i=n,o=t.data.field(r),a=i.data.field(r),null!==o&&null!==a?rw(o,a):Eb());switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return Eb()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zb(t)?"-0":t}}function t_(e){return{integerValue:""+e}}function n_(e,t){return Xb(t)?t_(t):e_(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var r_=function(){this._=void 0};function i_(e,t,n){return e instanceof s_?(i=t,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):e instanceof u_?c_(e,t):e instanceof l_?h_(e,t):function(e,t){var n=a_(e,t),r=d_(n)+d_(e.A);return uw(n)&&uw(e.A)?t_(r):e_(e.R,r)}(e,t);var r,i,o}function o_(e,t,n){return e instanceof u_?c_(e,t):e instanceof l_?h_(e,t):n}function a_(e,t){var n,r;return e instanceof f_?uw(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null}var s_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xp(t,e),t}(r_),u_=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return Xp(t,e),t}(r_);function c_(e,t){for(var n=p_(t),r=function(e){n.some((function(t){return tw(t,e)}))||n.push(e)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var l_=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return Xp(t,e),t}(r_);function h_(e,t){for(var n=p_(t),r=function(e){n=n.filter((function(t){return!tw(t,e)}))},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var f_=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).R=t,r.A=n,r}return Xp(t,e),t}(r_);function d_(e){return Hb(e.integerValue||e.doubleValue)}function p_(e){return cw(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var m_=function(e,t){this.field=e,this.transform=t},v_=function(e,t){this.version=e,this.transformResults=t},g_=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function y_(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var b_=function(){};function w_(e,t,n){var r,i,o,a,s;e instanceof M_?(i=t,o=n,a=(r=e).value.clone(),s=I_(r.fieldTransforms,i,o.transformResults),a.setAll(s),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()):e instanceof T_?function(e,t,n){if(y_(e.precondition,t)){var r=I_(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(C_(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function __(e,t,n){var r;e instanceof M_?function(e,t,n){if(y_(e.precondition,t)){var r=e.value.clone(),i=x_(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(E_(t),r).setHasLocalMutations()}}(e,t,n):e instanceof T_?function(e,t,n){if(y_(e.precondition,t)){var r=x_(e.fieldTransforms,n,t),i=t.data;i.setAll(C_(e)),i.setAll(r),t.convertToFoundDocument(E_(t),i).setHasLocalMutations()}}(e,t,n):(r=t,y_(e.precondition,r)&&r.convertToNoDocument(Rb.min()))}function k_(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],a=t.data.field(o.field),s=a_(o.transform,a||null);null!=s&&(null==n&&(n=pw.empty()),n.set(o.field,s))}return n||null}function S_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Ab(n,r,(function(e,t){return r=t,(n=e).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof u_&&o instanceof u_||i instanceof l_&&o instanceof l_?Ab(i.elements,o.elements,tw):i instanceof f_&&o instanceof f_?tw(i.A,o.A):i instanceof s_&&o instanceof s_);var n,r,i,o}))))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask));var n,r}function E_(e){return e.isFoundDocument()?e.version:Rb.min()}var M_=function(e){function t(t,n,r,i){void 0===i&&(i=[]);var o=this;return(o=e.call(this)||this).key=t,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Xp(t,e),t}(b_),T_=function(e){function t(t,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=e.call(this)||this).key=t,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return Xp(t,e),t}(b_);function C_(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function I_(e,t,n){var r=new Map;Mb(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,o_(a,s,n[i]))}return r}function x_(e,t,n){for(var r=new Map,i=0,o=e;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,i_(s,u,t))}return r}var A_,P_,O_=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Xp(t,e),t}(b_),R_=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Xp(t,e),t}(b_),D_=function(e){this.count=e};function N_(e){switch(e){case vb.OK:return Eb();case vb.CANCELLED:case vb.UNKNOWN:case vb.DEADLINE_EXCEEDED:case vb.RESOURCE_EXHAUSTED:case vb.INTERNAL:case vb.UNAVAILABLE:case vb.UNAUTHENTICATED:return!1;case vb.INVALID_ARGUMENT:case vb.NOT_FOUND:case vb.ALREADY_EXISTS:case vb.PERMISSION_DENIED:case vb.FAILED_PRECONDITION:case vb.ABORTED:case vb.OUT_OF_RANGE:case vb.UNIMPLEMENTED:case vb.DATA_LOSS:return!0;default:return Eb()}}function L_(e){if(void 0===e)return _b("GRPC error has no .code"),vb.UNKNOWN;switch(e){case A_.OK:return vb.OK;case A_.CANCELLED:return vb.CANCELLED;case A_.UNKNOWN:return vb.UNKNOWN;case A_.DEADLINE_EXCEEDED:return vb.DEADLINE_EXCEEDED;case A_.RESOURCE_EXHAUSTED:return vb.RESOURCE_EXHAUSTED;case A_.INTERNAL:return vb.INTERNAL;case A_.UNAVAILABLE:return vb.UNAVAILABLE;case A_.UNAUTHENTICATED:return vb.UNAUTHENTICATED;case A_.INVALID_ARGUMENT:return vb.INVALID_ARGUMENT;case A_.NOT_FOUND:return vb.NOT_FOUND;case A_.ALREADY_EXISTS:return vb.ALREADY_EXISTS;case A_.PERMISSION_DENIED:return vb.PERMISSION_DENIED;case A_.FAILED_PRECONDITION:return vb.FAILED_PRECONDITION;case A_.ABORTED:return vb.ABORTED;case A_.OUT_OF_RANGE:return vb.OUT_OF_RANGE;case A_.UNIMPLEMENTED:return vb.UNIMPLEMENTED;case A_.DATA_LOSS:return vb.DATA_LOSS;default:return Eb()}}(P_=A_||(A_={}))[P_.OK=0]="OK",P_[P_.CANCELLED=1]="CANCELLED",P_[P_.UNKNOWN=2]="UNKNOWN",P_[P_.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",P_[P_.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",P_[P_.NOT_FOUND=5]="NOT_FOUND",P_[P_.ALREADY_EXISTS=6]="ALREADY_EXISTS",P_[P_.PERMISSION_DENIED=7]="PERMISSION_DENIED",P_[P_.UNAUTHENTICATED=16]="UNAUTHENTICATED",P_[P_.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",P_[P_.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",P_[P_.ABORTED=10]="ABORTED",P_[P_.OUT_OF_RANGE=11]="OUT_OF_RANGE",P_[P_.UNIMPLEMENTED=12]="UNIMPLEMENTED",P_[P_.INTERNAL=13]="INTERNAL",P_[P_.UNAVAILABLE=14]="UNAVAILABLE",P_[P_.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var j_=function(){function e(e,t){this.comparator=e,this.root=t||F_.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,F_.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,F_.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new B_(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new B_(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new B_(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new B_(this.root,e,this.comparator,!0)},e}(),B_=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),F_=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Eb();if(this.right.isRed())throw Eb();var e=this.left.check();if(e!==this.right.check())throw Eb();return e+(this.isRed()?0:1)},e}();F_.EMPTY=null,F_.RED=!0,F_.BLACK=!1,F_.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw Eb()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw Eb()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw Eb()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw Eb()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw Eb()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new F_(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var U_=function(){function e(e){this.comparator=e,this.data=new j_(this.comparator)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new q_(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new q_(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),q_=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),z_=new j_($b.comparator);function V_(){return z_}var W_=new j_($b.comparator);function H_(){return W_}var K_=new j_($b.comparator);function G_(){return K_}var Y_=new U_($b.comparator);function Q_(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Y_,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var J_=new U_(xb);function Z_(){return J_}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X_=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,$_.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Rb.min(),r,Z_(),V_(),Q_())},e}(),$_=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(zb.EMPTY_BYTE_STRING,n,Q_(),Q_(),Q_())},e}(),ek=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},tk=function(e,t){this.targetId=e,this.V=t},nk=function(e,t,n,r){void 0===n&&(n=zb.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},rk=function(){function e(){this.S=0,this.D=ak(),this.C=zb.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),e.prototype.O=function(e){e.approximateByteSize()>0&&(this.k=!0,this.C=e)},e.prototype.M=function(){var e=Q_(),t=Q_(),n=Q_();return this.D.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Eb()}})),new $_(this.C,this.N,e,t,n)},e.prototype.L=function(){this.k=!1,this.D=ak()},e.prototype.B=function(e,t){this.k=!0,this.D=this.D.insert(e,t)},e.prototype.q=function(e){this.k=!0,this.D=this.D.remove(e)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.k=!0,this.N=!0},e}(),ik=function(){function e(e){this.W=e,this.G=new Map,this.H=V_(),this.J=ok(),this.Y=new U_(xb)}return e.prototype.X=function(e){for(var t=0,n=e.v;t<n.length;t++){var r=n[t];e.P&&e.P.isFoundDocument()?this.Z(r,e.P):this.tt(r,e.key,e.P)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,e.key,e.P)},e.prototype.et=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.nt(n);switch(e.state){case 0:t.st(n)&&r.O(e.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(e.resumeToken);break;case 2:r.K(),r.F||t.removeTarget(n);break;case 3:t.st(n)&&(r.j(),r.O(e.resumeToken));break;case 4:t.st(n)&&(t.it(n),r.O(e.resumeToken));break;default:Eb()}}))},e.prototype.forEachTarget=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach((function(e,r){n.st(r)&&t(r)}))},e.prototype.rt=function(e){var t=e.targetId,n=e.V.count,r=this.ot(t);if(r){var i=r.target;if(_w(i))if(0===n){var o=new $b(i.path);this.tt(t,o,vw.newNoDocument(o,Rb.min()))}else Mb(1===n);else this.ct(t)!==n&&(this.it(t),this.Y=this.Y.add(t))}},e.prototype.ut=function(e){var t=this,n=new Map;this.G.forEach((function(r,i){var o=t.ot(i);if(o){if(r.current&&_w(o.target)){var a=new $b(o.target.path);null!==t.H.get(a)||t.at(i,a)||t.tt(i,a,vw.newNoDocument(a,e))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Q_();this.J.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.ot(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new X_(e,n,this.Y,this.H,r);return this.H=V_(),this.J=ok(),this.Y=new U_(xb),i},e.prototype.Z=function(e,t){if(this.st(e)){var n=this.at(e,t.key)?2:0;this.nt(e).B(t.key,n),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}},e.prototype.tt=function(e,t,n){if(this.st(e)){var r=this.nt(e);this.at(e,t)?r.B(t,1):r.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),n&&(this.H=this.H.insert(t,n))}},e.prototype.removeTarget=function(e){this.G.delete(e)},e.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.U=function(e){this.nt(e).U()},e.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new rk,this.G.set(e,t)),t},e.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new U_(xb),this.J=this.J.insert(e,t)),t},e.prototype.st=function(e){var t=null!==this.ot(e);return t||wb("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.ot=function(e){var t=this.G.get(e);return t&&t.F?null:this.W.lt(e)},e.prototype.it=function(e){var t=this;this.G.set(e,new rk),this.W.getRemoteKeysForTarget(e).forEach((function(n){t.tt(e,n,null)}))},e.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},e}();function ok(){return new j_($b.comparator)}function ak(){return new j_($b.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sk={asc:"ASCENDING",desc:"DESCENDING"},uk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ck=function(e,t){this.databaseId=e,this.I=t};function lk(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function hk(e,t){return e.I?t.toBase64():t.toUint8Array()}function fk(e,t){return lk(e,t.toTimestamp())}function dk(e){return Mb(!!e),Rb.fromTimestamp((t=Wb(e),new Ob(t.seconds,t.nanos)));var t}function pk(e,t){return(n=e,new Bb(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function mk(e){var t=Bb.fromString(e);return Mb(Fk(t)),t}function vk(e,t){return pk(e.databaseId,t.path)}function gk(e,t){var n=mk(t);if(n.get(1)!==e.databaseId.projectId)throw new gb(vb.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new gb(vb.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new $b(_k(n))}function yk(e,t){return pk(e.databaseId,t)}function bk(e){var t=mk(e);return 4===t.length?Bb.emptyPath():_k(t)}function wk(e){return new Bb(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function _k(e){return Mb(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function kk(e,t,n){return{name:vk(e,t),fields:n.value.mapValue.fields}}function Sk(e,t,n){var r=gk(e,t.name),i=dk(t.updateTime),o=new pw({mapValue:{fields:t.fields}}),a=vw.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ek(e,t){var n,r,i;if(t instanceof M_)n={update:kk(e,t.key,t.value)};else if(t instanceof O_)n={delete:vk(e,t.key)};else if(t instanceof T_)n={update:kk(e,t.key,t.data),updateMask:Bk(t.fieldMask)};else{if(!(t instanceof R_))return Eb();n={verify:vk(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof s_)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof u_)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof l_)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof f_)return{fieldPath:t.field.canonicalString(),increment:n.A};throw Eb()}(0,e)}))),t.precondition.isNone||(n.currentDocument=(r=e,void 0!==(i=t.precondition).updateTime?{updateTime:fk(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Eb())),n}function Mk(e,t){var n,r=t.currentDocument?void 0!==(n=t.currentDocument).updateTime?g_.updateTime(dk(n.updateTime)):void 0!==n.exists?g_.exists(n.exists):g_.none():g_.none(),i=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Mb("REQUEST_TIME"===t.setToServerValue),n=new s_;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new u_(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new l_(i)}else"increment"in t?n=new f_(e,t.increment):Eb();var o=Ub.fromServerFormat(t.fieldPath);return new m_(o,n)}(e,t)})):[];if(t.update){t.update.name;var o=gk(e,t.update.name),a=new pw({mapValue:{fields:t.update.fields}});if(t.updateMask){var s=function(e){var t=e.fieldPaths||[];return new qb(t.map((function(e){return Ub.fromServerFormat(e)})))}(t.updateMask);return new T_(o,a,s,r,i)}return new M_(o,a,r,i)}if(t.delete){var u=gk(e,t.delete);return new O_(u,r)}if(t.verify){var c=gk(e,t.verify);return new R_(c,r)}return Eb()}function Tk(e,t){return{documents:[yk(e,t.path)]}}function Ck(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=yk(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=yk(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(hw(e.value))return{unaryFilter:{field:Dk(e.field),op:"IS_NAN"}};if(lw(e.value))return{unaryFilter:{field:Dk(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(hw(e.value))return{unaryFilter:{field:Dk(e.field),op:"IS_NOT_NAN"}};if(lw(e.value))return{unaryFilter:{field:Dk(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dk(e.field),op:Rk(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return{field:Dk((t=e).field),direction:Ok(t.dir)};var t}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a,s,u=(a=e,s=t.limit,a.I||Jb(s)?s:{value:s});return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt=Ak(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Ak(t.endAt)),n}function Ik(e){var t=bk(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Mb(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=xk(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return new Rw(Nk((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t})));var u,c,l=null;n.limit&&(u=n.limit,l=Jb(c="object"==typeof u?u.value:u)?null:c);var h=null;n.startAt&&(h=Pk(n.startAt));var f=null;return n.endAt&&(f=Pk(n.endAt)),Bw(t,i,s,a,l,"F",h,f)}function xk(e){return e?void 0!==e.unaryFilter?[jk(e)]:void 0!==e.fieldFilter?[Lk(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return xk(e)})).reduce((function(e,t){return e.concat(t)})):Eb():[]}function Ak(e){return{before:e.before,values:e.position}}function Pk(e){var t=!!e.before,n=e.values||[];return new Pw(n,t)}function Ok(e){return sk[e]}function Rk(e){return uk[e]}function Dk(e){return{fieldPath:e.canonicalString()}}function Nk(e){return Ub.fromServerFormat(e.fieldPath)}function Lk(e){return kw.create(Nk(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Eb()}}(e.fieldFilter.op),e.fieldFilter.value)}function jk(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Nk(e.unaryFilter.field);return kw.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Nk(e.unaryFilter.field);return kw.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Nk(e.unaryFilter.field);return kw.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Nk(e.unaryFilter.field);return kw.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Eb()}}function Bk(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Fk(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=zk(t)),t=qk(e.get(n),t);return zk(t)}function qk(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function zk(e){return e+""}function Vk(e){var t=e.length;if(Mb(t>=2),2===t)return Mb(""===e.charAt(0)&&""===e.charAt(1)),Bb.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("",o);switch((a<0||a>n)&&Eb(),e.charAt(a+1)){case"":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=e.substring(o,a),i+="\0";break;case"":i+=e.substring(o,a+1);break;default:Eb()}o=a+2}return new Bb(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wk=function(e,t){this.seconds=e,this.nanoseconds=t},Hk=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};Hk.store="owner",Hk.key="owner";var Kk=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};Kk.store="mutationQueues",Kk.keyPath="userId";var Gk=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Gk.store="mutations",Gk.keyPath="batchId",Gk.userMutationsIndex="userMutationsIndex",Gk.userMutationsKeyPath=["userId","batchId"];var Yk=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,Uk(t)]},e.key=function(e,t,n){return[e,Uk(t),n]},e}();Yk.store="documentMutations",Yk.PLACEHOLDER=new Yk;var Qk=function(e,t){this.path=e,this.readTime=t},Jk=function(e,t){this.path=e,this.version=t},Zk=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Zk.store="remoteDocuments",Zk.readTimeIndex="readTimeIndex",Zk.readTimeIndexPath="readTime",Zk.collectionReadTimeIndex="collectionReadTimeIndex",Zk.collectionReadTimeIndexPath=["parentPath","readTime"];var Xk=function(e){this.byteSize=e};Xk.store="remoteDocumentGlobal",Xk.key="remoteDocumentGlobalKey";var $k=function(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};$k.store="targets",$k.keyPath="targetId",$k.queryTargetsIndexName="queryTargetsIndex",$k.queryTargetsKeyPath=["canonicalId","targetId"];var eS=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};eS.store="targetDocuments",eS.keyPath=["targetId","path"],eS.documentTargetsIndex="documentTargetsIndex",eS.documentTargetsKeyPath=["path","targetId"];var tS=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};tS.key="targetGlobalKey",tS.store="targetGlobal";var nS=function(e,t){this.collectionId=e,this.parent=t};nS.store="collectionParents",nS.keyPath=["collectionId","parent"];var rS=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};rS.store="clientMetadata",rS.keyPath="clientId";var iS=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};iS.store="bundles",iS.keyPath="bundleId";var oS=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};oS.store="namedQueries",oS.keyPath="name";var aS=tm(tm([],tm(tm([],tm(tm([],tm(tm([],[Kk.store,Gk.store,Yk.store,Zk.store,$k.store,Hk.store,tS.store,eS.store]),[rS.store])),[Xk.store])),[nS.store])),[iS.store,oS.store]),sS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",uS=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),cS=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},lS=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&Eb(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),hS=function(){function e(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new cS,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){t.error?n.ft.reject(new pS(e,t.error)):n.ft.resolve()},this.transaction.onerror=function(t){var r=bS(t.target.error);n.ft.reject(new pS(e,r))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(e){throw new pS(n,e)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(wb("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return new vS(t)},e}(),fS=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,12.2===e._t(bn.getUA())&&_b("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(e){return wb("SimpleDb","Removing database:",e),gS(window.indexedDB.deleteDatabase(e)).toPromise()},e.yt=function(){if("undefined"==typeof indexedDB)return!1;if(e.gt())return!0;var t=bn.getUA(),n=e._t(t),r=0<n&&n<10,i=e.Et(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.gt=function(){var e;return void 0!==nu&&"YES"===(null===(e=nu.env)||void 0===e?void 0:e.Tt)},e.It=function(e,t){return e.store(t)},e._t=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.Et=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.At=function(e){return $p(this,void 0,void 0,(function(){var t,n=this;return em(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(wb("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(e){var n=e.target.result;t(n)},i.onblocked=function(){r(new pS(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;"VersionError"===n.name?r(new gb(vb.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new pS(e,n))},i.onupgradeneeded=function(e){wb("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.wt.Rt(t,i.transaction,e.oldVersion,n.version).next((function(){wb("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(e){return n.bt(e)}),this.db)]}}))}))},e.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},e.prototype.runTransaction=function(e,t,n,r){return $p(this,void 0,void 0,(function(){var i,o,a,s,u;return em(this,(function(c){switch(c.label){case 0:i="readonly"===t,o=0,a=function(){var t,a,u,c,l;return em(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.At(e)];case 2:return s.db=h.sent(),t=hS.open(s.db,e,i?"readonly":"readwrite",n),a=r(t).catch((function(e){return t.abort(e),lS.reject(e)})).toPromise(),u={},a.catch((function(){})),[4,t.dt];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,wb("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),dS=function(){function e(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(e){this.St=e},e.prototype.delete=function(){return gS(this.Pt.delete())},e}(),pS=function(e){function t(t,n){var r=this;return(r=e.call(this,vb.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Xp(t,e),t}(gb);function mS(e){return"IndexedDbTransactionError"===e.name}var vS=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(wb("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(wb("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),gS(n)},e.prototype.add=function(e){return wb("SimpleDb","ADD",this.store.name,e,e),gS(this.store.add(e))},e.prototype.get=function(e){var t=this;return gS(this.store.get(e)).next((function(n){return void 0===n&&(n=null),wb("SimpleDb","GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return wb("SimpleDb","DELETE",this.store.name,e),gS(this.store.delete(e))},e.prototype.count=function(){return wb("SimpleDb","COUNT",this.store.name),gS(this.store.count())},e.prototype.Nt=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.xt(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.kt=function(e,t){wb("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(e,t,n){return n.delete()}))},e.prototype.$t=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.xt(r,t)},e.prototype.Ot=function(e){var t=this.cursor({});return new lS((function(n,r){t.onerror=function(e){var t=bS(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.xt=function(e,t){var n=[];return new lS((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new dS(i),a=t(i.primaryKey,i.value,o);if(a instanceof lS){var s=a.catch((function(e){return o.done(),lS.reject(e)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return lS.waitFor(n)}))},e.prototype.options=function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Ft?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function gS(e){return new lS((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=bS(e.target.error);n(t)}}))}var yS=!1;function bS(e){var t=fS._t(bn.getUA());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new gb("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return yS||(yS=!0,setTimeout((function(){throw r}),0)),r}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wS=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Mt=t,r.currentSequenceNumber=n,r}return Xp(t,e),t}(uS);function _S(e,t){var n=Tb(e);return fS.It(n.Mt,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kS=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}return e.prototype.applyToRemoteDocument=function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&w_(i,e,n[r])}},e.prototype.applyToLocalView=function(e){for(var t=0,n=this.baseMutations;t<n.length;t++)(o=n[t]).key.isEqual(e.key)&&__(o,e,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(e.key)&&__(o,e,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Rb.min())}))},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Q_())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&Ab(this.mutations,e.mutations,(function(e,t){return S_(e,t)}))&&Ab(this.baseMutations,e.baseMutations,(function(e,t){return S_(e,t)}))},e}(),SS=function(){function e(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}return e.from=function(t,n,r){Mb(t.mutations.length===r.length);for(var i=G_(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)},e}(),ES=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=Rb.min()),void 0===o&&(o=Rb.min()),void 0===a&&(a=zb.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),MS=function(e){this.Lt=e};function TS(e,t){if(t.document)return Sk(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=$b.fromSegments(t.noDocument.path),r=PS(t.noDocument.readTime),i=vw.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=$b.fromSegments(t.unknownDocument.path);return r=PS(t.unknownDocument.version),vw.newUnknownDocument(o,r)}return Eb()}function CS(e,t,n){var r,i,o=IS(n),a=t.key.path.popLast().toArray();if(t.isFoundDocument()){var s={name:vk(r=e.Lt,(i=t).key),fields:i.data.value.mapValue.fields,updateTime:lk(r,i.version.toTimestamp())},u=t.hasCommittedMutations;return new Zk(null,null,s,u,o,a)}if(t.isNoDocument()){var c=t.key.path.toArray(),l=AS(t.version);return u=t.hasCommittedMutations,new Zk(null,new Qk(c,l),null,u,o,a)}if(t.isUnknownDocument()){var h=t.key.path.toArray(),f=AS(t.version);return new Zk(new Jk(h,f),null,null,!0,o,a)}return Eb()}function IS(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function xS(e){var t=new Ob(e[0],e[1]);return Rb.fromTimestamp(t)}function AS(e){var t=e.toTimestamp();return new Wk(t.seconds,t.nanoseconds)}function PS(e){var t=new Ob(e.seconds,e.nanoseconds);return Rb.fromTimestamp(t)}function OS(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Mk(e.Lt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map((function(t){return Mk(e.Lt,t)})),s=Ob.fromMillis(t.localWriteTimeMs);return new kS(t.batchId,s,n,a)}function RS(e){var t,n,r=PS(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?PS(e.lastLimboFreeSnapshotVersion):Rb.min();return void 0!==e.query.documents?(Mb(1===(n=e.query).documents.length),t=Kw(Fw(bk(n.documents[0])))):t=Kw(Ik(e.query)),new ES(t,e.targetId,0,e.lastListenSequenceNumber,r,i,zb.fromBase64String(e.resumeToken))}function DS(e,t){var n,r=AS(t.snapshotVersion),i=AS(t.lastLimboFreeSnapshotVersion);n=_w(t.target)?Tk(e.Lt,t.target):Ck(e.Lt,t.target);var o=t.resumeToken.toBase64();return new $k(t.targetId,bw(t.target),r,o,t.sequenceNumber,i,n)}function NS(e){var t=Ik({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Gw(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LS=function(){function e(){}return e.prototype.getBundleMetadata=function(e,t){return jS(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:PS(t.createTime),version:t.version};var t}))},e.prototype.saveBundleMetadata=function(e,t){var n;return jS(e).put({bundleId:(n=t).id,createTime:AS(dk(n.createTime)),version:n.version})},e.prototype.getNamedQuery=function(e,t){return BS(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:NS(t.bundledQuery),readTime:PS(t.readTime)};var t}))},e.prototype.saveNamedQuery=function(e,t){return BS(e).put({name:(n=t).name,readTime:AS(dk(n.readTime)),bundledQuery:n.bundledQuery});var n},e}();function jS(e){return _S(e,iS.store)}function BS(e){return _S(e,oS.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FS=function(){function e(){this.Bt=new US}return e.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),lS.resolve()},e.prototype.getCollectionParents=function(e,t){return lS.resolve(this.Bt.getEntries(t))},e}(),US=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new U_(Bb.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new U_(Bb.comparator)).toArray()},e}(),qS=function(){function e(){this.qt=new US}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(!this.qt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.qt.add(t)}));var o={collectionId:r,parent:Uk(i)};return zS(e).put(o)}return lS.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Pb(t),""],!1,!0);return zS(e).Nt(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(Vk(o.parent))}return n}))},e}();function zS(e){return _S(e,nS.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var VS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WS=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(e,t,n){var r=e.store(Gk.store),i=e.store(Yk.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){Mb(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Yk.key(t,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return lS.waitFor(o).next((function(){return c}))}function KS(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Eb();t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */WS.DEFAULT_COLLECTION_PERCENTILE=10,WS.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,WS.DEFAULT=new WS(41943040,WS.DEFAULT_COLLECTION_PERCENTILE,WS.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),WS.DISABLED=new WS(-1,0,0);var GS=function(){function e(e,t,n,r){this.userId=e,this.R=t,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return e.Qt=function(t,n,r,i){return Mb(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return QS(e).$t({index:Gk.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=JS(e),a=QS(e);return a.add({}).next((function(s){Mb("number"==typeof s);for(var u=new kS(s,t,n,r),c=function(e,t,n){var r=n.baseMutations.map((function(t){return Ek(e.Lt,t)})),i=n.mutations.map((function(t){return Ek(e.Lt,t)}));return new Gk(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new U_((function(e,t){return xb(e.canonicalString(),t.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],m=Yk.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(m,Yk.PLACEHOLDER))}return h.forEach((function(t){l.push(i.Ut.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),lS.waitFor(l).next((function(){return u}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return QS(e).get(t).next((function(e){return e?(Mb(e.userId===n.userId),OS(n.R,e)):null}))},e.prototype.jt=function(e,t){var n=this;return this.Kt[t]?lS.resolve(this.Kt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Kt[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return QS(e).$t({index:Gk.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(Mb(t.batchId>=r),o=OS(n.R,t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return QS(e).$t({index:Gk.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return QS(e).Nt(Gk.userMutationsIndex,n).next((function(e){return e.map((function(e){return OS(t.R,e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=Yk.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return JS(e).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Vk(u);if(s===n.userId&&t.path.isEqual(l))return QS(e).get(c).next((function(e){if(!e)throw Eb();Mb(e.userId===n.userId),o.push(OS(n.R,e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new U_(xb),i=[];return t.forEach((function(t){var o=Yk.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=JS(e).$t({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],c=Vk(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),lS.waitFor(i).next((function(){return n.Wt(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this,r=t.path,i=r.length+1,o=Yk.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new U_(xb);return JS(e).$t({range:a},(function(e,t,o){var a=e[0],u=e[1],c=e[2],l=Vk(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(e,s)}))},e.prototype.Wt=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(QS(e).get(t).next((function(e){if(null===e)throw Eb();Mb(e.userId===n.userId),r.push(OS(n.R,e))})))})),lS.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return HS(e.Mt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Gt(t.batchId)})),lS.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))},e.prototype.Gt=function(e){delete this.Kt[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return lS.resolve();var r=IDBKeyRange.lowerBound(Yk.prefixForUser(t.userId)),i=[];return JS(e).$t({range:r},(function(e,n,r){if(e[0]===t.userId){var o=Vk(e[1]);i.push(o)}else r.done()})).next((function(){Mb(0===i.length)}))}))},e.prototype.containsKey=function(e,t){return YS(e,this.userId,t)},e.prototype.zt=function(e){var t=this;return ZS(e).get(this.userId).next((function(e){return e||new Kk(t.userId,-1,"")}))},e}();function YS(e,t,n){var r=Yk.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return JS(e).$t({range:o,Ft:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function QS(e){return _S(e,Gk.store)}function JS(e){return _S(e,Yk.store)}function ZS(e){return _S(e,Kk.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var XS=function(){function e(e){this.Ht=e}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),$S=function(){function e(e,t){this.referenceDelegate=e,this.R=t}return e.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next((function(n){var r=new XS(n.highestTargetId);return n.highestTargetId=r.next(),t.Zt(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next((function(e){return Rb.fromTimestamp(new Ob(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next((function(e){return e.highestListenSequenceNumber}))},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.Xt(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Zt(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.te(e,t).next((function(){return n.Xt(e).next((function(r){return r.targetCount+=1,n.ee(t,r),n.Zt(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.te(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return eE(e).delete(t.targetId)})).next((function(){return n.Xt(e)})).next((function(t){return Mb(t.targetCount>0),t.targetCount-=1,n.Zt(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return eE(e).$t((function(a,s){var u=RS(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return lS.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){return eE(e).$t((function(e,n){var r=RS(n);t(r)}))},e.prototype.Xt=function(e){return tE(e).get(tS.key).next((function(e){return Mb(null!==e),e}))},e.prototype.Zt=function(e,t){return tE(e).put(tS.key,t)},e.prototype.te=function(e,t){return eE(e).put(DS(this.R,t))},e.prototype.ee=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.Xt(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=bw(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return eE(e).$t({range:r,index:$k.queryTargetsIndexName},(function(e,n,r){var o=RS(n);ww(t,o.target)&&(i=o,r.done())})).next((function(){return i}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=nE(e);return t.forEach((function(t){var a=Uk(t.path);i.push(o.put(new eS(n,a))),i.push(r.referenceDelegate.addReference(e,n,t))})),lS.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=nE(e);return lS.forEach(t,(function(t){var o=Uk(t.path);return lS.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=nE(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=nE(e),i=Q_();return r.$t({range:n,Ft:!0},(function(e,t,n){var r=Vk(e[1]),o=new $b(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=Uk(t.path),r=IDBKeyRange.bound([n],[Pb(n)],!1,!0),i=0;return nE(e).$t({index:eS.documentTargetsIndex,Ft:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.lt=function(e,t){return eE(e).get(t).next((function(e){return e?RS(e):null}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(e){return _S(e,$k.store)}function tE(e){return _S(e,tS.store)}function nE(e){return _S(e,eS.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(e){return $p(this,void 0,void 0,(function(){return em(this,(function(t){if(e.code!==vb.FAILED_PRECONDITION||e.message!==sS)throw e;return wb("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=xb(n,i);return 0===a?xb(r,o):a}var oE=function(){function e(e){this.ne=e,this.buffer=new U_(iE),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(e){var t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();iE(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),aE=function(){function e(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}return e.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),e.prototype.ue=function(e){var t=this,n=this.oe?3e5:6e4;wb("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return $p(t,void 0,void 0,(function(){var t;return em(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return mS(t=n.sent())?(wb("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,rE(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return n.sent(),[2]}}))}))}))},e}(),sE=function(){function e(e,t){this.ae=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return lS.resolve(mb.o);var r=new oE(t);return this.ae.forEachTarget(e,(function(e){return r.re(e.sequenceNumber)})).next((function(){return n.ae.le(e,(function(e){return r.re(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.ae.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(wb("LruGarbageCollector","Garbage collection skipped; disabled"),lS.resolve(VS)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(wb("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),VS):n.fe(e,t)}))},e.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},e.prototype.fe=function(e,t){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(wb("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+t),r=c.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),bb()<=Pn.DEBUG&&wb("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+e+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),lS.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))},e}(),uE=function(){function e(e,t){this.db=e,this.garbageCollector=new sE(this,t)}return e.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.de=function(e){var t=0;return this.le(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.le=function(e,t){return this.we(e,(function(e,n){return t(n)}))},e.prototype.addReference=function(e,t,n){return cE(e,n)},e.prototype.removeReference=function(e,t,n){return cE(e,n)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.markPotentiallyOrphaned=function(e,t){return cE(e,t)},e.prototype._e=function(e,t){return r=t,i=!1,ZS(n=e).Ot((function(e){return YS(n,e,r).next((function(e){return e&&(i=!0),lS.resolve(!e)}))})).next((function(){return i}));var n,r,i},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(e,(function(a,s){if(s<=t){var u=n._e(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),nE(e).delete([0,Uk(a.path)])}))}));i.push(u)}})).next((function(){return lS.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return cE(e,t)},e.prototype.we=function(e,t){var n,r=nE(e),i=mb.o;return r.$t({index:eS.documentTargetsIndex},(function(e,r){var o=e[0];e[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==mb.o&&t(new $b(Vk(n)),i),i=s,n=a):i=mb.o})).next((function(){i!==mb.o&&t(new $b(Vk(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function cE(e,t){return nE(e).put((n=t,r=e.currentSequenceNumber,new eS(0,Uk(n.path),r)));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lE=function(){function e(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){Nb(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.isEmpty=function(){return Lb(this.inner)},e}(),hE=function(){function e(){this.changes=new lE((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return e.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:Rb.min()},e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},e.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:vw.newInvalidDocument(e),readTime:t})},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?lS.resolve(n.document):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){},e}(),fE=function(){function e(e,t){this.R=e,this.Ut=t}return e.prototype.addEntry=function(e,t,n){return mE(e).put(vE(t),n)},e.prototype.removeEntry=function(e,t){var n=mE(e),r=vE(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.me(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return mE(e).get(vE(t)).next((function(e){return n.ye(t,e)}))},e.prototype.ge=function(e,t){var n=this;return mE(e).get(vE(t)).next((function(e){return{document:n.ye(t,e),size:KS(e)}}))},e.prototype.getEntries=function(e,t){var n=this,r=V_();return this.pe(e,t,(function(e,t){var i=n.ye(e,t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.Ee=function(e,t){var n=this,r=V_(),i=new j_($b.comparator);return this.pe(e,t,(function(e,t){var o=n.ye(e,t);r=r.insert(e,o),i=i.insert(e,KS(t))})).next((function(){return{documents:r,Te:i}}))},e.prototype.pe=function(e,t,n){if(t.isEmpty())return lS.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return mE(e).$t({range:r},(function(e,t,r){for(var a=$b.fromSegments(e);o&&$b.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this,i=V_(),o=t.path.length+1,a={};if(n.isEqual(Rb.min())){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=IS(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Zk.collectionReadTimeIndex}return mE(e).$t(a,(function(e,n,a){if(e.length===o){var s=TS(r.R,n);t.path.isPrefixOf(s.key.path)?Zw(t,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.newChangeBuffer=function(e){return new dE(this,!!e&&e.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return pE(e).get(Xk.key).next((function(e){return Mb(!!e),e}))},e.prototype.me=function(e,t){return pE(e).put(Xk.key,t)},e.prototype.ye=function(e,t){if(t){var n=TS(this.R,t);if(!n.isNoDocument()||!n.version.isEqual(Rb.min()))return n}return vw.newInvalidDocument(e)},e}(),dE=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Ie=t,r.trackRemovals=n,r.Ae=new lE((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),r}return Xp(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new U_((function(e,t){return xb(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.Ae.get(o);if(a.document.isValidDocument()){var u=CS(t.Ie.R,a.document,t.getReadTime(o));i=i.add(o.path.popLast());var c=KS(u);r+=c-s,n.push(t.Ie.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=CS(t.Ie.R,vw.newNoDocument(o,Rb.min()),t.getReadTime(o));n.push(t.Ie.addEntry(e,o,l))}else n.push(t.Ie.removeEntry(e,o))})),i.forEach((function(r){n.push(t.Ie.Ut.addToCollectionParentIndex(e,r))})),n.push(this.Ie.updateMetadata(e,r)),lS.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.Ie.ge(e,t).next((function(e){return n.Ae.set(t,e.size),e.document}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.Ie.Ee(e,t).next((function(e){var t=e.documents;return e.Te.forEach((function(e,t){n.Ae.set(e,t)})),t}))},t}(hE);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(e){return _S(e,Xk.store)}function mE(e){return _S(e,Zk.store)}function vE(e){return e.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gE=function(){function e(e){this.R=e}return e.prototype.Rt=function(e,t,n,r){var i=this;Mb(n<r&&n>=0&&r<=11);var o=new hS("createOrUpgrade",t);n<1&&r>=1&&(e.createObjectStore(Hk.store),function(e){e.createObjectStore(Kk.store,{keyPath:Kk.keyPath}),e.createObjectStore(Gk.store,{keyPath:Gk.keyPath,autoIncrement:!0}).createIndex(Gk.userMutationsIndex,Gk.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Yk.store)}(e),yE(e),function(e){e.createObjectStore(Zk.store)}(e));var a=lS.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(eS.store),e.deleteObjectStore($k.store),e.deleteObjectStore(tS.store)}(e),yE(e)),a=a.next((function(){return function(e){var t=e.store(tS.store),n=new tS(0,0,Rb.min().toTimestamp(),0);return t.put(tS.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(Gk.store).Nt().next((function(n){e.deleteObjectStore(Gk.store),e.createObjectStore(Gk.store,{keyPath:Gk.keyPath,autoIncrement:!0}).createIndex(Gk.userMutationsIndex,Gk.userMutationsKeyPath,{unique:!0});var r=t.store(Gk.store),i=n.map((function(e){return r.put(e)}));return lS.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(rS.store,{keyPath:rS.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(Xk.store)}(e),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(e,o)}))),n<9&&r>=9&&(a=a.next((function(){(function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")})(e),function(e){var t=e.objectStore(Zk.store);t.createIndex(Zk.readTimeIndex,Zk.readTimeIndexPath,{unique:!1}),t.createIndex(Zk.collectionReadTimeIndex,Zk.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){(function(e){e.createObjectStore(iS.store,{keyPath:iS.keyPath})})(e),function(e){e.createObjectStore(oS.store,{keyPath:oS.keyPath})}(e)}))),a},e.prototype.be=function(e){var t=0;return e.store(Zk.store).$t((function(e,n){t+=KS(n)})).next((function(){var n=new Xk(t);return e.store(Xk.store).put(Xk.key,n)}))},e.prototype.Re=function(e){var t=this,n=e.store(Kk.store),r=e.store(Gk.store);return n.Nt().next((function(n){return lS.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Gk.userMutationsIndex,i).next((function(r){return lS.forEach(r,(function(r){Mb(r.userId===n.userId);var i=OS(t.R,r);return HS(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ve=function(e){var t=e.store(eS.store),n=e.store(Zk.store);return e.store(tS.store).get(tS.key).next((function(e){var r=[];return n.$t((function(n,i){var o=new Bb(n),a=[0,Uk(o)];r.push(t.get(a).next((function(n){return n?lS.resolve():(r=o,t.put(new eS(0,Uk(r),e.highestListenSequenceNumber)));var r})))})).next((function(){return lS.waitFor(r)}))}))},e.prototype.Pe=function(e,t){e.createObjectStore(nS.store,{keyPath:nS.keyPath});var n=t.store(nS.store),r=new US,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Uk(i)})}};return t.store(Zk.store).$t({Ft:!0},(function(e,t){var n=new Bb(e);return i(n.popLast())})).next((function(){return t.store(Yk.store).$t({Ft:!0},(function(e,t){e[0];var n=e[1];e[2];var r=Vk(n);return i(r.popLast())}))}))},e.prototype.Ve=function(e){var t=this,n=e.store($k.store);return n.$t((function(e,r){var i=RS(r),o=DS(t.R,i);return n.put(o)}))},e}();function yE(e){e.createObjectStore(eS.store,{keyPath:eS.keyPath}).createIndex(eS.documentTargetsIndex,eS.documentTargetsKeyPath,{unique:!0}),e.createObjectStore($k.store,{keyPath:$k.keyPath}).createIndex($k.queryTargetsIndexName,$k.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(tS.store)}var bE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",wE=function(){function e(t,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(e){return Promise.resolve()},!e.yt())throw new gb(vb.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");var h,f;this.referenceDelegate=new uE(this,i),this.Le=n+"main",this.R=new MS(u),this.Be=new fS(this.Le,11,new gE(this.R)),this.qe=new $S(this.referenceDelegate,this.R),this.Ut=new qS,this.Ue=(h=this.R,f=this.Ut,new fE(h,f)),this.Ke=new LS,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&_b("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var e=this;return this.je().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new gb(vb.FAILED_PRECONDITION,bE);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.qe.getHighestSequenceNumber(t)}))})).then((function(t){e.Ne=new mb(t,e.De)})).then((function(){e.xe=!0})).catch((function(t){return e.Be&&e.Be.close(),Promise.reject(t)}))},e.prototype.He=function(e){var t=this;return this.Me=function(n){return $p(t,void 0,void 0,(function(){return em(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt((function(n){return $p(t,void 0,void 0,(function(){return em(this,(function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget((function(){return $p(t,void 0,void 0,(function(){return em(this,(function(e){switch(e.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return kE(t).put(new rS(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Je(t).next((function(t){t||(e.isPrimary=!1,e.Se.enqueueRetryable((function(){return e.Me(!1)})))}))})).next((function(){return e.Ye(t)})).next((function(n){return e.isPrimary&&!n?e.Xe(t).next((function(){return!1})):!!n&&e.Ze(t).next((function(){return!0}))}))})).catch((function(t){if(mS(t))return wb("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return wb("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Se.enqueueRetryable((function(){return e.Me(t)})),e.isPrimary=t}))},e.prototype.Je=function(e){var t=this;return _E(e).get(Hk.key).next((function(e){return lS.resolve(t.tn(e))}))},e.prototype.en=function(e){return kE(e).delete(this.clientId)},e.prototype.nn=function(){return $p(this,void 0,void 0,(function(){var e,t,n,r,i=this;return em(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=_S(e,rS.store);return t.Nt().next((function(e){var n=i.rn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return lS.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=o.sent(),this.Qe)for(t=0,n=e;t<n.length;t++)r=n[t],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},e.prototype.ze=function(){var e=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.je().then((function(){return e.nn()})).then((function(){return e.ze()}))}))},e.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.Ye=function(e){var t=this;return this.Ce?lS.resolve(!0):_E(e).get(Hk.key).next((function(n){if(null!==n&&t.sn(n.leaseTimestampMs,5e3)&&!t.cn(n.ownerId)){if(t.tn(n)&&t.networkEnabled)return!0;if(!t.tn(n)){if(!n.allowTabSynchronization)throw new gb(vb.FAILED_PRECONDITION,bE);return!1}}return!(!t.networkEnabled||!t.inForeground)||kE(e).Nt().next((function(e){return void 0===t.rn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&wb("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return $p(this,void 0,void 0,(function(){var e=this;return em(this,(function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Hk.store,rS.store],(function(t){var n=new wS(t,mb.o);return e.Xe(n).next((function(){return e.en(n)}))}))];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}}))}))},e.prototype.rn=function(e,t){var n=this;return e.filter((function(e){return n.sn(e.updateTimeMs,t)&&!n.cn(e.clientId)}))},e.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return kE(t).Nt().next((function(t){return e.rn(t,18e5).map((function(e){return e.clientId}))}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(e){return GS.Qt(e,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;wb("IndexedDbPersistence","Starting transaction:",e);var i,o="readonly"===t?"readonly":"readwrite";return this.Be.runTransaction(e,o,aS,(function(o){return i=new wS(o,r.Ne?r.Ne.next():mb.o),"readwrite-primary"===t?r.Je(i).next((function(e){return!!e||r.Ye(i)})).next((function(t){if(!t)throw _b("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new gb(vb.FAILED_PRECONDITION,sS);return n(i)})).next((function(e){return r.Ze(i).next((function(){return e}))})):r.dn(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.dn=function(e){var t=this;return _E(e).get(Hk.key).next((function(e){if(null!==e&&t.sn(e.leaseTimestampMs,5e3)&&!t.cn(e.ownerId)&&!t.tn(e)&&!(t.Ce||t.allowTabSynchronization&&e.allowTabSynchronization))throw new gb(vb.FAILED_PRECONDITION,bE)}))},e.prototype.Ze=function(e){var t=new Hk(this.clientId,this.allowTabSynchronization,Date.now());return _E(e).put(Hk.key,t)},e.yt=function(){return fS.yt()},e.prototype.Xe=function(e){var t=this,n=_E(e);return n.get(Hk.key).next((function(e){return t.tn(e)?(wb("IndexedDbPersistence","Releasing primary lease."),n.delete(Hk.key)):lS.resolve()}))},e.prototype.sn=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(_b("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){e.Se.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},e.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},e.prototype.Ge=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ke=function(){t.un(),bn.isSafari()&&navigator.appVersion.match("Version/14")&&t.Se.enterRestrictedMode(!0),t.Se.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},e.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},e.prototype.cn=function(e){var t;try{var n=null!==(null===(t=this.Qe)||void 0===t?void 0:t.getItem(this.on(e)));return wb("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(e){return _b("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},e.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(e){_b("Failed to set zombie client id.",e)}},e.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(e){}},e.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function _E(e){return _S(e,Hk.store)}function kE(e){return _S(e,rS.store)}function SE(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var EE=function(e,t){this.progress=e,this.wn=t},ME=function(){function e(e,t,n){this.Ue=e,this._n=t,this.Ut=n}return e.prototype.mn=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.yn(e,t,r)}))},e.prototype.yn=function(e,t,n){return this.Ue.getEntry(e,t).next((function(e){for(var t=0,r=n;t<r.length;t++)r[t].applyToLocalView(e);return e}))},e.prototype.gn=function(e,t){e.forEach((function(e,n){for(var r=0,i=t;r<i.length;r++)i[r].applyToLocalView(n)}))},e.prototype.pn=function(e,t){var n=this;return this.Ue.getEntries(e,t).next((function(t){return n.En(e,t).next((function(){return t}))}))},e.prototype.En=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.gn(t,e)}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return r=t,$b.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(e,t.path):Ww(t)?this.In(e,t,n):this.An(e,t,n);var r},e.prototype.Tn=function(e,t){return this.mn(e,new $b(t)).next((function(e){var t=H_();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))},e.prototype.In=function(e,t,n){var r=this,i=t.collectionGroup,o=H_();return this.Ut.getCollectionParents(e,i).next((function(a){return lS.forEach(a,(function(a){var s,u,c=(s=t,u=a.child(i),new jw(u,null,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt));return r.An(e,c,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.An=function(e,t,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.Rn(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=vw.newInvalidDocument(c),r=r.insert(c,l)),__(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(e,n){Zw(t,n)||(r=r.remove(e))})),r}))},e.prototype.Rn=function(e,t,n){for(var r=Q_(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof T_&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(e,r).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))},e}(),TE=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.bn=n,this.vn=r}return e.Pn=function(t,n){for(var r=Q_(),i=Q_(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),CE=function(){function e(){}return e.prototype.Vn=function(e){this.Sn=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var i,o=this;return 0===(i=t).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(Rb.min())?this.Dn(e,t):this.Sn.pn(e,r).next((function(i){var a=o.Cn(t,i);return(Uw(t)||qw(t))&&o.Nn(t.limitType,a,r,n)?o.Dn(e,t):(bb()<=Pn.DEBUG&&wb("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Jw(t)),o.Sn.getDocumentsMatchingQuery(e,t,n).next((function(e){return a.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.Cn=function(e,t){var n=new U_(Xw(e));return t.forEach((function(t,r){Zw(e,r)&&(n=n.add(r))})),n},e.prototype.Nn=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.Dn=function(e,t){return bb()<=Pn.DEBUG&&wb("QueryEngine","Using full collection scan to execute query:",Jw(t)),this.Sn.getDocumentsMatchingQuery(e,t,Rb.min())},e}(),IE=function(){function e(e,t,n,r){this.persistence=e,this.xn=t,this.R=r,this.kn=new j_(xb),this.Fn=new lE((function(e){return bw(e)}),ww),this.$n=Rb.min(),this._n=e.getMutationQueue(n),this.On=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new ME(this.On,this._n,this.persistence.getIndexManager()),this.Ke=e.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.kn)}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(e,t,n,r){return new IE(e,t,n,r)}function AE(e,t){return $p(this,void 0,void 0,(function(){var n,r,i,o;return em(this,(function(a){switch(a.label){case 0:return n=Tb(e),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(e){var o;return n._n.getAllMutationBatches(e).next((function(a){return o=a,r=n.persistence.getMutationQueue(t),i=new ME(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)})).next((function(t){for(var n=[],r=[],a=Q_(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=t;d<p.length;d++){var m=p[d];r.push(m.batchId);for(var v=0,g=m.mutations;v<g.length;v++){var y=g[v];a=a.add(y.key)}}return i.pn(e,a).next((function(e){return{Ln:e,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function PE(e,t){var n=Tb(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r,i,o,a,s,u,c,l=t.batch.keys(),h=n.On.newChangeBuffer({trackRemovals:!0});return(r=n,i=e,o=t,a=h,s=o.batch,u=s.keys(),c=lS.resolve(),u.forEach((function(e){c=c.next((function(){return a.getEntry(i,e)})).next((function(t){var n=o.docVersions.get(e);Mb(null!==n),t.version.compareTo(n)<0&&(s.applyToRemoteDocument(t,o),t.isValidDocument()&&a.addEntry(t,o.commitVersion))}))})),c.next((function(){return r._n.removeMutationBatch(i,s)}))).next((function(){return h.apply(e)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,l)}))}))}function OE(e){var t=Tb(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.qe.getLastRemoteSnapshotVersion(e)}))}function RE(e,t){var n=Tb(e),r=t.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var a=[];t.targetChanges.forEach((function(t,o){var s,u,c,l=i.get(o);if(l){a.push(n.qe.removeMatchingKeys(e,t.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(e,t.addedDocuments,o)})));var h=t.resumeToken;if(h.approximateByteSize()>0){var f=l.withResumeToken(h,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(o,f),s=l,c=t,Mb((u=f).resumeToken.approximateByteSize()>0),(0===s.resumeToken.approximateByteSize()||u.snapshotVersion.toMicroseconds()-s.snapshotVersion.toMicroseconds()>=3e8||c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size>0)&&a.push(n.qe.updateTargetData(e,f))}}}));var s=V_();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(DE(e,o,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual(Rb.min())){var u=n.qe.getLastRemoteSnapshotVersion(e).next((function(t){return n.qe.setTargetsMetadata(e,e.currentSequenceNumber,r)}));a.push(u)}return lS.waitFor(a).next((function(){return o.apply(e)})).next((function(){return n.Mn.En(e,s)})).next((function(){return s}))})).then((function(e){return n.kn=i,e}))}function DE(e,t,n,r,i){var o=Q_();return n.forEach((function(e){return o=o.add(e)})),t.getEntries(e,o).next((function(e){var o=V_();return n.forEach((function(n,a){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Rb.min())?(t.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a,u),o=o.insert(n,a)):wb("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function NE(e,t){var n=Tb(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n._n.getNextMutationBatchAfterBatchId(e,t)}))}function LE(e,t){var n=Tb(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.qe.getTargetData(e,t).next((function(i){return i?(r=i,lS.resolve(r)):n.qe.allocateTargetId(e).next((function(i){return r=new ES(t,i,0,e.currentSequenceNumber),n.qe.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.kn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(e.targetId,e),n.Fn.set(t,e.targetId)),e}))}function jE(e,t,n){return $p(this,void 0,void 0,(function(){var r,i,o,a;return em(this,(function(s){switch(s.label){case 0:r=Tb(e),i=r.kn.get(t),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(e){return r.persistence.referenceDelegate.removeTarget(e,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!mS(a=s.sent()))throw a;return wb("LocalStore","Failed to update sequence numbers for target "+t+": "+a),[3,5];case 5:return r.kn=r.kn.remove(t),r.Fn.delete(i.target),[2]}}))}))}function BE(e,t,n){var r=Tb(e),i=Rb.min(),o=Q_();return r.persistence.runTransaction("Execute query","readonly",(function(e){return(a=r,s=e,u=Kw(t),c=Tb(a),l=c.Fn.get(u),void 0!==l?lS.resolve(c.kn.get(l)):c.qe.getTargetData(s,u)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.xn.getDocumentsMatchingQuery(e,t,n?i:Rb.min(),n?o:Q_())})).next((function(e){return{documents:e,Bn:o}}));var a,s,u,c,l}))}function FE(e,t){var n=Tb(e),r=Tb(n.qe),i=n.kn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.lt(e,t).next((function(e){return e?e.target:null}))}))}function UE(e){var t=Tb(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return n=t.On,r=e,i=t.$n,o=Tb(n),a=V_(),s=IS(i),u=mE(r),c=IDBKeyRange.lowerBound(s,!0),u.$t({index:Zk.readTimeIndex,range:c},(function(e,t){var n=TS(o.R,t);a=a.insert(n.key,n),s=t.readTime})).next((function(){return{wn:a,readTime:xS(s)}}));var n,r,i,o,a,s,u,c})).then((function(e){var n=e.wn,r=e.readTime;return t.$n=r,n}))}function qE(e){return $p(this,void 0,void 0,(function(){var t;return em(this,(function(n){return[2,(t=Tb(e)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return t=mE(e),n=Rb.min(),t.$t({index:Zk.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=xS(t.readTime)),r.done()})).next((function(){return n}));var t,n})).then((function(e){t.$n=e}))]}))}))}function zE(e,t,n,r){return $p(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,f,d;return em(this,(function(p){switch(p.label){case 0:for(i=Tb(e),o=Q_(),a=V_(),s=G_(),u=0,c=n;u<c.length;u++)l=c[u],h=t.qn(l.metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,t.Un(l)),s=s.insert(h,t.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,LE(i,(m=r,Kw(Fw(Bb.fromString("__bundle__/docs/"+m)))))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return DE(e,f,a,Rb.min(),s).next((function(t){return f.apply(e),t})).next((function(t){return i.qe.removeMatchingKeysForTargetId(e,d.targetId).next((function(){return i.qe.addMatchingKeys(e,o,d.targetId)})).next((function(){return i.Mn.En(e,t)})).next((function(){return t}))}))}))]}var m}))}))}function VE(e,t,n){return void 0===n&&(n=Q_()),$p(this,void 0,void 0,(function(){var r,i;return em(this,(function(o){switch(o.label){case 0:return[4,LE(e,Kw(NS(t.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Tb(e)).persistence.runTransaction("Save named query","readwrite",(function(e){var o=dk(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(e,t);var a=r.withResumeToken(zb.EMPTY_BYTE_STRING,o);return i.kn=i.kn.insert(a.targetId,a),i.qe.updateTargetData(e,a).next((function(){return i.qe.removeMatchingKeysForTargetId(e,r.targetId)})).next((function(){return i.qe.addMatchingKeys(e,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(e,t)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var WE=function(){function e(e){this.R=e,this.Qn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(e,t){return lS.resolve(this.Qn.get(t))},e.prototype.saveBundleMetadata=function(e,t){var n;return this.Qn.set(t.id,{id:(n=t).id,version:n.version,createTime:dk(n.createTime)}),lS.resolve()},e.prototype.getNamedQuery=function(e,t){return lS.resolve(this.jn.get(t))},e.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,{name:(n=t).name,query:NS(n.bundledQuery),readTime:dk(n.readTime)}),lS.resolve();var n},e}(),HE=function(){function e(){this.Wn=new U_(KE.Gn),this.zn=new U_(KE.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(e,t){var n=new KE(e,t);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},e.prototype.Jn=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.Yn(new KE(e,t))},e.prototype.Xn=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.Zn=function(e){var t=this,n=new $b(new Bb([])),r=new KE(n,e),i=new KE(n,e+1),o=[];return this.zn.forEachInRange([r,i],(function(e){t.Yn(e),o.push(e.key)})),o},e.prototype.ts=function(){var e=this;this.Wn.forEach((function(t){return e.Yn(t)}))},e.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},e.prototype.es=function(e){var t=new $b(new Bb([])),n=new KE(t,e),r=new KE(t,e+1),i=Q_();return this.zn.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new KE(e,0),n=this.Wn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),KE=function(){function e(e,t){this.key=e,this.ns=t}return e.Gn=function(e,t){return $b.comparator(e.key,t.key)||xb(e.ns,t.ns)},e.Hn=function(e,t){return xb(e.ns,t.ns)||$b.comparator(e.key,t.key)},e}(),GE=function(){function e(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new U_(KE.Gn)}return e.prototype.checkEmpty=function(e){return lS.resolve(0===this._n.length)},e.prototype.addMutationBatch=function(e,t,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new kS(i,t,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new KE(u.key,i)),this.Ut.addToCollectionParentIndex(e,u.key.path.popLast())}return lS.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return lS.resolve(this.os(t))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.cs(n),i=r<0?0:r;return lS.resolve(this._n.length>i?this._n[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return lS.resolve(0===this._n.length?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(e){return lS.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new KE(t,0),i=new KE(t,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(e){var t=n.os(e.ns);o.push(t)})),lS.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new U_(xb);return t.forEach((function(e){var t=new KE(e,0),i=new KE(e,Number.POSITIVE_INFINITY);n.rs.forEachInRange([t,i],(function(e){r=r.add(e.ns)}))})),lS.resolve(this.us(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1,i=n;$b.isDocumentKey(i)||(i=i.child(""));var o=new KE(new $b(i),0),a=new U_(xb);return this.rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.ns)),!0)}),o),lS.resolve(this.us(a))},e.prototype.us=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.os(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;Mb(0===this.hs(t.batchId,"removed")),this._n.shift();var r=this.rs;return lS.forEach(t.mutations,(function(i){var o=new KE(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.rs=r}))},e.prototype.Gt=function(e){},e.prototype.containsKey=function(e,t){var n=new KE(t,0),r=this.rs.firstAfterOrEqual(n);return lS.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return this._n.length,lS.resolve()},e.prototype.hs=function(e,t){return this.cs(e)},e.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},e.prototype.os=function(e){var t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]},e}(),YE=function(){function e(e,t){this.Ut=e,this.ls=t,this.docs=new j_($b.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return lS.resolve(n?n.document.clone():vw.newInvalidDocument(t))},e.prototype.getEntries=function(e,t){var n=this,r=V_();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():vw.newInvalidDocument(e))})),lS.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){for(var r=V_(),i=new $b(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||Zw(t,c)&&(r=r.insert(c.key,c.clone()))}return lS.resolve(r)},e.prototype.fs=function(e,t){return lS.forEach(this.docs,(function(e){return t(e)}))},e.prototype.newChangeBuffer=function(e){return new QE(this)},e.prototype.getSize=function(e){return lS.resolve(this.size)},e}(),QE=function(e){function t(t){var n=this;return(n=e.call(this)||this).Ie=t,n}return Xp(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.Ie.addEntry(e,i.document,t.getReadTime(r))):t.Ie.removeEntry(r)})),lS.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.Ie.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.Ie.getEntries(e,t)},t}(hE),JE=function(){function e(e){this.persistence=e,this.ds=new lE((function(e){return bw(e)}),ww),this.lastRemoteSnapshotVersion=Rb.min(),this.highestTargetId=0,this.ws=0,this._s=new HE,this.targetCount=0,this.ys=XS.Jt()}return e.prototype.forEachTarget=function(e,t){return this.ds.forEach((function(e,n){return t(n)})),lS.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return lS.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return lS.resolve(this.ws)},e.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),lS.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ws&&(this.ws=t),lS.resolve()},e.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new XS(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,lS.resolve()},e.prototype.updateTargetData=function(e,t){return this.te(t),lS.resolve()},e.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,lS.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),lS.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return lS.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.ds.get(t)||null;return lS.resolve(n)},e.prototype.addMatchingKeys=function(e,t,n){return this._s.Jn(t,n),lS.resolve()},e.prototype.removeMatchingKeys=function(e,t,n){this._s.Xn(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),lS.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),lS.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this._s.es(t);return lS.resolve(n)},e.prototype.containsKey=function(e,t){return lS.resolve(this._s.containsKey(t))},e}(),ZE=function(){function e(e,t){var n,r=this;this.gs={},this.Ne=new mb(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new JE(this),this.Ut=new FS,this.Ue=(n=this.Ut,new YE(n,(function(e){return r.referenceDelegate.ps(e)}))),this.R=new MS(t),this.Ke=new WE(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new GE(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Ke},e.prototype.runTransaction=function(e,t,n){var r=this;wb("MemoryPersistence","Starting transaction:",e);var i=new XE(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(e){return r.referenceDelegate.Ts(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.Is=function(e,t){return lS.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(e,t)}})))},e}(),XE=function(e){function t(t){var n=this;return(n=e.call(this)||this).currentSequenceNumber=t,n}return Xp(t,e),t}(uS),$E=function(){function e(e){this.persistence=e,this.As=new HE,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Eb()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(e,t,n){return this.As.addReference(n,t),this.vs.delete(n.toString()),lS.resolve()},e.prototype.removeReference=function(e,t,n){return this.As.removeReference(n,t),this.vs.add(n.toString()),lS.resolve()},e.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),lS.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.As.Zn(t.targetId).forEach((function(e){return n.vs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.vs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lS.forEach(this.vs,(function(r){var i=$b.fromPath(r);return t.Ps(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Rs=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.Ps(e,t).next((function(e){e?n.vs.delete(t.toString()):n.vs.add(t.toString())}))},e.prototype.ps=function(e){return 0},e.prototype.Ps=function(e,t){var n=this;return lS.or([function(){return lS.resolve(n.As.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Is(e,t)}])},e}(),eM=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(e,t){return"firestore_clients_"+e+"_"+t}function nM(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function rM(e,t){return"firestore_targets_"+e+"_"+t}eM.UNAUTHENTICATED=new eM(null),eM.GOOGLE_CREDENTIALS=new eM("google-credentials-uid"),eM.FIRST_PARTY=new eM("first-party-uid"),eM.MOCK_USER=new eM("mock-user");var iM=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.Vs=function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new gb(o.error.code,o.error.message)),a?new e(t,n,o.state,i):(_b("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),oM=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.Vs=function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new gb(i.error.code,i.error.message)),o?new e(t,i.state,r):(_b("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),aM=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.Vs=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Z_(),a=0;i&&a<r.activeTargetIds.length;++a)i=Xb(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(_b("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),sM=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.Vs=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(_b("SharedClientState","Failed to parse online state: "+t),null)},e}(),uM=function(){function e(){this.activeTargetIds=Z_()}return e.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),cM=function(){function e(e,t,n,r,i){this.window=e,this.Se=t,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new j_(xb),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=tM(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.Fs=this.Fs.insert(this.Ns,new uM),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.Ks=function(e){return"firestore_bundle_loaded_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return $p(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s,u,c,l,h=this;return em(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=f.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.Ns&&(i=this.getItem(tM(this.persistenceKey,r)))&&(o=aM.Vs(r,i))&&(this.Fs=this.Fs.insert(o.clientId,o));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.$s;u<c.length;u++)l=c[u],this.ks(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},e.prototype.isActiveQueryTarget=function(e){var t=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t},e.prototype.addPendingMutation=function(e){this.zs(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.zs(e,t,n),this.Hs(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(rM(this.persistenceKey,e));if(n){var r=oM.Vs(e,n);r&&(t=r.state)}}return this.Js.Ds(e),this.Qs(),t},e.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Qs()},e.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(rM(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.Ys(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.Hs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.Xs(e)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return wb("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){wb("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){wb("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.ks=function(e){var t=this,n=e;if(n.storageArea===this.storage){if(wb("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void _b("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return $p(t,void 0,void 0,(function(){var e,t,r,i,o,a;return em(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return e=this.ti(n.key),[2,this.ei(e,null)];if(t=this.ni(n.key,n.newValue))return[2,this.ei(t.clientId,t)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(e){var t=mb.o;if(null!=e)try{var n=JSON.parse(e);Mb("number"==typeof n),t=n}catch(e){_b("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==mb.o&&this.sequenceNumberHandler(a);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},e.prototype.zs=function(e,t,n){var r=new iM(this.currentUser,e,t,n),i=nM(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ss())},e.prototype.Hs=function(e){var t=nM(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.Xs=function(e){var t={clientId:this.Ns,onlineState:e};this.storage.setItem(this.Us,JSON.stringify(t))},e.prototype.Ys=function(e,t,n){var r=rM(this.persistenceKey,e),i=new oM(e,t,n);this.setItem(r,i.Ss())},e.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},e.prototype.ti=function(e){var t=this.Ls.exec(e);return t?t[1]:null},e.prototype.ni=function(e,t){var n=this.ti(e);return aM.Vs(n,t)},e.prototype.si=function(e,t){var n=this.Bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return iM.Vs(new eM(i),r,t)},e.prototype.ri=function(e,t){var n=this.qs.exec(e),r=Number(n[1]);return oM.Vs(r,t)},e.prototype.js=function(e){return sM.Vs(e)},e.prototype.ii=function(e){return $p(this,void 0,void 0,(function(){return em(this,(function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(wb("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])}))}))},e.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},e.prototype.ei=function(e,t){var n=this,r=t?this.Fs.insert(e,t):this.Fs.remove(e),i=this.Gs(this.Fs),o=this.Gs(r),a=[],s=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||s.push(e)})),this.syncEngine.hi(a,s).then((function(){n.Fs=r}))},e.prototype.Ws=function(e){this.Fs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},e.prototype.Gs=function(e){var t=Z_();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t},e}(),lM=function(){function e(){this.li=new uM,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.fi[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},e.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.fi[e]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.start=function(){return this.li=new uM,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e.prototype.notifyBundleLoaded=function(){},e}(),hM=function(){function e(){}return e.prototype.di=function(e){},e.prototype.shutdown=function(){},e}(),fM=function(){function e(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return e.prototype.di=function(e){this.gi.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){wb("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)t[e](0)},e.prototype.yi=function(){wb("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)t[e](1)},e.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),dM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},pM=function(){function e(e){this.Ei=e.Ei,this.Ti=e.Ti}return e.prototype.Ii=function(e){this.Ai=e},e.prototype.Ri=function(e){this.bi=e},e.prototype.onMessage=function(e){this.vi=e},e.prototype.close=function(){this.Ti()},e.prototype.send=function(e){this.Ei(e)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(e){this.bi(e)},e.prototype.Si=function(e){this.vi(e)},e}(),mM=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.autoDetectLongPolling=t.autoDetectLongPolling,n.useFetchStreams=t.useFetchStreams,n}return Xp(t,e),t.prototype.Fi=function(e,t,n,r){return new Promise((function(i,o){var a=new pb;a.listenOnce(cb.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case ub.NO_ERROR:var t=a.getResponseJson();wb("Connection","XHR received:",JSON.stringify(t)),i(t);break;case ub.TIMEOUT:wb("Connection",'RPC "'+e+'" timed out'),o(new gb(vb.DEADLINE_EXCEEDED,"Request time out"));break;case ub.HTTP_ERROR:var n=a.getStatus();if(wb("Connection",'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=(u=r.status,c=u.toLowerCase().replace(/_/g,"-"),Object.values(vb).indexOf(c)>=0?c:vb.UNKNOWN);o(new gb(s,r.message))}else o(new gb(vb.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new gb(vb.UNAVAILABLE,"Connection failed."));break;default:Eb()}}finally{wb("Connection",'RPC "'+e+'" completed.')}var u,c}));var s=JSON.stringify(r);a.send(t,"POST",s,n,15)}))},t.prototype.Oi=function(e,t){var n=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=ab(),i=sb(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new fb({})),this.ki(o.initMessageHeaders,t),bn.isMobileCordova()||bn.isReactNative()||bn.isElectron()||bn.isIE()||bn.isUWP()||bn.isBrowserExtension()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");wb("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),u=!1,c=!1,l=new pM({Ei:function(e){c?wb("Connection","Not sending because WebChannel is closed:",e):(u||(wb("Connection","Opening WebChannel transport."),s.open(),u=!0),wb("Connection","WebChannel sending:",e),s.send(e))},Ti:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,db.EventType.OPEN,(function(){c||wb("Connection","WebChannel transport opened.")})),h(s,db.EventType.CLOSE,(function(){c||(c=!0,wb("Connection","WebChannel transport closed"),l.Vi())})),h(s,db.EventType.ERROR,(function(e){c||(c=!0,kb("Connection","WebChannel transport errored:",e),l.Vi(new gb(vb.UNAVAILABLE,"The operation could not be completed")))})),h(s,db.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];Mb(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){wb("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=A_[e];if(void 0!==t)return L_(t)}(o),u=i.message;void 0===a&&(a=vb.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,l.Vi(new gb(a,u)),s.close()}else wb("Connection","WebChannel received:",n),l.Si(n)}})),h(i,lb.STAT_EVENT,(function(e){e.stat===hb.PROXY?wb("Connection","Detected buffering proxy"):e.stat===hb.NOPROXY&&wb("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},t}(function(){function e(e){this.databaseInfo=e,this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.Di=t+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(e,t,n,r){var i=this.xi(e,t);wb("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(e,i,o,n).then((function(e){return wb("RestConnection","Received: ",e),e}),(function(t){throw kb("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t}))},e.prototype.$i=function(e,t,n,r){return this.Ni(e,t,n,r)},e.prototype.ki=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])},e.prototype.xi=function(e,t){var n=dM[e];return this.Di+"/v1/"+t+":"+n},e}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(){return"undefined"!=typeof window?window:null}function gM(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(e){return new ck(e,!0)}var bM=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=e,this.timerId=t,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Qi=function(){this.qi=this.Bi},e.prototype.ji=function(e){var t=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&wb("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return t.Ki=Date.now(),e()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),wM=function(){function e(e,t,n,r,i,o){this.Se=e,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new bM(e,t)}return e.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.er=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.nr()},e.prototype.stop=function(){return $p(this,void 0,void 0,(function(){return em(this,(function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return e.rr()})))},e.prototype.cr=function(e){this.ur(),this.stream.send(e)},e.prototype.rr=function(){return $p(this,void 0,void 0,(function(){return em(this,(function(e){return this.er()?[2,this.close(0)]:[2]}))}))},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(e,t){return $p(this,void 0,void 0,(function(){return em(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===vb.RESOURCE_EXHAUSTED?(_b(t.toString()),_b("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):t&&t.code===vb.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.ar=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(t){e.Yi===n&&e.lr(t)}),(function(n){t((function(){var t=new gb(vb.UNKNOWN,"Fetching auth token failed: "+n.message);return e.dr(t)}))}))},e.prototype.lr=function(e){var t=this,n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii((function(){n((function(){return t.state=2,t.listener.Ii()}))})),this.stream.Ri((function(e){n((function(){return t.dr(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji((function(){return $p(e,void 0,void 0,(function(){return em(this,(function(e){return this.state=0,this.start(),[2]}))}))}))},e.prototype.dr=function(e){return wb("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.hr=function(e){var t=this;return function(n){t.Se.enqueueAndForget((function(){return t.Yi===e?n():(wb("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),_M=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return Xp(t,e),t.prototype.wr=function(e){return this.Hi.Oi("Listen",e)},t.prototype.onMessage=function(e){this.Zi.reset();var t=function(e,t){var n,r;if("targetChange"in t){t.targetChange;var i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:Eb(),o=t.targetChange.targetIds||[],a=function(e,t){return e.I?(Mb(void 0===t||"string"==typeof t),zb.fromBase64String(t||"")):(Mb(void 0===t||t instanceof Uint8Array),zb.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=(u=t.targetChange.cause)&&function(e){var t=void 0===e.code?vb.UNKNOWN:L_(e.code);return new gb(t,e.message||"")}(u);n=new nk(i,o,a,s||null)}else if("documentChange"in t){t.documentChange,(i=t.documentChange).document,i.document.name,i.document.updateTime,o=gk(e,i.document.name),a=dk(i.document.updateTime);var u=new pw({mapValue:{fields:i.document.fields}}),c=(s=vw.newFoundDocument(o,a,u),i.targetIds||[]),l=i.removedTargetIds||[];n=new ek(c,l,s.key,s)}else if("documentDelete"in t)t.documentDelete,(i=t.documentDelete).document,o=gk(e,i.document),a=i.readTime?dk(i.readTime):Rb.min(),u=vw.newNoDocument(o,a),s=i.removedTargetIds||[],n=new ek([],s,u.key,u);else if("documentRemove"in t)t.documentRemove,(i=t.documentRemove).document,o=gk(e,i.document),a=i.removedTargetIds||[],n=new ek([],a,o,null);else{if(!("filter"in t))return Eb();t.filter;var h=t.filter;h.targetId,i=h.count||0,o=new D_(i),a=h.targetId,n=new tk(a,o)}return n}(this.R,e),n=function(e){if(!("targetChange"in e))return Rb.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Rb.min():t.readTime?dk(t.readTime):Rb.min()}(e);return this.listener._r(t,n)},t.prototype.mr=function(e){var t={};t.database=wk(this.R),t.addTarget=function(e,t){var n,r=t.target;return(n=_w(r)?{documents:Tk(e,r)}:{query:Ck(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=hk(e,t.resumeToken):t.snapshotVersion.compareTo(Rb.min())>0&&(n.readTime=lk(e,t.snapshotVersion.toTimestamp())),n}(this.R,e);var n,r=(this.R,null==(n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Eb()}}(0,e.purpose))?null:{"goog-listen-tags":n});r&&(t.labels=r),this.cr(t)},t.prototype.yr=function(e){var t={};t.database=wk(this.R),t.removeTarget=e,this.cr(t)},t}(wM),kM=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return Xp(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(e){return this.Hi.Oi("Write",e)},t.prototype.onMessage=function(e){if(Mb(!!e.streamToken),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var t=(r=e.writeResults,i=e.commitTime,r&&r.length>0?(Mb(void 0!==i),r.map((function(e){return function(e,t){var n=e.updateTime?dk(e.updateTime):dk(t);return n.isEqual(Rb.min())&&(n=dk(t)),new v_(n,e.transformResults||[])}(e,i)}))):[]),n=dk(e.commitTime);return this.listener.Tr(n,t)}var r,i;return Mb(!e.writeResults||0===e.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var e={};e.database=wk(this.R),this.cr(e)},t.prototype.Er=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Ek(t.R,e)}))};this.cr(n)},t}(wM),SM=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.Hi=n,i.R=r,i.Rr=!1,i}return Xp(t,e),t.prototype.br=function(){if(this.Rr)throw new gb(vb.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===vb.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new gb(vb.UNKNOWN,e.toString())}))},t.prototype.$i=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===vb.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new gb(vb.UNKNOWN,e.toString())}))},t.prototype.terminate=function(){this.Rr=!0},t}((function(){})),EM=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()})))},e.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},e.prototype.set=function(e){this.kr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},e.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.Cr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(_b(t),this.Vr=!1):wb("OnlineStateTracker",t)},e.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},e}(),MM=function(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(e){n.enqueueAndForget((function(){return $p(o,void 0,void 0,(function(){return em(this,(function(e){switch(e.label){case 0:return DM(this)?(wb("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return $p(this,void 0,void 0,(function(){var t;return em(this,(function(n){switch(n.label){case 0:return(t=Tb(e)).Or.add(4),[4,CM(t)];case 1:return n.sent(),t.Br.set("Unknown"),t.Or.delete(4),[4,TM(t)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.Br=new EM(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(e){return $p(this,void 0,void 0,(function(){var t,n;return em(this,(function(r){switch(r.label){case 0:if(!DM(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,n[t](!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function CM(e){return $p(this,void 0,void 0,(function(){var t,n;return em(this,(function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,n[t](!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function IM(e,t){var n=Tb(e);n.$r.has(t.targetId)||(n.$r.set(t.targetId,t),RM(n)?OM(n):QM(n).er()&&AM(n,t))}function xM(e,t){var n=Tb(e),r=QM(n);n.$r.delete(t),r.er()&&PM(n,t),0===n.$r.size&&(r.er()?r.ir():DM(n)&&n.Br.set("Unknown"))}function AM(e,t){e.qr.U(t.targetId),QM(e).mr(t)}function PM(e,t){e.qr.U(t),QM(e).yr(t)}function OM(e){e.qr=new ik({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),QM(e).start(),e.Br.Sr()}function RM(e){return DM(e)&&!QM(e).tr()&&e.$r.size>0}function DM(e){return 0===Tb(e).Or.size}function NM(e){e.qr=void 0}function LM(e){return $p(this,void 0,void 0,(function(){return em(this,(function(t){return e.$r.forEach((function(t,n){AM(e,t)})),[2]}))}))}function jM(e,t){return $p(this,void 0,void 0,(function(){return em(this,(function(n){return NM(e),RM(e)?(e.Br.Nr(t),OM(e)):e.Br.set("Unknown"),[2]}))}))}function BM(e,t,n){return $p(this,void 0,void 0,(function(){var r,i,o;return em(this,(function(a){switch(a.label){case 0:if(e.Br.set("Online"),!(t instanceof nk&&2===t.state&&t.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(e,t){return $p(this,void 0,void 0,(function(){var n,r,i,o;return em(this,(function(a){switch(a.label){case 0:n=t.cause,r=0,i=t.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],e.$r.has(o)?[4,e.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),e.$r.delete(o),e.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(e,t)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),wb("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,FM(e,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof ek?e.qr.X(t):t instanceof tk?e.qr.rt(t):e.qr.et(t),n.isEqual(Rb.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,OE(e.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,(s=e,u=n,c=s.qr.ut(u),c.targetChanges.forEach((function(e,t){if(e.resumeToken.approximateByteSize()>0){var n=s.$r.get(t);n&&s.$r.set(t,n.withResumeToken(e.resumeToken,u))}})),c.targetMismatches.forEach((function(e){var t=s.$r.get(e);if(t){s.$r.set(e,t.withResumeToken(zb.EMPTY_BYTE_STRING,t.snapshotVersion)),PM(s,e);var n=new ES(t.target,e,1,t.sequenceNumber);AM(s,n)}})),s.remoteSyncer.applyRemoteEvent(c))]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return wb("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,FM(e,o)];case 12:return a.sent(),[3,13];case 13:return[2]}var s,u,c}))}))}function FM(e,t,n){return $p(this,void 0,void 0,(function(){var r=this;return em(this,(function(i){switch(i.label){case 0:if(!mS(t))throw t;return e.Or.add(1),[4,CM(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return OE(e.localStore)}),e.asyncQueue.enqueueRetryable((function(){return $p(r,void 0,void 0,(function(){return em(this,(function(t){switch(t.label){case 0:return wb("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.Or.delete(1),[4,TM(e)];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))}function UM(e,t){return t().catch((function(n){return FM(e,n,t)}))}function qM(e){return $p(this,void 0,void 0,(function(){var t,n,r,i,o;return em(this,(function(a){switch(a.label){case 0:t=Tb(e),n=JM(t),r=t.Fr.length>0?t.Fr[t.Fr.length-1].batchId:-1,a.label=1;case 1:if(!(DM(s=t)&&s.Fr.length<10))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,NE(t.localStore,r)];case 3:return null===(i=a.sent())?(0===t.Fr.length&&n.ir(),[3,7]):(r=i.batchId,function(e,t){e.Fr.push(t);var n=JM(e);n.er()&&n.pr&&n.Er(t.mutations)}(t,i),[3,6]);case 4:return o=a.sent(),[4,FM(t,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return zM(t)&&VM(t),[2]}var s}))}))}function zM(e){return DM(e)&&!JM(e).tr()&&e.Fr.length>0}function VM(e){JM(e).start()}function WM(e){return $p(this,void 0,void 0,(function(){return em(this,(function(t){return JM(e).Ar(),[2]}))}))}function HM(e){return $p(this,void 0,void 0,(function(){var t,n,r,i;return em(this,(function(o){for(t=JM(e),n=0,r=e.Fr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]}))}))}function KM(e,t,n){return $p(this,void 0,void 0,(function(){var r,i;return em(this,(function(o){switch(o.label){case 0:return r=e.Fr.shift(),i=SS.from(r,t,n),[4,UM(e,(function(){return e.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,qM(e)];case 2:return o.sent(),[2]}}))}))}function GM(e,t){return $p(this,void 0,void 0,(function(){return em(this,(function(n){switch(n.label){case 0:return t&&JM(e).pr?[4,function(e,t){return $p(this,void 0,void 0,(function(){var n,r;return em(this,(function(i){switch(i.label){case 0:return N_(r=t.code)&&r!==vb.ABORTED?(n=e.Fr.shift(),JM(e).sr(),[4,UM(e,(function(){return e.remoteSyncer.rejectFailedWrite(n.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,qM(e)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return zM(e)&&VM(e),[2]}}))}))}function YM(e,t){return $p(this,void 0,void 0,(function(){var n;return em(this,(function(r){switch(r.label){case 0:return n=Tb(e),t?(n.Or.delete(2),[4,TM(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Or.add(2),[4,CM(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function QM(e){var t,n,r,i,o=this;return e.Ur||(e.Ur=(t=e.datastore,n=e.asyncQueue,r={Ii:LM.bind(null,e),Ri:jM.bind(null,e),_r:BM.bind(null,e)},(i=Tb(t)).br(),new _M(n,i.Hi,i.credentials,i.R,r)),e.Mr.push((function(t){return $p(o,void 0,void 0,(function(){return em(this,(function(n){switch(n.label){case 0:return t?(e.Ur.sr(),RM(e)?OM(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:n.sent(),NM(e),n.label=3;case 3:return[2]}}))}))}))),e.Ur}function JM(e){var t,n,r,i,o=this;return e.Kr||(e.Kr=(t=e.datastore,n=e.asyncQueue,r={Ii:WM.bind(null,e),Ri:GM.bind(null,e),Ir:HM.bind(null,e),Tr:KM.bind(null,e)},(i=Tb(t)).br(),new kM(n,i.Hi,i.credentials,i.R,r)),e.Mr.push((function(t){return $p(o,void 0,void 0,(function(){return em(this,(function(n){switch(n.label){case 0:return t?(e.Kr.sr(),[4,qM(e)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,e.Kr.stop()];case 3:n.sent(),e.Fr.length>0&&(wb("RemoteStore","Stopping write stream with "+e.Fr.length+" pending writes"),e.Fr=[]),n.label=4;case 4:return[2]}}))}))}))),e.Kr}var ZM=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new cS,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new gb(vb.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function XM(e,t){if(_b("AsyncQueue",t+": "+e),mS(e))return new gb(vb.UNAVAILABLE,t+": "+e);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $M=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||$b.comparator(t.key,n.key)}:function(e,t){return $b.comparator(e.key,t.key)},this.keyedMap=H_(),this.sortedSet=new j_(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),eT=function(){function e(){this.Qr=new j_($b.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.Qr.get(t);n?0!==e.type&&3===n.type?this.Qr=this.Qr.insert(t,e):3===e.type&&1!==n.type?this.Qr=this.Qr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Qr=this.Qr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Qr=this.Qr.remove(t):1===e.type&&2===n.type?this.Qr=this.Qr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Qr=this.Qr.insert(t,{type:2,doc:e.doc}):Eb():this.Qr=this.Qr.insert(t,e)},e.prototype.jr=function(){var e=[];return this.Qr.inorderTraversal((function(t,n){e.push(n)})),e},e}(),tT=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,$M.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),nT=function(){this.Wr=void 0,this.listeners=[]},rT=function(){this.queries=new lE((function(e){return Qw(e)}),Yw),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(e,t){return $p(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return em(this,(function(c){switch(c.label){case 0:if(n=Tb(e),r=t.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new nT),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=XM(s,"Initialization of query '"+Jw(t.query)+"' failed"),[2,void t.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(t),t.zr(n.onlineState),o.Wr&&t.Hr(o.Wr)&&uT(n),[2]}}))}))}function oT(e,t){return $p(this,void 0,void 0,(function(){var n,r,i,o,a;return em(this,(function(s){return n=Tb(e),r=t.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(t))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function aT(e,t){for(var n=Tb(e),r=!1,i=0,o=t;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(a)&&(r=!0);u.Wr=a}}r&&uT(n)}function sT(e,t,n){var r=Tb(e),i=r.queries.get(t);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(t)}function uT(e){e.Gr.forEach((function(e){e.next()}))}var cT=function(){function e(e,t,n){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new tT(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),o=!0):this.eo(e,this.onlineState)&&(this.no(e),o=!0),this.Xr=e,o},e.prototype.onError=function(e){this.Jr.error(e)},e.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},e.prototype.eo=function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.so&&n||e.docs.isEmpty()&&"Offline"!==t)},e.prototype.Zr=function(e){if(e.docChanges.length>0)return!0;var t=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.no=function(e){e=tT.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},e}(),lT=function(){function e(e,t){this.payload=e,this.byteLength=t}return e.prototype.io=function(){return"metadata"in this.payload},e}(),hT=function(){function e(e){this.R=e}return e.prototype.qn=function(e){return gk(this.R,e)},e.prototype.Un=function(e){return e.metadata.exists?Sk(this.R,e.document,!1):vw.newNoDocument(this.qn(e.metadata.name),this.Kn(e.metadata.readTime))},e.prototype.Kn=function(e){return dk(e)},e}(),fT=function(){function e(e,t,n){this.ro=e,this.localStore=t,this.R=n,this.queries=[],this.documents=[],this.progress=dT(e)}return e.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},e.prototype.co=function(e){for(var t=new Map,n=new hT(this.R),r=0,i=e;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(t.get(c)||Q_()).add(a);t.set(c,l)}}return t},e.prototype.complete=function(){return $p(this,void 0,void 0,(function(){var e,t,n,r,i;return em(this,(function(o){switch(o.label){case 0:return[4,zE(this.localStore,new hT(this.R),this.documents,this.ro.id)];case 1:e=o.sent(),t=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,VE(this.localStore,i,t.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new EE(Object.assign({},this.progress),e))]}}))}))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pT=function(e){this.key=e},mT=function(e){this.key=e},vT=function(){function e(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=Q_(),this.mutatedKeys=Q_(),this.lo=Xw(e),this.fo=new $M(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(e,t){var n=this,r=t?t.mo:new eT,i=t?t.fo:this.fo,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Uw(this.query)&&i.size===this.query.limit?i.last():null,c=qw(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=Zw(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),Uw(this.query)||qw(this.query))for(;a.size>this.query.limit;){var l=Uw(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},e.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this,i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var o=e.mo.jr();o.sort((function(e,t){return n=e.type,i=t.type,(o=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Eb()}})(n)-o(i)||r.lo(e.doc,t.doc);var n,i,o})),this.po(n);var a=t?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new tT(this.query,e.fo,i,o,e.mutatedKeys,0===s,u,!1),To:a}:{To:a}},e.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new eT,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},e.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.uo=t.uo.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.uo=t.uo.delete(e)})),this.current=e.current)},e.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=Q_(),this.fo.forEach((function(t){e.Io(t.key)&&(e.ho=e.ho.add(t.key))}));var n=[];return t.forEach((function(t){e.ho.has(t)||n.push(new mT(t))})),this.ho.forEach((function(e){t.has(e)||n.push(new pT(e))})),n},e.prototype.Ao=function(e){this.uo=e.Bn,this.ho=Q_();var t=this._o(e.documents);return this.applyChanges(t,!0)},e.prototype.Ro=function(){return tT.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},e}(),gT=function(e,t,n){this.query=e,this.targetId=t,this.view=n},yT=function(e){this.key=e,this.bo=!1},bT=function(){function e(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new lE((function(e){return Qw(e)}),Yw),this.Vo=new Map,this.So=new Set,this.Do=new j_($b.comparator),this.Co=new Map,this.No=new HE,this.xo={},this.ko=new Map,this.Fo=XS.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),e}();function wT(e,t){return $p(this,void 0,void 0,(function(){var n,r,i,o,a,s;return em(this,(function(u){switch(u.label){case 0:return n=QT(e),(o=n.Po.get(t))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,LE(n.localStore,Kw(t))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,_T(n,t,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&IM(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function _T(e,t,n,r){return $p(this,void 0,void 0,(function(){var i,o,a,s,u,c;return em(this,(function(l){switch(l.label){case 0:return e.Oo=function(t,n,r){return function(e,t,n,r){return $p(this,void 0,void 0,(function(){var i,o,a;return em(this,(function(s){switch(s.label){case 0:return(i=t.view._o(n)).Nn?[4,BE(e.localStore,t.query,!1).then((function(e){var n=e.documents;return t.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o),[2,(DT(e,t.targetId,a.To),a.snapshot)]}}))}))}(e,t,n,r)},[4,BE(e.localStore,t,!0)];case 1:return i=l.sent(),o=new vT(t,i.Bn),a=o._o(i.documents),s=$_.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),u=o.applyChanges(a,e.isPrimaryClient,s),DT(e,n,u.To),c=new gT(t,n,o),[2,(e.Po.set(t,c),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),u.snapshot)]}}))}))}function kT(e,t){return $p(this,void 0,void 0,(function(){var n,r,i;return em(this,(function(o){switch(o.label){case 0:return n=Tb(e),r=n.Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(e){return!Yw(e,t)}))),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,jE(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),xM(n.remoteStore,r.targetId),OT(n,r.targetId)})).catch(rE)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return OT(n,r.targetId),[4,jE(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function ST(e,t,n){return $p(this,void 0,void 0,(function(){var r,i,o,a;return em(this,(function(s){switch(s.label){case 0:r=JT(e),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,(u=r.localStore,c=t,h=Tb(u),f=Ob.now(),d=c.reduce((function(e,t){return e.add(t.key)}),Q_()),h.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return h.Mn.pn(e,d).next((function(t){l=t;for(var n=[],r=0,i=c;r<i.length;r++){var o=i[r],a=k_(o,l.get(o.key));null!=a&&n.push(new T_(o.key,a,mw(a.value.mapValue),g_.exists(!0)))}return h._n.addMutationBatch(e,f,n,c)}))})).then((function(e){return e.applyToLocalDocumentSet(l),{batchId:e.batchId,changes:l}})))];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(e,t,n){var r=e.xo[e.currentUser.toKey()];r||(r=new j_(xb)),r=r.insert(t,n),e.xo[e.currentUser.toKey()]=r}(r,i.batchId,n),[4,jT(r,i.changes)];case 3:return s.sent(),[4,qM(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=XM(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}var u,c,l,h,f,d}))}))}function ET(e,t){return $p(this,void 0,void 0,(function(){var n,r;return em(this,(function(i){switch(i.label){case 0:n=Tb(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,RE(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach((function(e,t){var r=n.Co.get(t);r&&(Mb(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.bo=!0:e.modifiedDocuments.size>0?Mb(r.bo):e.removedDocuments.size>0&&(Mb(r.bo),r.bo=!1))})),[4,jT(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,rE(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function MT(e,t,n){var r=Tb(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(e,n){var r=n.view.zr(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Tb(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(t)&&(r=!0)})),r&&uT(n)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function TT(e,t,n){return $p(this,void 0,void 0,(function(){var r,i,o,a,s,u;return em(this,(function(c){switch(c.label){case 0:return(r=Tb(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.Co.get(t),(o=i&&i.key)?(a=(a=new j_($b.comparator)).insert(o,vw.newNoDocument(o,Rb.min())),s=Q_().add(o),u=new X_(Rb.min(),new Map,new U_(xb),a,s),[4,ET(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(t),LT(r),[3,4];case 2:return[4,jE(r.localStore,t,!1).then((function(){return OT(r,t,n)})).catch(rE)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function CT(e,t){return $p(this,void 0,void 0,(function(){var n,r,i;return em(this,(function(o){switch(o.label){case 0:n=Tb(e),r=t.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,PE(n.localStore,t)];case 2:return i=o.sent(),PT(n,r,null),AT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,jT(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,rE(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function IT(e,t,n){return $p(this,void 0,void 0,(function(){var r,i;return em(this,(function(o){switch(o.label){case 0:r=Tb(e),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(a=r.localStore,s=t,u=Tb(a),u.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var t;return u._n.lookupMutationBatch(e,s).next((function(n){return Mb(null!==n),t=n.keys(),u._n.removeMutationBatch(e,n)})).next((function(){return u._n.performConsistencyCheck(e)})).next((function(){return u.Mn.pn(e,t)}))})))];case 2:return i=o.sent(),PT(r,t,n),AT(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,jT(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,rE(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var a,s,u}))}))}function xT(e,t){return $p(this,void 0,void 0,(function(){var n,r,i,o,a;return em(this,(function(s){switch(s.label){case 0:DM((n=Tb(e)).remoteStore)||wb("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(u=n.localStore,c=Tb(u),c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return c._n.getHighestUnacknowledgedBatchId(e)})))];case 2:return-1===(r=s.sent())?[2,void t.resolve()]:((i=n.ko.get(r)||[]).push(t),n.ko.set(r,i),[3,4]);case 3:return o=s.sent(),a=XM(o,"Initialization of waitForPendingWrites() operation failed"),t.reject(a),[3,4];case 4:return[2]}var u,c}))}))}function AT(e,t){(e.ko.get(t)||[]).forEach((function(e){e.resolve()})),e.ko.delete(t)}function PT(e,t,n){var r=Tb(e),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function OT(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach((function(t){e.No.containsKey(t)||RT(e,t)}))}function RT(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);null!==n&&(xM(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),LT(e))}function DT(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof pT?(e.No.addReference(o.key,t),NT(e,o)):o instanceof mT?(wb("SyncEngine","Document no longer in limbo: "+o.key),e.No.removeReference(o.key,t),e.No.containsKey(o.key)||RT(e,o.key)):Eb()}}function NT(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(wb("SyncEngine","New document in limbo: "+n),e.So.add(r),LT(e))}function LT(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new $b(Bb.fromString(t)),r=e.Fo.next();e.Co.set(r,new yT(n)),e.Do=e.Do.insert(n,r),IM(e.remoteStore,new ES(Kw(Fw(n.path)),r,2,mb.o))}}function jT(e,t,n){return $p(this,void 0,void 0,(function(){var r,i,o,a;return em(this,(function(s){switch(s.label){case 0:return r=Tb(e),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(e,s){a.push(r.Oo(s,t,n).then((function(e){if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,e.fromCache?"not-current":"current"),i.push(e);var t=TE.Pn(s.targetId,e);o.push(t)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(e,t){return $p(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return em(this,(function(h){switch(h.label){case 0:n=Tb(e),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return lS.forEach(t,(function(t){return lS.forEach(t.bn,(function(r){return n.persistence.referenceDelegate.addReference(e,t.targetId,r)})).next((function(){return lS.forEach(t.vn,(function(r){return n.persistence.referenceDelegate.removeReference(e,t.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!mS(r=h.sent()))throw r;return wb("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=t;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.kn.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.kn=n.kn.insert(s,l));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function BT(e,t){return $p(this,void 0,void 0,(function(){var n,r;return em(this,(function(i){switch(i.label){case 0:return(n=Tb(e)).currentUser.isEqual(t)?[3,3]:(wb("SyncEngine","User change. New user:",t.toKey()),[4,AE(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,(o=n).ko.forEach((function(e){e.forEach((function(e){e.reject(new gb(vb.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.ko.clear(),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,jT(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function FT(e,t){var n=Tb(e),r=n.Co.get(t);if(r&&r.bo)return Q_().add(r.key);var i=Q_(),o=n.Vo.get(t);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function UT(e,t){return $p(this,void 0,void 0,(function(){var n,r,i;return em(this,(function(o){switch(o.label){case 0:return[4,BE((n=Tb(e)).localStore,t.query,!0)];case 1:return r=o.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&DT(n,t.targetId,i.To),i)]}}))}))}function qT(e){return $p(this,void 0,void 0,(function(){var t;return em(this,(function(n){return[2,UE((t=Tb(e)).localStore).then((function(e){return jT(t,e)}))]}))}))}function zT(e,t,n,r){return $p(this,void 0,void 0,(function(){var i,o;return em(this,(function(a){switch(a.label){case 0:return[4,(s=(i=Tb(e)).localStore,u=t,c=Tb(s),l=Tb(c._n),c.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return l.jt(e,u).next((function(t){return t?c.Mn.pn(e,t):lS.resolve(null)}))})))];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,qM(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(PT(i,t,r||null),AT(i,t),function(e,t){Tb(Tb(e)._n).Gt(t)}(i.localStore,t)):Eb(),a.label=4;case 4:return[4,jT(i,o)];case 5:return a.sent(),[3,7];case 6:wb("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}var s,u,c,l}))}))}function VT(e,t){return $p(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return em(this,(function(l){switch(l.label){case 0:return QT(n=Tb(e)),JT(n),!0!==t||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,WT(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,YM(n.remoteStore,!0)];case 2:for(l.sent(),o=0,a=i;o<a.length;o++)s=a[o],IM(n.remoteStore,s);return[3,7];case 3:return!1!==t||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(e,t){n.sharedClientState.isLocalQueryTarget(t)?u.push(t):c=c.then((function(){return OT(n,t),jE(n.localStore,t,!0)})),xM(n.remoteStore,t)})),[4,c]);case 4:return l.sent(),[4,WT(n,u)];case 5:return l.sent(),(h=Tb(n)).Co.forEach((function(e,t){xM(h.remoteStore,t)})),h.No.ts(),h.Co=new Map,h.Do=new j_($b.comparator),n.$o=!1,[4,YM(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}var h}))}))}function WT(e,t,n){return $p(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h,f,d,p,m;return em(this,(function(v){switch(v.label){case 0:n=Tb(e),r=[],i=[],o=0,a=t,v.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,LE(n.localStore,Kw(c[0]))]:[3,7]):[3,13];case 2:u=v.sent(),l=0,h=c,v.label=3;case 3:return l<h.length?(f=h[l],d=n.Po.get(f),[4,UT(n,d)]):[3,6];case 4:(p=v.sent()).snapshot&&i.push(p.snapshot),v.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,FE(n.localStore,s)];case 8:return m=v.sent(),[4,LE(n.localStore,m)];case 9:return u=v.sent(),[4,_T(n,HT(m),s,!1)];case 10:v.sent(),v.label=11;case 11:r.push(u),v.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function HT(e){return Bw(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function KT(e){var t=Tb(e);return Tb(Tb(t.localStore).persistence).fn()}function GT(e,t,n,r){return $p(this,void 0,void 0,(function(){var i,o,a;return em(this,(function(s){switch(s.label){case 0:return(i=Tb(e)).$o?(wb("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,UE(i.localStore)];case 3:return o=s.sent(),a=X_.createSynthesizedRemoteEventForCurrentChange(t,"current"===n),[4,jT(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,jE(i.localStore,t,!0)];case 6:return s.sent(),OT(i,t,r),[3,8];case 7:Eb(),s.label=8;case 8:return[2]}}))}))}function YT(e,t,n){return $p(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f;return em(this,(function(d){switch(d.label){case 0:if(!(r=QT(e)).$o)return[3,10];i=0,o=t,d.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(wb("SyncEngine","Adding an already active target "+a),[3,5]):[4,FE(r.localStore,a)]):[3,6];case 2:return s=d.sent(),[4,LE(r.localStore,s)];case 3:return u=d.sent(),[4,_T(r,HT(s),u.targetId,!1)];case 4:d.sent(),IM(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(e){return em(this,(function(t){switch(t.label){case 0:return r.Vo.has(e)?[4,jE(r.localStore,e,!1).then((function(){xM(r.remoteStore,e),OT(r,e)})).catch(rE)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},l=0,h=n,d.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function QT(e){var t=Tb(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ET.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=FT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=TT.bind(null,t),t.vo._r=aT.bind(null,t.eventManager),t.vo.Mo=sT.bind(null,t.eventManager),t}function JT(e){var t=Tb(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=CT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=IT.bind(null,t),t}function ZT(e,t,n){var r=Tb(e);(function(e,t,n){return $p(this,void 0,void 0,(function(){var r,i,o,a,s,u;return em(this,(function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,t.getMetadata()];case 1:return r=c.sent(),[4,(l=e.localStore,h=r,f=Tb(l),d=dk(h.createTime),f.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return f.Ke.getBundleMetadata(e,h.id)})).then((function(e){return!!e&&e.createTime.compareTo(d)>=0})))];case 2:return c.sent()?[4,t.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)))];case 4:return n._updateProgress(dT(r)),i=new fT(r,e.localStore,t.R),[4,t.Lo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(a=c.sent())&&n._updateProgress(a),[4,t.Lo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=c.sent(),[4,jT(e,s.wn,void 0)];case 12:return c.sent(),[4,function(e,t){var n=Tb(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ke.saveBundleMetadata(e,t)}))}(e.localStore,r)];case 13:return c.sent(),n._completeWith(s.progress),[3,15];case 14:return kb("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}var l,h,f,d}))}))})(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var XT=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(e){return $p(this,void 0,void 0,(function(){return em(this,(function(t){switch(t.label){case 0:return this.R=yM(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}}))}))},e.prototype.Uo=function(e){return null},e.prototype.Ko=function(e){return xE(this.persistence,new CE,e.initialUser,this.R)},e.prototype.qo=function(e){return new ZE($E.bs,this.R)},e.prototype.Bo=function(e){return new lM},e.prototype.terminate=function(){return $p(this,void 0,void 0,(function(){return em(this,(function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}}))}))},e}(),$T=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Qo=t,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Xp(t,e),t.prototype.initialize=function(t){return $p(this,void 0,void 0,(function(){var n=this;return em(this,(function(r){switch(r.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return r.sent(),[4,qE(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,t)];case 3:return r.sent(),[4,JT(this.Qo.syncEngine)];case 4:return r.sent(),[4,qM(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},t.prototype.Ko=function(e){return xE(this.persistence,new CE,e.initialUser,this.R)},t.prototype.Uo=function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new aE(t,e.asyncQueue)},t.prototype.qo=function(e){var t=SE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?WS.withCacheSize(this.cacheSizeBytes):WS.DEFAULT;return new wE(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,vM(),gM(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(e){return new lM},t}(XT),eC=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n,!1)||this).Qo=t,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Xp(t,e),t.prototype.initialize=function(t){return $p(this,void 0,void 0,(function(){var n,r=this;return em(this,(function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof cM?(this.sharedClientState.syncEngine={ui:zT.bind(null,n),ai:GT.bind(null,n),hi:YT.bind(null,n),fn:KT.bind(null,n),ci:qT.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(e){return $p(r,void 0,void 0,(function(){return em(this,(function(t){switch(t.label){case 0:return[4,VT(this.Qo.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},t.prototype.Bo=function(e){var t=vM();if(!cM.yt(t))throw new gb(vb.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=SE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new cM(t,e.asyncQueue,n,e.clientId,e.initialUser)},t}($T),tC=function(){function e(){}return e.prototype.initialize=function(e,t){return $p(this,void 0,void 0,(function(){var n=this;return em(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return MT(n.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=BT.bind(null,this.syncEngine),[4,YM(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.createEventManager=function(e){return new rT},e.prototype.createDatastore=function(e){var t,n,r=yM(e.databaseInfo.databaseId),i=(t=e.databaseInfo,new mM(t));return n=e.credentials,new SM(n,i,r)},e.prototype.createRemoteStore=function(e){var t,n,r,i,o,a=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return MT(a.syncEngine,e,0)},o=fM.yt()?new fM:new hM,new MM(t,n,r,i,o)},e.prototype.createSyncEngine=function(e,t){return n=this.localStore,r=this.remoteStore,i=this.eventManager,o=this.sharedClientState,a=e.initialUser,s=e.maxConcurrentLimboResolutions,u=t,c=new bT(n,r,i,o,a,s),u&&(c.$o=!0),c;var n,r,i,o,a,s,u,c},e.prototype.terminate=function(){return function(e){return $p(this,void 0,void 0,(function(){var t;return em(this,(function(n){switch(n.label){case 0:return t=Tb(e),wb("RemoteStore","RemoteStore shutting down."),t.Or.add(5),[4,CM(t)];case 1:return n.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(e,t){void 0===t&&(t=10240);var n=0;return{read:function(){return $p(this,void 0,void 0,(function(){var r;return em(this,(function(i){return n<e.byteLength?(r={value:e.slice(n,n+t),done:!1},[2,(n+=t,r)]):[2,{done:!0}]}))}))},cancel:function(){return $p(this,void 0,void 0,(function(){return em(this,(function(e){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rC=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),iC=function(){function e(e,t){var n=this;this.Go=e,this.R=t,this.metadata=new cS,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(e){e&&e.io()?n.metadata.resolve(e.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))}),(function(e){return n.metadata.reject(e)}))}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return $p(this,void 0,void 0,(function(){return em(this,(function(e){return[2,this.metadata.promise]}))}))},e.prototype.Lo=function(){return $p(this,void 0,void 0,(function(){return em(this,(function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}}))}))},e.prototype.Ho=function(){return $p(this,void 0,void 0,(function(){var e,t,n,r;return em(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(e=i.sent())?[2,null]:(t=this.zo.decode(e),n=Number(t),isNaN(n)&&this.Yo("length string ("+t+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new lT(JSON.parse(r),e.length+n)]}}))}))},e.prototype.Zo=function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))},e.prototype.Jo=function(){return $p(this,void 0,void 0,(function(){var e,t;return em(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}}))}))},e.prototype.Xo=function(e){return $p(this,void 0,void 0,(function(){var t;return em(this,(function(n){switch(n.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}}))}))},e.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},e.prototype.tc=function(){return $p(this,void 0,void 0,(function(){var e,t;return em(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(e=n.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}}))}))},e}(),oC=function(){function e(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return $p(this,void 0,void 0,(function(){var t,n=this;return em(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new gb(vb.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return $p(this,void 0,void 0,(function(){var n,r,i,o,a,s;return em(this,(function(u){switch(u.label){case 0:return n=Tb(e),r=wk(n.R)+"/documents",i={documents:t.map((function(e){return vk(n.R,e)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(e){var t,r,i=(t=n.R,"found"in(r=e)?function(e,t){Mb(!!t.found),t.found.name,t.found.updateTime;var n=gk(e,t.found.name),r=dk(t.found.updateTime),i=new pw({mapValue:{fields:t.found.fields}});return vw.newFoundDocument(n,r,i)}(t,r):"missing"in r?function(e,t){Mb(!!t.missing),Mb(!!t.readTime);var n=gk(e,t.missing),r=dk(t.readTime);return vw.newNoDocument(n,r)}(t,r):Eb());a.set(i.key.toString(),i)})),s=[],[2,(t.forEach((function(e){var t=a.get(e.toString());Mb(!!t),s.push(t)})),s)]}}))}))}(this.datastore,e)];case 1:return[2,((t=r.sent()).forEach((function(e){return n.recordVersion(e)})),t)]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())},e.prototype.delete=function(e){this.write(new O_(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.commit=function(){return $p(this,void 0,void 0,(function(){var e,t=this;return em(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e.delete(t.key.toString())})),e.forEach((function(e,n){var r=$b.fromPath(n);t.mutations.push(new R_(r,t.precondition(r)))})),[4,function(e,t){return $p(this,void 0,void 0,(function(){var n,r,i;return em(this,(function(o){switch(o.label){case 0:return n=Tb(e),r=wk(n.R)+"/documents",i={writes:t.map((function(e){return Ek(n.R,e)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Eb();t=Rb.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new gb(vb.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?g_.updateTime(t):g_.none()},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Rb.min()))throw new gb(vb.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return g_.updateTime(t)}return g_.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},e.prototype.ensureCommitNotCalled=function(){},e}(),aC=function(){function e(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new bM(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ec-=1,this.nc()},e.prototype.nc=function(){var e=this;this.Zi.ji((function(){return $p(e,void 0,void 0,(function(){var e,t,n=this;return em(this,(function(r){return e=new oC(this.datastore),(t=this.sc(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.ic(e)}))}))})).catch((function(e){n.ic(e)})),[2]}))}))}))},e.prototype.sc=function(e){try{var t=this.updateFunction(e);return!Jb(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.ic=function(e){var t=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return t.nc(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.rc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!N_(t)}return!1},e}(),sC=function(){function e(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=eM.UNAUTHENTICATED,this.clientId=Ib.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(t,(function(e){return $p(r,void 0,void 0,(function(){return em(this,(function(t){switch(t.label){case 0:return wb("FirestoreClient","Received user=",e.uid),[4,this.credentialListener(e)];case 1:return t.sent(),this.user=e,[2]}}))}))}))}return e.prototype.getConfiguration=function(){return $p(this,void 0,void 0,(function(){return em(this,(function(e){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},e.prototype.setCredentialChangeListener=function(e){this.credentialListener=e},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new gb(vb.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new cS;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return $p(e,void 0,void 0,(function(){var e,n;return em(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return e=r.sent(),n=XM(e,"Failed to shutdown persistence"),t.reject(n),[3,6];case 6:return[2]}}))}))})),t.promise},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(e,t){return $p(this,void 0,void 0,(function(){var n,r,i=this;return em(this,(function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),wb("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=o.sent(),[4,t.initialize(n)];case 2:return o.sent(),r=n.initialUser,e.setCredentialChangeListener((function(e){return $p(i,void 0,void 0,(function(){return em(this,(function(n){switch(n.label){case 0:return r.isEqual(e)?[3,2]:[4,AE(t.localStore,e)];case 1:n.sent(),r=e,n.label=2;case 2:return[2]}}))}))})),t.persistence.setDatabaseDeletedListener((function(){return e.terminate()})),e.offlineComponents=t,[2]}}))}))}function cC(e,t){return $p(this,void 0,void 0,(function(){var n,r;return em(this,(function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,lC(e)];case 1:return n=i.sent(),wb("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener((function(e){return function(e,t){return $p(this,void 0,void 0,(function(){var n,r;return em(this,(function(i){switch(i.label){case 0:return(n=Tb(e)).asyncQueue.verifyOperationInProgress(),wb("RemoteStore","RemoteStore received new credentials"),r=DM(n),n.Or.add(3),[4,CM(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(t)];case 2:return i.sent(),n.Or.delete(3),[4,TM(n)];case 3:return i.sent(),[2]}}))}))}(t.remoteStore,e)})),e.onlineComponents=t,[2]}}))}))}function lC(e){return $p(this,void 0,void 0,(function(){return em(this,(function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(wb("FirestoreClient","Using default OfflineComponentProvider"),[4,uC(e,new XT)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}}))}))}function hC(e){return $p(this,void 0,void 0,(function(){return em(this,(function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(wb("FirestoreClient","Using default OnlineComponentProvider"),[4,cC(e,new tC)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}}))}))}function fC(e){return lC(e).then((function(e){return e.persistence}))}function dC(e){return lC(e).then((function(e){return e.localStore}))}function pC(e){return hC(e).then((function(e){return e.remoteStore}))}function mC(e){return hC(e).then((function(e){return e.syncEngine}))}function vC(e){return $p(this,void 0,void 0,(function(){var t,n;return em(this,(function(r){switch(r.label){case 0:return[4,hC(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=wT.bind(null,t.syncEngine),n.onUnlisten=kT.bind(null,t.syncEngine),n)]}}))}))}function gC(e,t,n){var r=this;void 0===n&&(n={});var i=new cS;return e.asyncQueue.enqueueAndForget((function(){return $p(r,void 0,void 0,(function(){var r;return em(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new rC({next:function(o){t.enqueueAndForget((function(){return oT(e,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new gb(vb.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new gb(vb.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new cT(Fw(n.path),o,{includeMetadataChanges:!0,so:!0});return iT(e,a)},[4,vC(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}function yC(e,t,n){var r=this;void 0===n&&(n={});var i=new cS;return e.asyncQueue.enqueueAndForget((function(){return $p(r,void 0,void 0,(function(){var r;return em(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new rC({next:function(n){t.enqueueAndForget((function(){return oT(e,a)})),n.fromCache&&"server"===r.source?i.reject(new gb(vb.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new cT(n,o,{includeMetadataChanges:!0,so:!0});return iT(e,a)},[4,vC(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}var bC=function(e,t,n,r,i,o,a,s){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},wC=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),_C=new Map,kC=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},SC=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){this.changeListener=t,e.enqueueRetryable((function(){return t(eM.UNAUTHENTICATED)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),EC=function(){function e(e){this.token=e,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),MC=function(){function e(e){var t=this;this.currentUser=eM.UNAUTHENTICATED,this.oc=new cS,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){t.cc++,t.currentUser=t.ac(),t.oc.resolve(),t.changeListener&&t.asyncQueue.enqueueRetryable((function(){return t.changeListener(t.currentUser)}))};var n=function(e){wb("FirebaseCredentialsProvider","Auth detected"),t.auth=e,t.auth.addAuthTokenListener(t.uc)};e.onInit((function(e){return n(e)})),setTimeout((function(){if(!t.auth){var r=e.getImmediate({optional:!0});r?n(r):(wb("FirebaseCredentialsProvider","Auth not yet detected"),t.oc.resolve())}}),0)}return e.prototype.getToken=function(){var e=this,t=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.cc!==t?(wb("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Mb("string"==typeof n.accessToken),new kC(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e,t){var n=this;this.asyncQueue=e,this.asyncQueue.enqueueRetryable((function(){return $p(n,void 0,void 0,(function(){return em(this,(function(e){switch(e.label){case 0:return[4,this.oc.promise];case 1:return e.sent(),[4,t(this.currentUser)];case 2:return e.sent(),this.changeListener=t,[2]}}))}))}))},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},e.prototype.ac=function(){var e=this.auth&&this.auth.getUid();return Mb(null===e||"string"==typeof e),new eM(e)},e}(),TC=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n,this.type="FirstParty",this.user=eM.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.lc},t=this.hc.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.fc&&(e["X-Goog-Iam-Authorization-Token"]=this.fc),e},enumerable:!1,configurable:!0}),e}(),CC=function(){function e(e,t,n){this.hc=e,this.lc=t,this.fc=n}return e.prototype.getToken=function(){return Promise.resolve(new TC(this.hc,this.lc,this.fc))},e.prototype.setChangeListener=function(e,t){e.enqueueRetryable((function(){return t(eM.FIRST_PARTY)}))},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(e,t,n){if(!n)throw new gb(vb.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function xC(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new gb(vb.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function AC(e,t,n,r){if(!0===t&&!0===r)throw new gb(vb.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function PC(e){if(!$b.isDocumentKey(e))throw new gb(vb.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function OC(e){if($b.isDocumentKey(e))throw new gb(vb.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function RC(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":Eb()}function DC(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new gb(vb.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=RC(e);throw new gb(vb.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function NC(e,t){if(t<=0)throw new gb(vb.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LC=function(){function e(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new gb(vb.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new gb(vb.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,AC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams},e}(),jC=function(){function e(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new LC({}),this._settingsFrozen=!1,e instanceof wC?(this._databaseId=e,this._credentials=new SC):(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new gb(vb.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wC(e.options.projectId)}(e),this._credentials=new MC(t))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new gb(vb.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(e){if(this._settingsFrozen)throw new gb(vb.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new LC(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new SC;switch(e.type){case"gapi":var t=e.client;return Mb(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new CC(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new gb(vb.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){var e;return this,(e=_C.get(this))&&(wb("ComponentProvider","Removing Datastore"),_C.delete(this),e.terminate()),Promise.resolve()},e}(),BC=function(){function e(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new UC(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),FC=function(){function e(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),UC=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,Fw(r))||this)._path=r,i.type="collection",i}return Xp(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new BC(this.firestore,null,new $b(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}(FC);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=bn.getModularInstance(e),IC("collection","path",t),e instanceof jC)return OC(n=Bb.fromString.apply(Bb,tm([t],r))),new UC(e,null,n);if(!(e instanceof BC||e instanceof UC))throw new gb(vb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return OC(n=Bb.fromString.apply(Bb,tm([e.path],r)).child(Bb.fromString(t))),new UC(e.firestore,null,n)}function zC(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e=bn.getModularInstance(e),1===arguments.length&&(t=Ib.u()),IC("doc","path",t),e instanceof jC)return PC(n=Bb.fromString.apply(Bb,tm([t],r))),new BC(e,null,new $b(n));if(!(e instanceof BC||e instanceof UC))throw new gb(vb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return PC(n=e._path.child(Bb.fromString.apply(Bb,tm([t],r)))),new BC(e.firestore,e instanceof UC?e.converter:null,new $b(n))}function VC(e,t){return e=bn.getModularInstance(e),t=bn.getModularInstance(t),(e instanceof BC||e instanceof UC)&&(t instanceof BC||t instanceof UC)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function WC(e,t){return e=bn.getModularInstance(e),t=bn.getModularInstance(t),e instanceof FC&&t instanceof FC&&e.firestore===t.firestore&&Yw(e._query,t._query)&&e.converter===t.converter}var HC=function(){function e(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new bM(this,"async_queue_retry"),this.Ic=function(){var t=gM();t&&wb("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Zi.Gi()};var t=gM();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Ac(),this.Rc(e)},e.prototype.enterRestrictedMode=function(e){if(!this._c){this._c=!0,this.Ec=e||!1;var t=gM();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ic)}},e.prototype.enqueue=function(e){var t=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new cS;return this.Rc((function(){return t._c&&t.Ec?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},e.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget((function(){return t.wc.push(e),t.bc()}))},e.prototype.bc=function(){return $p(this,void 0,void 0,(function(){var e,t=this;return em(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!mS(e=n.sent()))throw e;return wb("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return t.bc()})),n.label=5;case 5:return[2]}}))}))},e.prototype.Rc=function(e){var t=this,n=this.dc.then((function(){return t.gc=!0,e().catch((function(e){throw t.yc=e,t.gc=!1,_b("INTERNAL UNHANDLED ERROR: ",(r=(n=e).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),e;var n,r})).then((function(e){return t.gc=!1,e}))}));return this.dc=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.Ac(),this.Tc.indexOf(e)>-1&&(t=0);var i=ZM.createAndSchedule(this,e,t,n,(function(e){return r.vc(e)}));return this.mc.push(i),i},e.prototype.Ac=function(){this.yc&&Eb()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Pc=function(){return $p(this,void 0,void 0,(function(){var e;return em(this,(function(t){switch(t.label){case 0:return[4,e=this.dc];case 1:t.sent(),t.label=2;case 2:if(e!==this.dc)return[3,0];t.label=3;case 3:return[2]}}))}))},e.prototype.Vc=function(e){for(var t=0,n=this.mc;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.Sc=function(e){var t=this;return this.Pc().then((function(){t.mc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==e&&i.timerId===e)break}return t.Pc()}))},e.prototype.Dc=function(e){this.Tc.push(e)},e.prototype.vc=function(e){var t=this.mc.indexOf(e);this.mc.splice(t,1)},e}();function KC(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var GC=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new cS,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(e,t,n){this._progressObserver={next:e,error:t,complete:n}},e.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},e.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},e.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},e.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},e.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)},e}(),YC=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).type="firestore",r._queue=new HC,r._persistenceKey="name"in t?t.name:"[DEFAULT]",r}return Xp(t,e),t.prototype._terminate=function(){return this._firestoreClient||JC(this),this._firestoreClient.terminate()},t}(jC);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(e){return e._firestoreClient||JC(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function JC(e){var t,n,r,i,o,a=e._freezeSettings(),s=(n=e._databaseId,r=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",i=e._persistenceKey,new bC(n,r,i,(o=a).host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams));e._firestoreClient=new sC(e._credentials,e._queue,s)}function ZC(e,t,n){var r=this,i=new cS;return e.asyncQueue.enqueue((function(){return $p(r,void 0,void 0,(function(){var r;return em(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,uC(e,n)];case 1:return o.sent(),[4,cC(e,t)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(a=r=o.sent()).name?a.code===vb.FAILED_PRECONDITION||a.code===vb.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}var a}))}))})).then((function(){return i.promise}))}function XC(e){if(e._initialized||e._terminated)throw new gb(vb.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $C=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;++n)if(0===e[n].length)throw new gb(vb.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ub(e)}return e.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},e}(),eI=function(){function e(e){this._byteString=e}return e.fromBase64String=function(t){try{return new e(zb.fromBase64String(t))}catch(e){throw new gb(vb.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},e.fromUint8Array=function(t){return new e(zb.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},e}(),tI=function(e){this._methodName=e},nI=function(){function e(e,t){if(!isFinite(e)||e<-90||e>90)throw new gb(vb.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new gb(vb.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(e){return xb(this._lat,e._lat)||xb(this._long,e._long)},e}(),rI=/^__.*__$/,iI=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return null!==this.fieldMask?new T_(e,this.data,this.fieldMask,t,this.fieldTransforms):new M_(e,this.data,t,this.fieldTransforms)},e}(),oI=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return new T_(e,this.data,this.fieldMask,t,this.fieldTransforms)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Eb()}}var sI=function(){function e(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),e.prototype.xc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,Fc:!1});return r.$c(e),r},e.prototype.Oc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xc({path:n,Fc:!1});return r.Cc(),r},e.prototype.Mc=function(e){return this.xc({path:void 0,Fc:!0})},e.prototype.Lc=function(e){return CI(e,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.Cc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.$c(this.path.get(e))},e.prototype.$c=function(e){if(0===e.length)throw this.Lc("Document fields must not be empty");if(aI(this.Nc)&&rI.test(e))throw this.Lc('Document fields cannot begin and end with "__"')},e}(),uI=function(){function e(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=n||yM(e)}return e.prototype.Uc=function(e,t,n,r){return void 0===r&&(r=!1),new sI({Nc:e,methodName:t,qc:n,path:Ub.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function cI(e){var t=e._freezeSettings(),n=yM(e._databaseId);return new uI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function lI(e,t,n,r,i,o){void 0===o&&(o={});var a=e.Uc(o.merge||o.mergeFields?2:0,t,n,i);SI("Data must be an object, but it was:",a,r);var s,u,c=_I(r,a);if(o.merge)s=new qb(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=EI(t,f[h],n);if(!a.contains(d))throw new gb(vb.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");II(l,d)||l.push(d)}s=new qb(l),u=a.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=a.fieldTransforms;return new iI(new pw(c),s,u)}var hI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xp(t,e),t.prototype._toFieldTransform=function(e){if(2!==e.Nc)throw 1===e.Nc?e.Lc(this._methodName+"() can only appear at the top level of your update data"):e.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(tI);function fI(e,t,n){return new sI({Nc:3,qc:t.settings.qc,methodName:e._methodName,Fc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var dI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xp(t,e),t.prototype._toFieldTransform=function(e){return new m_(e.path,new s_)},t.prototype.isEqual=function(e){return e instanceof t},t}(tI),pI=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return Xp(t,e),t.prototype._toFieldTransform=function(e){var t=fI(this,e,!0),n=this.Kc.map((function(e){return wI(e,t)})),r=new u_(n);return new m_(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(tI),mI=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Kc=n,r}return Xp(t,e),t.prototype._toFieldTransform=function(e){var t=fI(this,e,!0),n=this.Kc.map((function(e){return wI(e,t)})),r=new l_(n);return new m_(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(tI),vI=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Qc=n,r}return Xp(t,e),t.prototype._toFieldTransform=function(e){var t=new f_(e.R,n_(e.R,this.Qc));return new m_(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(tI);function gI(e,t,n,r){var i=e.Uc(1,t,n);SI("Data must be an object, but it was:",i,r);var o=[],a=pw.empty();Nb(r,(function(e,r){var s=TI(t,e,n);r=bn.getModularInstance(r);var u=i.Oc(s);if(r instanceof hI)o.push(s);else{var c=wI(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new qb(o);return new oI(a,s,i.fieldTransforms)}function yI(e,t,n,r,i,o){var a=e.Uc(1,t,n),s=[EI(t,r,n)],u=[i];if(o.length%2!=0)throw new gb(vb.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(EI(t,o[c])),u.push(o[c+1]);for(var l=[],h=pw.empty(),f=s.length-1;f>=0;--f)if(!II(l,s[f])){var d=s[f],p=u[f];p=bn.getModularInstance(p);var m=a.Oc(d);if(p instanceof hI)l.push(d);else{var v=wI(p,m);null!=v&&(l.push(d),h.set(d,v))}}var g=new qb(l);return new oI(h,g,a.fieldTransforms)}function bI(e,t,n,r){return void 0===r&&(r=!1),wI(n,e.Uc(r?4:3,t))}function wI(e,t){if(kI(e=bn.getModularInstance(e)))return SI("Unsupported field value:",t,e),_I(e,t);if(e instanceof tI)return function(e,t){if(!aI(t.Nc))throw t.Lc(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.Lc(e._methodName+"() is not currently supported inside arrays");var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=wI(o[i],t.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=bn.getModularInstance(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return n_(t.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Ob.fromDate(e);return{timestampValue:lk(t.R,n)}}if(e instanceof Ob)return n=new Ob(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:lk(t.R,n)};if(e instanceof nI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof eI)return{bytesValue:hk(t.R,e._byteString)};if(e instanceof BC){n=t.databaseId;var r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:pk(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Lc("Unsupported field value: "+RC(e))}(e,t)}function _I(e,t){var n={};return Lb(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Nb(e,(function(e,r){var i=wI(r,t.kc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function kI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ob||e instanceof nI||e instanceof eI||e instanceof BC||e instanceof tI)}function SI(e,t,n){if(!kI(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=RC(n);throw"an object"===r?t.Lc(e+" a custom object"):t.Lc(e+" "+r)}var i}function EI(e,t,n){if((t=bn.getModularInstance(t))instanceof $C)return t._internalPath;if("string"==typeof t)return TI(e,t);throw CI("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var MI=new RegExp("[~\\*/\\[\\]]");function TI(e,t,n){if(t.search(MI)>=0)throw CI("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return(new($C.bind.apply($C,tm([void 0],t.split(".")))))._internalPath}catch(r){throw CI("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function CI(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+t+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new gb(vb.INVALID_ARGUMENT,(s+=". ")+e+u)}function II(e,t){return e.some((function(e){return e.isEqual(t)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xI=function(){function e(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new BC(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return null!==this._document},e.prototype.data=function(){if(this._document){if(this._converter){var e=new AI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}},e.prototype.get=function(e){if(this._document){var t=this._document.data.field(PI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},e}(),AI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xp(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(xI);function PI(e,t){return"string"==typeof t?TI(e,t):t instanceof $C?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OI=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),RI=function(e){function t(t,n,r,i,o,a){var s=this;return(s=e.call(this,t,n,r,i,a)||this)._firestore=t,s._firestoreImpl=t,s.metadata=o,s}return Xp(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var t=new DI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}},t.prototype.get=function(e,t){if(void 0===t&&(t={}),this._document){var n=this._document.data.field(PI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}},t}(xI),DI=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xp(t,e),t.prototype.data=function(t){return void 0===t&&(t={}),e.prototype.data.call(this,t)},t}(RI),NI=function(){function e(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new OI(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new DI(n._firestore,n._userDataWriter,r.key,r,new OI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},e.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new gb(vb.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new DI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new OI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new DI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new OI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:LI(t.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e}();function LI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Eb()}}function jI(e,t){return e instanceof RI&&t instanceof RI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof NI&&t instanceof NI&&e._firestore===t._firestore&&WC(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(e){if(qw(e)&&0===e.explicitOrderBy.length)throw new gb(vb.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var FI=function(){};function UI(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];e=o._apply(e)}return e}var qI=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).jc=t,i.Wc=n,i.Gc=r,i.type="where",i}return Xp(t,e),t.prototype._apply=function(e){var t,n,r,i=cI(e.firestore),o=function(e,t,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new gb(vb.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){YI(a,o);for(var u=[],c=0,l=a;c<l.length;c++){var h=l[c];u.push(GI(r,e,h))}s={arrayValue:{values:u}}}else s=GI(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||YI(a,o),s=bI(n,"where",a,"in"===o||"not-in"===o);var f=kw.create(i,o,s);return function(e,t){if(t.g()){var n=Vw(e);if(null!==n&&!n.isEqual(t.field))throw new gb(vb.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=zw(e);null!==r&&QI(e,t.field,r)}var i=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(t.indexOf(i.op)>=0)return i.op}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new gb(vb.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new gb(vb.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,f),f}(e._query,0,i,e.firestore._databaseId,this.jc,this.Wc,this.Gc);return new FC(e.firestore,e.converter,(t=e._query,n=o,r=t.filters.concat([n]),new jw(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)))},t}(FI),zI=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).jc=t,r.zc=n,r.type="orderBy",r}return Xp(t,e),t.prototype._apply=function(e){var t,n,r,i=function(e,t,n){if(null!==e.startAt)throw new gb(vb.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new gb(vb.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Rw(t,n);return function(e,t){if(null===zw(e)){var n=Vw(e);null!==n&&QI(e,n,t.field)}}(e,r),r}(e._query,this.jc,this.zc);return new FC(e.firestore,e.converter,(t=e._query,n=i,r=t.explicitOrderBy.concat([n]),new jw(t.path,t.collectionGroup,r,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},t}(FI),VI=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Hc=n,i.Jc=r,i}return Xp(t,e),t.prototype._apply=function(e){return new FC(e.firestore,e.converter,Gw(e._query,this.Hc,this.Jc))},t}(FI),WI=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Yc=n,i.Xc=r,i}return Xp(t,e),t.prototype._apply=function(e){var t,n,r=KI(e,this.type,this.Yc,this.Xc);return new FC(e.firestore,e.converter,(t=e._query,n=r,new jw(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,n,t.endAt)))},t}(FI),HI=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Yc=n,i.Xc=r,i}return Xp(t,e),t.prototype._apply=function(e){var t,n,r=KI(e,this.type,this.Yc,this.Xc);return new FC(e.firestore,e.converter,(t=e._query,n=r,new jw(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,n)))},t}(FI);function KI(e,t,n,r){if(n[0]=bn.getModularInstance(n[0]),n[0]instanceof xI)return function(e,t,n,r,i){if(!r)throw new gb(vb.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Hw(e);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(sw(t,r.key));else{var c=r.data.field(u.field);if(Gb(c))throw new gb(vb.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new gb(vb.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Pw(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=cI(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new gb(vb.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new gb(vb.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ww(e)&&-1!==c.indexOf("/"))throw new gb(vb.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=e.path.child(Bb.fromString(c));if(!$b.isDocumentKey(l))throw new gb(vb.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new $b(l);s.push(sw(t,h))}else{var f=bI(n,r,c);s.push(f)}}return new Pw(s,o)}(e._query,e.firestore._databaseId,i,t,n,r)}function GI(e,t,n){if("string"==typeof(n=bn.getModularInstance(n))){if(""===n)throw new gb(vb.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ww(t)&&-1!==n.indexOf("/"))throw new gb(vb.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(Bb.fromString(n));if(!$b.isDocumentKey(r))throw new gb(vb.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return sw(e,new $b(r))}if(n instanceof BC)return sw(e,n._key);throw new gb(vb.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+RC(n)+".")}function YI(e,t){if(!Array.isArray(e)||0===e.length)throw new gb(vb.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new gb(vb.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function QI(e,t,n){if(!n.isEqual(t))throw new gb(vb.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JI=function(){function e(){}return e.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),ew(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hb(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Kb(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Eb()}},e.prototype.convertObject=function(e,t){var n=this,r={};return Nb(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r},e.prototype.convertGeoPoint=function(e){return new nI(Hb(e.latitude),Hb(e.longitude))},e.prototype.convertArray=function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))},e.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var n=Yb(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Qb(e));default:return null}},e.prototype.convertTimestamp=function(e){var t=Wb(e);return new Ob(t.seconds,t.nanos)},e.prototype.convertDocumentKey=function(e,t){var n=Bb.fromString(e);Mb(Fk(n));var r=new wC(n.get(1),n.get(3)),i=new $b(n.popFirst(5));return r.isEqual(t)||_b("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),i},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var XI=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return Xp(t,e),t.prototype.convertBytes=function(e){return new eI(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new BC(this.firestore,null,t)},t}(JI),$I=function(){function e(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cI(e)}return e.prototype.set=function(e,t,n){this._verifyNotCommitted();var r=ex(e,this._firestore),i=ZI(r.converter,t,n),o=lI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,g_.none())),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=ex(e,this._firestore);return o="string"==typeof(t=bn.getModularInstance(t))||t instanceof $C?yI(this._dataReader,"WriteBatch.update",a._key,t,n,r):gI(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,g_.exists(!0))),this},e.prototype.delete=function(e){this._verifyNotCommitted();var t=ex(e,this._firestore);return this._mutations=this._mutations.concat(new O_(t._key,g_.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new gb(vb.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(e,t){if((e=bn.getModularInstance(e)).firestore!==t)throw new gb(vb.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tx=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return Xp(t,e),t.prototype.convertBytes=function(e){return new eI(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new BC(this.firestore,null,t)},t}(JI);function nx(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=DC(e,BC);var o=DC(e.firestore,YC),a=cI(o);return ix(o,[("string"==typeof(t=bn.getModularInstance(t))||t instanceof $C?yI(a,"updateDoc",e._key,t,n,r):gI(a,"updateDoc",e._key,t)).toMutation(e._key,g_.exists(!0))])}function rx(e){for(var t,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];e=bn.getModularInstance(e);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||KC(i[s])||(a=i[s],s++);var u,c,l,h={includeMetadataChanges:a.includeMetadataChanges};if(KC(i[s])){var f=i[s];i[s]=null===(t=f.next)||void 0===t?void 0:t.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(e instanceof BC)c=DC(e.firestore,YC),l=Fw(e._key.path),u={next:function(t){i[s]&&i[s](ox(c,e,t))},error:i[s+1],complete:i[s+2]};else{var d=DC(e,FC);c=DC(d.firestore,YC),l=d._query;var p=new tx(c);u={next:function(e){i[s]&&i[s](new NI(c,p,d,e))},error:i[s+1],complete:i[s+2]},BI(e._query)}return function(e,t,n,r){var i=this,o=new rC(r),a=new cT(t,o,n);return e.asyncQueue.enqueueAndForget((function(){return $p(i,void 0,void 0,(function(){var t;return em(this,(function(n){switch(n.label){case 0:return t=iT,[4,vC(e)];case 1:return[2,t.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),e.asyncQueue.enqueueAndForget((function(){return $p(i,void 0,void 0,(function(){var t;return em(this,(function(n){switch(n.label){case 0:return t=oT,[4,vC(e)];case 1:return[2,t.apply(void 0,[n.sent(),a])]}}))}))}))}}(QC(c),l,h,u)}function ix(e,t){return function(e,t){var n=this,r=new cS;return e.asyncQueue.enqueueAndForget((function(){return $p(n,void 0,void 0,(function(){var n;return em(this,(function(i){switch(i.label){case 0:return n=ST,[4,mC(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(QC(e),t)}function ox(e,t,n){var r=n.docs.get(t._key),i=new tx(e);return new RI(e,i,t._key,r,new OI(n.hasPendingWrites,n.fromCache),t.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ax=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._firestore=t,r}return Xp(t,e),t.prototype.get=function(t){var n=this,r=ex(t,this._firestore),i=new tx(this._firestore);return e.prototype.get.call(this,t).then((function(e){return new RI(n._firestore,i,r._key,e._document,new OI(!1,!1),r.converter)}))},t}(function(){function e(e,t){this._firestore=e,this._transaction=t,this._dataReader=cI(e)}return e.prototype.get=function(e){var t=this,n=ex(e,this._firestore),r=new XI(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Eb();var i=e[0];if(i.isFoundDocument())return new xI(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new xI(t._firestore,r,n._key,null,n.converter);throw Eb()}))},e.prototype.set=function(e,t,n){var r=ex(e,this._firestore),i=ZI(r.converter,t,n),o=lI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=ex(e,this._firestore);return o="string"==typeof(t=bn.getModularInstance(t))||t instanceof $C?yI(this._dataReader,"Transaction.update",a._key,t,n,r):gI(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,o),this},e.prototype.delete=function(e){var t=ex(e,this._firestore);return this._transaction.delete(t._key),this},e}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(){if("undefined"==typeof Uint8Array)throw new gb(vb.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ux(){if("undefined"==typeof atob)throw new gb(vb.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var cx=function(){function e(e){this._delegate=e}return e.fromBase64String=function(t){return ux(),new e(eI.fromBase64String(t))},e.fromUint8Array=function(t){return sx(),new e(eI.fromUint8Array(t))},e.prototype.toBase64=function(){return ux(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return sx(),this._delegate.toUint8Array()},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),lx=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(e,t){return function(e,t){XC(e=DC(e,YC));var n=QC(e),r=e._freezeSettings(),i=new tC;return ZC(n,i,new $T(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})},e.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(e){XC(e=DC(e,YC));var t=QC(e),n=e._freezeSettings(),r=new tC;return ZC(t,r,new eC(r,n.cacheSizeBytes))}(e._delegate)},e.prototype.clearIndexedDbPersistence=function(e){return function(e){var t=this;if(e._initialized&&!e._terminated)throw new gb(vb.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new cS;return e._queue.enqueueAndForgetEvenWhileRestricted((function(){return $p(t,void 0,void 0,(function(){var t;return em(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e){return $p(this,void 0,void 0,(function(){var t;return em(this,(function(n){switch(n.label){case 0:return fS.yt()?(t=e+"main",[4,fS.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(SE(e._databaseId,e._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise}(e._delegate)},e}(),hx=function(){function e(e,t,n){var r=this;this._delegate=t,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},e instanceof wC||(this.tu=e)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||kb("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),function(e,t,n,r){var i;void 0===r&&(r={});var o=(e=DC(e,jC))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&kb("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:t+":"+n,ssl:!1})),r.mockUserToken){var a,s;if("string"==typeof r.mockUserToken)a=r.mockUserToken,s=eM.MOCK_USER;else{a=bn.createMockUserToken(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new gb(vb.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new eM(u)}e._credentials=new EC(new kC(a,s))}}(this._delegate,e,t,n)},e.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return $p(t,void 0,void 0,(function(){var t,n;return em(this,(function(r){switch(r.label){case 0:return[4,fC(e)];case 1:return t=r.sent(),[4,pC(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!0),i=n,o=Tb(i),o.Or.delete(0),TM(o))]}var i,o}))}))}))}(QC(DC(this._delegate,YC)))},e.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return $p(t,void 0,void 0,(function(){var t,n;return em(this,(function(r){switch(r.label){case 0:return[4,fC(e)];case 1:return t=r.sent(),[4,pC(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!1),function(e){return $p(this,void 0,void 0,(function(){var t;return em(this,(function(n){switch(n.label){case 0:return(t=Tb(e)).Or.add(0),[4,CM(t)];case 1:return n.sent(),t.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(QC(DC(this._delegate,YC)))},e.prototype.enablePersistence=function(e){var t=!1,n=!1;return e&&AC("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(e){var t=this,n=new cS;return e.asyncQueue.enqueueAndForget((function(){return $p(t,void 0,void 0,(function(){var t;return em(this,(function(r){switch(r.label){case 0:return t=xT,[4,mC(e)];case 1:return[2,t.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(QC(DC(this._delegate,YC)))},e.prototype.onSnapshotsInSync=function(e){return t=this._delegate,n=e,function(e,t){var n=this,r=new rC(t);return e.asyncQueue.enqueueAndForget((function(){return $p(n,void 0,void 0,(function(){var t;return em(this,(function(n){switch(n.label){case 0:return t=function(e,t){Tb(e).Gr.add(t),t.next()},[4,vC(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),e.asyncQueue.enqueueAndForget((function(){return $p(n,void 0,void 0,(function(){var t;return em(this,(function(n){switch(n.label){case 0:return t=function(e,t){Tb(e).Gr.delete(t)},[4,vC(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))}))}}(QC(t=DC(t,YC)),KC(n)?n:{next:n});var t,n},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.tu)throw new gb(vb.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new Mx(this,qC(this._delegate,e))}catch(e){throw gx(e,"collection()","Firestore.collection()")}},e.prototype.doc=function(e){try{return new vx(this,zC(this._delegate,e))}catch(e){throw gx(e,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(e){try{return new kx(this,function(e,t){if(e=DC(e,jC),IC("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new gb(vb.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new FC(e,null,(n=t,new jw(Bb.emptyPath(),n)));var n}(this._delegate,e))}catch(e){throw gx(e,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(e){var t,n=this;return function(e,t){var n=this,r=new cS;return e.asyncQueue.enqueueAndForget((function(){return $p(n,void 0,void 0,(function(){var n;return em(this,(function(i){switch(i.label){case 0:return[4,(o=e,hC(o).then((function(e){return e.datastore})))];case 1:return n=i.sent(),new aC(e.asyncQueue,n,t,r).run(),[2]}var o}))}))})),r.promise}(QC(t=this._delegate),(function(r){return function(t){return e(new dx(n,t))}(new ax(t,r))}))},e.prototype.batch=function(){var e=this;return QC(this._delegate),new px(new $I(this._delegate,(function(t){return ix(e._delegate,t)})))},e.prototype.loadBundle=function(e){throw new gb(vb.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(e){throw new gb(vb.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),fx=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return Xp(t,e),t.prototype.convertBytes=function(e){return new cx(new eI(e))},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return vx.eu(t,this.firestore,null)},t}(JI);var dx=function(){function e(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new fx(e)}return e.prototype.get=function(e){var t=this,n=Tx(e);return this._delegate.get(n).then((function(e){return new wx(t._firestore,new RI(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))},e.prototype.set=function(e,t,n){var r=Tx(e);return n?(xC("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Tx(e);return 2===arguments.length?this._delegate.update(a,t):(r=this._delegate).update.apply(r,tm([a,t,n],i)),this},e.prototype.delete=function(e){var t=Tx(e);return this._delegate.delete(t),this},e}(),px=function(){function e(e){this._delegate=e}return e.prototype.set=function(e,t,n){var r=Tx(e);return n?(xC("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=Tx(e);return 2===arguments.length?this._delegate.update(a,t):(r=this._delegate).update.apply(r,tm([a,t,n],i)),this},e.prototype.delete=function(e){var t=Tx(e);return this._delegate.delete(t),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),mx=function(){function e(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}return e.prototype.fromFirestore=function(e,t){var n=new DI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _x(this._firestore,n),null!=t?t:{})},e.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},e.nu=function(t,n){var r=e.su,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new fx(t),n),i.set(n,o)),o},e}();mx.su=new WeakMap;var vx=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fx(e)}return e.iu=function(t,n,r){if(t.length%2!=0)throw new gb(vb.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new BC(n._delegate,r,new $b(t)))},e.eu=function(t,n,r){return new e(n,new BC(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Mx(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new Mx(this.firestore,qC(this._delegate,e))}catch(e){throw gx(e,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(e){return(e=bn.getModularInstance(e))instanceof BC&&VC(this._delegate,e)},e.prototype.set=function(e,t){t=xC("DocumentReference.set",t);try{return function(e,t,n){e=DC(e,BC);var r=DC(e.firestore,YC),i=ZI(e.converter,t,n);return ix(r,[lI(cI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,g_.none())])}(this._delegate,e,t)}catch(e){throw gx(e,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?nx(this._delegate,e):nx.apply(void 0,tm([this._delegate,e,t],n))}catch(e){throw gx(e,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){var e;return ix(DC((e=this._delegate).firestore,YC),[new O_(e._key,g_.none())])},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=yx(t),i=bx(t,(function(t){return new wx(e.firestore,new RI(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return rx(this._delegate,r,i)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=DC(e,BC);var t=DC(e.firestore,YC),n=QC(t),r=new tx(t);return function(e,t){var n=this,r=new cS;return e.asyncQueue.enqueueAndForget((function(){return $p(n,void 0,void 0,(function(){var n;return em(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return $p(this,void 0,void 0,(function(){var r,i;return em(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(a=e,s=t,u=Tb(a),u.persistence.runTransaction("read document","readonly",(function(e){return u.Mn.mn(e,s)})))];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new gb(vb.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=XM(r,"Failed to get document '"+t+" from cache"),n.reject(i),[3,3];case 3:return[2]}var a,s,u}))}))},[4,dC(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._key).then((function(n){return new RI(t,r,e._key,n,new OI(null!==n&&n.hasLocalMutations,!0),e.converter)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=DC(e,BC);var t=DC(e.firestore,YC);return gC(QC(t),e._key,{source:"server"}).then((function(n){return ox(t,e,n)}))}(this._delegate):function(e){e=DC(e,BC);var t=DC(e.firestore,YC);return gC(QC(t),e._key).then((function(n){return ox(t,e,n)}))}(this._delegate)).then((function(e){return new wx(t.firestore,new RI(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(mx.nu(this.firestore,t)):this._delegate.withConverter(null))},e}();function gx(e,t,n){return e.message=e.message.replace(t,n),e}function yx(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if("object"==typeof r&&!KC(r))return r}return{}}function bx(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=KC(e[0])?e[0]:KC(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var wx=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"ref",{get:function(){return new vx(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(e){return this._delegate.data(e)},e.prototype.get=function(e,t){return this._delegate.get(e,t)},e.prototype.isEqual=function(e){return jI(this._delegate,e._delegate)},e}(),_x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xp(t,e),t.prototype.data=function(e){return this._delegate.data(e)},t}(wx),kx=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fx(e)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,UI(this._delegate,(o=r,a=i=n,s=PI("where",t),new qI(s,a,o))))}catch(i){throw gx(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,o,a,s},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,UI(this._delegate,function(e,t){void 0===t&&(t="asc");var n=t,r=PI("orderBy",e);return new zI(r,n)}(t,n)))}catch(e){throw gx(e,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,UI(this._delegate,(NC("limit",n=t),new VI("limit",n,"F"))))}catch(e){throw gx(e,"limit()","Query.limit()")}var n},e.prototype.limitToLast=function(t){try{return new e(this.firestore,UI(this._delegate,(NC("limitToLast",n=t),new VI("limitToLast",n,"L"))))}catch(e){throw gx(e,"limitToLast()","Query.limitToLast()")}var n},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,UI(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new WI("startAt",e,!0)}.apply(void 0,t)))}catch(e){throw gx(e,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,UI(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new WI("startAfter",e,!1)}.apply(void 0,t)))}catch(e){throw gx(e,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,UI(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new HI("endBefore",e,!0)}.apply(void 0,t)))}catch(e){throw gx(e,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,UI(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new HI("endAt",e,!1)}.apply(void 0,t)))}catch(e){throw gx(e,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(e){return WC(this._delegate,e._delegate)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=DC(e,FC);var t=DC(e.firestore,YC),n=QC(t),r=new tx(t);return function(e,t){var n=this,r=new cS;return e.asyncQueue.enqueueAndForget((function(){return $p(n,void 0,void 0,(function(){var n;return em(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return $p(this,void 0,void 0,(function(){var r,i,o,a,s;return em(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,BE(e,t,!0)];case 1:return s=u.sent(),r=new vT(t,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=XM(a,"Failed to execute query '"+t+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,dC(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._query).then((function(n){return new NI(t,r,e,n)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=DC(e,FC);var t=DC(e.firestore,YC),n=QC(t),r=new tx(t);return yC(n,e._query,{source:"server"}).then((function(n){return new NI(t,r,e,n)}))}(this._delegate):function(e){e=DC(e,FC);var t=DC(e.firestore,YC),n=QC(t),r=new tx(t);return BI(e._query),yC(n,e._query).then((function(n){return new NI(t,r,e,n)}))}(this._delegate)).then((function(e){return new Ex(t.firestore,new NI(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=yx(t),i=bx(t,(function(t){return new Ex(e.firestore,new NI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return rx(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(mx.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(),Sx=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new _x(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),Ex=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"query",{get:function(){return new kx(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map((function(t){return new _x(e._firestore,t)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Sx(t._firestore,e)}))},e.prototype.forEach=function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new _x(n._firestore,r))}))},e.prototype.isEqual=function(e){return jI(this._delegate,e._delegate)},e}(),Mx=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).firestore=t,r._delegate=n,r}return Xp(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new vx(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new vx(this.firestore,void 0===e?zC(this._delegate):zC(this._delegate,e))}catch(e){throw gx(e,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var t,n,r,i,o,a=this;return(t=this._delegate,n=e,r=DC(t.firestore,YC),i=zC(t),o=ZI(t.converter,n),ix(r,[lI(cI(t.firestore),"addDoc",i._key,o,null!==t.converter,{}).toMutation(i._key,g_.exists(!1))]).then((function(){return i}))).then((function(e){return new vx(a.firestore,e)}))},t.prototype.isEqual=function(e){return VC(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(mx.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(kx);function Tx(e){return DC(e,BC)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cx=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new($C.bind.apply($C,tm([void 0],e)))}return e.documentId=function(){return new e(Ub.keyField().canonicalString())},e.prototype.isEqual=function(e){return(e=bn.getModularInstance(e))instanceof $C&&this._delegate._internalPath.isEqual(e._internalPath)},e}(),Ix=function(){function e(e){this._delegate=e}return e.serverTimestamp=function(){var t=new dI("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new hI("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new pI("arrayUnion",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new mI("arrayRemove",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=new vI("increment",t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(e){return t=this._delegate,n=e,r=QC(t=DC(t,YC)),i=new GC,function(e,t,n,r){var i,o,a,s=this,u=(i=n,o=yM(t),a=function(e,t){if(e instanceof Uint8Array)return nC(e,t);if(e instanceof ArrayBuffer)return nC(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof i?(new TextEncoder).encode(i):i),new iC(a,o));e.asyncQueue.enqueueAndForget((function(){return $p(s,void 0,void 0,(function(){var t;return em(this,(function(n){switch(n.label){case 0:return t=ZT,[4,mC(e)];case 1:return t.apply(void 0,[n.sent(),u,r]),[2]}}))}))}))}(r,t._databaseId,n,i),i;var t,n,r,i}function Ax(e){var t,n,r=this;return(t=this._delegate,n=e,function(e,t){var n=this;return e.asyncQueue.enqueue((function(){return $p(n,void 0,void 0,(function(){var n;return em(this,(function(r){switch(r.label){case 0:return n=function(e,t){var n=Tb(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ke.getNamedQuery(e,t)}))},[4,dC(e)];case 1:return[2,n.apply(void 0,[r.sent(),t])]}}))}))}))}(QC(t=DC(t,YC)),n).then((function(e){return e?new FC(t,null,e.query):null}))).then((function(e){return e?new kx(r,e):null}))}o("1xTls");var Px,Ox,Rx={Firestore:hx,GeoPoint:nI,Timestamp:Ob,Blob:cx,Transaction:dx,WriteBatch:px,DocumentReference:vx,DocumentSnapshot:wx,Query:kx,QueryDocumentSnapshot:_x,QuerySnapshot:Ex,CollectionReference:Mx,FieldPath:Cx,FieldValue:Ix,setLogLevel:function(e){var t;t=e,yb.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Px=er).INTERNAL.registerComponent(new Mn("firestore",(function(e){return function(e,t){return new hx(e,new YC(e,t),new lx)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Rx))),Px.registerVersion("@firebase/firestore","2.4.0"),o("1xTls"),(Ox=hx).prototype.loadBundle=xx,Ox.prototype.namedQuery=Ax;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Dx=function(e,t){return(Dx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Nx(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function Lx(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}Object.create;Object.create;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var jx={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Bx=function(e){function t(n,r,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=i,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Dx(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error);var Fx=function(){function e(e,t){var n=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then((function(e){return n.auth=e}),(function(){})),this.messaging||t.get().then((function(e){return n.messaging=e}),(function(){}))}return e.prototype.getAuthToken=function(){return Nx(this,void 0,void 0,(function(){var e;return Lx(this,(function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},e.prototype.getInstanceIdToken=function(){return Nx(this,void 0,void 0,(function(){return Lx(this,(function(e){switch(e.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},e.prototype.getContext=function(){return Nx(this,void 0,void 0,(function(){var e,t;return Lx(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}}))}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var qx=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map((function(e){return t.encode(e)}));if("function"==typeof e||"object"==typeof e)return Ux(e,(function(e){return t.encode(e)}));throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((function(e){return t.decode(e)})):"function"==typeof e||"object"==typeof e?Ux(e,(function(e){return t.decode(e)})):e},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zx=function(){function e(e,t,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=e,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new qx,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new Fx(t,n),this.cancelAllRequests=new Promise((function(e){a.deleteService=function(){return e()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(e){this.customDomain=null,this.region=i}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+t+"/"+this.region+"/"+e:null!==this.customDomain?this.customDomain+"/"+e:"https://"+this.region+"-"+t+".cloudfunctions.net/"+e},e.prototype.useEmulator=function(e,t){this.emulatorOrigin="http://"+e+":"+t},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},e.prototype.postJSON=function(e,t,n){return Nx(this,void 0,void 0,(function(){var r,i,o;return Lx(this,(function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=a.sent())&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},e.prototype.getAppCheckToken=function(){return Nx(this,void 0,void 0,(function(){var e;return Lx(this,(function(t){switch(t.label){case 0:return(e=this.appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}}))}))},e.prototype.call=function(e,t,n){return Nx(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f,d;return Lx(this,(function(p){switch(p.label){case 0:return r=this._url(e),t=this.serializer.encode(t),i={data:t},o={},[4,this.contextProvider.getContext()];case 1:return(a=p.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,u=function(e){var t,n=new Promise((function(n,r){t=setTimeout((function(){r(new Bx("deadline-exceeded","deadline-exceeded"))}),e)}));return{timer:t,promise:n}}(s),c=u.timer,l=u.promise,[4,Promise.race([Vx(c,this.postJSON(r,i,o)),l,Vx(c,this.cancelAllRequests)])];case 2:if(!(h=p.sent()))throw new Bx("cancelled","Firebase Functions instance was deleted.");if(f=function(e,t,n){var r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r,o=void 0;try{var a=t&&t.error;if(a){var s=a.status;if("string"==typeof s){if(!jx[s])return new Bx("internal","internal");r=jx[s],i=s}var u=a.message;"string"==typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(e){}return"ok"===r?null:new Bx(r,i,o)}(h.status,h.json,this.serializer))throw f;if(!h.json)throw new Bx("internal","Response is not valid JSON object.");if(void 0===(d=h.json.data)&&(d=h.json.result),void 0===d)throw new Bx("internal","Response is missing data field.");return[2,{data:this.serializer.decode(d)}]}}))}))},e}();function Vx(e,t){return Nx(this,void 0,void 0,(function(){var n;return Lx(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wx,Hx,Kx;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Wx=er,Hx=fetch.bind(self),Kx={Functions:zx},Wx.INTERNAL.registerComponent(new Mn("functions",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal"),a=e.getProvider("messaging");return new zx(r,i,a,o,n,Hx)}),"PUBLIC").setServiceProps(Kx).setMultipleInstances(!0)),er.registerVersion("@firebase/functions","0.6.15");var Gx=function(){return(Gx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Yx(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function Qx(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}Object.create;function Jx(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zx(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}Object.create;bn=o("1xTls");var Xx={};!function(e,t){"object"==typeof Xx?t(Xx):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).idb={})}(Xx,(function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,o=new Promise((function(o,a){n(i=e[t].apply(e,r)).then(o,a)}));return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new l(e,i.request)}))}function o(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function a(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function s(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function u(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new f(n)}function p(e){this._db=e}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new l(e,t._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[h,c].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=function(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new d(o.result,e.oldVersion,o.transaction))}),i.then((function(e){return new p(e)}))},e.deleteDb=function(e){return r(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}));var $x,eA="0.4.32",tA=1e4,nA="w:0.4.32",rA="FIS_v2",iA=36e5,oA=(($x={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',$x["not-registered"]="Firebase Installation is not registered.",$x["installation-not-found"]="Firebase Installation not found.",$x["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',$x["app-offline"]="Could not process request. Application offline.",$x["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",$x),aA=new bn.ErrorFactory("installations","Installations",oA);function sA(e){return e instanceof bn.FirebaseError&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(e){return"https://firebaseinstallations.googleapis.com/v1/projects/"+e.projectId+"/installations"}function cA(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function lA(e,t){return Yx(this,void 0,void 0,(function(){var n,r;return Qx(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,aA.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function hA(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function fA(e,t){var n=t.refreshToken,r=hA(e);return r.append("Authorization",function(e){return"FIS_v2 "+e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)),r}function dA(e){return Yx(this,void 0,void 0,(function(){var t;return Qx(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function pA(e,t){var n=t.fid;return Yx(this,void 0,void 0,(function(){var t,r,i,o,a,s;return Qx(this,(function(u){switch(u.label){case 0:return t=uA(e),r=hA(e),i={fid:n,authVersion:rA,appId:e.appId,sdkVersion:nA},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,dA((function(){return fetch(t,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return s=u.sent(),[2,{fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:cA(s.authToken)}];case 3:return[4,lA("Create Installation",a)];case 4:throw u.sent()}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(e){return btoa(String.fromCharCode.apply(String,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],Zx(e)))).replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gA=/^[cdef][\w-]{21}$/;function yA(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return vA(e).substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);return gA.test(t)?t:""}catch(e){return""}}function bA(e){return e.appName+"!"+e.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wA=new Map;function _A(e,t){var n=bA(e);kA(n,t),function(e,t){var n=EA();n&&n.postMessage({key:e,fid:t});MA()}(n,t)}function kA(e,t){var n,r,i=wA.get(e);if(i)try{for(var o=Jx(i),a=o.next();!a.done;a=o.next()){(0,a.value)(t)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var SA=null;function EA(){return!SA&&"BroadcastChannel"in self&&((SA=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){kA(e.data.key,e.data.fid)}),SA}function MA(){0===wA.size&&SA&&(SA.close(),SA=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var TA="firebase-installations-store",CA=null;function IA(){return CA||(CA=Xx.openDb("firebase-installations-database",1,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(TA)}}))),CA}function xA(e,t){return Yx(this,void 0,void 0,(function(){var n,r,i,o,a;return Qx(this,(function(s){switch(s.label){case 0:return n=bA(e),[4,IA()];case 1:return r=s.sent(),i=r.transaction(TA,"readwrite"),[4,(o=i.objectStore(TA)).get(n)];case 2:return a=s.sent(),[4,o.put(t,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===t.fid||_A(e,t.fid),[2,t]}}))}))}function AA(e){return Yx(this,void 0,void 0,(function(){var t,n,r;return Qx(this,(function(i){switch(i.label){case 0:return t=bA(e),[4,IA()];case 1:return n=i.sent(),[4,(r=n.transaction(TA,"readwrite")).objectStore(TA).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function PA(e,t){return Yx(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Qx(this,(function(u){switch(u.label){case 0:return n=bA(e),[4,IA()];case 1:return r=u.sent(),i=r.transaction(TA,"readwrite"),[4,(o=i.objectStore(TA)).get(n)];case 2:return a=u.sent(),void 0!==(s=t(a))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||_A(e,s.fid),[2,s]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(e){return Yx(this,void 0,void 0,(function(){var t,n,r;return Qx(this,(function(i){switch(i.label){case 0:return[4,PA(e,(function(n){var r=function(e){return NA(e||{fid:yA(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(aA.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return Yx(this,void 0,void 0,(function(){var n,r;return Qx(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,pA(e,t)];case 1:return n=i.sent(),[2,xA(e,n)];case 2:return sA(r=i.sent())&&409===r.customData.serverCode?[4,AA(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,xA(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:RA(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function RA(e){return Yx(this,void 0,void 0,(function(){var t,n,r,i;return Qx(this,(function(o){switch(o.label){case 0:return[4,DA(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,mA(100)];case 3:return o.sent(),[4,DA(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,OA(e)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}}))}))}function DA(e){return PA(e,(function(e){if(!e)throw aA.create("installation-not-found");return NA(e)}))}function NA(e){return 1===(t=e).registrationStatus&&t.registrationTime+tA<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function LA(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return Yx(this,void 0,void 0,(function(){var e,i,o,a,s,u,c;return Qx(this,(function(l){switch(l.label){case 0:return e=function(e,t){var n=t.fid;return uA(e)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,t),i=fA(n,t),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:nA}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,dA((function(){return fetch(e,s)}))];case 1:return(u=l.sent()).ok?[4,u.json()]:[3,3];case 2:return c=l.sent(),[2,cA(c)];case 3:return[4,lA("Generate Auth Token",u)];case 4:throw l.sent()}}))}))}function jA(e,t){return void 0===t&&(t=!1),Yx(this,void 0,void 0,(function(){var n,r,i;return Qx(this,(function(o){switch(o.label){case 0:return[4,PA(e.appConfig,(function(r){if(!FA(r))throw aA.create("not-registered");var i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+iA}(e)}(i))return r;if(1===i.requestStatus)return n=function(e,t){return Yx(this,void 0,void 0,(function(){var n,r;return Qx(this,(function(i){switch(i.label){case 0:return[4,BA(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,mA(100)];case 3:return i.sent(),[4,BA(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,jA(e,t)]:[2,r]}}))}))}(e,t),r;if(!navigator.onLine)throw aA.create("app-offline");var o=function(e){var t={requestStatus:1,requestTime:Date.now()};return Gx(Gx({},e),{authToken:t})}(r);return n=function(e,t){return Yx(this,void 0,void 0,(function(){var n,r,i;return Qx(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,LA(e,t)];case 1:return n=o.sent(),i=Gx(Gx({},t),{authToken:n}),[4,xA(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!sA(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,AA(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Gx(Gx({},t),{authToken:{requestStatus:0}}),[4,xA(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(e,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function BA(e){return PA(e,(function(e){if(!FA(e))throw aA.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+tA<Date.now()?Gx(Gx({},e),{authToken:{requestStatus:0}}):e}))}function FA(e){return void 0!==e&&2===e.registrationStatus}function UA(e){return Yx(this,void 0,void 0,(function(){var t;return Qx(this,(function(n){switch(n.label){case 0:return[4,OA(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(e,t){return Yx(this,void 0,void 0,(function(){var n,r,i,o;return Qx(this,(function(a){switch(a.label){case 0:return n=function(e,t){var n=t.fid;return uA(e)+"/"+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,t),r=fA(e,t),i={method:"DELETE",headers:r},[4,dA((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,lA("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function zA(e,t){var n=e.appConfig;return function(e,t){EA();var n=bA(e),r=wA.get(n);r||(r=new Set,wA.set(n,r)),r.add(t)}(n,t),function(){!function(e,t){var n=bA(e),r=wA.get(n);r&&(r.delete(t),0===r.size&&wA.delete(n),MA())}(n,t)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(e){return aA.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e.INTERNAL.registerComponent(new Mn("installations",(function(e){var t=e.getProvider("app").getImmediate(),n={appConfig:function(e){var t,n;if(!e||!e.options)throw VA("App Configuration");if(!e.name)throw VA("App Name");try{for(var r=Jx(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw VA(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:e.getProvider("platform-logger")};return{app:t,getId:function(){
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(e){return Yx(this,void 0,void 0,(function(){var t,n,r;return Qx(this,(function(i){switch(i.label){case 0:return[4,OA(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):jA(e).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)},getToken:function(e){return function(e,t){return void 0===t&&(t=!1),Yx(this,void 0,void 0,(function(){return Qx(this,(function(n){switch(n.label){case 0:return[4,UA(e.appConfig)];case 1:return n.sent(),[4,jA(e,t)];case 2:return[2,n.sent().token]}}))}))}(n,e)},delete:function(){return function(e){return Yx(this,void 0,void 0,(function(){var t,n;return Qx(this,(function(r){switch(r.label){case 0:return[4,PA(t=e.appConfig,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw aA.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw aA.create("app-offline");case 3:return[4,qA(t,n)];case 4:return r.sent(),[4,AA(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(e){return zA(n,e)}}}),"PUBLIC")),e.registerVersion("@firebase/installations",eA)}(er);bn=o("1xTls");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var WA=function(){return(WA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function HA(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function KA(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}Object.create;function GA(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function YA(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}var QA;Object.create;var JA,ZA=((QA={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',QA["only-available-in-window"]="This method is available in a Window context.",QA["only-available-in-sw"]="This method is available in a service worker context.",QA["permission-default"]="The notification permission was not granted and dismissed instead.",QA["permission-blocked"]="The notification permission was not granted and blocked instead.",QA["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",QA["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",QA["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",QA["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",QA["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",QA["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",QA["token-update-no-token"]="FCM returned no token when updating the user to push.",QA["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",QA["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",QA["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",QA["invalid-vapid-key"]="The public VAPID key must be a string.",QA["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",QA),XA=new bn.ErrorFactory("messaging","Messaging",ZA),$A="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",eP="google.c.a.c_id";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function tP(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],YA(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function nP(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(JA||(JA={}));var rP="fcm_token_details_db",iP="fcm_token_object_Store";function oP(e){return HA(this,void 0,void 0,(function(){var t,n,r=this;return KA(this,(function(i){switch(i.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=i.sent(),!t.map((function(e){return e.name})).includes(rP))return[2,null];i.label=2;case 2:return n=null,[4,Xx.openDb(rP,5,(function(t){return HA(r,void 0,void 0,(function(){var r,i,o,a;return KA(this,(function(s){switch(s.label){case 0:return t.oldVersion<2?[2]:t.objectStoreNames.contains(iP)?[4,(r=t.transaction.objectStore(iP)).index("fcmSenderId").get(e)]:[2];case 1:return i=s.sent(),[4,r.clear()];case 2:if(s.sent(),!i)return[2];if(2===t.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];n={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:tP(o.vapidKey)}}}else(3===t.oldVersion||4===t.oldVersion)&&(n={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:tP(o.auth),p256dh:tP(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:tP(o.vapidKey)}});return[2]}}))}))}))];case 3:return i.sent().close(),[4,Xx.deleteDb(rP)];case 4:return i.sent(),[4,Xx.deleteDb("fcm_vapid_details_db")];case 5:return i.sent(),[4,Xx.deleteDb("undefined")];case 6:return i.sent(),[2,aP(n)?n:null]}}))}))}function aP(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sP="firebase-messaging-store",uP=null;function cP(){return uP||(uP=Xx.openDb("firebase-messaging-database",1,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(sP)}}))),uP}function lP(e){return HA(this,void 0,void 0,(function(){var t,n,r;return KA(this,(function(i){switch(i.label){case 0:return t=dP(e),[4,cP()];case 1:return[4,i.sent().transaction(sP).objectStore(sP).get(t)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,oP(e.appConfig.senderId)];case 4:return(r=i.sent())?[4,hP(e,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function hP(e,t){return HA(this,void 0,void 0,(function(){var n,r,i;return KA(this,(function(o){switch(o.label){case 0:return n=dP(e),[4,cP()];case 1:return r=o.sent(),[4,(i=r.transaction(sP,"readwrite")).objectStore(sP).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}}))}))}function fP(e){return HA(this,void 0,void 0,(function(){var t,n,r;return KA(this,(function(i){switch(i.label){case 0:return t=dP(e),[4,cP()];case 1:return n=i.sent(),[4,(r=n.transaction(sP,"readwrite")).objectStore(sP).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function dP(e){return e.appConfig.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(e,t){return HA(this,void 0,void 0,(function(){var n,r,i,o,a,s;return KA(this,(function(u){switch(u.label){case 0:return[4,yP(e)];case 1:n=u.sent(),r=bP(t),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(gP(e.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),XA.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,XA.create("token-subscribe-failed",{errorInfo:s});if(!o.token)throw XA.create("token-subscribe-no-token");return[2,o.token]}}))}))}function mP(e,t){return HA(this,void 0,void 0,(function(){var n,r,i,o,a,s;return KA(this,(function(u){switch(u.label){case 0:return[4,yP(e)];case 1:n=u.sent(),r=bP(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(gP(e.appConfig)+"/"+t.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),XA.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,XA.create("token-update-failed",{errorInfo:s});if(!o.token)throw XA.create("token-update-no-token");return[2,o.token]}}))}))}function vP(e,t){return HA(this,void 0,void 0,(function(){var n,r,i,o,a;return KA(this,(function(s){switch(s.label){case 0:return[4,yP(e)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(gP(e.appConfig)+"/"+t,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,XA.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),XA.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))}function gP(e){return"https://fcmregistrations.googleapis.com/v1/projects/"+e.projectId+"/registrations"}function yP(e){var t=e.appConfig,n=e.installations;return HA(this,void 0,void 0,(function(){var e;return KA(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}}))}))}function bP(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,o={web:{endpoint:r,auth:n,p256dh:t}};return i!==$A&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(e,t,n){return HA(this,void 0,void 0,(function(){var r,i,o,a;return KA(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw XA.create("permission-blocked");return[4,EP(t,n)];case 1:return r=s.sent(),[4,lP(e)];case 2:return i=s.sent(),o={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:tP(r.getKey("auth")),p256dh:tP(r.getKey("p256dh"))},i?[3,3]:[2,SP(e,o)];case 3:if(u=i.subscriptionOptions,l=(c=o).vapidKey===u.vapidKey,h=c.endpoint===u.endpoint,f=c.auth===u.auth,d=c.p256dh===u.p256dh,l&&h&&f&&d)return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,vP(e,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,SP(e,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,kP({token:i.token,createTime:Date.now(),subscriptionOptions:o},e,t)]:[2,i.token];case 9:return[2]}var u,c,l,h,f,d;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))}function _P(e,t){return HA(this,void 0,void 0,(function(){var n,r;return KA(this,(function(i){switch(i.label){case 0:return[4,lP(e)];case 1:return(n=i.sent())?[4,vP(e,n.token)]:[3,4];case 2:return i.sent(),[4,fP(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function kP(e,t,n){return HA(this,void 0,void 0,(function(){var r,i,o;return KA(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,mP(t,e)];case 1:return r=a.sent(),i=WA(WA({},e),{token:r,createTime:Date.now()}),[4,hP(t,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,_P(t,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function SP(e,t){return HA(this,void 0,void 0,(function(){var n,r;return KA(this,(function(i){switch(i.label){case 0:return[4,pP(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,hP(e,r)];case 2:return i.sent(),[2,r.token]}}))}))}function EP(e,t){return HA(this,void 0,void 0,(function(){var n;return KA(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:nP(t)})]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function MP(e){return"object"==typeof e&&!!e&&eP in e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CP=function(){function e(e){var t=this;this.firebaseDependencies=e,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(e){e.waitUntil(t.onPush(e))})),self.addEventListener("pushsubscriptionchange",(function(e){e.waitUntil(t.onSubChange(e))})),self.addEventListener("notificationclick",(function(e){e.waitUntil(t.onNotificationClick(e))}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(e){if(this.isOnBackgroundMessageUsed=!1,!e||"function"!=typeof e)throw XA.create("invalid-bg-handler");this.bgMessageHandler=e},e.prototype.onBackgroundMessage=function(e){var t=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=e,function(){t.bgMessageHandler=null}},e.prototype.getToken=function(){var e,t;return HA(this,void 0,void 0,(function(){var n;return KA(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,lP(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(t=null===(e=null==n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==t?t:$A,r.label=2;case 2:return[2,wP(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},e.prototype.deleteToken=function(){return _P(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw XA.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw XA.create("use-vapid-key-after-get-token");if("string"!=typeof e||0===e.length)throw XA.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(){throw XA.create("only-available-in-window")},e.prototype.onMessage=function(){throw XA.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw XA.create("only-available-in-window")},e.prototype.onPush=function(e){return HA(this,void 0,void 0,(function(){var t,n,r,i;return KA(this,(function(o){switch(o.label){case 0:return(t=function(e){var t=e.data;if(!t)return null;try{return t.json()}catch(e){return null}}(e))?[4,PP()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(e){return e.some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,AP(n,t)]:(r=!1,t.notification?[4,OP(IP(t))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(t,e),t}(t),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,TP(1e3)]);case 4:return o.sent(),[2]}}))}))},e.prototype.onSubChange=function(e){var t,n;return HA(this,void 0,void 0,(function(){var r;return KA(this,(function(i){switch(i.label){case 0:return e.newSubscription?[3,2]:[4,_P(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,lP(this.firebaseDependencies)];case 3:return r=i.sent(),[4,_P(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,wP(this.firebaseDependencies,self.registration,null!==(n=null===(t=null==r?void 0:r.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==n?n:$A)];case 5:return i.sent(),[2]}}))}))},e.prototype.onNotificationClick=function(e){var t,n;return HA(this,void 0,void 0,(function(){var r,i,o,a,s;return KA(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n.FCM_MSG)?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),(i=function(e){var t,n,r,i=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;if(i)return i;return MP(e.data)?self.location.origin:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r))?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,xP(o)]):[2]):[2];case 1:return(s=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,TP(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=JA.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},e}();function IP(e){var t,n=WA({},e.notification);return n.data=((t={}).FCM_MSG=e,t),n}function xP(e){return HA(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return KA(this,(function(u){switch(u.label){case 0:return[4,PP()];case 1:t=u.sent();try{for(n=GA(t),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),e.host===o.host)return[2,i]}catch(e){a={error:e}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function AP(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=JA.PUSH_RECEIVED;try{for(var i=GA(e),o=i.next();!o.done;o=i.next()){o.value.postMessage(t)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function PP(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function OP(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}var RP=function(){function e(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(e){return t.messageEventListener(e)}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(e){return HA(this,void 0,void 0,(function(){var t,n;return KA(this,(function(r){switch(r.label){case 0:return(t=e.data).isFirebaseMessaging?(this.onMessageCallback&&t.messageType===JA.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(e){return delete e.messageType,delete e.isFirebaseMessaging,e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Object.assign({},t))):this.onMessageCallback.next(Object.assign({},t))),MP(n=t.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(t.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(e){return HA(this,void 0,void 0,(function(){return KA(this,(function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw XA.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,wP(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},e.prototype.updateVapidKey=function(e){return HA(this,void 0,void 0,(function(){return KA(this,(function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=$A),[2]}))}))},e.prototype.updateSwReg=function(e){return HA(this,void 0,void 0,(function(){return KA(this,(function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw XA.create("invalid-sw-registration");return this.swRegistration=e,[2]}}))}))},e.prototype.registerDefaultSw=function(){return HA(this,void 0,void 0,(function(){var e,t;return KA(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw t=n.sent(),XA.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}}))}))},e.prototype.deleteToken=function(){return HA(this,void 0,void 0,(function(){return KA(this,(function(e){switch(e.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:return[2,_P(this.firebaseDependencies,this.swRegistration)]}}))}))},e.prototype.requestPermission=function(){return HA(this,void 0,void 0,(function(){var e;return KA(this,(function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?XA.create("permission-blocked"):XA.create("permission-default")}}))}))},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw XA.create("use-vapid-key-after-get-token");if("string"!=typeof e||0===e.length)throw XA.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw XA.create("invalid-sw-registration");if(this.swRegistration)throw XA.create("use-sw-after-get-token");this.swRegistration=e},e.prototype.onMessage=function(e){var t=this;return this.onMessageCallback=e,function(){t.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw XA.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw XA.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(e,t){return HA(this,void 0,void 0,(function(){var n;return KA(this,(function(r){switch(r.label){case 0:return n=function(e){switch(e){case JA.NOTIFICATION_CLICKED:return"notification_open";case JA.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:t["google.c.a.c_id"],message_name:t["google.c.a.c_l"],message_time:t["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},e}();function DP(e){return XA.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var NP={isSupported:LP};function LP(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}er.INTERNAL.registerComponent(new Mn("messaging",(function(e){var t=e.getProvider("app").getImmediate(),n={app:t,appConfig:function(e){var t,n;if(!e||!e.options)throw DP("App Configuration Object");if(!e.name)throw DP("App Name");var r=e.options;try{for(var i=GA(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw DP(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(t),installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")};if(!LP())throw XA.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new CP(n):new RP(n)}),"PUBLIC").setServiceProps(NP));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jP=function(e,t){return(jP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};var BP=function(){return(BP=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function FP(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function UP(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}Object.create;function qP(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;bn=o("1xTls");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zP="firebasestorage.googleapis.com",VP=function(e){function t(n,r){var i=e.call(this,WP(n),"Firebase Storage: "+r+" ("+WP(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}jP(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype._codeEquals=function(e){return WP(e)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),t}(bn.FirebaseError);function WP(e){return"storage/"+e}function HP(){return new VP("unknown","An unknown error occurred, please check the error payload for server response.")}function KP(){return new VP("canceled","User canceled the upload/download.")}function GP(){return new VP("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function YP(e){return new VP("invalid-argument",e)}function QP(){return new VP("app-deleted","The Firebase app was deleted.")}function JP(e){return new VP("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ZP(e,t){return new VP("invalid-format","String does not match format '"+e+"': "+t)}function XP(e){throw new VP("internal-error","Internal error: "+e)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var $P={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},eO=function(e,t){this.data=e,this.contentType=t||null};function tO(e,t){switch(e){case $P.RAW:return new eO(nO(t));case $P.BASE64:case $P.BASE64URL:return new eO(rO(e,t));case $P.DATA_URL:return new eO((n=new iO(t)).base64?rO($P.BASE64,n.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(e){throw ZP($P.DATA_URL,"Malformed data URL.")}return nO(t)}(n.rest),function(e){return new iO(e).contentType}(t))}var n;throw HP()}function nO(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else{if(55296==(64512&r))if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}}return new Uint8Array(t)}function rO(e,t){switch(e){case $P.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw ZP(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case $P.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw ZP(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(t){throw ZP(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var iO=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw ZP($P.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=t[1]||null;null!=i&&(this.base64=(r=";base64",!!((n=i).length>=r.length)&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var oO,aO,sO={STATE_CHANGED:"state_changed"},uO={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function cO(e){switch(e){case"running":case"pausing":case"canceling":return uO.RUNNING;case"paused":return uO.PAUSED;case"success":return uO.SUCCESS;case"canceled":return uO.CANCELED;case"error":default:return uO.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(aO=oO||(oO={}))[aO.NO_ERROR=0]="NO_ERROR",aO[aO.NETWORK_ERROR=1]="NETWORK_ERROR",aO[aO.ABORT=2]="ABORT";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var lO=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=oO.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=oO.ABORT,t()})),e.xhr_.addEventListener("error",(function(){e.errorCode_=oO.NETWORK_ERROR,t()})),e.xhr_.addEventListener("load",(function(){t()}))}))}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw XP("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw XP("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw XP("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw XP("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var hO=function(){function e(){}return e.prototype.createConnection=function(){return new lO},e}(),fO=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(n){return new e(t,"")}if(""===r.path)return r;throw new VP("invalid-default-bucket","Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+(n===zP?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(t);if(h){var f=h[l.indices.bucket],d=h[l.indices.path];d||(d=""),r=new e(f,d),l.postModify(r);break}}if(null==r)throw function(e){return new VP("invalid-url","Invalid URL '"+e+"'.")}(t);return r},e}(),dO=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(e){return"string"==typeof e||e instanceof String}function mO(e){return vO()&&e instanceof Blob}function vO(){return"undefined"!=typeof Blob}function gO(e,t,n,r){if(r<t)throw YP("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw YP("Invalid value for '"+e+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(e,t){var n=t.match(/^(\w+):\/\/.+/),r=t;return null==(null==n?void 0:n[1])&&(r="https://"+t),r+"/v0"+e}function bO(e){var t=encodeURIComponent,n="?";for(var r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wO=function(){function e(e,t,n,r,i,o,a,s,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){var r=e.resolve_,i=e.reject_,o=n.connection;if(n.wasSuccessCode)try{var a=e.callback_(o,o.getResponseText());void 0!==a?r(a):r()}catch(e){i(e)}else if(null!==o)(s=HP()).serverResponse=o.getResponseText(),e.errorCallback_?i(e.errorCallback_(o,s)):i(s);else if(n.canceled){i(s=e.appDelete_?QP():KP())}else{var s;i(s=new VP("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}}this.canceled_?t(0,new _O(!1,null,!0)):this.backoffId_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];u||(u=!0,t.apply(null,e))}function l(t){i=setTimeout((function(){i=null,e(h,s())}),t)}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!u)if(e)c.call.apply(c,qP([null,e],t));else{var i;s()||o?c.call.apply(c,qP([null,e],t)):(r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),l(i))}}var f=!1;function d(e){f||(f=!0,u||(null!==i?(e||(a=2),clearTimeout(i),l(0)):e||(a=1)))}return l(0),setTimeout((function(){o=!0,d(!0)}),n),d}((function(t,n){if(n)t(!1,new _O(!1,null,!0));else{var r=e.pool_.createConnection();e.pendingConnection_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===oO.NO_ERROR,o=r.getStatus();if(n&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new _O(a,r))}else{var s=r.getErrorCode()===oO.ABORT;t(!1,new _O(!1,null,s))}}))}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}),t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},e}(),_O=function(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function kO(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function SO(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=kO();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(vO())return new Blob(e);throw new VP("unsupported-environment","This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var EO=function(){function e(e,t){var n=0,r="";mO(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(mO(this.data_)){var r=this.data_,i=(a=t,s=n,(o=r).webkitSlice?o.webkitSlice(a,s):o.mozSlice?o.mozSlice(a,s):o.slice?o.slice(a,s):null);return null===i?null:new e(i)}var o,a,s;return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(vO()){var r=t.map((function(t){return t instanceof e?t.data_:t}));return new e(SO.apply(null,r))}var i=t.map((function(e){return pO(e)?tO($P.RAW,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]})),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(e){var t,n;try{t=JSON.parse(e)}catch(e){return null}return"object"!=typeof(n=t)||Array.isArray(n)?null:t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(e,t){return t}var IO=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||CO},xO=null;function AO(){if(xO)return xO;var e=[];e.push(new IO("bucket")),e.push(new IO("generation")),e.push(new IO("metageneration")),e.push(new IO("name","fullPath",!0));var t=new IO("name");t.xform=function(e,t){return function(e){return!pO(e)||e.length<2?e:TO(e)}(t)},e.push(t);var n=new IO("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new IO("timeCreated")),e.push(new IO("updated")),e.push(new IO("md5Hash",null,!0)),e.push(new IO("cacheControl",null,!0)),e.push(new IO("contentDisposition",null,!0)),e.push(new IO("contentEncoding",null,!0)),e.push(new IO("contentLanguage",null,!0)),e.push(new IO("contentType",null,!0)),e.push(new IO("metadata","customMetadata",!0)),xO=e}function PO(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new fO(n,r);return t._makeStorageReference(i)}})}(r,e),r}function OO(e,t,n){var r=MO(t);return null===r?null:PO(e,r,n)}function RO(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(e,t,n){var r=MO(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=e._makeStorageReference(new fO(t,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];s=e._makeStorageReference(new fO(t,l.name)),r.items.push(s)}return r}(e,t,r)}var NO=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(e){if(!e)throw HP()}function jO(e,t){return function(n,r){var i=OO(e,r,t);return LO(null!==i),i}}function BO(e,t){return function(n,r){var i=OO(e,r,t);return LO(null!==i),function(e,t,n){var r=MO(t);if(null===r)return null;if(!pO(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(t){var r=e.bucket,i=e.fullPath;return yO("/b/"+o(r)+"/o/"+o(i),n)+bO({alt:"media",token:t})}))[0]}(i,r,e.host)}}function FO(e){return function(t,n){var r,i,o;return 401===t.getStatus()?r=t.getResponseText().includes("Firebase App Check token is invalid")?new VP("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new VP("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new VP("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new VP("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function UO(e){var t=FO(e);return function(n,r){var i,o=t(n,r);return 404===n.getStatus()&&(i=e.path,o=new VP("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function qO(e,t,n){var r=yO(t.fullServerUrl(),e.host),i=e.maxOperationRetryTime,o=new NO(r,"GET",jO(e,n),i);return o.errorHandler=UO(t),o}function zO(e,t,n,r,i){var o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=yO(t.bucketOnlyServerUrl(),e.host),s=e.maxOperationRetryTime,u=new NO(a,"GET",function(e,t){return function(n,r){var i=DO(e,t,r);return LO(null!==i),i}}(e,t.bucket),s);return u.urlParams=o,u.errorHandler=FO(t),u}function VO(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}var WO=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function HO(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){LO(!1)}return LO(!!n&&-1!==(t||["active"]).indexOf(n)),n}var KO=262144;function GO(e,t,n,r,i,o,a,s){var u=new WO(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new VP("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},p=r.slice(h,f);if(null===p)throw GP();var m=t.maxUploadRetryTime,v=new NO(n,"POST",(function(e,n){var i,a=HO(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?jO(t,o)(e,n):null,new WO(s,c,"final"===a,i)}),m);return v.headers=d,v.body=p.uploadData(),v.progressCallback=s||null,v.errorHandler=FO(e),v}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YO=function(e,t,n){if("function"==typeof e||null!=t||null!=n)this.next=e,this.error=t,this.complete=n;else{var r=e;this.next=r.next,this.error=r.error,this.complete=r.complete}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JO=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=AO(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return e.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},e.prototype._shouldDoResumable=function(e){return e.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(t._state){case"running":e(r,i);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))},e.prototype._createResumable=function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=VO(t,r,i),s={name:a.fullPath},u=yO(o,e.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=RO(a,n),h=e.maxUploadRetryTime,f=new NO(u,"POST",(function(e){var t;HO(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){LO(!1)}return LO(pO(t)),t}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=FO(t),f}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))},e.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,o=new NO(n,"POST",(function(e){var t=HO(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){LO(!1)}n||LO(!1);var i=Number(n);return LO(!isNaN(i)),new WO(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=FO(t),o}(e._ref.storage,e._ref._location,t,e._blob),o=e._ref.storage._makeRequest(i,n,r);e._request=o,o.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))},e.prototype._continueUpload=function(){var e=this,t=KO*this._chunkMultiplier,n=new WO(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=GO(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(t){return e._error=t,void e._transition("error")}var s=e._ref.storage._makeRequest(a,i,o);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))},e.prototype._increaseMultiplier=function(){KO*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var e=this;this._resolveToken((function(t,n){var r=qO(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))},e.prototype._oneShotUpload=function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=VO(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+RO(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=EO.getBlob(c,r,l);if(null===h)throw GP();var f={name:u.fullPath},d=yO(o,e.host),p=e.maxUploadRetryTime,m=new NO(d,"POST",jO(e,n),p);return m.urlParams=f,m.headers=a,m.body=h.uploadData(),m.errorHandler=FO(t),m}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))},e.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},e.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=KP(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=cO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){var i=this,o=new YO(t,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},e.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},e.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(cO(this._state)){case uO.SUCCESS:QO(this._resolve.bind(null,this.snapshot))();break;case uO.CANCELED:case uO.ERROR:QO(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(e){switch(cO(this._state)){case uO.RUNNING:case uO.PAUSED:e.next&&QO(e.next.bind(e,this.snapshot))();break;case uO.SUCCESS:e.complete&&QO(e.complete.bind(e))();break;case uO.CANCELED:case uO.ERROR:e.error&&QO(e.error.bind(e,this._error))();break;default:e.error&&QO(e.error.bind(e,this._error))()}},e.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},e.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},e.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},e}(),ZO=function(){function e(e,t){this._service=e,this._location=t instanceof fO?t:fO.makeFromUrl(t,e.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var e=new fO(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return TO(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new fO(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(e){if(""===this._location.path)throw JP(e)},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(e){var t={prefixes:[],items:[]};return $O(e,t).then((function(){return t}))}function $O(e,t,n){return FP(this,void 0,void 0,(function(){var r,i,o;return UP(this,(function(a){switch(a.label){case 0:return[4,eR(e,{pageToken:n})];case 1:return r=a.sent(),(i=t.prefixes).push.apply(i,r.prefixes),(o=t.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,$O(e,t,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function eR(e,t){return FP(this,void 0,void 0,(function(){var n,r;return UP(this,(function(i){switch(i.label){case 0:return null!=t&&"number"==typeof t.maxResults&&gO("options.maxResults",1,1e3,t.maxResults),n=t||{},r=zO(e.storage,e._location,"/",n.pageToken,n.maxResults),[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function tR(e,t){return FP(this,void 0,void 0,(function(){var n;return UP(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("updateMetadata"),n=function(e,t,n,r){var i=yO(t.fullServerUrl(),e.host),o=RO(n,r),a=e.maxOperationRetryTime,s=new NO(i,"PATCH",jO(e,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=UO(t),s}(e.storage,e._location,t,AO()),[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function nR(e){return FP(this,void 0,void 0,(function(){var t;return UP(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getDownloadURL"),t=function(e,t,n){var r=yO(t.fullServerUrl(),e.host),i=e.maxOperationRetryTime,o=new NO(r,"GET",BO(e,n),i);return o.errorHandler=UO(t),o}(e.storage,e._location,AO()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then((function(e){if(null===e)throw new VP("no-download-url","The given file does not have any download URLs.");return e}))]}}))}))}function rR(e){return FP(this,void 0,void 0,(function(){var t;return UP(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("deleteObject"),t=function(e,t){var n=yO(t.fullServerUrl(),e.host),r=e.maxOperationRetryTime,i=new NO(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=UO(t),i}(e.storage,e._location),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}function iR(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new fO(e._location.bucket,n);return new ZO(e.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(e){return/^[A-Za-z]+:\/\//.test(e)}function aR(e,t){if(e instanceof cR){var n=e;if(null==n._bucket)throw new VP("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new ZO(n,n._bucket);return null!=t?aR(r,t):r}return void 0!==t?iR(e,t):e}function sR(e,t){if(t&&oR(t)){if(e instanceof cR)return new ZO(e,t);throw YP("To use ref(service, url), the first argument must be a Storage instance.")}return aR(e,t)}function uR(e,t){var n=null==t?void 0:t.storageBucket;return null==n?null:fO.makeFromBucketSpec(n,e)}var cR=function(){function e(e,t,n,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=zP,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?fO.makeFromBucketSpec(i,this._host):uR(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=fO.makeFromBucketSpec(this._url,e):this._bucket=uR(e,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){gO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){gO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return FP(this,void 0,void 0,(function(){var e,t;return UP(this,(function(n){switch(n.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(t=n.sent()))return[2,t.accessToken];n.label=2;case 2:return[2,null]}}))}))},e.prototype._getAppCheckToken=function(){return FP(this,void 0,void 0,(function(){var e;return UP(this,(function(t){switch(t.label){case 0:return(e=this._appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}}))}))},e.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()},e.prototype._makeStorageReference=function(e){return new ZO(this,e)},e.prototype._makeRequest=function(e,t,n){var r=this;if(this._deleted)return new dO(QP());var i=function(e,t,n,r,i,o){var a=bO(e.urlParams),s=e.url+a,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(u,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new wO(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,t,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},e.prototype.makeRequestWithTokens=function(e){return FP(this,void 0,void 0,(function(){var t,n,r;return UP(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return t=i.sent(),n=t[0],r=t[1],[2,this._makeRequest(e,n,r)]}}))}))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new JO(e,new EO(t),n)}(e=bn.getModularInstance(e),t,n)}function hR(e){return function(e){return FP(this,void 0,void 0,(function(){var t;return UP(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=qO(e.storage,e._location,AO()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}(e=bn.getModularInstance(e))}function fR(e,t){return sR(e=bn.getModularInstance(e),t)}function dR(e,t,n,r){void 0===r&&(r={}),function(e,t,n,r){void 0===r&&(r={}),e.host="http://"+t+":"+n;var i=r.mockUserToken;i&&(e._overrideAuthToken="string"==typeof i?i:bn.createMockUserToken(i,e.app.options.projectId))}(e,t,n,r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pR=function(){function e(e,t,n){this._delegate=e,this.task=t,this.ref=n}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),mR=function(){function e(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new pR(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new pR(t,n,n._ref))}),t)},e.prototype.on=function(e,t,n,r){var i=this,o=void 0;return t&&(o="function"==typeof t?function(e){return t(new pR(e,i,i._ref))}:{next:t.next?function(e){return t.next(new pR(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,n||void 0,r||void 0)},e}(),vR=function(){function e(e,t){this._delegate=e,this._service=t}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new gR(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this._delegate.items.map((function(t){return new gR(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),gR=function(){function e(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){return new e(function(e,t){return iR(e,t)}(this._delegate,t),this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return this._throwIfRoot("put"),new mR(lR(this._delegate,e,t),this)},e.prototype.putString=function(e,t,n){void 0===t&&(t=$P.RAW),this._throwIfRoot("putString");var r=tO(t,e),i=BP({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new mR(new JO(this._delegate,new EO(r.data,!0),i),this)},e.prototype.listAll=function(){var e,t=this;return(e=this._delegate,XO(e=bn.getModularInstance(e))).then((function(e){return new vR(e,t.storage)}))},e.prototype.list=function(e){var t=this;return function(e,t){return eR(e=bn.getModularInstance(e),t)}(this._delegate,e||void 0).then((function(e){return new vR(e,t.storage)}))},e.prototype.getMetadata=function(){return hR(this._delegate)},e.prototype.updateMetadata=function(e){return function(e,t){return tR(e=bn.getModularInstance(e),t)}(this._delegate,e)},e.prototype.getDownloadURL=function(){return e=this._delegate,nR(e=bn.getModularInstance(e));var e},e.prototype.delete=function(){return this._throwIfRoot("delete"),e=this._delegate,rR(e=bn.getModularInstance(e));var e},e.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw JP(e)},e}(),yR=function(){function e(e,t){this.app=e,this._delegate=t}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){if(oR(e))throw YP("ref() expected a child path but got a URL, use refFromURL instead.");return new gR(fR(this._delegate,e),this)},e.prototype.refFromURL=function(e){if(!oR(e))throw YP("refFromURL() expected a full URL but got a child path, use ref() instead.");try{fO.makeFromUrl(e,this._delegate.host)}catch(e){throw YP("refFromUrl() expected a valid full URL but got an invalid one.")}return new gR(fR(this._delegate,e),this)},e.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},e.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),dR(this._delegate,e,t,n)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new yR(r,new cR(r,i,o,new hO,n,er.SDK_VERSION))}!function(e){var t={TaskState:uO,TaskEvent:sO,StringFormat:$P,Storage:cR,Reference:gR};e.INTERNAL.registerComponent(new Mn("storage",bR,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage","0.7.0")}(er);var wR=function(){return(wR=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create;function _R(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;bn=o("1xTls");var kR,SR,ER,MR="0.4.18",TR=MR,CR="FB-PERF-TRACE-MEASURE",IR="_wt_",xR="_fcp",AR="_fid",PR="@firebase/performance/config",OR="@firebase/performance/configexpire",RR="Performance",DR=((kR={})["trace started"]="Trace {$traceName} was started before.",kR["trace stopped"]="Trace {$traceName} is not running.",kR["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",kR["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",kR["no window"]="Window is not available.",kR["no app id"]="App id is not available.",kR["no project id"]="Project id is not available.",kR["no api key"]="Api key is not available.",kR["invalid cc log"]="Attempted to queue invalid cc event",kR["FB not default"]="Performance can only start when Firebase app instance is the default one.",kR["RC response not ok"]="RC response is not ok",kR["invalid attribute name"]="Attribute name {$attributeName} is invalid.",kR["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",kR["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",kR["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",kR),NR=new bn.ErrorFactory("performance",RR,DR),LR=new Bn(RR);LR.logLevel=Pn.INFO;var jR,BR=function(){function e(e){if(this.window=e,!e)throw NR.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},e.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},e.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!bn.isIndexedDBAvailable()||(LR.info("IndexedDB is not supported by current browswer"),!1):(LR.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},e.prototype.setupObserver=function(e,t){this.PerformanceObserver&&new this.PerformanceObserver((function(e){for(var n=0,r=e.getEntries();n<r.length;n++){var i=r[n];t(i)}})).observe({entryTypes:[e]})},e.getInstance=function(){return void 0===SR&&(SR=new e(ER)),SR},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function FR(e,t){var n=e.length-t.length;if(n<0||n>1)throw NR.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UR,qR,zR,VR=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=FR("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=FR("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw NR.create("no app id");return e},e.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw NR.create("no project id");return e},e.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw NR.create("no api key");return e},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return void 0===jR&&(jR=new e),jR},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(){return UR}(zR=qR||(qR={}))[zR.UNKNOWN=0]="UNKNOWN",zR[zR.VISIBLE=1]="VISIBLE",zR[zR.HIDDEN=2]="HIDDEN";var HR=["firebase_","google_","ga_"],KR=new RegExp("^[a-zA-Z]\\w*$");function GR(){var e=BR.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function YR(){switch(BR.getInstance().document.visibilityState){case"visible":return qR.VISIBLE;case"hidden":return qR.HIDDEN;default:return qR.UNKNOWN}}function QR(){var e=BR.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var JR="0.0.1",ZR=!0;function XR(e){var t=function(){var e=BR.getInstance().localStorage;if(!e)return;var t=e.getItem(OR);if(!(t&&(n=t,Number(n)>Date.now())))return;var n;var r=e.getItem(PR);if(!r)return;try{return JSON.parse(r)}catch(e){return}}();return t?(eD(t),Promise.resolve()):function(e){return(t=VR.getInstance().installationsService.getToken(),t.then((function(e){})),t).then((function(t){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+VR.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+VR.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:VR.getInstance().getAppId(),app_version:TR,sdk_version:JR})});return fetch(r).then((function(e){if(e.ok)return e.json();throw NR.create("RC response not ok")}))})).catch((function(){LR.info($R)}));var t;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(e).then(eD).then((function(e){return function(e){var t=BR.getInstance().localStorage;if(!e||!t)return;t.setItem(PR,JSON.stringify(e)),t.setItem(OR,String(Date.now()+36e5*VR.getInstance().configTimeToLive))}(e)}),(function(){}))}var $R="Could not fetch config, will use default configs";function eD(e){if(!e)return e;var t=VR.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=ZR,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=tD(t.tracesSamplingRate),t.logNetworkAfterSampling=tD(t.networkRequestsSamplingRate),e}function tD(e){return Math.random()<=e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nD,rD=1;function iD(){return rD=2,nD=nD||function(){var e=BR.getInstance().document;return new Promise((function(t){if(e&&"complete"!==e.readyState){var n=function(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()}))}().then((function(){return(e=VR.getInstance().installationsService.getId()).then((function(e){UR=e})),e;var e})).then((function(e){return XR(e)})).then((function(){return oD()}),(function(){return oD()}))}function oD(){rD=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aD,sD=1e4,uD=3,cD=[],lD=!1;function hD(e){setTimeout((function(){var e,t;if(0!==uD)return cD.length?(e=cD.splice(0,1e3),t=e.map((function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}})),void function(e,t){return function(e){var t=VR.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then((function(e){return e.ok||LR.info("Call to Firebase backend failed."),e.json()})).then((function(e){var n=Number(e.nextRequestWaitMillis),r=sD;isNaN(n)||(r=Math.max(n,r));var i=e.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(cD=_R(_R([],t),cD),LR.info("Retry transport request later.")),uD=3,hD(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:VR.getInstance().logSource,log_event:t},e).catch((function(){cD=_R(_R([],e),cD),uD--,LR.info("Tries left: "+uD+"."),hD(sD)}))):hD(sD)}),e)}function fD(e){if(!e.eventTime||!e.message)throw NR.create("invalid cc log");cD=_R(_R([],cD),[e])}function dD(e,t){var n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */aD||(n=vD,aD=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];fD({message:n.apply(void 0,e),eventTime:Date.now()})}),aD(e,t)}function pD(e){var t=VR.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&BR.getInstance().requiredApisAvailable()&&(e.isAuto&&YR()!==qR.VISIBLE||(3===rD?mD(e):iD().then((function(){return mD(e)}),(function(){return mD(e)}))))}function mD(e){if(WR()){var t=VR.getInstance();t.loggingEnabled&&t.logTraceAfterSampling&&setTimeout((function(){return dD(e,1)}),0)}}function vD(e,t){return 0===t?(r={url:(n=e).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:gD(),network_request_metric:r},JSON.stringify(i)):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);var r={application_info:gD(),trace_metric:t};return JSON.stringify(r)}(e);var n,r,i}function gD(){return{google_app_id:VR.getInstance().getAppId(),app_instance_id:WR(),web_app_info:{sdk_version:TR,page_url:BR.getInstance().getUrl(),service_worker_status:GR(),visibility_state:YR(),effective_connection_type:QR()},application_process_state:0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yD=["_fp",xR,AR];
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var bD=function(){function e(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=BR.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(1!==this.state)throw NR.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(2!==this.state)throw NR.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),pD(this)},e.prototype.record=function(e,t,n){if(e<=0)throw NR.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw NR.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=wR({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}pD(this)},e.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},e.prototype.putMetric=function(e,t){if(i=e,o=this.name,0===i.length||i.length>100||!(o&&o.startsWith(IR)&&yD.indexOf(i)>-1)&&i.startsWith("_"))throw NR.create("invalid custom metric name",{customMetricName:e});var n,r,i,o;this.counters[e]=(n=t,(r=Math.floor(n))<n&&LR.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},e.prototype.getMetric=function(e){return this.counters[e]||0},e.prototype.putAttribute=function(e,t){var n,r=!(0===(n=e).length||n.length>40||HR.some((function(e){return n.startsWith(e)}))||!n.match(KR)),i=function(e){return 0!==e.length&&e.length<=100}(t);if(r&&i)this.customAttributes[e]=t;else{if(!r)throw NR.create("invalid attribute name",{attributeName:e});if(!i)throw NR.create("invalid attribute value",{attributeValue:t})}},e.prototype.getAttribute=function(e){return this.customAttributes[e]},e.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},e.prototype.getAttributes=function(){return wR({},this.customAttributes)},e.prototype.setStartTime=function(e){this.startTimeUs=e},e.prototype.setDuration=function(e){this.durationUs=e},e.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},e.createOobTrace=function(t,n,r){var i=BR.getInstance().getUrl();if(i){var o=new e(IR+i,!0),a=Math.floor(1e3*BR.getInstance().getTimeOrigin());o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd)));if(n){var s=n.find((function(e){return"first-paint"===e.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(e){return"first-contentful-paint"===e.name}));u&&u.startTime&&o.putMetric(xR,Math.floor(1e3*u.startTime)),r&&o.putMetric(AR,Math.floor(1e3*r))}pD(o)}},e.createUserTimingTrace=function(t){pD(new e(t,!1,t))},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(e){var t=e;if(t&&void 0!==t.responseStart){var n=BR.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+n)),i=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime));!function(e){var t=VR.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout((function(){return dD(e,0)}),0)}}({url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(){WR()&&(setTimeout((function(){return function(){var e=BR.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout((function(){bD.createOobTrace(t,n),r=void 0}),5e3);e.onFirstInputDelay((function(e){r&&(clearTimeout(r),bD.createOobTrace(t,n,e))}))}else bD.createOobTrace(t,n)}()}),0),setTimeout((function(){return function(){for(var e=BR.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){wD(r[n])}e.setupObserver("resource",wD)}()}),0),setTimeout((function(){return function(){for(var e=BR.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){kD(r[n])}e.setupObserver("measure",kD)}()}),0))}function kD(e){var t=e.name;t.substring(0,CR.length)!==CR&&bD.createUserTimingTrace(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SD=function(){function e(e){this.app=e,BR.getInstance().requiredApisAvailable()&&bn.validateIndexedDBOpenable().then((function(e){e&&(lD||(hD(5500),lD=!0),iD().then(_D,_D))})).catch((function(e){LR.info("Environment doesn't support IndexedDB: "+e)}))}return e.prototype.trace=function(e){return new bD(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return VR.getInstance().instrumentationEnabled},set:function(e){VR.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return VR.getInstance().dataCollectionEnabled},set:function(e){VR.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){var t=function(e,t){if("[DEFAULT]"!==e.name)throw NR.create("FB not default");if("undefined"==typeof window)throw NR.create("no window");return function(e){ER=e}(window),VR.getInstance().firebaseAppInstance=e,VR.getInstance().installationsService=t,new SD(e)};e.INTERNAL.registerComponent(new Mn("performance",(function(e){var n=e.getProvider("app").getImmediate(),r=e.getProvider("installations").getImmediate();return t(n,r)}),"PUBLIC")),e.registerVersion("@firebase/performance",MR)}(er);var ED=function(){return(ED=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function MD(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function TD(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}Object.create;Object.create;bn=o("1xTls");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CD,ID,xD,AD,PD="https://www.googletagmanager.com/gtag/js";(ID=CD||(CD={})).EVENT="event",ID.SET="set",ID.CONFIG="config",(AD=xD||(xD={})).ADD_SHIPPING_INFO="add_shipping_info",AD.ADD_PAYMENT_INFO="add_payment_info",AD.ADD_TO_CART="add_to_cart",AD.ADD_TO_WISHLIST="add_to_wishlist",AD.BEGIN_CHECKOUT="begin_checkout",AD.CHECKOUT_PROGRESS="checkout_progress",AD.EXCEPTION="exception",AD.GENERATE_LEAD="generate_lead",AD.LOGIN="login",AD.PAGE_VIEW="page_view",AD.PURCHASE="purchase",AD.REFUND="refund",AD.REMOVE_FROM_CART="remove_from_cart",AD.SCREEN_VIEW="screen_view",AD.SEARCH="search",AD.SELECT_CONTENT="select_content",AD.SELECT_ITEM="select_item",AD.SELECT_PROMOTION="select_promotion",AD.SET_CHECKOUT_OPTION="set_checkout_option",AD.SHARE="share",AD.SIGN_UP="sign_up",AD.TIMING_COMPLETE="timing_complete",AD.VIEW_CART="view_cart",AD.VIEW_ITEM="view_item",AD.VIEW_ITEM_LIST="view_item_list",AD.VIEW_PROMOTION="view_promotion",AD.VIEW_SEARCH_RESULTS="view_search_results";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var OD,RD=new Bn("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(e,t,n,r,i,o){return MD(this,void 0,void 0,(function(){var a,s,u,c;return TD(this,(function(l){switch(l.label){case 0:a=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),a?[4,t[a]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=l.sent(),(u=s.find((function(e){return e.measurementId===i})))?[4,t[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),RD.error(c),[3,8];case 8:return e(CD.CONFIG,i,o),[2]}}))}))}function ND(e,t,n,r,i){return MD(this,void 0,void 0,(function(){var o,a,s,u,c,l,h,f;return TD(this,(function(d){switch(d.label){case 0:return d.trys.push([0,4,,5]),o=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=d.sent(),u=function(e){var n=s.find((function(t){return t.measurementId===e})),r=n&&t[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=a;c<l.length&&(h=l[c],"break"!==u(h));c++);d.label=2;case 2:return 0===o.length&&(o=Object.values(t)),[4,Promise.all(o)];case 3:return d.sent(),e(CD.EVENT,r,i||{}),[3,5];case 4:return f=d.sent(),RD.error(f),[3,5];case 5:return[2]}}))}))}function LD(e,t,n,r,i){var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(e,t,n,r){return function(i,o,a){return MD(this,void 0,void 0,(function(){var s;return TD(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==CD.EVENT?[3,2]:[4,ND(e,t,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==CD.CONFIG?[3,4]:[4,DD(e,t,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:e(CD.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),RD.error(s),[3,7];case 7:return[2]}}))}))}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}var jD=((OD={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",OD["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",OD["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",OD["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",OD["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",OD["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",OD["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",OD["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',OD["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',OD),BD=new bn.ErrorFactory("analytics","Analytics",jD),FD=new(function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t=1e3),this.throttleMetadata=e,this.intervalMillis=t}return e.prototype.getThrottleMetadata=function(e){return this.throttleMetadata[e]},e.prototype.setThrottleMetadata=function(e,t){this.throttleMetadata[e]=t},e.prototype.deleteThrottleMetadata=function(e){delete this.throttleMetadata[e]},e}());function UD(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function qD(e){var t;return MD(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return TD(this,(function(c){switch(c.label){case 0:return n=e.appId,r=e.apiKey,i={method:"GET",headers:UD(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(a=c.sent()).status||304===a.status)return[3,6];s="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,a.json()];case 3:return u=c.sent(),(null===(t=u.error)||void 0===t?void 0:t.message)&&(s=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw BD.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function zD(e,t,n,r){var i=t.throttleEndTimeMillis,o=t.backoffCount;return void 0===r&&(r=FD),MD(this,void 0,void 0,(function(){var t,a,s,u,c,l,h;return TD(this,(function(f){switch(f.label){case 0:t=e.appId,a=e.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,VD(n,i)];case 2:return f.sent(),[3,4];case 3:if(s=f.sent(),a)return RD.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:t,measurementId:a}];throw s;case 4:return f.trys.push([4,6,,7]),[4,qD(e)];case 5:return u=f.sent(),r.deleteThrottleMetadata(t),[2,u];case 6:if(!function(e){if(!(e instanceof bn.FirebaseError&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(c=f.sent())){if(r.deleteThrottleMetadata(t),a)return RD.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:t,measurementId:a}];throw c}return l=503===Number(c.customData.httpStatus)?bn.calculateBackoffMillis(o,r.intervalMillis,30):bn.calculateBackoffMillis(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(t,h),RD.debug("Calling attemptFetch again in "+l+" millis"),[2,zD(e,h,n,r)];case 7:return[2]}}))}))}function VD(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(BD.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}var WD=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(e,t,n,r,i,o){return MD(this,void 0,void 0,(function(){var a,s,u,c,l,h,f;return TD(this,(function(d){switch(d.label){case 0:return(a=function(e,t,n){return void 0===t&&(t=FD),MD(this,void 0,void 0,(function(){var r,i,o,a,s,u,c=this;return TD(this,(function(l){if(r=e.options,i=r.appId,o=r.apiKey,a=r.measurementId,!i)throw BD.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:i}];throw BD.create("no-api-key")}return s=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new WD,setTimeout((function(){return MD(c,void 0,void 0,(function(){return TD(this,(function(e){return u.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,zD({appId:i,apiKey:o,measurementId:a},s,u,t)]}))}))}(e)).then((function(t){n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&RD.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return RD.error(e)})),t.push(a),s=function(){return MD(this,void 0,void 0,(function(){var e;return TD(this,(function(t){switch(t.label){case 0:return bn.isIndexedDBAvailable()?[3,1]:(RD.warn(BD.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,bn.validateIndexedDBOpenable()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),RD.warn(BD.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(e){return e?r.getId():void 0})),[4,Promise.all([a,s])];case 1:return u=d.sent(),c=u[0],l=u[1],function(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(PD))return r}return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()||function(e,t){var n=document.createElement("script");n.src="https://www.googletagmanager.com/gtag/js?l="+e+"&id="+t,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=l&&(h.firebase_id=l),i(CD.CONFIG,c.measurementId,h),[2,c.measurementId]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KD,GD,YD={},QD=[],JD={},ZD="dataLayer",XD="gtag",$D=!1;function eN(e){if($D)throw BD.create("already-initialized");e.dataLayerName&&(ZD=e.dataLayerName),e.gtagName&&(XD=e.gtagName)}function tN(e,t){!function(){var e=[];if(bn.isBrowserExtension()&&e.push("This is a browser extension environment."),bn.areCookiesEnabled()||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"("+(t+1)+") "+e})).join(" "),n=BD.create("invalid-analytics-context",{errorInfo:t});RD.warn(n.message)}}();var n,r,i=e.options.appId;if(!i)throw BD.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw BD.create("no-api-key");RD.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=YD[i])throw BD.create("already-exists",{id:i});if(!$D){n=ZD,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var o=LD(YD,QD,JD,ZD,XD),a=o.wrappedGtag,s=o.gtagCore;GD=a,KD=s,$D=!0}return YD[i]=HD(e,QD,JD,t,KD,ZD),{app:e,logEvent:function(e,t,n){(
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t,n,r,i){return MD(this,void 0,void 0,(function(){var o,a;return TD(this,(function(s){switch(s.label){case 0:return i&&i.global?(e(CD.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:o=s.sent(),a=ED(ED({},r),{send_to:o}),e(CD.EVENT,n,a),s.label=3;case 3:return[2]}}))}))})(GD,YD[i],e,t,n).catch((function(e){return RD.error(e)}))},setCurrentScreen:function(e,t){(function(e,t,n,r){return MD(this,void 0,void 0,(function(){var i;return TD(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(CD.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(CD.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(GD,YD[i],e,t).catch((function(e){return RD.error(e)}))},setUserId:function(e,t){(function(e,t,n,r){return MD(this,void 0,void 0,(function(){var i;return TD(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(CD.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(CD.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(GD,YD[i],e,t).catch((function(e){return RD.error(e)}))},setUserProperties:function(e,t){(function(e,t,n,r){return MD(this,void 0,void 0,(function(){var i,o,a,s,u;return TD(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return e(CD.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:u=c.sent(),e(CD.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(GD,YD[i],e,t).catch((function(e){return RD.error(e)}))},setAnalyticsCollectionEnabled:function(e){(function(e,t){return MD(this,void 0,void 0,(function(){var n;return TD(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}}))}))})(YD[i],e).catch((function(e){return RD.error(e)}))},INTERNAL:{delete:function(){return delete YD[i],Promise.resolve()}}}}var nN="analytics";function rN(){return MD(this,void 0,void 0,(function(){return TD(this,(function(e){switch(e.label){case 0:if(bn.isBrowserExtension())return[2,!1];if(!bn.areCookiesEnabled())return[2,!1];if(!bn.isIndexedDBAvailable())return[2,!1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,bn.validateIndexedDBOpenable()];case 2:return[2,e.sent()];case 3:return e.sent(),[2,!1];case 4:return[2]}}))}))}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */!function(e){e.INTERNAL.registerComponent(new Mn(nN,(function(e){return tN(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:eN,EventName:xD,isSupported:rN})),e.INTERNAL.registerComponent(new Mn("analytics-internal",(function(e){try{return{logEvent:e.getProvider(nN).getImmediate().logEvent}}catch(e){throw BD.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),e.registerVersion("@firebase/analytics","0.6.18")}(er);var iN=function(){return(iN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function oN(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function aN(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}Object.create;Object.create;bn=o("1xTls");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sN,uN=function(){function e(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}return e.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+e+". Is cache hit: "+r+"."),r},e.prototype.fetch=function(e){return oN(this,void 0,void 0,(function(){var t,n,r,i,o;return aN(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return t=a.sent(),n=t[0],(r=t[1])&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n)?[2,r]:(e.eTag=r&&r.eTag,[4,this.client.fetch(e)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},e}(),cN=((sN={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",sN["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",sN["registration-api-key"]="Undefined API key. Check Firebase app initialization.",sN["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",sN["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",sN["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",sN["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",sN["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",sN["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",sN["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',sN["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',sN["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",sN["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",sN),lN=new bn.ErrorFactory("remoteconfig","Remote Config",cN);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var hN=function(){function e(e,t,n,r,i,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return e.prototype.fetch=function(e){return oN(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,c,l,h,f,d,p,m,v,g,y,b;return aN(this,(function(w){switch(w.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:t=w.sent(),n=t[0],r=t[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===_&&(_=navigator),_.languages&&_.languages[0]||_.language)},u={method:"POST",headers:a,body:JSON.stringify(s)},c=fetch(o,u),l=new Promise((function(t,n){e.signal.addEventListener((function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))})),w.label=2;case 2:return w.trys.push([2,5,,6]),[4,Promise.race([c,l])];case 3:return w.sent(),[4,c];case 4:return h=w.sent(),[3,6];case 5:throw f=w.sent(),d="fetch-client-network","AbortError"===f.name&&(d="fetch-timeout"),lN.create(d,{originalErrorMessage:f.message});case 6:if(p=h.status,m=h.headers.get("ETag")||void 0,200!==h.status)return[3,11];y=void 0,w.label=7;case 7:return w.trys.push([7,9,,10]),[4,h.json()];case 8:return y=w.sent(),[3,10];case 9:throw b=w.sent(),lN.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:v=y.entries,g=y.state,w.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===g?p=500:"NO_CHANGE"===g?p=304:"NO_TEMPLATE"!==g&&"EMPTY_CONFIG"!==g||(v={}),304!==p&&200!==p)throw lN.create("fetch-status",{httpStatus:p});return[2,{status:p,eTag:m,config:v}]}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _}))}))},e}(),fN=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}(),dN=["1","true","t","yes","y","on"],pN=function(){function e(e,t){void 0===t&&(t=""),this._source=e,this._value=t}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return"static"!==this._source&&dN.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if("static"===this._source)return 0;var e=Number(this._value);return isNaN(e)&&(e=0),e},e.prototype.getSource=function(){return this._source},e}(),mN=function(){function e(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return e.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=Pn.DEBUG;break;case"silent":this._logger.logLevel=Pn.SILENT;break;default:this._logger.logLevel=Pn.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return oN(this,void 0,void 0,(function(){var e,t,n;return aN(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=r.sent(),t=e[0],n=e[1],t&&t.config&&t.eTag&&t.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},e.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){e._isInitializationComplete=!0}))),this._initializePromise},e.prototype.fetch=function(){return oN(this,void 0,void 0,(function(){var e,t,n,r=this;return aN(this,(function(i){switch(i.label){case 0:e=new fN,setTimeout((function(){return oN(r,void 0,void 0,(function(){return aN(this,(function(t){return e.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return t=i.sent(),n=function(e,t){return e instanceof bn.FirebaseError&&-1!==e.code.indexOf(t)}(t,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),t;case 6:return[2]}}))}))},e.prototype.fetchAndActivate=function(){return oN(this,void 0,void 0,(function(){return aN(this,(function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}}))}))},e.prototype.getAll=function(){var e=this;return function(e,t){void 0===e&&(e={});void 0===t&&(t={});return Object.keys(iN(iN({},e),t))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(t,n){return t[n]=e.getValue(n),t}),{})},e.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},e.prototype.getNumber=function(e){return this.getValue(e).asNumber()},e.prototype.getString=function(e){return this.getValue(e).asString()},e.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&void 0!==t[e]?new pN("remote",t[e]):this.defaultConfig&&void 0!==this.defaultConfig[e]?new pN("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new pN("static"))},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(e,t){var n=e.target.error||void 0;return lN.create(t,{originalErrorMessage:n&&n.message})}var gN="app_namespace_store";var yN=function(){function e(e,t,n,r){void 0===r&&(r=new Promise((function(e,t){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(e){t(vN(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(gN,{keyPath:"compositeKey"})}}}))),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(e){return this.set("active_config",e)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(e){return oN(this,void 0,void 0,(function(){var t,n=this;return aN(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([gN],"readonly").objectStore(gN),a=n.createCompositeKey(e);try{var s=o.get(a);s.onerror=function(e){i(vN(e,"storage-get"))},s.onsuccess=function(e){var t=e.target.result;r(t?t.value:void 0)}}catch(e){i(lN.create("storage-get",{originalErrorMessage:e&&e.message}))}}))]}}))}))},e.prototype.set=function(e,t){return oN(this,void 0,void 0,(function(){var n,r=this;return aN(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([gN],"readwrite").objectStore(gN),s=r.createCompositeKey(e);try{var u=a.put({compositeKey:s,value:t});u.onerror=function(e){o(vN(e,"storage-set"))},u.onsuccess=function(){i()}}catch(e){o(lN.create("storage-set",{originalErrorMessage:e&&e.message}))}}))]}}))}))},e.prototype.delete=function(e){return oN(this,void 0,void 0,(function(){var t,n=this;return aN(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([gN],"readwrite").objectStore(gN),a=n.createCompositeKey(e);try{var s=o.delete(a);s.onerror=function(e){i(vN(e,"storage-delete"))},s.onsuccess=function(){r()}}catch(e){i(lN.create("storage-delete",{originalErrorMessage:e&&e.message}))}}))]}}))}))},e.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},e}(),bN=function(){function e(e){this.storage=e}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return oN(this,void 0,void 0,(function(){var e,t,n,r,i,o;return aN(this,(function(a){switch(a.label){case 0:return e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,e];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,t];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}}))}))},e.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},e.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function wN(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(lN.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}var _N,kN=function(){function e(e,t){this.client=e,this.storage=t}return e.prototype.fetch=function(e){return oN(this,void 0,void 0,(function(){var t;return aN(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,t)]}}))}))},e.prototype.attemptFetch=function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount;return oN(this,void 0,void 0,(function(){var t,i,o;return aN(this,(function(a){switch(a.label){case 0:return[4,wN(e.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return t=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,t];case 5:if(!function(e){if(!(e instanceof bn.FirebaseError&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(i=a.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+bn.calculateBackoffMillis(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(e,o)];case 7:return[2]}}))}))},e}(),SN="@firebase/remote-config";(_N=er).INTERNAL.registerComponent(new Mn("remoteConfig",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations").getImmediate();if("undefined"==typeof window)throw lN.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw lN.create("registration-project-id");if(!s)throw lN.create("registration-api-key");if(!u)throw lN.create("registration-app-id");n=n||"firebase";var c=new yN(u,r.name,n),l=new bN(c),h=new Bn(SN);h.logLevel=Pn.ERROR;var f=new hN(i,_N.SDK_VERSION,n,a,s,u),d=new kN(f,c),p=new uN(d,c,l,h),m=new mN(r,p,l,c,h);return m.ensureInitialized(),m}),"PUBLIC").setMultipleInstances(!0)),_N.registerVersion(SN,"0.1.43");var EN=function(){return(EN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function MN(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function TN(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o}Object.create;function CN(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;bn=o("1xTls");function IN(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var xN,AN=IN(gn),PN=((xN={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",xN["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",xN["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",xN["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",xN["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",xN["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",xN["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",xN["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",xN["recaptcha-error"]="ReCAPTCHA error.",xN),ON=new bn.ErrorFactory("appCheck","AppCheck",PN),RN=new Map,DN={activated:!1,tokenObservers:[]},NN={enabled:!1};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(e){return RN.get(e)||DN}function jN(e,t){RN.set(e,t)}function BN(){return NN}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FN="https://content-firebaseappcheck.googleapis.com/v1beta",UN=3e4,qN=96e4,zN=function(){function e(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return e.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},e.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},e.prototype.isRunning=function(){return!!this.pending},e.prototype.process=function(e){return MN(this,void 0,void 0,(function(){var t;return TN(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new bn.Deferred,[4,(r=this.getNextRun(e),new Promise((function(e){setTimeout(e,r)})))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new bn.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return t=n.sent(),this.retryPolicy(t)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}var r;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))},e.prototype.getNextRun=function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t},e}();function VN(){return self.grecaptcha}function WN(e){if(!LN(e).activated)throw ON.create("use-before-activation",{appName:e.name})}function HN(e){return bn.base64.encodeString(JSON.stringify(e),!1)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(e,t){var n=e.url,r=e.body;return MN(this,void 0,void 0,(function(){var e,i,o,a,s,u,c,l,h,f;return TN(this,(function(d){switch(d.label){case 0:e={"Content-Type":"application/json"},(i=t.getImmediate({optional:!0}))&&(e["X-Firebase-Client"]=i.getPlatformInfoString()),o={method:"POST",body:JSON.stringify(r),headers:e},d.label=1;case 1:return d.trys.push([1,3,,4]),[4,fetch(n,o)];case 2:return a=d.sent(),[3,4];case 3:throw s=d.sent(),ON.create("fetch-network-error",{originalErrorMessage:s.message});case 4:if(200!==a.status)throw ON.create("fetch-status-error",{httpStatus:a.status});d.label=5;case 5:return d.trys.push([5,7,,8]),[4,a.json()];case 6:return u=d.sent(),[3,8];case 7:throw c=d.sent(),ON.create("fetch-parse-error",{originalErrorMessage:c.message});case 8:if(!(l=u.ttl.match(/^([\d.]+)(s)$/))||!l[2]||isNaN(Number(l[1])))throw ON.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+u.ttl});return h=1e3*Number(l[1]),f=Date.now(),[2,{token:u.attestationToken,expireTimeMillis:f+h,issuedAtTimeMillis:f}]}}))}))}function GN(e,t){var n=e.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:FN+"/projects/"+r+"/apps/"+i+":exchangeRecaptchaToken?key="+o,body:{recaptcha_token:t}}}function YN(e,t){var n=e.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:FN+"/projects/"+r+"/apps/"+i+":exchangeDebugToken?key="+o,body:{debug_token:t}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QN="firebase-app-check-store",JN="debug-token",ZN=null;function XN(){return ZN||(ZN=new Promise((function(e,t){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){var n;t(ON.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(QN,{keyPath:"compositeKey"})}}}catch(e){t(ON.create("storage-open",{originalErrorMessage:e.message}))}})))}function $N(e){return tL(nL(e))}function eL(e,t){return MN(this,void 0,void 0,(function(){var n,r,i,o;return TN(this,(function(a){switch(a.label){case 0:return[4,XN()];case 1:return n=a.sent(),r=n.transaction(QN,"readwrite"),i=r.objectStore(QN),o=i.put({compositeKey:e,value:t}),[2,new Promise((function(e,t){o.onsuccess=function(t){e()},r.onerror=function(e){var n;t(ON.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function tL(e){return MN(this,void 0,void 0,(function(){var t,n,r,i;return TN(this,(function(o){switch(o.label){case 0:return[4,XN()];case 1:return t=o.sent(),n=t.transaction(QN,"readonly"),r=n.objectStore(QN),i=r.get(e),[2,new Promise((function(e,t){i.onsuccess=function(t){var n=t.target.result;e(n?n.value:void 0)},n.onerror=function(e){var n;t(ON.create("storage-get",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function nL(e){return e.options.appId+"-"+e.name}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rL=new Bn("@firebase/app-check");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(e,t){return bn.isIndexedDBAvailable()?function(e,t){return eL(nL(e),t)}(e,t).catch((function(e){rL.warn("Failed to write token to indexeddb. Error: "+e)})):Promise.resolve()}function oL(){return MN(this,void 0,void 0,(function(){var e,t;return TN(this,(function(n){switch(n.label){case 0:e=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,tL(JN)];case 2:return e=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return e?[2,e]:(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),(r=t,eL(JN,r)).catch((function(e){return rL.warn("Failed to persist debug token to indexeddb. Error: "+e)})),console.log("AppCheck debug token: "+t+". You will need to whitelist it in the Firebase console for it to work"),[2,t])}var r}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aL(){return MN(this,void 0,void 0,(function(){var e;return TN(this,(function(t){if((e=BN()).enabled&&e.token)return[2,e.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var sL={error:"UNKNOWN_ERROR"};function uL(e,t,n){return void 0===n&&(n=!1),MN(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f;return TN(this,(function(d){switch(d.label){case 0:return WN(e),r=LN(e),i=r.token,o=void 0,i?[3,2]:[4,r.cachedTokenPromise];case 1:(a=d.sent())&&fL(a)&&(i=a,jN(e,EN(EN({},r),{token:i})),hL(e,{token:i.token})),d.label=2;case 2:return!n&&i&&fL(i)?[2,{token:i.token}]:BN().enabled?(u=KN,c=YN,l=[e],[4,aL()]):[3,6];case 3:return[4,u.apply(void 0,[c.apply(void 0,l.concat([d.sent()])),t])];case 4:return s=d.sent(),[4,iL(e,s)];case 5:return d.sent(),jN(e,EN(EN({},r),{token:s})),[2,{token:s.token}];case 6:return d.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=d.sent(),[3,9];case 8:return h=d.sent(),rL.error(h),o=h,[3,9];case 9:return i?[3,10]:(f=function(e){return{token:HN(sL),error:e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(o),[3,12]);case 10:return f={token:i.token},jN(e,EN(EN({},r),{token:i})),[4,iL(e,i)];case 11:d.sent(),d.label=12;case 12:return hL(e,f),[2,f]}}))}))}function cL(e,t,n,r,i){var o=LN(e),a={next:r,error:i,type:n},s=EN(EN({},o),{tokenObservers:CN(CN([],o.tokenObservers),[a])});if(!s.tokenRefresher){var u=function(e,t){var n=this;return new zN((function(){return MN(n,void 0,void 0,(function(){var n;return TN(this,(function(r){switch(r.label){case 0:return LN(e).token?[3,2]:[4,uL(e,t)];case 1:return n=r.sent(),[3,4];case 2:return[4,uL(e,t,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}}))}))}),(function(){return!0}),(function(){var t=LN(e);if(t.token){var n=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5,r=t.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),UN,qN)}(e,t);s.tokenRefresher=u}if(!s.tokenRefresher.isRunning()&&o.isTokenAutoRefreshEnabled&&s.tokenRefresher.start(),o.token&&fL(o.token)){var c=o.token;Promise.resolve().then((function(){return r({token:c.token})})).catch((function(){}))}else null==o.token&&o.cachedTokenPromise.then((function(e){e&&fL(e)&&r({token:e.token})})).catch((function(){}));jN(e,s)}function lL(e,t){var n=LN(e),r=n.tokenObservers.filter((function(e){return e.next!==t}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),jN(e,EN(EN({},n),{tokenObservers:r}))}function hL(e,t){for(var n=0,r=LN(e).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(e){}}}function fL(e){return e.expireTimeMillis-Date.now()>0}function dL(e,t){var n=LN(e),r=new bn.Deferred;jN(e,EN(EN({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+e.name,o=document.createElement("div");o.id=i,o.style.display="none",document.body.appendChild(o);var a,s,u=VN();return u?u.ready((function(){mL(e,t,u,i),r.resolve(u)})):(a=function(){var n=VN();if(!n)throw new Error("no recaptcha");n.ready((function(){mL(e,t,n,i),r.resolve(n)}))},(s=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",s.onload=a,document.head.appendChild(s)),r.promise}function pL(e){return MN(this,void 0,void 0,(function(){var t;return TN(this,(function(n){switch(n.label){case 0:return WN(e),[4,LN(e).reCAPTCHAState.initialized.promise];case 1:return t=n.sent(),[2,new Promise((function(n,r){var i=LN(e).reCAPTCHAState;t.ready((function(){n(t.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function mL(e,t,n,r){var i=n.render(r,{sitekey:t,size:"invisible"}),o=LN(e);jN(e,EN(EN({},o),{reCAPTCHAState:EN(EN({},o.reCAPTCHAState),{widgetId:i})}))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vL=function(){function e(e){this._siteKey=e}return e.prototype.getToken=function(){return MN(this,void 0,void 0,(function(){var e;return TN(this,(function(t){switch(t.label){case 0:if(!this._app||!this._platformLoggerProvider)throw ON.create("use-before-activation",{appName:""});t.label=1;case 1:return t.trys.push([1,3,,4]),[4,pL(this._app)];case 2:return e=t.sent(),[3,4];case 3:throw t.sent(),ON.create("recaptcha-error");case 4:return[2,KN(GN(this._app,e),this._platformLoggerProvider)]}}))}))},e.prototype.initialize=function(e,t){this._app=e,this._platformLoggerProvider=t,dL(e,this._siteKey).catch((function(){}))},e}(),gL=function(){function e(e){this._customProviderOptions=e}return e.prototype.getToken=function(){return MN(this,void 0,void 0,(function(){var e,t,n;return TN(this,(function(r){switch(r.label){case 0:if(!this._app)throw ON.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return e=r.sent(),t=bn.issuedAtTime(e.token),n=null!==t&&t<Date.now()&&t>0?1e3*t:Date.now(),[2,EN(EN({},e),{issuedAtTimeMillis:n})]}}))}))},e.prototype.initialize=function(e){this._app=e},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function yL(e,t,n,r){var i=LN(e);if(i.activated)throw ON.create("already-activated",{appName:e.name});var o=EN(EN({},i),{activated:!0});o.cachedTokenPromise=function(e){return MN(this,void 0,void 0,(function(){var t,n;return TN(this,(function(r){switch(r.label){case 0:if(!bn.isIndexedDBAvailable())return[3,5];t=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,$N(e)];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),rL.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,t];case 5:return[2,void 0]}}))}))}(e).then((function(t){return t&&fL(t)&&jN(e,EN(EN({},LN(e)),{token:t})),t})),o.provider="string"==typeof t?new vL(t):t instanceof vL||t instanceof gL?t:new gL({getToken:t.getToken}),o.isTokenAutoRefreshEnabled=void 0===r?e.automaticDataCollectionEnabled:r,jN(e,o),o.provider.initialize(e,n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function bL(e,t){return{app:e,activate:function(n,r){return yL(e,n,t,r)},setTokenAutoRefreshEnabled:function(t){return function(e,t){var n=LN(e);n.tokenRefresher&&(!0===t?n.tokenRefresher.start():n.tokenRefresher.stop()),jN(e,EN(EN({},n),{isTokenAutoRefreshEnabled:t}))}(e,t)},getToken:function(n){return function(e,t,n){return MN(this,void 0,void 0,(function(){var r;return TN(this,(function(i){switch(i.label){case 0:return[4,uL(e,t,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}}))}))}(e,t,n)},onTokenChanged:function(n,r,i){return function(e,t,n,r,i){var o=function(){},a=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?a=n.error.bind(n):r&&(a=r),cL(e,t,"EXTERNAL",o,a),function(){return lL(e,o)}}(e,t,n,r)},INTERNAL:{delete:function(){for(var t=0,n=LN(e).tokenObservers;t<n.length;t++){var r=n[t];lL(e,r.next)}return Promise.resolve()}}}}var wL="app-check-internal";!function(e){e.INTERNAL.registerComponent(new Mn("appCheck",(function(e){return bL(e.getProvider("app").getImmediate(),e.getProvider("platform-logger"))}),"PUBLIC").setServiceProps({ReCaptchaV3Provider:vL,CustomProvider:gL}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider(wL).initialize()}))),e.INTERNAL.registerComponent(new Mn(wL,(function(e){return function(e,t){return{getToken:function(n){return uL(e,t,n)},addTokenListener:function(n){return cL(e,t,"INTERNAL",n)},removeTokenListener:function(t){return lL(e,t)}}}(e.getProvider("app").getImmediate(),e.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT")),e.registerVersion("@firebase/app-check","0.3.2")}(AN.default),function(){var e=bn.getGlobal();if("string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===e.FIREBASE_APPCHECK_DEBUG_TOKEN){var t=BN();t.enabled=!0;var n=new bn.Deferred;t.token=n,"string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(oL())}}();var _L="8.10.0";
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
er.registerVersion("firebase",_L,"app"),er.SDK_VERSION=_L;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),er.registerVersion("firebase","8.10.0");const kL={callbacks:{signInSuccessWithAuthResult:function(e,t){const n=ws();return n.shouldVerifyEmail&&Ss(n.email),!0}},signInOptions:[$54b2dbb6142942fd28bc73ca472db0e8$exports.auth.EmailAuthProvider.PROVIDER_ID,$54b2dbb6142942fd28bc73ca472db0e8$exports.auth.GoogleAuthProvider.PROVIDER_ID,$54b2dbb6142942fd28bc73ca472db0e8$exports.auth.TwitterAuthProvider.PROVIDER_ID]};function SL(){return e(a).createElement("div",null,e(a).createElement("header",{role:"banner"},e(a).createElement("h1",null,"Welcome to Roguelike Celebration 2021!")),e(a).createElement("main",{role:"main"},e(a).createElement("p",null,"This is a social space for attendees of"," ",e(a).createElement("a",{href:"https://roguelike.club"},"Roguelike Celebration"),", a community-generated weekend of talks, games, and conversations about roguelikes and related topics, including procedural generation and game design. It's for fans, players, developers, scholars, and everyone else!"),e(a).createElement(e(Gs),{uiConfig:kL,firebaseAuth:firebase.auth()}),e(a).createElement("p",null,"If you log in via email, we will require you to verify that email address."),e(a).createElement("p",null,"No matter which service you log in with, we do not access any data other than what is needed to authenticate you. If it would make you more comfortable, feel free to sign up for and use a throwaway account on one of these services."),e(a).createElement("p",null,"After logging in, you will have the opportunity to pick whatever chat handle you would like before entering the space."),e(a).createElement("p",null,"By entering the space, you agree to our"," ",e(a).createElement("a",{href:"https://roguelike.club/code.html"},"Code of Conduct"),".")))}a=o("6Ti1v");function EL(t){return e(a).createElement("div",null,e(a).createElement("h1",null,"This isn't a normal chat app!"),e(a).createElement("p",null,"In the Roguelike Celebration conference space, you can only send/receive messages ",e(a).createElement("strong",null,"in the chat room you are currently in"),"."),e(a).createElement("p",null,"You can move from virtual room to virtual room to talk to different people."),e(a).createElement("p",null,"You may see or hear others on videochat, but they can't see or hear you unless you explicitly turn on your audio or video."),e(a).createElement("p",null,"Our hope is to facilitate smaller group conversations, to capture the feel of an in-person conference, and to give you a fun and playful space to explore with your fellow attendees."),e(a).createElement("p",null,"Happy wandering, and be wary of reading scrolls without identifying them first ;)"),e(a).createElement("p",null,"-The Roguelike Celebration team"))}a=o("6Ti1v");function ML(){return e(a).createElement("div",{id:"go-home"},e(a).createElement("h1",null,"A magical force repels you from the entrance"),e(a).createElement("p",null,"Roguelike Celebration is currently closed! Check the ",e(a).createElement("a",{href:"https://roguelike.club/event2021.html",target:"_blank",rel:"noreferrer"},"schedule")," to see when our doors will be open again."),e(a).createElement("p",null,"We look forward to celebrating again with you soon :)"))}a=o("6Ti1v");function TL(){return e(a).createElement("div",{id:"you-are-banned"},e(a).createElement("h1",null,"You are banned"),e(a).createElement("p",null,"You have been banned from the social space. If you believe you have been banned in error, please email ",e(a).createElement("b",null,"contact at roguelike.club"),"."))}a=o("6Ti1v");function CL(t){const n=t.rooms.map((t=>t.hidden?"":e(a).createElement(IL,{room:t,key:`room-sidebar-${t.id}`})));return e(a).createElement("div",null,e(a).createElement("h1",null,"List of Rooms"),e(a).createElement("ul",null,n))}const IL=t=>{const{room:n}=t,r=n.users?`(${n.users.length})`:"",i=n.videoUsers&&n.videoUsers.length>0?e(a).createElement(Ar,null):"";return e(a).createElement("li",{style:{listStyle:"none"}},e(a).createElement("button",{onClick:()=>{fr(n.id)},className:"link-styled-button"},e(a).createElement("strong",null,n.name)," ",r," ",i))};a=o("6Ti1v");function xL(t){const[n,r]=a.useState(JSON.stringify(t.serverSettings,null,2)),[i,o]=a.useState(""),[s,u]=a.useState(""),[c,l]=a.useState(""),h=()=>{let e;try{e=function(e){try{return void 0===e.movementMessagesHideThreshold||void 0===e.movementMessagesHideRoomIds||e.happeningNowEntries&&!e.happeningNowEntries.every(Vr)?(console.log("Returning null in toServerSettings"),null):{movementMessagesHideThreshold:e.movementMessagesHideThreshold,movementMessagesHideRoomIds:e.movementMessagesHideRoomIds,happeningNowEntries:e.happeningNowEntries||[],spaceIsClosed:!!e.spaceIsClosed}}catch(e){return console.log("Error in toServerSettings",e),null}}(JSON.parse(n))}catch(e){return void alert("JSON parse error: "+e.toString())}e?sr(e):alert("New settings were valid json but had invalid properties, please check for typos!")};return e(a).createElement("div",{className:"serverSettingsContainer"},e(a).createElement("h1",null,"Happening Now Controls"),e(a).createElement("h2",null,"Current Entries"),t.serverSettings.happeningNowEntries.map((n=>e(a).createElement("li",{key:n.text},JSON.stringify(n),e(a).createElement("button",{id:"delete-"+n.text,onClick:()=>(e=>{if(confirm("Are you sure you want to delete the happening now note?")){const n=JSON.parse(JSON.stringify(t.serverSettings));n.happeningNowEntries=t.serverSettings.happeningNowEntries.filter((t=>t.text!==e.text)),sr(n)}})(n)},"Delete")))),e(a).createElement("div",{className:"form",id:"addHappeningNowForm"},e(a).createElement("div",{className:"field"},e(a).createElement("label",{htmlFor:"add-happening-now-text"},"Text"),e(a).createElement("input",{type:"text",id:"add-happening-now-text",value:i,onChange:e=>o(e.currentTarget.value)})),e(a).createElement("div",{className:"field"},e(a).createElement("label",{htmlFor:"add-happening-now-room-id"},"Room ID (blank if you want to link to an external site)"),e(a).createElement("input",{type:"text",id:"add-happening-now-room-id",value:s,onChange:e=>u(e.currentTarget.value)})),e(a).createElement("div",{className:"field"},e(a).createElement("label",{htmlFor:"add-happening-now-external-link"},"External Link (blank if you want to link to a room)"),e(a).createElement("input",{type:"text",id:"add-happening-now-external-link",value:c,onChange:e=>l(e.currentTarget.value)})),e(a).createElement("button",{id:"add-entry",onClick:()=>{if(0===i.length)return void alert("You need to have text!");if(s.length>0&&c.length>0)return void alert("You cannot have roomId and external link");if(s.length>0&&!zr[s])return void alert("No such room as "+s);const e=JSON.parse(JSON.stringify(t.serverSettings));e.happeningNowEntries.push({text:i,roomId:s.length>0?s:void 0,externalLink:c.length>0?c:void 0}),sr(e)},className:"submit"},"Add Entry")),e(a).createElement("h1",null,"Manual Controls (Finnicky)"),e(a).createElement("h3",{id:"old-settings-header"},"Old settings:"),e(a).createElement("pre",{id:"old-settings-pretty"},JSON.stringify(t.serverSettings,null,2)),e(a).createElement("h3",{id:"new-settings-header"},"New settings:"),e(a).createElement("div",{className:"form",id:"serverSettingsForm"},e(a).createElement("textarea",{id:"new-settings-textarea",defaultValue:n,cols:50,rows:30,onChange:e=>r(e.currentTarget.value)}),e(a).createElement("button",{onClick:e=>{h()},className:"submit"},"Save Changes")))}a=o("6Ti1v");function AL(){return e(a).createElement("div",{id:"client-deployed"},e(a).createElement("h1",null,"New Version Available!"),e(a).createElement("p",null,"We just updated the social space with new features and bugfixes!"),e(a).createElement("p",null,"Please reload this page whenever is convenient so you can be running the latest code."),e(a).createElement("button",{onClick:()=>window.location.reload()},"Reload"))}a=o("6Ti1v");const PL=[...Vs].reverse();function OL(t){const n=a.useContext(qq),r=new Date,i=PL.findIndex((e=>e.time<r)),o=PL[i],s=e=>{zr[e]?(fr(e),n(tn())):console.error("Can't go to room "+e+" from link in happening now view, no such room!")};let u;if(o)if("Social Time"===o.text){var c=i+1;const n=[];for(;PL[c]&&PL[c].breakoutRoomId;){const r=PL[c],i=r.breakoutRoomId,o=`Discuss ${r.text} in `;n.push(e(a).createElement("li",{key:i},o,e(a).createElement("button",{id:`button-happening-now${i}`,onClick:()=>s(i),className:"link-styled-button"},t.roomData[i]?t.roomData[i].name:"unknown room"))),c++}n.push(e(a).createElement("li",{key:"option-chat"},"Chat!")),n.push(e(a).createElement("li",{key:"option-explore"},"Explore the space!")),n.push(e(a).createElement("li",{key:"option-hunt"},"Hunt for secrets!")),n.push(e(a).createElement("li",{key:"option-free"},"Just remember to beware the grues.")),u=e(a).createElement("div",{id:"currently-scheduled-div"},e(a).createElement("strong",null,"Social Time"),e(a).createElement("ul",null,n))}else u=e(a).createElement("div",{id:"currently-scheduled-div"},o.text,o.roomIds?(l=o.roomIds,e(a).createElement("ul",null,l.map((n=>e(a).createElement("li",{key:n},e(a).createElement("button",{id:`button-happening-now${n}`,onClick:()=>s(n),className:"link-styled-button"},t.roomData[n]?t.roomData[n].name:"unknown room")))))):"");else u=e(a).createElement("strong",null,"You're in early! Check the schedule for when the doors officially open.");var l;return e(a).createElement("div",{id:"happening-now"},e(a).createElement("h1",null,"Happening Now"),e(a).createElement("h2",null,"From The Schedule"),u,e(a).createElement("h2",null,"Other Live Activities"),e(a).createElement("ul",null,t.entries.map((t=>t.roomId?e(a).createElement("li",{key:t.text},e(a).createElement("button",{id:`button-${t.text}`,onClick:()=>s(t.roomId),className:"link-styled-button"},t.text)):t.externalLink?e(a).createElement("li",{key:t.text},e(a).createElement("a",{className:"nav-item",href:t.externalLink,target:"_blank",rel:"nofollow noopener noreferrer"},t.text)):e(a).createElement("li",{key:t.text},t.text)))))}a=o("6Ti1v"),a=o("6Ti1v");var RL="undefined"!=typeof document,DL=[{hidden:"hidden",event:"visibilitychange",state:"visibilityState"},{hidden:"webkitHidden",event:"webkitvisibilitychange",state:"webkitVisibilityState"},{hidden:"mozHidden",event:"mozvisibilitychange",state:"mozVisibilityState"},{hidden:"msHidden",event:"msvisibilitychange",state:"msVisibilityState"},{hidden:"oHidden",event:"ovisibilitychange",state:"oVisibilityState"}],NL=RL&&Boolean(document.addEventListener),LL=function(){if(!NL)return null;var e=!0,t=!1,n=void 0;try{for(var r,i=DL[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;if(o.hidden in document)return o}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}return null}(),jL=function(){if(!LL)return[!0,"visible"];var e=LL.hidden,t=LL.state;return[!document[e],document[t]]},BL=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function FL(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var UL=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={isSupported:NL&&LL},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),BL(n,[{key:"componentDidMount",value:function(){this.state.isSupported&&(this.handleVisibilityChange=this.handleVisibilityChange.bind(this),document.addEventListener(LL.event,this.handleVisibilityChange))}},{key:"componentWillUnmount",value:function(){this.state.isSupported&&document.removeEventListener(LL.event,this.handleVisibilityChange)}},{key:"handleVisibilityChange",value:function(){var e;"function"==typeof this.props.onChange&&(e=this.props).onChange.apply(e,FL(jL()));"function"==typeof this.props.children&&this.forceUpdate()}},{key:"render",value:function(){return this.props.children?"function"==typeof this.props.children?this.state.isSupported?(t=this.props).children.apply(t,FL(jL())):this.props.children():e(a).Children.only(this.props.children):null;var t}}]),n}(e(a).Component);UL.displayName="PageVisibility",UL.propTypes={onChange:e(ai).func,children:e(ai).oneOfType([e(ai).node,e(ai).func])};var qL=UL;function zL(t){const n=t.dispatch;return e(a).createElement(qL,{onChange:e=>{const t=ws();e&&t&&!t.shouldVerifyEmail&&n(sn(t.id,t.id,t.providerId,!1))}},e(a).createElement("div",null,e(a).createElement("header",{role:"banner"},e(a).createElement("h1",null,"Please verify your email!")),e(a).createElement("main",{role:"main"},e(a).createElement("p",null,"You're currently attempting to log in as ",e(a).createElement("strong",null,t.userEmail),", but your email is not yet verified. Please follow the link in your email to complete the registration process."),e(a).createElement("p",null,e(a).createElement("strong",null,"If you have verified your email and this page has not automatically logged you in, please refresh the page manually.")),e(a).createElement("button",{onClick:e=>{Ss(t.userEmail)}},"Resend Verification Email"),e(a).createElement("br",null),e(a).createElement("button",{onClick:()=>{_s().then((()=>{n(sn(void 0,void 0,void 0,void 0))}))}},"Use a Different Provider or Email"))))}a=o("6Ti1v");function VL(){const t=er.auth().currentUser;return t.emailVerified||er.auth().signInWithEmailLink(t.email,window.location.href).then((()=>{window.location.reload()})),t.emailVerified?e(a).createElement("div",null,e(a).createElement("header",{role:"banner"},e(a).createElement("h1",null,"Your email has been successfully verified!")),e(a).createElement("main",{role:"main"},e(a).createElement("p",null,"You may now close this window and go back to the main app."))):e(a).createElement("div",null,e(a).createElement("header",{role:"banner"},e(a).createElement("h1",null,"Attempting to verify email.")),e(a).createElement("main",{role:"main"},e(a).createElement("p",null,"Please wait while your email is verified.")))}a=o("6Ti1v");function WL(t){const n=t.riddles.map((function(t,n){return e(a).createElement("p",{className:"riddle",key:"riddle-"+n},t)})),r=t.riddles.length>1?"The engraved riddles read...":"The engraved riddle reads...";return e(a).createElement("div",{id:"riddle-modal",className:"riddle-div"},e(a).createElement("h1",null,r),n)}Yr=o("2lxET"),a=o("6Ti1v"),a=o("6Ti1v");var HL,KL={};o.register("412Yf",(function(e,t){"use strict";var n=o("2cK96").inherits,r=o("1Y49Z");function i(e,t){var n=new r(e,t);return Object.setPrototypeOf(n,i.prototype),n}n(i,r),e.exports=i})),o.register("2cK96",(function(e,t){var n=o("7lbf0"),r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;e.exports.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(u(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),s=r[n];n<o;s=r[++n])v(s)||!_(s)?a+=" "+s:a+=" "+u(s);return a},e.exports.deprecate=function(t,r){if(void 0!==n&&!0===n.noDeprecation)return t;if(void 0===n)return function(){return e.exports.deprecate(t,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?console.trace(r):console.error(r),i=!0}return t.apply(this,arguments)}};var a={},s=/^$/;function u(t,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(n)?r.showHidden=n:n&&e.exports._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),h(r,t,r.depth)}function c(e,t){var n=u.styles[t];return n?"["+u.colors[n][0]+"m"+e+"["+u.colors[n][1]+"m":e}function l(e,t){return e}function h(t,n,r){if(t.customInspect&&n&&E(n.inspect)&&n.inspect!==e.exports.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return y(i)||(i=h(t,i,r)),i}var o=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(g(t))return e.stylize(""+t,"number");if(m(t))return e.stylize(""+t,"boolean");if(v(t))return e.stylize("null","null")}(t,n);if(o)return o;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),S(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(n);if(0===a.length){if(E(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(k(n))return t.stylize(Date.prototype.toString.call(n),"date");if(S(n))return f(n)}var c,l="",_=!1,M=["{","}"];(p(n)&&(_=!0,M=["[","]"]),E(n))&&(l=" [Function"+(n.name?": "+n.name:"")+"]");return w(n)&&(l=" "+RegExp.prototype.toString.call(n)),k(n)&&(l=" "+Date.prototype.toUTCString.call(n)),S(n)&&(l=" "+f(n)),0!==a.length||_&&0!=n.length?r<0?w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=_?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)x(t,String(a))?o.push(d(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(d(e,t,n,r,i,!0))})),o}(t,n,r,s,a):a.map((function(e){return d(t,n,r,s,e,_)})),t.seen.pop(),function(e,t,n){var r=0;return e.reduce((function(e,t){r++;if(t.indexOf("\n")>=0)r++;return e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(c,l,M)):M[0]+l+M[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),x(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=v(n)?h(e,u.value,null):h(e,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),b(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function v(e){return null===e}function g(e){return"number"==typeof e}function y(e){return"string"==typeof e}function b(e){return void 0===e}function w(e){return _(e)&&"[object RegExp]"===M(e)}function _(e){return"object"==typeof e&&null!==e}function k(e){return _(e)&&"[object Date]"===M(e)}function S(e){return _(e)&&("[object Error]"===M(e)||e instanceof Error)}function E(e){return"function"==typeof e}function M(e){return Object.prototype.toString.call(e)}function T(e){return e<10?"0"+e.toString(10):e.toString(10)}e.exports.debuglog=function(t){if(t=t.toUpperCase(),!a[t])if(s.test(t)){var r=n.pid;a[t]=function(){var n=e.exports.format.apply(e.exports,arguments);console.error("%s %d: %s",t,r,n)}}else a[t]=function(){};return a[t]},e.exports.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.exports.types=o("1bQPB"),e.exports.isArray=p,e.exports.isBoolean=m,e.exports.isNull=v,e.exports.isNullOrUndefined=function(e){return null==e},e.exports.isNumber=g,e.exports.isString=y,e.exports.isSymbol=function(e){return"symbol"==typeof e},e.exports.isUndefined=b,e.exports.isRegExp=w,e.exports.types.isRegExp=w,e.exports.isObject=_,e.exports.isDate=k,e.exports.types.isDate=k,e.exports.isError=S,e.exports.types.isNativeError=S,e.exports.isFunction=E,e.exports.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},e.exports.isBuffer=o("5vVsB");var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),C[e.getMonth()],t].join(" ")}function x(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports.log=function(){console.log("%s - %s",I(),e.exports.format.apply(e.exports,arguments))},e.exports.inherits=o("67rjf"),e.exports._extend=function(e,t){if(!t||!_(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var A="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}e.exports.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(A&&e[A]){var t;if("function"!=typeof(t=e[A]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,A,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),A&&Object.defineProperty(t,A,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},e.exports.promisify.custom=A,e.exports.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var i=t.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,t).then((function(e){n.nextTick(a.bind(null,null,e))}),(function(e){n.nextTick(P.bind(null,e,a))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,r(e)),t}})),o.register("1bQPB",(function(e,t){"use strict";var n=o("2fjQn"),r=o("5gdE8"),i=o("5WFk8"),a=o("UWFp8");function s(e){return e.call.bind(e)}var u="undefined"!=typeof BigInt,c="undefined"!=typeof Symbol,l=s(Object.prototype.toString),h=s(Number.prototype.valueOf),f=s(String.prototype.valueOf),d=s(Boolean.prototype.valueOf);if(u)var p=s(BigInt.prototype.valueOf);if(c)var m=s(Symbol.prototype.valueOf);function v(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function g(e){return"[object Map]"===l(e)}function y(e){return"[object Set]"===l(e)}function b(e){return"[object WeakMap]"===l(e)}function w(e){return"[object WeakSet]"===l(e)}function _(e){return"[object ArrayBuffer]"===l(e)}function k(e){return"undefined"!=typeof ArrayBuffer&&(_.working?_(e):e instanceof ArrayBuffer)}function S(e){return"[object DataView]"===l(e)}function E(e){return"undefined"!=typeof DataView&&(S.working?S(e):e instanceof DataView)}e.exports.isArgumentsObject=n,e.exports.isGeneratorFunction=r,e.exports.isTypedArray=a,e.exports.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},e.exports.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):a(e)||E(e)},e.exports.isUint8Array=function(e){return"Uint8Array"===i(e)},e.exports.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===i(e)},e.exports.isUint16Array=function(e){return"Uint16Array"===i(e)},e.exports.isUint32Array=function(e){return"Uint32Array"===i(e)},e.exports.isInt8Array=function(e){return"Int8Array"===i(e)},e.exports.isInt16Array=function(e){return"Int16Array"===i(e)},e.exports.isInt32Array=function(e){return"Int32Array"===i(e)},e.exports.isFloat32Array=function(e){return"Float32Array"===i(e)},e.exports.isFloat64Array=function(e){return"Float64Array"===i(e)},e.exports.isBigInt64Array=function(e){return"BigInt64Array"===i(e)},e.exports.isBigUint64Array=function(e){return"BigUint64Array"===i(e)},g.working="undefined"!=typeof Map&&g(new Map),e.exports.isMap=function(e){return"undefined"!=typeof Map&&(g.working?g(e):e instanceof Map)},y.working="undefined"!=typeof Set&&y(new Set),e.exports.isSet=function(e){return"undefined"!=typeof Set&&(y.working?y(e):e instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),e.exports.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},w.working="undefined"!=typeof WeakSet&&w(new WeakSet),e.exports.isWeakSet=function(e){return w(e)},_.working="undefined"!=typeof ArrayBuffer&&_(new ArrayBuffer),e.exports.isArrayBuffer=k,S.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),e.exports.isDataView=E;var M="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function T(e){return"[object SharedArrayBuffer]"===l(e)}function C(e){return void 0!==M&&(void 0===T.working&&(T.working=T(new M)),T.working?T(e):e instanceof M)}function I(e){return v(e,h)}function x(e){return v(e,f)}function A(e){return v(e,d)}function P(e){return u&&v(e,p)}function O(e){return c&&v(e,m)}e.exports.isSharedArrayBuffer=C,e.exports.isAsyncFunction=function(e){return"[object AsyncFunction]"===l(e)},e.exports.isMapIterator=function(e){return"[object Map Iterator]"===l(e)},e.exports.isSetIterator=function(e){return"[object Set Iterator]"===l(e)},e.exports.isGeneratorObject=function(e){return"[object Generator]"===l(e)},e.exports.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===l(e)},e.exports.isNumberObject=I,e.exports.isStringObject=x,e.exports.isBooleanObject=A,e.exports.isBigIntObject=P,e.exports.isSymbolObject=O,e.exports.isBoxedPrimitive=function(e){return I(e)||x(e)||A(e)||P(e)||O(e)},e.exports.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(k(e)||C(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(t){Object.defineProperty(e.exports,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})}))})),o.register("2fjQn",(function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,r=o("fQB5Q")("Object.prototype.toString"),i=function(e){return!(n&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===r(e)},a=function(e){return!!i(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==r(e)&&"[object Function]"===r(e.callee)},s=function(){return i(arguments)}();i.isLegacyArguments=a,e.exports=s?i:a})),o.register("fQB5Q",(function(e,t){"use strict";var n=o("5sE9x"),r=o("3EXX5"),i=r(n("String.prototype.indexOf"));e.exports=function(e,t){var o=n(e,!!t);return"function"==typeof o&&i(e,".prototype.")>-1?r(o):o}})),o.register("5sE9x",(function(e,t){"use strict";var n,r=SyntaxError,i=Function,a=TypeError,s=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(e){u=null}var c=function(){throw new a},l=u?function(){try{return c}catch(e){try{return u(arguments,"callee").get}catch(e){return c}}}():c,h=o("6pa0H")(),f=Object.getPrototypeOf||function(e){return e.__proto__},d={},p="undefined"==typeof Uint8Array?n:f(Uint8Array),m={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":h?f([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?f(f([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h?f((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h?f((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?f(""[Symbol.iterator]()):n,"%Symbol%":h?Symbol:n,"%SyntaxError%":r,"%ThrowTypeError%":l,"%TypedArray%":p,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},v=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(n=f(i.prototype))}return m[t]=n,n},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=o("6MwEN"),b=o("A728t"),w=y.call(Function.call,Array.prototype.concat),_=y.call(Function.apply,Array.prototype.splice),k=y.call(Function.call,String.prototype.replace),S=y.call(Function.call,String.prototype.slice),E=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,M=/\\(\\)?/g,T=function(e){var t=S(e,0,1),n=S(e,-1);if("%"===t&&"%"!==n)throw new r("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new r("invalid intrinsic syntax, expected opening `%`");var i=[];return k(e,E,(function(e,t,n,r){i[i.length]=n?k(r,M,"$1"):t||e})),i},C=function(e,t){var n,i=e;if(b(g,i)&&(i="%"+(n=g[i])[0]+"%"),b(m,i)){var o=m[i];if(o===d&&(o=v(i)),void 0===o&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:i,value:o}}throw new r("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');var n=T(e),i=n.length>0?n[0]:"",o=C("%"+i+"%",t),s=o.name,c=o.value,l=!1,h=o.alias;h&&(i=h[0],_(n,w([0,1],h)));for(var f=1,d=!0;f<n.length;f+=1){var p=n[f],v=S(p,0,1),g=S(p,-1);if(('"'===v||"'"===v||"`"===v||'"'===g||"'"===g||"`"===g)&&v!==g)throw new r("property names with quotes must have matching quotes");if("constructor"!==p&&d||(l=!0),b(m,s="%"+(i+="."+p)+"%"))c=m[s];else if(null!=c){if(!(p in c)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(u&&f+1>=n.length){var y=u(c,p);c=(d=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:c[p]}else d=b(c,p),c=c[p];d&&!l&&(m[s]=c)}}return c}})),o.register("6pa0H",(function(e,t){"use strict";var r=n.Symbol,i=o("2i7Ex");e.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&i())))}})),o.register("2i7Ex",(function(e,t){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}})),o.register("6MwEN",(function(e,t){"use strict";var n=o("6BCeX");e.exports=Function.prototype.bind||n})),o.register("6BCeX",(function(e,t){"use strict";var n="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,i=Object.prototype.toString,o="[object Function]";e.exports=function(e){var t=this;if("function"!=typeof t||i.call(t)!==o)throw new TypeError(n+t);for(var a,s=r.call(arguments,1),u=function(){if(this instanceof a){var n=t.apply(this,s.concat(r.call(arguments)));return Object(n)===n?n:this}return t.apply(e,s.concat(r.call(arguments)))},c=Math.max(0,t.length-s.length),l=[],h=0;h<c;h++)l.push("$"+h);if(a=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(u),t.prototype){var f=function(){};f.prototype=t.prototype,a.prototype=new f,f.prototype=null}return a}})),o.register("A728t",(function(e,t){"use strict";var n=o("6MwEN");e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)})),o.register("3EXX5",(function(e,t){"use strict";var n=o("6MwEN"),r=o("5sE9x"),i=r("%Function.prototype.apply%"),a=r("%Function.prototype.call%"),s=r("%Reflect.apply%",!0)||n.call(a,i),u=r("%Object.getOwnPropertyDescriptor%",!0),c=r("%Object.defineProperty%",!0),l=r("%Math.max%");if(c)try{c({},"a",{value:1})}catch(e){c=null}e.exports=function(e){var t=s(n,a,arguments);if(u&&c){var r=u(t,"length");r.configurable&&c(t,"length",{value:1+l(0,e.length-(arguments.length-1))})}return t};var h=function(){return s(n,i,arguments)};c?c(e.exports,"apply",{value:h}):e.exports.apply=h})),o.register("5gdE8",(function(e,t){"use strict";var n,r=Object.prototype.toString,i=Function.prototype.toString,o=/^\s*(?:function)?\*/,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,s=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(o.test(i.call(e)))return!0;if(!a)return"[object GeneratorFunction]"===r.call(e);if(!s)return!1;if(void 0===n){var t=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch(e){}}();n=!!t&&s(t)}return s(e)===n}})),o.register("5WFk8",(function(e,t){"use strict";var r=o("DxZXf"),i=o("sfPT1"),a=o("fQB5Q"),s=a("Object.prototype.toString"),u=o("6pa0H")()&&"symbol"==typeof Symbol.toStringTag,c=i(),l=a("String.prototype.slice"),h={},f=o("6ynXo"),d=Object.getPrototypeOf;u&&f&&d&&r(c,(function(e){if("function"==typeof n[e]){var t=new n[e];if(!(Symbol.toStringTag in t))throw new EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var r=d(t),i=f(r,Symbol.toStringTag);if(!i){var o=d(r);i=f(o,Symbol.toStringTag)}h[e]=i.get}}));var p=o("UWFp8");e.exports=function(e){return!!p(e)&&(u?function(e){var t=!1;return r(h,(function(n,r){if(!t)try{var i=n.call(e);i===r&&(t=i)}catch(e){}})),t}(e):l(s(e),8,-1))}})),o.register("DxZXf",(function(e,t){var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString;e.exports=function(e,t,i){if("[object Function]"!==r.call(t))throw new TypeError("iterator must be a function");var o=e.length;if(o===+o)for(var a=0;a<o;a++)t.call(i,e[a],a,e);else for(var s in e)n.call(e,s)&&t.call(i,e[s],s,e)}})),o.register("sfPT1",(function(e,t){"use strict";var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"];e.exports=function(){for(var e=[],t=0;t<r.length;t++)"function"==typeof n[r[t]]&&(e[e.length]=r[t]);return e}})),o.register("6ynXo",(function(e,t){"use strict";var n=o("5sE9x")("%Object.getOwnPropertyDescriptor%");if(n)try{n([],"length")}catch(e){n=null}e.exports=n})),o.register("UWFp8",(function(e,t){"use strict";var r=o("DxZXf"),i=o("sfPT1"),a=o("fQB5Q"),s=a("Object.prototype.toString"),u=o("6pa0H")()&&"symbol"==typeof Symbol.toStringTag,c=i(),l=a("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},h=a("String.prototype.slice"),f={},d=o("62SVX"),p=Object.getPrototypeOf;u&&d&&p&&r(c,(function(e){var t=new n[e];if(!(Symbol.toStringTag in t))throw new EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var r=p(t),i=d(r,Symbol.toStringTag);if(!i){var o=p(r);i=d(o,Symbol.toStringTag)}f[e]=i.get}));e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!u){var t=h(s(e),8,-1);return l(c,t)>-1}return!!d&&function(e){var t=!1;return r(f,(function(n,r){if(!t)try{t=n.call(e)===r}catch(e){}})),t}(e)}})),o.register("62SVX",(function(e,t){"use strict";var n=o("5sE9x")("%Object.getOwnPropertyDescriptor%");if(n)try{n([],"length")}catch(e){n=null}e.exports=n})),o.register("5vVsB",(function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}})),o.register("67rjf",(function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}})),o.register("1Y49Z",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var i=o("1UpQ7"),a=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"toString",value:function(){return"[LocalAudioTrack #"+this._instanceId+": "+this.id+"]"}},{key:"attach",value:function(e){return(e=r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).call(this,e)).muted=!0,e}},{key:"_end",value:function(){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_end",this).apply(this,arguments)}},{key:"disable",value:function(){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disable",this).apply(this,arguments)}},{key:"enable",value:function(){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enable",this).apply(this,arguments)}},{key:"restart",value:function(){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"restart",this).apply(this,arguments)}},{key:"stop",value:function(){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",this).apply(this,arguments)}}]),t}(o("5B2Jx")(i));e.exports=a})),o.register("1UpQ7",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var i=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"_start",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_start",this).call(this),this._dummyEl&&this._detachElement(this._dummyEl)}},{key:"attach",value:function(){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).apply(this,arguments)}},{key:"detach",value:function(){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"detach",this).apply(this,arguments)}}]),t}(o("6YbA9"));e.exports=i})),o.register("6YbA9",(function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=o("6YI9h").guessBrowser,a=o("3bRT0").MediaStream,s=o("2S2q7"),u=s.waitForEvent,c=s.waitForSometime,l=o("vrqLQ"),h=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Object.assign({playPausedElementsIfNotBackgrounded:"safari"===i()&&"object"===("undefined"==typeof document?"undefined":n(document))&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},r);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.id,e.kind,r)),s=!1;return r=Object.assign({MediaStream:a},r),Object.defineProperties(o,{_attachments:{value:new Set},_dummyEl:{value:null,writable:!0},_elShims:{value:new WeakMap},_isStarted:{get:function(){return s},set:function(e){s=e}},_playPausedElementsIfNotBackgrounded:{value:r.playPausedElementsIfNotBackgrounded},_shouldShimAttachedElements:{value:r.workaroundWebKitBug212780||r.playPausedElementsIfNotBackgrounded},_MediaStream:{value:r.MediaStream},isStarted:{enumerable:!0,get:function(){return s}},mediaStreamTrack:{enumerable:!0,get:function(){return e.track}}}),o._initialize(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"_start",value:function(){this._log.debug("Started"),this._isStarted=!0,this._dummyEl&&(this._dummyEl.oncanplay=null),this.emit("started",this)}},{key:"_initialize",value:function(){var e=this;this._log.debug("Initializing"),this._dummyEl=this._createElement(),this.mediaStreamTrack.addEventListener("ended",(function t(){e._end(),e.mediaStreamTrack.removeEventListener("ended",t)})),this._dummyEl&&(this._dummyEl.muted=!0,this._dummyEl.oncanplay=this._start.bind(this,this._dummyEl),this._attach(this._dummyEl),this._attachments.delete(this._dummyEl))}},{key:"_end",value:function(){this._log.debug("Ended"),this._dummyEl&&(this._detachElement(this._dummyEl),this._dummyEl.oncanplay=null)}},{key:"attach",value:function(e){var t=this;if("string"==typeof e?e=this._selectElement(e):e||(e=this._createElement()),this._log.debug("Attempting to attach to element:",e),e=this._attach(e),this._shouldShimAttachedElements&&!this._elShims.has(e)){var n=this._playPausedElementsIfNotBackgrounded?function(){return function(e,t){var n=e.tagName.toLowerCase();t.warn("Unintentionally paused:",e),Promise.race([u(document,"visibilitychange"),c(1e3)]).then((function(){"visible"===document.visibilityState&&l.whenResolved("audio").then((function(){return t.info("Playing unintentionally paused <"+n+"> element"),t.debug("Element:",e),e.play()})).then((function(){t.info("Successfully played unintentionally paused <"+n+"> element"),t.debug("Element:",e)})).catch((function(r){t.warn("Error while playing unintentionally paused <"+n+"> element:",r,e)}))}))}(e,t._log)}:null;this._elShims.set(e,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.pause,r=e.play,i=!1;e.pause=function(){return i=!0,n.call(e)},e.play=function(){return i=!1,r.call(e)};var o=t?function(){i||t()}:null;o&&e.addEventListener("pause",o);return{pausedIntentionally:function(){return i},unShim:function(){e.pause=n,e.play=r,o&&e.removeEventListener("pause",o)}}}(e,n))}return e}},{key:"_attach",value:function(e){var t=e.srcObject;t instanceof this._MediaStream||(t=new this._MediaStream);var n="audio"===this.mediaStreamTrack.kind?"getAudioTracks":"getVideoTracks";return t[n]().forEach((function(e){t.removeTrack(e)})),t.addTrack(this.mediaStreamTrack),e.srcObject=t,e.autoplay=!0,e.playsInline=!0,this._attachments.has(e)||this._attachments.add(e),e}},{key:"_selectElement",value:function(e){var t=document.querySelector(e);if(!t)throw new Error("Selector matched no element: "+e);return t}},{key:"_createElement",value:function(){return"undefined"!=typeof document?document.createElement(this.kind):null}},{key:"detach",value:function(e){var t=void 0;return t="string"==typeof e?[this._selectElement(e)]:e?[e]:this._getAllAttachedElements(),this._log.debug("Attempting to detach from elements:",t),this._detachElements(t),e?t[0]:t}},{key:"_detachElements",value:function(e){return e.map(this._detachElement.bind(this))}},{key:"_detachElement",value:function(e){if(!this._attachments.has(e))return e;var t=e.srcObject;(t instanceof this._MediaStream&&t.removeTrack(this.mediaStreamTrack),this._attachments.delete(e),this._shouldShimAttachedElements&&this._elShims.has(e))&&(this._elShims.get(e).unShim(),this._elShims.delete(e));return e}},{key:"_getAllAttachedElements",value:function(){var e=[];return this._attachments.forEach((function(t){e.push(t)})),e}}]),t}(o("4HKtL"));e.exports=h})),o.register("6YI9h",(function(e,n){var r,i,o,a,s,u,c,l,h;function f(e,t,n,r){if(!(r in t)&&!r.match(/^on[a-z]+$/)){var i;try{i=typeof e[r]}catch(e){}"function"===i&&(t[r]=function(){return this[n][r].apply(this[n],arguments)})}}function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:null}function p(e){return void 0===e&&(e=d()),/Chrome|CriOS/.test(e)?"chrome":/Firefox|FxiOS/.test(e)?"firefox":/Safari/.test(e)?"safari":null}t(e.exports,"defer",(()=>u),(e=>u=e)),t(e.exports,"support",(()=>c),(e=>c=e)),t(e.exports,"legacyPromise",(()=>r),(e=>r=e)),t(e.exports,"guessBrowserVersion",(()=>s),(e=>s=e)),t(e.exports,"delegateMethods",(()=>a),(e=>a=e)),t(e.exports,"interceptEvent",(()=>o),(e=>o=e)),t(e.exports,"guessBrowser",(()=>h),(e=>h=e)),t(e.exports,"proxyProperties",(()=>l),(e=>l=e)),t(e.exports,"flatMap",(()=>i),(e=>i=e)),u=function(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e},a=function(e,t,n){for(var r in e)f(e,t,n,r)},i=function(e,t){return(e instanceof Map||e instanceof Set?Array.from(e.values()):e).reduce((function(e,n){var r=t(n);return e.concat(r)}),[])},h=p,s=function(e){void 0===e&&(e=d());var t={chrome:"Chrome|CriOS",firefox:"Firefox|FxiOS",safari:"Version"}[p(e)];if(!t)return null;var n=new RegExp("("+t+")/([^\\s]+)"),r=(e.match(n)||[])[2];if(!r)return null;var i=r.split(".").map(Number);return{major:isNaN(i[0])?null:i[0],minor:isNaN(i[1])?null:i[1]}},o=function(e,t){var n=null;Object.defineProperty(e,"on"+t,{get:function(){return n},set:function(e){n&&this.removeEventListener(t,n),"function"==typeof e?(n=e,this.addEventListener(t,n)):n=null}})},r=function(e,t,n){return t?e.then((function(e){t(e)}),(function(e){n(e)})):e},l=function(e,t,n){Object.getOwnPropertyNames(e).forEach((function(e){!function(e,t,n,r){if(r in t)return;if(r.match(/^on[a-z]+$/))return Object.defineProperty(t,r,{value:null,writable:!0}),void n.addEventListener(r.slice(2),(function(){t.dispatchEvent.apply(t,arguments)}));Object.defineProperty(t,r,{enumerable:!0,get:function(){return n[r]}})}(0,t,n,e)}))},c=function(){return"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia&&"function"==typeof RTCPeerConnection}})),o.register("3bRT0",(function(e,t){"use strict";var n={};Object.defineProperties(n,{getStats:{enumerable:!0,value:o("e0sKO")},getUserMedia:{enumerable:!0,value:o("rESYi")},MediaStream:{enumerable:!0,value:o("1KzhY")},MediaStreamTrack:{enumerable:!0,value:o("3l2t9")},RTCIceCandidate:{enumerable:!0,value:o("5Pyp4")},RTCPeerConnection:{enumerable:!0,value:o("3qKVE")},RTCSessionDescription:{enumerable:!0,value:o("5HKfU")},version:{enumerable:!0,value:o("5Yj7M").version}}),e.exports=n})),o.register("e0sKO",(function(e,t){"use strict";var n=o("6YI9h").flatMap,r=o("6YI9h").guessBrowser,i=o("6YI9h").guessBrowserVersion,a=o("4w4ZI").getSdpFormat,s=r(),u=i(),c="chrome"===s,l="firefox"===s,h="safari"===s,f=c?u.major:null;function d(e){var t=Array.from(e.values()).find((function(e){return"candidate-pair"===e.type&&e.nominated}));if(!t)return null;var n=e.get(t.localCandidateId),r=e.get(t.remoteCandidateId),i=[{key:"candidateType",type:"string"},{key:"ip",type:"string"},{key:"port",type:"number"},{key:"priority",type:"number"},{key:"protocol",type:"string"},{key:"url",type:"string"}],o=i.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),a=n?o.reduce((function(e,t){return e[t.key]=typeof n[t.key]===t.type?n[t.key]:"deleted"!==t.key&&null,e}),{}):null,s=r?i.reduce((function(e,t){return e[t.key]=typeof r[t.key]===t.type?r[t.key]:null,e}),{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string",fixup:function(e){return"inprogress"===e?"in-progress":e}},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce((function(e,n){return e[n.key]=typeof t[n.key]===n.type?n.fixup?n.fixup(t[n.key]):t[n.key]:null,e}),{localCandidate:a,remoteCandidate:s})}function p(e){var t=Array.from(e.values()).find((function(e){return"candidate-pair"===e.type&&e.nominated}));if(!t)return null;var n=e.get(t.localCandidateId),r=e.get(t.remoteCandidateId),i=[{key:"candidateType",type:"string"},{key:"ip",ffKeys:["address","ipAddress"],type:"string"},{key:"port",ffKeys:["portNumber"],type:"number"},{key:"priority",type:"number"},{key:"protocol",ffKeys:["transport"],type:"string"},{key:"url",type:"string"}],o=i.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),a={host:"host",peerreflexive:"prflx",relayed:"relay",serverreflexive:"srflx"},s=n?o.reduce((function(e,t){var r=t.ffKeys&&t.ffKeys.find((function(e){return e in n}))||t.key;return e[t.key]=typeof n[r]===t.type?"candidateType"===r&&a[n[r]]||n[r]:"deleted"!==r&&null,e}),{}):null,u=r?i.reduce((function(e,t){var n=t.ffKeys&&t.ffKeys.find((function(e){return e in r}))||t.key;return e[t.key]=typeof r[n]===t.type?"candidateType"===n&&a[r[n]]||r[n]:null,e}),{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string"},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce((function(e,n){return e[n.key]=typeof t[n.key]===n.type?t[n.key]:null,e}),{localCandidate:s,remoteCandidate:u})}function m(e,t,r){var i="local"===r?"getSenders":"getReceivers";return e[i]?e[i]().map((function(e){return e.track})).filter((function(e){return e&&e.kind===t})):n(e["local"===r?"getLocalStreams":"getRemoteStreams"](),(function(e){return e["audio"===t?"getAudioTracks":"getVideoTracks"]()}))}function v(e,t){return new Promise((function(n,r){f&&f<67?e.getStats((function(e){n([g(e,t)])}),null,r):e.getStats(t).then((function(e){n(function(e){var t=null,n=[],r=null,i=null,o=null,a=null;e.forEach((function(e){switch(e.type){case"inbound-rtp":t=e;break;case"outbound-rtp":n.push(e);break;case"track":o=e;break;case"codec":a=e;break;case"remote-inbound-rtp":r=e;break;case"remote-outbound-rtp":i=e}}));var s=o&&o.remoteSource,u=[],c=s?i:r;return(s?[t]:n).forEach((function(e){var t={},n=[e,o,a,c&&c.ssrc===e.ssrc?c:null];function r(e){var t=n.find((function(t){return t&&void 0!==t[e]}))||null;return t?t[e]:null}var i=r("ssrc");"number"==typeof i&&(t.ssrc=String(i));var l=r("timestamp");t.timestamp=Math.round(l);var h=r("mimeType");"string"==typeof h&&(h=h.split("/"),t.codecName=h[h.length-1]);var f=r("roundTripTime");"number"==typeof f&&(t.roundTripTime=Math.round(1e3*f));var d=r("jitter");"number"==typeof d&&(t.jitter=Math.round(1e3*d));var p=r("frameWidth");"number"==typeof p&&(s?t.frameWidthReceived=p:t.frameWidthSent=p);var m=r("frameHeight");"number"==typeof m&&(s?t.frameHeightReceived=m:t.frameHeightSent=m);var v=r("framesPerSecond");"number"==typeof v&&(t.frameRateSent=v);var g=r("bytesReceived");"number"==typeof g&&(t.bytesReceived=g);var y=r("bytesSent");"number"==typeof y&&(t.bytesSent=y);var b=r("packetsLost");"number"==typeof b&&(t.packetsLost=b);var w=r("packetsReceived");"number"==typeof w&&(t.packetsReceived=w);var _=r("packetsSent");"number"==typeof _&&(t.packetsSent=_);var k=r("audioLevel");"number"==typeof k&&(k=Math.round(32767*k),s?t.audioOutputLevel=k:t.audioInputLevel=k),u.push(t)})),u}(e))}),r)}))}function g(e,t){var n=e.result().find((function(e){return"ssrc"===e.type&&e.stat("googTrackId")===t.id})),r={};return n&&(r.timestamp=Math.round(Number(n.timestamp)),r=n.names().reduce((function(e,t){switch(t){case"googCodecName":e.codecName=n.stat(t);break;case"googRtt":e.roundTripTime=Number(n.stat(t));break;case"googJitterReceived":e.jitter=Number(n.stat(t));break;case"googFrameWidthInput":e.frameWidthInput=Number(n.stat(t));break;case"googFrameHeightInput":e.frameHeightInput=Number(n.stat(t));break;case"googFrameWidthSent":e.frameWidthSent=Number(n.stat(t));break;case"googFrameHeightSent":e.frameHeightSent=Number(n.stat(t));break;case"googFrameWidthReceived":e.frameWidthReceived=Number(n.stat(t));break;case"googFrameHeightReceived":e.frameHeightReceived=Number(n.stat(t));break;case"googFrameRateInput":e.frameRateInput=Number(n.stat(t));break;case"googFrameRateSent":e.frameRateSent=Number(n.stat(t));break;case"googFrameRateReceived":e.frameRateReceived=Number(n.stat(t));break;case"ssrc":e[t]=n.stat(t);break;case"bytesReceived":case"bytesSent":case"packetsLost":case"packetsReceived":case"packetsSent":case"audioInputLevel":case"audioOutputLevel":e[t]=Number(n.stat(t))}return e}),r)),r}function y(e,t){e=e||new Map;var n=null,r=null;e.forEach((function(t){if(!t.isRemote)switch(t.type){case"inbound-rtp":n=t,r=e.get(t.remoteId);break;case"outbound-rtp":r=t,n=e.get(t.remoteId)}}));var i=t?n:r,o=t?r:n;function a(e){return i&&void 0!==i[e]?i[e]:o&&void 0!==o[e]?o[e]:null}var s={},u=a("timestamp");s.timestamp=Math.round(u);var c=a("ssrc");"number"==typeof c&&(s.ssrc=String(c));var l=a("bytesSent");"number"==typeof l&&(s.bytesSent=l);var h=a("packetsLost");"number"==typeof h&&(s.packetsLost=h);var f=a("packetsSent");"number"==typeof f&&(s.packetsSent=f);var d=a("roundTripTime");"number"==typeof d&&(s.roundTripTime=Math.round(1e3*d));var p=a("jitter");"number"==typeof p&&(s.jitter=Math.round(1e3*p));var m=a("framerateMean");"number"==typeof m&&(s.frameRateSent=Math.round(m));var v=a("bytesReceived");"number"==typeof v&&(s.bytesReceived=v);var g=a("packetsReceived");"number"==typeof g&&(s.packetsReceived=g);var y=a("framerateMean");return"number"==typeof y&&(s.frameRateReceived=Math.round(y)),s}e.exports=function(e,t){return e&&"function"==typeof e.getStats?function(e,t){var r=m(e,"audio","local"),i=m(e,"video","local"),o=m(e,"audio"),s=m(e,"video"),u={activeIceCandidatePair:null,localAudioTrackStats:[],localVideoTrackStats:[],remoteAudioTrackStats:[],remoteVideoTrackStats:[]},f=n([[r,"localAudioTrackStats",!1],[i,"localVideoTrackStats",!1],[o,"remoteAudioTrackStats",!0],[s,"remoteVideoTrackStats",!0]],(function(n){var r=n[0],i=n[1],o=n[2];return r.map((function(n){return function(e,t,n){if(void 0!==(n=n||{}).testForChrome||c)return v(e,t);if(void 0!==n.testForFirefox||l)return function(e,t,n){return new Promise((function(r,i){e.getStats(t).then((function(e){r([y(e,n)])}),i)}))}(e,t,n.isRemote);if(void 0!==n.testForSafari||h)return void 0!==n.testForSafari||"unified"===a()?v(e,t):Promise.reject(new Error(["getStats() is not supported on this version of Safari","due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601"].join(" ")));return Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(e,n,Object.assign({isRemote:o},t)).then((function(e){e.forEach((function(e){e.trackId=n.id,u[i].push(e)}))}))}))}));return Promise.all(f).then((function(){return function(e,t){return void 0!==(t=t||{}).testForChrome||c||void 0!==t.testForSafari||h?e.getStats().then(d):void 0!==t.testForFirefox||l?e.getStats().then(p):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}(e,t)})).then((function(e){return u.activeIceCandidatePair=e,u}))}(e,t):Promise.reject(new Error("Given PeerConnection does not support getStats"))}})),o.register("4w4ZI",(function(e,n){var r,i,a;t(e.exports,"updateUnifiedPlanTrackIdsToSSRCs",(()=>r),(e=>r=e)),t(e.exports,"getSdpFormat",(()=>a),(e=>a=e)),t(e.exports,"updatePlanBTrackIdsToSSRCs",(()=>i),(e=>i=e));var s=o("6YI9h").flatMap,u=o("6YI9h").guessBrowser,c=null;var l=null;function h(e){return e&&function(){if("boolean"==typeof c)return c;if("undefined"==typeof RTCPeerConnection)return c=!1;try{new RTCPeerConnection({sdpSemantics:"foo"}),c=!1}catch(e){c=!0}return c}()?{"plan-b":"planb","unified-plan":"unified"}[e]:function(){if(!l)if("undefined"!=typeof RTCPeerConnection&&"addTransceiver"in RTCPeerConnection.prototype)try{(new RTCPeerConnection).addTransceiver("audio"),l="unified"}catch(e){l="planb"}else l="planb";return l}()}function f(e,t){return(t.match(new RegExp(e,"gm"))||[]).reduce((function(t,n){var r=n.match(new RegExp(e));return r?t.add(r[1]):t}),new Set)}function d(e,t){return f(e,t)}function p(e){return d("^a=ssrc:[0-9]+ +msid:.+ +(.+) *$",e)}function m(e){return d("^a=msid:.+ +(.+) *$",e)}function v(e,t){return f("^a=ssrc:([0-9]+) +msid:[^ ]+ +"+t+" *$",e)}function g(e,t,n){return t=t||".*",n=n||".*",e.split("\r\nm=").slice(1).map((function(e){return"m="+e})).filter((function(e){var r=new RegExp("m="+t,"gm"),i=new RegExp("a="+n,"gm");return r.test(e)&&i.test(e)}))}function y(e){return Array.from(f("^a=ssrc:([0-9]+) +.*$",e))}function b(e,t){var n=g(e),r=new RegExp("^a=msid:[^ ]+ +"+t+" *$","gm"),i=n.filter((function(e){return e.match(r)}));return new Set(s(i,y))}function w(e,t,n){return new Map(Array.from(e(n)).map((function(e){return[e,t(n,e)]})))}function _(e){return w(p,v,e)}function k(e){return w(m,b,e)}function S(e,t,n){var r=e(n),i=new Map;r.forEach((function(e,r){if(t.has(r)){var o=Array.from(t.get(r)),a=Array.from(e);o.forEach((function(e,t){var r=a[t];i.set(r,e);var o="^a=ssrc:"+r+" (.*)$",s="a=ssrc:"+e+" $1";n=n.replace(new RegExp(o,"gm"),s)}))}else t.set(r,e)}));var o="^(a=ssrc-group:[^ ]+ +)(.*)$";return(n.match(new RegExp(o,"gm"))||[]).forEach((function(e){var t=e.match(new RegExp(o));if(t){var r=t[1],a=t[2].split(" ").map((function(e){var t=i.get(e);return t||e})).join(" ");n=n.replace(t[0],r+a)}})),n}a=function(e){return{chrome:h(e),firefox:"unified",safari:"undefined"!=typeof RTCRtpTransceiver&&"currentDirection"in RTCRtpTransceiver.prototype?"unified":"planb"}[u()]||null},i=function(e,t){return S(_,e,t)},r=function(e,t){return S(k,e,t)}})),o.register("rESYi",(function(e,t){"use strict";e.exports=function(e){return"object"==typeof navigator&&"object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia?(e=e||{audio:!0,video:!0},navigator.mediaDevices.getUserMedia(e)):Promise.reject(new Error("getUserMedia is not supported"))}})),o.register("1KzhY",(function(e,t){"use strict";"function"==typeof MediaStream?e.exports=MediaStream:e.exports=function(){throw new Error("MediaStream is not supported")}})),o.register("3l2t9",(function(e,t){"use strict";"function"==typeof MediaStreamTrack?e.exports=MediaStreamTrack:e.exports=function(){throw new Error("MediaStreamTrack is not supported")}})),o.register("5Pyp4",(function(e,t){"use strict";"function"==typeof RTCIceCandidate?e.exports=RTCIceCandidate:e.exports=function(){throw new Error("RTCIceCandidate is not supported")}})),o.register("3qKVE",(function(e,t){"use strict";if("function"==typeof RTCPeerConnection)switch((0,o("6YI9h").guessBrowser)()){case"chrome":e.exports=o("11Gwt");break;case"firefox":e.exports=o("2GZqt");break;case"safari":e.exports=o("2ffW8");break;default:e.exports=RTCPeerConnection}else e.exports=function(){throw new Error("RTCPeerConnection is not supported")}})),o.register("11Gwt",(function(e,t){"use strict";var n=o("WMLWz"),r=o("4NXJr"),i=o("2cK96").inherits,a=o("27Wel"),s=o("1KzhY"),u=o("5uSRe"),c=o("4w4ZI"),l=o("6YI9h");function h(e,t){if(!(this instanceof h))return new h(e,t);r.call(this),e=e||{};var n=Object.assign(e.iceTransportPolicy?{iceTransports:e.iceTransportPolicy}:{},e);l.interceptEvent(this,"datachannel"),l.interceptEvent(this,"signalingstatechange");var i=c.getSdpFormat(n.sdpSemantics),o=new RTCPeerConnection(n,t);Object.defineProperties(this,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_localStream:{value:new s},_peerConnection:{value:o},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_sdpFormat:{value:i},_senders:{value:new Map},_signalingStateLatch:{value:new a},_tracksToSSRCs:{value:new Map,writable:!0},localDescription:{enumerable:!0,get:function(){return this._pendingLocalOffer?this._pendingLocalOffer:o.localDescription}},remoteDescription:{enumerable:!0,get:function(){return this._pendingRemoteOffer?this._pendingRemoteOffer:o.remoteDescription}},signalingState:{enumerable:!0,get:function(){return this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":o.signalingState}}});var u=this;o.addEventListener("datachannel",(function(e){m(e.channel),u.dispatchEvent(e)})),o.addEventListener("signalingstatechange",(function(){"stable"===o.signalingState&&(u._appliedTracksToSSRCs=new Map(u._tracksToSSRCs)),u._pendingLocalOffer||u._pendingRemoteOffer||u.dispatchEvent.apply(u,arguments)})),o.ontrack=function(){},"function"!=typeof RTCPeerConnection.prototype.addTrack&&o.addStream(this._localStream),l.proxyProperties(RTCPeerConnection.prototype,this,o)}function f(e,t,n){var r,i,o=t?e._pendingLocalOffer:e._pendingRemoteOffer,a=t?e._pendingRemoteOffer:e._pendingLocalOffer,s=t?"have-local-offer":"have-remote-offer",u=t?"setLocalDescription":"setRemoteDescription";if(!t&&a&&"answer"===n.type)r=function(e,t){var n=e._pendingLocalOffer;return e._peerConnection.setLocalDescription(n).then((function(){return e._pendingLocalOffer=null,e.setRemoteDescription(t)})).then((function(){e._signalingStateLatch.lower()}))}(e,n);else if("offer"===n.type){if(e.signalingState!==s&&"stable"!==e.signalingState)return Promise.reject(new Error("Cannot set "+(t?"local":"remote")+" offer in state "+e.signalingState));o||"low"!==e._signalingStateLatch.state||e._signalingStateLatch.raise();var c=e.signalingState;i=d(n),t?e._pendingLocalOffer=i:e._pendingRemoteOffer=i,r=Promise.resolve(),e.signalingState!==c&&r.then((function(){e.dispatchEvent(new Event("signalingstatechange"))}))}else"rollback"===n.type&&(e.signalingState!==s?r=Promise.reject(new Error("Cannot rollback "+(t?"local":"remote")+" description in "+e.signalingState)):(t?e._pendingLocalOffer=null:e._pendingRemoteOffer=null,e._rolledBackTracksToSSRCs=new Map(e._tracksToSSRCs),e._tracksToSSRCs=new Map(e._appliedTracksToSSRCs),(r=Promise.resolve()).then((function(){e.dispatchEvent(new Event("signalingstatechange"))}))));return r||e._peerConnection[u](d(n))}function d(e){return e instanceof n&&e._description?e._description:new RTCSessionDescription(e)}function p(){return"maxRetransmitTime"in RTCDataChannel.prototype&&!("maxPacketLifeTime"in RTCDataChannel.prototype)}function m(e){return Object.defineProperty(e,"maxRetransmits",{value:65535===e.maxRetransmits?null:e.maxRetransmits}),p()&&Object.defineProperty(e,"maxPacketLifeTime",{value:65535===e.maxRetransmitTime?null:e.maxRetransmitTime}),e}function v(e,t,n){return"unified"===e?c.updateUnifiedPlanTrackIdsToSSRCs(t,n):c.updatePlanBTrackIdsToSSRCs(t,n)}i(h,r),"function"!=typeof RTCPeerConnection.prototype.addTrack?(h.prototype.addTrack=function(){var e=[].slice.call(arguments),t=e[0];if("closed"===this._peerConnection.signalingState)throw new Error("Cannot add MediaStreamTrack ["+t.id+", "+t.kind+"]: RTCPeerConnection is closed");var n=this._senders.get(t);if(n&&n.track)throw new Error("Cannot add MediaStreamTrack ["+t.id+", "+t.kind+"]: RTCPeerConnection already has it");return this._peerConnection.removeStream(this._localStream),this._localStream.addTrack(t),this._peerConnection.addStream(this._localStream),n=new u(t),this._senders.set(t,n),n},h.prototype.removeTrack=function(e){if("closed"===this._peerConnection.signalingState)throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");var t=e.track;t&&(e=this._senders.get(t))&&e.track&&(e.track=null,this._peerConnection.removeStream(this._localStream),this._localStream.removeTrack(t),this._peerConnection.addStream(this._localStream))},h.prototype.getSenders=function(){return Array.from(this._senders.values())}):h.prototype.removeTrack=function(e){if("closed"===this._peerConnection.signalingState)throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");try{this._peerConnection.removeTrack(e)}catch(e){}},h.prototype.addIceCandidate=function(e){var t,n=[].slice.call(arguments),r=this;return t="have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then((function(){return r._peerConnection.addIceCandidate(e)})):this._peerConnection.addIceCandidate(e),n.length>1?l.legacyPromise(t,n[1],n[2]):t},h.prototype.close=function(){"closed"!==this.signalingState&&(this._pendingLocalOffer=null,this._pendingRemoteOffer=null,this._peerConnection.close())},h.prototype.createAnswer=function(){var e,t=[].slice.call(arguments),r=this;return e=this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then((function(){return r._signalingStateLatch.lower(),r._peerConnection.createAnswer()})).then((function(e){return r._pendingRemoteOffer=null,r._rolledBackTracksToSSRCs.clear(),new n({type:"answer",sdp:v(r._sdpFormat,r._tracksToSSRCs,e.sdp)})}),(function(e){throw r._pendingRemoteOffer=null,e})):this._peerConnection.createAnswer().then((function(e){return r._rolledBackTracksToSSRCs.clear(),new n({type:"answer",sdp:v(r._sdpFormat,r._tracksToSSRCs,e.sdp)})})),t.length>1?l.legacyPromise(e,t[0],t[1]):e},h.prototype.createOffer=function(){var e=[].slice.call(arguments),t=(e.length>1?e[2]:e[0])||{},r=this,i=this._peerConnection.createOffer(t).then((function(e){return r._rolledBackTracksToSSRCs.clear(),new n({type:e.type,sdp:v(r._sdpFormat,r._tracksToSSRCs,e.sdp)})}));return e.length>1?l.legacyPromise(i,e[0],e[1]):i},h.prototype.createDataChannel=function(e,t){t=function(e){e=Object.assign({},e),p()&&"maxPacketLifeTime"in e&&(e.maxRetransmitTime=e.maxPacketLifeTime);return e}(t);var n=this._peerConnection.createDataChannel(e,t);return m(n),n},h.prototype.setLocalDescription=function(){var e=[].slice.call(arguments),t=e[0];this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear());var n=f(this,!0,t);return e.length>1?l.legacyPromise(n,e[1],e[2]):n},h.prototype.setRemoteDescription=function(){var e=[].slice.call(arguments),t=e[0];this._rolledBackTracksToSSRCs.clear();var n=f(this,!1,t);return e.length>1?l.legacyPromise(n,e[1],e[2]):n},l.delegateMethods(RTCPeerConnection.prototype,h.prototype,"_peerConnection"),e.exports=h})),o.register("WMLWz",(function(e,t){"use strict";e.exports=function e(t){if(!(this instanceof e))return new e(t);var n=t&&"rollback"===t.type?null:new RTCSessionDescription(t);Object.defineProperties(this,{_description:{get:function(){return n}},sdp:{enumerable:!0,value:n?n.sdp:t.sdp},type:{enumerable:!0,value:n?n.type:t.type}})}})),o.register("4NXJr",(function(e,t){"use strict";var n=o("6xYCf").EventEmitter;function r(){Object.defineProperties(this,{_eventEmitter:{value:new n}})}r.prototype.dispatchEvent=function(e){return this._eventEmitter.emit(e.type,e)},r.prototype.addEventListener=function(){return this._eventEmitter.addListener.apply(this._eventEmitter,arguments)},r.prototype.removeEventListener=function(){return this._eventEmitter.removeListener.apply(this._eventEmitter,arguments)},e.exports=r})),o.register("6xYCf",(function(e,t){"use strict";var n,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};n=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,o,a,s;if(u(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)i(u,this,t);else{var c=u.length,l=m(u,c);for(n=0;n<c;++n)i(l[n],this,t)}return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){return u(t),this.on(e,f(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,f(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,o,a;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return d(this,e,!0)},a.prototype.rawListeners=function(e){return d(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},a.prototype.listenerCount=p,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}})),o.register("27Wel",(function(e,t){"use strict";var n=o("6YI9h").defer,r={high:new Set(["low"]),low:new Set(["high"])};function i(e){if(!(this instanceof i))return new i(e);var t=e||"low";Object.defineProperties(this,{_state:{set:function(e){if(t!==e){t=e;var n=this._whenDeferreds.get(t);n.forEach((function(e){e.resolve(this)}),this),n.clear()}},get:function(){return t}},_whenDeferreds:{value:new Map([["high",new Set],["low",new Set]])},state:{enumerable:!0,get:function(){return this._state}}})}function a(e,t){return new Error('Cannot transition from "'+e+'" to "'+t+'"')}i.prototype.lower=function(){return this.transition("low")},i.prototype.raise=function(){return this.transition("high")},i.prototype.transition=function(e){if(!r[this.state].has(e))throw a(this.state,e);return this._state=e,this},i.prototype.when=function(e){if(this.state===e)return Promise.resolve(this);if(!r[this.state].has(e))return Promise.reject(a(this.state,e));var t=n();return this._whenDeferreds.get(e).add(t),t.promise},e.exports=i})),o.register("5uSRe",(function(e,t){"use strict";e.exports=function(e){Object.defineProperties(this,{track:{enumerable:!0,value:e,writable:!0}})}})),o.register("2GZqt",(function(e,t){"use strict";var n=o("4NXJr"),r=o("4yewK"),i=o("2cK96").inherits,a=o("4w4ZI").updateUnifiedPlanTrackIdsToSSRCs,s=o("6YI9h"),u="object"==typeof navigator&&navigator.userAgent&&(navigator.userAgent.match(/Firefox\/61/)||navigator.userAgent.match(/Firefox\/62/));function c(e){if(!(this instanceof c))return new c(e);n.call(this),s.interceptEvent(this,"signalingstatechange");var t=new RTCPeerConnection(e);Object.defineProperties(this,{_initiallyNegotiatedDtlsRole:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:t},_rollingBack:{value:!1,writable:!0},_tracksToSSRCs:{value:new Map},iceGatheringState:{enumerable:!0,get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState}},localDescription:{enumerable:!0,get:function(){return f(this._peerConnection.localDescription,this._initiallyNegotiatedDtlsRole)}},signalingState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._peerConnection.signalingState}}});var r,i=this;t.addEventListener("signalingstatechange",(function(){if(!i._rollingBack&&i.signalingState!==r){r=i.signalingState;var e=i.dispatchEvent.apply.bind(i.dispatchEvent,i,arguments);i._isClosed?setTimeout(e):e()}})),s.proxyProperties(RTCPeerConnection.prototype,this,t)}function l(e,t,n){var i=t?"setLocalDescription":"setRemoteDescription";return e._rollingBack=!0,e._peerConnection[i](new r({type:"rollback"})).then(n).then((function(t){return e._rollingBack=!1,t}),(function(t){throw e._rollingBack=!1,t}))}function h(e,t,n){if(!e._initiallyNegotiatedDtlsRole&&"offer"!==t.type){var r=t.sdp.match(/a=setup:([a-z]+)/);if(r){var i=r[1];e._initiallyNegotiatedDtlsRole=n?{active:"passive",passive:"active"}[i]:i}}}function f(e,t){return e&&"answer"===e.type&&t?new r({type:e.type,sdp:e.sdp.replace(/a=setup:[a-z]+/g,"a=setup:"+t)}):e}i(c,n),Object.defineProperty(c.prototype,"peerIdentity",{enumerable:!0,value:Promise.resolve({idp:"",name:""})}),u&&(c.prototype.addTrack=function(){var e=arguments[0],t=this._peerConnection.addTrack.apply(this._peerConnection,arguments);return t.replaceTrack(e),t}),c.prototype.createAnswer=function(){var e,t=[].slice.call(arguments),n=this;return e=this._peerConnection.createAnswer().then((function(e){return h(n,e),f(e,n._initiallyNegotiatedDtlsRole)})),"function"==typeof t[0]?s.legacyPromise(e,t[0],t[1]):e},c.prototype.createOffer=function(){var e,t=[].slice.call(arguments),n=(t.length>1?t[2]:t[0])||{},i=this;if("have-local-offer"===this.signalingState||"have-remote-offer"===this.signalingState){var o="have-local-offer"===this.signalingState;e=l(this,o,(function(){return i.createOffer(n)}))}else e=i._peerConnection.createOffer(n);return e=e.then((function(e){return new r({type:e.type,sdp:a(i._tracksToSSRCs,e.sdp)})})),t.length>1?s.legacyPromise(e,t[0],t[1]):e},c.prototype.setLocalDescription=function(){var e,t=[].slice.call(arguments),n=t[0];return n&&"answer"===n.type&&"have-local-offer"===this.signalingState&&(e=Promise.reject(new Error("Cannot set local answer in state have-local-offer"))),e?t.length>1?s.legacyPromise(e,t[1],t[2]):e:this._peerConnection.setLocalDescription.apply(this._peerConnection,t)},c.prototype.setRemoteDescription=function(){var e,t=[].slice.call(arguments),n=t[0],r=this;return n&&"have-remote-offer"===this.signalingState&&("answer"===n.type?e=Promise.reject(new Error("Cannot set remote answer in state have-remote-offer")):"offer"===n.type&&(e=l(this,!1,(function(){return r._peerConnection.setRemoteDescription(n)})))),e||(e=this._peerConnection.setRemoteDescription(n)),e=e.then((function(){h(r,n,!0)})),t.length>1?s.legacyPromise(e,t[1],t[2]):e},c.prototype.close=function(){"closed"!==this.signalingState&&(this._isClosed=!0,this._peerConnection.close())},s.delegateMethods(RTCPeerConnection.prototype,c.prototype,"_peerConnection"),e.exports=c})),o.register("4yewK",(function(e,t){"use strict";e.exports=RTCSessionDescription})),o.register("2ffW8",(function(e,t){"use strict";var n=o("4NXJr"),r=o("2cK96").inherits,i=o("27Wel"),a=o("4w4ZI"),s=o("6YI9h"),u="unified"===a.getSdpFormat(),c=u?a.updateUnifiedPlanTrackIdsToSSRCs:a.updatePlanBTrackIdsToSSRCs;function l(e){if(!(this instanceof l))return new l(e);n.call(this),s.interceptEvent(this,"datachannel"),s.interceptEvent(this,"iceconnectionstatechange"),s.interceptEvent(this,"signalingstatechange"),s.interceptEvent(this,"track");var t=new RTCPeerConnection(e);Object.defineProperties(this,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_audioTransceiver:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:t},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_signalingStateLatch:{value:new i},_tracksToSSRCs:{value:new Map,writable:!0},_videoTransceiver:{value:null,writable:!0},localDescription:{enumerable:!0,get:function(){return this._pendingLocalOffer||this._peerConnection.localDescription}},iceConnectionState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._peerConnection.iceConnectionState}},iceGatheringState:{enumerable:!0,get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState}},remoteDescription:{enumerable:!0,get:function(){return this._pendingRemoteOffer||this._peerConnection.remoteDescription}},signalingState:{enumerable:!0,get:function(){return this._isClosed?"closed":this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState}}});var r=this;t.addEventListener("datachannel",(function(e){d(e.channel),r.dispatchEvent(e)})),t.addEventListener("iceconnectionstatechange",(function(){r._isClosed||r.dispatchEvent.apply(r,arguments)})),t.addEventListener("signalingstatechange",(function(){r._isClosed||("stable"===t.signalingState&&(r._appliedTracksToSSRCs=new Map(r._tracksToSSRCs)),r._pendingLocalOffer||r._pendingRemoteOffer||r.dispatchEvent.apply(r,arguments))})),t.addEventListener("track",(function(e){r._pendingRemoteOffer=null,r.dispatchEvent(e)})),s.proxyProperties(RTCPeerConnection.prototype,this,t)}function h(e,t,n){var r,i=t?e._pendingLocalOffer:e._pendingRemoteOffer,o=t?e._pendingRemoteOffer:e._pendingLocalOffer,a=t?"have-local-offer":"have-remote-offer",s=t?"setLocalDescription":"setRemoteDescription";if(!t&&o&&"answer"===n.type)return function(e,t){var n=e._pendingLocalOffer;return e._peerConnection.setLocalDescription(n).then((function(){return e._pendingLocalOffer=null,e.setRemoteDescription(t)})).then((function(){e._signalingStateLatch.lower()}))}(e,n);if("offer"===n.type){if(e.signalingState!==a&&"stable"!==e.signalingState)return Promise.reject(new Error("Cannot set "+(t?"local":"remote")+" offer in state "+e.signalingState));i||"low"!==e._signalingStateLatch.state||e._signalingStateLatch.raise();var u=e.signalingState;return r=n,t?e._pendingLocalOffer=r:e._pendingRemoteOffer=r,e.signalingState!==u?Promise.resolve().then((function(){e.dispatchEvent(new Event("signalingstatechange"))})):Promise.resolve()}return"rollback"===n.type?e.signalingState!==a?Promise.reject(new Error("Cannot rollback "+(t?"local":"remote")+" description in "+e.signalingState)):(t?e._pendingLocalOffer=null:e._pendingRemoteOffer=null,e._rolledBackTracksToSSRCs=new Map(e._tracksToSSRCs),e._tracksToSSRCs=new Map(e._appliedTracksToSSRCs),Promise.resolve().then((function(){e.dispatchEvent(new Event("signalingstatechange"))}))):e._peerConnection[s](n)}function f(e,t){return!!e.getTransceivers().find((function(e){return e.receiver&&e.receiver.track&&e.receiver.track.kind===t}))}function d(e){return Object.defineProperties(e,{maxPacketLifeTime:{value:65535===e.maxPacketLifeTime?null:e.maxPacketLifeTime},maxRetransmits:{value:65535===e.maxRetransmits?null:e.maxRetransmits}})}r(l,n),l.prototype.addIceCandidate=function(e){var t=this;return"have-remote-offer"===this.signalingState?this._signalingStateLatch.when("low").then((function(){return t._peerConnection.addIceCandidate(e)})):this._peerConnection.addIceCandidate(e)},l.prototype.createOffer=function(e){e=Object.assign({},e);var t=this;if(e.offerToReceiveAudio&&!this._audioTransceiver&&(!u||!f(this,"audio"))){delete e.offerToReceiveAudio;try{this._audioTransceiver=u?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(e){return Promise.reject(e)}}if(e.offerToReceiveVideo&&!this._videoTransceiver&&(!u||!f(this,"video"))){delete e.offerToReceiveVideo;try{this._videoTransceiver=u?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(e){return Promise.reject(e)}}return this._peerConnection.createOffer(e).then((function(e){return t._rolledBackTracksToSSRCs.clear(),new RTCSessionDescription({type:e.type,sdp:c(t._tracksToSSRCs,e.sdp)})}))},l.prototype.createAnswer=function(e){var t=this;return this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then((function(){return t._signalingStateLatch.lower(),t._peerConnection.createAnswer()})).then((function(e){return t._pendingRemoteOffer=null,t._rolledBackTracksToSSRCs.clear(),u?new RTCSessionDescription({type:e.type,sdp:c(t._tracksToSSRCs,e.sdp)}):e}),(function(e){throw t._pendingRemoteOffer=null,e})):this._peerConnection.createAnswer(e).then((function(e){return t._rolledBackTracksToSSRCs.clear(),u?new RTCSessionDescription({type:e.type,sdp:c(t._tracksToSSRCs,e.sdp)}):e}))},l.prototype.createDataChannel=function(e,t){var n=this._peerConnection.createDataChannel(e,t);return d(n),n},l.prototype.removeTrack=function(e){e.replaceTrack(null),this._peerConnection.removeTrack(e)},l.prototype.setLocalDescription=function(e){return this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear()),h(this,!0,e)},l.prototype.setRemoteDescription=function(e){return this._rolledBackTracksToSSRCs.clear(),h(this,!1,e)},l.prototype.close=function(){if(!this._isClosed){this._isClosed=!0,this._peerConnection.close();var e=this;setTimeout((function(){e.dispatchEvent(new Event("iceconnectionstatechange")),e.dispatchEvent(new Event("signalingstatechange"))}))}},s.delegateMethods(RTCPeerConnection.prototype,l.prototype,"_peerConnection"),e.exports=l})),o.register("5HKfU",(function(e,t){"use strict";if("function"==typeof RTCSessionDescription)switch((0,o("6YI9h").guessBrowser)()){case"chrome":e.exports=o("WMLWz");break;case"firefox":e.exports=o("4yewK");break;default:e.exports=RTCSessionDescription}else e.exports=function(){throw new Error("RTCSessionDescription is not supported")}})),o.register("5Yj7M",(function(e,t){e.exports=JSON.parse('{"_args":[["@twilio/webrtc@4.3.2","/Users/lazerwalker/Code/azure-mud"]],"_from":"@twilio/webrtc@4.3.2","_id":"@twilio/webrtc@4.3.2","_inBundle":false,"_integrity":"sha512-3gIq7XDI3vBoikRBchCnocFmlRQt45KC7v0DKkat+TV6WBXYJx+Hub22PR18PAROkwl5dAmIziByjYWWVhCHgA==","_location":"/@twilio/webrtc","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"@twilio/webrtc@4.3.2","name":"@twilio/webrtc","escapedName":"@twilio%2fwebrtc","scope":"@twilio","rawSpec":"4.3.2","saveSpec":null,"fetchSpec":"4.3.2"},"_requiredBy":["/twilio-video"],"_resolved":"https://registry.npmjs.org/@twilio/webrtc/-/webrtc-4.3.2.tgz","_spec":"4.3.2","_where":"/Users/lazerwalker/Code/azure-mud","author":{"name":"Manjesh Malavalli","email":"mmalavalli@twilio.com"},"bugs":{"url":"https://github.com/twilio/twilio-webrtc.js/issues"},"contributors":[{"name":"Mark Roberts","email":"mroberts@twilio.com"},{"name":"Ryan Rowland","email":"rrowland@twilio.com"},{"name":"Makarand Patwardhan","email":"mpatwardhan@twilio.com"}],"description":"WebRTC-related APIs and shims used by twilio-video.js","devDependencies":{"browserify":"^14.4.0","electron":"^5.0.0","envify":"^4.1.0","eslint":"^4.4.1","is-docker":"^2.0.0","istanbul":"^0.4.5","karma":"^1.7.0","karma-browserify":"^5.1.1","karma-chrome-launcher":"^2.2.0","karma-edgium-launcher":"^4.0.0-0","karma-electron":"^6.1.0","karma-firefox-launcher":"^1.0.1","karma-htmlfile-reporter":"^0.3.8","karma-junit-reporter":"^1.2.0","karma-mocha":"^1.3.0","karma-safari-launcher":"~0.1","karma-spec-reporter":"0.0.31","mocha":"^3.5.0","npm-run-all":"^4.0.2","rimraf":"^2.6.1","simple-git":"^2.4.0","twilio-release-tool":"^1.0.0","watchify":"^3.9.0","webrtc-adapter":"^6.4.8"},"homepage":"https://github.com/twilio/twilio-webrtc.js#readme","keywords":["shim","twilio","video","webrtc"],"license":"BSD-3-Clause","main":"./lib/index.js","name":"@twilio/webrtc","repository":{"type":"git","url":"git+https://github.com/twilio/twilio-webrtc.js.git"},"scripts":{"build":"npm-run-all clean lint test","clean":"rimraf coverage","lint":"eslint ./lib","test":"npm-run-all test:*","test:integration":"npm-run-all test:integration:*","test:integration:adapter":"karma start karma/integration.adapter.conf.js","test:integration:native":"karma start karma/integration.conf.js","test:unit":"istanbul cover node_modules/mocha/bin/_mocha -- ./test/unit/index.js"},"version":"4.3.2"}')})),o.register("2S2q7",(function(e,n){var r,i,a,s,u,c,l,h,f,d,p,m,v,g,y,b,w,_,k,S,E,M,T,C,I;t(e.exports,"valueToJSON",(()=>w),(e=>w=e)),t(e.exports,"makeUUID",(()=>s),(e=>s=e)),t(e.exports,"createBandwidthProfilePayload",(()=>S),(e=>S=e)),t(e.exports,"hidePrivateAndCertainPublicPropertiesInClass",(()=>T),(e=>T=e)),t(e.exports,"capitalize",(()=>h),(e=>h=e)),t(e.exports,"buildLogLevels",(()=>u),(e=>u=e)),t(e.exports,"asLocalTrackPublication",(()=>p),(e=>p=e)),t(e.exports,"waitForSometime",(()=>b),(e=>b=e)),t(e.exports,"createMediaSignalingPayload",(()=>f),(e=>f=e)),t(e.exports,"constants",(()=>c),(e=>c=e)),t(e.exports,"getUserAgent",(()=>m),(e=>m=e)),t(e.exports,"isChromeScreenShareTrack",(()=>k),(e=>k=e)),t(e.exports,"oncePerTick",(()=>l),(e=>l=e)),t(e.exports,"isNonArrayObject",(()=>r),(e=>r=e)),t(e.exports,"inRange",(()=>i),(e=>i=e)),t(e.exports,"waitForEvent",(()=>E),(e=>E=e)),t(e.exports,"trackClass",(()=>g),(e=>g=e)),t(e.exports,"createSubscribePayload",(()=>M),(e=>M=e)),t(e.exports,"isDeepEqual",(()=>v),(e=>v=e)),t(e.exports,"difference",(()=>y),(e=>y=e)),t(e.exports,"filterObject",(()=>I),(e=>I=e)),t(e.exports,"flatMap",(()=>a),(e=>a=e)),t(e.exports,"asLocalTrack",(()=>d),(e=>d=e)),t(e.exports,"defer",(()=>C),(e=>C=e)),t(e.exports,"trackPublicationClass",(()=>_),(e=>_=e));var x=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function D(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var N=o("72UdZ"),L=N.typeErrors,j=N.trackPriority,B=o("6YI9h");function F(e,t,n,r){if(!(r in t)&&!r.match(/^on[a-z]+$/)){var i=void 0;try{A(e[r])}catch(e){}"function"===i&&(t[r]=function(){var e;return this[n][r].apply(e,arguments)})}}function U(e){Object.getOwnPropertyNames(e).forEach((function(t){t.startsWith("_")&&q(e,t)}))}function q(e,t){var n=Object.getOwnPropertyDescriptor(e,t);n.enumerable=!1,Object.defineProperty(e,t,n)}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.forEach((function(t){e.hasOwnProperty(t)&&q(e,t)}))}function V(e){return e.map(W)}function W(e){return Array.isArray(e)?V(e):e instanceof Set?V([].concat(D(e))):e instanceof Map?[].concat(D(e.entries())).reduce((function(e,t){var n=x(t,2),r=n[0],i=n[1];return Object.assign(P({},r,W(i)),e)}),{}):e&&"object"===(void 0===e?"undefined":A(e))?(t=e,Object.entries(t).reduce((function(e,t){var n=x(t,2),r=n[0],i=n[1];return Object.assign(P({},r,W(i)),e)}),{})):e;var t}function H(e){return Y(e,[{prop:"dominantSpeakerPriority",type:"string",payloadProp:"active_speaker_priority"},{prop:"maxSubscriptionBitrate",type:"number",payloadProp:"max_subscription_bandwidth"},{prop:"maxTracks",type:"number",payloadProp:"max_tracks"},{prop:"mode",type:"string"},{prop:"renderDimensions",type:"object",payloadProp:"render_dimensions",transform:G},{prop:"trackSwitchOffMode",type:"string",payloadProp:"track_switch_off"}])}function K(e){return Y(e,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}function G(e){return Y(e,[{prop:j.PRIORITY_HIGH,type:"object",transform:K},{prop:j.PRIORITY_LOW,type:"object",transform:K},{prop:j.PRIORITY_STANDARD,type:"object",transform:K}])}function Y(e,t){return t.reduce((function(t,n){var r=n.prop,i=n.type,o=n.payloadProp,a=void 0===o?r:o,s=n.transform,u=void 0===s?function(e){return e}:s;return A(e[r])===i?Object.assign(P({},a,u(e[r])),t):t}),{})}c=N,S=function(e){return Y(e,[{prop:"video",type:"object",transform:H}])},f=function(e,t,n,r){var i={transports:[{type:"data-channel"}]};return Object.assign(e?{active_speaker:i}:{},t?{network_quality:i}:{},n?{track_priority:i}:{},r?{track_switch_off:i}:{})},M=function(e){return{rules:[{type:e?"include":"exclude",all:!0}],revision:1}},d=function(e,t){if(e instanceof t.LocalAudioTrack||e instanceof t.LocalVideoTrack||e instanceof t.LocalDataTrack)return e;if(e instanceof t.MediaStreamTrack)return"audio"===e.kind?new t.LocalAudioTrack(e,t):new t.LocalVideoTrack(e,t);throw L.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")},p=function(e,t,n,r){return new(0,{audio:r.LocalAudioTrackPublication,video:r.LocalVideoTrackPublication,data:r.LocalDataTrackPublication}[e.kind])(t,e,n,r)},h=function(e){return e[0].toUpperCase()+e.slice(1)},y=function(e,t){e=Array.isArray(e)?new Set(e):new Set(e.values()),t=Array.isArray(t)?new Set(t):new Set(t.values());var n=new Set;return e.forEach((function(e){t.has(e)||n.add(e)})),n},I=function(e,t){return Object.keys(e).reduce((function(n,r){return e[r]!==t&&(n[r]=e[r]),n}),{})},a=function(e,t){var n=e instanceof Map||e instanceof Set?Array.from(e.values()):e;return t=t||function(e){return e},n.reduce((function(e,n){var r=t(n);return e.concat(r)}),[])},m=function(){return"undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent:"Unknown"},T=function(e,t){return function(e){function n(){var e;O(this,n);for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=R(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(i)));return U(a),z(a,t),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),n}(e)},v=function e(t,n){if(t===n)return!0;if((void 0===t?"undefined":A(t))!==(void 0===n?"undefined":A(n)))return!1;if(null===t)return null===n;if(null===n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===(void 0===t?"undefined":A(t))){var r=Object.keys(t).sort(),i=Object.keys(n).sort();return!Array.isArray(n)&&e(r,i)&&r.every((function(r){return e(t[r],n[r])}))}return!1},r=function(e){return"object"===(void 0===e?"undefined":A(e))&&!Array.isArray(e)},i=function(e,t,n){return t<=e&&e<=n},s=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},l=function(e){var t=null;function n(){t=null,e()}return function(){t&&clearTimeout(t),t=setTimeout(n)}},C=function(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e},u=function(e){return"string"==typeof e?{default:e,media:e,signaling:e,webrtc:e}:e},g=function(e,t){return(t=t?"Local":"")+(e.kind||"").replace(/\w{1}/,(function(e){return e.toUpperCase()}))+"Track"},_=function(e,t){return(t=t?"Local":"")+(e.kind||"").replace(/\w{1}/,(function(e){return e.toUpperCase()}))+"TrackPublication"},w=W,k=function(e){return"chrome"===B.guessBrowser()&&"video"===e.kind&&e.label&&(/^screen:[0-9]+/.test(e.label)||/^web-contents-media-stream:[0-9/]+/.test(e.label)||/^window:[0-9]+/.test(e.label))},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return new Promise((function(t){return setTimeout(t,e)}))},E=function(e,t){return new Promise((function(n){e.addEventListener(t,(function r(i){e.removeEventListener(t,r),n(i)}))}))}})),o.register("72UdZ",(function(e,n){var r,i,o,a,s,u,c,l,h,f,d,p,m,v,g,y,b,w,_,k,S;t(e.exports,"MAX_NQ_LEVEL",(()=>c),(e=>c=e)),t(e.exports,"ICE_INACTIVITY_THRESHOLD_MS",(()=>p),(e=>p=e)),t(e.exports,"reconnectBackoffConfig",(()=>_),(e=>_=e)),t(e.exports,"DEFAULT_SESSION_TIMEOUT_SEC",(()=>f),(e=>f=e)),t(e.exports,"typeErrors",(()=>o),(e=>o=e)),t(e.exports,"subscriptionMode",(()=>i),(e=>i=e)),t(e.exports,"WS_SERVER",(()=>l),(e=>l=e)),t(e.exports,"PUBLISH_BACKOFF_JITTER",(()=>k),(e=>k=e)),t(e.exports,"trackSwitchOffMode",(()=>g),(e=>g=e)),t(e.exports,"PUBLISH_MAX_ATTEMPTS",(()=>s),(e=>s=e)),t(e.exports,"DEFAULT_NQ_LEVEL_REMOTE",(()=>d),(e=>d=e)),t(e.exports,"iceRestartBackoffConfig",(()=>m),(e=>m=e)),t(e.exports,"DEFAULT_REGION",(()=>u),(e=>u=e)),t(e.exports,"DEFAULT_ICE_GATHERING_TIMEOUT_MS",(()=>h),(e=>h=e)),t(e.exports,"trackPriority",(()=>y),(e=>y=e)),t(e.exports,"DEFAULT_REALM",(()=>a),(e=>a=e)),t(e.exports,"DEFAULT_ENVIRONMENT",(()=>r),(e=>r=e)),t(e.exports,"PUBLISH_BACKOFF_MS",(()=>S),(e=>S=e)),t(e.exports,"DEFAULT_LOG_LEVEL",(()=>b),(e=>b=e)),t(e.exports,"DEFAULT_NQ_LEVEL_LOCAL",(()=>v),(e=>v=e)),t(e.exports,"ICE_ACTIVITY_CHECK_PERIOD_MS",(()=>w),(e=>w=e)),r="prod",a="us1",u="gll",b="warn",l=function(e,t){return t="gll"===t?"global":encodeURIComponent(t),"prod"===e?"wss://"+t+".vss.twilio.com/signaling":"wss://"+t+".vss."+e+".twilio.com/signaling"},s=5,k=10,S=20,o={ILLEGAL_INVOKE:function(e,t){return new TypeError("Illegal call to "+e+": "+t)},INVALID_TYPE:function(e,t){return new TypeError(e+" must be "+((["a","e","i","o","u"].includes(t.toLowerCase()[0])?"an":"a")+" ")+t)},INVALID_VALUE:function(e,t){return new RangeError(e+" must be one of "+t.join(", "))},REQUIRED_ARGUMENT:function(e){return new TypeError(e+" must be specified")}},h=15e3,v=1,d=0,c=3,w=1e3,p=3e3,m={factor:1.1,initialDelay:1,maxDelay:1e3*(f=30),randomisationFactor:.5},_={factor:1.5,initialDelay:80,randomisationFactor:.5},i={MODE_COLLABORATION:"collaboration",MODE_GRID:"grid",MODE_PRESENTATION:"presentation"},g={MODE_DISABLED:"disabled",MODE_DETECTED:"detected",MODE_PREDICTED:"predicted"},y={PRIORITY_HIGH:"high",PRIORITY_LOW:"low",PRIORITY_STANDARD:"standard"}})),o.register("vrqLQ",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("2S2q7").defer,i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{_audio:{value:r(),writable:!0},_video:{value:r(),writable:!0}}),this._audio.resolve(),this._video.resolve()}return n(e,[{key:"resolveDeferred",value:function(e){"audio"===e?this._audio.resolve():this._video.resolve()}},{key:"startDeferred",value:function(e){"audio"===e?this._audio=r():this._video=r()}},{key:"whenResolved",value:function(e){return"audio"===e?this._audio.promise:this._video.promise}}]),e}();e.exports=new i})),o.register("4HKtL",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("4H6HK"),i=o("2S2q7"),a=i.buildLogLevels,s=i.valueToJSON,u=o("72UdZ").DEFAULT_LOG_LEVEL,c=o("483rj"),l=0,h=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Object.assign({name:e,log:null,logLevel:u},r);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),o=String(r.name),s=a(r.logLevel),h=r.log?r.log.createLog("media",i):new c("media",i,s);return Object.defineProperties(i,{_instanceId:{value:++l},_log:{value:h},kind:{enumerable:!0,value:n},name:{enumerable:!0,value:o}}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"toJSON",value:function(){return s(this)}}]),t}(r);e.exports=h})),o.register("4H6HK",(function(e,t){"use strict";var n=o("6xYCf").EventEmitter,r=o("2S2q7").hidePrivateAndCertainPublicPropertiesInClass;e.exports=r(n,["domain"])})),o.register("483rj",(function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=o("72UdZ").DEFAULT_LOG_LEVEL,a=o("72UdZ").typeErrors,s=void 0;var u=function(){function e(t,r,o){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"!=typeof t)throw a.INVALID_TYPE("moduleName","string");if(!r)throw a.REQUIRED_ARGUMENT("component");"object"!==(void 0===o?"undefined":n(o))&&(o={}),d(o),Object.defineProperties(this,{_component:{value:r},_logLevels:{value:o},_warnings:{value:new Set},logLevel:{get:function(){return e.getLevelByName(o[t]||i)}},name:{get:r.toString.bind(r)}})}return r(e,[{key:"createLog",value:function(t,n){return new e(t,n,this._logLevels)}},{key:"setLevels",value:function(e){return d(e),Object.assign(this._logLevels,e),this}},{key:"log",value:function(t,n){var r=e._levels[t];if(!r)throw a.INVALID_VALUE("logLevel",l);if(this.logLevel<=t){var i=r.name,o=(new Date).toISOString().split("T").concat(["|",i,"in",this.name+":"]);r.logFn.apply(console,o.concat(n))}return this}},{key:"debug",value:function(){return this.log(e.DEBUG,[].slice.call(arguments))}},{key:"deprecated",value:function(e){var t=function(e){if((s=s||new Map).has(e))return s.get(e);var t=new Set;return s.set(e,t),t}(this._component.constructor);return t.has(e)?this:(t.add(e),this.warn(e))}},{key:"info",value:function(){return this.log(e.INFO,[].slice.call(arguments))}},{key:"warn",value:function(){return this.log(e.WARN,[].slice.call(arguments))}},{key:"warnOnce",value:function(e){return this._warnings.has(e)?this:(this._warnings.add(e),this.warn(e))}},{key:"error",value:function(){return this.log(e.ERROR,[].slice.call(arguments))}},{key:"throw",value:function(t,n){throw t.clone&&(t=t.clone(n)),this.log(e.ERROR,t),t}}],[{key:"getLevelByName",value:function(t){return isNaN(t)?(f(t=t.toUpperCase()),e[t]):parseInt(t,10)}}]),e}();Object.defineProperties(u,{DEBUG:{value:0},INFO:{value:1},WARN:{value:2},ERROR:{value:3},OFF:{value:4},_levels:{value:[{name:"DEBUG",logFn:console.log},{name:"INFO",logFn:console.info},{name:"WARN",logFn:console.warn},{name:"ERROR",logFn:console.error},{name:"OFF",logFn:function(){}}]}});var c={},l=[],h=u._levels.map((function(e,t){return c[e.name]=!0,l.push(t),e.name}));function f(e){if(!(e in c))throw a.INVALID_VALUE("level",h)}function d(e){Object.keys(e).forEach((function(t){f(e[t].toUpperCase())}))}e.exports=u})),o.register("5B2Jx",(function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var a=o("3bRT0").getUserMedia,s=o("6YI9h").guessBrowser,u=o("2S2q7"),c=u.capitalize,l=u.defer,h=u.waitForSometime,f=u.waitForEvent,d=o("72UdZ").typeErrors.ILLEGAL_INVOKE,p=o("3pfsT"),m=o("20SJk"),v=o("4cLmM"),g=o("vrqLQ"),y=o("jvtlz"),b=o("1Cusm");function w(e){var t=e._log,n=e.kind,r={audio:p,video:m}[n],i=e._dummyEl,o=e.mediaStreamTrack,a=null;function s(){var n=e._workaroundWebKitBug1208516Cleanup,o=e.isStopped,s=e.mediaStreamTrack.muted,u=o&&!!n;return Promise.resolve().then((function(){return"visible"===document.visibilityState&&!a&&(s||u||i.play().then((function(){return r(i)})).then((function(e){return e?t.warn("Silence detected"):t.info("Non-silence detected"),e})).catch((function(e){t.warn("Failed to detect silence:",e)})).finally((function(){i.pause()})))}))}function u(){return Promise.race([f(o,"unmute"),h(50)]).then((function(){return s()})).then((function(t){return t&&!a&&(a=l(),e._restart().finally((function(){i=e._dummyEl,y(),o=e.mediaStreamTrack,d(),a.resolve(),a=null}))),(a&&a.promise||Promise.resolve()).finally((function(){return g.resolveDeferred(n)}))}))}function c(){var t=e._log,n=e.kind;t.info("Muted"),t.debug("LocalMediaTrack:",e),g.startDeferred(n)}function d(){o.addEventListener("ended",u),o.addEventListener("mute",c),o.addEventListener("unmute",u)}function y(){o.removeEventListener("ended",u),o.removeEventListener("mute",c),o.removeEventListener("unmute",u)}return v.onVisible(1,u),d(),function(){v.offVisible(1,u),y()}}e.exports=function(e){return function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i="safari"===s()&&"object"===("undefined"==typeof document?"undefined":n(document))&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState;r=Object.assign({getUserMedia:a,isCreatedByCreateLocalTracks:!1,workaroundWebKitBug1208516:i,gUMSilentTrackWorkaround:y},r);var o=new b(e),u=o.kind,c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o,r));return Object.defineProperties(c,{_constraints:{value:"object"===n(r[u])?r[u]:{},writable:!0},_getUserMedia:{value:r.getUserMedia},_gUMSilentTrackWorkaround:{value:r.gUMSilentTrackWorkaround},_workaroundWebKitBug1208516:{value:r.workaroundWebKitBug1208516},_workaroundWebKitBug1208516Cleanup:{value:null,writable:!0},_didCallEnd:{value:!1,writable:!0},_isCreatedByCreateLocalTracks:{value:r.isCreatedByCreateLocalTracks},_trackSender:{value:o},id:{enumerable:!0,value:o.id},isEnabled:{enumerable:!0,get:function(){return o.enabled}},isStopped:{enumerable:!0,get:function(){return"ended"===o.readyState}}}),c._workaroundWebKitBug1208516&&(c._workaroundWebKitBug1208516Cleanup=w(c)),c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"_end",value:function(){this._didCallEnd||(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_end",this).call(this),this._didCallEnd=!0,this.emit("stopped",this))}},{key:"_initialize",value:function(){this._didCallEnd&&(this._didCallEnd=!1),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initialize",this).call(this)}},{key:"_reacquireTrack",value:function(e){var t=this._getUserMedia,n=this._gUMSilentTrackWorkaround,r=this._log,i=this.mediaStreamTrack.kind;r.info("Re-acquiring the MediaStreamTrack"),r.debug("Constraints:",e);var o=Object.assign({audio:!1,video:!1},function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},i,e));return(this._workaroundWebKitBug1208516Cleanup?n(r,t,o):t(o)).then((function(e){return e.getTracks()[0]}))}},{key:"_restart",value:function(e){var t=this,n=this._log;return e=e||this._constraints,this._stop(),this._reacquireTrack(e).catch((function(t){throw n.error("Failed to re-acquire the MediaStreamTrack:",t,e),t})).then((function(r){return n.info("Re-acquired the MediaStreamTrack"),n.debug("MediaStreamTrack:",r),t._constraints=Object.assign({},e),t._setMediaStreamTrack(r)}))}},{key:"_setMediaStreamTrack",value:function(e){var t=this;return e.enabled=this.mediaStreamTrack.enabled,this._stop(),this._trackSender.setMediaStreamTrack(e).catch((function(n){t._log.warn("setMediaStreamTrack failed:",n,e)})).then((function(){t._initialize(),t._getAllAttachedElements().forEach((function(e){return t._attach(e)}))}))}},{key:"_stop",value:function(){return this.mediaStreamTrack.stop(),this._end(),this}},{key:"enable",value:function(e){return(e="boolean"!=typeof e||e)!==this.mediaStreamTrack.enabled&&(this._log.info((e?"En":"Dis")+"abling"),this.mediaStreamTrack.enabled=e,this.emit(e?"enabled":"disabled",this)),this}},{key:"disable",value:function(){return this.enable(!1)}},{key:"restart",value:function(e){var t=this,n=this.kind;if(!this._isCreatedByCreateLocalTracks)return Promise.reject(d("restart","can only be called on a Local"+c(n)+"Track that is created using createLocalTracks or createLocal"+c(n)+"Track."));this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null);var r=this._restart(e);return this._workaroundWebKitBug1208516&&(r=r.finally((function(){t._workaroundWebKitBug1208516Cleanup=w(t)}))),r}},{key:"stop",value:function(){return this._log.info("Stopping"),this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null),this._stop()}}]),t}(e)}})),o.register("3pfsT",(function(e,t){"use strict";var n=o("1kD3V");e.exports=function(e){var t=o("42Xan"),r={},i=t.getOrCreate(r),a=3;return function t(){return a--,n(i,e.srcObject,250).then((function(e){return!!e&&(!(a>0)||t())})).catch((function(){return!0}))}().finally((function(){t.release(r)}))}})),o.register("1kD3V",(function(e,t){"use strict";e.exports=function(e,t,n){n="number"==typeof n?n:250;var r=e.createMediaStreamSource(t),i=e.createAnalyser();i.fftSize=2048,r.connect(i);var o=new Uint8Array(i.fftSize),a=!1;return setTimeout((function(){a=!0}),n),function e(){return a?Promise.resolve(!0):(i.getByteTimeDomainData(o),o.some((function(e){return 128!==e&&0!==e}))?Promise.resolve(!1):function(e){return e="number"==typeof e?e:0,new Promise((function(t){return setTimeout(t,e)}))}().then(e))}().then((function(e){return r.disconnect(),e}),(function(e){throw r.disconnect(),e}))}})),o.register("42Xan",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r="undefined"!=typeof AudioContext?AudioContext:"undefined"!=typeof webkitAudioContext?webkitAudioContext:null,i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=Object.assign({AudioContext:r},t),Object.defineProperties(this,{_AudioContext:{value:t.AudioContext},_audioContext:{value:null,writable:!0},_holders:{value:new Set},AudioContextFactory:{enumerable:!0,value:e}})}return n(e,[{key:"getOrCreate",value:function(e){if(!this._holders.has(e)&&(this._holders.add(e),this._AudioContext&&!this._audioContext))try{this._audioContext=new this._AudioContext}catch(e){}return this._audioContext}},{key:"release",value:function(e){this._holders.has(e)&&(this._holders.delete(e),!this._holders.size&&this._audioContext&&(this._audioContext.close(),this._audioContext=null))}}]),e}();e.exports=new i})),o.register("20SJk",(function(e,t){"use strict";var n=null;e.exports=function(e){return n=n||document.createElement("canvas"),new Promise((function(t){var r=3;setTimeout((function i(){return r--,function(e){var t=n.getContext("2d");t.drawImage(e,0,0,50,50);var r=t.getImageData(0,0,50,50).data.filter((function(e,t){return(t+1)%4}));return 0===Math.max.apply(Math,r)}(e)?r>0?setTimeout(i,250):t(!0):t(!1)}),250)}))}})),o.register("4cLmM",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r(this,e),Object.defineProperties(this,{_listeners:{value:[]},_onVisibilityChange:{value:function(){"visible"===document.visibilityState&&t._emitVisible()}}});for(var i=0;i<n;i++)this._listeners.push([])}return n(e,[{key:"_listenerCount",value:function(){return this._listeners.reduce((function(e,t){return e+t.length}),0)}},{key:"_emitVisible",value:function(){for(var e=this,t=Promise.resolve(),n=function(n){t=t.then((function(){return e._emitVisiblePhase(n)}))},r=1;r<=this._listeners.length;r++)n(r);return t}},{key:"_emitVisiblePhase",value:function(e){var t=this._listeners[e-1];return Promise.all(t.map((function(e){var t=e();return t instanceof Promise?t:Promise.resolve(t)})))}},{key:"_start",value:function(){document.addEventListener("visibilitychange",this._onVisibilityChange)}},{key:"_stop",value:function(){document.removeEventListener("visibilitychange",this._onVisibilityChange)}},{key:"onVisible",value:function(e,t){if("number"!=typeof e||e<=0||e>this._listeners.length)throw new Error("invalid phase: ",e);return this._listeners[e-1].push(t),1===this._listenerCount()&&this._start(),this}},{key:"offVisible",value:function(e,t){if("number"!=typeof e||e<=0||e>this._listeners.length)throw new Error("invalid phase: ",e);var n=this._listeners[e-1],r=n.indexOf(t);return-1!==r&&(n.splice(r,1),0===this._listenerCount()&&this._stop()),this}}]),e}();e.exports=new i(2)})),o.register("jvtlz",(function(e,t){"use strict";var n=o("1kD3V");e.exports=function(e,t,r,i,a){i="number"==typeof i?i:3;var s=0,u=o("42Xan"),c={},l=u.getOrCreate(c);return function o(){return t(r).then((function(t){return(r.audio?n(l,t,a).catch((function(t){return e.warn("Encountered an error while detecting silence",t),!0})):Promise.resolve(!1)).then((function(n){return n?i<=0?(e.warn("Got a silent audio MediaStreamTrack. Normally we would try to get a new one, but we've run out of retries; returning it anyway."),t):(e.warn("Got a silent audio MediaStreamTrack. Stopping all MediaStreamTracks and calling getUserMedia again. This is retry #"+ ++s+"."),t.getTracks().forEach((function(e){return e.stop()})),i--,o()):(e.info("Got a non-silent audio MediaStreamTrack; returning it."),t)}))}))}().then((function(e){return u.release(c),e}),(function(e){throw u.release(c),e}))}})),o.register("1Cusm",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.id,e));return Object.defineProperties(n,{_clones:{value:new Set},_senders:{value:new Set}}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"clone",value:function(){var e=new t(this.track.clone());return this._clones.add(e),e}},{key:"removeClone",value:function(e){this._clones.delete(e)}},{key:"setMediaStreamTrack",value:function(e){var t=this,n=Array.from(this._clones),r=Array.from(this._senders);return Promise.all(n.map((function(t){return t.setMediaStreamTrack(e.clone())})).concat(r.map((function(t){return t.replaceTrack(e)})))).finally((function(){t._track=e}))}},{key:"addSender",value:function(e){return this._senders.add(e),this}},{key:"removeSender",value:function(e){return this._senders.delete(e),this}}]),t}(o("4o7vs"));e.exports=r})),o.register("4o7vs",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var i=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n.kind));return Object.defineProperties(r,{_track:{value:n,writable:!0},enabled:{enumerable:!0,get:function(){return this._track.enabled}},readyState:{enumerable:!0,get:function(){return this._track.readyState}},track:{enumerable:!0,get:function(){return this._track}}}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"stop",value:function(){this.track.stop(),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",this).call(this)}}]),t}(o("6ynNs"));e.exports=i})),o.register("6ynNs",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object.defineProperties(r,{id:{enumerable:!0,value:e},kind:{enumerable:!0,value:n}}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"stop",value:function(){this.emit("stopped")}}]),t}(o("6xYCf").EventEmitter);e.exports=r})),o.register("0r2bB",(function(e,t){"use strict";var n=o("2cK96").inherits,r=o("7DhcG");function i(e,t){var n=new r(e,t);return Object.setPrototypeOf(n,i.prototype),n}n(i,r),e.exports=i})),o.register("7DhcG",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var i=o("6YI9h").guessBrowser,a=o("20SJk"),s=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Object.assign({workaroundSilentLocalVideo:"safari"===i()&&"undefined"!=typeof document&&"function"==typeof document.createElement},n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return Object.defineProperties(r,{_workaroundSilentLocalVideo:{value:n.workaroundSilentLocalVideo?u:null},_workaroundSilentLocalVideoCleanup:{value:null,writable:!0}}),r._workaroundSilentLocalVideo&&(r._workaroundSilentLocalVideoCleanup=r._workaroundSilentLocalVideo(r,document)),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"toString",value:function(){return"[LocalVideoTrack #"+this._instanceId+": "+this.id+"]"}},{key:"_end",value:function(){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_end",this).apply(this,arguments)}},{key:"disable",value:function(){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disable",this).apply(this,arguments)}},{key:"enable",value:function(){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enable",this).apply(this,arguments)}},{key:"restart",value:function(){var e=this;this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null);var n=r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"restart",this).apply(this,arguments);return this._workaroundSilentLocalVideo&&n.finally((function(){e._workaroundSilentLocalVideoCleanup=e._workaroundSilentLocalVideo(e,document)})),n}},{key:"stop",value:function(){return this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",this).apply(this,arguments)}}]),t}(o("5B2Jx")(o("23FoH")));function u(e,t){var n=e._log,r=e._dummyEl,i=e.mediaStreamTrack;function o(){e.isEnabled&&(n.info("Unmuted, checking silence"),r.play().then((function(){return a(r,t)})).then((function(t){if(t)return n.warn("Silence detected, restarting"),e._stop(),e._restart();n.info("Non-silent frames detected, so no need to restart")})).catch((function(e){n.warn("Failed to detect silence and restart:",e)})).finally((function(){(r=e._dummyEl).paused||r.pause(),i.removeEventListener("unmute",o),(i=e.mediaStreamTrack).addEventListener("unmute",o)})))}return i.addEventListener("unmute",o),function(){i.removeEventListener("unmute",o)}}e.exports=s})),o.register("23FoH",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return Object.defineProperties(r,{dimensions:{enumerable:!0,value:{width:null,height:null}}}),i(r,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"_initialize",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initialize",this).call(this),this._dummyEl&&(this._dummyEl.onloadedmetadata=function(){s(e,e._dummyEl)&&(e.dimensions.width=e._dummyEl.videoWidth,e.dimensions.height=e._dummyEl.videoHeight)},this._dummyEl.onresize=function(){s(e,e._dummyEl)&&(e.dimensions.width=e._dummyEl.videoWidth,e.dimensions.height=e._dummyEl.videoHeight,e.isStarted&&(e._log.debug("Dimensions changed:",e.dimensions),e.emit(t.DIMENSIONS_CHANGED,e)))})}},{key:"_start",value:function(e){return this.dimensions.width=e.videoWidth,this.dimensions.height=e.videoHeight,this._log.debug("Dimensions:",this.dimensions),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_start",this).call(this,e)}},{key:"attach",value:function(){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).apply(this,arguments)}},{key:"detach",value:function(){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"detach",this).apply(this,arguments)}}]),t}(o("6YbA9"));function s(e,t){return e.dimensions.width!==t.videoWidth||e.dimensions.height!==t.videoHeight}a.DIMENSIONS_CHANGED="dimensionsChanged",e.exports=a})),o.register("3EiTy",(function(e,t){"use strict";var n=o("2cK96").inherits,r=o("6yxb9");function i(e){var t=new r(e);return Object.setPrototypeOf(t,i.prototype),t}n(i,r),e.exports=i})),o.register("6yxb9",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("4HKtL"),i=o("1TX2o"),a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=new(0,(e=Object.assign({DataTrackSender:i,maxPacketLifeTime:null,maxRetransmits:null,ordered:!0},e)).DataTrackSender)(e.maxPacketLifeTime,e.maxRetransmits,e.ordered),r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n.id,"data",e));return Object.defineProperties(r,{_trackSender:{value:n},id:{enumerable:!0,value:n.id},maxPacketLifeTime:{enumerable:!0,value:e.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:e.maxRetransmits},ordered:{enumerable:!0,value:e.ordered},reliable:{enumerable:!0,value:null===e.maxPacketLifeTime&&null===e.maxRetransmits}}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"send",value:function(e){this._trackSender.send(e)}}]),t}(r);e.exports=a})),o.register("1TX2o",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var i=o("74d2M"),a=o("2S2q7").makeUUID,s=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a(),e,n,r));return Object.defineProperties(i,{_clones:{value:new Set},_dataChannels:{value:new Set}}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"_addClone",value:function(e){this._clones.add(e)}},{key:"removeClone",value:function(e){this._clones.delete(e)}},{key:"addDataChannel",value:function(e){return this._dataChannels.add(e),this}},{key:"clone",value:function(){var e=this,n=new t(this.maxPacketLifeTime,this.maxRetransmits,this.ordered);return this._addClone(n),n.once("stopped",(function(){return e.removeClone(n)})),n}},{key:"removeDataChannel",value:function(e){return this._dataChannels.delete(e),this}},{key:"send",value:function(e){return this._dataChannels.forEach((function(t){try{t.send(e)}catch(e){}})),this._clones.forEach((function(t){try{t.send(e)}catch(e){}})),this}},{key:"stop",value:function(){this._dataChannels.forEach((function(e){return e.close()})),this._clones.forEach((function(e){return e.stop()})),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",this).call(this)}}]),t}(i);e.exports=s})),o.register("74d2M",(function(e,t){"use strict";var n=function(e){function t(e,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"data"));return Object.defineProperties(o,{maxPacketLifeTime:{enumerable:!0,value:n},maxRetransmits:{enumerable:!0,value:r},ordered:{enumerable:!0,value:i}}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o("6ynNs"));e.exports=n}));var GL,YL=(HL={LocalAudioTrack:o("412Yf"),LocalVideoTrack:o("0r2bB"),LocalDataTrack:o("3EiTy")}).LocalAudioTrack,QL=HL.LocalDataTrack,JL=HL.LocalVideoTrack,ZL=(GL=JSON.parse('{"_args":[["twilio-video@2.8.0","/Users/lazerwalker/Code/azure-mud"]],"_from":"twilio-video@2.8.0","_id":"twilio-video@2.8.0","_inBundle":false,"_integrity":"sha512-TDL4GxlSqYE32zmN0nOVtsdIVAgValRl3LRBuUAuREsQXXk7oEWyXHqNIF1/N9Kvh5J5BVK6FvXnxSA5TsdLkA==","_location":"/twilio-video","_phantomChildren":{"async-limiter":"1.0.1","ultron":"1.1.1"},"_requested":{"type":"version","registry":true,"raw":"twilio-video@2.8.0","name":"twilio-video","escapedName":"twilio-video","rawSpec":"2.8.0","saveSpec":null,"fetchSpec":"2.8.0"},"_requiredBy":["/"],"_resolved":"https://registry.npmjs.org/twilio-video/-/twilio-video-2.8.0.tgz","_spec":"2.8.0","_where":"/Users/lazerwalker/Code/azure-mud","author":{"name":"Mark Andrus Roberts","email":"mroberts@twilio.com"},"browser":{"ws":"./src/ws.js","xmlhttprequest":"./src/xmlhttprequest.js"},"bugs":{"url":"https://github.com/twilio/twilio-video.js/issues"},"contributors":[{"name":"Ryan Rowland","email":"rrowland@twilio.com"},{"name":"Manjesh Malavalli","email":"mmalavalli@twilio.com"},{"name":"Makarand Patwardhan","email":"mpatwardhan@twilio.com"}],"dependencies":{"@twilio/webrtc":"4.3.2","backoff":"^2.5.0","ws":"^3.3.1","xmlhttprequest":"^1.8.0"},"description":"Twilio Video JavaScript Library","devDependencies":{"@types/express":"^4.11.0","@types/node":"^8.5.1","@types/selenium-webdriver":"^3.0.8","@types/ws":"^3.2.1","babel-cli":"^6.26.0","babel-preset-es2015":"^6.24.1","browserify":"^17.0.0","cheerio":"^0.22.0","cors":"^2.8.5","electron":"^9.1.0","envify":"^4.0.0","eslint":"^6.2.1","eslint-config-standard":"^14.0.0","eslint-plugin-import":"^2.18.2","eslint-plugin-node":"^9.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^4.0.1","express":"^4.16.2","ink-docstrap":"^1.3.2","inquirer":"^7.0.0","is-docker":"^2.0.0","istanbul":"^0.4.5","jsdoc":"^3.5.5","json-loader":"^0.5.7","karma":"^5.0.2","karma-browserify":"^7.0.0","karma-chrome-launcher":"^2.0.0","karma-edgium-launcher":"^4.0.0-0","karma-electron":"^6.1.0","karma-firefox-launcher":"^1.3.0","karma-htmlfile-reporter":"^0.3.8","karma-junit-reporter":"^1.2.0","karma-mocha":"^1.3.0","karma-safari-launcher":"^1.0.0","karma-spec-reporter":"0.0.32","mocha":"^3.2.0","node-http-server":"^8.1.2","npm-run-all":"^4.0.2","requirejs":"^2.3.3","rimraf":"^2.6.1","simple-git":"^1.126.0","sinon":"^4.0.1","ts-node":"4.0.1","tslint":"5.8.0","twilio":"^3.49.0","twilio-release-tool":"^1.0.0","typescript":"2.6.2","uglify-js":"^2.8.22","vinyl-fs":"^2.4.4","vinyl-source-stream":"^1.1.0","watchify":"^3.11.1","webrtc-adapter":"^4.1.1"},"engines":{"node":">=0.12"},"homepage":"https://twilio.com","keywords":["twilio","webrtc","library","javascript","video","rooms"],"license":"BSD-3-Clause","main":"./es5/index.js","name":"twilio-video","repository":{"type":"git","url":"git+https://github.com/twilio/twilio-video.js.git"},"scripts":{"build":"npm-run-all clean lint docs cover test:integration build:es5 build:js build:min.js test:umd","build:es5":"rimraf ./es5 && babel lib -d es5","build:js":"node ./scripts/build.js ./src/twilio-video.js ./LICENSE.md ./dist/twilio-video.js","build:min.js":"uglifyjs ./dist/twilio-video.js -o ./dist/twilio-video.min.js --comments \\"/^! twilio-video.js/\\" -b beautify=false,ascii_only=true","build:quick":"npm-run-all clean lint docs build:es5 build:js build:min.js","clean":"rimraf ./coverage ./es5 ./dist","cover":"istanbul cover node_modules/mocha/bin/_mocha -- ./test/unit/index.js","docs":"node ./scripts/docs.js ./dist/docs","lint":"eslint ./lib ./test/*.js ./docker/**/*.js ./test/framework/*.js ./test/lib/*.js ./test/integration/** ./test/unit/**","test":"npm-run-all test:unit test:integration","test:crossbrowser":"npm-run-all test:crossbrowser:*","test:crossbrowser:build":"npm-run-all test:crossbrowser:build:*","test:crossbrowser:build:browser":"cd ./test/crossbrowser && browserify lib/crossbrowser/src/browser/index.js > src/browser/index.js","test:crossbrowser:build:clean":"rimraf ./test/crossbrowser/lib ./test/crossbrowser/src/browser/index.js","test:crossbrowser:build:lint":"cd ./test/crossbrowser && tslint --project tsconfig.json","test:crossbrowser:build:tsc":"cd ./test/crossbrowser && tsc","test:crossbrowser:test":"cd ./test/crossbrowser && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:framework":"npm-run-all test:framework:install test:framework:angular test:framework:no-framework test:framework:react","test:framework:angular":"npm-run-all test:framework:angular:*","test:framework:angular:install":"cd ./test/framework/twilio-video-angular && rimraf ./node_modules package-lock.json && npm install","test:framework:angular:run":"mocha ./test/framework/twilio-video-angular.js","test:framework:install":"npm install chromedriver && npm install selenium-webdriver && npm install geckodriver && npm install puppeteer","test:framework:no-framework":"npm-run-all test:framework:no-framework:*","test:framework:no-framework:run":"mocha ./test/framework/twilio-video-no-framework.js","test:framework:react":"npm-run-all test:framework:react:*","test:framework:react:build":"cd ./test/framework/twilio-video-react && npm run build","test:framework:react:install":"cd ./test/framework/twilio-video-react && rimraf ./node_modules package-lock.json && npm install","test:framework:react:run":"mocha ./test/framework/twilio-video-react.js","test:framework:react:test":"node ./scripts/framework.js twilio-video-react","test:integration":"node ./scripts/karma.js karma/integration.conf.js","test:integration:adapter":"node ./scripts/karma.js karma/integration.adapter.conf.js","test:sdkdriver":"npm-run-all test:sdkdriver:*","test:sdkdriver:build":"npm-run-all test:sdkdriver:build:*","test:sdkdriver:build:clean":"rimraf ./test/lib/sdkdriver/lib ./test/lib/sdkdriver/test/integration/browser/index.js","test:sdkdriver:build:lint":"cd ./test/lib/sdkdriver && tslint --project tsconfig.json","test:sdkdriver:build:tsc":"cd ./test/lib/sdkdriver && tsc --rootDir src","test:sdkdriver:test":"npm-run-all test:sdkdriver:test:*","test:sdkdriver:test:integration":"npm-run-all test:sdkdriver:test:integration:*","test:sdkdriver:test:integration:browser":"cd ./test/lib/sdkdriver/test/integration && browserify browser/browser.js > browser/index.js","test:sdkdriver:test:integration:run":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/integration/spec/**/*.ts","test:sdkdriver:test:unit":"cd ./test/lib/sdkdriver && mocha --compilers ts:ts-node/register test/unit/spec/**/*.ts","test:umd":"mocha ./test/umd/index.js","test:unit":"mocha ./test/unit/index.js"},"title":"Twilio Video","version":"2.8.0"}')).version,XL={};o.register("60Xpw",(function(e,t){"use strict";var n=o("3bRT0").MediaStreamTrack,r=o("6YI9h"),i=r.guessBrowser,a=r.guessBrowserVersion,s=o("2GPnH"),u=o("3myXV"),c=o("5rqz7"),l=o("3hHCs"),h=HL.LocalAudioTrack,f=HL.LocalDataTrack,d=HL.LocalVideoTrack,p=o("6Sa4g"),m=o("1THoy"),v=o("4jydZ"),g=o("2S2q7"),y=g.asLocalTrack,b=g.buildLogLevels,w=g.filterObject,_=g.isNonArrayObject,k=o("72UdZ"),S=k.DEFAULT_ENVIRONMENT,E=k.DEFAULT_LOG_LEVEL,M=k.DEFAULT_REALM,T=k.DEFAULT_REGION,C=k.WS_SERVER,I=k.typeErrors,x=o("5NTmS"),A=o("5qB4o"),P=o("483rj"),O=o("6jDrF").validateBandwidthProfile,R="safari"===i()&&a(),D=0,N=!1,L=!1;if(R){var j=R.major,B=R.minor;L=j<12||12===j&&B<1}var F=new Set([{didWarn:!1,name:"abortOnIceServersTimeout"},{didWarn:!1,name:"dscpTagging",newName:"enableDscp"},{didWarn:!1,name:"iceServersTimeout"}]);function U(e,t,n,r,i,o){var a=e.createLocalParticipantSignaling(n,r);return t.debug("Creating a new LocalParticipant:",a),new i.LocalParticipant(a,o,i)}function q(e,t,n){var r=new m(t,n,e),i=e.log;return i.debug("Creating a new Room:",r),n.on("stateChanged",(function e(t){"disconnected"===t&&(i.info("Disconnected from Room:",r.toString()),n.removeListener("stateChanged",e))})),r}function z(e,t,n,r,i,o){return t.log.debug("Creating a new RoomSignaling"),n.connect(o._signaling,e,r,i,t)}function V(e,t){var n=e.log;return e.shouldStopLocalTracks=!e.tracks,e.shouldStopLocalTracks?n.info("LocalTracks were not provided, so they will be acquired automatically before connecting to the Room. LocalTracks will be released if connecting to the Room fails or if the Room is disconnected"):(n.info("Getting LocalTracks"),n.debug("Options:",e)),e.createLocalTracks(e).then((function(r){var i=t(r);return i.catch((function(){e.shouldStopLocalTracks&&(n.info("The automatically acquired LocalTracks will now be stopped"),r.forEach((function(e){e.stop()})))})),i}))}function W(e){var t="string"==typeof e?{codec:e}:e;switch(t.codec.toLowerCase()){case"opus":return Object.assign({dtx:!0},t);case"vp8":return Object.assign({simulcast:!1},t);default:return t}}e.exports=function(e,t){if(void 0===t&&(t={}),!_(t))return x.reject(I.INVALID_TYPE("options","object"));t=Object.assign({automaticSubscription:!0,createLocalTracks:u,dominantSpeaker:!1,enableDscp:!1,environment:S,eventListener:null,insights:!0,LocalAudioTrack:h,LocalDataTrack:f,LocalParticipant:l,LocalVideoTrack:d,Log:P,MediaStreamTrack:n,logLevel:E,maxAudioBitrate:null,maxVideoBitrate:null,name:null,networkMonitor:!0,networkQuality:!1,preferredAudioCodecs:[],preferredVideoCodecs:[],realm:M,region:T,signaling:v},w(t));var r=C(t.environment,t.region),i=new A(Date.now(),t.eventListener);t=Object.assign({eventObserver:i,wsServer:r},t);var o=b(t.logLevel),a="[connect #"+ ++D+"]",m=void 0;try{m=new t.Log("default",a,o)}catch(k){return x.reject(k)}if(t.log=m,function(e,t){F.forEach((function(n){var r=n.didWarn,i=n.name,o=n.newName;i in e&&(o&&(e[o]=e[i]),delete e[i],r||["error","off"].includes(t.level)||(t.warn('The ConnectOptions flag "'+i+'" is '+(o?'deprecated and scheduled for removal. Please use "'+o+'" instead.':"no longer applicable and will be ignored.")),n.didWarn=!0))}))}(t,m),L&&!N&&"error"!==m.logLevel&&"off"!==m.logLevel&&(N=!0,m.warn(["Support for Safari 12.0 and below is limited because it does not support VP8.","This means you may experience codec issues in Group Rooms. You may also","experience codec issues in Peer-to-Peer (P2P) Rooms containing Android- or","iOS-based Participants who do not support H.264. However, P2P Rooms","with browser-based Participants should work. For more information, please","refer to this guide: https://www.twilio.com/docs/video/javascript-v2-developing-safari-11"].join(" "))),"string"!=typeof e)return x.reject(I.INVALID_TYPE("token","string"));var g=Object.assign({},t);if(delete g.name,"tracks"in t){if(!Array.isArray(t.tracks))return x.reject(I.INVALID_TYPE("options.tracks","Array of LocalAudioTrack, LocalVideoTrack or MediaStreamTrack"));try{t.tracks=t.tracks.map((function(e){return y(e,g)}))}catch(k){return x.reject(k)}}var k=O(t.bandwidthProfile);if(k)return x.reject(k);var R=new(0,t.signaling)(t.wsServer,t);m.info("Connecting to a Room"),m.debug("Options:",t);var j=new c({maxAudioBitrate:t.maxAudioBitrate,maxVideoBitrate:t.maxVideoBitrate}),B={audio:t.preferredAudioCodecs.map(W),video:t.preferredVideoCodecs.map(W)},H=new p(_(t.networkQuality)?t.networkQuality:{});t.networkQuality=_(t.networkQuality)||t.networkQuality;var K=s(V.bind(null,t),U.bind(null,R,m,j,H,t),z.bind(null,e,t,R,j,B),q.bind(null,t));return K.then((function(e){return m.info("Connected to Room:",e.toString()),m.info("Room name:",e.name),m.debug("Room:",e),e}),(function(e){K._isCanceled?m.info("Attempt to connect to a Room was canceled"):m.info("Error while connecting to a Room:",e)})),K}})),o.register("2GPnH",(function(e,t){"use strict";var n=o("5NTmS");e.exports=function(e,t,r,i){var o=void 0,a=new Error("Canceled");return new n((function(s,u,c){var l=void 0;e((function(e){return c()?n.reject(a):(l=t(e),r(l).then((function(e){if(c())throw a;return o=e()})))})).then((function(e){if(c())throw e.disconnect(),a;s(i(l,e))})).catch((function(e){u(e)}))}),(function(){o&&o.cancel()}))}})),o.register("5NTmS",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{_isCancelable:{writable:!0,value:!0},_isCanceled:{writable:!0,value:!1},_onCancel:{value:n}}),Object.defineProperty(this,"_promise",{value:new Promise((function(e,n){t((function(t){r._isCancelable=!1,e(t)}),(function(e){r._isCancelable=!1,n(e)}),(function(){return r._isCanceled}))}))})}return n(e,[{key:"cancel",value:function(){return this._isCancelable&&(this._isCanceled=!0,this._onCancel()),this}},{key:"catch",value:function(){var t=[].slice.call(arguments),n=this._promise;return new e((function(e,i){n.catch.apply(n,r(t)).then(e,i)}),this._onCancel)}},{key:"then",value:function(){var t=[].slice.call(arguments),n=this._promise;return new e((function(e,i){n.then.apply(n,r(t)).then(e,i)}),this._onCancel)}}],[{key:"reject",value:function(t){return new e((function(e,n){n(t)}),(function(){}))}},{key:"resolve",value:function(t){return new e((function(e){e(t)}),(function(){}))}}]),e}();e.exports=i})),o.register("3myXV",(function(e,t){"use strict";var n=o("2S2q7").asLocalTrack,r=o("2S2q7").buildLogLevels,i=o("3bRT0").getUserMedia,a=HL.LocalAudioTrack,s=HL.LocalDataTrack,u=HL.LocalVideoTrack,c=o("3bRT0").MediaStreamTrack,l=o("483rj"),h=o("72UdZ").DEFAULT_LOG_LEVEL,f=o("jvtlz"),d=0;e.exports=function(e){var t=!(e&&("audio"in e||"video"in e));e=Object.assign({audio:t,getUserMedia:i,logLevel:h,LocalAudioTrack:a,LocalDataTrack:s,LocalVideoTrack:u,MediaStreamTrack:c,Log:l,video:t},e);var o="[createLocalTracks #"+ ++d+"]",p=r(e.logLevel),m=new e.Log("default",o,p),v=Object.assign({log:m},e);if(delete v.name,!1===e.audio&&!1===e.video)return m.info("Neither audio nor video requested, so returning empty LocalTracks"),Promise.resolve([]);if(e.tracks)return m.info("Adding user-provided LocalTracks"),m.debug("LocalTracks:",e.tracks),Promise.resolve(e.tracks);var g={audio:e.audio&&e.audio.name?{name:e.audio.name}:{},video:e.video&&e.video.name?{name:e.video.name}:{}};g.audio.isCreatedByCreateLocalTracks=!0,g.video.isCreatedByCreateLocalTracks=!0,e.audio&&"boolean"==typeof e.audio.workaroundWebKitBug1208516&&(g.audio.workaroundWebKitBug1208516=e.audio.workaroundWebKitBug1208516),e.video&&"boolean"==typeof e.video.workaroundWebKitBug1208516&&(g.video.workaroundWebKitBug1208516=e.video.workaroundWebKitBug1208516),e.audio&&delete e.audio.name,e.video&&delete e.video.name;var y={audio:e.audio,video:e.video};return(e.audio&&e.audio.workaroundWebKitBug180748?f(m,e.getUserMedia,y):e.getUserMedia(y)).then((function(e){var t=e.getAudioTracks().concat(e.getVideoTracks());return m.info("Call to getUserMedia successful; got MediaStreamTracks:",t),t.map((function(e){return n(e,Object.assign(g[e.kind],v))}))}),(function(e){throw m.warn("Call to getUserMedia failed:",e),e}))}})),o.register("5rqz7",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e=Object.assign({maxAudioBitrate:null,maxVideoBitrate:null},e),Object.defineProperties(n,{maxAudioBitrate:{value:e.maxAudioBitrate,writable:!0},maxVideoBitrate:{value:e.maxVideoBitrate,writable:!0}}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"toJSON",value:function(){return{maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate}}},{key:"update",value:function(e){var t=this;e=Object.assign({maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate},e),["maxAudioBitrate","maxVideoBitrate"].reduce((function(n,r){return t[r]!==e[r]&&(t[r]=e[r],n=!0),n}),!1)&&this.emit("changed")}}]),t}(o("6xYCf").EventEmitter);e.exports=r})),o.register("3hHCs",(function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var a=o("3bRT0").MediaStreamTrack,s=o("2S2q7"),u=s.asLocalTrack,c=s.asLocalTrackPublication,l=s.trackClass,h=o("72UdZ"),f=h.typeErrors,d=h.trackPriority,p=o("6jDrF").validateLocalTrack,m=HL.LocalAudioTrack,v=HL.LocalDataTrack,g=HL.LocalVideoTrack,y=o("4Qd8e"),b=o("4ykWE"),w=o("3ViJy"),_=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=(r=Object.assign({LocalAudioTrack:m,LocalVideoTrack:g,LocalDataTrack:v,MediaStreamTrack:a,LocalAudioTrackPublication:y,LocalVideoTrackPublication:w,LocalDataTrackPublication:b,shouldStopLocalTracks:!1,tracks:n},r)).shouldStopLocalTracks?new Set(n.filter((function(e){return"data"!==e.kind}))):new Set,o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return Object.defineProperties(o,{_LocalAudioTrack:{value:r.LocalAudioTrack},_LocalDataTrack:{value:r.LocalDataTrack},_LocalVideoTrack:{value:r.LocalVideoTrack},_MediaStreamTrack:{value:r.MediaStreamTrack},_LocalAudioTrackPublication:{value:r.LocalAudioTrackPublication},_LocalDataTrackPublication:{value:r.LocalDataTrackPublication},_LocalVideoTrackPublication:{value:r.LocalVideoTrackPublication},_tracksToStop:{value:i},signalingRegion:{enumerable:!0,get:function(){return e.signalingRegion}}}),o._handleTrackSignalingEvents(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"_addTrack",value:function(e,n,r){var o=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_addTrack",this).call(this,e,n);return o&&"disconnected"!==this.state&&this._addLocalTrack(e,r),o}},{key:"_addLocalTrack",value:function(e,t){this._signaling.addTrack(e._trackSender,e.name,t),this._log.info("Added a new "+l(e,!0)+":",e.id),this._log.debug(l(e,!0)+":",e)}},{key:"_removeTrack",value:function(e,n){var r=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_removeTrack",this).call(this,e,n);return r&&"disconnected"!==this.state&&(this._signaling.removeTrack(e._trackSender),this._log.info("Removed a "+l(e,!0)+":",e.id),this._log.debug(l(e,!0)+":",e)),r}},{key:"_getTrackEvents",value:function(){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTrackEvents",this).call(this).concat([["disabled","trackDisabled"],["enabled","trackEnabled"],["stopped","trackStopped"]])}},{key:"toString",value:function(){return"[LocalParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"}},{key:"_handleTrackSignalingEvents",value:function(){var e=this,t=this._log;if("disconnected"!==this.state){var n=this._signaling;this.on("trackDisabled",i),this.on("trackEnabled",o),this.on("trackStopped",a),this._tracks.forEach((function(n){e._addLocalTrack(n,d.PRIORITY_STANDARD),e._getOrCreateLocalTrackPublication(n).catch((function(e){t.warn("Failed to get or create LocalTrackPublication for "+n+":",e)}))}));var r=this;n.on("stateChanged",(function e(s){t.debug("Transitioned to state:",s),"disconnected"===s?(t.debug("Removing LocalTrack event listeners"),n.removeListener("stateChanged",e),r.removeListener("trackDisabled",i),r.removeListener("trackEnabled",o),r.removeListener("trackStopped",a),r._tracks.forEach((function(e){var t=a(e);t&&e._trackSender.removeClone(t._trackTransceiver)})),t.info("LocalParticipant disconnected. Stopping "+r._tracksToStop.size+" automatically-acquired LocalTracks"),r._tracksToStop.forEach((function(e){e.stop()}))):"connected"===s&&(t.info("reconnected"),setTimeout((function(){return r.emit("reconnected")}),0))}))}function i(e){var r=n.getPublication(e._trackSender);r&&(r.disable(),t.debug("Disabled the "+l(e,!0)+":",e.id))}function o(e){var r=n.getPublication(e._trackSender);r&&(r.enable(),t.debug("Enabled the "+l(e,!0)+":",e.id))}function a(e){var t=n.getPublication(e._trackSender);return t&&t.stop(),t}}},{key:"_getOrCreateLocalTrackPublication",value:function(e){var t=k(this.tracks,e);if(t)return Promise.resolve(t);var n=this._log,r=this,i=this._signaling.getPublication(e._trackSender);if(!i)return Promise.reject(new Error("Unexpected error: The "+e+" cannot be published"));function o(e){r.unpublishTrack(e.track)}return new Promise((function(a,s){i.on("updated",(function u(){var h=i.error;if(h)return i.removeListener("updated",u),n.warn("Failed to publish the "+l(e,!0)+": "+h.message),r._removeTrack(e,e.id),setTimeout((function(){r.emit("trackPublicationFailed",h,e)})),void s(h);if(!r._tracks.has(e.id))return i.removeListener("updated",u),void s(new Error("The "+e+" was unpublished"));if(i.sid){i.removeListener("updated",u);var f={log:n,LocalAudioTrackPublication:r._LocalAudioTrackPublication,LocalDataTrackPublication:r._LocalDataTrackPublication,LocalVideoTrackPublication:r._LocalVideoTrackPublication};(t=k(r.tracks,e))||(t=c(e,i,o,f),r._addTrackPublication(t)),"connected"===r._signaling.state&&setTimeout((function(){r.emit("trackPublished",t)})),a(t)}}))}))}},{key:"publishTrack",value:function(e,t){var n=k(this.tracks,e);if(n)return Promise.resolve(n);t=Object.assign({log:this._log,priority:d.PRIORITY_STANDARD,LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack},t);var r=void 0;try{r=u(e,t)}catch(e){return Promise.reject(e)}var i=Object.values(d);if(!i.includes(t.priority))return Promise.reject(f.INVALID_VALUE("LocalTrackPublishOptions.priority",i));var o=this._addTrack(r,r.id,t.priority)||this._tracks.get(r.id);return this._getOrCreateLocalTrackPublication(o)}},{key:"publishTracks",value:function(e){if(!Array.isArray(e))throw f.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return Promise.all(e.map(this.publishTrack,this))}},{key:"setBandwidthProfile",value:function(){this._log.warn("setBandwidthProfile is not implemented yet and may be available in future versions of twilio-video.js")}},{key:"setNetworkQualityConfiguration",value:function(e){if("object"!==(void 0===e?"undefined":n(e))||null===e)throw f.INVALID_TYPE("networkQualityConfiguration","NetworkQualityConfiguration");return["local","remote"].forEach((function(t){if(t in e&&("number"!=typeof e[t]||isNaN(e[t])))throw f.INVALID_TYPE("networkQualityConfiguration."+t,"number")})),this._signaling.setNetworkQualityConfiguration(e),this}},{key:"setParameters",value:function(e){if(void 0!==e&&"object"!==(void 0===e?"undefined":n(e)))throw f.INVALID_TYPE("encodingParameters","EncodingParameters, null or undefined");return e?["maxAudioBitrate","maxVideoBitrate"].forEach((function(t){if(void 0!==e[t]&&"number"!=typeof e[t]&&null!==e[t])throw f.INVALID_TYPE("encodingParameters."+t,"number, null or undefined")})):null===e&&(e={maxAudioBitrate:null,maxVideoBitrate:null}),this._signaling.setParameters(e),this}},{key:"unpublishTrack",value:function(e){p(e,{LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack});var t=this._tracks.get(e.id);if(!t)return null;if(this._signaling.getPublication(t._trackSender).publishFailed(new Error("The "+t+" was unpublished")),!(t=this._removeTrack(t,t.id)))return null;var n=k(this.tracks,t);return n&&this._removeTrackPublication(n),n}},{key:"unpublishTracks",value:function(e){var t=this;if(!Array.isArray(e))throw f.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return e.reduce((function(e,n){var r=t.unpublishTrack(n);return r?e.concat(r):e}),[])}}]),t}(o("4op8I"));function k(e,t){return Array.from(e.values()).find((function(e){return e.track===t||e.track.mediaStreamTrack===t}))||null}e.exports=_})),o.register("6jDrF",(function(e,n){var r,i;t(e.exports,"validateLocalTrack",(()=>i),(e=>i=e)),t(e.exports,"validateBandwidthProfile",(()=>r),(e=>r=e));var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=o("2S2q7").isNonArrayObject,u=o("72UdZ"),c=u.typeErrors,l=u.subscriptionMode,h=u.trackPriority,f=u.trackSwitchOffMode;function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return void 0===e?null:null!==e&&s(e)?n.reduce((function(n,r){var i=r.prop,o=r.type,s=r.values;if(n||!(i in e))return n;var u=e[i];return o&&(void 0===u?"undefined":a(u))!==o||"number"===o&&isNaN(u)?c.INVALID_TYPE(t+"."+i,o):Array.isArray(s)&&!s.includes(u)?c.INVALID_VALUE(t+"."+i,s):n}),null):c.INVALID_TYPE(t,"object")}r=function(e){var t=d(e,"options.bandwidthProfile");return!e||t?t:(t=d(e.video,"options.bandwidthProfile.video",[{prop:"dominantSpeakerPriority",values:Object.values(h)},{prop:"maxSubscriptionBitrate",type:"number"},{prop:"maxTracks",type:"number"},{prop:"mode",values:Object.values(l)},{prop:"trackSwitchOffMode",values:Object.values(f)}]))||(e.video?function(e){var t="options.bandwidthProfile.video.renderDimensions",n=d(e,t);return e?n||Object.values(h).reduce((function(n,r){return n||d(e[r],t+"."+r,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}),null):n}(e.video.renderDimensions):null)},i=function(e,t){if(!(e instanceof t.LocalAudioTrack||e instanceof t.LocalDataTrack||e instanceof t.LocalVideoTrack||e instanceof t.MediaStreamTrack))throw c.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}})),o.register("4Qd8e",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(e){function t(e,n,r,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"toString",value:function(){return"[LocalAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"}}]),t}(o("1URFQ"));e.exports=r})),o.register("1URFQ",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("2s9kc"),i=o("72UdZ"),a=i.typeErrors,s=i.trackPriority,u=function(e){function t(e,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n.name,e.sid,i));return Object.defineProperties(o,{_reemitTrackEvent:{value:function(){return o.emit(o.isTrackEnabled?"trackEnabled":"trackDisabled")}},_signaling:{value:e},_unpublish:{value:r},isTrackEnabled:{enumerable:!0,get:function(){return"data"===this.track.kind||this.track.isEnabled}},kind:{enumerable:!0,value:n.kind},priority:{enumerable:!0,get:function(){return e.updatedPriority}},track:{enumerable:!0,value:n}}),n.on("disabled",o._reemitTrackEvent),n.on("enabled",o._reemitTrackEvent),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"toString",value:function(){return"[LocalTrackPublication #"+this._instanceId+": "+this.trackSid+"]"}},{key:"setPriority",value:function(e){var t=Object.values(s);if(!t.includes(e))throw a.INVALID_VALUE("priority",t);return this._signaling.setPriority(e),this}},{key:"unpublish",value:function(){return this.track.removeListener("disabled",this._reemitTrackEvent),this.track.removeListener("enabled",this._reemitTrackEvent),this._unpublish(this),this}}]),t}(r);e.exports=u})),o.register("2s9kc",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("4H6HK"),i=o("2S2q7"),a=i.buildLogLevels,s=i.valueToJSON,u=o("72UdZ").DEFAULT_LOG_LEVEL,c=o("483rj"),l=0,h=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r=Object.assign({logLevel:u},r);var o=a(r.logLevel);return Object.defineProperties(i,{_instanceId:{value:l++},_log:{value:r.log||new c("default",i,o)},trackName:{enumerable:!0,value:e},trackSid:{enumerable:!0,value:n}}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"toJSON",value:function(){return s(this)}},{key:"toString",value:function(){return"[TrackPublication #"+this._instanceId+": "+this.trackSid+"]"}}]),t}(r);e.exports=h})),o.register("4ykWE",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(e){function t(e,n,r,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"toString",value:function(){return"[LocalDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"}}]),t}(o("1URFQ"));e.exports=r})),o.register("3ViJy",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(e){function t(e,n,r,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"toString",value:function(){return"[LocalVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"}}]),t}(o("1URFQ"));e.exports=r})),o.register("4op8I",(function(e,t){"use strict";var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var a=o("4H6HK"),s=o("2NhYx"),u=o("4upvN"),c=o("4fPoW"),l=o("7stCC"),h=o("73AkP"),f=o("1wu7O"),d=o("2S2q7"),p=0,m=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),i=function(e){var t=e.map((function(e){return[e.id,e]})),n=t.filter((function(e){return"audio"===e[1].kind})),r=t.filter((function(e){return"video"===e[1].kind})),i=t.filter((function(e){return"data"===e[1].kind}));return{audioTracks:n,dataTracks:i,tracks:t,videoTracks:r}}((n=Object.assign({RemoteAudioTrack:s,RemoteAudioTrackPublication:u,RemoteDataTrack:c,RemoteDataTrackPublication:l,RemoteVideoTrack:h,RemoteVideoTrackPublication:f,tracks:[]},n)).tracks),o=n.log.createLog("default",r),a=new Map(i.audioTracks),d=new Map(i.dataTracks),m=new Map(i.tracks),g=new Map(i.videoTracks);return Object.defineProperties(r,{_RemoteAudioTrack:{value:n.RemoteAudioTrack},_RemoteAudioTrackPublication:{value:n.RemoteAudioTrackPublication},_RemoteDataTrack:{value:n.RemoteDataTrack},_RemoteDataTrackPublication:{value:n.RemoteDataTrackPublication},_RemoteVideoTrack:{value:n.RemoteVideoTrack},_RemoteVideoTrackPublication:{value:n.RemoteVideoTrackPublication},_audioTracks:{value:a},_dataTracks:{value:d},_instanceId:{value:++p},_log:{value:o},_signaling:{value:e},_tracks:{value:m},_trackEventReemitters:{value:new Map},_trackPublicationEventReemitters:{value:new Map},_trackSignalingUpdatedEventCallbacks:{value:new Map},_videoTracks:{value:g},audioTracks:{enumerable:!0,value:new Map},dataTracks:{enumerable:!0,value:new Map},identity:{enumerable:!0,get:function(){return e.identity}},networkQualityLevel:{enumerable:!0,get:function(){return e.networkQualityLevel}},networkQualityStats:{enumerable:!0,get:function(){return e.networkQualityStats}},sid:{enumerable:!0,get:function(){return e.sid}},state:{enumerable:!0,get:function(){return e.state}},tracks:{enumerable:!0,value:new Map},videoTracks:{enumerable:!0,value:new Map}}),r._tracks.forEach(v.bind(null,r)),e.on("networkQualityLevelChanged",(function(){return r.emit("networkQualityLevelChanged",r.networkQualityLevel,r.networkQualityStats&&(r.networkQualityStats.audio||r.networkQualityStats.video)?r.networkQualityStats:null)})),function(e,t){var n=e._log;if("disconnected"===e.state)return;t.on("stateChanged",(function r(i){n.debug("Transitioned to state:",i),e.emit(i,e),"disconnected"===i&&(n.debug("Removing Track event reemitters"),t.removeListener("stateChanged",r),t.tracks.forEach((function(t){var n=e._tracks.get(t.id),r=e._trackEventReemitters.get(t.id);n&&r&&r.forEach((function(e,t){n.removeListener(t,e)}))})),e._trackEventReemitters.clear(),e.tracks.forEach((function(t){e._trackPublicationEventReemitters.get(t.trackSid).forEach((function(e,n){t.removeListener(n,e)}))})),e._trackPublicationEventReemitters.clear())}))}(r,e),o.info("Created a new Participant"+(r.identity?": "+r.identity:"")),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"_getTrackEvents",value:function(){return[["dimensionsChanged","trackDimensionsChanged"],["message","trackMessage"],["started","trackStarted"]]}},{key:"_getTrackPublicationEvents",value:function(){return[]}},{key:"toString",value:function(){return"[Participant #"+this._instanceId+": "+this.sid+"]"}},{key:"_addTrack",value:function(e,t){var n=this._log;return this._tracks.has(t)?null:(this._tracks.set(t,e),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[e.kind].set(t,e),v(this,e,t),n.info("Added a new "+d.trackClass(e)+":",t),n.debug(d.trackClass(e)+":",e),e)}},{key:"_addTrackPublication",value:function(e){var t=this._log;return this.tracks.has(e.trackSid)?null:(this.tracks.set(e.trackSid,e),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[e.kind].set(e.trackSid,e),function(e,t){var r=new Map;if("disconnected"===e.state)return;e._getTrackPublicationEvents().forEach((function(i){var o=n(i,2),a=o[0],s=o[1];r.set(a,(function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];e.emit.apply(e,[s].concat(r,[t]))})),t.on(a,r.get(a))})),e._trackPublicationEventReemitters.set(t.trackSid,r)}(this,e),t.info("Added a new "+d.trackPublicationClass(e)+":",e.trackSid),t.debug(d.trackPublicationClass(e)+":",e),e)}},{key:"_handleTrackSignalingEvents",value:function(){var e=this._log,t=this;if("disconnected"!==this.state){var r=this._RemoteAudioTrack,i=this._RemoteAudioTrackPublication,o=this._RemoteVideoTrack,a=this._RemoteVideoTrackPublication,s=this._RemoteDataTrack,u=this._RemoteDataTrackPublication,c=this._signaling;c.on("trackAdded",l),c.on("trackRemoved",h),c.tracks.forEach(l),c.on("stateChanged",(function n(r){"disconnected"===r?(e.debug("Removing event listeners"),c.removeListener("stateChanged",n),c.removeListener("trackAdded",l),c.removeListener("trackRemoved",h)):"connected"===r&&(e.info("reconnected"),setTimeout((function(){return t.emit("reconnected")}),0))}))}function l(r){var o=new(0,{audio:i,data:u,video:a}[r.kind])(r,{log:e});t._addTrackPublication(o);var s=r.isSubscribed;s&&f(r),t._trackSignalingUpdatedEventCallbacks.set(r.sid,(function(){if(s!==r.isSubscribed){if(s=r.isSubscribed)return void f(r);!function(e){var r=Array.from(t._tracks.entries()).find((function(t){return n(t,2)[1].sid===e.sid})),i=n(r,2),o=i[0],a=i[1],s=t.tracks.get(e.sid);a&&t._removeTrack(a,s,o)}(r)}})),r.on("updated",t._trackSignalingUpdatedEventCallbacks.get(r.sid))}function h(e){e.isSubscribed&&e.setTrackTransceiver(null);var n=t._trackSignalingUpdatedEventCallbacks.get(e.sid);n&&(e.removeListener("updated",n),t._trackSignalingUpdatedEventCallbacks.delete(e.sid));var r=t.tracks.get(e.sid);r&&t._removeTrackPublication(r)}function f(n){var i=n.isEnabled,a=n.name,u=n.kind,l=n.sid,h=n.trackTransceiver,f={audio:r,video:o,data:s}[u],d=t.tracks.get(l);if(f&&u===h.kind){var p={log:e,name:a},m="data"===u?new f(l,h,p):new f(l,h,i,(function(e){return c.updateSubscriberTrackPriority(l,e)}),p);t._addTrack(m,d,h.id)}}}},{key:"_removeTrack",value:function(e,t){if(!this._tracks.has(t))return null;this._tracks.delete(t),{audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[e.kind].delete(t),(this._trackEventReemitters.get(t)||new Map).forEach((function(t,n){e.removeListener(n,t)}));var n=this._log;return n.info("Removed a "+d.trackClass(e)+":",t),n.debug(d.trackClass(e)+":",e),e}},{key:"_removeTrackPublication",value:function(e){if(!(e=this.tracks.get(e.trackSid)))return null;this.tracks.delete(e.trackSid),{audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[e.kind].delete(e.trackSid),(this._trackPublicationEventReemitters.get(e.trackSid)||new Map).forEach((function(t,n){e.removeListener(n,t)}));var t=this._log;return t.info("Removed a "+d.trackPublicationClass(e)+":",e.trackSid),t.debug(d.trackPublicationClass(e)+":",e),e}},{key:"toJSON",value:function(){return d.valueToJSON(this)}}]),t}(a);function v(e,t,n){var r=new Map;"disconnected"!==e.state&&(e._getTrackEvents().forEach((function(n){var o=n[0],a=n[1];r.set(o,(function(){var t=[a].concat([].slice.call(arguments));return e.emit.apply(e,i(t))})),t.on(o,r.get(o))})),e._trackEventReemitters.set(n,r))}e.exports=m})),o.register("2NhYx",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var i=o("1UpQ7"),a=function(e){function t(e,n,r,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"toString",value:function(){return"[RemoteAudioTrack #"+this._instanceId+": "+this.sid+"]"}},{key:"setPriority",value:function(e){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setPriority",this).call(this,e)}}]),t}(o("6tlBw")(i));e.exports=a})),o.register("6tlBw",(function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var a=o("72UdZ"),s=a.typeErrors,u=a.trackPriority,c=o("6YI9h").guessBrowser,l=o("4cLmM");e.exports=function(e){return function(e){function t(e,r,i,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=Object.assign({workaroundWebKitBug212780:"safari"===c()&&"object"===("undefined"==typeof document?"undefined":n(document))&&"function"==typeof document.addEventListener&&"string"==typeof document.visibilityState},a);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,a));return Object.defineProperties(s,{_isEnabled:{value:i,writable:!0},_isSwitchedOff:{value:!1,writable:!0},_priority:{value:null,writable:!0},_setPriority:{value:o},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},priority:{enumerable:!0,get:function(){return this._priority}},sid:{enumerable:!0,value:e},_workaroundWebKitBug212780:{value:a.workaroundWebKitBug212780},_workaroundWebKitBug212780Cleanup:{value:null,writable:!0}}),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"setPriority",value:function(e){var t=[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Object.values(u)));if(!t.includes(e))throw s.INVALID_VALUE("priority",t);return this._priority!==e&&(this._priority=e,this._setPriority(e)),this}},{key:"_setEnabled",value:function(e){this._isEnabled!==e&&(this._isEnabled=e,this.emit(this._isEnabled?"enabled":"disabled",this))}},{key:"_setSwitchedOff",value:function(e){this._isSwitchedOff!==e&&(this._isSwitchedOff=e,this.emit(e?"switchedOff":"switchedOn",this))}},{key:"attach",value:function(e){var n=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).call(this,e);return!0!==this.mediaStreamTrack.enabled&&(this.mediaStreamTrack.enabled=!0),this._workaroundWebKitBug212780&&(this._workaroundWebKitBug212780Cleanup=this._workaroundWebKitBug212780Cleanup||function(e){var t=e._log,n=e.kind;function r(){e._attachments.forEach((function(r){var i=e._elShims.get(r);r.paused&&i&&!i.pausedIntentionally()&&(t.info("Playing inadvertently paused <"+n+"> element"),t.debug("Element:",r),t.debug("RemoteMediaTrack:",e),r.play().then((function(){t.info("Successfully played inadvertently paused <"+n+"> element"),t.debug("Element:",r),t.debug("RemoteMediaTrack:",e)})).catch((function(i){t.warn("Error while playing inadvertently paused <"+n+"> element:",i,r,e)})))}))}return l.onVisible(2,r),function(){l.offVisible(2,r)}}(this)),n}},{key:"detach",value:function(e){var n=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"detach",this).call(this,e);return 0===this._attachments.size&&(this.mediaStreamTrack.enabled=!1,this._workaroundWebKitBug212780Cleanup&&(this._workaroundWebKitBug212780Cleanup(),this._workaroundWebKitBug212780Cleanup=null)),n}}]),t}(e)}})),o.register("4upvN",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"toString",value:function(){return"[RemoteAudioTrackPublication #"+this._instanceId+": "+this.trackSid+"]"}}]),t}(o("3wK7E"));e.exports=r})),o.register("3wK7E",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.name,e.sid,n));Object.defineProperties(r,{_signaling:{value:e},_track:{value:null,writable:!0},isSubscribed:{enumerable:!0,get:function(){return!!this._track}},isTrackEnabled:{enumerable:!0,get:function(){return e.isEnabled}},kind:{enumerable:!0,value:e.kind},publishPriority:{enumerable:!0,get:function(){return e.priority}},track:{enumerable:!0,get:function(){return this._track}}});var i=e.error,o=e.isEnabled,a=e.isSwitchedOff,s=e.priority;return e.on("updated",(function(){if(i!==e.error)return i=e.error,void r.emit("subscriptionFailed",e.error);o!==e.isEnabled&&(o=e.isEnabled,r.track&&r.track._setEnabled(e.isEnabled),r.emit(e.isEnabled?"trackEnabled":"trackDisabled")),a!==e.isSwitchedOff&&(a=e.isSwitchedOff,r.track&&(r.track._setSwitchedOff(e.isSwitchedOff),r.emit(e.isSwitchedOff?"trackSwitchedOff":"trackSwitchedOn",r.track))),s!==e.priority&&(s=e.priority,r.emit("publishPriorityChanged",s))})),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"toString",value:function(){return"[RemoteTrackPublication #"+this._instanceId+": "+this.trackSid+"]"}},{key:"_subscribed",value:function(e){!this._track&&e&&(this._track=e,this.emit("subscribed",e))}},{key:"_unsubscribe",value:function(){if(this._track){var e=this._track;this._track=null,this.emit("unsubscribed",e)}}}]),t}(o("2s9kc"));e.exports=r})),o.register("4fPoW",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("4HKtL"),i=o("72UdZ"),a=i.typeErrors,s=i.trackPriority,u=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n.id,"data",r));return Object.defineProperties(i,{_isSwitchedOff:{value:!1,writable:!0},_priority:{value:null,writable:!0},isEnabled:{enumerable:!0,value:!0},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},maxPacketLifeTime:{enumerable:!0,value:n.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:n.maxRetransmits},ordered:{enumerable:!0,value:n.ordered},priority:{enumerable:!0,get:function(){return this._priority}},reliable:{enumerable:!0,value:null===n.maxPacketLifeTime&&null===n.maxRetransmits},sid:{enumerable:!0,value:e}}),n.on("message",(function(e){i.emit("message",e,i)})),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"setPriority",value:function(e){var t=[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Object.values(s)));if(!t.includes(e))throw a.INVALID_VALUE("priority",t);return this._priority=e,this}},{key:"_setEnabled",value:function(){}},{key:"_setSwitchedOff",value:function(e){this._isSwitchedOff!==e&&(this._isSwitchedOff=e,this.emit(e?"switchedOff":"switchedOn",this))}}]),t}(r);e.exports=u})),o.register("7stCC",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"toString",value:function(){return"[RemoteDataTrackPublication #"+this._instanceId+": "+this.trackSid+"]"}}]),t}(o("3wK7E"));e.exports=r})),o.register("73AkP",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var i=function(e){function t(e,n,r,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"toString",value:function(){return"[RemoteVideoTrack #"+this._instanceId+": "+this.sid+"]"}},{key:"setPriority",value:function(e){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setPriority",this).call(this,e)}}]),t}(o("6tlBw")(o("23FoH")));e.exports=i})),o.register("1wu7O",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"toString",value:function(){return"[RemoteVideoTrackPublication #"+this._instanceId+": "+this.trackSid+"]"}}]),t}(o("3wK7E"));e.exports=r})),o.register("6Sa4g",(function(e,t){"use strict";var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=o("6xYCf").EventEmitter,a=o("72UdZ"),s=a.DEFAULT_NQ_LEVEL_LOCAL,u=a.DEFAULT_NQ_LEVEL_REMOTE,c=a.MAX_NQ_LEVEL,l=o("2S2q7").inRange,h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e=Object.assign({local:s,remote:u},e),Object.defineProperties(n,{local:{value:l(e.local,s,c)?e.local:s,writable:!0},remote:{value:l(e.remote,u,c)?e.remote:u,writable:!0}}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"update",value:function(e){var t=this;e=Object.assign({local:this.local,remote:this.remote},e),[["local",s,3],["remote",u,3]].forEach((function(r){var i=n(r,3),o=i[0],a=i[1],s=i[2];t[o]="number"==typeof e[o]&&l(e[o],a,s)?e[o]:a}))}}]),t}(i);e.exports=h})),o.register("1THoy",(function(e,t){"use strict";var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var a=o("4H6HK"),s=o("4ILYM"),u=o("35GjY"),c=o("2S2q7").valueToJSON,l=0,h=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i,o,a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),s=r.log.createLog("default",a),u=new Map;return Object.defineProperties(a,{_log:{value:s},_instanceId:{value:++l},_options:{value:r},_participants:{value:u},_signaling:{value:n},dominantSpeaker:{enumerable:!0,get:function(){return this.participants.get(n.dominantSpeakerSid)||null}},isRecording:{enumerable:!0,get:function(){return n.recording.isEnabled||!1}},localParticipant:{enumerable:!0,value:e},name:{enumerable:!0,value:n.name},participants:{enumerable:!0,value:u},sid:{enumerable:!0,value:n.sid},state:{enumerable:!0,get:function(){return n.state}},mediaRegion:{enumerable:!0,value:n.mediaRegion}}),i=a,(o=n.recording).on("updated",(function(){var e=o.isEnabled;i._log.info("Recording "+(e?"started":"stopped")),i.emit("recording"+(e?"Started":"Stopped"))})),function(e,t){var n=e._log;n.debug("Creating a new RemoteParticipant for each ParticipantSignaling in the RoomSignaling"),t.participants.forEach(d.bind(null,e)),n.debug("Setting up RemoteParticipant creation for all subsequent ParticipantSignalings that connect to the RoomSignaling"),t.on("participantConnected",d.bind(null,e)),t.on("dominantSpeakerChanged",(function(){return e.emit("dominantSpeakerChanged",e.dominantSpeaker)})),t.on("stateChanged",(function r(i,o){switch(n.info("Transitioned to state:",i),i){case"disconnected":e.participants.forEach((function(e){e._unsubscribeTracks()})),e.emit(i,e,o),e.localParticipant.tracks.forEach((function(e){e.unpublish()})),t.removeListener("stateChanged",r);break;case"reconnecting":setTimeout((function(){return e.emit("reconnecting",o)}),0);break;default:setTimeout((function(){return e.emit("reconnected")}),0)}}))}(a,n),s.info("Created a new Room:",a.name),s.debug("Initial RemoteParticipants:",Array.from(a._participants.values())),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"toString",value:function(){return"[Room #"+this._instanceId+": "+this.sid+"]"}},{key:"disconnect",value:function(){return this._log.info("Disconnecting"),this._signaling.disconnect(),this}},{key:"getStats",value:function(){var e=this;return this._signaling.getStats().then((function(t){return Array.from(t).map((function(t){var r=n(t,2),i=r[0],o=r[1];return new u(i,Object.assign({},o,{localAudioTrackStats:f(e,o.localAudioTrackStats),localVideoTrackStats:f(e,o.localVideoTrackStats)}))}))}))}},{key:"toJSON",value:function(){return c(this)}}]),t}(a);function f(e,t){var n=e.localParticipant._signaling;return t.reduce((function(e,t){var r=n.tracks.get(t.trackId),i=n.getSender(r);return i?[Object.assign({},t,{trackId:i.id})].concat(e):e}),[])}function d(e,t){var r=e._log,o=new s(t,{log:r});r.info("A new RemoteParticipant connected:",o),e._participants.set(o.sid,o),e.emit("participantConnected",o);var a=[["reconnected","participantReconnected"],["reconnecting","participantReconnecting"],"trackDimensionsChanged","trackDisabled","trackEnabled","trackMessage","trackPublished","trackPublishPriorityChanged","trackStarted","trackSubscribed","trackSubscriptionFailed","trackSwitchedOff","trackSwitchedOn","trackUnpublished","trackUnsubscribed"].map((function(t){var r=Array.isArray(t)?t:[t,t],a=n(r,2),s=a[0],u=a[1];function c(){var t=[].slice.call(arguments);t.unshift(u),t.push(o),e.emit.apply(e,i(t))}return o.on(s,c),[s,c]}));o.once("disconnected",(function(){var t=e.dominantSpeaker;r.info("RemoteParticipant disconnected:",o),e._participants.delete(o.sid),a.forEach((function(e){o.removeListener(e[0],e[1])})),e.emit("participantDisconnected",o),o===t&&e.emit("dominantSpeakerChanged",e.dominantSpeaker)}))}e.exports=h})),o.register("4ILYM",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var i=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r._handleTrackSignalingEvents(),r.once("disconnected",r._unsubscribeTracks.bind(r)),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"toString",value:function(){return"[RemoteParticipant #"+this._instanceId+(this.sid?": "+this.sid:"")+"]"}},{key:"_addTrack",value:function(e,n,i){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_addTrack",this).call(this,e,i)?(n._subscribed(e),this.emit("trackSubscribed",e,n),e):null}},{key:"_addTrackPublication",value:function(e){var n=r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_addTrackPublication",this).call(this,e);return n?(this.emit("trackPublished",n),n):null}},{key:"_getTrackPublicationEvents",value:function(){return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_getTrackPublicationEvents",this).call(this)),[["subscriptionFailed","trackSubscriptionFailed"],["trackDisabled","trackDisabled"],["trackEnabled","trackEnabled"],["publishPriorityChanged","trackPublishPriorityChanged"],["trackSwitchedOff","trackSwitchedOff"],["trackSwitchedOn","trackSwitchedOn"]])}},{key:"_unsubscribeTracks",value:function(){var e=this;this.tracks.forEach((function(t){if(t.isSubscribed){var n=t.track;t._unsubscribe(),e.emit("trackUnsubscribed",n,t)}}))}},{key:"_removeTrack",value:function(e,n,i){var o=this._tracks.get(i);return o?(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_removeTrack",this).call(this,o,i),n._unsubscribe(),this.emit("trackUnsubscribed",o,n),o):null}},{key:"_removeTrackPublication",value:function(e){var n=r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_removeTrackPublication",this).call(this,e);return n?(this.emit("trackUnpublished",n),n):null}}]),t}(o("4op8I"));e.exports=i})),o.register("35GjY",(function(e,t){"use strict";var n=o("4LEaR"),r=o("6JSWC"),i=o("2b80o"),a=o("2TWgy");e.exports=function e(t,o,s){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"!=typeof t)throw new Error("RTCPeerConnection id must be a string");Object.defineProperties(this,{peerConnectionId:{value:t,enumerable:!0},localAudioTrackStats:{value:o.localAudioTrackStats.map((function(e){return new n(e.trackId,e,s)})),enumerable:!0},localVideoTrackStats:{value:o.localVideoTrackStats.map((function(e){return new r(e.trackId,e,s)})),enumerable:!0},remoteAudioTrackStats:{value:o.remoteAudioTrackStats.map((function(e){return new i(e.trackId,e)})),enumerable:!0},remoteVideoTrackStats:{value:o.remoteVideoTrackStats.map((function(e){return new a(e.trackId,e)})),enumerable:!0}})}})),o.register("4LEaR",(function(e,t){"use strict";var n=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));return Object.defineProperties(i,{audioLevel:{value:"number"==typeof n.audioInputLevel?n.audioInputLevel:null,enumerable:!0},jitter:{value:"number"==typeof n.jitter?n.jitter:null,enumerable:!0}}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o("4vu4g"));e.exports=n})),o.register("4vu4g",(function(e,t){"use strict";var n=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return Object.defineProperties(i,{bytesSent:{value:"number"==typeof n.bytesSent?n.bytesSent:r?0:null,enumerable:!0},packetsSent:{value:"number"==typeof n.packetsSent?n.packetsSent:r?0:null,enumerable:!0},roundTripTime:{value:"number"==typeof n.roundTripTime?n.roundTripTime:r?0:null,enumerable:!0}}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o("7ETi7"));e.exports=n})),o.register("7ETi7",(function(e,t){"use strict";e.exports=function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"!=typeof t)throw new Error("Track id must be a string");Object.defineProperties(this,{trackId:{value:t,enumerable:!0},trackSid:{value:n.trackSid,enumerable:!0},timestamp:{value:n.timestamp,enumerable:!0},ssrc:{value:n.ssrc,enumerable:!0},packetsLost:{value:"number"==typeof n.packetsLost?n.packetsLost:null,enumerable:!0},codec:{value:"string"==typeof n.codecName?n.codecName:null,enumerable:!0}})}})),o.register("6JSWC",(function(e,t){"use strict";var n=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r)),o=null;"number"==typeof n.frameWidthInput&&"number"==typeof n.frameHeightInput&&(o={},Object.defineProperties(o,{width:{value:n.frameWidthInput,enumerable:!0},height:{value:n.frameHeightInput,enumerable:!0}}));var a=null;return"number"==typeof n.frameWidthSent&&"number"==typeof n.frameHeightSent&&(a={},Object.defineProperties(a,{width:{value:n.frameWidthSent,enumerable:!0},height:{value:n.frameHeightSent,enumerable:!0}})),Object.defineProperties(i,{captureDimensions:{value:o,enumerable:!0},dimensions:{value:a,enumerable:!0},captureFrameRate:{value:"number"==typeof n.frameRateInput?n.frameRateInput:null,enumerable:!0},frameRate:{value:"number"==typeof n.frameRateSent?n.frameRateSent:null,enumerable:!0}}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o("4vu4g"));e.exports=n})),o.register("2b80o",(function(e,t){"use strict";var n=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return Object.defineProperties(r,{audioLevel:{value:"number"==typeof n.audioOutputLevel?n.audioOutputLevel:null,enumerable:!0},jitter:{value:"number"==typeof n.jitter?n.jitter:null,enumerable:!0}}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o("1OZ7V"));e.exports=n})),o.register("1OZ7V",(function(e,t){"use strict";var n=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return Object.defineProperties(r,{bytesReceived:{value:"number"==typeof n.bytesReceived?n.bytesReceived:null,enumerable:!0},packetsReceived:{value:"number"==typeof n.packetsReceived?n.packetsReceived:null,enumerable:!0}}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o("7ETi7"));e.exports=n})),o.register("2TWgy",(function(e,t){"use strict";var n=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=null;return"number"==typeof n.frameWidthReceived&&"number"==typeof n.frameHeightReceived&&(i={},Object.defineProperties(i,{width:{value:n.frameWidthReceived,enumerable:!0},height:{value:n.frameHeightReceived,enumerable:!0}})),Object.defineProperties(r,{dimensions:{value:i,enumerable:!0},frameRate:{value:"number"==typeof n.frameRateReceived?n.frameRateReceived:null,enumerable:!0}}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o("1OZ7V"));e.exports=n})),o.register("4jydZ",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("65OdF"),i=o("7j1bC"),a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Object.assign({createCancelableRoomSignalingPromise:r},n);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object.defineProperties(i,{_createCancelableRoomSignalingPromise:{value:n.createCancelableRoomSignalingPromise},_options:{value:n},_wsServer:{value:e}}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"_connect",value:function(e,t,n,r,i){return i=Object.assign({},this._options,i),this._createCancelableRoomSignalingPromise.bind(null,t,this._wsServer,e,n,r,i)}},{key:"createLocalParticipantSignaling",value:function(e,t){return new i(e,t)}}]),t}(o("4oiTN"));e.exports=a})),o.register("65OdF",(function(e,t){"use strict";var n=o("5NTmS"),r=o("2FlGg"),i=o("3Do6d"),a=o("49dgk"),s=o("6D3Hv"),u=s.SignalingConnectionDisconnectedError,c=s.SignalingIncomingMessageInvalidError,l=o("2S2q7").flatMap;e.exports=function(e,t,o,s,h,f){var d=f=Object.assign({PeerConnectionManager:r,RoomV2:i,Transport:a},f),p=d.PeerConnectionManager,m=d.RoomV2,v=d.Transport,g=d.iceServers,y=d.log,b=new p(s,h,f),w=l(o.tracks,(function(e){return[e.trackTransceiver]}));b.setTrackSenders(w);var _=new Error("Canceled"),k=void 0,S=new n((function(n,r,i){var a=f,s=a.InsightsPublisher,l=a.NullInsightsPublisher,h=a.automaticSubscription,d=a.bandwidthProfile,p=a.dominantSpeaker,w=a.environment,S=a.eventObserver,E=a.logLevel,M=a.name,T=a.networkMonitor,C=a.networkQuality,I=a.insights,x=a.realm,A=a.sdpSemantics,P=a.wsServerInsights,O=Object.assign({automaticSubscription:h,dominantSpeaker:p,environment:w,eventObserver:S,logLevel:E,networkMonitor:T,networkQuality:C,iceServers:g,insights:I,onIced:function(e){return i()?(r(_),Promise.reject(_)):(y.debug("Got ICE servers:",e),f.iceServers=e,b.setConfiguration(f),b.createAndOffer().then((function(){if(i())throw r(_),_;y.debug("createAndOffer() succeeded."),b.dequeue("description")})).catch((function(e){throw y.error("createAndOffer() failed:",e),r(e),e})))},realm:x,sdpSemantics:A},"string"==typeof P?{wsServerInsights:P}:{},s?{InsightsPublisher:s}:{},l?{NullInsightsPublisher:l}:{},d?{bandwidthProfile:d}:{});(k=new v(M,e,o,b,t,O)).once("connected",(function(e){if(y.debug("Transport connected:",e),i())r(_);else if(e.participant){var t=e.options.signaling_region;o.setSignalingRegion(t),n(new m(o,e,k,b,f))}else r(new c)})),k.once("stateChanged",(function(e,t){"disconnected"===e?(k=null,r(t||new u)):y.debug("Transport state changed:",e)}))}),(function(){k&&(k.disconnect(),k=null)}));return S.catch((function(){k&&(k.disconnect(),k=null),b.close()})),S}})),o.register("2FlGg",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=o("6YI9h").guessBrowser,a=o("6FDe6"),s=o("1Cusm"),u=o("1b3aJ"),c=o("2S2q7"),l=o("6D3Hv").MediaConnectionError,h="firefox"===i(),f=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),u=(r=Object.assign({audioContextFactory:h?o("42Xan"):null,PeerConnectionV2:a},r)).audioContextFactory?r.audioContextFactory.getOrCreate(i):null,l=u?{offerToReceiveVideo:!0}:{offerToReceiveAudio:!0,offerToReceiveVideo:!0};return Object.defineProperties(i,{_audioContextFactory:{value:r.audioContextFactory},_closedPeerConnectionIds:{value:new Set},_configuration:{writable:!0,value:null},_configurationDeferred:{writable:!0,value:c.defer()},_connectionState:{value:"new",writable:!0},_dummyAudioTrackSender:{value:u?new s(d(u)):null},_encodingParameters:{value:e},_iceConnectionState:{writable:!0,value:"new"},_dataTrackSenders:{writable:!0,value:new Set},_lastConnectionState:{value:"new",writable:!0},_lastIceConnectionState:{writable:!0,value:"new"},_mediaTrackSenders:{writable:!0,value:new Set},_offerOptions:{value:l},_peerConnections:{value:new Map},_preferredCodecs:{value:n},_sessionTimeout:{value:null,writable:!0},_PeerConnectionV2:{value:r.PeerConnectionV2}}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"_closeAbsentPeerConnections",value:function(e){var t=new Set(e.map((function(e){return e.id})));return this._peerConnections.forEach((function(e){t.has(e.id)||e._close()})),this}},{key:"_getConfiguration",value:function(){return this._configurationDeferred.promise}},{key:"_getOrCreate",value:function(e,t){var n=this,r=this,i=this._peerConnections.get(e);if(!i){var o=this._PeerConnectionV2,a=Object.assign({dummyAudioMediaStreamTrack:this._dummyAudioTrackSender?this._dummyAudioTrackSender.track:null,offerOptions:this._offerOptions},this._sessionTimeout?{sessionTimeout:this._sessionTimeout}:{},t);try{i=new o(e,this._encodingParameters,this._preferredCodecs,a)}catch(e){throw new l}this._peerConnections.set(i.id,i),i.on("candidates",this.queue.bind(this,"candidates")),i.on("description",this.queue.bind(this,"description")),i.on("trackAdded",this.queue.bind(this,"trackAdded")),i.on("stateChanged",(function e(t){"closed"===t&&(i.removeListener("stateChanged",e),r._peerConnections.delete(i.id),r._closedPeerConnectionIds.add(i.id),_(r),w(r))})),i.on("connectionStateChanged",(function(){return _(n)})),i.on("iceConnectionStateChanged",(function(){return w(n)})),this._dataTrackSenders.forEach(i.addDataTrackSender,i),this._mediaTrackSenders.forEach(i.addMediaTrackSender,i),w(this)}return i}},{key:"close",value:function(){return this._peerConnections.forEach((function(e){e.close()})),this._dummyAudioTrackSender&&this._dummyAudioTrackSender.stop(),this._audioContextFactory&&this._audioContextFactory.release(this),w(this),this}},{key:"createAndOffer",value:function(){var e=this;return this._getConfiguration().then((function(t){var n=void 0;do{n=c.makeUUID()}while(e._peerConnections.has(n));return e._getOrCreate(n,t)})).then((function(e){return e.offer()})).then((function(){return e}))}},{key:"getTrackReceivers",value:function(){return c.flatMap(this._peerConnections,(function(e){return e.getTrackReceivers()}))}},{key:"getStates",value:function(){var e=[];return this._peerConnections.forEach((function(t){var n=t.getState();n&&e.push(n)})),e}},{key:"setConfiguration",value:function(e){return this._configuration&&(this._configurationDeferred=c.defer(),this._peerConnections.forEach((function(t){t.setConfiguration(e)}))),this._configuration=e,this._configurationDeferred.resolve(e),this}},{key:"setIceReconnectTimeout",value:function(e){return null===this._sessionTimeout&&(this._peerConnections.forEach((function(t){t.setIceReconnectTimeout(e)})),this._sessionTimeout=e),this}},{key:"setTrackSenders",value:function(e){var t=new Set(e.filter((function(e){return"data"===e.kind}))),n=new Set(e.filter((function(e){return e&&("audio"===e.kind||"video"===e.kind)}))),r=function(e,t,n){return{data:p(e,t),media:m(e,n)}}(this,t,n);return this._dataTrackSenders=t,this._mediaTrackSenders=n,function(e,t){(t.data.add.size||t.data.remove.size||t.media.add.size||t.media.remove.size)&&e._peerConnections.forEach((function(e){t.data.remove.forEach(e.removeDataTrackSender,e),t.media.remove.forEach(e.removeMediaTrackSender,e),t.data.add.forEach(e.addDataTrackSender,e),t.media.add.forEach(e.addMediaTrackSender,e),(t.media.add.size||t.media.remove.size||t.data.add.size&&!e.isApplicationSectionNegotiated)&&e.offer()}))}(this,r),this}},{key:"update",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n&&this._closeAbsentPeerConnections(e),this._getConfiguration().then((function(n){return Promise.all(e.map((function(e){return t._closedPeerConnectionIds.has(e.id)?null:t._getOrCreate(e.id,n).update(e)})))})).then((function(){return t}))}},{key:"getStats",value:function(){var e=Array.from(this._peerConnections.values());return Promise.all(e.map((function(e){return e.getStats().then((function(t){return[e.id,t]}))}))).then((function(e){return new Map(e)}))}},{key:"connectionState",get:function(){return this._connectionState}},{key:"iceConnectionState",get:function(){return this._iceConnectionState}}]),t}(u);function d(e){return e.createMediaStreamDestination().stream.getAudioTracks()[0]}function p(e,t){return{add:c.difference(t,e._dataTrackSenders),remove:c.difference(e._dataTrackSenders,t)}}function m(e,t){return{add:c.difference(t,e._mediaTrackSenders),remove:c.difference(e._mediaTrackSenders,t)}}var v={new:0,checking:1,connecting:2,connected:3,completed:4,disconnected:-1,failed:-2,closed:-3},g=void 0;function y(){return Object.keys(v).reduce((function(e,t){return Object.assign(e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},v[t],t))}),{})}function b(e){return e.length?(g=g||y(),e.reduce((function(e,t){return g[Math.max(v[e],v[t])]}))):"new"}function w(e){e._lastIceConnectionState=e.iceConnectionState,e._iceConnectionState=b([].concat(r(e._peerConnections.values())).map((function(e){return e.iceConnectionState}))),e.iceConnectionState!==e._lastIceConnectionState&&e.emit("iceConnectionStateChanged")}function _(e){e._lastConnectionState=e.connectionState,e._connectionState=b([].concat(r(e._peerConnections.values())).map((function(e){return e.connectionState}))),e.connectionState!==e._lastConnectionState&&e.emit("connectionStateChanged")}e.exports=f})),o.register("6FDe6",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("2ZZtP"),i=o("3bRT0"),a=i.MediaStream,s=i.RTCIceCandidate,u=i.RTCPeerConnection,c=i.RTCSessionDescription,l=i.getStats,h=o("6YI9h").guessBrowser,f=o("4w4ZI").getSdpFormat,d=o("72UdZ"),p=d.DEFAULT_ICE_GATHERING_TIMEOUT_MS,m=d.DEFAULT_LOG_LEVEL,v=d.DEFAULT_SESSION_TIMEOUT_SEC,g=d.iceRestartBackoffConfig,y=o("60VD0"),b=y.createCodecMapForMediaSection,w=y.disableRtx,_=y.enableDtxForOpus,k=y.getMediaSections,S=y.removeSSRCAttributes,E=y.revertSimulcastForNonVP8MediaSections,M=y.setBitrateParameters,T=y.setCodecPreferences,C=y.setSimulcast,I=y.unifiedPlanAddOrRewriteNewTrackIds,x=y.unifiedPlanAddOrRewriteTrackIds,A=y.unifiedPlanFilterLocalCodecs,P=o("5WF7N"),O=o("6D3Hv"),R=O.MediaClientLocalDescFailedError,D=O.MediaClientRemoteDescFailedError,N=o("2S2q7"),L=N.buildLogLevels,j=N.isChromeScreenShareTrack,B=N.oncePerTick,F=o("4gLFr"),U=o("5njfX"),q=o("2suVg"),z=o("1AybR"),V=o("56JJ3"),W=o("483rj"),H=o("01c5F"),K=o("5nLUc"),G=o("1Q8kx"),Y=o("79cTh"),Q=h(),J="chrome"===Q,Z="firefox"===Q,X="safari"===Q,$="undefined"!=typeof RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.getParameters&&"function"==typeof RTCRtpSender.prototype.setParameters,ee=0,te={open:["closed","updating"],updating:["closed","open"],closed:[]},ne=function(e){function t(e,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"open",te)),h=ae(o=Object.assign({enableDscp:!1,dummyAudioMediaStreamTrack:null,isChromeScreenShareTrack:j,iceServers:[],isRTCRtpSenderParamsSupported:$,logLevel:m,offerOptions:{},revertSimulcastForNonVP8MediaSections:E,sessionTimeout:1e3*v,setBitrateParameters:M,setCodecPreferences:T,setSimulcast:C,Backoff:r,IceConnectionMonitor:U,MediaStream:a,RTCIceCandidate:s,RTCPeerConnection:u,RTCSessionDescription:c,Timeout:P},o)),d=f(h.sdpSemantics),y="unified"===d,b=y?null:new o.MediaStream,w=L(o.logLevel),_=o.RTCPeerConnection;!0===o.enableDscp&&(o.chromeSpecificConstraints=o.chromeSpecificConstraints||{},o.chromeSpecificConstraints.optional=o.chromeSpecificConstraints.optional||[],o.chromeSpecificConstraints.optional.push({googDscp:!0}));var k=o.log?o.log.createLog("signaling",l):new W("webrtc",l,w),S=new _(h,o.chromeSpecificConstraints);o.dummyAudioMediaStreamTrack&&S.addTrack(o.dummyAudioMediaStreamTrack,b||new o.MediaStream),Object.defineProperties(l,{_appliedTrackIdsToAttributes:{value:new Map,writable:!0},_dataChannels:{value:new Map},_dataTrackReceivers:{value:new Set},_descriptionRevision:{writable:!0,value:0},_didGenerateLocalCandidates:{writable:!0,value:!1},_enableDscp:{value:o.enableDscp},_encodingParameters:{value:n},_isChromeScreenShareTrack:{value:o.isChromeScreenShareTrack},_iceGatheringFailed:{value:!1,writable:!0},_iceGatheringTimeout:{value:new o.Timeout((function(){return l._handleIceGatheringTimeout()}),p,!1)},_iceRestartBackoff:{value:o.Backoff.exponential(g)},_instanceId:{value:++ee},_isIceConnectionInactive:{writable:!0,value:!1},_isIceLite:{writable:!0,value:!1},_isIceRestartBackoffInProgress:{writable:!0,value:!1},_isRestartingIce:{writable:!0,value:!1},_isUnifiedPlan:{value:y},_isRTCRtpSenderParamsSupported:{value:o.isRTCRtpSenderParamsSupported},_lastIceConnectionState:{writable:!0,value:null},_lastStableDescriptionRevision:{writable:!0,value:0},_localCandidates:{writable:!0,value:[]},_localCodecs:{value:new Set},_localCandidatesRevision:{writable:!0,value:1},_localDescriptionWithoutSimulcast:{writable:!0,value:null},_localDescription:{writable:!0,value:null},_localMediaStream:{value:b},_localUfrag:{writable:!0,value:null},_log:{value:k},_remoteCodecMaps:{value:new Map},_rtpSenders:{value:new Map},_iceConnectionMonitor:{value:new o.IceConnectionMonitor(S)},_mediaTrackReceivers:{value:new Set},_needsAnswer:{writable:!0,value:!1},_negotiationRole:{writable:!0,value:null},_offerOptions:{writable:!0,value:o.offerOptions},_peerConnection:{value:S},_preferredAudioCodecs:{value:i.audio},_preferredVideoCodecs:{value:i.video},_shouldApplyDtx:{value:i.audio.every((function(e){return"opus"!==e.codec}))||i.audio.some((function(e){var t=e.codec,n=e.dtx;return"opus"===t&&n}))},_shouldApplySimulcast:{value:(J||X)&&i.video.some((function(e){return"vp8"===e.codec.toLowerCase()&&e.simulcast}))},_queuedDescription:{writable:!0,value:null},_iceReconnectTimeout:{value:new o.Timeout((function(){k.debug("ICE reconnect timed out"),l.close()}),o.sessionTimeout,!1)},_recycledTransceivers:{value:{audio:[],video:[]}},_replaceTrackPromises:{value:new Map},_remoteCandidates:{writable:!0,value:new F},_sdpFormat:{value:d},_setBitrateParameters:{value:o.setBitrateParameters},_setCodecPreferences:{value:o.setCodecPreferences},_setSimulcast:{value:o.setSimulcast},_revertSimulcastForNonVP8MediaSections:{value:o.revertSimulcastForNonVP8MediaSections},_RTCIceCandidate:{value:o.RTCIceCandidate},_RTCPeerConnection:{value:o.RTCPeerConnection},_RTCSessionDescription:{value:o.RTCSessionDescription},_shouldOffer:{writable:!0,value:!1},_shouldRestartIce:{writable:!0,value:!1},_trackIdsToAttributes:{value:new Map,writable:!0},_trackMatcher:{writable:!0,value:null},id:{enumerable:!0,value:e}}),n.on("changed",B((function(){l._isRTCRtpSenderParamsSupported?l._needsAnswer||ce(l):l.offer()}))),S.addEventListener("connectionstatechange",l._handleConnectionStateChange.bind(l)),S.addEventListener("datachannel",l._handleDataChannelEvent.bind(l)),S.addEventListener("icecandidate",l._handleIceCandidateEvent.bind(l)),S.addEventListener("iceconnectionstatechange",l._handleIceConnectionStateChange.bind(l)),S.addEventListener("icegatheringstatechange",l._handleIceGatheringStateChange.bind(l)),S.addEventListener("signalingstatechange",l._handleSignalingStateChange.bind(l)),S.addEventListener("track",l._handleTrackEvent.bind(l)),l._iceRestartBackoff.on("ready",(function(){return l._initiateIceRestart()}));var I=l;return l.on("stateChanged",(function e(t){"closed"===t&&(I.removeListener("stateChanged",e),I._dataChannels.forEach((function(e,t){I.removeDataTrackSender(t)})))})),l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"toString",value:function(){return"[PeerConnectionV2 #"+this._instanceId+": "+this.id+"]"}},{key:"_addIceCandidate",value:function(e){var t=this;return Promise.resolve().then((function(){return e=new t._RTCIceCandidate(e),t._peerConnection.addIceCandidate(e)})).catch((function(n){t._log.warn("Failed to add RTCIceCandidate "+(e?'"'+e.candidate+'"':"null")+": "+n.message)}))}},{key:"_addIceCandidates",value:function(e){return Promise.all(e.map(this._addIceCandidate,this)).then((function(){}))}},{key:"_addOrUpdateTransceiver",value:function(e){var t=this,n=function(e,t){var n={audio:e._preferredAudioCodecs.map((function(e){return e.codec.toLowerCase()})),video:e._preferredVideoCodecs.map((function(e){return e.codec.toLowerCase()}))}[t],r=e._recycledTransceivers[t],i=n.find((function(t){return e._localCodecs.has(t)}));if(!i)return r.shift();var o=r.find((function(t){var n=e._remoteCodecMaps.get(t.mid);return n&&n.has(i)}));o&&r.splice(r.indexOf(o),1);return o}(this,e.kind);if(n&&n.sender){var r=n.sender.track?n.sender.track.id:null;return r&&this._log.warn("Reusing transceiver: "+n.mid+"] "+r+" => "+e.id),this._replaceTrackPromises.set(n,n.sender.replaceTrack(e).then((function(){n.direction="sendrecv"}),(function(){})).finally((function(){t._replaceTrackPromises.delete(n)}))),n}return this._peerConnection.addTransceiver(e)}},{key:"_checkIceBox",value:function(e){var t=oe(e);if(!t)return Promise.resolve();var n=this._remoteCandidates.setUfrag(t);return this._addIceCandidates(n)}},{key:"_answer",value:function(e){var t=this;return Promise.resolve().then((function(){return t._negotiationRole||(t._negotiationRole="answerer"),t._setRemoteDescription(e)})).catch((function(){throw new D})).then((function(){return t._peerConnection.createAnswer()})).then((function(n){n=Z?new t._RTCSessionDescription({sdp:w(n.sdp),type:n.type}):Y(n);var r=S(n.sdp,["mslabel","label"]);if(t._shouldApplySimulcast){var i=r;r=t._setSimulcast(i,t._sdpFormat,t._trackIdsToAttributes),r=t._revertSimulcastForNonVP8MediaSections(r,i,e.sdp)}return r=r.replace(/42e015/g,"42e01f"),t._setLocalDescription({type:n.type,sdp:r})})).then((function(){return t._checkIceBox(e)})).then((function(){return t._queuedDescription&&t._updateDescription(t._queuedDescription)})).then((function(){return t._queuedDescription=null,t._maybeReoffer(t._peerConnection.localDescription)})).catch((function(e){throw e instanceof D?e:new R}))}},{key:"_close",value:function(){return this._iceConnectionMonitor.stop(),"closed"!==this._peerConnection.signalingState&&(this._peerConnection.close(),this.preempt("closed"),!0)}},{key:"_handleConnectionStateChange",value:function(){this.emit("connectionStateChanged")}},{key:"_handleDataChannelEvent",value:function(e){var t=this,n=e.channel,r=new q(n);this._dataTrackReceivers.add(r),n.addEventListener("close",(function(){t._dataTrackReceivers.delete(r)})),this.emit("trackAdded",r)}},{key:"_handleGlare",value:function(e){var t=this;return this._log.debug("Glare detected; rolling back"),this._isRestartingIce&&(this._log.debug("An ICE restart was in progress; we'll need to restart ICE again after rolling back"),this._isRestartingIce=!1,this._shouldRestartIce=!0),Promise.resolve().then((function(){return t._trackIdsToAttributes=new Map(t._appliedTrackIdsToAttributes),t._setLocalDescription({type:"rollback"})})).then((function(){return t._needsAnswer=!1,t._answer(e)})).then((function(e){return e?Promise.resolve():t._offer()}))}},{key:"_handleIceCandidateEvent",value:function(e){e.candidate&&(this._log.debug("Clearing ICE gathering timeout"),this._didGenerateLocalCandidates=!0,this._iceGatheringTimeout.clear(),this._localCandidates.push(e.candidate));var t={ice:{candidates:this._isIceLite?[]:this._localCandidates.slice(),ufrag:this._localUfrag},id:this.id};e.candidate||(t.ice.complete=!0),this._isIceLite&&e.candidate||(t.ice.revision=this._localCandidatesRevision++,this.emit("candidates",t))}},{key:"_handleIceConnectionStateChange",value:function(){var e=this,t=this._peerConnection.iceConnectionState,n=["connected","completed"].includes(t),r=this._log;r.debug('ICE connection state is "'+t+'"'),n&&(this._iceReconnectTimeout.clear(),this._iceRestartBackoff.reset()),"failed"===this._lastIceConnectionState||"failed"!==t||this._shouldRestartIce||this._isRestartingIce?["disconnected","failed"].includes(this._lastIceConnectionState)&&n&&r.debug("ICE reconnected"):(r.warn("ICE failed"),this._initiateIceRestartBackoff()),"connected"===t?(this._isIceConnectionInactive=!1,this._iceConnectionMonitor.start((function(){e._iceConnectionMonitor.stop(),e._shouldRestartIce||e._isRestartingIce||(r.warn("ICE Connection Monitor detected inactivity"),e._isIceConnectionInactive=!0,e._initiateIceRestartBackoff(),e.emit("iceConnectionStateChanged"),e.emit("connectionStateChanged"))}))):["disconnected","completed"].includes(t)||(this._iceConnectionMonitor.stop(),this._isIceConnectionInactive=!1),this._lastIceConnectionState=t,this.emit("iceConnectionStateChanged")}},{key:"_handleIceGatheringTimeout",value:function(){this._log.warn("ICE failed to gather any local candidates"),this._iceGatheringFailed=!0,this._initiateIceRestartBackoff(),this.emit("iceConnectionStateChanged"),this.emit("connectionStateChanged")}},{key:"_handleIceGatheringStateChange",value:function(){var e=this._peerConnection.iceGatheringState,t=this._log;t.debug('ICE gathering state is "'+e+'"');var n=this._iceGatheringTimeout,r=n.delay,i=n.isSet;"gathering"!==e||this._didGenerateLocalCandidates||i||(t.debug("Starting ICE gathering timeout: "+r),this._iceGatheringFailed=!1,this._iceGatheringTimeout.start())}},{key:"_handleSignalingStateChange",value:function(){"stable"===this._peerConnection.signalingState&&(this._appliedTrackIdsToAttributes=new Map(this._trackIdsToAttributes))}},{key:"_handleTrackEvent",value:function(e){var t=this,n=this._peerConnection.remoteDescription?this._peerConnection.remoteDescription.sdp:null;this._trackMatcher||(this._trackMatcher=e.transceiver&&e.transceiver.mid?new G:X||this._isUnifiedPlan?new K:new H),this._trackMatcher.update(n);var r=e.track,i=this._trackMatcher.match(e)||r.id,o=new z(i,r);this._mediaTrackReceivers.forEach((function(e){e.track.id===o.track.id&&t._mediaTrackReceivers.delete(e)})),this._mediaTrackReceivers.add(o),r.addEventListener("ended",(function(){return t._mediaTrackReceivers.delete(o)})),this.emit("trackAdded",o)}},{key:"_initiateIceRestart",value:function(){if("closed"!==this._peerConnection.signalingState){var e=this._log;e.warn("Attempting to restart ICE"),this._didGenerateLocalCandidates=!1,this._isIceRestartBackoffInProgress=!1,this._shouldRestartIce=!0;var t=this._iceReconnectTimeout,n=t.delay;t.isSet||(e.debug("Starting ICE reconnect timeout: "+n),this._iceReconnectTimeout.start()),this.offer()}}},{key:"_initiateIceRestartBackoff",value:function(){"closed"===this._peerConnection.signalingState||this._isIceRestartBackoffInProgress||(this._log.warn("An ICE restart has been scheduled"),this._isIceRestartBackoffInProgress=!0,this._iceRestartBackoff.backoff())}},{key:"_maybeReoffer",value:function(e){var t=this._shouldOffer;if(e&&e.sdp){if(this._isUnifiedPlan){var n=this._peerConnection.getSenders().filter((function(e){return e.track}));t=["audio","video"].reduce((function(t,r){var i=k(e.sdp,r,"(sendrecv|sendonly)"),o=n.filter(se.bind(null,r));return t||i.length<o.length}),t)}var r=this._dataChannels.size>0,i=k(e.sdp,"application").length>0;t=t||r&&!i}return(t?this._offer():Promise.resolve()).then((function(){return t}))}},{key:"_offer",value:function(){var e=this,t=Object.assign({},this._offerOptions);return this._needsAnswer=!0,this._shouldRestartIce&&(this._shouldRestartIce=!1,this._isRestartingIce=!0,t.iceRestart=!0),Promise.all(this._replaceTrackPromises.values()).then((function(){return e._peerConnection.createOffer(t)})).catch((function(){throw new R})).then((function(t){t=Z?new e._RTCSessionDescription({sdp:w(t.sdp),type:t.type}):Y(t);var n=S(t.sdp,["mslabel","label"]);n=e._isUnifiedPlan&&e._peerConnection.remoteDescription?A(n,e._peerConnection.remoteDescription.sdp):n;var r=e._setCodecPreferences(n,e._preferredAudioCodecs,e._preferredVideoCodecs);return e._shouldOffer=!1,e._negotiationRole||(e._negotiationRole="offerer"),e._shouldApplySimulcast&&(e._localDescriptionWithoutSimulcast={type:"offer",sdp:r},r=e._setSimulcast(r,e._sdpFormat,e._trackIdsToAttributes)),e._setLocalDescription({type:"offer",sdp:r})}))}},{key:"_getMediaTrackSenderId",value:function(e){var t=Array.from(this._rtpSenders.keys()).find((function(t){return t.track.id===e}));return t?t.id:e}},{key:"_addOrRewriteLocalTrackIds",value:function(e){var t=this,n=this._peerConnection.getTransceivers().filter((function(e){var t=e.sender;return!e.stopped&&t&&t.track})),r=n.filter((function(e){return e.mid})),i=new Map(r.map((function(e){var n=e.mid,r=e.sender;return[n,t._getMediaTrackSenderId(r.track.id)]}))),o=x(e.sdp,i),a=n.filter((function(e){return!e.mid})),s=new Map(["audio","video"].map((function(e){return[e,a.filter((function(t){return t.sender.track.kind===e})).map((function(e){var n=e.sender;return t._getMediaTrackSenderId(n.track.id)}))]}))),u=I(o,i,s);return new this._RTCSessionDescription({sdp:u,type:e.type})}},{key:"_rollbackAndApplyOffer",value:function(e){var t=this;return this._setLocalDescription({type:"rollback"}).then((function(){return t._setLocalDescription(e)}))}},{key:"_setLocalDescription",value:function(e){var t=this;return"rollback"!==e.type&&this._shouldApplyDtx&&(e=new this._RTCSessionDescription({sdp:_(e.sdp),type:e.type})),this._peerConnection.setLocalDescription(e).catch((function(n){throw t._log.warn('Calling setLocalDescription with an RTCSessionDescription of type "'+e.type+'" failed with the error "'+n.message+'".'),e.sdp&&t._log.warn("The SDP was "+e.sdp),new R})).then((function(){"rollback"!==e.type&&(t._localDescription=t._isUnifiedPlan?t._addOrRewriteLocalTrackIds(e):e,t._shouldApplyDtx&&(t._localDescription=new t._RTCSessionDescription({sdp:_(t._localDescription.sdp,[]),type:t._localDescription.type})),t._localCandidates=[],"offer"===e.type?t._descriptionRevision++:"answer"===e.type&&(t._lastStableDescriptionRevision=t._descriptionRevision,ue(t)),t._localUfrag=oe(e),t.emit("description",t.getState()))}))}},{key:"_setRemoteDescription",value:function(e){var t=this;return e.sdp&&(this._isRTCRtpSenderParamsSupported||(e.sdp=this._setBitrateParameters(e.sdp,Z?"TIAS":"AS",this._encodingParameters.maxAudioBitrate,this._encodingParameters.maxVideoBitrate)),e.sdp=this._setCodecPreferences(e.sdp,this._preferredAudioCodecs,this._preferredVideoCodecs),this._shouldApplyDtx?e.sdp=_(e.sdp):e.sdp=_(e.sdp,[]),Z&&(e.sdp=e.sdp.replace(/a=msid:[^ ]+ /g,"a=msid:- ")),this._peerConnection.remoteDescription||(this._isIceLite=/a=ice-lite/.test(e.sdp))),e=new this._RTCSessionDescription(e),Promise.resolve().then((function(){if("answer"===e.type&&t._shouldApplySimulcast){var n=t._revertSimulcastForNonVP8MediaSections(t._localDescription.sdp,t._localDescriptionWithoutSimulcast.sdp,e.sdp);if(n!==t._localDescription.sdp)return t._rollbackAndApplyOffer({type:t._localDescription.type,sdp:n})}})).then((function(){return t._peerConnection.setRemoteDescription(e)})).then((function(){"answer"===e.type&&(t._isRestartingIce&&(t._log.debug("An ICE restart was in-progress and is now completed"),t._isRestartingIce=!1),ue(t))}),(function(n){throw t._log.warn('Calling setRemoteDescription with an RTCSessionDescription of type "'+e.type+'" failed with the error "'+n.message+'".'),e.sdp&&t._log.warn("The SDP was "+e.sdp),n}))}},{key:"_updateDescription",value:function(e){var t=this;switch(e.type){case"answer":case"pranswer":if(e.revision!==this._descriptionRevision||"have-local-offer"!==this._peerConnection.signalingState)return Promise.resolve();this._descriptionRevision=e.revision;break;case"close":return this._close();case"create-offer":return e.revision<=this._lastStableDescriptionRevision?Promise.resolve():this._needsAnswer?(this._queuedDescription=e,Promise.resolve()):(this._descriptionRevision=e.revision,this._offer());case"offer":return e.revision<=this._lastStableDescriptionRevision||"closed"===this._peerConnection.signalingState?Promise.resolve():"have-local-offer"===this._peerConnection.signalingState?this._needsAnswer&&0===this._lastStableDescriptionRevision?(this._queuedDescription=e,Promise.resolve()):(this._descriptionRevision=e.revision,this._handleGlare(e)):(this._descriptionRevision=e.revision,this._answer(e).then((function(){})))}var n=e.revision;return Promise.resolve().then((function(){return t._setRemoteDescription(e)})).catch((function(){throw new D})).then((function(){return t._lastStableDescriptionRevision=n,t._needsAnswer=!1,t._checkIceBox(e)})).then((function(){return t._queuedDescription&&t._updateDescription(t._queuedDescription)})).then((function(){return t._queuedDescription=null,t._maybeReoffer(t._peerConnection.localDescription).then((function(){}))}))}},{key:"_updateIce",value:function(e){var t=this._remoteCandidates.update(e);return this._addIceCandidates(t)}},{key:"addDataTrackSender",value:function(e){if(!this._dataChannels.has(e))try{var t={ordered:e.ordered};null!==e.maxPacketLifeTime&&(t.maxPacketLifeTime=e.maxPacketLifeTime),null!==e.maxRetransmits&&(t.maxRetransmits=e.maxRetransmits);var n=this._peerConnection.createDataChannel(e.id,t);e.addDataChannel(n),this._dataChannels.set(e,n)}catch(t){this._log.warn('Error creating an RTCDataChannel for DataTrack "'+e.id+'": '+t.message)}}},{key:"addMediaTrackSender",value:function(e){if("closed"!==this._peerConnection.signalingState&&!this._rtpSenders.has(e)){var t=void 0;if(this._localMediaStream)this._localMediaStream.addTrack(e.track),t=this._peerConnection.addTrack(e.track,this._localMediaStream);else t=this._addOrUpdateTransceiver(e.track).sender;e.addSender(t),this._rtpSenders.set(e,t)}}},{key:"close",value:function(){this._close()&&(this._descriptionRevision++,this._localDescription={type:"close"},this.emit("description",this.getState()))}},{key:"getTrackReceivers",value:function(){return Array.from(this._dataTrackReceivers).concat(Array.from(this._mediaTrackReceivers))}},{key:"getState",value:function(){if(!this._localDescription)return null;var e="answer"===this._localDescription.type?this._lastStableDescriptionRevision:this._descriptionRevision,t={type:this._localDescription.type,revision:e};return this._localDescription.sdp&&(t.sdp=this._localDescription.sdp),{description:t,id:this.id}}},{key:"offer",value:function(){var e=this;return this._needsAnswer||this._isRestartingIce?(this._shouldOffer=!0,Promise.resolve()):this.bracket("offering",(function(t){return e.transition("updating",t),(e._needsAnswer||e._isRestartingIce?Promise.resolve():e._offer()).then((function(){e.tryTransition("open",t)}),(function(n){throw e.tryTransition("open",t),n}))}))}},{key:"removeDataTrackSender",value:function(e){var t=this._dataChannels.get(e);t&&(e.removeDataChannel(t),this._dataChannels.delete(e),t.close())}},{key:"removeMediaTrackSender",value:function(e){if("closed"!==this._peerConnection.signalingState&&this._rtpSenders.has(e)){var t=this._rtpSenders.get(e);this._peerConnection.removeTrack(t),this._localMediaStream&&this._localMediaStream.removeTrack(e.track),e.removeSender(t),this._rtpSenders.delete(e)}}},{key:"setConfiguration",value:function(e){"function"==typeof this._peerConnection.setConfiguration&&this._peerConnection.setConfiguration(ae(e))}},{key:"setIceReconnectTimeout",value:function(e){return this._iceReconnectTimeout.setDelay(e),this._log.debug("Updated ICE reconnection timeout period:",this._iceReconnectTimeout.delay),this}},{key:"update",value:function(e){var t=this;return this.bracket("updating",(function(n){if("closed"===t.state)return Promise.resolve();t.transition("updating",n);var r=[];return e.ice&&r.push(t._updateIce(e.ice)),e.description&&r.push(t._updateDescription(e.description)),Promise.all(r).then((function(){t.tryTransition("open",n)}),(function(e){throw t.tryTransition("open",n),e}))}))}},{key:"getStats",value:function(){var e=this;return l(this._peerConnection).then((function(t){return function(e,t){return Object.assign(t,{remoteAudioTrackStats:t.remoteAudioTrackStats.map((function(t){return ie(e,t)})),remoteVideoTrackStats:t.remoteVideoTrackStats.map((function(t){return ie(e,t)})),localAudioTrackStats:t.localAudioTrackStats.map((function(t){return re(e,t)})),localVideoTrackStats:t.localVideoTrackStats.map((function(t){return re(e,t)}))})}(e,t)}))}},{key:"connectionState",get:function(){return"failed"===this.iceConnectionState?"failed":this._peerConnection.connectionState||this.iceConnectionState}},{key:"iceConnectionState",get:function(){return this._isIceConnectionInactive&&"disconnected"===this._peerConnection.iceConnectionState||this._iceGatheringFailed?"failed":this._peerConnection.iceConnectionState}},{key:"isApplicationSectionNegotiated",get:function(){return"closed"===this._peerConnection.signalingState||!!this._peerConnection.localDescription&&k(this._peerConnection.localDescription.sdp,"application").length>0}}]),t}(V);function re(e,t){var n=e._getMediaTrackSenderId(t.trackId);return Object.assign(t,{trackId:n})}function ie(e,t){var n=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e._mediaTrackReceivers)).find((function(e){return e.track.id===t.trackId})),r=n?n.id:null;return Object.assign(t,{trackId:r})}function oe(e){if(e.sdp){var t=e.sdp.match(/^a=ice-ufrag:([a-zA-Z0-9+/]+)/m);if(t)return t[1]}return null}function ae(e){return Object.assign({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},e)}function se(e,t){var n=t.track;return n&&n.kind===e&&"ended"!==n.readyState}function ue(e){e._isUnifiedPlan&&(function(e){e._recycledTransceivers.audio=[],e._recycledTransceivers.video=[],e._peerConnection.getTransceivers().forEach((function(t){if(function(e,t){return!e.stopped&&!t._replaceTrackPromises.has(e)&&["inactive","recvonly"].includes(e.direction)}(t,e)){var n=t.receiver.track;e._recycledTransceivers[n.kind].push(t)}}))}(e),function(e){var t=e._peerConnection.localDescription;t&&k(t.sdp).forEach((function(t){b(t).forEach((function(t,n){return e._localCodecs.add(n)}))}))}(e),function(e){var t=e._peerConnection.remoteDescription;t&&k(t.sdp).forEach((function(t){var n=t.match(/^a=mid:(.+)$/m)[1],r=b(t);e._remoteCodecMaps.set(n,r)}))}(e)),e._isRTCRtpSenderParamsSupported&&ce(e)}function ce(e){var t=e._encodingParameters,n=t.maxAudioBitrate,r=t.maxVideoBitrate,i=new Map([["audio",n],["video",r]]);e._peerConnection.getSenders().filter((function(e){return e.track})).forEach((function(t){var n=i.get(t.track.kind),r=t.getParameters();null===n||0===n?function(e){Array.isArray(e.encodings)&&e.encodings.forEach((function(e){return delete e.maxBitrate}))}(r):e._isChromeScreenShareTrack(t.track)?e._log.warn("Not setting maxBitrate for "+t.track.kind+" Track "+t.track.id+" because it appears to be screen share track: "+t.track.label):function(e,t){Z?e.encodings=[{maxBitrate:t}]:e.encodings.forEach((function(e){e.maxBitrate=t}))}(r,n),!Z&&e._enableDscp&&r.encodings.length>0&&(r.encodings[0].networkPriority="high"),t.setParameters(r).catch((function(n){e._log.warn("Error while setting encodings parameters for "+t.track.kind+" Track "+t.track.id+": "+(n.message||n.name))}))}))}e.exports=ne})),o.register("2ZZtP",(function(e,n){var r,i,a,s,u,c,l;t(e.exports,"exponential",(()=>r),(e=>r=e)),t(e.exports,"call",(()=>a),(e=>a=e)),t(e.exports,"ExponentialStrategy",(()=>s),(e=>s=e)),t(e.exports,"FibonacciStrategy",(()=>i),(e=>i=e)),t(e.exports,"fibonacci",(()=>l),(e=>l=e)),t(e.exports,"FunctionCall",(()=>c),(e=>c=e)),t(e.exports,"Backoff",(()=>u),(e=>u=e));var h=o("5eycW"),f=o("7cCYv"),d=o("7sJh7"),p=o("189q2");u=h,c=p,i=d,s=f,l=function(e){return new h(new d(e))},r=function(e){return new h(new f(e))},a=function(e,t,n){var r=Array.prototype.slice.call(arguments);return e=r[0],t=r.slice(1,r.length-1),n=r[r.length-1],new p(e,t,n)}})),o.register("5eycW",(function(e,t){var n=o("6xYCf"),r=o("7cdTl");function i(e){n.EventEmitter.call(this),this.backoffStrategy_=e,this.maxNumberOfRetry_=-1,this.backoffNumber_=0,this.backoffDelay_=0,this.timeoutID_=-1,this.handlers={backoff:this.onBackoff_.bind(this)}}o("2cK96").inherits(i,n.EventEmitter),i.prototype.failAfter=function(e){r.checkArgument(e>0,"Expected a maximum number of retry greater than 0 but got %s.",e),this.maxNumberOfRetry_=e},i.prototype.backoff=function(e){r.checkState(-1===this.timeoutID_,"Backoff in progress."),this.backoffNumber_===this.maxNumberOfRetry_?(this.emit("fail",e),this.reset()):(this.backoffDelay_=this.backoffStrategy_.next(),this.timeoutID_=setTimeout(this.handlers.backoff,this.backoffDelay_),this.emit("backoff",this.backoffNumber_,this.backoffDelay_,e))},i.prototype.onBackoff_=function(){this.timeoutID_=-1,this.emit("ready",this.backoffNumber_,this.backoffDelay_),this.backoffNumber_++},i.prototype.reset=function(){this.backoffNumber_=0,this.backoffStrategy_.reset(),clearTimeout(this.timeoutID_),this.timeoutID_=-1},e.exports=i})),o.register("7cdTl",(function(e,t){e.exports=o("7yK5B")})),o.register("7yK5B",(function(e,t){var n=o("2cK96"),r=e.exports=o("10zDH");function i(e,t,r,i){r=r||"";var o=new e(n.format.apply(this,[r].concat(i)));throw Error.captureStackTrace(o,t),o}function a(e,t,n){i(r.IllegalArgumentError,e,t,n)}function s(e,t,n){i(r.IllegalStateError,e,t,n)}function u(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array"}return t}function c(e){return function(t,n){var r=u(t);if(r==e)return t;a(arguments.callee,n||'Expected "'+e+'" but got "'+r+'".',Array.prototype.slice.call(arguments,2))}}e.exports.checkArgument=function(e,t){e||a(arguments.callee,t,Array.prototype.slice.call(arguments,2))},e.exports.checkState=function(e,t){e||s(arguments.callee,t,Array.prototype.slice.call(arguments,2))},e.exports.checkIsDef=function(e,t){if(void 0!==e)return e;a(arguments.callee,t||"Expected value to be defined but was undefined.",Array.prototype.slice.call(arguments,2))},e.exports.checkIsDefAndNotNull=function(e,t){if(null!=e)return e;a(arguments.callee,t||'Expected value to be defined and not null but got "'+u(e)+'".',Array.prototype.slice.call(arguments,2))},e.exports.checkIsString=c("string"),e.exports.checkIsArray=c("array"),e.exports.checkIsNumber=c("number"),e.exports.checkIsBoolean=c("boolean"),e.exports.checkIsFunction=c("function"),e.exports.checkIsObject=c("object")})),o.register("10zDH",(function(e,n){var r,i;t(e.exports,"IllegalStateError",(()=>r),(e=>r=e)),t(e.exports,"IllegalArgumentError",(()=>i),(e=>i=e));var a=o("2cK96");function s(e){Error.call(this,e),this.message=e}function u(e){Error.call(this,e),this.message=e}a.inherits(s,Error),s.prototype.name="IllegalArgumentError",a.inherits(u,Error),u.prototype.name="IllegalStateError",r=u,i=s})),o.register("7cCYv",(function(e,t){var n=o("2cK96"),r=o("7cdTl"),i=o("78pnY");function a(e){i.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay(),this.factor_=a.DEFAULT_FACTOR,e&&void 0!==e.factor&&(r.checkArgument(e.factor>1,"Exponential factor should be greater than 1 but got %s.",e.factor),this.factor_=e.factor)}n.inherits(a,i),a.DEFAULT_FACTOR=2,a.prototype.next_=function(){return this.backoffDelay_=Math.min(this.nextBackoffDelay_,this.getMaxDelay()),this.nextBackoffDelay_=this.backoffDelay_*this.factor_,this.backoffDelay_},a.prototype.reset_=function(){this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()},e.exports=a})),o.register("78pnY",(function(e,t){function n(e){return null!=e}function r(e){if(n((e=e||{}).initialDelay)&&e.initialDelay<1)throw new Error("The initial timeout must be greater than 0.");if(n(e.maxDelay)&&e.maxDelay<1)throw new Error("The maximal timeout must be greater than 0.");if(this.initialDelay_=e.initialDelay||100,this.maxDelay_=e.maxDelay||1e4,this.maxDelay_<=this.initialDelay_)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");if(n(e.randomisationFactor)&&(e.randomisationFactor<0||e.randomisationFactor>1))throw new Error("The randomisation factor must be between 0 and 1.");this.randomisationFactor_=e.randomisationFactor||0}o("6xYCf"),o("2cK96"),r.prototype.getMaxDelay=function(){return this.maxDelay_},r.prototype.getInitialDelay=function(){return this.initialDelay_},r.prototype.next=function(){var e=this.next_(),t=1+Math.random()*this.randomisationFactor_;return Math.round(e*t)},r.prototype.next_=function(){throw new Error("BackoffStrategy.next_() unimplemented.")},r.prototype.reset=function(){this.reset_()},r.prototype.reset_=function(){throw new Error("BackoffStrategy.reset_() unimplemented.")},e.exports=r})),o.register("7sJh7",(function(e,t){var n=o("2cK96"),r=o("78pnY");function i(e){r.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()}n.inherits(i,r),i.prototype.next_=function(){var e=Math.min(this.nextBackoffDelay_,this.getMaxDelay());return this.nextBackoffDelay_+=this.backoffDelay_,this.backoffDelay_=e,e},i.prototype.reset_=function(){this.nextBackoffDelay_=this.getInitialDelay(),this.backoffDelay_=0},e.exports=i})),o.register("189q2",(function(e,t){var n=o("6xYCf"),r=o("7cdTl"),i=o("2cK96"),a=o("5eycW"),s=o("7sJh7");function u(e,t,i){n.EventEmitter.call(this),r.checkIsFunction(e,"Expected fn to be a function."),r.checkIsArray(t,"Expected args to be an array."),r.checkIsFunction(i,"Expected callback to be a function."),this.function_=e,this.arguments_=t,this.callback_=i,this.lastResult_=[],this.numRetries_=0,this.backoff_=null,this.strategy_=null,this.failAfter_=-1,this.retryPredicate_=u.DEFAULT_RETRY_PREDICATE_,this.state_=u.State_.PENDING}i.inherits(u,n.EventEmitter),u.State_={PENDING:0,RUNNING:1,COMPLETED:2,ABORTED:3},u.DEFAULT_RETRY_PREDICATE_=function(e){return!0},u.prototype.isPending=function(){return this.state_==u.State_.PENDING},u.prototype.isRunning=function(){return this.state_==u.State_.RUNNING},u.prototype.isCompleted=function(){return this.state_==u.State_.COMPLETED},u.prototype.isAborted=function(){return this.state_==u.State_.ABORTED},u.prototype.setStrategy=function(e){return r.checkState(this.isPending(),"FunctionCall in progress."),this.strategy_=e,this},u.prototype.retryIf=function(e){return r.checkState(this.isPending(),"FunctionCall in progress."),this.retryPredicate_=e,this},u.prototype.getLastResult=function(){return this.lastResult_.concat()},u.prototype.getNumRetries=function(){return this.numRetries_},u.prototype.failAfter=function(e){return r.checkState(this.isPending(),"FunctionCall in progress."),this.failAfter_=e,this},u.prototype.abort=function(){this.isCompleted()||this.isAborted()||(this.isRunning()&&this.backoff_.reset(),this.state_=u.State_.ABORTED,this.lastResult_=[new Error("Backoff aborted.")],this.emit("abort"),this.doCallback_())},u.prototype.start=function(e){r.checkState(!this.isAborted(),"FunctionCall is aborted."),r.checkState(this.isPending(),"FunctionCall already started.");var t=this.strategy_||new s;this.backoff_=e?e(t):new a(t),this.backoff_.on("ready",this.doCall_.bind(this,!0)),this.backoff_.on("fail",this.doCallback_.bind(this)),this.backoff_.on("backoff",this.handleBackoff_.bind(this)),this.failAfter_>0&&this.backoff_.failAfter(this.failAfter_),this.state_=u.State_.RUNNING,this.doCall_(!1)},u.prototype.doCall_=function(e){e&&this.numRetries_++;var t=["call"].concat(this.arguments_);n.EventEmitter.prototype.emit.apply(this,t);var r=this.handleFunctionCallback_.bind(this);this.function_.apply(null,this.arguments_.concat(r))},u.prototype.doCallback_=function(){this.callback_.apply(null,this.lastResult_)},u.prototype.handleFunctionCallback_=function(){if(!this.isAborted()){var e=Array.prototype.slice.call(arguments);this.lastResult_=e,n.EventEmitter.prototype.emit.apply(this,["callback"].concat(e));var t=e[0];t&&this.retryPredicate_(t)?this.backoff_.backoff(t):(this.state_=u.State_.COMPLETED,this.doCallback_())}},u.prototype.handleBackoff_=function(e,t,n){this.emit("backoff",e,t,n)},e.exports=u})),o.register("60VD0",(function(e,n){var r,i,a,s,u,c,l,h,f,d,p,m,v;t(e.exports,"revertSimulcastForNonVP8MediaSections",(()=>v),(e=>v=e)),t(e.exports,"createCodecMapForMediaSection",(()=>r),(e=>r=e)),t(e.exports,"unifiedPlanAddOrRewriteNewTrackIds",(()=>h),(e=>h=e)),t(e.exports,"getMediaSections",(()=>d),(e=>d=e)),t(e.exports,"createPtToCodecName",(()=>m),(e=>m=e)),t(e.exports,"setBitrateParameters",(()=>a),(e=>a=e)),t(e.exports,"setSimulcast",(()=>s),(e=>s=e)),t(e.exports,"disableRtx",(()=>f),(e=>f=e)),t(e.exports,"removeSSRCAttributes",(()=>c),(e=>c=e)),t(e.exports,"unifiedPlanAddOrRewriteTrackIds",(()=>l),(e=>l=e)),t(e.exports,"setCodecPreferences",(()=>p),(e=>p=e)),t(e.exports,"unifiedPlanFilterLocalCodecs",(()=>u),(e=>u=e)),t(e.exports,"enableDtxForOpus",(()=>i),(e=>i=e));var g=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},y=o("2S2q7").difference,b=o("2S2q7").flatMap,w=o("4rlTB"),_={0:"PCMU",8:"PCMA"};function k(e,t){return t?"\r\nb="+e+":"+("AS"===e?Math.round((t+16e3)/950):t):null}function S(e){return Array.from(M(e)).reduce((function(e,t){var n=t[0],r=t[1],i=e.get(r)||[];return e.set(r,i.concat(n))}),new Map)}function E(e){return I(e).reduce((function(e,t){var n=C(t);return n?e.set(n,t):e}),new Map)}function M(e){return x(e).reduce((function(t,n){var r=new RegExp("a=rtpmap:"+n+" ([^/]+)"),i=e.match(r),o=i?i[1].toLowerCase():_[n]?_[n].toLowerCase():"";return t.set(n,o)}),new Map)}function T(e,t){var n=new RegExp("^a=fmtp:"+e+" (.+)$","m"),r=t.match(n);return r&&r[1].split(";").reduce((function(e,t){var n=t.split("="),r=g(n,2),i=r[0],o=r[1];return e[i]=isNaN(o)?o:parseInt(o,10),e}),{})}function C(e){var t=e.match(/^a=mid:(.+)$/m);return t&&t[1]}function I(e,t,n){return e.replace(/\r\n\r\n$/,"\r\n").split("\r\nm=").slice(1).map((function(e){return"m="+e})).filter((function(e){var r=new RegExp("m="+(t||".*"),"gm"),i=new RegExp("a="+(n||".*"),"gm");return r.test(e)&&i.test(e)}))}function x(e){var t=e.split("\r\n")[0].match(/([0-9]+)/g);return t?t.slice(1).map((function(e){return parseInt(e,10)})):[]}function A(e,t){var n=t.split("\r\n"),r=n[0],i=n.slice(1);return[r=r.replace(/([0-9]+\s?)+$/,e.join(" "))].concat(i).join("\r\n")}function P(e,t){if(!/^m=(audio|video)/.test(e))return e;var n=C(e),r=n&&t.get(n);if(!r)return e;var i=M(r),o=S(e),a=b(Array.from(i),(function(t){var n=g(t,2),i=n[0],a=n[1];return"rtx"!==a?function(e,t,n,r,i){var o=n.get(e)||[];if(o.length<=1)return o;var a=T(t,i);if(!a)return o;var s=o.find((function(e){var t=T(e,r);return t&&Object.keys(a).every((function(e){return a[e]===t[e]}))}));return"number"==typeof s?[s]:o}(a,i,o,e,r):[]})),s=o.get("rtx")||[];a=a.concat(s.filter((function(t){var n=T(t,e);return n&&a.includes(n.apt)})));var u=e.split("\r\n").filter((function(e){var t=e.match(/^a=(rtpmap|fmtp|rtcp-fb):(.+) .+$/),n=t&&t[2];return!t||n&&a.includes(parseInt(n,10))}));return A(x(e).filter((function(e){return a.includes(e)})),u.join("\r\n"))}function O(e,t){var n=I(e);return[e.split("\r\nm=")[0]].concat(n.map((function(e){if(!/^m=(audio|video)/.test(e))return e;var n=C(e);if(!n)return e;var r=t.get(n);if(!r)return e;var i=(e.match(/^a=msid:(.+)$/m)||[])[1];if(!i)return e;var o=i.split(" "),a=g(o,2),s=a[0],u=a[1],c=new RegExp("msid:"+s+(u?" "+u:"")+"$","gm");return e.replace(c,"msid:"+s+" "+r)}))).join("\r\n")}function R(e,t){return"a=fmtp:"+e+" "+Object.entries(t).map((function(e){var t=g(e,2);return t[0]+"="+t[1]})).join(";")}r=S,m=M,f=function(e){var t=I(e);return[e.split("\r\nm=")[0]].concat(t.map((function(e){if(!/^m=video/.test(e))return e;var t=S(e).get("rtx");if(!t)return e;var n=new Set(x(e));t.forEach((function(e){return n.delete(e)}));var r=e.match(/a=ssrc-group:FID [0-9]+ ([0-9]+)/),i=r&&r[1],o=[/^a=fmtp:.+ apt=.+$/,/^a=rtpmap:.+ rtx\/.+$/,/^a=ssrc-group:.+$/].concat(i?[new RegExp("^a=ssrc:"+i+" .+$")]:[]);return e=e.split("\r\n").filter((function(e){return o.every((function(t){return!t.test(e)}))})).join("\r\n"),A(Array.from(n),e)}))).join("\r\n")},i=function(e,t){var n=I(e),r=e.split("\r\nm=")[0];return t=t||n.filter((function(e){return/^m=audio/.test(e)})).map(C),[r].concat(n.map((function(e){if(!/^m=audio/.test(e))return e;var n=S(e).get("opus");if(!n)return e;var r=T(n,e);if(!r)return e;var i=R(n,r),o=new RegExp(i),a=C(e);t.includes(a)?r.usedtx=1:delete r.usedtx;var s=R(n,r);return e.replace(o,s)}))).join("\r\n")},d=I,c=function(e,t){return e.split("\r\n").filter((function(e){return!t.find((function(t){return new RegExp("a=ssrc:.*"+t+":","g").test(e)}))})).join("\r\n")},v=function(e,t,n){var r=E(n),i=E(t),o=I(e);return[e.split("\r\nm=")[0]].concat(o.map((function(e){if(e=e.replace(/\r\n$/,""),!/^m=video/.test(e))return e;var t=e.match(/^a=mid:(.+)$/m),n=t&&t[1];if(!n)return e;var o=r.get(n),a=M(o),s=x(o);return s.length&&"vp8"===a.get(s[0])?e:i.get(n).replace(/\r\n$/,"")}))).concat("").join("\r\n")},a=function(e,t,n,r){var i=I(e);return[e.split("\r\nm=")[0]].concat(i.map((function(e){if(!/^m=(audio|video)/.test(e)||!/a=(recvonly|sendrecv)/.test(e))return e;var i=e.match(/^m=(audio|video)/)[1];return function(e,t,n){var r=k(e,t)||"",i=/\r\nb=(AS|TIAS):([0-9]+)/,o=n.match(i);if(!o)return n.replace(/(\r\n)?$/,r+"$1");var a=parseInt(o[2],10);return t=t||1/0,r=k(e,Math.min(a,t)),n.replace(i,r)}(t,"audio"===i?n:r,e)}))).join("\r\n")},p=function(e,t,n){var r=I(e);return[e.split("\r\nm=")[0]].concat(r.map((function(e){if(!/^m=(audio|video)/.test(e))return e;var r=e.match(/^m=(audio|video)/)[1],i=S(e),o=function(e,t){t=t.map((function(e){return e.codec.toLowerCase()}));var n=b(t,(function(t){return e.get(t)||[]})),r=y(Array.from(e.keys()),t),i=b(r,(function(t){return e.get(t)}));return n.concat(i)}(i,"audio"===r?t:n),a=A(o,e),s=i.get("pcma")||[],u=i.get("pcmu")||[];return("audio"===r?new Set(s.concat(u)):new Set).has(o[0])?a.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):a}))).join("\r\n")},s=function(e,t,n){var r=I(e);return[e.split("\r\nm=")[0]].concat(r.map((function(e){if(e=e.replace(/\r\n$/,""),!/^m=video/.test(e))return e;var r=S(e),i=x(e),o=new Set(r.get("vp8")||[]);return i.some((function(e){return o.has(e)}))?w(e,t,n):e}))).concat("").join("\r\n")},u=function(e,t){var n=I(e),r=e.split("\r\nm=")[0],i=E(t);return[r].concat(n.map((function(e){return P(e,i)}))).join("\r\n")},h=function(e,t,n){var r=Array.from(n).reduce((function(n,r){var i=g(r,2),o=i[0],a=i[1];return I(e,o,"send(only|recv)").map(C).filter((function(e){return!t.has(e)})).forEach((function(e,t){return n.set(e,a[t])})),n}),new Map);return O(e,r)},l=O})),o.register("4rlTB",(function(e,t){"use strict";var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=o("2S2q7").difference,a=o("2S2q7").flatMap;function s(){return String(Math.floor(4294967295*Math.random()))}var u=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{cName:{enumerable:!0,value:r},isSimulcastEnabled:{enumerable:!0,value:!1,writable:!0},primarySSRCs:{enumerable:!0,value:new Set},rtxPairs:{enumerable:!0,value:new Map},streamId:{enumerable:!0,value:n},trackId:{enumerable:!0,value:t}})}return r(e,[{key:"addSimulcastSSRCs",value:function(){if(!this.isSimulcastEnabled){var e=[s(),s()];e.forEach((function(e){this.primarySSRCs.add(e)}),this),this.rtxPairs.size&&e.forEach((function(e){this.rtxPairs.set(s(),e)}),this)}}},{key:"addSSRC",value:function(e,t,n){t?this.rtxPairs.set(e,t):this.primarySSRCs.add(e),this.isSimulcastEnabled=this.isSimulcastEnabled||n}},{key:"toSdpLines",value:function(e){var t=this,n=e?[]:Array.from(this.rtxPairs.entries()).map((function(e){return e.reverse()})),r=Array.from(this.primarySSRCs.values()),i=n.length?a(n):r,o=a(i,(function(e){return["a=ssrc:"+e+" cname:"+t.cName,"a=ssrc:"+e+" msid:"+t.streamId+" "+t.trackId]})),s=n.map((function(e){return"a=ssrc-group:FID "+e.join(" ")})),u=["a=ssrc-group:SIM "+r.join(" ")];return s.concat(o).concat(u)}}]),e}();function c(e,t){return(e.match(new RegExp(t,"gm"))||[]).map((function(e){return(e.match(new RegExp(t))||[]).slice(1)}))}function l(e){return c(e,"^a=ssrc:([0-9]+) msid:([^\\s]+) ([^\\s]+)$")}function h(e){var t=a(c(e,"^a=msid:(.+) (.+)$")),r=n(t,2),i=r[0],o=r[1];return a(c(e,"^a=ssrc:(.+) cname:.+$")).map((function(e){return[e,i,o]}))}function f(e,t){var n=function(e){return new Set(a(c(e,"^a=ssrc-group:SIM ([0-9]+) ([0-9]+) ([0-9]+)$")))}(e),r=function(e){return new Map(c(e,"^a=ssrc-group:FID ([0-9]+) ([0-9]+)$").map((function(e){return e.reverse()})))}(e);return function(e,t){return{planb:l,unified:h}[t](e)}(e,t).reduce((function(t,i){var o=i[0],a=i[1],s=i[2],c=t.get(s)||new u(s,a,function(e,t,n){var r="a=ssrc:"+t+" "+n+":(.+)";return e.match(new RegExp(r))[1]}(e,o,"cname")),l=r.get(o)||null;return c.addSSRC(o,l,n.has(o)),t.set(s,c)}),new Map)}e.exports=function(e,t,n){var r=f(e,t),o=Array.from(r.keys()),s=Array.from(n.keys()),u=i(o,s),c=i(s,o);a(u,(function(e){return r.get(e)})).forEach((function(e){e.addSimulcastSSRCs(),n.set(e.trackId,e)})),s=Array.from(n.keys());var l=i(s,c),h=a(l,(function(e){return n.get(e)})),d=!e.match(/a=rtpmap:[0-9]+ rtx/),p=a(h,(function(e){return e.toSdpLines(d)})),m=a(new Set(e.split("\r\n").concat(p))),v="a=x-google-flag:conference";return e.match(v)||m.push(v),m.join("\r\n")}})),o.register("5WF7N",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];r(this,e),Object.defineProperties(this,{_delay:{value:n,writable:!0},_fn:{value:t},_timeout:{value:null,writable:!0}}),i&&this.start()}return n(e,[{key:"setDelay",value:function(e){this._delay=e}},{key:"start",value:function(){var e=this;this.isSet||(this._timeout=setTimeout((function(){var t=e._fn;e.clear(),t()}),this._delay))}},{key:"clear",value:function(){clearTimeout(this._timeout),this._timeout=null}},{key:"reset",value:function(){this.clear(),this.start()}},{key:"delay",get:function(){return this._delay}},{key:"isSet",get:function(){return!!this._timeout}}]),e}();e.exports=i})),o.register("6D3Hv",(function(e,n){var r,i,a,s,u,c,l,h,f,d;function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t(e.exports,"SignalingConnectionError",(()=>u),(e=>u=e)),t(e.exports,"RoomCompletedError",(()=>r),(e=>r=e)),t(e.exports,"MediaConnectionError",(()=>a),(e=>a=e)),t(e.exports,"MediaClientRemoteDescFailedError",(()=>i),(e=>i=e)),t(e.exports,"createTwilioError",(()=>d),(e=>d=e)),t(e.exports,"SignalingIncomingMessageInvalidError",(()=>h),(e=>h=e)),t(e.exports,"MediaClientLocalDescFailedError",(()=>l),(e=>l=e)),t(e.exports,"SignalingServerBusyError",(()=>f),(e=>f=e)),t(e.exports,"MediaDTLSTransportFailedError",(()=>s),(e=>s=e)),t(e.exports,"SignalingConnectionDisconnectedError",(()=>c),(e=>c=e));var g=o("4nKGW"),y={};d=function(e,t){return t="string"==typeof t&&t?t:"Unknown error",y[e="number"==typeof e?e:0]?new y[e]:new g(e,t)};var b=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,20101,"Invalid Access Token"))}return v(t,e),t}(g);Object.defineProperty(y,20101,{value:b});var w=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,20102,"Invalid Access Token header"))}return v(t,e),t}(g);Object.defineProperty(y,20102,{value:w});var _=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,20103,"Invalid Access Token issuer/subject"))}return v(t,e),t}(g);Object.defineProperty(y,20103,{value:_});var k=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,20104,"Access Token expired or expiration date invalid"))}return v(t,e),t}(g);Object.defineProperty(y,20104,{value:k});var S=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,20105,"Access Token not yet valid"))}return v(t,e),t}(g);Object.defineProperty(y,20105,{value:S});var E=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,20106,"Invalid Access Token grants"))}return v(t,e),t}(g);Object.defineProperty(y,20106,{value:E});var M=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,20107,"Invalid Access Token signature"))}return v(t,e),t}(g);Object.defineProperty(y,20107,{value:M});var T=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53e3,"Signaling connection error"))}return v(t,e),t}(g);u=T,Object.defineProperty(y,53e3,{value:T});var C=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53001,"Signaling connection disconnected"))}return v(t,e),t}(g);c=C,Object.defineProperty(y,53001,{value:C});var I=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53002,"Signaling connection timed out"))}return v(t,e),t}(g);Object.defineProperty(y,53002,{value:I});var x=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53003,"Client received an invalid signaling message"))}return v(t,e),t}(g);h=x,Object.defineProperty(y,53003,{value:x});var A=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53004,"Client sent an invalid signaling message"))}return v(t,e),t}(g);Object.defineProperty(y,53004,{value:A});var P=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53006,"Video server is busy"))}return v(t,e),t}(g);f=P,Object.defineProperty(y,53006,{value:P});var O=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53100,"Room name is invalid"))}return v(t,e),t}(g);Object.defineProperty(y,53100,{value:O});var R=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53101,"Room name is too long"))}return v(t,e),t}(g);Object.defineProperty(y,53101,{value:R});var D=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53102,"Room name contains invalid characters"))}return v(t,e),t}(g);Object.defineProperty(y,53102,{value:D});var N=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53103,"Unable to create Room"))}return v(t,e),t}(g);Object.defineProperty(y,53103,{value:N});var L=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53104,"Unable to connect to Room"))}return v(t,e),t}(g);Object.defineProperty(y,53104,{value:L});var j=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53105,"Room contains too many Participants"))}return v(t,e),t}(g);Object.defineProperty(y,53105,{value:j});var B=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53106,"Room not found"))}return v(t,e),t}(g);Object.defineProperty(y,53106,{value:B});var F=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53107,"MaxParticipants is out of range"))}return v(t,e),t}(g);Object.defineProperty(y,53107,{value:F});var U=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53108,"RoomType is not valid"))}return v(t,e),t}(g);Object.defineProperty(y,53108,{value:U});var q=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53109,"Timeout is out of range"))}return v(t,e),t}(g);Object.defineProperty(y,53109,{value:q});var z=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53110,"StatusCallbackMethod is invalid"))}return v(t,e),t}(g);Object.defineProperty(y,53110,{value:z});var V=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53111,"StatusCallback is invalid"))}return v(t,e),t}(g);Object.defineProperty(y,53111,{value:V});var W=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53112,"Status is invalid"))}return v(t,e),t}(g);Object.defineProperty(y,53112,{value:W});var H=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53113,"Room exists"))}return v(t,e),t}(g);Object.defineProperty(y,53113,{value:H});var K=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53114,"Room creation parameter(s) incompatible with the Room type"))}return v(t,e),t}(g);Object.defineProperty(y,53114,{value:K});var G=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53115,"MediaRegion is invalid"))}return v(t,e),t}(g);Object.defineProperty(y,53115,{value:G});var Y=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53116,"There are no media servers available in the MediaRegion"))}return v(t,e),t}(g);Object.defineProperty(y,53116,{value:Y});var Q=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53117,"The subscription operation requested is not supported for the Room type"))}return v(t,e),t}(g);Object.defineProperty(y,53117,{value:Q});var J=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53118,"Room completed"))}return v(t,e),t}(g);r=J,Object.defineProperty(y,53118,{value:J});var Z=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53200,"Participant identity is invalid"))}return v(t,e),t}(g);Object.defineProperty(y,53200,{value:Z});var X=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53201,"Participant identity is too long"))}return v(t,e),t}(g);Object.defineProperty(y,53201,{value:X});var $=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53202,"Participant identity contains invalid characters"))}return v(t,e),t}(g);Object.defineProperty(y,53202,{value:$});var ee=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53203,"Participant has too many Tracks"))}return v(t,e),t}(g);Object.defineProperty(y,53203,{value:ee});var te=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53204,"Participant not found"))}return v(t,e),t}(g);Object.defineProperty(y,53204,{value:te});var ne=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53205,"Participant disconnected because of duplicate identity"))}return v(t,e),t}(g);Object.defineProperty(y,53205,{value:ne});var re=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53300,"Track is invalid"))}return v(t,e),t}(g);Object.defineProperty(y,53300,{value:re});var ie=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53301,"Track name is invalid"))}return v(t,e),t}(g);Object.defineProperty(y,53301,{value:ie});var oe=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53302,"Track name is too long"))}return v(t,e),t}(g);Object.defineProperty(y,53302,{value:oe});var ae=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53303,"Track name contains invalid characters"))}return v(t,e),t}(g);Object.defineProperty(y,53303,{value:ae});var se=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53304,"Track name is duplicated"))}return v(t,e),t}(g);Object.defineProperty(y,53304,{value:se});var ue=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53305,"The server has reached capacity and cannot fulfill this request"))}return v(t,e),t}(g);Object.defineProperty(y,53305,{value:ue});var ce=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53400,"Client is unable to create or apply a local media description"))}return v(t,e),t}(g);l=ce,Object.defineProperty(y,53400,{value:ce});var le=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53401,"Server is unable to create or apply a local media description"))}return v(t,e),t}(g);Object.defineProperty(y,53401,{value:le});var he=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53402,"Client is unable to apply a remote media description"))}return v(t,e),t}(g);i=he,Object.defineProperty(y,53402,{value:he});var fe=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53403,"Server is unable to apply a remote media description"))}return v(t,e),t}(g);Object.defineProperty(y,53403,{value:fe});var de=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53404,"No supported codec"))}return v(t,e),t}(g);Object.defineProperty(y,53404,{value:de});var pe=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53405,"Media connection failed or Media activity ceased"))}return v(t,e),t}(g);a=pe,Object.defineProperty(y,53405,{value:pe});var me=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53407,"Media connection failed due to DTLS handshake failure"))}return v(t,e),t}(g);s=me,Object.defineProperty(y,53407,{value:me});var ve=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53500,"Unable to acquire configuration"))}return v(t,e),t}(g);Object.defineProperty(y,53500,{value:ve});var ge=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,53501,"Unable to acquire TURN credentials"))}return v(t,e),t}(g);Object.defineProperty(y,53501,{value:ge})})),o.register("4nKGW",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=function(e){function t(e){var n;i(this,t);var a=[].slice.call(arguments,1),s=o(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(r(a)))),u=Error.apply(s,a);return u.name="TwilioError",Object.defineProperty(s,"code",{value:e,enumerable:!0}),Object.getOwnPropertyNames(u).forEach((function(e){Object.defineProperty(this,e,{value:u[e],enumerable:!0})}),s),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),n(t,[{key:"toString",value:function(){var e=this.message?": "+this.message:"";return this.name+" "+this.code+e}}]),t}();e.exports=a})),o.register("4gLFr",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("6nrmT"),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{_filter:{value:new r({getKey:function(e){return e.ufrag},isLessThanOrEqualTo:function(e,t){return e.revision<=t.revision}})},_ufrag:{writable:!0,value:null},ufrag:{enumerable:!0,get:function(){return this._ufrag}}})}return n(e,[{key:"setUfrag",value:function(e){this._ufrag=e;var t=this._filter.toMap().get(e);return t?t.candidates:[]}},{key:"update",value:function(e){e.candidates=e.candidates||[];var t=this._filter.toMap().get(e.ufrag),n=t?t.candidates:[];return this._filter.update(e)&&this._ufrag===e.ufrag?e.candidates.slice(n.length):[]}}]),e}();e.exports=i})),o.register("6nrmT",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=Object.assign({getKey:function(e){return e},getValue:function(e){return e},isLessThanOrEqualTo:function(e,t){return e<=t}},t),Object.defineProperties(this,{_getKey:{value:t.getKey},_getValue:{value:t.getValue},_isLessThanOrEqualTo:{value:t.isLessThanOrEqualTo},_map:{value:new Map}})}return n(e,[{key:"toMap",value:function(){return new Map(this._map)}},{key:"updateAndFilter",value:function(e){return e.filter(this.update,this)}},{key:"update",value:function(e){var t=this._getKey(e),n=this._getValue(e);return(!this._map.has(t)||!this._isLessThanOrEqualTo(n,this._map.get(t)))&&(this._map.set(t,n),!0)}}]),e}();e.exports=r})),o.register("5njfX",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("72UdZ"),i=r.ICE_ACTIVITY_CHECK_PERIOD_MS,a=r.ICE_INACTIVITY_THRESHOLD_MS,s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=Object.assign({activityCheckPeriodMs:i,inactivityThresholdMs:a},n),Object.defineProperties(this,{_activityCheckPeriodMs:{value:n.activityCheckPeriodMs},_inactivityThresholdMs:{value:n.inactivityThresholdMs},_lastActivity:{value:null,writable:!0},_peerConnection:{value:t},_timer:{value:null,writable:!0},_onIceConnectionStateChanged:{value:null,writable:!0}})}return n(e,[{key:"_getActivePairStat",value:function(e){var t=Array.from(e.values());return t.find((function(e){return"inbound-rtp"===e.type}))?t.find((function(e){return"candidate-pair"===e.type&&e.nominated}))||{bytesReceived:0,timestamp:Math.round((new Date).getTime())}:null}},{key:"_getIceConnectionStats",value:function(){var e=this;return this._peerConnection.getStats().then((function(t){return e._getActivePairStat(t)})).catch((function(){return null}))}},{key:"_scheduleInactivityCallback",value:function(e){var t=this;e&&null===this._onIceConnectionStateChanged?(this._onIceConnectionStateChanged=function(){"disconnected"===t._peerConnection.iceConnectionState&&e()},this._peerConnection.addEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged)):!e&&this._onIceConnectionStateChanged&&(this._peerConnection.removeEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged),this._onIceConnectionStateChanged=null)}},{key:"start",value:function(e){var t=this;this.stop(),this._timer=setInterval((function(){t._getIceConnectionStats().then((function(n){n&&(t._lastActivity&&t._lastActivity.bytesReceived===n.bytesReceived||(t._lastActivity=n,t._scheduleInactivityCallback(null)),n.timestamp-t._lastActivity.timestamp>=t._inactivityThresholdMs&&("disconnected"===t._peerConnection.iceConnectionState?e():null===t._onIceConnectionStateChanged&&t._scheduleInactivityCallback(e)))}))}),this._activityCheckPeriodMs)}},{key:"stop",value:function(){this._scheduleInactivityCallback(null),null!==this._timer&&(clearInterval(this._timer),this._timer=null,this._lastActivity=null)}}]),e}();e.exports=s})),o.register("2suVg",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var i=o("74d2M"),a=o("70ccV"),s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.label,e.maxPacketLifeTime,e.maxRetransmits,e.ordered));return Object.defineProperties(n,{_dataChannel:{value:e}}),e.binaryType="arraybuffer",e.addEventListener("message",(function(e){n.emit("message",e.data)})),e.addEventListener("close",(function(){n.emit("close")})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"stop",value:function(){this._dataChannel.close(),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stop",this).call(this)}},{key:"toDataTransport",value:function(){return new a(this._dataChannel)}}]),t}(i);e.exports=s})),o.register("70ccV",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object.defineProperties(n,{_dataChannel:{value:e},_messageQueue:{value:[]}}),e.addEventListener("open",(function(){n._messageQueue.splice(0).forEach((function(e){return n._publish(e)}))})),e.addEventListener("message",(function(e){var t=e.data;try{var r=JSON.parse(t);n.emit("message",r)}catch(e){}})),n.publish({type:"ready"}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"_publish",value:function(e){var t=JSON.stringify(e);try{this._dataChannel.send(t)}catch(e){}}},{key:"publish",value:function(e){var t=this._dataChannel;return"closing"!==t.readyState&&"closed"!==t.readyState&&("connecting"===t.readyState?(this._messageQueue.push(e),!0):(this._publish(e),!0))}}]),t}(o("6xYCf").EventEmitter);e.exports=r})),o.register("1AybR",(function(e,t){"use strict";var n=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o("4o7vs"));e.exports=n})),o.register("56JJ3",(function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=o("6xYCf").EventEmitter,a=o("2S2q7"),s=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r,i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),o=null,a=e;return n=function(e){var t=new Map;for(var n in e)t.set(n,new Set(e[n]));return t}(n),Object.defineProperties(i,{_lock:{get:function(){return o},set:function(e){o=e}},_reachableStates:{value:(r=n,Array.from(r.keys()).reduce((function(e,t){return e.set(t,c(r,t))}),new Map))},_state:{get:function(){return a},set:function(e){a=e}},_states:{value:n},_whenDeferreds:{value:new Set},isLocked:{enumerable:!0,get:function(){return null!==o}},state:{enumerable:!0,get:function(){return a}}}),i.on("stateChanged",(function(e){i._whenDeferreds.forEach((function(t){t.when(e,t.resolve,t.reject)}))})),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"_whenPromise",value:function(e){var t=this;if("function"!=typeof e)return Promise.reject(new Error("when() executor must be a function"));var n=a.defer();return n.when=e,this._whenDeferreds.add(n),n.promise.then((function(e){return t._whenDeferreds.delete(n),e}),(function(e){throw t._whenDeferreds.delete(n),e}))}},{key:"bracket",value:function(e,t){var n=void 0,r=this;function i(e){if(r.hasLock(n)&&r.releaseLockCompletely(n),e)throw e}return this.takeLock(e).then((function(e){return t(n=e)})).then((function(e){return i(),e}),i)}},{key:"hasLock",value:function(e){return this._lock===e}},{key:"preempt",value:function(e,t,n){if(!u(this._states,this.state,e))throw new Error('Cannot transition from "'+this.state+'" to "'+e+'"');var r=void 0;this.isLocked&&(r=this._lock,this._lock=null);var i=null;t&&(i=this.takeLockSync(t));var o=i?null:this.takeLockSync("preemption");return this.transition(e,i||o,n),r&&r.resolve(),o&&this.releaseLock(o),i}},{key:"releaseLock",value:function(e){if(!this.isLocked)throw new Error("Could not release the lock for "+e.name+" because the StateMachine is not locked");if(!this.hasLock(e))throw new Error("Could not release the lock for "+e.name+" because "+this._lock.name+" has the lock");0===e.depth?(this._lock=null,e.resolve()):e.depth--}},{key:"releaseLockCompletely",value:function(e){if(!this.isLocked)throw new Error("Could not release the lock for "+e.name+" because the StateMachine is not locked");if(!this.hasLock(e))throw new Error("Could not release the lock for "+e.name+" because "+this._lock.name+" has the lock");e.depth=0,this._lock=null,e.resolve()}},{key:"takeLock",value:function(e){var t=this;if("object"===(void 0===e?"undefined":n(e))){var r=e;return new Promise((function(e){e(t.takeLockSync(r))}))}var i=e;if(this.isLocked){var o=this.takeLock.bind(this,i);return this._lock.promise.then(o)}return Promise.resolve(this.takeLockSync(i))}},{key:"takeLockSync",value:function(e){var t="string"==typeof e?null:e,n=t?t.name:e;if(t&&!this.hasLock(t)||!t&&this.isLocked)throw new Error("Could not take the lock for "+n+" because the lock for "+this._lock.name+" was not released");if(t)return t.depth++,t;var r=function(e){var t=a.defer();return t.name=e,t.depth=0,t}(n);return this._lock=r,r}},{key:"transition",value:function(e,t,n){if(n=n||[],this.isLocked){if(!t)throw new Error("You must provide the key in order to transition");if(!this.hasLock(t))throw new Error("Could not transition using the key for "+t.name+" because "+this._lock.name+" has the lock")}else if(t)throw new Error("Key provided for "+t.name+", but the StateMachine was not locked (possibly due to preemption)");if(!u(this._states,this.state,e))throw new Error('Cannot transition from "'+this.state+'" to "'+e+'"');this._state=e,this.emit.apply(this,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(["stateChanged",e].concat(n)))}},{key:"tryTransition",value:function(e,t,n){try{this.transition(e,t,n)}catch(e){return!1}return!0}},{key:"when",value:function(e){var t=this;return this.state===e?Promise.resolve(this):u(this._reachableStates,this.state,e)?this._whenPromise((function(n,r,i){n===e?r(t):u(t._reachableStates,n,e)||i(l(n,e))})):Promise.reject(l(this.state,e))}}]),t}(i);function u(e,t,n){return e.get(t).has(n)}function c(e,t,n){return n=n||new Set,e.get(t).forEach((function(t){n.has(t)||(n.add(t),c(e,t,n).forEach(n.add,n))})),n}function l(e,t){return new Error('"'+t+'" cannot be reached from "'+e+'"')}e.exports=s})),o.register("01c5F",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"match",value:function(e){return e.track.id}},{key:"update",value:function(){}}]),e}();e.exports=r})),o.register("5nLUc",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("2S2q7"),i=o("60VD0").getMediaSections;function a(){return{matched:new Set,unmatched:new Set}}var s=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(this instanceof e))return new e;Object.defineProperties(this,{audio:{enumerable:!0,value:a()},video:{enumerable:!0,value:a()}})}return n(e,[{key:"match",value:function(e){return function(e){var t=Array.from(e.unmatched);if(!t.length)return null;var n=t[0];return e.matched.add(n),e.unmatched.delete(n),n}(this[e.track.kind])}},{key:"update",value:function(e){["audio","video"].forEach((function(t){var n,o;n=this[t],o=function(e,t){var n=i(t,e),o="msid: ?(.+) +(.+) ?$";return new Set(r.flatMap(n,(function(e){return e.match(new RegExp(o,"mg"))||[]})).map((function(e){return e.match(new RegExp(o))[2]})))}(t,e),o=new Set(o),r.difference(n.matched,o).forEach(n.matched.delete,n.matched),n.unmatched=r.difference(o,n.matched)}),this)}}]),e}();e.exports=s})),o.register("1Q8kx",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("60VD0").getMediaSections,i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{_midsToTrackIds:{value:new Map,writable:!0}})}return n(e,[{key:"match",value:function(e){return this._midsToTrackIds.get(e.transceiver.mid)||null}},{key:"update",value:function(e){var t=r(e,"(audio|video)");this._midsToTrackIds=t.reduce((function(e,t){var n=t.match(/^a=mid:(.+)$/m)||[],r=t.match(/^a=msid:.+ (.+)$/m)||[],i=n[1],o=r[1];return i&&o?e.set(i,o):e}),this._midsToTrackIds)}}]),e}();e.exports=i})),o.register("79cTh",(function(e,t){"use strict";var n=o("3bRT0").RTCSessionDescription,r=o("60VD0").createPtToCodecName,i=o("60VD0").getMediaSections;function a(e){var t=r(e);e=function(e,t){return Array.from(t.keys()).reduce((function(e,n){var r=new RegExp("^a=rtpmap:"+n+" rtx.+$","gm");return(e.match(r)||[]).slice("rtx"===t.get(n)?1:0).reduce((function(e,t){var r=new RegExp("\r\n"+t),i=new RegExp("\r\na=fmtp:"+n+" apt=[0-9]+");return e.replace(r,"").replace(i,"")}),e)}),e)}(e,t);var n=function(e){var t=new Map;return e.forEach((function(e,n){var r=t.get(e)||new Set;return t.set(e,r.add(n))})),t}(t),i=n.get("rtx")||new Set,o=new Set,a=function(e,t){var n=Array.from(e).reduce((function(e,t){var n=t[0],r=t[1],i=e.get(r)||new Set;return e.set(r,i.add(n))}),new Map);return Array.from(n).reduce((function(e,n){var r=n[0],i=Array.from(n[1]);return i.length>1?(i.forEach((function(e){t.add(e)})),e):e.set(r,i[0])}),new Map)}(function(e,t,n,r){return Array.from(n).reduce((function(n,i){var o=new RegExp("a=fmtp:"+i+" apt=(\\d+)"),a=e.match(o);if(!a)return r.add(i),n;var s=Number.parseInt(a[1]);return t.has(s)?"rtx"===t.get(s)?(r.add(i),n):n.set(i,s):(r.add(i),n)}),new Map)}(e,t,i,o),o),u=Array.from(o);return["h264","vp8","vp9"].reduce((function(e,t){var r=n.get(t)||new Set;return Array.from(r).reduce((function(e,t){return a.has(t)?e:e.add(t)}),e)}),new Set).forEach((function(t){if(u.length){var n=u.shift();e=function(e,t,n){return e.endsWith("\r\n")?e+"a=fmtp:"+t+" apt="+n+"\r\n":e+"\r\na=fmtp:"+t+" apt="+n}(e=s(e,n),n,t)}})),u.forEach((function(t){e=function(e,t){var n=new RegExp("a=rtpmap:"+t+".*\r\n","gm");return e.replace(n,"")}(e=s(e,t),t)})),e}function s(e,t){var n=new RegExp("a=fmtp:"+t+".*\r\n","gm");return e.replace(n,"")}e.exports=function(e){var t,r,o={type:e.type};return"rollback"!==e.type&&(o.sdp=(t=e.sdp,r=i(t),[t.split("\r\nm=")[0]].concat(r.map(a)).join("\r\n"))),new n(o)}})),o.register("1b3aJ",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object.defineProperties(e,{_queuedEvents:{value:new Map}}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"dequeue",value:function(e){var t=this,n=!0;if(!e)return this._queuedEvents.forEach((function(e,t){n=this.dequeue(t)&&n}),this),n;var i=this._queuedEvents.get(e)||[];return this._queuedEvents.delete(e),i.reduce((function(n,i){return t.emit.apply(t,r([e].concat(i)))&&n}),n)}},{key:"queue",value:function(){var e=[].slice.call(arguments);if(this.emit.apply(this,r(e)))return!0;var t=e[0];return this._queuedEvents.has(t)||this._queuedEvents.set(t,[]),this._queuedEvents.get(t).push(e.slice(1)),!1}}]),t}(o("6xYCf").EventEmitter);e.exports=i})),o.register("3Do6d",(function(e,t){"use strict";var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var a=o("6pFSa"),s=o("1ZkA3"),u=o("2DSBI"),c=o("7d3sz"),l=o("3tUyT"),h=o("dR0Yn"),f=o("35GjY"),d=o("5iMC9"),p=o("1yUDr"),m=o("2S2q7"),v=m.constants.DEFAULT_SESSION_TIMEOUT_SEC,g=m.createBandwidthProfilePayload,y=m.defer,b=m.filterObject,w=m.flatMap,_=m.oncePerTick,k=o("6D3Hv").createTwilioError,S=function(e){function t(e,n,r,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n.options=Object.assign({session_timeout:v},n.options),o=Object.assign({DominantSpeakerSignaling:a,NetworkQualityMonitor:s,NetworkQualitySignaling:u,RecordingSignaling:c,RemoteParticipantV2:h,TrackPrioritySignaling:d,TrackSwitchOffSignaling:p,bandwidthProfile:null,sessionTimeout:1e3*n.options.session_timeout,statsPublishIntervalMs:1e4},o),e.setBandwidthProfile(o.bandwidthProfile),i.setIceReconnectTimeout(o.sessionTimeout);var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n.sid,n.name,o));return Object.defineProperties(l,{_dominantSpeakerSignaling:{value:null,writable:!0},_DominantSpeakerSignaling:{value:o.DominantSpeakerSignaling},_dominantSpeakerSignalingPromise:{value:null,writable:!0},_disconnectedParticipantSids:{value:new Set},_NetworkQualityMonitor:{value:o.NetworkQualityMonitor},_NetworkQualitySignaling:{value:o.NetworkQualitySignaling},_lastBandwidthProfileRevision:{value:e.bandwidthProfileRevision,writable:!0},_networkQualityMonitor:{value:null,writable:!0},_networkQualityMonitorPromise:{value:null,writable:!0},_networkQualityConfiguration:{value:e.networkQualityConfiguration},_peerConnectionManager:{value:i},_published:{value:new Map},_publishedRevision:{value:0,writable:!0},_RemoteParticipantV2:{value:o.RemoteParticipantV2},_subscribed:{value:new Map},_subscribedRevision:{value:0,writable:!0},_subscriptionFailures:{value:new Map},_trackPriorityPromise:{value:null,writable:!0},_trackPrioritySignaling:{value:null,writable:!0},_trackSwitchOffPromise:{value:null,writable:!0},_trackSwitchOffSignaling:{value:null,writable:!0},_TrackPrioritySignaling:{value:o.TrackPrioritySignaling},_TrackSwitchOffSignaling:{value:o.TrackSwitchOffSignaling},_transport:{value:r},_trackReceiverDeferreds:{value:new Map},mediaRegion:{enumerable:!0,value:n.options.media_region||null}}),function(e,t){var n=_((function(){e._publishNewLocalParticipantState()})),r=_((function(){var n=w(t.tracks,(function(e){return e.trackTransceiver}));e._peerConnectionManager.setTrackSenders(n)}));t.on("trackAdded",r),t.on("trackRemoved",r),t.on("updated",n),e.on("stateChanged",(function i(o){"disconnected"===o&&(t.removeListener("trackAdded",r),t.removeListener("trackRemoved",r),t.removeListener("updated",n),e.removeListener("stateChanged",i),t.disconnect())})),e.on("signalingConnectionStateChanged",(function(){var t=e.localParticipant,n=e.signalingConnectionState,r=t.identity,i=t.sid;switch(n){case"connected":t.connect(i,r);break;case"reconnecting":t.reconnecting()}}))}(l,e),function(e,t){t.on("description",(function(t){e._publishPeerConnectionState(t)})),t.dequeue("description"),t.on("candidates",(function(t){e._publishPeerConnectionState(t)})),t.dequeue("candidates"),t.on("trackAdded",e._addTrackReceiver.bind(e)),t.dequeue("trackAdded"),t.getTrackReceivers().forEach(e._addTrackReceiver,e),t.on("connectionStateChanged",(function(){e.emit("connectionStateChanged")})),t.on("iceConnectionStateChanged",(function(){e.emit("iceConnectionStateChanged"),"failed"===e.iceConnectionState&&(null!==e.localParticipant.networkQualityLevel&&e.localParticipant.setNetworkQualityLevel(0),e.participants.forEach((function(e){null!==e.networkQualityLevel&&e.setNetworkQualityLevel(0)})))}))}(l,i),function(e,t){t.on("message",e._update.bind(e)),t.on("stateChanged",(function n(r,i){"disconnected"===r&&("disconnected"!==e.state&&e._disconnect(i),t.removeListener("stateChanged",n)),e.emit("signalingConnectionStateChanged")}))}(l,r),function(e,t,n){var r=!1,i=setInterval((function(){e.getStats().then((function(e){r=!r,e.forEach((function(e,n){var i=new f(n,e,!0);if(t.publishEvent("quality","stats-report",{audioTrackStats:i.remoteAudioTrackStats,localAudioTrackStats:i.localAudioTrackStats,localVideoTrackStats:i.localVideoTrackStats,peerConnectionId:i.peerConnectionId,videoTrackStats:i.remoteVideoTrackStats}),r){var o=function(e,t){return(e=Object.assign({availableIncomingBitrate:0,availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,lastPacketReceivedTimestamp:0,lastPacketSentTimestamp:0,nominated:!1,peerConnectionId:t,priority:0,readable:!1,requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,retransmissionsReceived:0,retransmissionsSent:0,state:"failed",totalRoundTripTime:0,transportId:"",writable:!1},b(e||{},null))).localCandidate=Object.assign({candidateType:"host",deleted:!1,ip:"",port:0,priority:0,protocol:"udp",relayProtocol:"udp",url:""},b(e.localCandidate||{},null)),e.remoteCandidate=Object.assign({candidateType:"host",ip:"",port:0,priority:0,protocol:"udp",url:""},b(e.remoteCandidate||{},null)),e}(e.activeIceCandidatePair,i.peerConnectionId);t.publishEvent("quality","active-ice-candidate-pair",o)}}))}),(function(){}))}),n);e.on("stateChanged",(function t(n){"disconnected"===n&&(clearInterval(i),e.removeListener("stateChanged",t))}))}(l,r,o.statsPublishIntervalMs),l._update(n),l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"_deleteTrackReceiverDeferred",value:function(e){return this._trackReceiverDeferreds.delete(e)}},{key:"_getOrCreateTrackReceiverDeferred",value:function(e){var t=this._trackReceiverDeferreds.get(e)||y(),n=this._peerConnectionManager.getTrackReceivers().find((function(t){return t.id===e&&"ended"!==t.readyState}));return n?t.resolve(n):this._trackReceiverDeferreds.set(e,t),t}},{key:"_addTrackReceiver",value:function(e){return this._getOrCreateTrackReceiverDeferred(e.id).resolve(e),this}},{key:"_disconnect",value:function(e){var n=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_disconnect",this).call(this,e);return n&&(this._teardownDominantSpeakerSignaling(),this._teardownNetworkQualityMonitor(),this._transport.disconnect(),this._peerConnectionManager.close()),this.localParticipant.tracks.forEach((function(t){t.publishFailed(e||new Error("LocalParticipant disconnected"))})),n}},{key:"_getTrackReceiver",value:function(e){var t=this;return this._getOrCreateTrackReceiverDeferred(e).promise.then((function(n){return t._deleteTrackReceiverDeferred(e),n}))}},{key:"_getTrackSidsToTrackSignalings",value:function(){var e=w(this.participants,(function(e){return Array.from(e.tracks)}));return new Map(e)}},{key:"_getOrCreateRemoteParticipant",value:function(e){var t=this._RemoteParticipantV2,n=this.participants.get(e.sid),r=this;return n||((n=new t(e,this._getTrackReceiver.bind(this))).on("stateChanged",(function e(t){"disconnected"===t&&(n.removeListener("stateChanged",e),r.participants.delete(n.sid),r._disconnectedParticipantSids.add(n.sid))})),this.connectParticipant(n),n.setTrackPrioritySignaling(this._trackPrioritySignaling)),n}},{key:"_getState",value:function(){return{participant:this.localParticipant.getState()}}},{key:"_maybeAddBandwidthProfile",value:function(e){var t=this.localParticipant,n=t.bandwidthProfile,r=t.bandwidthProfileRevision;return n&&this._lastBandwidthProfileRevision<r?(this._lastBandwidthProfileRevision=r,Object.assign({bandwidth_profile:g(n)},e)):e}},{key:"_publishNewLocalParticipantState",value:function(){this._transport.publish(this._maybeAddBandwidthProfile(this._getState()))}},{key:"_publishPeerConnectionState",value:function(e){this._transport.publish(Object.assign({peer_connections:[e]},this._getState()))}},{key:"_update",value:function(e){var t=this;if(e.subscribed&&e.subscribed.revision>this._subscribedRevision){this._subscribedRevision=e.subscribed.revision,e.subscribed.tracks.forEach((function(e){e.id?(t._subscriptionFailures.delete(e.sid),t._subscribed.set(e.sid,e.id)):e.error&&!t._subscriptionFailures.has(e.sid)&&t._subscriptionFailures.set(e.sid,e.error)}));var n=new Set(e.subscribed.tracks.filter((function(e){return!!e.id})).map((function(e){return e.sid})));this._subscribed.forEach((function(e,r){n.has(r)||t._subscribed.delete(r)}))}var r,i,o=new Set;return(e.participants||[]).forEach((function(e){if(e.sid!==t.localParticipant.sid&&!t._disconnectedParticipantSids.has(e.sid)){var n=t._getOrCreateRemoteParticipant(e);n.update(e),o.add(n)}})),"synced"===e.type&&this.participants.forEach((function(e){o.has(e)||e.disconnect()})),i=(r=this)._getTrackSidsToTrackSignalings(),r._subscriptionFailures.forEach((function(e,t){var n=i.get(t);n&&(r._subscriptionFailures.delete(t),n.subscribeFailed(k(e.code,e.message)))})),i.forEach((function(e){var t=r._subscribed.get(e.sid);(!t||e.isSubscribed&&e.trackTransceiver.id!==t)&&e.setTrackTransceiver(null),t&&r._getTrackReceiver(t).then((function(t){return e.setTrackTransceiver(t)}))})),e.peer_connections&&this._peerConnectionManager.update(e.peer_connections,"synced"===e.type),e.recording&&this.recording.update(e.recording),e.published&&e.published.revision>this._publishedRevision&&(this._publishedRevision=e.published.revision,e.published.tracks.forEach((function(e){e.sid&&t._published.set(e.id,e.sid)})),this.localParticipant.update(e.published)),e.participant&&this.localParticipant.connect(e.participant.sid,e.participant.identity),!this._dominantSpeakerSignalingPromise&&e.media_signaling&&e.media_signaling.active_speaker&&e.media_signaling.active_speaker.transport&&"data-channel"===e.media_signaling.active_speaker.transport.type&&this._setupDataTransportBackedDominantSpeakerSignaling(e.media_signaling.active_speaker.transport.label),!this._networkQualityMonitorPromise&&e.media_signaling&&e.media_signaling.network_quality&&e.media_signaling.network_quality.transport&&"data-channel"===e.media_signaling.network_quality.transport.type&&this._setupDataTransportBackedNetworkQualityMonitor(e.media_signaling.network_quality.transport.label),!this._trackPriorityPromise&&e.media_signaling&&e.media_signaling.track_priority&&e.media_signaling.track_priority.transport&&"data-channel"===e.media_signaling.track_priority.transport.type&&this._setupTrackPrioritySignaling(e.media_signaling.track_priority.transport.label),!this._trackSwitchOffPromise&&e.media_signaling&&e.media_signaling.track_switch_off&&e.media_signaling.track_switch_off.transport&&"data-channel"===e.media_signaling.track_switch_off.transport.type&&this._setupTrackSwitchOffMonitor(e.media_signaling.track_switch_off.transport.label),this}},{key:"_setupTrackPrioritySignaling",value:function(e){var t=this;this._teardownTrackPrioritySignaling();var n=this._getTrackReceiver(e).then((function(e){if("data"!==e.kind)throw new Error("Expected a DataTrackReceiver");t._trackPriorityPromise===n&&(e.once("close",(function(){return t._teardownTrackPrioritySignaling()})),t._trackPrioritySignaling=new t._TrackPrioritySignaling(e.toDataTransport()),[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t.participants.values())).forEach((function(e){e.setTrackPrioritySignaling(t._trackPrioritySignaling)})))}));this._trackPriorityPromise=n}},{key:"_setupTrackSwitchOff",value:function(e){var t=this;this._trackSwitchOffSignaling=e,e.on("updated",(function(e,n){t.participants.forEach((function(t){t.tracks.forEach((function(t){e.includes(t.sid)&&t.setSwitchedOff(!0),n.includes(t.sid)&&t.setSwitchedOff(!1)}))}))}))}},{key:"_setupTrackSwitchOffMonitor",value:function(e){var t=this;this._teardownTrackSwitchOff();var n=this._getTrackReceiver(e).then((function(e){if("data"!==e.kind)throw new Error("Expected a DataTrackReceiver");if(t._trackSwitchOffPromise===n){e.once("close",(function(){return t._teardownTrackSwitchOff()}));var r=new t._TrackSwitchOffSignaling(e.toDataTransport());t._setupTrackSwitchOff(r)}}));this._trackSwitchOffPromise=n}},{key:"_setupDataTransportBackedDominantSpeakerSignaling",value:function(e){var t=this;this._teardownDominantSpeakerSignaling();var n=this._getTrackReceiver(e).then((function(e){if("data"!==e.kind)throw new Error("Expected a DataTrackReceiver");if(t._dominantSpeakerSignalingPromise===n){e.once("close",(function(){return t._teardownDominantSpeakerSignaling()}));var r=new t._DominantSpeakerSignaling(e.toDataTransport());t._setDominantSpeakerSignaling(r)}}));this._dominantSpeakerSignalingPromise=n}},{key:"_setupDataTransportBackedNetworkQualityMonitor",value:function(e){var t=this,n=this;this._teardownNetworkQualityMonitor();var r=this._getTrackReceiver(e).then((function(e){if("data"!==e.kind)throw new Error("Expected a DataTrackReceiver");if(t._networkQualityMonitorPromise===r){e.once("close",(function(){return t._teardownNetworkQualityMonitor()}));var i=new t._NetworkQualitySignaling(e.toDataTransport(),n._networkQualityConfiguration),o=new t._NetworkQualityMonitor(t._peerConnectionManager,i);t._setNetworkQualityMonitor(o)}}));this._networkQualityMonitorPromise=r}},{key:"_setDominantSpeakerSignaling",value:function(e){var t=this;this._dominantSpeakerSignaling=e,e.on("updated",(function(){return t.setDominantSpeaker(e.loudestParticipantSid)}))}},{key:"_setNetworkQualityMonitor",value:function(e){var t=this;this._networkQualityMonitor=e,e.on("updated",(function(){"failed"!==t.iceConnectionState&&(t.localParticipant.setNetworkQualityLevel(e.level,e.levels),t.participants.forEach((function(t){var n=e.remoteLevels.get(t.sid);n&&t.setNetworkQualityLevel(n.level,n)})))})),e.start()}},{key:"_teardownDominantSpeakerSignaling",value:function(){this._dominantSpeakerSignalingPromise=null,this._dominantSpeakerSignaling=null}},{key:"_teardownNetworkQualityMonitor",value:function(){this._networkQualityMonitorPromise=null,this._networkQualityMonitor&&(this._networkQualityMonitor.stop(),this._networkQualityMonitor=null)}},{key:"_teardownTrackPrioritySignaling",value:function(){this._trackPrioritySignaling=null,this._trackPriorityPromise=null,this.localParticipant.setTrackPrioritySignaling(null),this.participants.forEach((function(e){e.setTrackPrioritySignaling(null)}))}},{key:"_teardownTrackSwitchOff",value:function(){this._trackSwitchOffSignaling=null,this._trackSwitchOffPromise=null}},{key:"getStats",value:function(){var e=this;return this._peerConnectionManager.getStats().then((function(t){return new Map(Array.from(t).map((function(t){var r=n(t,2),i=r[0],o=r[1];return[i,Object.assign({},o,{localAudioTrackStats:M(e,o.localAudioTrackStats),localVideoTrackStats:M(e,o.localVideoTrackStats),remoteAudioTrackStats:T(e,o.remoteAudioTrackStats),remoteVideoTrackStats:T(e,o.remoteVideoTrackStats)})]})))}))}},{key:"connectionState",get:function(){return this._peerConnectionManager.connectionState}},{key:"signalingConnectionState",get:function(){return"syncing"===this._transport.state?"reconnecting":this._transport.state}},{key:"iceConnectionState",get:function(){return this._peerConnectionManager.iceConnectionState}}]),t}(l);function E(e,t){return t.reduce((function(t,n){var r=e.get(n.trackId);return r?[Object.assign({},n,{trackSid:r})].concat(t):t}),[])}function M(e,t){return E(e._published,t)}function T(e,t){return E(new Map(Array.from(e._subscribed.entries()).map((function(e){var t=n(e,2),r=t[0];return[t[1],r]}))),t)}e.exports=S})),o.register("6pFSa",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object.defineProperties(n,{_loudestParticipantSid:{value:null,writable:!0}}),e.on("message",(function(e){switch(e.type){case"active_speaker":n._setLoudestParticipantSid(e.participant)}})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"_setLoudestParticipantSid",value:function(e){this.loudestParticipantSid!==e&&(this._loudestParticipantSid=e,this.emit("updated"))}},{key:"loudestParticipantSid",get:function(){return this._loudestParticipantSid}}]),t}(o("6xYCf").EventEmitter);e.exports=r})),o.register("1ZkA3",(function(e,t){"use strict";var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=o("6xYCf"),a=o("01hBv"),s=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object.defineProperties(r,{_factories:{value:new WeakMap},_manager:{value:e},_signaling:{value:n}}),n.on("updated",(function(){return r.emit("updated")})),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"start",value:function(){var e=this;this.stop();var t=setTimeout((function(){var r,i;e._timeout===t&&(r=e,i=(r._manager._peerConnections?Array.from(r._manager._peerConnections.values()):[]).map((function(e){return e._peerConnection})).filter((function(e){return"closed"!==e.signalingState})).map((function(e){if(r._factories.has(e))return r._factories.get(e);var t=new a(e);return r._factories.set(e,t),t})).map((function(e){return e.next().catch((function(){return null}))})),Promise.all(i).then((function(e){return e.filter((function(e){return e})).map((function(e){return e.summarize()}))}))).then((function(r){if(e._timeout===t){if(r.length){var i=n(r,1)[0];e._signaling.put(i)}e.start()}}))}),200);this._timeout=t}},{key:"stop",value:function(){clearTimeout(this._timeout),this._timeout=null}},{key:"level",get:function(){return this._signaling.level}},{key:"levels",get:function(){return this._signaling.levels}},{key:"remoteLevels",get:function(){return this._signaling.remoteLevels}}]),t}(i);e.exports=s})),o.register("01hBv",(function(e,t){"use strict";var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var a=o("6YI9h").guessBrowser,s=o("2lL27"),u=o("NHPvV"),c=o("6bM2x"),l=o("1bmuu"),h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{pc:{enumerable:!0,value:t},ice:{enumerable:!0,value:new s},audio:{enumerable:!0,value:{send:new Map,recv:new Map}},video:{enumerable:!0,value:{send:new Map,recv:new Map}},lastReport:{enumerable:!0,value:null,writable:!0}})}return r(e,[{key:"next",value:function(){var e,t,r,o=this;return("firefox"===a()?(t=(e=this).pc.getTransceivers().filter((function(e){return e.currentDirection&&e.currentDirection.match(/send/)&&e.sender.track})).map((function(e){return e.sender})),r=e.pc.getTransceivers().filter((function(e){return e.currentDirection&&e.currentDirection.match(/recv/)})).map((function(e){return e.receiver})),Promise.all([f(t),f(r),e.pc.getStats()]).then((function(t){var r=n(t,3),i=r[0],o=r[1],a=r[2],s=p(e),u=y(e);i.forEach((function(t,n){return w(e,t,u,n)})),k(s,u);var c=m(e),l=b(e);o.forEach((function(t,n){return _(e,t,l,n)})),k(c,l),S(e.ice,a)}))):function(e){return e.pc.getStats().then((function(t){var n=p(e),r=y(e);w(e,t,r),k(n,r);var i=m(e),o=b(e);_(e,t,o),k(i,o),S(e.ice,t)}))}(this)).then((function(){var e=[].concat(i(o.audio.send.values())),t=[].concat(i(o.video.send.values())),n=[].concat(i(o.audio.recv.values())),r=[].concat(i(o.video.recv.values())),a=new u(o.ice.lastReport,{send:e.map((function(e){return e.lastReport})).filter((function(e){return e})),recv:n.map((function(e){return e.lastReport})).filter((function(e){return e}))},{send:t.map((function(e){return e.lastReport})).filter((function(e){return e})),recv:r.map((function(e){return e.lastReport})).filter((function(e){return e}))});return o.lastReport=a,a}))}}]),e}();function f(e){return Promise.all(e.map((function(e){var t=e.track.id;return e.getStats().then((function(e){var n=!0,r=!1,i=void 0;try{for(var o,a=e.values()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;"inbound-rtp"===s.type&&(s.id=t+"-"+s.id)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return[t,e]}))}))).then((function(e){return new Map(e)}))}function d(e,t,n,r,i){var o=t[r.mediaType];if(!i){var a=n.get(r.trackId);a&&(i=a.trackIdentifier)}if(o&&i){if(o.has(r.id))return o.get(r.id);var s=new e(i,r);o.set(r.id,s)}return null}function p(e){return{audio:e.audio.send,video:e.video.send}}function m(e){return{audio:e.audio.recv,video:e.video.recv}}function v(e,t,n,r){return d(l,p(e),t,n,r)}function g(e,t,n,r){return d(c,m(e),t,n,r)}function y(e){return{audio:new Set(e.audio.send.keys()),video:new Set(e.video.send.keys())}}function b(e){return{audio:new Set(e.audio.recv.keys()),video:new Set(e.video.recv.keys())}}function w(e,t,n,r){var i=!0,o=!1,s=void 0;try{for(var u,c=t.values()[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var l=u.value;if("outbound-rtp"===l.type&&!l.isRemote){if("firefox"!==a()&&!l.trackId)continue;var h=n[l.mediaType];h&&h.delete(l.id);var f=v(e,t,l,r);if(f){var d=t.get(l.remoteId);f.next(r||f.trackId,l,d)}}}}catch(e){o=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw s}}}function _(e,t,n,r){var i=!0,o=!1,a=void 0;try{for(var s,u=t.values()[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if("inbound-rtp"===c.type&&!c.isRemote){var l=n[c.mediaType];l&&l.delete(c.id);var h=g(e,t,c,r);h&&h.next(r||h.trackId,c)}}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}function k(e,t){var n=function(n){var r=e[n];t[n].forEach((function(e){return r.delete(e)}))};for(var r in t)n(r)}function S(e,t){var n=void 0,r=!0,i=!1,o=void 0;try{for(var a,s=t.values()[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;"transport"===u.type&&(n=t.get(u.selectedCandidatePairId))}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}if(n)e.next(n);else{var c=!0,l=!1,h=void 0;try{for(var f,d=t.values()[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var p=f.value;"candidate-pair"!==p.type||!p.nominated||"selected"in p&&!p.selected||e.next(p)}}catch(e){l=!0,h=e}finally{try{!c&&d.return&&d.return()}finally{if(l)throw h}}}}e.exports=h})),o.register("2lL27",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("2KGnJ"),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{lastReport:{enumerable:!0,value:new r(0,0),writable:!0},lastStats:{enumerable:!0,value:null,writable:!0}})}return n(e,[{key:"next",value:function(e){var t=this.lastStats;if(this.lastStats=e,t){var n=t.id===e.id?r.of(t,e):new r(0,0);this.lastReport=n}return this.lastReport}}]),e}();e.exports=i})),o.register("2KGnJ",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{availableSend:{enumerable:!0,value:r},recv:{enumerable:!0,value:n},rtt:{enumerable:!0,value:i},send:{enumerable:!0,value:t}})}return n(e,null,[{key:"of",value:function(t,n){var r=(n.timestamp-t.timestamp)/1e3,i=n.bytesSent-t.bytesSent,o=n.bytesReceived-t.bytesReceived;return new e(r>0?i/r*8:0,r>0?o/r*8:0,n.availableOutgoingBitrate,n.currentRoundTripTime)}}]),e}();e.exports=r})),o.register("NHPvV",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("3XVil"),i=o("6bW1m"),a=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{ice:{enumerable:!0,value:t},audio:{enumerable:!0,value:n},video:{enumerable:!0,value:r}})}return n(e,[{key:"summarize",value:function(){var e=this.audio.send.concat(this.video.send),t=i.summarize(e),n=this.audio.recv.concat(this.video.recv),o=r.summarize(n);return{ice:this.ice,send:t,recv:o,audio:{send:i.summarize(this.audio.send),recv:r.summarize(this.audio.recv)},video:{send:i.summarize(this.video.send),recv:r.summarize(this.video.recv)}}}}]),e}();e.exports=a})),o.register("3XVil",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("43zFT"),i=o("2HOd6"),a=o("t9KGZ"),s=function(e){function t(e,n,r,i,o,a,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r)),c=o>0?i/o:0;return Object.defineProperties(u,{deltaPacketsLost:{enumerable:!0,value:i},deltaPacketsReceived:{enumerable:!0,value:o},fractionLost:{enumerable:!0,value:a},jitter:{enumerable:!0,value:s},phonyFractionLost:{enumerable:!0,value:c}}),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"summarize",value:function(){return{bitrate:this.bitrate,fractionLost:"number"==typeof this.fractionLost?this.fractionLost:this.phonyFractionLost,jitter:this.jitter}}}],[{key:"of",value:function(e,n,r){if(n.id!==r.id)throw new Error("RTCStats IDs must match");var i=(r.timestamp-n.timestamp)/1e3,o=r.bytesReceived-n.bytesReceived,a=i>0?o/i*8:0,s=Math.max(r.packetsLost-n.packetsLost,0),u=r.packetsReceived-n.packetsReceived,c=r.fractionLost,l=r.jitter;return new t(n.id,e,a,s,u,c,l)}},{key:"summarize",value:function(e){var t=e.map((function(e){return e.summarize()}));return{bitrate:a(t.map((function(e){return e.bitrate}))),fractionLost:r(t.map((function(e){return e.fractionLost}))),jitter:r(t.map((function(e){return e.jitter})))}}}]),t}(i);e.exports=s})),o.register("43zFT",(function(e,t){"use strict";e.exports=function(e){return(e=e.filter((function(e){return"number"==typeof e}))).length<1?void 0:e.reduce((function(e,t){return t+e}))/e.length}})),o.register("2HOd6",(function(e,t){"use strict";e.exports=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{id:{enumerable:!0,value:t},trackId:{enumerable:!0,value:n},bitrate:{enumerable:!0,value:r}})}})),o.register("t9KGZ",(function(e,t){"use strict";e.exports=function(e){return e.reduce((function(e,t){return"number"==typeof t?t+e:e}),0)}})),o.register("6bW1m",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("43zFT"),i=o("2HOd6"),a=o("t9KGZ"),s=function(e){function t(e,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));return Object.defineProperties(o,{rtt:{enumerable:!0,value:i}}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,null,[{key:"of",value:function(e,n,r,i){if(n.id!==r.id)throw new Error("RTCStats IDs must match");var o=(r.timestamp-n.timestamp)/1e3,a=r.bytesSent-n.bytesSent,s=o>0?a/o*8:0,u=i&&"number"==typeof i.roundTripTime?i.roundTripTime/1e3:void 0;return new t(n.id,e,s,u)}},{key:"summarize",value:function(e){return{bitrate:a(e.map((function(e){return e.bitrate}))),rtt:r(e.map((function(e){return e.rtt})))}}}]),t}(i);e.exports=s})),o.register("6bM2x",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("3XVil"),i=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n.id,e,n));return Object.defineProperties(r,{lastReport:{enumerable:!0,value:null,writable:!0}}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"next",value:function(e,t){var n=this.lastStats;this.lastStats=t,this.trackId=e;var i=r.of(e,n,t);return this.lastReport=i,i}}]),t}(o("2Pmm6"));e.exports=i})),o.register("2Pmm6",(function(e,t){"use strict";e.exports=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{id:{enumerable:!0,value:t,writable:!0},trackId:{enumerable:!0,value:n,writable:!0},lastStats:{enumerable:!0,value:r,writable:!0}})}})),o.register("1bmuu",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("2Pmm6"),i=o("6bW1m"),a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n.id,e,n));return Object.defineProperties(r,{lastReport:{enumerable:!0,value:null,writable:!0}}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"next",value:function(e,t,n){var r=this.lastStats;this.lastStats=t,this.trackId=e;var o=i.of(e,r,t,n);return this.lastReport=o,o}}]),t}(r);e.exports=a})),o.register("2DSBI",(function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=o("6xYCf").EventEmitter,a=o("3VTMA"),s=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object.defineProperties(r,{_level:{value:null,writable:!0},_levels:{value:null,writable:!0},_remoteLevels:{value:new Map,writable:!0},_mediaSignalingTransport:{value:e},_networkQualityInputs:{value:new a},_networkQualityReportLevels:{get:function(){return{reportLevel:n.local,remoteReportLevel:n.remote}}}}),e.on("message",(function(e){switch(e.type){case"network_quality":r._handleNetworkQualityMessage(e)}})),r._sendNetworkQualityInputs(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"_handleNetworkQualityMessage",value:function(e){var t=this,r=!1,i=null,o=e?e.local:null;"number"==typeof o?(i=o,this._levels=null):"object"===(void 0===o?"undefined":n(o))&&o&&(this._levels=o,i="number"==typeof o.level?o.level:Math.min(o.audio.send,o.audio.recv,o.video.send,o.video.recv)),null!==i&&this.level!==i&&(this._level=i,r=!0),this._remoteLevels=e&&e.remotes?e.remotes.reduce((function(e,n){return(t._remoteLevels.get(n.sid)||{}).level!==n.level&&(r=!0),e.set(n.sid,n)}),new Map):this._remoteLevels,r&&this.emit("updated"),setTimeout((function(){return t._sendNetworkQualityInputs()}),1e3)}},{key:"_sendNetworkQualityInputs",value:function(){var e=this;return this._networkQualityInputs.take().then((function(t){e._mediaSignalingTransport.publish(function(e,t){return Object.assign({type:"network_quality"},e,t)}(t,e._networkQualityReportLevels))}))}},{key:"put",value:function(e){this._networkQualityInputs.put(e)}},{key:"level",get:function(){return this._level}},{key:"levels",get:function(){return this._levels}},{key:"remoteLevels",get:function(){return this._remoteLevels}}]),t}(i);e.exports=s})),o.register("3VTMA",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("2S2q7").defer,i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{_deferreds:{value:[]},_hasValue:{value:!1,writable:!0},_value:{value:null,writable:!0}})}return n(e,[{key:"put",value:function(e){this._hasValue=!0,this._value=e;var t=this._deferreds.shift();return t&&t.resolve(e),this}},{key:"take",value:function(){var e=this;if(this._hasValue&&!this._deferreds.length)return this._hasValue=!1,Promise.resolve(this._value);var t=r();return this._deferreds.push(t),t.promise.then((function(t){return e._hasValue=!1,t}))}}]),e}();e.exports=i})),o.register("7d3sz",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object.defineProperties(e,{_revision:{value:1,writable:!0}}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"update",value:function(e){return e.revision<this._revision?this:(this._revision=e.revision,this.enable(e.enabled))}}]),t}(o("1Kxe7"));e.exports=r})),o.register("1Kxe7",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object.defineProperties(e,{_isEnabled:{value:null,writable:!0},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}}}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"disable",value:function(){return this.enable(!1)}},{key:"enable",value:function(e){return e="boolean"!=typeof e||e,this.isEnabled!==e&&(this._isEnabled=e,this.emit("updated")),this}}]),t}(o("6xYCf").EventEmitter);e.exports=r})),o.register("3tUyT",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("1Kxe7"),i=o("56JJ3"),a=o("5WF7N"),s=o("6D3Hv"),u=s.MediaConnectionError,c=s.MediaDTLSTransportFailedError,l=s.SignalingConnectionDisconnectedError,h={connected:["reconnecting","disconnected"],reconnecting:["connected","disconnected"],disconnected:[]},f=function(e){function t(e,n,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=Object.assign({RecordingSignaling:r,Timeout:a},o);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"connected",h)),u=o.RecordingSignaling,l=new o.Timeout((function(){s._disconnect(s._reconnectingError)}),o.sessionTimeout,!1);return Object.defineProperties(s,{_mediaConnectionIsReconnecting:{writable:!0,value:!1},_options:{value:o},_reconnectingError:{value:null,writable:!0},_sessionTimeout:{value:l},dominantSpeakerSid:{enumerable:!0,value:null,writable:!0},localParticipant:{enumerable:!0,value:e},name:{enumerable:!0,value:i},participants:{enumerable:!0,value:new Map},recording:{enumerable:!0,value:new u},sid:{enumerable:!0,value:n}}),s.on("connectionStateChanged",(function(){"failed"!==s.connectionState||["disconnected","failed"].includes(s.iceConnectionState)||s._disconnect(new c)})),s.on("iceConnectionStateChanged",(function(){return d(s)})),s.on("signalingConnectionStateChanged",(function(){return d(s)})),setTimeout((function(){return d(s)})),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"_disconnect",value:function(e){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[e]),!0)}},{key:"connectParticipant",value:function(e){var t=this;return"disconnected"!==e.state&&(!this.participants.has(e.sid)&&(this.participants.set(e.sid,e),e.on("stateChanged",(function n(r){"disconnected"===r&&(e.removeListener("stateChanged",n),t.participants.delete(e.sid),t.emit("participantDisconnected",e))})),this.emit("participantConnected",e),!0))}},{key:"disconnect",value:function(){return this._disconnect()}},{key:"setDominantSpeaker",value:function(e){this.dominantSpeakerSid=e,this.emit("dominantSpeakerChanged")}}]),t}(i);function d(e){if("disconnected"!==e.state&&"disconnected"!==e.signalingConnectionState){var t=void 0;"reconnecting"===e.signalingConnectionState?t=e.signalingConnectionState:"failed"===e.iceConnectionState?(e._mediaConnectionIsReconnecting=!0,t="reconnecting"):"new"===e.iceConnectionState||"checking"===e.iceConnectionState?t=e._mediaConnectionIsReconnecting?"reconnecting":"connected":(e._mediaConnectionIsReconnecting=!1,e._reconnectingError=null,e._sessionTimeout.clear(),t="connected"),t!==e.state&&("reconnecting"===t?(e._reconnectingError="reconnecting"===e.signalingConnectionState?new l:new u,e._sessionTimeout.start(),e.preempt(t,null,[e._reconnectingError])):e.preempt(t))}else e._sessionTimeout.clear()}e.exports=f})),o.register("dR0Yn",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var i=o("1stCY"),a=o("6XpY5"),s=function(e){function t(e,n,i){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.sid,e.identity));return i=Object.assign({RemoteTrackPublicationV2:a},i),Object.defineProperties(s,{_revision:{writable:!0,value:null},_RemoteTrackPublicationV2:{value:i.RemoteTrackPublicationV2},_getTrackReceiver:{value:n},revision:{enumerable:!0,get:function(){return this._revision}}}),o=s.update(e),r(s,o)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"_getOrCreateTrack",value:function(e){var t=this._RemoteTrackPublicationV2,n=this.tracks.get(e.sid);return n||(n=new t(e),this.addTrack(n)),n}},{key:"update",value:function(e){var t=this;if(null!==this.revision&&e.revision<=this.revision)return this;this._revision=e.revision;var n=new Set;switch(e.tracks.forEach((function(e){var r=t._getOrCreateTrack(e);r.update(e),n.add(r)})),this.tracks.forEach((function(e){n.has(e)||t.removeTrack(e)})),e.state){case"disconnected":this.disconnect();break;case"reconnecting":this.reconnecting();break;case"connected":this.connect(this.sid,this.identity)}return this}}]),t}(i);e.exports=s})),o.register("1stCY",(function(e,t){"use strict";var n=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.connect(e,n),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o("ufvQC"));e.exports=n})),o.register("ufvQC",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("56JJ3"),i=o("4bYAt"),a={connecting:["connected"],connected:["disconnected","reconnecting"],reconnecting:["connected","disconnected"],disconnected:[]},s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"connecting",a));return Object.defineProperties(e,{_enqueuedPriorityUpdates:{value:new Map},_identity:{writable:!0,value:null},_networkQualityLevel:{value:null,writable:!0},_networkQualityStats:{value:null,writable:!0},_sid:{writable:!0,value:null},_trackPrioritySignaling:{value:null,writable:!0},identity:{enumerable:!0,get:function(){return this._identity}},sid:{enumerable:!0,get:function(){return this._sid}},tracks:{enumerable:!0,value:new Map}}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"addTrack",value:function(e){return this.tracks.set(e.id||e.sid,e),this.emit("trackAdded",e),this}},{key:"disconnect",value:function(){return"disconnected"!==this.state&&(this.preempt("disconnected"),!0)}},{key:"removeTrack",value:function(e){var t=this.tracks.get(e.id||e.sid);return this.tracks.delete(e.id||e.sid),t&&this.emit("trackRemoved",e),t||null}},{key:"setNetworkQualityLevel",value:function(e,t){this._networkQualityLevel!==e&&(this._networkQualityLevel=e,this._networkQualityStats=t&&(t.audio||t.video)?new i(t):null,this.emit("networkQualityLevelChanged"))}},{key:"updateSubscriberTrackPriority",value:function(e,t){this._enqueuedPriorityUpdates.set(e,t),this._trackPrioritySignaling&&this._trackPrioritySignaling.sendTrackPriorityUpdate(e,"subscribe",t)}},{key:"setTrackPrioritySignaling",value:function(e){var t=this;return this._trackPrioritySignaling=e,e&&this._enqueuedPriorityUpdates.forEach((function(e,n){t._trackPrioritySignaling.sendTrackPriorityUpdate(n,"subscribe",e)})),this}},{key:"connect",value:function(e,t){return("connecting"===this.state||"reconnecting"===this.state)&&(this._sid||(this._sid=e),this._identity||(this._identity=t),this.preempt("connected"),!0)}},{key:"reconnecting",value:function(){return("connecting"===this.state||"connected"===this.state)&&(this.preempt("reconnecting"),!0)}},{key:"networkQualityLevel",get:function(){return this._networkQualityLevel}},{key:"networkQualityStats",get:function(){return this._networkQualityStats}}]),t}(r);e.exports=s})),o.register("4bYAt",(function(e,t){"use strict";var n=o("4eJdJ"),r=o("1H0L2");e.exports=function e(t){var i=t.level,o=t.audio,a=t.video;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{level:{value:i,enumerable:!0},audio:{value:o?new n(o):null,enumerable:!0},video:{value:a?new r(a):null,enumerable:!0}})}})),o.register("4eJdJ",(function(e,t){"use strict";var n=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o("55d2d"));e.exports=n})),o.register("55d2d",(function(e,t){"use strict";var n=o("11fRN"),r=o("1Xvnr");e.exports=function e(t){var i=t.send,o=t.recv,a=t.sendStats,s=void 0===a?null:a,u=t.recvStats,c=void 0===u?null:u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{send:{value:i,enumerable:!0},recv:{value:o,enumerable:!0},sendStats:{value:s?new n(s):null,enumerable:!0},recvStats:{value:c?new r(c):null,enumerable:!0}})}})),o.register("11fRN",(function(e,t){"use strict";var n=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o("7ac0z"));e.exports=n})),o.register("7ac0z",(function(e,t){"use strict";var n=o("6ZLE6"),r=o("5T8p8"),i=o("7hQZV");e.exports=function e(t){var o=t.bandwidth,a=void 0===o?null:o,s=t.fractionLost,u=void 0===s?null:s,c=t.latency,l=void 0===c?null:c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{bandwidth:{value:a?new n(a):null,enumerable:!0},fractionLost:{value:u?new r(u):null,enumerable:!0},latency:{value:l?new i(l):null,enumerable:!0}})}})),o.register("6ZLE6",(function(e,t){"use strict";e.exports=function e(t){var n=t.actual,r=void 0===n?null:n,i=t.available,o=void 0===i?null:i,a=t.level,s=void 0===a?null:a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{actual:{value:r,enumerable:!0},available:{value:o,enumerable:!0},level:{value:s,enumerable:!0}})}})),o.register("5T8p8",(function(e,t){"use strict";e.exports=function e(t){var n=t.fractionLost,r=void 0===n?null:n,i=t.level,o=void 0===i?null:i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{fractionLost:{value:r,enumerable:!0},level:{value:o,enumerable:!0}})}})),o.register("7hQZV",(function(e,t){"use strict";e.exports=function e(t){var n=t.jitter,r=void 0===n?null:n,i=t.rtt,o=void 0===i?null:i,a=t.level,s=void 0===a?null:a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{jitter:{value:r,enumerable:!0},rtt:{value:o,enumerable:!0},level:{value:s,enumerable:!0}})}})),o.register("1Xvnr",(function(e,t){"use strict";var n=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o("7ac0z"));e.exports=n})),o.register("1H0L2",(function(e,t){"use strict";var n=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o("55d2d"));e.exports=n})),o.register("6XpY5",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.sid,e.name,e.kind,e.enabled,e.priority))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"update",value:function(e){return this.enable(e.enabled),this.setPriority(e.priority),this}}]),t}(o("323cZ"));e.exports=r})),o.register("323cZ",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(e){function t(e,n,r,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,r,i,o));return Object.defineProperties(a,{_isSwitchedOff:{value:!1,writable:!0}}),a.setSid(e),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"subscribeFailed",value:function(e){return this.error||(this._error=e,this.emit("updated")),this}},{key:"setPriority",value:function(e){return this._priority!==e&&(this._priority=e,this.emit("updated")),this}},{key:"setSwitchedOff",value:function(e){return this._isSwitchedOff!==e&&(this._isSwitchedOff=e,this.emit("updated")),this}},{key:"isSubscribed",get:function(){return!!this.trackTransceiver}},{key:"isSwitchedOff",get:function(){return this._isSwitchedOff}}]),t}(o("4Z9aa"));e.exports=r})),o.register("4Z9aa",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(e){function t(e,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),a=null;return Object.defineProperties(o,{_error:{value:null,writable:!0},_isEnabled:{value:r,writable:!0},_priority:{value:i,writable:!0},_trackTransceiver:{value:null,writable:!0},_sid:{get:function(){return a},set:function(e){null===a&&(a=e)}},kind:{enumerable:!0,value:n},name:{enumerable:!0,value:e}}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"disable",value:function(){return this.enable(!1)}},{key:"enable",value:function(e){return e="boolean"!=typeof e||e,this.isEnabled!==e&&(this._isEnabled=e,this.emit("updated")),this}},{key:"setTrackTransceiver",value:function(e){return e=e||null,this.trackTransceiver!==e&&(this._trackTransceiver=e,this.emit("updated")),this}},{key:"setSid",value:function(e){return null===this.sid&&(this._sid=e,this.emit("updated")),this}},{key:"error",get:function(){return this._error}},{key:"isEnabled",get:function(){return this._isEnabled}},{key:"priority",get:function(){return this._priority}},{key:"sid",get:function(){return this._sid}},{key:"trackTransceiver",get:function(){return this._trackTransceiver}}]),t}(o("6xYCf").EventEmitter);e.exports=r})),o.register("5iMC9",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{_mediaSignalingTransport:{value:t}})}return n(e,[{key:"sendTrackPriorityUpdate",value:function(e,t,n){this._mediaSignalingTransport.publish(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({type:"track_priority",track:e},t,n))}}]),e}();e.exports=r})),o.register("1yUDr",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.on("message",(function(e){switch(e.type){case"track_switch_off":n._setTrackSwitchOffUpdates(e.off||[],e.on||[])}})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"_setTrackSwitchOffUpdates",value:function(e,t){this.emit("updated",e,t)}}]),t}(o("6xYCf").EventEmitter);e.exports=r})),o.register("49dgk",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("4w4ZI").getSdpFormat,i=o("4rEX5"),a=o("2JDin"),s=o("56JJ3"),u=o("VWPJN"),c=o("2ZZtP"),l=o("72UdZ").reconnectBackoffConfig,h=o("5WF7N"),f=o("2S2q7"),d=f.createBandwidthProfilePayload,p=f.createMediaSignalingPayload,m=f.createSubscribePayload,v=f.getUserAgent,g=o("6D3Hv"),y=g.createTwilioError,b=g.RoomCompletedError,w=g.SignalingConnectionError,_=g.SignalingServerBusyError,k=GL.name+".js",S=GL.version,E={connecting:["connected","disconnected"],connected:["disconnected","syncing"],syncing:["connected","disconnected"],disconnected:[]},M=function(e){function t(e,n,o,s,h,f){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f=Object.assign({Backoff:c,InsightsPublisher:i,NullInsightsPublisher:a,TwilioConnection:u,iceServers:null,sdpFormat:r(f.sdpSemantics),trackPriority:!0,trackSwitchOff:!0,userAgent:v()},f);var d=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"connecting",E)),p={};f.wsServerInsights&&(p.gateway=f.wsServerInsights);var m=f.insights?f.InsightsPublisher:f.NullInsightsPublisher;return Object.defineProperties(d,{_accessToken:{value:n},_automaticSubscription:{value:f.automaticSubscription},_bandwidthProfile:{value:f.bandwidthProfile},_dominantSpeaker:{value:f.dominantSpeaker},_eventPublisher:{value:new m(n,k,S,f.environment,f.realm,p)},_iceServersStatus:{value:Array.isArray(f.iceServers)?"overrode":"acquire"},_localParticipant:{value:o},_name:{value:e},_networkQuality:{value:f.networkQuality},_options:{value:f},_peerConnectionManager:{value:s},_sessionTimer:{value:null,writable:!0},_sessionTimeoutMS:{value:0,writable:!0},_reconnectBackoff:{value:f.Backoff.exponential(l)},_session:{value:null,writable:!0},_trackPriority:{value:f.trackPriority},_trackSwitchOff:{value:f.trackSwitchOff},_twilioConnection:{value:null,writable:!0},_updatesReceived:{value:[]},_updatesToSend:{value:[]},_userAgent:{value:f.userAgent},_wsServer:{value:h}}),f.eventObserver&&f.eventObserver.setPublisher(d._eventPublisher),function(e){function t(){if("disconnected"!==e.state){e._twilioConnection&&e._twilioConnection.removeListener("message",r);var t=e._iceServersStatus,i=e._options,o=e._wsServer,a=e.state,s=i.TwilioConnection,u=new s(o,Object.assign({helloBody:"connecting"===a&&"acquire"===t?e._createIceMessage():e._createConnectOrSyncOrDisconnectMessage()},i));u.once("close",(function(e){e===s.CloseReason.LOCAL?n():n(new Error(e))})),u.on("message",r),e._twilioConnection=u}}function n(n){if("disconnected"!==e.state)if(n){var r=e._getReconnectTimer();if(r)"connected"===e.state&&e.preempt("syncing"),r.then(t);else{var i=n.message===u.CloseReason.BUSY?new _:new w;e.disconnect(i)}}else e.disconnect()}function r(t){if("disconnected"!==e.state)if("error"!==t.type)switch(e.state){case"connected":switch(t.type){case"connected":case"synced":case"update":return void e.emit("message",t);case"disconnected":return void e.disconnect("completed"===t.status?new b:null);default:return}case"connecting":switch(t.type){case"iced":return void e._options.onIced(t.ice_servers).then((function(){e._sendConnectOrSyncOrDisconnectMessage()}));case"connected":return e._setSession(t.session,t.options.session_timeout),e.emit("connected",t),void e.preempt("connected");case"synced":case"update":return void e._updatesReceived.push(t);case"disconnected":return void e.disconnect("completed"===t.status?new b:null);default:return}case"syncing":switch(t.type){case"connected":case"update":return void e._updatesReceived.push(t);case"synced":return e._clearReconnectTimer(),e.emit("message",t),void e.preempt("connected");case"disconnected":return void e.disconnect("completed"===t.status?new b:null);default:return}default:return}else e.disconnect(y(t.code,t.message))}e.on("stateChanged",(function t(n){switch(n){case"connected":var i=e._updatesToSend.splice(0);return i.length&&e.publish(function(e){return e.reduce((function(e,t){return(!e.participant&&t.participant||e.participant&&t.participant&&t.participant.revision>e.participant.revision)&&(e.participant=t.participant),!e.peer_connections&&t.peer_connections?e.peer_connections=T(t.peer_connections):e.peer_connections&&t.peer_connections&&(e.peer_connections=T(e.peer_connections.concat(t.peer_connections))),e}),{})}(i)),void e._updatesReceived.splice(0).forEach((function(t){return e.emit("message",t)}));case"disconnected":return e._twilioConnection.removeListener("message",r),void e.removeListener("stateChanged",t);case"syncing":default:return}}));var i=e._options,o=e._iceServersStatus,a=i.iceServers,s=i.onIced;"overrode"===o?s(a).then(t):t()}(d),d.once("connected",(function(e){var t=e.sid,n=e.participant;d._eventPublisher.connect(t,n.sid)})),d}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"_createConnectOrSyncOrDisconnectMessage",value:function(){if("connected"===this.state)return null;if("disconnected"===this.state)return{session:this._session,type:"disconnect",version:2};var e={connecting:"connect",syncing:"sync"}[this.state],t={name:this._name,participant:this._localParticipant.getState(),peer_connections:this._peerConnectionManager.getStates(),type:e,version:2};if("connect"===t.type){t.ice_servers=this._iceServersStatus,t.publisher={name:k,sdk_version:S,user_agent:this._userAgent},this._bandwidthProfile&&(t.bandwidth_profile=d(this._bandwidthProfile)),t.media_signaling=p(this._dominantSpeaker,this._networkQuality,this._trackPriority,this._trackSwitchOff),t.subscribe=m(this._automaticSubscription);var n=this._options.sdpFormat;n&&(t.format=n),t.token=this._accessToken}else"sync"===t.type?(t.session=this._session,t.token=this._accessToken):"update"===t.type&&(t.session=this._session);return t}},{key:"_createIceMessage",value:function(){return{edge:"roaming",token:this._accessToken,type:"ice",version:1}}},{key:"_sendConnectOrSyncOrDisconnectMessage",value:function(){var e=this._createConnectOrSyncOrDisconnectMessage();e&&this._twilioConnection.sendMessage(e)}},{key:"disconnect",value:function(e){return"disconnected"!==this.state&&(this.preempt("disconnected",null,[e]),this._sendConnectOrSyncOrDisconnectMessage(),this._twilioConnection.close(),this._eventPublisher.disconnect(),!0)}},{key:"publish",value:function(e){switch(this.state){case"connected":return this._twilioConnection.sendMessage(Object.assign({session:this._session,type:"update",version:2},e)),!0;case"connecting":case"syncing":return this._updatesToSend.push(e),!0;case"disconnected":default:return!1}}},{key:"publishEvent",value:function(e,t,n){return this._eventPublisher.publish(e,t,n)}},{key:"sync",value:function(){return"connected"===this.state&&(this.preempt("syncing"),this._sendConnectOrSyncOrDisconnectMessage(),!0)}},{key:"_setSession",value:function(e,t){this._session=e,this._sessionTimeoutMS=1e3*t}},{key:"_getReconnectTimer",value:function(){var e=this;return 0===this._sessionTimeoutMS?null:(this._sessionTimer||(this._sessionTimer=new h((function(){e._sessionTimer&&(e._sessionTimeoutMS=0)}),this._sessionTimeoutMS)),new Promise((function(t){e._reconnectBackoff.once("ready",t),e._reconnectBackoff.backoff()})))}},{key:"_clearReconnectTimer",value:function(){this._reconnectBackoff.reset(),this._sessionTimer&&(this._sessionTimer.clear(),this._sessionTimer=null)}}]),t}(s);function T(e){return Array.from(e.reduce((function(e,t){var n=e.get(t.id)||t;return(!n.description&&t.description||n.description&&t.description&&t.description.revision>n.description.revision)&&(n.description=t.description),(!n.ice&&t.ice||n.ice&&t.ice&&t.ice.revision>n.ice.revision)&&(n.ice=t.ice),e.set(n.id,n),e}),new Map).values())}e.exports=M})),o.register("4rEX5",(function(e,t){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=o("6xYCf").EventEmitter,a=(c=o("2S2q7")).getUserAgent,s=n.window||n,u=s.WebSocket?s.WebSocket:o("6nNTz"),c=o("2S2q7"),l=function(e){function t(e,n,r,i,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s=Object.assign({gateway:f(i,o)+"/v1/VideoEvents",maxReconnectAttempts:5,reconnectIntervalMs:50,userAgent:a(),WebSocket:u},s),Object.defineProperties(l,{_connectTimestamp:{value:0,writable:!0},_eventQueue:{value:[]},_readyToConnect:{value:c.defer()},_reconnectAttemptsLeft:{value:s.maxReconnectAttempts,writable:!0},_ws:{value:null,writable:!0},_WebSocket:{value:s.WebSocket}}),l._readyToConnect.promise.then((function(t){var i=t.roomSid,o=t.participantSid,a=l;l.on("disconnected",(function t(u){if(a._session=null,u&&a._reconnectAttemptsLeft>0)return a.emit("reconnecting"),void function(e,t,n,r,i,o,a){var s=Date.now()-e._connectTimestamp,u=a.reconnectIntervalMs-s;if(u>0)return void setTimeout((function(){h(e,t,n,r,i,o,a)}),u);h(e,t,n,r,i,o,a)}(a,e,n,r,i,o,s);a.removeListener("disconnected",t)})),h(l,e,n,r,i,o,s)})).catch((function(){})),l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"connect",value:function(e,t){this._readyToConnect.resolve({roomSid:e,participantSid:t})}},{key:"_publish",value:function(e){e.session=this._session,this._ws.send(JSON.stringify(e))}},{key:"disconnect",value:function(){if(null===this._ws||this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED)return!1;try{this._ws.close()}catch(e){}return this.emit("disconnected"),!0}},{key:"publish",value:function(e,t,n){return(null===this._ws||this._ws.readyState!==this._WebSocket.CLOSING&&this._ws.readyState!==this._WebSocket.CLOSED)&&(("string"==typeof this._session?this._publish.bind(this):this._eventQueue.push.bind(this._eventQueue))({group:e,name:t,payload:n,timestamp:Date.now(),type:"event",version:1}),!0)}}]),t}(i);function h(e,t,n,r,i,o,a){e._connectTimestamp=Date.now(),e._reconnectAttemptsLeft--,e._ws=new a.WebSocket(a.gateway);var s=e._ws;s.addEventListener("close",(function(t){1e3!==t.code?e.emit("disconnected",new Error("WebSocket Error "+t.code+": "+t.reason)):e.emit("disconnected")})),s.addEventListener("message",(function(t){!function(e,t,n){switch(t.type){case"connected":e._session=t.session,e._reconnectAttemptsLeft=n.maxReconnectAttempts,e._eventQueue.splice(0).forEach(e._publish,e),e.emit("connected");break;case"error":e._ws.close(),e.emit("disconnected",new Error(t.message))}}(e,JSON.parse(t.data),a)})),s.addEventListener("open",(function(){var e={type:"connect",token:t,version:1};e.publisher={name:n,sdkVersion:r,userAgent:a.userAgent,participantSid:o,roomSid:i},s.send(JSON.stringify(e))}))}function f(e,t){return"prod"===e?"wss://sdkgw."+t+".twilio.com":"wss://sdkgw."+e+"-"+t+".twilio.com"}e.exports=l})),o.register("6nNTz",(function(e,t){e.exports=WebSocket})),o.register("2JDin",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperties(this,{_connected:{writable:!0,value:!0}})}return n(e,[{key:"connect",value:function(){}},{key:"disconnect",value:function(){return!!this._connected&&(this._connected=!1,!0)}},{key:"publish",value:function(){return this._connected}}]),e}();e.exports=r})),o.register("VWPJN",(function(e,t){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=o("56JJ3"),a=o("2S2q7"),s=a.buildLogLevels,u=a.makeUUID,c=o("483rj"),l=o("82Ny0"),h=o("5WF7N"),f=0,d={closed:[],connecting:["closed","open","waiting"],early:["closed","connecting"],open:["closed"],waiting:["closed","connecting","early","open"]},p={closed:"close",open:"open",waiting:"waiting"},m=3e3,v=3001,g=3002,y=3003,b=3005,w=3006,_=n.window||n,k=_.WebSocket?_.WebSocket:o("6nNTz"),S={BUSY:"busy",FAILED:"failed",LOCAL:"local",REMOTE:"remote",TIMEOUT:"timeout"},E=new Map([[m,S.TIMEOUT],[v,S.TIMEOUT],[g,S.FAILED],[y,S.FAILED],[3004,S.TIMEOUT],[w,S.BUSY],[3007,S.TIMEOUT]]),M=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"early",d));n=Object.assign({helloBody:null,maxConsecutiveFailedHellos:3,maxConsecutiveMissedHeartbeats:3,requestedHeartbeatTimeout:5e3,openTimeout:15e3,welcomeTimeout:5e3,Log:c,WebSocket:k},n);var i=s(n.logLevel),o=new n.Log("default",r,i),a=n.networkMonitor?new l((function(){var e=a.type,t="Network changed"+(e?" to "+e:"");o.debug(t),r._close({code:3004,reason:t})})):null;Object.defineProperties(r,{_busyWaitTimeout:{value:null,writable:!0},_consecutiveHeartbeatsMissed:{value:0,writable:!0},_cookie:{value:null,writable:!0},_eventObserver:{value:n.eventObserver},_heartbeatTimeout:{value:null,writable:!0},_hellosLeft:{value:n.maxConsecutiveFailedHellos,writable:!0},_instanceId:{value:++f},_log:{value:o},_messageQueue:{value:[]},_networkMonitor:{value:a},_options:{value:n},_openTimeout:{value:null,writable:!0},_sendHeartbeatTimeout:{value:null,writable:!0},_serverUrl:{value:e},_welcomeTimeout:{value:null,writable:!0},_ws:{value:null,writable:!0}});var u={connecting:"info",early:"info",open:"info",waiting:"warning",closed:"info"};return r.on("stateChanged",(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];e in p&&r.emit.apply(r,[p[e]].concat(n));var o={name:e,group:"signaling",level:u[r.state]};if("closed"===e){var a=n[0];o.payload={reason:a},o.level=a===S.LOCAL?"info":"error"}r._eventObserver.emit("event",o)})),r._eventObserver.emit("event",{name:r.state,group:"signaling",level:u[r.state]}),r._connect(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"toString",value:function(){return"[TwilioConnection #"+this._instanceId+": "+this._ws.url+"]"}},{key:"_close",value:function(e){var t=e.code,n=e.reason;if("closed"!==this.state){this._openTimeout&&this._openTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear(),this._heartbeatTimeout&&this._heartbeatTimeout.clear(),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.clear(),this._networkMonitor&&this._networkMonitor.stop(),this._busyWaitTimeout&&t!==b&&this._busyWaitTimeout.clear(),this._messageQueue.splice(0);var r=this._log;1e3===t?(r.debug("Closed"),this.transition("closed",null,[S.LOCAL])):(r.warn("Closed: "+t+" - "+n),t!==b&&this.transition("closed",null,[E.get(t)||S.REMOTE]));var i=this._ws.readyState,o=this._options.WebSocket;i!==o.CLOSING&&i!==o.CLOSED&&this._ws.close(t,n)}}},{key:"_connect",value:function(){var e=this,t=this._log;if("waiting"===this.state)this.transition("early");else if("early"!==this.state)return void t.warn('Unexpected state "'+this.state+'" for connecting to the TCMP server.');this._ws=new this._options.WebSocket(this._serverUrl);var n=this._ws;t.debug("Created a new WebSocket:",n),n.addEventListener("close",(function(t){return e._close(t)}));var r=this._options.openTimeout;this._openTimeout=new h((function(){var t="Failed to open in "+r+" ms";e._close({code:3007,reason:t})}),r),n.addEventListener("open",(function(){t.debug("WebSocket opened:",n),e._openTimeout.clear(),e._startHandshake(),e._networkMonitor&&e._networkMonitor.start()})),n.addEventListener("message",(function(n){t.debug("Incoming: "+n.data);try{n=JSON.parse(n.data)}catch(t){return void e.emit("error",t)}switch(n.type){case"bad":e._handleBad(n);break;case"busy":e._handleBusy(n);break;case"bye":break;case"msg":e._handleMessage(n);case"heartbeat":e._handleHeartbeat();break;case"welcome":e._handleWelcome(n);break;default:e._log.debug("Unknown message type: "+n.type),e.emit("error",new Error("Unknown message type: "+n.type))}}))}},{key:"_handleBad",value:function(e){var t=e.reason,n=this._log;if(["connecting","open"].includes(this.state)){if("connecting"===this.state)return n.warn("Closing: 3002 - "+t),void this._close({code:g,reason:t});n.debug("Error: "+t),this.emit("error",new Error(t))}else n.warn('Unexpected state "'+this.state+'" for handling a "bad" message from the TCMP server.')}},{key:"_handleBusy",value:function(e){var t=this,n=e.cookie,r=e.keepAlive,i=e.retryAfter,o=this._log;if(["connecting","waiting"].includes(this.state)){this._busyWaitTimeout&&this._busyWaitTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear();var a=i<0?'Received terminal "busy" message':'Received "busy" message, retrying after '+i+" ms";if(i<0)return o.warn("Closing: 3006 - "+a),void this._close({code:w,reason:a});var s=this._options.maxConsecutiveFailedHellos;this._hellosLeft=s,this._cookie=n||null,r?(o.warn(a),this._busyWaitTimeout=new h((function(){return t._startHandshake()}),i)):(o.warn("Closing: 3005 - "+a),this._close({code:b,reason:a}),this._busyWaitTimeout=new h((function(){return t._connect()}),i)),this.transition("waiting",null,[r,i])}else o.warn('Unexpected state "'+this.state+'" for handling a "busy" message from the TCMP server.')}},{key:"_handleHeartbeat",value:function(){"open"===this.state?this._heartbeatTimeout.reset():this._log.warn('Unexpected state "'+this.state+'" for handling a "heartbeat" message from the TCMP server.')}},{key:"_handleHeartbeatTimeout",value:function(){if("open"===this.state){var e=this._log,t=this._options.maxConsecutiveMissedHeartbeats;e.debug("Consecutive heartbeats missed: "+t);var n="Missed "+t+' "heartbeat" messages';e.warn("Closing: 3001 - "+n),this._close({code:v,reason:n})}}},{key:"_handleMessage",value:function(e){var t=e.body;"open"===this.state?this.emit("message",t):this._log.warn('Unexpected state "'+this.state+'" for handling a "msg" message from the TCMP server.')}},{key:"_handleWelcome",value:function(e){var t=this,n=e.negotiatedTimeout,r=this._log;if(["connecting","waiting"].includes(this.state)){"waiting"===this.state&&(r.debug('Received "welcome" message, no need to retry connection.'),this._busyWaitTimeout.clear());var i=n*this._options.maxConsecutiveMissedHeartbeats,o=n-200;this._welcomeTimeout.clear(),this._heartbeatTimeout=new h((function(){return t._handleHeartbeatTimeout()}),i),this._messageQueue.splice(0).forEach((function(e){return t._send(e)})),this._sendHeartbeatTimeout=new h((function(){return t._sendHeartbeat()}),o),this.transition("open")}else r.warn('Unexpected state "'+this.state+'" for handling a "welcome" message from the TCMP server.')}},{key:"_handleWelcomeTimeout",value:function(){if("connecting"===this.state){var e=this._log;if(this._hellosLeft<=0){var t="All handshake attempts failed";return e.warn("Closing: 3000 - "+t),void this._close({code:m,reason:t})}var n=this._options.maxConsecutiveFailedHellos;e.warn("Handshake attempt "+(n-this._hellosLeft)+" failed"),this._startHandshake()}}},{key:"_send",value:function(e){if(this._ws.readyState===this._options.WebSocket.OPEN){var t=JSON.stringify(e);this._log.debug("Outgoing: "+t);try{this._ws.send(t),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.reset()}catch(e){var n="Failed to send message";this._log.warn("Closing: 3003 - "+n),this._close({code:y,reason:n})}}}},{key:"_sendHeartbeat",value:function(){"closed"!==this.state&&this._send({type:"heartbeat"})}},{key:"_sendHello",value:function(){var e=this._options,t=e.helloBody,n=e.requestedHeartbeatTimeout,r={id:u(),timeout:n,type:"hello",version:2};this._cookie&&(r.cookie=this._cookie),t&&(r.body=t),this._send(r)}},{key:"_sendOrEnqueue",value:function(e){var t=this;"closed"!==this.state&&("open"===this.state?function(e){return t._send(e)}:function(e){return t._messageQueue.push(e)})(e)}},{key:"_startHandshake",value:function(){var e=this;if(["early","waiting"].includes(this.state)&&this.transition("connecting"),"connecting"===this.state){this._hellosLeft--,this._sendHello();var t=this._options.welcomeTimeout;this._welcomeTimeout=new h((function(){return e._handleWelcomeTimeout()}),t)}}},{key:"close",value:function(){"closed"!==this.state&&(this._sendOrEnqueue({type:"bye"}),this._close({code:1e3,reason:"Normal"}))}},{key:"sendMessage",value:function(e){this._sendOrEnqueue({body:e,type:"msg"})}}]),t}(i);M.CloseReason=S,e.exports=M})),o.register("82Ny0",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=(n=Object.assign({navigator:navigator,window:window},n)).navigator,o=i.connection||{type:null},a=o.type,s=o.type?{_events:{value:["change","typechange"]},_listener:{value:function(){var e=a!==r.type&&r.isOnline;a=r.type,e&&t()}},_target:{value:o}}:{_events:{value:["online"]},_listener:{value:t},_target:{value:n.window}},u=s._events,c=s._listener,l=s._target;Object.defineProperties(this,{isOnline:{enumerable:!0,get:function(){return"boolean"!=typeof i.onLine||i.onLine}},type:{enumerable:!0,get:function(){return o.type||null}},_listener:c,_events:u,_target:l})}return n(e,[{key:"start",value:function(){var e=this;this._events.forEach((function(t){e._target.addEventListener(t,e._listener)}))}},{key:"stop",value:function(){var e=this;this._events.forEach((function(t){e._target.removeEventListener(t,e._listener)}))}}]),e}();e.exports=r})),o.register("7j1bC",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var i=o("4xwd8"),a=o("3Kdxj"),s=o("2S2q7").isDeepEqual,u=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Object.assign({LocalTrackPublicationV2:a},r);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object.defineProperties(i,{_bandwidthProfile:{value:null,writable:!0},_bandwidthProfileRevision:{value:0,writable:!0},_encodingParameters:{value:e},_removeListeners:{value:new Map},_LocalTrackPublicationV2:{value:r.LocalTrackPublicationV2},_publishedRevision:{writable:!0,value:0},_revision:{writable:!0,value:1},_signalingRegion:{value:null,writable:!0},bandwidthProfile:{enumerable:!0,get:function(){return this._bandwidthProfile}},bandwidthProfileRevision:{enumerable:!0,get:function(){return this._bandwidthProfileRevision}},networkQualityConfiguration:{enumerable:!0,value:n},revision:{enumerable:!0,get:function(){return this._revision}},signalingRegion:{enumerable:!0,get:function(){return this._signalingRegion}}}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"setSignalingRegion",value:function(e){this._signalingRegion||(this._signalingRegion=e)}},{key:"setBandwidthProfile",value:function(e){s(this._bandwidthProfile,e)||(this._bandwidthProfile=JSON.parse(JSON.stringify(e)),this._bandwidthProfileRevision++,this.didUpdate())}},{key:"setParameters",value:function(e){return this._encodingParameters.update(e),this}},{key:"update",value:function(e){return this._publishedRevision>=e.revision||(this._publishedRevision=e.revision,e.tracks.forEach((function(e){var t=this.tracks.get(e.id);t&&t.update(e)}),this)),this}},{key:"_createLocalTrackPublicationSignaling",value:function(e,t,n){return new this._LocalTrackPublicationV2(e,t,n)}},{key:"addTrack",value:function(e,n,i){var o=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addTrack",this).call(this,e,n,i);var a=this.getPublication(e),s=a.isEnabled,u=a.updatedPriority,c=function(){s===a.isEnabled&&u===a.updatedPriority||(o.didUpdate(),s=a.isEnabled,u=a.updatedPriority)};return a.on("updated",c),this._removeListener(a),this._removeListeners.set(a,(function(){return a.removeListener("updated",c)})),this.didUpdate(),this}},{key:"_removeListener",value:function(e){var t=this._removeListeners.get(e);t&&t()}},{key:"getState",value:function(){return{revision:this.revision,tracks:Array.from(this.tracks.values()).map((function(e){return e.getState()}))}}},{key:"didUpdate",value:function(){this._revision++,this.emit("updated")}},{key:"removeTrack",value:function(e){var n=r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeTrack",this).call(this,e);return n&&(e.removeClone(n.trackTransceiver),this._removeListener(n),this.didUpdate()),n}},{key:"setNetworkQualityConfiguration",value:function(e){this.networkQualityConfiguration.update(e)}}]),t}(i);e.exports=u})),o.register("4xwd8",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var i=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object.defineProperties(e,{_publicationsToTrackSenders:{value:new Map},_trackSendersToPublications:{value:new Map}}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"addTrack",value:function(e,n,i){var o=this._createLocalTrackPublicationSignaling(e,n,i);return this._trackSendersToPublications.set(e,o),this._publicationsToTrackSenders.set(o,e),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addTrack",this).call(this,o),this}},{key:"getPublication",value:function(e){return this._trackSendersToPublications.get(e)||null}},{key:"getSender",value:function(e){return this._publicationsToTrackSenders.get(e)||null}},{key:"removeTrack",value:function(e){var n=this._trackSendersToPublications.get(e);return n?(this._trackSendersToPublications.delete(e),this._publicationsToTrackSenders.delete(n),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeTrack",this).call(this,n)&&n.stop(),n):null}}]),t}(o("ufvQC"));e.exports=i})),o.register("3Kdxj",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("1InuW"),i=o("6D3Hv").createTwilioError,a=function(e){function t(e,n,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"getState",value:function(){return{enabled:this.isEnabled,id:this.id,kind:this.kind,name:this.name,priority:this.updatedPriority}}},{key:"update",value:function(e){switch(e.state){case"ready":this.setSid(e.sid);break;case"failed":var t=e.error;this.publishFailed(i(t.code,t.message))}return this}}]),t}(r);e.exports=a})),o.register("1InuW",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};var i=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i="data"===(e=e.clone()).kind||e.track.enabled,o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,e.kind,i,r));return o.setTrackTransceiver(e),Object.defineProperties(o,{_updatedPriority:{value:r,writable:!0},id:{enumerable:!0,value:e.id}}),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"enable",value:function(e){return e="boolean"!=typeof e||e,this.trackTransceiver.track.enabled=e,r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enable",this).call(this,e)}},{key:"publishFailed",value:function(e){return function(e,t){return null===e._sid&&!e._error&&(e._error=t,!0)}(this,e)&&this.emit("updated"),this}},{key:"setPriority",value:function(e){return this._updatedPriority!==e&&(this._updatedPriority=e,this.emit("updated")),this}},{key:"setSid",value:function(e){return this._error?this:r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setSid",this).call(this,e)}},{key:"stop",value:function(){this.trackTransceiver.stop()}},{key:"updatedPriority",get:function(){return this._updatedPriority}}]),t}(o("4Z9aa"));e.exports=i})),o.register("4oiTN",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var r=o("ufvQC"),i=o("3tUyT"),a=o("56JJ3"),s={closed:["opening"],opening:["closed","open"],open:["closed","closing"],closing:["closed","open"]},u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"closed",s))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"_close",value:function(e){return this.transition("closing",e),this.transition("closed",e),Promise.resolve(this)}},{key:"_connect",value:function(e,t,n,r,o){e.connect("PA00000000000000000000000000000000","test");var a=Promise.resolve(new i(e,"RM00000000000000000000000000000000",o));return a.cancel=function(){},a}},{key:"_open",value:function(e){return this.transition("opening",e),this.transition("open",e),Promise.resolve(this)}},{key:"close",value:function(){var e=this;return this.bracket("close",(function(t){switch(e.state){case"closed":return e;case"open":return e._close(t);default:throw new Error('Unexpected Signaling state "'+e.state+'"')}}))}},{key:"connect",value:function(e,t,n,r,i){var o=this;return this.bracket("connect",(function a(s){switch(o.state){case"closed":return o._open(s).then(a.bind(null,s));case"open":return o.releaseLockCompletely(s),o._connect(e,t,n,r,i);default:throw new Error('Unexpected Signaling state "'+o.state+'"')}}))}},{key:"createLocalParticipantSignaling",value:function(){return new r}},{key:"open",value:function(){var e=this;return this.bracket("open",(function(t){switch(e.state){case"closed":return e._open(t);case"open":return e;default:throw new Error('Unexpected Signaling state "'+e.state+'"')}}))}}]),t}(a);e.exports=u})),o.register("5qB4o",(function(e,t){"use strict";var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=o("6xYCf").EventEmitter,s=["signaling"],u=["debug","error","info","warning"],c=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object.defineProperties(o,{_publisher:{value:null,writable:!0}}),o.on("event",(function(t){var r=t.name,i=t.group,a=t.level,c=t.payload;if("string"!=typeof r)throw new Error("Unexpected name: ",r);if(!s.includes(i))throw new Error("Unexpected group: ",i);if(!u.includes(a))throw new Error("Unexpected level: ",a);var l=Date.now(),h=l-e;if(o._publisher){var f=Object.assign(c||{},{elapsedTime:h,level:a});o._publisher.publish(i,r,f)}if(n){var d=Object.assign(c?{payload:c}:{},{elapsedTime:h,group:i,level:a,name:r,timestamp:l});n.emit("event",d)}})),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"setPublisher",value:function(e){this._publisher=e}}]),t}(a);e.exports=c})),o.register("6UZhD",(function(e,t){"use strict";var n=o("3myXV"),r=o("72UdZ").DEFAULT_LOG_LEVEL;function i(e,t){t=Object.assign({createLocalTracks:n,logLevel:r},t);var i={};i.logLevel=t.logLevel,delete t.logLevel;var o=t.createLocalTracks;return delete t.createLocalTracks,i[e]=!(Object.keys(t).length>0)||t,o(i).then((function(e){return e[0]}))}e.exports={audio:function(e){return i("audio",e)},video:function(e){return i("video",e)}}})),o.register("4Ctmp",(function(e,t){"use strict";var n=o("6YI9h"),r=n.guessBrowser,i=n.support,a=["edg","edge","electron","headlesschrome"];function s(e){if("chrome"!==e)return null;if("brave"in navigator)return"brave";var t,n=(function(e){for(var t=[],n=[],r=0;r<e.length;r++)if("("===e[r])t.push(r);else if(")"===e[r]&&t.length>0){var i=t.pop();0===t.length&&n.push(e.substring(i,r+1))}return n}(navigator.userAgent).reduce((function(e,t){return e.replace(t,"")}),navigator.userAgent).match(/[^\s]+/g)||[]).map((function(e){return e.split("/")[0].toLowerCase()}));return(t=n,Array.isArray(t)?t:Array.from(t)).slice(2).find((function(e){return!["chrome","mobile","safari"].includes(e)}))||null}e.exports=function(){var e=r(),t=s(e);return!!e&&i()&&(!t||a.includes(t))&&!function(e){return"chrome"===e&&/Edge/.test(navigator.userAgent)&&("undefined"==typeof chrome||void 0===chrome.runtime)}(e)}})),Object.defineProperties(XL,{connect:{enumerable:!0,value:o("60Xpw")},createLocalAudioTrack:{enumerable:!0,value:o("6UZhD").audio},createLocalTracks:{enumerable:!0,value:o("3myXV")},createLocalVideoTrack:{enumerable:!0,value:o("6UZhD").video},isSupported:{enumerable:!0,value:o("4Ctmp")()},LocalAudioTrack:{enumerable:!0,value:YL},LocalDataTrack:{enumerable:!0,value:QL},LocalVideoTrack:{enumerable:!0,value:JL},version:{enumerable:!0,value:ZL}}),KL=XL;const $L=()=>Ut(),ej=()=>$L().replace(new RegExp("-","g"),"").toUpperCase();var tj,nj,rj,ij,oj,aj,sj;(nj=tj||(tj={}))[nj.Debug=0]="Debug",nj[nj.Info=1]="Info",nj[nj.Warning=2]="Warning",nj[nj.Error=3]="Error";class uj{constructor(e,t){this.privName=e,this.privEventId=ej(),this.privEventTime=(new Date).toISOString(),this.privEventType=t,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}class cj extends uj{constructor(e,t,n=tj.Info){super(e,n),this.privAudioSourceId=t}get audioSourceId(){return this.privAudioSourceId}}class lj extends cj{constructor(e){super("AudioSourceInitializingEvent",e)}}class hj extends cj{constructor(e){super("AudioSourceReadyEvent",e)}}class fj extends cj{constructor(e){super("AudioSourceOffEvent",e)}}class dj extends cj{constructor(e,t){super("AudioSourceErrorEvent",e,tj.Error),this.privError=t}get error(){return this.privError}}class pj extends cj{constructor(e,t,n){super(e,t),this.privAudioNodeId=n}get audioNodeId(){return this.privAudioNodeId}}class mj extends pj{constructor(e,t){super("AudioStreamNodeAttachingEvent",e,t)}}class vj extends pj{constructor(e,t){super("AudioStreamNodeAttachedEvent",e,t)}}class gj extends pj{constructor(e,t){super("AudioStreamNodeDetachedEvent",e,t)}}class yj extends pj{constructor(e,t,n){super("AudioStreamNodeErrorEvent",e,t),this.privError=n}get error(){return this.privError}}class bj extends uj{constructor(e,t,n=tj.Info){super(e,n),this.privJsonResult=t}get jsonString(){return this.privJsonResult}}class wj extends uj{constructor(e,t,n=tj.Info){super(e,n),this.privConnectionId=t}get connectionId(){return this.privConnectionId}}class _j extends wj{constructor(e,t,n){super("ConnectionStartEvent",e),this.privUri=t,this.privHeaders=n}get uri(){return this.privUri}get headers(){return this.privHeaders}}class kj extends wj{constructor(e,t){super("ConnectionEstablishedEvent",e)}}class Sj extends wj{constructor(e,t,n){super("ConnectionClosedEvent",e,tj.Debug),this.privRreason=n,this.privStatusCode=t}get reason(){return this.privRreason}get statusCode(){return this.privStatusCode}}class Ej extends wj{constructor(e,t,n){super("ConnectionErrorEvent",e,tj.Debug),this.privMessage=t,this.privType=n}get message(){return this.privMessage}get type(){return this.privType}}class Mj extends wj{constructor(e,t,n){super("ConnectionEstablishErrorEvent",e,tj.Error),this.privStatusCode=t,this.privReason=n}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}class Tj extends wj{constructor(e,t,n){super("ConnectionMessageReceivedEvent",e),this.privNetworkReceivedTime=t,this.privMessage=n}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}class Cj extends wj{constructor(e,t,n){super("ConnectionMessageSentEvent",e),this.privNetworkSentTime=t,this.privMessage=n}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}class Ij extends Error{constructor(e){super(e),this.name="ArgumentNull",this.message=e}}class xj extends Error{constructor(e){super(e),this.name="InvalidOperation",this.message=e}}class Aj extends Error{constructor(e,t){super(t),this.name=e+"ObjectDisposed",this.message=t}}!function(e){e[e.Text=0]="Text",e[e.Binary=1]="Binary"}(rj||(rj={}));class Pj{constructor(e,t,n,r){if(this.privBody=null,e===rj.Text&&t&&"string"!=typeof t)throw new xj("Payload must be a string");if(e===rj.Binary&&t&&!(t instanceof ArrayBuffer))throw new xj("Payload must be ArrayBuffer");switch(this.privMessageType=e,this.privBody=t,this.privHeaders=n||{},this.privId=r||ej(),this.messageType){case rj.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case rj.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===rj.Binary)throw new xj("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===rj.Text)throw new xj("Not supported for text message");return this.privBody}get id(){return this.privId}}class Oj{constructor(e,t){this.privStatusCode=e,this.privReason=t}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}class Rj{constructor(e){this.privEventListeners={},this.privIsDisposed=!1,this.onEvent=e=>{if(this.isDisposed())throw new Aj("EventSource");if(this.metadata)for(const t in this.metadata)t&&e.metadata&&(e.metadata[t]||(e.metadata[t]=this.metadata[t]));for(const t in this.privEventListeners)t&&this.privEventListeners[t]&&this.privEventListeners[t](e)},this.attach=e=>{const t=ej();return this.privEventListeners[t]=e,{detach:()=>(delete this.privEventListeners[t],Promise.resolve())}},this.attachListener=e=>this.attach(e.onEvent),this.isDisposed=()=>this.privIsDisposed,this.dispose=()=>{this.privEventListeners=null,this.privIsDisposed=!0},this.privMetadata=e}get metadata(){return this.privMetadata}}class Dj{static get instance(){return Dj.privInstance}}Dj.privInstance=new Rj,Dj.setEventSource=e=>{if(!e)throw new Ij("eventSource");Dj.privInstance=e},(oj=ij||(ij={}))[oj.None=0]="None",oj[oj.Connected=1]="Connected",oj[oj.Connecting=2]="Connecting",oj[oj.Disconnected=3]="Disconnected",(sj=aj||(aj={}))[sj.None=0]="None",sj[sj.Resolved=1]="Resolved",sj[sj.Rejected=2]="Rejected";class Nj{constructor(){this.resolve=e=>(this.privResolve(e),this),this.reject=e=>(this.privReject(e),this),this.privPromise=new Promise(((e,t)=>{this.privResolve=e,this.privReject=t}))}get promise(){return this.privPromise}}function Lj(e,t,n){e.then((e=>{try{t&&t(e)}catch(e){if(n)try{if(e instanceof Error){const t=e;n(t.name+": "+t.message)}else n(e)}catch(e){}}}),(e=>{if(n)try{if(e instanceof Error){const t=e;n(t.name+": "+t.message)}else n(e)}catch(e){}}))}var jj={};t(jj,"Queue",(()=>zj),(e=>zj=e));class Bj{constructor(e){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.get=e=>(this.throwIfDisposed(),this.privList[e]),this.first=()=>this.get(0),this.last=()=>this.get(this.length()-1),this.add=e=>{this.throwIfDisposed(),this.insertAt(this.privList.length,e)},this.insertAt=(e,t)=>{this.throwIfDisposed(),0===e?this.privList.unshift(t):e===this.privList.length?this.privList.push(t):this.privList.splice(e,0,t),this.triggerSubscriptions(this.privAddSubscriptions)},this.removeFirst=()=>(this.throwIfDisposed(),this.removeAt(0)),this.removeLast=()=>(this.throwIfDisposed(),this.removeAt(this.length()-1)),this.removeAt=e=>(this.throwIfDisposed(),this.remove(e,1)[0]),this.remove=(e,t)=>{this.throwIfDisposed();const n=this.privList.splice(e,t);return this.triggerSubscriptions(this.privRemoveSubscriptions),n},this.clear=()=>{this.throwIfDisposed(),this.remove(0,this.length())},this.length=()=>(this.throwIfDisposed(),this.privList.length),this.onAdded=e=>{this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[t]=e,{detach:()=>(delete this.privAddSubscriptions[t],Promise.resolve())}},this.onRemoved=e=>{this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[t]=e,{detach:()=>(delete this.privRemoveSubscriptions[t],Promise.resolve())}},this.onDisposed=e=>{this.throwIfDisposed();const t=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[t]=e,{detach:()=>(delete this.privDisposedSubscriptions[t],Promise.resolve())}},this.join=e=>(this.throwIfDisposed(),this.privList.join(e)),this.toArray=()=>{const e=Array();return this.privList.forEach((t=>{e.push(t)})),e},this.any=e=>(this.throwIfDisposed(),e?this.where(e).length()>0:this.length()>0),this.all=e=>(this.throwIfDisposed(),this.where(e).length()===this.length()),this.forEach=e=>{this.throwIfDisposed();for(let t=0;t<this.length();t++)e(this.privList[t],t)},this.select=e=>{this.throwIfDisposed();const t=[];for(let n=0;n<this.privList.length;n++)t.push(e(this.privList[n],n));return new Bj(t)},this.where=e=>{this.throwIfDisposed();const t=new Bj;for(let n=0;n<this.privList.length;n++)e(this.privList[n],n)&&t.add(this.privList[n]);return t},this.orderBy=e=>{this.throwIfDisposed();const t=this.toArray().sort(e);return new Bj(t)},this.orderByDesc=e=>(this.throwIfDisposed(),this.orderBy(((t,n)=>e(n,t)))),this.clone=()=>(this.throwIfDisposed(),new Bj(this.toArray())),this.concat=e=>(this.throwIfDisposed(),new Bj(this.privList.concat(e.toArray()))),this.concatArray=e=>(this.throwIfDisposed(),new Bj(this.privList.concat(e))),this.isDisposed=()=>null==this.privList,this.dispose=e=>{this.isDisposed()||(this.privDisposeReason=e,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))},this.throwIfDisposed=()=>{if(this.isDisposed())throw new Aj("List",this.privDisposeReason)},this.triggerSubscriptions=e=>{if(e)for(const t in e)t&&e[t]()},this.privList=[],e)for(const t of e)this.privList.push(t)}}var Fj,Uj,qj=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};(Uj=Fj||(Fj={}))[Uj.Dequeue=0]="Dequeue",Uj[Uj.Peek=1]="Peek";class zj{constructor(e){this.privPromiseStore=new Bj,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.enqueue=e=>{this.throwIfDispose(),this.enqueueFromPromise(new Promise(((t,n)=>{t(e)})))},this.enqueueFromPromise=e=>{this.throwIfDispose(),e.then((e=>{this.privList.add(e)}),(e=>{}))},this.dequeue=()=>{this.throwIfDispose();const e=new Nj;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:Fj.Dequeue}),this.drain()),e.promise},this.peek=()=>{this.throwIfDispose();const e=new Nj;return this.privSubscribers&&(this.privSubscribers.add({deferral:e,type:Fj.Peek}),this.drain()),e.promise},this.length=()=>(this.throwIfDispose(),this.privList.length()),this.isDisposed=()=>null==this.privSubscribers,this.drain=()=>{if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const e=this.privSubscribers,t=this.privList;if(e&&t){for(;t.length()>0&&e.length()>0&&!this.privIsDisposing;){const n=e.removeFirst();if(n.type===Fj.Peek)n.deferral.resolve(t.first());else{const e=t.removeFirst();n.deferral.resolve(e)}}this.privSubscribers===e&&(this.privSubscribers=e),this.privList===t&&(this.privList=t)}this.privIsDrainInProgress=!1}},this.throwIfDispose=()=>{if(this.isDisposed()){if(this.privDisposeReason)throw new xj(this.privDisposeReason);throw new Aj("Queue")}if(this.privIsDisposing)throw new xj("Queue disposing")},this.privList=e||new Bj,this.privDetachables=[],this.privSubscribers=new Bj,this.privDetachables.push(this.privList.onAdded(this.drain))}drainAndDispose(e,t){return qj(this,void 0,void 0,(function*(){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=t,this.privIsDisposing=!0;const n=this.privSubscribers;if(n){for(;n.length()>0;){n.removeFirst().deferral.resolve(void 0)}this.privSubscribers===n&&(this.privSubscribers=n)}for(const e of this.privDetachables)yield e.detach();if(this.privPromiseStore.length()>0&&e){const t=[];return this.privPromiseStore.toArray().forEach((e=>{t.push(e)})),Promise.all(t).finally((()=>{this.privSubscribers=null,this.privList.forEach(((t,n)=>{e(t)})),this.privList=null})).then()}this.privSubscribers=null,this.privList=null}}))}dispose(e){return qj(this,void 0,void 0,(function*(){yield this.drainAndDispose(null,e)}))}}class Vj{constructor(e,t,n){if(this.privPayload=null,!t)throw new Ij("payload");if(e===rj.Binary&&"ArrayBuffer"!==t.__proto__.constructor.name)throw new xj("Payload must be ArrayBuffer");if(e===rj.Text&&"string"!=typeof t)throw new xj("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=n||ej()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===rj.Binary)throw new xj("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===rj.Text)throw new xj("Not supported for text message");return this.privPayload}get id(){return this.privId}}class Wj{constructor(e,t){this.encode=e=>{const t=this.downSampleAudioFrame(e,this.privActualSampleRate,this.privDesiredSampleRate);if(!t)return null;const n=2*t.length,r=new ArrayBuffer(n),i=new DataView(r);return this.floatTo16BitPCM(i,0,t),r},this.setString=(e,t,n)=>{for(let r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))},this.floatTo16BitPCM=(e,t,n)=>{for(let r=0;r<n.length;r++,t+=2){const i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?32768*i:32767*i,!0)}},this.downSampleAudioFrame=(e,t,n)=>{if(n===t||n>t)return e;const r=t/n,i=Math.round(e.length/r),o=new Float32Array(i);let a=0,s=0;for(;s<i;){const t=Math.round((s+1)*r);let n=0,i=0;for(;a<t&&a<e.length;)n+=e[a++],i++;o[s++]=n/i}return o},this.privActualSampleRate=e,this.privDesiredSampleRate=t}}var Hj={};t(Hj,"Stream",(()=>Qj),(e=>Qj=e));var Kj,Gj,Yj=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class Qj{constructor(e){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.read=()=>{if(this.privIsReadEnded)throw new xj("Stream read has already finished");return this.privReaderQueue.dequeue().then((e=>Yj(this,void 0,void 0,(function*(){return(void 0===e||e.isEnd)&&(yield this.privReaderQueue.dispose("End of stream reached")),e}))))},this.readEnded=()=>{this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new jj.Queue)},this.throwIfClosed=()=>{if(this.privIsWriteEnded)throw new xj("Stream closed")},this.privId=e||ej(),this.privReaderQueue=new jj.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch(e){}}}(Gj=Kj||(Kj={}))[Gj.Success=0]="Success",Gj[Gj.Error=1]="Error";class Jj extends Hj.Stream{constructor(e,t){super(t),this.privTargetChunkSize=e,this.privNextBufferReadyBytes=0}writeStreamChunk(e){if(e.isEnd||0===this.privNextBufferReadyBytes&&e.buffer.byteLength===this.privTargetChunkSize)return void super.writeStreamChunk(e);let t=0;for(;t<e.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=e.timeReceived);const n=Math.min(e.buffer.byteLength-t,this.privTargetChunkSize-this.privNextBufferReadyBytes),r=new Uint8Array(this.privNextBufferToWrite),i=new Uint8Array(e.buffer.slice(t,n+t));r.set(i,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=n,t+=n,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){0===this.privNextBufferReadyBytes||this.isClosed||super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}}class Zj{}Zj.workerTimers=null,Zj.clearTimeout=e=>Zj.timers().clearTimeout(e),Zj.setTimeout=(e,t)=>Zj.timers().setTimeout(e,t),Zj.load=e=>{const t=new Map([[0,()=>{}]]),n=new Map,r=new Worker(e);r.addEventListener("message",(({data:e})=>{if(Zj.isCallNotification(e)){const{params:{timerId:r}}=e,i=t.get(r);if("number"==typeof i){const e=n.get(i);if(void 0===e||e!==r)throw new Error("The timer is in an undefined state.")}else{if(void 0===i)throw new Error("The timer is in an undefined state.");i(),t.delete(r)}}else{if(!Zj.isClearResponse(e)){const{error:{message:t}}=e;throw new Error(t)}{const{id:r}=e,i=n.get(r);if(void 0===i)throw new Error("The timer is in an undefined state.");n.delete(r),t.delete(i)}}}));return{clearTimeout:e=>{const i=Math.random();n.set(i,e),t.set(e,i),r.postMessage({id:i,method:"clear",params:{timerId:e}})},setTimeout:(e,n)=>{const i=Math.random();return t.set(i,e),r.postMessage({id:null,method:"set",params:{delay:n,now:performance.now(),timerId:i}}),i}}},Zj.loadWorkerTimers=()=>()=>{if(null!==Zj.workerTimers)return Zj.workerTimers;const e=new Blob(['!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'],{type:"application/javascript; charset=utf-8"}),t=URL.createObjectURL(e);return Zj.workerTimers=Zj.load(t),Zj.workerTimers.setTimeout((()=>URL.revokeObjectURL(t)),0),Zj.workerTimers},Zj.timers=Zj.loadWorkerTimers(),Zj.isCallNotification=e=>void 0!==e.method&&"call"===e.method,Zj.isClearResponse=e=>null===e.error&&"number"==typeof e.id;class Xj extends uj{constructor(e,t,n){super(e,t),this.privSignature=n}}class $j extends Xj{constructor(e){super("OCSPMemoryCacheHitEvent",tj.Debug,e)}}class eB extends Xj{constructor(e){super("OCSPCacheMissEvent",tj.Debug,e)}}class tB extends Xj{constructor(e){super("OCSPDiskCacheHitEvent",tj.Debug,e)}}class nB extends Xj{constructor(e){super("OCSPCacheUpdateNeededEvent",tj.Debug,e)}}class rB extends Xj{constructor(e){super("OCSPMemoryCacheStoreEvent",tj.Debug,e)}}class iB extends Xj{constructor(e){super("OCSPDiskCacheStoreEvent",tj.Debug,e)}}class oB extends Xj{constructor(e){super("OCSPCacheUpdatehCompleteEvent",tj.Debug,e)}}class aB extends Xj{constructor(){super("OCSPStapleReceivedEvent",tj.Debug,"")}}class sB extends Xj{constructor(e,t){super("OCSPCacheEntryExpiredEvent",tj.Debug,e),this.privExpireTime=t}}class uB extends Xj{constructor(e,t,n){super("OCSPCacheEntryNeedsRefreshEvent",tj.Debug,e),this.privExpireTime=n,this.privStartTime=t}}class cB extends Xj{constructor(e,t,n){super("OCSPCacheHitEvent",tj.Debug,e),this.privExpireTime=n,this.privExpireTimeString=new Date(n).toLocaleDateString(),this.privStartTime=t,this.privStartTimeString=new Date(t).toLocaleTimeString()}}class lB extends Xj{constructor(e,t){super("OCSPVerificationFailedEvent",tj.Debug,e),this.privError=t}}class hB extends Xj{constructor(e,t){super("OCSPCacheFetchErrorEvent",tj.Debug,e),this.privError=t}}class fB extends Xj{constructor(e){super("OCSPResponseRetrievedEvent",tj.Debug,e)}}class dB extends Xj{constructor(e,t){super("OCSPCacheUpdateErrorEvent",tj.Debug,e),this.privError=t}}class pB extends uj{constructor(e){super("BackgroundEvent",tj.Error),this.privError=e}get error(){return this.privError}}var mB={};t(mB,"MicAudioSource",(()=>WU),(e=>WU=e));class vB{}vB.AuthKey="Ocp-Apim-Subscription-Key",vB.ConnectionId="X-ConnectionId",vB.ContentType="Content-Type",vB.CustomCommandsAppId="X-CommandsAppId",vB.Path="Path",vB.RequestId="X-RequestId",vB.RequestStreamId="X-StreamId",vB.RequestTimestamp="X-Timestamp";class gB{constructor(e,t){this.privHeaderName=e,this.privToken=t}get headerName(){return this.privHeaderName}get token(){return this.privToken}}class yB{constructor(e){if(this.fetch=e=>Promise.resolve(this.privAuthInfo),this.fetchOnExpiry=e=>Promise.resolve(this.privAuthInfo),!e)throw new Ij("subscriptionKey");this.privAuthInfo=new gB(vB.AuthKey,e)}}const bB="Authorization";class wB{constructor(e,t){if(this.fetch=e=>this.privFetchCallback(e).then((e=>new gB(bB,e))),this.fetchOnExpiry=e=>this.privFetchOnExpiryCallback(e).then((e=>new gB(bB,e))),!e)throw new Ij("fetchCallback");if(!t)throw new Ij("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=t}}var _B={};t(_B,"ServiceRecognizerBase",(()=>WF),(e=>WF=e));class kB{static throwIfNullOrUndefined(e,t){if(null==e)throw new Error("throwIfNullOrUndefined:"+t)}static throwIfNull(e,t){if(null===e)throw new Error("throwIfNull:"+t)}static throwIfNullOrWhitespace(e,t){if(kB.throwIfNullOrUndefined(e,t),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+t)}static throwIfDisposed(e){if(e)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(e,t){if(kB.throwIfNullOrUndefined(e,t),0===e.length)throw new Error("throwIfArrayEmptyOrWhitespace:"+t);for(const n of e)kB.throwIfNullOrWhitespace(n,t)}static throwIfFileDoesNotExist(e,t){kB.throwIfNullOrWhitespace(e,t)}static throwIfNotUndefined(e,t){if(void 0!==e)throw new Error("throwIfNotUndefined:"+t)}}o.register("3V6Bo",(function(e,t){}));var SB=o("3V6Bo");class EB{constructor(e){this.id=()=>this.privId,this.privFd=SB.openSync(e,"w")}set format(e){kB.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;let t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=SB.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))}write(e){kB.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(e.slice(0)))}close(){void 0!==this.privFd&&(this.privWriteStream.on("finish",(()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),SB.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),SB.closeSync(this.privFd),this.privFd=void 0})),this.privWriteStream.end())}}var MB={};t(MB,"PullAudioInputStreamImpl",(()=>DB),(e=>DB=e)),t(MB,"AudioInputStream",(()=>AB),(e=>AB=e));class TB{static getDefaultInputFormat(){return CB.getDefaultInputFormat()}static getWaveFormatPCM(e,t,n){return new CB(e,t,n)}}class CB extends TB{constructor(e=16e3,t=16,n=1){super(),this.setString=(e,t,n)=>{for(let r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))},this.formatTag=1,this.bitsPerSample=t,this.samplesPerSec=e,this.channels=n,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),this.privHeader=new ArrayBuffer(44);const r=new DataView(this.privHeader);this.setString(r,0,"RIFF"),r.setUint32(4,0,!0),this.setString(r,8,"WAVEfmt "),r.setUint32(16,16,!0),r.setUint16(20,1,!0),r.setUint16(22,this.channels,!0),r.setUint32(24,this.samplesPerSec,!0),r.setUint32(28,this.avgBytesPerSec,!0),r.setUint16(32,this.channels*(this.bitsPerSample/8),!0),r.setUint16(34,this.bitsPerSample,!0),this.setString(r,36,"data"),r.setUint32(40,0,!0)}static getDefaultInputFormat(){return new CB}static getAudioContext(e){const t=window.AudioContext||window.webkitAudioContext||!1;if(t)return void 0!==e&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new t({sampleRate:e}):new t;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}}var IB=R,xB=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class AB{constructor(){}static createPushStream(e){return PB.create(e)}static createPullStream(e,t){return RB.create(e,t)}}class PB extends AB{static create(e){return new OB(e)}}class OB extends PB{constructor(e){super(),this.onEvent=e=>{this.privEvents.onEvent(e),Dj.instance.onEvent(e)},this.privFormat=void 0===e?CB.getDefaultInputFormat():e,this.privEvents=new Rj,this.privId=ej(),this.privStream=new Jj(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}get blob(){return this.attach("id").then((e=>{const t=[];let n=IB.from("");const r=()=>e.read().then((e=>!e||e.isEnd?"undefined"!=typeof XMLHttpRequest&&"undefined"!=typeof Blob?Promise.resolve(new Blob(t)):Promise.resolve(IB.from(n)):("undefined"!=typeof Blob?t.push(e.buffer):n=IB.concat([n,this.toBuffer(e.buffer)]),r())));return r()}))}turnOn(){this.onEvent(new lj(this.privId)),this.onEvent(new hj(this.privId))}attach(e){return xB(this,void 0,void 0,(function*(){this.onEvent(new mj(this.privId,e)),yield this.turnOn();const t=this.privStream;return this.onEvent(new vj(this.privId,e)),{detach:()=>xB(this,void 0,void 0,(function*(){return t.readEnded(),this.onEvent(new gj(this.privId,e)),this.turnOff()})),id:()=>e,read:()=>t.read()}}))}detach(e){this.onEvent(new gj(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:FF.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:qF.Stream})}toBuffer(e){const t=IB.alloc(e.byteLength),n=new Uint8Array(e);for(let e=0;e<t.length;++e)t[e]=n[e];return t}}class RB extends AB{constructor(){super()}static create(e,t){return new DB(e,t)}}class DB extends RB{constructor(e,t){super(),this.onEvent=e=>{this.privEvents.onEvent(e),Dj.instance.onEvent(e)},this.privFormat=void 0===t?TB.getDefaultInputFormat():t,this.privEvents=new Rj,this.privId=ej(),this.privCallback=e,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}get blob(){return Promise.reject("Not implemented")}turnOn(){this.onEvent(new lj(this.privId)),this.onEvent(new hj(this.privId))}attach(e){return xB(this,void 0,void 0,(function*(){return this.onEvent(new mj(this.privId,e)),yield this.turnOn(),this.onEvent(new vj(this.privId,e)),{detach:()=>(this.privCallback.close(),this.onEvent(new gj(this.privId,e)),this.turnOff()),id:()=>e,read:()=>{let e,t=0;for(;t<this.privBufferSize;){const n=new ArrayBuffer(this.privBufferSize-t),r=this.privCallback.read(n);if(void 0===e)e=n;else{new Int8Array(e).set(new Int8Array(n),t)}if(0===r)break;t+=r}return Promise.resolve({buffer:e.slice(0,t),isEnd:this.privIsClosed||0===t,timeReceived:Date.now()})}}}))}detach(e){this.onEvent(new gj(this.privId,e))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:FF.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:qF.Stream})}}var NB,LB,jB,BB,FB={};t(FB,"PushAudioOutputStreamImpl",(()=>eF),(e=>eF=e)),t(FB,"AudioOutputStream",(()=>JB),(e=>JB=e)),t(FB,"PullAudioOutputStream",(()=>ZB),(e=>ZB=e)),t(FB,"PushAudioOutputStream",(()=>$B),(e=>$B=e)),t(FB,"PullAudioOutputStreamImpl",(()=>XB),(e=>XB=e)),(LB=NB||(NB={}))[LB.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",LB[LB.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",LB[LB.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",LB[LB.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",LB[LB.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",LB[LB.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",LB[LB.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",LB[LB.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",LB[LB.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",LB[LB.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",LB[LB.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",LB[LB.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",LB[LB.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",LB[LB.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",LB[LB.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",LB[LB.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",LB[LB.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",LB[LB.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",LB[LB.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",LB[LB.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",LB[LB.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",LB[LB.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",LB[LB.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",(BB=jB||(jB={}))[BB.PCM=1]="PCM",BB[BB.MuLaw=2]="MuLaw",BB[BB.Siren=3]="Siren",BB[BB.MP3=4]="MP3",BB[BB.SILKSkype=5]="SILKSkype",BB[BB.Opus=6]="Opus";class UB extends CB{constructor(e,t,n,r,i,o,a,s,u){super(n,o,t),this.formatTag=e,this.avgBytesPerSec=r,this.blockAlign=i,this.priAudioFormatString=a,this.priRequestAudioFormatString=s,this.priHasHeader=u}static fromSpeechSynthesisOutputFormat(e){return void 0===e?UB.getDefaultOutputFormat():UB.fromSpeechSynthesisOutputFormatString(UB.SpeechSynthesisOutputFormatToString[e])}static fromSpeechSynthesisOutputFormatString(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new UB(jB.PCM,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new UB(jB.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new UB(jB.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new UB(jB.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new UB(jB.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new UB(jB.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new UB(jB.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new UB(jB.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new UB(jB.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new UB(jB.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new UB(jB.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new UB(jB.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new UB(jB.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new UB(jB.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new UB(jB.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new UB(jB.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new UB(jB.Opus,1,16e3,8192,2,16,e,"ogg-16khz-16bit-mono-opus",!1);case"ogg-24khz-16bit-mono-opus":return new UB(jB.Opus,1,24e3,8192,2,16,e,"ogg-24khz-16bit-mono-opus",!1);case"raw-48khz-16bit-mono-pcm":return new UB(jB.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new UB(jB.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new UB(jB.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new UB(jB.MP3,1,48e3,24576,2,16,e,e,!1);case"riff-16khz-16bit-mono-pcm":default:return new UB(jB.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return UB.fromSpeechSynthesisOutputFormatString("undefined"!=typeof window?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(e){if(this.priHasHeader){new DataView(this.privHeader).setUint32(40,e,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}}UB.SpeechSynthesisOutputFormatToString={[NB.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[NB.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[NB.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[NB.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[NB.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[NB.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[NB.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[NB.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[NB.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[NB.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[NB.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[NB.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[NB.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[NB.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[NB.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[NB.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[NB.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[NB.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[NB.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[NB.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[NB.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[NB.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[NB.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3"};var qB,zB,VB,WB,HB,KB,GB,YB,QB=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class JB{constructor(){}static createPullStream(){return ZB.create()}}class ZB extends JB{static create(){return new XB}}class XB extends ZB{constructor(){super(),this.privId=ej(),this.privStream=new Hj.Stream}set format(e){null==e&&(this.privFormat=UB.getDefaultOutputFormat()),this.privFormat=e}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}read(e){return QB(this,void 0,void 0,(function*(){const t=new Int8Array(e);let n=0;if(void 0!==this.privLastChunkView){if(this.privLastChunkView.length>e.byteLength)return t.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),Promise.resolve(e.byteLength);t.set(this.privLastChunkView),n=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;n<e.byteLength&&!this.privStream.isReadEnded;){const r=yield this.privStream.read();if(void 0===r||r.isEnd)yield this.privStream.readEnded();else{let i;r.buffer.byteLength>e.byteLength-n?(i=r.buffer.slice(0,e.byteLength-n),this.privLastChunkView=new Int8Array(r.buffer.slice(e.byteLength-n))):i=r.buffer,t.set(new Int8Array(i),n),n+=i.byteLength}}return n}))}write(e){kB.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}class $B extends JB{constructor(){super()}static create(e){return new eF(e)}}class eF extends $B{constructor(e){super(),this.privId=ej(),this.privCallback=e}set format(e){}write(e){this.privCallback.write&&this.privCallback.write(e)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}class tF{static fromDefaultMicrophoneInput(){const e=new YU;return new nF(new mB.MicAudioSource(e))}static fromMicrophoneInput(e){const t=new YU;return new nF(new mB.MicAudioSource(t,e))}static fromWavFileInput(e){return new nF(new HU.FileAudioSource(e))}static fromStreamInput(e){if(e instanceof class{})return new nF(new MB.PullAudioInputStreamImpl(e));if(e instanceof MB.AudioInputStream)return new nF(e);if(e instanceof MediaStream){const t=new YU;return new nF(new mB.MicAudioSource(t,null,null,e))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new rF(new AF.SpeakerAudioDestination)}static fromSpeakerOutput(e){if(void 0===e)return tF.fromDefaultSpeakerOutput();if(e instanceof AF.SpeakerAudioDestination)return new rF(e);throw new Error("Not Supported Type")}static fromAudioFileOutput(e){return new rF(new EB(e))}static fromStreamOutput(e){if(e instanceof class{})return new rF(new FB.PushAudioOutputStreamImpl(e));if(e instanceof FB.PushAudioOutputStream)return new rF(e);if(e instanceof FB.PullAudioOutputStream)return new rF(e);throw new Error("Not Supported Type")}}class nF extends tF{constructor(e){super(),this.privSource=e}get format(){return this.privSource.format}close(e,t){this.privSource.turnOff().then((()=>{e&&e()}),(e=>{t&&t(e)}))}id(){return this.privSource.id()}get blob(){return this.privSource.blob}turnOn(){return this.privSource.turnOn()}attach(e){return this.privSource.attach(e)}detach(e){return this.privSource.detach(e)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(e,t){if(kB.throwIfNull(t,"value"),void 0===this.privSource.setProperty)throw new Error("This AudioConfig instance does not support setting properties.");this.privSource.setProperty(e,t)}getProperty(e,t){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(e,t);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}class rF extends tF{constructor(e){super(),this.privDestination=e}set format(e){this.privDestination.format=e}write(e){this.privDestination.write(e)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(e,t){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(e,t){throw new Error("This AudioConfig instance does not support getting properties.")}}(zB=qB||(qB={}))[zB.Error=0]="Error",zB[zB.EndOfStream=1]="EndOfStream";class iF{constructor(e){this.privSessionId=e}get sessionId(){return this.privSessionId}}class oF extends iF{constructor(e,t){super(t),this.privOffset=e}get offset(){return this.privOffset}}(WB=VB||(VB={}))[WB.Simple=0]="Simple",WB[WB.Detailed=1]="Detailed";class aF extends class{constructor(e,t,n,r,i,o,a,s,u,c){this.privResultId=e,this.privReason=t,this.privText=n,this.privDuration=r,this.privOffset=i,this.privLanguage=o,this.privLanguageDetectionConfidence=a,this.privErrorDetails=s,this.privJson=u,this.privProperties=c}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}{constructor(e,t,n,r,i,o,a,s,u,c,l){super(e,t,n,r,i,o,a,u,c,l),this.privSpeakerId=s}get speakerId(){return this.privSpeakerId}}class sF extends oF{constructor(e,t,n){super(t,n),this.privResult=e}get result(){return this.privResult}}class uF extends oF{constructor(e,t,n,r,i){super(r,i),this.privReason=e,this.privErrorDetails=t,this.privErrorCode=n}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}class cF extends uF{}(KB=HB||(HB={}))[KB.NoMatch=0]="NoMatch",KB[KB.Canceled=1]="Canceled",KB[KB.RecognizingSpeech=2]="RecognizingSpeech",KB[KB.RecognizedSpeech=3]="RecognizedSpeech",KB[KB.RecognizingIntent=4]="RecognizingIntent",KB[KB.RecognizedIntent=5]="RecognizedIntent",KB[KB.TranslatingSpeech=6]="TranslatingSpeech",KB[KB.TranslatedSpeech=7]="TranslatedSpeech",KB[KB.SynthesizingAudio=8]="SynthesizingAudio",KB[KB.SynthesizingAudioCompleted=9]="SynthesizingAudioCompleted",KB[KB.SynthesizingAudioStarted=10]="SynthesizingAudioStarted",KB[KB.EnrollingVoiceProfile=11]="EnrollingVoiceProfile",KB[KB.EnrolledVoiceProfile=12]="EnrolledVoiceProfile",KB[KB.RecognizedSpeakers=13]="RecognizedSpeakers",KB[KB.RecognizedSpeaker=14]="RecognizedSpeaker",KB[KB.ResetVoiceProfile=15]="ResetVoiceProfile",KB[KB.DeletedVoiceProfile=16]="DeletedVoiceProfile";class lF{constructor(){}static fromSubscription(e,t){kB.throwIfNullOrWhitespace(e,"subscriptionKey"),kB.throwIfNullOrWhitespace(t,"region");const n=new hF;return n.setProperty(GB.SpeechServiceConnection_Region,t),n.setProperty(GB.SpeechServiceConnection_IntentRegion,t),n.setProperty(GB.SpeechServiceConnection_Key,e),n}static fromEndpoint(e,t){kB.throwIfNull(e,"endpoint");const n=new hF;return n.setProperty(GB.SpeechServiceConnection_Endpoint,e.href),void 0!==t&&n.setProperty(GB.SpeechServiceConnection_Key,t),n}static fromHost(e,t){kB.throwIfNull(e,"hostName");const n=new hF;return n.setProperty(GB.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&n.setProperty(GB.SpeechServiceConnection_Key,t),n}static fromAuthorizationToken(e,t){kB.throwIfNull(e,"authorizationToken"),kB.throwIfNullOrWhitespace(t,"region");const n=new hF;return n.setProperty(GB.SpeechServiceConnection_Region,t),n.setProperty(GB.SpeechServiceConnection_IntentRegion,t),n.authorizationToken=e,n}close(){}}class hF extends lF{constructor(){super(),this.privProperties=new fF,this.speechRecognitionLanguage="en-US",this.outputFormat=VB.Simple}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(GB.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(GB.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(GB.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(GB.SpeechServiceAuthorization_Token)}set authorizationToken(e){this.privProperties.setProperty(GB.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return this.privProperties.getProperty(GB.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(e){this.privProperties.setProperty(GB.SpeechServiceConnection_RecoLanguage,e)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(GB.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(e){this.privProperties.setProperty(GB.SpeechServiceConnection_AutoDetectSourceLanguages,e)}get outputFormat(){return VB[this.privProperties.getProperty(FU,void 0)]}set outputFormat(e){this.privProperties.setProperty(FU,VB[e])}get endpointId(){return this.privProperties.getProperty(GB.SpeechServiceConnection_EndpointId)}set endpointId(e){this.privProperties.setProperty(GB.SpeechServiceConnection_EndpointId,e)}setProperty(e,t){kB.throwIfNull(t,"value"),this.privProperties.setProperty(e,t)}getProperty(e,t){return this.privProperties.getProperty(e,t)}setProxy(e,t,n,r){this.setProperty(GB[GB.SpeechServiceConnection_ProxyHostName],e),this.setProperty(GB[GB.SpeechServiceConnection_ProxyPort],t),this.setProperty(GB[GB.SpeechServiceConnection_ProxyUserName],n),this.setProperty(GB[GB.SpeechServiceConnection_ProxyPassword],r)}setServiceProperty(e,t,n){const r=JSON.parse(this.privProperties.getProperty(qU,"{}"));r[e]=t,this.privProperties.setProperty(qU,JSON.stringify(r))}setProfanity(e){this.privProperties.setProperty(GB.SpeechServiceResponse_ProfanityOption,kF[e])}enableAudioLogging(){this.privProperties.setProperty(GB.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(GB.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privProperties.setProperty(zU,"true")}clone(){const e=new hF;return e.privProperties=this.privProperties.clone(),e}get speechSynthesisLanguage(){return this.privProperties.getProperty(GB.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(e){this.privProperties.setProperty(GB.SpeechServiceConnection_SynthLanguage,e)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(GB.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(e){this.privProperties.setProperty(GB.SpeechServiceConnection_SynthVoice,e)}get speechSynthesisOutputFormat(){return NB[this.privProperties.getProperty(GB.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(e){this.privProperties.setProperty(GB.SpeechServiceConnection_SynthOutputFormat,NB[e])}}class fF{constructor(){this.privKeys=[],this.privValues=[]}getProperty(e,t){let n;n="string"==typeof e?e:GB[e];for(let e=0;e<this.privKeys.length;e++)if(this.privKeys[e]===n)return this.privValues[e];return t}setProperty(e,t){let n;n="string"==typeof e?e:GB[e];for(let e=0;e<this.privKeys.length;e++)if(this.privKeys[e]===n)return void(this.privValues[e]=t);this.privKeys.push(n),this.privValues.push(t)}clone(){const e=new fF;for(let t=0;t<this.privKeys.length;t++)e.privKeys.push(this.privKeys[t]),e.privValues.push(this.privValues[t]);return e}mergeTo(e){this.privKeys.forEach((t=>{if(void 0===e.getProperty(t,void 0)){const n=this.getProperty(t);e.setProperty(t,n)}}))}}(YB=GB||(GB={}))[YB.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",YB[YB.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",YB[YB.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",YB[YB.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",YB[YB.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",YB[YB.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",YB[YB.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",YB[YB.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",YB[YB.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",YB[YB.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",YB[YB.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",YB[YB.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",YB[YB.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",YB[YB.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",YB[YB.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",YB[YB.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",YB[YB.Speech_SessionId=16]="Speech_SessionId",YB[YB.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",YB[YB.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",YB[YB.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",YB[YB.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",YB[YB.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",YB[YB.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",YB[YB.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",YB[YB.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",YB[YB.CancellationDetails_Reason=25]="CancellationDetails_Reason",YB[YB.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",YB[YB.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",YB[YB.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",YB[YB.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",YB[YB.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",YB[YB.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",YB[YB.SpeechServiceConnection_EnableAudioLogging=32]="SpeechServiceConnection_EnableAudioLogging",YB[YB.SpeechServiceResponse_ProfanityOption=33]="SpeechServiceResponse_ProfanityOption",YB[YB.SpeechServiceResponse_PostProcessingOption=34]="SpeechServiceResponse_PostProcessingOption",YB[YB.SpeechServiceResponse_RequestWordLevelTimestamps=35]="SpeechServiceResponse_RequestWordLevelTimestamps",YB[YB.SpeechServiceResponse_StablePartialResultThreshold=36]="SpeechServiceResponse_StablePartialResultThreshold",YB[YB.SpeechServiceResponse_OutputFormatOption=37]="SpeechServiceResponse_OutputFormatOption",YB[YB.SpeechServiceResponse_TranslationRequestStablePartialResult=38]="SpeechServiceResponse_TranslationRequestStablePartialResult",YB[YB.Conversation_ApplicationId=39]="Conversation_ApplicationId",YB[YB.Conversation_DialogType=40]="Conversation_DialogType",YB[YB.Conversation_Initial_Silence_Timeout=41]="Conversation_Initial_Silence_Timeout",YB[YB.Conversation_From_Id=42]="Conversation_From_Id",YB[YB.Conversation_Conversation_Id=43]="Conversation_Conversation_Id",YB[YB.Conversation_Custom_Voice_Deployment_Ids=44]="Conversation_Custom_Voice_Deployment_Ids",YB[YB.Conversation_Speech_Activity_Template=45]="Conversation_Speech_Activity_Template",YB[YB.Conversation_Request_Bot_Status_Messages=46]="Conversation_Request_Bot_Status_Messages",YB[YB.SpeechServiceConnection_Host=47]="SpeechServiceConnection_Host",YB[YB.ConversationTranslator_Host=48]="ConversationTranslator_Host",YB[YB.ConversationTranslator_Name=49]="ConversationTranslator_Name",YB[YB.ConversationTranslator_CorrelationId=50]="ConversationTranslator_CorrelationId",YB[YB.ConversationTranslator_Token=51]="ConversationTranslator_Token",YB[YB.PronunciationAssessment_ReferenceText=52]="PronunciationAssessment_ReferenceText",YB[YB.PronunciationAssessment_GradingSystem=53]="PronunciationAssessment_GradingSystem",YB[YB.PronunciationAssessment_Granularity=54]="PronunciationAssessment_Granularity",YB[YB.PronunciationAssessment_EnableMiscue=55]="PronunciationAssessment_EnableMiscue",YB[YB.PronunciationAssessment_Json=56]="PronunciationAssessment_Json",YB[YB.PronunciationAssessment_Params=57]="PronunciationAssessment_Params";var dF={};t(dF,"Recognizer",(()=>mF),(e=>mF=e));var pF=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class mF{constructor(e,t,n){this.audioConfig=void 0!==e?e:tF.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=t.clone(),this.privConnectionFactory=n,this.implCommonRecognizerSetup()}close(e,t){kB.throwIfDisposed(this.privDisposed),Lj(this.dispose(!0),e,t)}get internalData(){return this.privReco}dispose(e){return pF(this,void 0,void 0,(function*(){this.privDisposed||(this.privDisposed=!0,e&&this.privReco&&(yield this.privReco.audioSource.turnOff(),yield this.privReco.dispose()))}))}static get telemetryEnabled(){return _B.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(e){_B.ServiceRecognizerBase.telemetryDataEnabled=e}implCommonRecognizerSetup(){let e="undefined"!=typeof window?"Browser":"Node",t="unknown",n="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,n=navigator.appVersion);const r=this.createRecognizerConfig(new KF(new GF(new QF(e,t,n))));this.privReco=this.createServiceRecognizer(mF.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,r)}recognizeOnceAsyncImpl(e){return pF(this,void 0,void 0,(function*(){kB.throwIfDisposed(this.privDisposed);const t=new Nj;yield this.implRecognizerStop(),yield this.privReco.recognize(e,t.resolve,t.reject);const n=yield t.promise;return yield this.implRecognizerStop(),n}))}startContinuousRecognitionAsyncImpl(e){return pF(this,void 0,void 0,(function*(){kB.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop(),yield this.privReco.recognize(e,void 0,void 0)}))}stopContinuousRecognitionAsyncImpl(){return pF(this,void 0,void 0,(function*(){kB.throwIfDisposed(this.privDisposed),yield this.implRecognizerStop()}))}implRecognizerStop(){return pF(this,void 0,void 0,(function*(){this.privReco&&(yield this.privReco.stopRecognizing())}))}static getAuthFromProperties(e){const t=e.getProperty(GB.SpeechServiceConnection_Key,void 0);return t&&""!==t?new yB(t):new wB((t=>{const n=e.getProperty(GB.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(n)}),(t=>{const n=e.getProperty(GB.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(n)}))}}var vF={};t(vF,"SpeechRecognizer",(()=>MF),(e=>MF=e));var gF,yF,bF,wF,_F,kF,SF,EF=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class MF extends dF.Recognizer{constructor(e,t){const n=e;kB.throwIfNull(n,"speechConfig"),kB.throwIfNullOrWhitespace(n.properties.getProperty(GB.SpeechServiceConnection_RecoLanguage),GB[GB.SpeechServiceConnection_RecoLanguage]),super(t,n.properties,new XF),this.privDisposedRecognizer=!1}static FromConfig(e,t,n){const r=e;t.properties.mergeTo(r.properties);return new MF(e,n)}get endpointId(){return kB.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(GB.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(GB.SpeechServiceAuthorization_Token)}set authorizationToken(e){kB.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(GB.SpeechServiceAuthorization_Token,e)}get speechRecognitionLanguage(){return kB.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(GB.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return kB.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(FU,VB[VB.Simple])===VB[VB.Simple]?VB.Simple:VB.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(e,t){Lj(this.recognizeOnceAsyncImpl(NF.Interactive),e,t)}startContinuousRecognitionAsync(e,t){Lj(this.startContinuousRecognitionAsyncImpl(NF.Conversation),e,t)}stopContinuousRecognitionAsync(e,t){Lj(this.stopContinuousRecognitionAsyncImpl(),e,t)}startKeywordRecognitionAsync(e,t,n){kB.throwIfNull(e,"model"),n&&n("Not yet implemented.")}stopKeywordRecognitionAsync(e,t){e&&e()}close(e,t){kB.throwIfDisposed(this.privDisposedRecognizer),Lj(this.dispose(!0),e,t)}dispose(e){const t=Object.create(null,{dispose:{get:()=>super.dispose}});return EF(this,void 0,void 0,(function*(){this.privDisposedRecognizer||(e&&(this.privDisposedRecognizer=!0,yield this.implRecognizerStop()),yield t.dispose.call(this,e))}))}createRecognizerConfig(e){return new HF(e,this.properties)}createServiceRecognizer(e,t,n,r){const i=n;return new aU.SpeechServiceRecognizer(e,t,i,r,this)}}(yF=gF||(gF={}))[yF.TextIndependentIdentification=0]="TextIndependentIdentification",yF[yF.TextDependentVerification=1]="TextDependentVerification",yF[yF.TextIndependentVerification=2]="TextIndependentVerification";(wF=bF||(bF={}))[wF.NoError=0]="NoError",wF[wF.AuthenticationFailure=1]="AuthenticationFailure",wF[wF.BadRequestParameters=2]="BadRequestParameters",wF[wF.TooManyRequests=3]="TooManyRequests",wF[wF.ConnectionFailure=4]="ConnectionFailure",wF[wF.ServiceTimeout=5]="ServiceTimeout",wF[wF.ServiceError=6]="ServiceError",wF[wF.RuntimeError=7]="RuntimeError";class TF{constructor(){}set applicationId(e){}}TF.DialogTypes=((_F=class{}).BotFramework="bot_framework",_F.CustomCommands="custom_commands",_F);(SF=kF||(kF={}))[SF.Masked=0]="Masked",SF[SF.Removed=1]="Removed",SF[SF.Raw=2]="Raw";class CF{constructor(e,t,n,r,i){this.privResultId=e,this.privReason=t,this.privAudioData=n,this.privErrorDetails=r,this.privProperties=i}get resultId(){return this.privResultId}get reason(){return this.privReason}get audioData(){return this.privAudioData}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}class IF{constructor(e){this.privResult=e}get result(){return this.privResult}}class xF{constructor(e,t,n,r){this.privAudioOffset=e,this.privText=t,this.privWordLength=n,this.privTextOffset=r}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}}var AF={};t(AF,"SpeakerAudioDestination",(()=>RF),(e=>RF=e));var PF=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const OF={[jB.PCM]:"audio/wav",[jB.MP3]:"audio/mpeg",[jB.Opus]:"audio/ogg"};class RF{constructor(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||ej(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(e,t,n){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then((()=>{t&&t()}),(e=>{n&&n(e)}))):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)}close(e,t){if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then((()=>{e&&e()}),(e=>{t&&t(e)}));else if(void 0!==this.privAudioOutputStream){let n=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(n).then((r=>{this.privFormat.hasHeader&&(n=xU.SynthesisAdapterBase.addHeader(n,this.privFormat));const i=new Blob([n],{type:OF[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(i),this.notifyPlayback().then((()=>{e&&e()}),(e=>{t&&t(e)}))}),(e=>{t&&t(e)}))}}set format(e){if("undefined"!=typeof AudioContext||void 0!==window.webkitAudioContext){this.privFormat=e;const t=OF[this.privFormat.formatTag];void 0===t?console.warn(`Unknown mimeType for format ${jB[this.privFormat.formatTag]}.`):"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported(t)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=e=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=1800,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(t),this.privSourceBuffer.onupdate=e=>{this.updateSourceBuffer().catch((e=>{Dj.instance.onEvent(new pB(e))}))},this.privSourceBuffer.onupdateend=e=>{this.handleSourceBufferUpdateEnd().catch((e=>{Dj.instance.onEvent(new pB(e))}))},this.privSourceBuffer.onupdatestart=e=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch((e=>{Dj.instance.onEvent(new pB(e))}))):(console.warn(`Format ${jB[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new FB.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get isClosed(){return this.privIsClosed}get currentTime(){return void 0!==this.privAudio?this.privAudio.currentTime:-1}pause(){this.privIsPaused||void 0===this.privAudio||(this.privAudio.pause(),this.privIsPaused=!0)}resume(e,t){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then((()=>{e&&e()}),(e=>{t&&t(e)})),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}updateSourceBuffer(){return PF(this,void 0,void 0,(function*(){if(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch(t){return this.privAudioBuffer.unshift(e),void console.log("buffer filled, pausing addition of binaries until space is made")}yield this.notifyPlayback()}else this.canEndStream()&&(yield this.handleSourceBufferUpdateEnd())}))}handleSourceBufferUpdateEnd(){return PF(this,void 0,void 0,(function*(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),yield this.notifyPlayback())}))}notifyPlayback(){return PF(this,void 0,void 0,(function*(){this.privPlaybackStarted||void 0===this.privAudio||(this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||(yield this.privAudio.play()),this.privPlaybackStarted=!0)}))}canEndStream(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState}sourceBufferAvailable(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating}}class DF extends Pj{constructor(e,t,n,r,i,o,a,s){if(!t)throw new Ij("path");if(!n)throw new Ij("requestId");const u={};if(u[vB.Path]=t,u[vB.RequestId]=n,u[vB.RequestTimestamp]=(new Date).toISOString(),r&&(u[vB.ContentType]=r),o&&(u[vB.RequestStreamId]=o),a)for(const e in a)e&&(u[e]=a[e]);s?super(e,i,u,s):super(e,i,u),this.privPath=t,this.privRequestId=n,this.privContentType=r,this.privStreamId=o,this.privAdditionalHeaders=a}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}}DF.fromConnectionMessage=e=>{let t=null,n=null,r=null,i=null,o=null;const a={};if(e.headers)for(const s in e.headers)s&&(s.toLowerCase()===vB.Path.toLowerCase()?t=e.headers[s]:s.toLowerCase()===vB.RequestId.toLowerCase()?n=e.headers[s]:s.toLowerCase()===vB.RequestTimestamp.toLowerCase()?i=e.headers[s]:s.toLowerCase()===vB.ContentType.toLowerCase()?r=e.headers[s]:s.toLowerCase()===vB.RequestStreamId.toLowerCase()?o=e.headers[s]:a[s]=e.headers[s]);return new DF(e.messageType,t,n,r,e.body,o,a,e.id)};var NF,LF,jF,BF,FF,UF,qF,zF,VF=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class WF{constructor(e,t,n,r,i){if(this.privSetTimeout=setTimeout,this.recognizeOverride=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendSpeechContext=e=>{const t=this.speechContext.toJSON();if(t)return e.send(new DF(rj.Text,"speech.context",this.privRequestSession.requestId,"application/json",t))},this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.sendSpeechServiceConfig=(e,t,n)=>{if(!0!==WF.telemetryDataEnabled){const e={context:{system:JSON.parse(n).context.system}};n=JSON.stringify(e)}if(n)return e.send(new DF(rj.Text,"speech.config",t.requestId,"application/json",n))},!e)throw new Ij("authentication");if(!t)throw new Ij("connectionFactory");if(!n)throw new Ij("audioSource");if(!r)throw new Ij("recognizerConfig");this.privMustReportEndOfStream=!1,this.privAuthentication=e,this.privConnectionFactory=t,this.privAudioSource=n,this.privRecognizerConfig=r,this.privIsDisposed=!1,this.privRecognizer=i,this.privRequestSession=new dU.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new Rj,this.privServiceEvents=new Rj,this.privDynamicGrammar=new MU,this.privSpeechContext=new EU(this.privDynamicGrammar),this.privAgentConfig=new TU,"undefined"!=typeof Blob&&"undefined"!=typeof Worker&&(this.privSetTimeout=Zj.setTimeout),this.connectionEvents.attach((e=>VF(this,void 0,void 0,(function*(){if("ConnectionClosedEvent"===e.name){const t=e;1e3!==t.statusCode&&(yield this.cancelRecognitionLocal(qB.Error,1007===t.statusCode?bF.BadRequestParameters:bF.ConnectionFailure,t.reason+" websocket error code: "+t.statusCode))}}))))}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(e){this.privRecognizerConfig.parameters.setProperty(GB.ConversationTranslator_Token,e)}set authentication(e){this.privAuthentication=this.authentication}isDisposed(){return this.privIsDisposed}dispose(e){return VF(this,void 0,void 0,(function*(){if(this.privIsDisposed=!0,this.privConnectionConfigurationPromise)try{const t=yield this.privConnectionConfigurationPromise;yield t.dispose(e)}catch(e){return}}))}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}recognize(e,t,n){return VF(this,void 0,void 0,(function*(){if(void 0!==this.recognizeOverride)return this.recognizeOverride(e,t,n);this.privConnectionConfigurationPromise=null,this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=n,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const r=this.connectImpl(),i=yield this.audioSource.attach(this.privRequestSession.audioNodeId),o=yield this.audioSource.format,a=yield this.audioSource.deviceInfo,s=new xq(i,o.avgBytesPerSec);yield this.privRequestSession.onAudioSourceAttachCompleted(s,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:a};try{yield r}catch(e){return void(yield this.cancelRecognitionLocal(qB.Error,bF.ConnectionFailure,e))}const u=new iF(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,u);this.receiveMessage();this.sendAudio(s).catch((e=>VF(this,void 0,void 0,(function*(){yield this.cancelRecognitionLocal(qB.Error,bF.RuntimeError,e)}))))}))}stopRecognizing(){return VF(this,void 0,void 0,(function*(){this.privRequestSession.isRecognizing&&(yield this.audioSource.turnOff(),yield this.sendFinalAudio(),yield this.privRequestSession.onStopRecognizing(),yield this.privRequestSession.turnCompletionPromise,yield this.privRequestSession.dispose())}))}connect(){return VF(this,void 0,void 0,(function*(){return yield this.connectImpl(),Promise.resolve()}))}connectAsync(e,t){this.connectImpl().then((n=>{try{e&&e()}catch(e){t&&t(e)}}),(e=>{try{t&&t(e)}catch(e){}}))}disconnect(){return VF(this,void 0,void 0,(function*(){yield this.cancelRecognitionLocal(qB.Error,bF.NoError,"Disconnecting"),void 0!==this.disconnectOverride&&(yield this.disconnectOverride());try{yield(yield this.privConnectionPromise).dispose()}catch(e){}this.privConnectionPromise=null}))}sendMessage(e){}sendNetworkMessage(e,t){return VF(this,void 0,void 0,(function*(){const n="string"==typeof t?rj.Text:rj.Binary,r="string"==typeof t?"application/json":"";return(yield this.fetchConnection()).send(new DF(n,e,this.privRequestSession.requestId,r,t))}))}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}sendTelemetryData(){return VF(this,void 0,void 0,(function*(){const e=this.privRequestSession.getTelemetry();if(!0!==WF.telemetryDataEnabled||this.privIsDisposed||null===e)return;if(WF.telemetryData)try{WF.telemetryData(e)}catch(e){}const t=yield this.fetchConnection();yield t.send(new DF(rj.Text,"telemetry",this.privRequestSession.requestId,"application/json",e))}))}cancelRecognitionLocal(e,t,n){return VF(this,void 0,void 0,(function*(){this.privRequestSession.isRecognizing&&(yield this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,t,n))}))}receiveMessage(){return VF(this,void 0,void 0,(function*(){try{if(this.privIsDisposed)return;let e=yield this.fetchConnection();const t=yield e.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(!t)return this.privRequestSession.isRecognizing?this.receiveMessage():void 0;this.privServiceHasSentMessage=!0;const n=DF.fromConnectionMessage(t);if(n.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(n.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const t=iU.fromJSON(n.textBody),r=new oF(t.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,r);break;case"speech.enddetected":let i;i=n.textBody.length>0?n.textBody:"{ Offset: 0 }";const o=iU.fromJSON(i);this.privRecognizerConfig.isContinuousRecognition&&this.privRequestSession.onServiceRecognized(o.Offset+this.privRequestSession.currentTurnAudioOffset);const a=new oF(o.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,a);break;case"turn.end":yield this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,yield this.cancelRecognitionLocal(qB.EndOfStream,bF.NoError,void 0));const s=new iF(this.privRequestSession.sessionId);if(yield this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)return void(this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,s));e=yield this.fetchConnection(),yield this.sendPrePayloadJSON(e);break;default:(yield this.processTypeSpecificMessages(n))||this.privServiceEvents&&this.serviceEvents.onEvent(new bj(n.path.toLowerCase(),n.textBody))}return this.receiveMessage()}catch(e){return null}}))}sendPrePayloadJSON(e){return VF(this,void 0,void 0,(function*(){if(void 0!==this.sendPrePayloadJSONOverride)return this.sendPrePayloadJSONOverride(e);yield this.sendSpeechContext(e),yield this.sendWaveHeader(e)}))}sendWaveHeader(e){return VF(this,void 0,void 0,(function*(){const t=yield this.audioSource.format;return e.send(new DF(rj.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",t.header))}))}connectImpl(e=!1){if(this.privConnectionPromise)return this.privConnectionPromise.then((e=>e.state()===ij.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise),(e=>(this.privConnectionId=null,this.privConnectionPromise=null,this.privServiceHasSentMessage=!1,this.connectImpl())));this.privAuthFetchEventId=ej();const t=this.privRecognizerConfig.parameters.getProperty(GB.Speech_SessionId,void 0);this.privConnectionId=void 0!==t?t:ej(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);const n=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=n.then((t=>VF(this,void 0,void 0,(function*(){yield this.privRequestSession.onAuthCompleted(!1);const n=this.privConnectionFactory.create(this.privRecognizerConfig,t,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(n.events),n.events.attach((e=>{this.connectionEvents.onEvent(e)}));const r=yield n.open();return 200===r.statusCode?(yield this.privRequestSession.onConnectionEstablishCompleted(r.statusCode),Promise.resolve(n)):403!==r.statusCode||e?(yield this.privRequestSession.onConnectionEstablishCompleted(r.statusCode,r.reason),Promise.reject(`Unable to contact server. StatusCode: ${r.statusCode}, ${this.privRecognizerConfig.parameters.getProperty(GB.SpeechServiceConnection_Endpoint)} Reason: ${r.reason}`)):this.connectImpl(!0)}))),(e=>VF(this,void 0,void 0,(function*(){throw yield this.privRequestSession.onAuthCompleted(!0,e),new Error(e)})))),this.privConnectionPromise.catch((()=>{})),void 0!==this.postConnectImplOverride?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise}fetchConnection(){return VF(this,void 0,void 0,(function*(){return this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then((e=>e.state()===ij.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=null,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise),(e=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=null,this.privServiceHasSentMessage=!1,this.fetchConnection()))):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)}))}sendAudio(e){return VF(this,void 0,void 0,(function*(){const t=yield this.audioSource.format;let n=Date.now();const r=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),i=t.avgBytesPerSec/1e3*parseInt(r,10),o=this.privRequestSession.recogNumber,a=()=>VF(this,void 0,void 0,(function*(){var r;if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===o){const s=yield this.fetchConnection(),u=yield e.read();if(this.privRequestSession.isSpeechEnded)return;let c,l;if(!u||u.isEnd?(c=null,l=0):(c=u.buffer,this.privRequestSession.onAudioSent(c.byteLength),l=i>=this.privRequestSession.bytesSent?0:Math.max(0,n-Date.now())),0!==l&&(yield this.delay(l)),null!==c&&(n=Date.now()+1e3*c.byteLength/(2*t.avgBytesPerSec)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===o){if(s.send(new DF(rj.Binary,"audio",this.privRequestSession.requestId,null,c)).catch((()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch((()=>{}))})),!(null===(r=u)||void 0===r?void 0:r.isEnd))return a();this.privRequestSession.onSpeechEnded()}}}));return a()}))}delay(e){return new Promise(((t,n)=>{this.privSetTimeout(t,e)}))}writeBufferToConsole(e){let t="Buffer Size: ";if(null===e)t+="null";else{const n=new Uint8Array(e);t+=e.byteLength+"\r\n";for(let r=0;r<e.byteLength;r++)t+=n[r].toString(16).padStart(2,"0")+" "}console.info(t)}sendFinalAudio(){return VF(this,void 0,void 0,(function*(){const e=yield this.fetchConnection();yield e.send(new DF(rj.Binary,"audio",this.privRequestSession.requestId,null,null))}))}configureConnection(){return VF(this,void 0,void 0,(function*(){const e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),yield this.sendPrePayloadJSON(e),e)}))}}WF.telemetryDataEnabled=!0,(LF=NF||(NF={}))[LF.Interactive=0]="Interactive",LF[LF.Conversation=1]="Conversation",LF[LF.Dictation=2]="Dictation",(BF=jF||(jF={}))[BF.Simple=0]="Simple",BF[BF.Detailed=1]="Detailed";class HF{constructor(e,t){this.privRecognitionMode=NF.Interactive,this.privSpeechServiceConfig=e||new KF(new GF(null)),this.privParameters=t}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===NF.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=NF[e]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==NF.Interactive}get autoDetectSourceLanguages(){return this.parameters.getProperty(GB.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}}class KF{constructor(e){this.serialize=()=>JSON.stringify(this,((e,t)=>{if(t&&"object"==typeof t){const e={};for(const n in t)Object.hasOwnProperty.call(t,n)&&(e[n&&n.charAt(0).toLowerCase()+n.substring(1)]=t[n]);return e}return t})),this.context=e}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(e){this.recognition=e.toLowerCase()}}class GF{constructor(e){this.system=new YF,this.os=e}}class YF{constructor(){this.name="SpeechSDK",this.version="1.15.0",this.build="JavaScript",this.lang="JavaScript"}}class QF{constructor(e,t,n){this.platform=e,this.name=t,this.version=n}}(UF=FF||(FF={})).Bluetooth="Bluetooth",UF.Wired="Wired",UF.WiFi="WiFi",UF.Cellular="Cellular",UF.InBuilt="InBuilt",UF.Unknown="Unknown",(zF=qF||(qF={})).Phone="Phone",zF.Speaker="Speaker",zF.Car="Car",zF.Headset="Headset",zF.Thermostat="Thermostat",zF.Microphones="Microphones",zF.Deskphone="Deskphone",zF.RemoteControl="RemoteControl",zF.Unknown="Unknown",zF.File="File",zF.Stream="Stream";class JF{constructor(){this.toConnectionMessage=e=>{const t=new Nj;try{if(e.messageType===rj.Text){const n=e.textContent;let r={},i=null;if(n){const e=n.split("\r\n\r\n");e&&e.length>0&&(r=this.parseHeaders(e[0]),e.length>1&&(i=e[1]))}t.resolve(new Pj(e.messageType,i,r,e.id))}else if(e.messageType===rj.Binary){const n=e.binaryContent;let r={},i=null;if(!n||n.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const o=new DataView(n),a=o.getInt16(0);if(n.byteLength<a+2)throw new Error("Invalid binary message format. Header content missing.");let s="";for(let e=0;e<a;e++)s+=String.fromCharCode(o.getInt8(e+2));r=this.parseHeaders(s),n.byteLength>a+2&&(i=n.slice(2+a)),t.resolve(new Pj(e.messageType,i,r,e.id))}}catch(e){t.reject(`Error formatting the message. Error: ${e}`)}return t.promise},this.fromConnectionMessage=e=>{const t=new Nj;try{if(e.messageType===rj.Text){const n=`${this.makeHeaders(e)}\r\n${e.textBody?e.textBody:""}`;t.resolve(new Vj(rj.Text,n,e.id))}else if(e.messageType===rj.Binary){const n=this.makeHeaders(e),r=e.binaryBody,i=this.stringToArrayBuffer(n),o=new Int8Array(i),a=o.byteLength,s=new Int8Array(2+a+(r?r.byteLength:0));if(s[0]=a>>8&255,s[1]=255&a,s.set(o,2),r){const e=new Int8Array(r);s.set(e,2+a)}const u=s.buffer;t.resolve(new Vj(rj.Binary,u,e.id))}}catch(e){t.reject(`Error formatting the message. ${e}`)}return t.promise},this.makeHeaders=e=>{let t="";if(e.headers)for(const n in e.headers)n&&(t+=`${n}: ${e.headers[n]}\r\n`);return t},this.parseHeaders=e=>{const t={};if(e){const n=e.match(/[^\r\n]+/g);if(t)for(const e of n)if(e){const n=e.indexOf(":"),r=n>0?e.substr(0,n).trim().toLowerCase():e,i=n>0&&e.length>n+1?e.substr(n+1).trim():"";t[r]=i}}return t},this.stringToArrayBuffer=e=>{const t=new ArrayBuffer(e.length),n=new DataView(t);for(let t=0;t<e.length;t++)n.setUint8(t,e.charCodeAt(t));return t}}}class ZF{}ZF.BotId="botid",ZF.ConnectionId="connectionid",ZF.CustomSpeechDeploymentId="cid",ZF.CustomVoiceDeploymentId="deploymentId",ZF.EnableAudioLogging="storeAudio",ZF.EnableLanguageId="lidEnabled",ZF.EnableWordLevelTimestamps="wordLevelTimestamps",ZF.EndSilenceTimeoutMs="endSilenceTimeoutMs",ZF.Format="format",ZF.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",ZF.Language="language",ZF.Profanity="profanity",ZF.RequestBotStatusMessages="enableBotMessageStatus",ZF.StableIntermediateThreshold="stableIntermediateThreshold",ZF.StableTranslation="stableTranslation",ZF.TestHooks="testhooks";class XF extends class{setCommonUrlParams(e,t,n){this.setUrlParameter(GB.SpeechServiceConnection_EnableAudioLogging,ZF.EnableAudioLogging,e,t,n),this.setUrlParameter(GB.SpeechServiceResponse_RequestWordLevelTimestamps,ZF.EnableWordLevelTimestamps,e,t,n),this.setUrlParameter(GB.SpeechServiceResponse_ProfanityOption,ZF.Profanity,e,t,n),this.setUrlParameter(GB.SpeechServiceConnection_InitialSilenceTimeoutMs,ZF.InitialSilenceTimeoutMs,e,t,n),this.setUrlParameter(GB.SpeechServiceConnection_EndSilenceTimeoutMs,ZF.EndSilenceTimeoutMs,e,t,n),this.setUrlParameter(GB.SpeechServiceResponse_StablePartialResultThreshold,ZF.StableIntermediateThreshold,e,t,n);const r=JSON.parse(e.parameters.getProperty(qU,"{}"));Object.keys(r).forEach(((e,n,i)=>{t[e]=r[e]}))}setUrlParameter(e,t,n,r,i){const o=n.parameters.getProperty(e,void 0);!o||i&&-1!==i.search(t)||(r[t]=o.toLocaleLowerCase())}}{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.create=(e,t,n)=>{let r=e.parameters.getProperty(GB.SpeechServiceConnection_Endpoint,void 0);const i=e.parameters.getProperty(GB.SpeechServiceConnection_Region,void 0),o=i&&i.toLowerCase().startsWith("china")?".azure.cn":".microsoft.com",a=e.parameters.getProperty(GB.SpeechServiceConnection_Host,"wss://"+i+".stt.speech"+o),s={},u=e.parameters.getProperty(GB.SpeechServiceConnection_EndpointId,void 0),c=e.parameters.getProperty(GB.SpeechServiceConnection_RecoLanguage,void 0);if(u?r&&-1!==r.search(ZF.CustomSpeechDeploymentId)||(s[ZF.CustomSpeechDeploymentId]=u):c&&(r&&-1!==r.search(ZF.Language)||(s[ZF.Language]=c)),r&&-1!==r.search(ZF.Format)||(s[ZF.Format]=e.parameters.getProperty(FU,VB[VB.Simple]).toLowerCase()),void 0!==e.autoDetectSourceLanguages&&(s[ZF.EnableLanguageId]="true"),this.setCommonUrlParams(e,s,r),!r)switch(e.recognitionMode){case NF.Conversation:r="true"===e.parameters.getProperty(zU,"false")?a+this.dictationRelativeUri:a+this.conversationRelativeUri;break;case NF.Dictation:r=a+this.dictationRelativeUri;break;default:r=a+this.interactiveRelativeUri}const l={};void 0!==t.token&&""!==t.token&&(l[t.headerName]=t.token),l[vB.ConnectionId]=n,e.parameters.setProperty(GB.SpeechServiceConnection_Url,r);const h="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new QU.WebsocketConnection(r,s,l,new JF,Pq.fromRecognizerConfig(e),h,n)}}}class $F{static implTranslateRecognitionResult(e){let t=HB.Canceled;switch(e){case nU.Success:t=HB.RecognizedSpeech;break;case nU.NoMatch:case nU.InitialSilenceTimeout:case nU.BabbleTimeout:case nU.EndOfDictation:t=HB.NoMatch;break;case nU.Error:default:t=HB.Canceled}return t}static implTranslateCancelResult(e){let t=qB.EndOfStream;switch(e){case nU.Success:case nU.EndOfDictation:case nU.NoMatch:t=qB.EndOfStream;break;case nU.InitialSilenceTimeout:case nU.BabbleTimeout:case nU.Error:default:t=qB.Error}return t}static implTranslateCancelErrorCode(e){let t=bF.NoError;switch(e){case nU.Error:t=bF.ServiceError;break;case nU.TooManyRequests:t=bF.TooManyRequests;break;default:t=bF.NoError}return t}}var eU,tU,nU,rU;(tU=eU||(eU={}))[tU.Success=0]="Success",tU[tU.SynthesisEnd=1]="SynthesisEnd",tU[tU.Error=2]="Error",(rU=nU||(nU={}))[rU.Success=0]="Success",rU[rU.NoMatch=1]="NoMatch",rU[rU.InitialSilenceTimeout=2]="InitialSilenceTimeout",rU[rU.BabbleTimeout=3]="BabbleTimeout",rU[rU.Error=4]="Error",rU[rU.EndOfDictation=5]="EndOfDictation",rU[rU.TooManyRequests=6]="TooManyRequests";_B.ServiceRecognizerBase;class iU{constructor(e){this.privSpeechStartDetected=JSON.parse(e)}static fromJSON(e){return new iU(e)}get Offset(){return this.privSpeechStartDetected.Offset}}class oU{constructor(e){this.privSpeechHypothesis=JSON.parse(e)}static fromJSON(e){return new oU(e)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}var aU={};t(aU,"SpeechServiceRecognizer",(()=>uU),(e=>uU=e));var sU=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class uU extends _B.ServiceRecognizerBase{constructor(e,t,n,r,i){if(super(e,t,n,r,i),this.privSpeechRecognizer=i,void 0!==r.autoDetectSourceLanguages){const e=r.autoDetectSourceLanguages.split(",");this.privSpeechContext.setSection("languageId",{languages:e,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),this.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}})}}processTypeSpecificMessages(e){return sU(this,void 0,void 0,(function*(){let t;const n=new fF;n.setProperty(GB.SpeechServiceResponse_JsonResult,e.textBody);let r=!1;switch(e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const i=oU.fromJSON(e.textBody),o=i.Offset+this.privRequestSession.currentTurnAudioOffset;t=new aF(this.privRequestSession.requestId,HB.RecognizingSpeech,i.Text,i.Duration,o,i.Language,i.LanguageDetectionConfidence,void 0,void 0,e.textBody,n),this.privRequestSession.onHypothesis(o);const a=new sF(t,i.Duration,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,a)}catch(e){}r=!0;break;case"speech.phrase":const s=lU.fromJSON(e.textBody),u=$F.implTranslateRecognitionResult(s.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+s.Offset+s.Duration),HB.Canceled===u){const e=$F.implTranslateCancelResult(s.RecognitionStatus);yield this.cancelRecognitionLocal(e,$F.implTranslateCancelErrorCode(s.RecognitionStatus),void 0)}else{if(!this.privRequestSession.isSpeechEnded||u!==HB.NoMatch||s.RecognitionStatus===nU.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(FU)===VB[VB.Simple])t=new aF(this.privRequestSession.requestId,u,s.DisplayText,s.Duration,s.Offset+this.privRequestSession.currentTurnAudioOffset,s.Language,s.LanguageDetectionConfidence,void 0,void 0,e.textBody,n);else{const r=cU.fromJSON(e.textBody);t=new aF(this.privRequestSession.requestId,u,r.RecognitionStatus===nU.Success?r.NBest[0].Display:void 0,r.Duration,r.Offset+this.privRequestSession.currentTurnAudioOffset,r.Language,r.LanguageDetectionConfidence,void 0,void 0,e.textBody,n)}const r=new sF(t,t.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,r)}catch(e){}}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}r=!0}return r}))}cancelRecognition(e,t,n,r,i){const o=new fF;if(o.setProperty(UU,bF[r]),this.privSpeechRecognizer.canceled){const t=new cF(n,i,r,void 0,e);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,t)}catch(e){}}if(this.privSuccessCallback){const e=new aF(t,HB.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,i,void 0,o);try{this.privSuccessCallback(e),this.privSuccessCallback=void 0}catch(e){}}}}_B.ServiceRecognizerBase;class cU{constructor(e){this.privDetailedSpeechPhrase=JSON.parse(e),this.privDetailedSpeechPhrase.RecognitionStatus=nU[this.privDetailedSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new cU(e)}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}}class lU{constructor(e){this.privSimpleSpeechPhrase=JSON.parse(e),this.privSimpleSpeechPhrase.RecognitionStatus=nU[this.privSimpleSpeechPhrase.RecognitionStatus]}static fromJSON(e){return new lU(e)}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}}_B.ServiceRecognizerBase;var hU,fU,dU={};t(dU,"RequestSession",(()=>SU),(e=>SU=e));class pU extends uj{constructor(e,t,n,r=tj.Info){super(e,r),this.privRequestId=t,this.privSessionId=n}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}class mU extends pU{constructor(e,t,n,r){super("RecognitionTriggeredEvent",e,t),this.privAudioSourceId=n,this.privAudioNodeId=r}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}class vU extends pU{constructor(e,t,n,r){super("ListeningStartedEvent",e,t),this.privAudioSourceId=n,this.privAudioNodeId=r}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}class gU extends pU{constructor(e,t,n){super("ConnectingToServiceEvent",e,n),this.privAuthFetchEventid=t}get authFetchEventid(){return this.privAuthFetchEventid}}class yU extends pU{constructor(e,t,n,r,i){super("RecognitionStartedEvent",e,i),this.privAudioSourceId=t,this.privAudioNodeId=n,this.privAuthFetchEventId=r}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}(fU=hU||(hU={}))[fU.Success=0]="Success",fU[fU.AudioSourceError=1]="AudioSourceError",fU[fU.AudioSourceTimeout=2]="AudioSourceTimeout",fU[fU.AuthTokenFetchError=3]="AuthTokenFetchError",fU[fU.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",fU[fU.UnAuthorized=5]="UnAuthorized",fU[fU.ConnectTimeout=6]="ConnectTimeout",fU[fU.ConnectError=7]="ConnectError",fU[fU.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",fU[fU.UnknownError=9]="UnknownError";class bU{constructor(e,t,n){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.onEvent=e=>{this.privIsDisposed||(e instanceof mU&&e.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof mj&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof vj&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=e.eventTime),e instanceof dj&&e.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof yj&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:this.privMicStartTime})),e instanceof gj&&e.audioSourceId===this.privAudioSourceId&&e.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:e.eventTime,Name:"Microphone",Start:this.privMicStartTime})),e instanceof gU&&e.requestId===this.privRequestId&&(this.privConnectionId=e.sessionId),e instanceof _j&&e.connectionId===this.privConnectionId&&(this.privConnectionStartTime=e.eventTime),e instanceof kj&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof Mj&&e.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:e.eventTime,Error:this.getConnectionError(e.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),e instanceof Tj&&e.connectionId===this.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path&&(this.privReceivedMessages[e.message.headers.path]||(this.privReceivedMessages[e.message.headers.path]=new Array),this.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)))},this.getTelemetry=()=>{const e=new Array;this.privListeningTriggerMetric&&e.push(this.privListeningTriggerMetric),this.privMicMetric&&e.push(this.privMicMetric),this.privConnectionEstablishMetric&&e.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const t={Metrics:e,ReceivedMessages:this.privReceivedMessages},n=JSON.stringify(t);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],n},this.dispose=()=>{this.privIsDisposed=!0},this.getConnectionError=e=>{switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}},this.privRequestId=e,this.privAudioSourceId=t,this.privAudioNodeId=n,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)}hypothesisReceived(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)}get hasTelemetry(){return 0!==Object.keys(this.privReceivedMessages).length||null!==this.privListeningTriggerMetric||null!==this.privMicMetric||null!==this.privConnectionEstablishMetric||0!==this.privPhraseLatencies.length||0!==this.privHypothesisLatencies.length}}var wU,_U,kU=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class SU{constructor(e){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.onPreConnectionStart=(e,t)=>{this.privAuthFetchEventId=e,this.privSessionId=t,this.onEvent(new gU(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))},this.onServiceTurnStartResponse=()=>{this.privTurnDeferral&&this.privInTurn&&this.privTurnDeferral.reject("Another turn started before current completed."),this.privInTurn=!0,this.privTurnDeferral=new Nj},this.getTelemetry=()=>this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null,this.onEvent=e=>{this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(e),Dj.instance.onEvent(e)},this.privAudioSourceId=e,this.privRequestId=ej(),this.privAudioNodeId=ej(),this.privTurnDeferral=new Nj,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get bytesSent(){return this.privBytesSent}listenForServiceTelemetry(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRequestId=ej(),this.privRecogNumber++,this.privServiceTelemetryListener=new bU(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new mU(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onAudioSourceAttachCompleted(e,t,n){return kU(this,void 0,void 0,(function*(){this.privAudioNode=e,this.privIsAudioNodeDetached=!1,t?yield this.onComplete():this.onEvent(new vU(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}))}onAuthCompleted(e,t){return kU(this,void 0,void 0,(function*(){e&&(yield this.onComplete())}))}onConnectionEstablishCompleted(e,t){return kU(this,void 0,void 0,(function*(){if(200===e)return this.onEvent(new yU(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,void(this.privBytesSent=0);403===e&&(yield this.onComplete())}))}onServiceTurnEndResponse(e){return kU(this,void 0,void 0,(function*(){this.privTurnDeferral.resolve(),!e||this.isSpeechEnded?(yield this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privRequestId=ej(),this.privAudioNode.replay())}))}onHypothesis(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))}onPhraseRecognized(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)}onServiceRecognized(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e)}onAudioSent(e){this.privBytesSent+=e}dispose(e){return kU(this,void 0,void 0,(function*(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const e of this.privDetachables)yield e.detach();this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}))}onStopRecognizing(){return kU(this,void 0,void 0,(function*(){yield this.onComplete()}))}onSpeechEnded(){this.privIsSpeechEnded=!0}onComplete(){return kU(this,void 0,void 0,(function*(){this.privIsRecognizing&&(this.privIsRecognizing=!1,yield this.detachAudioNode())}))}detachAudioNode(){return kU(this,void 0,void 0,(function*(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&(yield this.privAudioNode.detach()))}))}}class EU{constructor(e){this.privContext={},this.privDynamicGrammar=e}setSection(e,t){this.privContext[e]=t}setPronunciationAssessmentParams(e){void 0===this.privContext.phraseDetection&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),-1===this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")&&this.privContext.phraseOutput.detailed.options.push("WordTimings")}toJSON(){const e=this.privDynamicGrammar.generateGrammarObject();this.setSection("dgi",e);return JSON.stringify(this.privContext)}}class MU{addPhrase(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(void 0===this.privGrammars&&void 0===this.privPhrases)return;const e={};if(e.ReferenceGrammars=this.privGrammars,void 0!==this.privPhrases&&0!==this.privPhrases.length){const t=[];this.privPhrases.forEach(((e,n,r)=>{t.push({Text:e})})),e.Groups=[{Type:"Generic",Items:t}]}return e}}(_U=wU||(wU={}))[_U.None=0]="None",_U[_U.TextToSpeechAudio=1]="TextToSpeechAudio";_B.ServiceRecognizerBase;class TU{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(e){this.iPrivConfig=e}}class CU{constructor(e){this.privSynthesisAudioMetadata=JSON.parse(e)}static fromJSON(e){return new CU(e)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}var IU={};t(IU,"SynthesisTurn",(()=>jU),(e=>jU=e));var xU={};t(xU,"SynthesisAdapterBase",(()=>PU),(e=>PU=e));var AU=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class PU{constructor(e,t,n,r,i){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.sendSynthesisContext=e=>{const t=this.synthesisContext.toJSON();if(t)return e.send(new DF(rj.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",t))},this.sendSpeechServiceConfig=(e,t)=>{if(t)return e.send(new DF(rj.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",t))},this.sendSsmlMessage=(e,t,n)=>e.send(new DF(rj.Text,"ssml",n,"application/ssml+xml",t)),!e)throw new Ij("authentication");if(!t)throw new Ij("connectionFactory");if(!n)throw new Ij("synthesizerConfig");this.privAuthentication=e,this.privConnectionFactory=t,this.privSynthesizerConfig=n,this.privIsDisposed=!1,this.privSpeechSynthesizer=r,this.privSessionAudioDestination=i,this.privSynthesisTurn=new IU.SynthesisTurn,this.privConnectionEvents=new Rj,this.privServiceEvents=new Rj,this.privSynthesisContext=new BU(this.privSpeechSynthesizer),this.privAgentConfig=new TU,this.connectionEvents.attach((e=>{if("ConnectionClosedEvent"===e.name){const t=e;1e3!==t.statusCode&&this.cancelSynthesisLocal(qB.Error,1007===t.statusCode?bF.BadRequestParameters:bF.ConnectionFailure,t.reason+" websocket error code: "+t.statusCode)}}))}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(e){this.privActivityTemplate=e}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=e),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=e)}static addHeader(e,t){if(!t.hasHeader)return e;t.updateHeader(e.byteLength);const n=new Uint8Array(e.byteLength+t.header.byteLength);return n.set(new Uint8Array(t.header),0),n.set(new Uint8Array(e),t.header.byteLength),n.buffer}isDisposed(){return this.privIsDisposed}dispose(e){return AU(this,void 0,void 0,(function*(){if(this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise){const t=yield this.privConnectionConfigurationPromise;yield t.dispose(e)}}))}connect(){return AU(this,void 0,void 0,(function*(){yield this.connectImpl()}))}sendNetworkMessage(e,t){return AU(this,void 0,void 0,(function*(){const n="string"==typeof t?rj.Text:rj.Binary,r="string"==typeof t?"application/json":"";return(yield this.fetchConnection()).send(new DF(n,e,this.privSynthesisTurn.requestId,r,t))}))}Speak(e,t,n,r,i,o){return AU(this,void 0,void 0,(function*(){let a;if(a=t?e:this.privSpeechSynthesizer.buildSsml(e),void 0!==this.speakOverride)return this.speakOverride(a,n,r,i);this.privSuccessCallback=r,this.privErrorCallback=i,this.privSynthesisTurn.startNewSynthesis(n,e,t,o);try{yield this.connectImpl();const e=yield this.fetchConnection();yield this.sendSynthesisContext(e),yield this.sendSsmlMessage(e,a,n);const t=new IF(new CF(n,HB.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,t);this.receiveMessage()}catch(e){return this.cancelSynthesisLocal(qB.Error,bF.ConnectionFailure,e),Promise.reject(e)}}))}cancelSynthesis(e,t,n,r){const i=new fF;i.setProperty(UU,bF[n]);const o=new CF(e,HB.Canceled,void 0,r,i);if(this.privSpeechSynthesizer.SynthesisCanceled){const e=new IF(o);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,e)}catch(e){}}if(this.privSuccessCallback)try{this.privSuccessCallback(o)}catch(e){}}cancelSynthesisLocal(e,t,n){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,t,n))}processTypeSpecificMessages(e,t,n){return!0}receiveMessage(){return AU(this,void 0,void 0,(function*(){try{const e=yield this.fetchConnection(),t=yield e.read();if(void 0!==this.receiveMessageOverride)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!t)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;this.privServiceHasSentMessage=!0;const n=DF.fromConnectionMessage(t);if(n.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(n.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse();break;case"response":this.privSynthesisTurn.onServiceResponseMessage(n.textBody);break;case"audio":if(this.privSynthesisTurn.streamId.toLowerCase()===n.streamId.toLowerCase()&&n.binaryBody){if(this.privSynthesisTurn.onAudioChunkReceived(n.binaryBody),this.privSpeechSynthesizer.synthesizing)try{const e=PU.addHeader(n.binaryBody,this.privSynthesisTurn.audioOutputFormat),t=new IF(new CF(this.privSynthesisTurn.requestId,HB.SynthesizingAudio,e));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,t)}catch(e){}void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(n.binaryBody)}break;case"audio.metadata":const e=CU.fromJSON(n.textBody).Metadata;for(const t of e)if(t.Type.toLowerCase()==="WordBoundary".toLowerCase()){this.privSynthesisTurn.onWordBoundaryEvent(t.Data.text.Text);const e=new xF(t.Data.Offset,t.Data.text.Text,t.Data.text.Length,this.privSynthesisTurn.currentTextOffset);if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,e)}catch(e){}}break;case"turn.end":let t;this.privSynthesisTurn.onServiceTurnEndResponse();try{const e=yield this.privSynthesisTurn.getAllReceivedAudioWithHeader();t=new CF(this.privSynthesisTurn.requestId,HB.SynthesizingAudioCompleted,e),this.privSuccessCallback&&this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new IF(t))}catch(e){}break;default:this.processTypeSpecificMessages(n)||this.privServiceEvents&&this.serviceEvents.onEvent(new bj(n.path.toLowerCase(),n.textBody))}return this.receiveMessage()}catch(e){}}))}connectImpl(e=!1){if(this.privConnectionPromise)return this.privConnectionPromise.then((e=>e.state()===ij.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise),(e=>(this.privConnectionId=null,this.privConnectionPromise=null,this.privServiceHasSentMessage=!1,this.connectImpl())));this.privAuthFetchEventId=ej(),this.privConnectionId=ej(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);const t=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=t.then((t=>AU(this,void 0,void 0,(function*(){yield this.privSynthesisTurn.onAuthCompleted(!1);const n=this.privConnectionFactory.create(this.privSynthesizerConfig,t,this.privConnectionId);n.events.attach((e=>{this.connectionEvents.onEvent(e)}));const r=yield n.open();return 200===r.statusCode?(yield this.privSynthesisTurn.onConnectionEstablishCompleted(r.statusCode),Promise.resolve(n)):403!==r.statusCode||e?(yield this.privSynthesisTurn.onConnectionEstablishCompleted(r.statusCode,r.reason),Promise.reject(`Unable to contact server. StatusCode: ${r.statusCode}, ${this.privSynthesizerConfig.parameters.getProperty(GB.SpeechServiceConnection_Endpoint)} Reason: ${r.reason}`)):this.connectImpl(!0)}))),(e=>AU(this,void 0,void 0,(function*(){throw yield this.privSynthesisTurn.onAuthCompleted(!0,e),new Error(e)})))),this.privConnectionPromise.catch((()=>{})),this.privConnectionPromise}fetchConnection(){return AU(this,void 0,void 0,(function*(){return this.privConnectionConfigurationPromise?this.privConnectionConfigurationPromise.then((e=>e.state()===ij.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=null,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise),(e=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=null,this.privServiceHasSentMessage=!1,this.fetchConnection()))):(this.privConnectionConfigurationPromise=this.configureConnection(),yield this.privConnectionConfigurationPromise)}))}configureConnection(){return AU(this,void 0,void 0,(function*(){const e=yield this.connectImpl();return void 0!==this.configConnectionOverride?this.configConnectionOverride(e):(yield this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),e)}))}}PU.telemetryDataEnabled=!0;class OU extends uj{constructor(e,t,n=tj.Info){super(e,n),this.privRequestId=t}get requestId(){return this.privRequestId}}class RU extends OU{constructor(e,t,n){super("SynthesisTriggeredEvent",e),this.privSessionAudioDestinationId=t,this.privTurnAudioDestinationId=n}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}class DU extends OU{constructor(e,t){super("ConnectingToSynthesisServiceEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}class NU extends OU{constructor(e,t){super("SynthesisStartedEvent",e),this.privAuthFetchEventId=t}get authFetchEventId(){return this.privAuthFetchEventId}}var LU=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class jU{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.onPreConnectionStart=(e,t)=>{this.privAuthFetchEventId=e,this.onEvent(new DU(this.privRequestId,this.privAuthFetchEventId))},this.onAuthCompleted=(e,t)=>{e&&this.onComplete()},this.onConnectionEstablishCompleted=(e,t)=>{if(200===e)return this.onEvent(new NU(this.requestId,this.privAuthFetchEventId)),void(this.privBytesReceived=0);403===e&&this.onComplete()},this.onServiceResponseMessage=e=>{const t=JSON.parse(e);this.streamId=t.audio.streamId},this.onServiceTurnEndResponse=()=>{this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()},this.onServiceTurnStartResponse=()=>{this.privTurnDeferral&&this.privInTurn&&this.privTurnDeferral.reject("Another turn started before current completed."),this.privInTurn=!0,this.privTurnDeferral=new Nj},this.dispose=e=>{this.privIsDisposed||(this.privIsDisposed=!0)},this.onEvent=e=>{Dj.instance.onEvent(e)},this.onComplete=()=>{this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,void 0!==this.privTurnAudioDestination&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))},this.privRequestId=ej(),this.privTurnDeferral=new Nj,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(e){this.privStreamId=e}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(e){this.privAudioOutputFormat=e}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get bytesReceived(){return this.privBytesReceived}getAllReceivedAudio(){return LU(this,void 0,void 0,(function*(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(yield this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}))}getAllReceivedAudioWithHeader(){return LU(this,void 0,void 0,(function*(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const e=yield this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=xU.SynthesisAdapterBase.addHeader(e,this.audioOutputFormat),this.privReceivedAudioWithHeader}return this.getAllReceivedAudio()}))}startNewSynthesis(e,t,n,r){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=t,this.privIsSSML=n,this.privAudioOutputStream=new FB.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,void 0!==r&&(this.privTurnAudioDestination=r,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new RU(this.requestId,void 0,void 0===r?void 0:r.id()))}onAudioChunkReceived(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(e))}onWordBoundaryEvent(e){this.updateTextOffset(e)}onStopSynthesizing(){this.onComplete()}updateTextOffset(e){this.privTextOffset>=0&&(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length),this.privIsSSML&&this.privRawText.indexOf("<",this.privTextOffset+1)>this.privRawText.indexOf(">",this.privTextOffset+1)&&this.updateTextOffset(e))}readAllAudioFromStream(){return LU(this,void 0,void 0,(function*(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{yield this.privAudioOutputStream.read(this.privReceivedAudio)}catch(e){this.privReceivedAudio=new ArrayBuffer(0)}}}))}}class BU{constructor(e){this.privContext={},this.privSpeechSynthesizer=e}setSection(e,t){this.privContext[e]=t}set audioOutputFormat(e){this.privAudioOutputFormat=e}toJSON(){const e=this.buildSynthesisContext();return this.setSection("synthesis",e),JSON.stringify(this.privContext)}buildSynthesisContext(){return{audio:{metadataOptions:{sentenceBoundaryEnabled:!1,wordBoundaryEnabled:!!this.privSpeechSynthesizer.wordBoundary},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:this.privSpeechSynthesizer.autoDetectSourceLanguage}}}}const FU="OutputFormat",UU="CancellationErrorCode",qU="ServiceProperties",zU="ForceDictation";var VU=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class WU{constructor(e,t,n,r){this.privRecorder=e,this.deviceId=t,this.privStreams={},this.turnOn=()=>{if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new Nj;try{this.createAudioContext()}catch(e){if(e instanceof Error){const t=e;this.privInitializeDeferral.reject(t.name+": "+t.message)}else this.privInitializeDeferral.reject(e);return this.privInitializeDeferral.promise}const e=window.navigator;let t=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia;if(e.mediaDevices&&(t=(t,n,r)=>{e.mediaDevices.getUserMedia(t).then(n).catch(r)}),t){const e=()=>{this.onEvent(new lj(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new hj(this.privId)),this.privInitializeDeferral.resolve()):t({audio:!this.deviceId||{deviceId:this.deviceId},video:!1},(e=>{this.privMediaStream=e,this.onEvent(new hj(this.privId)),this.privInitializeDeferral.resolve()}),(e=>{const t=`Error occurred during microphone initialization: ${e}`;this.privInitializeDeferral.reject(t),this.onEvent(new dj(this.privId,t))}))};"suspended"===this.privContext.state?this.privContext.resume().then(e).catch((e=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${e}`)})):e()}else{const e="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(e),this.onEvent(new dj(e,""))}return this.privInitializeDeferral.promise},this.id=()=>this.privId,this.attach=e=>(this.onEvent(new mj(this.privId,e)),this.listen(e).then((t=>(this.onEvent(new vj(this.privId,e)),{detach:()=>VU(this,void 0,void 0,(function*(){return t.readEnded(),delete this.privStreams[e],this.onEvent(new gj(this.privId,e)),this.turnOff()})),id:()=>e,read:()=>t.read()})))),this.detach=e=>{e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new gj(this.privId,e)))},this.listen=e=>VU(this,void 0,void 0,(function*(){yield this.turnOn();const t=new Jj(this.privOutputChunkSize,e);this.privStreams[e]=t;try{this.privRecorder.record(this.privContext,this.privMediaStream,t)}catch(t){throw this.onEvent(new yj(this.privId,e,t)),t}return t})),this.onEvent=e=>{this.privEvents.onEvent(e),Dj.instance.onEvent(e)},this.createAudioContext=()=>{this.privContext||(this.privContext=CB.getAudioContext(WU.AUDIOFORMAT.samplesPerSec))},this.privOutputChunkSize=WU.AUDIOFORMAT.avgBytesPerSec/10,this.privId=n||ej(),this.privEvents=new Rj,this.privMediaStream=r||null}get format(){return Promise.resolve(WU.AUDIOFORMAT)}get blob(){return Promise.reject("Not implemented for Mic input")}turnOff(){return VU(this,void 0,void 0,(function*(){for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&t.close()}this.onEvent(new fj(this.privId)),this.privInitializeDeferral=null,yield this.destroyAudioContext()}))}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then((e=>({bitspersample:WU.AUDIOFORMAT.bitsPerSample,channelcount:WU.AUDIOFORMAT.channels,connectivity:FF.Unknown,manufacturer:"Speech SDK",model:e,samplerate:WU.AUDIOFORMAT.samplesPerSec,type:qF.Microphones})))}setProperty(e,t){if("MICROPHONE-WorkletSourceUrl"!==e)throw new Error("Property '"+e+"' is not supported on Microphone.");this.privRecorder.setWorkletUrl(t)}getMicrophoneLabel(){const e="microphone";if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve(e);this.privMicrophoneLabel=e;const t=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(void 0===t)return Promise.resolve(this.privMicrophoneLabel);const n=new Nj;return navigator.mediaDevices.enumerateDevices().then((e=>{for(const n of e)if(n.deviceId===t){this.privMicrophoneLabel=n.label;break}n.resolve(this.privMicrophoneLabel)}),(()=>n.resolve(this.privMicrophoneLabel))),n.promise}destroyAudioContext(){return VU(this,void 0,void 0,(function*(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let e=!1;"close"in this.privContext&&(e=!0),e?(yield this.privContext.close(),this.privContext=null):null!==this.privContext&&"running"===this.privContext.state&&(yield this.privContext.suspend())}))}}WU.AUDIOFORMAT=TB.getDefaultInputFormat();var HU={};t(HU,"FileAudioSource",(()=>GU),(e=>GU=e));var KU=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class GU{constructor(e,t){this.privStreams={},this.privHeaderEnd=44,this.turnOn=()=>{if("undefined"==typeof FileReader){const e="Browser does not support FileReader.";return this.onEvent(new dj(e,"")),Promise.reject(e)}if(this.privFile.name.lastIndexOf(".wav")!==this.privFile.name.length-4){const e=this.privFile.name+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new dj(e,"")),Promise.reject(e)}this.onEvent(new lj(this.privId)),this.onEvent(new hj(this.privId))},this.id=()=>this.privId,this.attach=e=>KU(this,void 0,void 0,(function*(){this.onEvent(new mj(this.privId,e));const t=yield this.upload(e);return this.onEvent(new vj(this.privId,e)),Promise.resolve({detach:()=>KU(this,void 0,void 0,(function*(){t.readEnded(),delete this.privStreams[e],this.onEvent(new gj(this.privId,e)),yield this.turnOff()})),id:()=>e,read:()=>t.read()})})),this.detach=e=>{e&&this.privStreams[e]&&(this.privStreams[e].close(),delete this.privStreams[e],this.onEvent(new gj(this.privId,e)))},this.turnOff=()=>{for(const e in this.privStreams)if(e){const t=this.privStreams[e];t&&!t.isClosed&&t.close()}return this.onEvent(new fj(this.privId)),Promise.resolve()},this.onEvent=e=>{this.privEvents.onEvent(e),Dj.instance.onEvent(e)},this.privId=t||ej(),this.privEvents=new Rj,this.privFile=e,this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}get blob(){return Promise.resolve(this.privFile)}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then((e=>Promise.resolve({bitspersample:e.bitsPerSample,channelcount:e.channels,connectivity:FF.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:e.samplesPerSec,type:qF.File})))}readHeader(){const e=this.privFile.slice(0,128),t=new FileReader,n=new Nj;return t.onload=e=>{const t=e.target.result,r=new DataView(t),i=e=>String.fromCharCode(r.getUint8(e),r.getUint8(e+1),r.getUint8(e+2),r.getUint8(e+3));"RIFF"!==i(0)&&n.reject("Invalid WAV header in file, RIFF was not found"),"WAVE"===i(8)&&"fmt "===i(12)||n.reject("Invalid WAV header in file, WAVEfmt was not found");const o=r.getInt32(16,!0),a=r.getUint16(22,!0),s=r.getUint32(24,!0),u=r.getUint16(34,!0);let c=36+Math.max(o-16,0);for(;"data"!==i(c);c+=2)c>120&&n.reject("Invalid WAV header in file, data block was not found");this.privHeaderEnd=c+8,n.resolve(TB.getWaveFormatPCM(s,u,a))},t.readAsArrayBuffer(e),n.promise}upload(e){return KU(this,void 0,void 0,(function*(){yield this.turnOn();const t=yield this.privAudioFormatPromise,n=new FileReader,r=new Jj(t.avgBytesPerSec/10,e);this.privStreams[e]=r;n.onload=e=>{r.isClosed||(r.writeStreamChunk({buffer:n.result,isEnd:!1,timeReceived:Date.now()}),r.close())},n.onerror=t=>{const n=`Error occurred while processing '${this.privFile.name}'. ${t}`;throw this.onEvent(new yj(this.privId,e,n)),new Error(n)};const i=this.privFile.slice(this.privHeaderEnd);return n.readAsArrayBuffer(i),r}))}}class YU{constructor(){this.record=(e,t,n)=>{const r=(()=>{let t=0;try{return e.createScriptProcessor(t,1,1)}catch(n){t=2048;let r=e.sampleRate;for(;t<16384&&r>=32e3;)t<<=1,r>>=1;return e.createScriptProcessor(t,1,1)}})(),i=new Wj(e.sampleRate,16e3);let o=!0;r.onaudioprocess=e=>{const t=e.inputBuffer.getChannelData(0);if(n&&!n.isClosed){const e=i.encode(t);e&&(n.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),o=!1)}};const a=e.createMediaStreamSource(t);this.privSpeechProcessorScript&&e.audioWorklet?e.audioWorklet.addModule(this.privSpeechProcessorScript).then((()=>{const r=new AudioWorkletNode(e,"speech-processor");r.port.onmessage=e=>{const t=e.data;if(n&&!n.isClosed){const e=i.encode(t);e&&(n.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),o=!1)}},a.connect(r),r.connect(e.destination),this.privMediaResources={scriptProcessorNode:r,source:a,stream:t}})).catch((()=>{a.connect(r),r.connect(e.destination),this.privMediaResources={scriptProcessorNode:r,source:a,stream:t}})):(a.connect(r),r.connect(e.destination),this.privMediaResources={scriptProcessorNode:r,source:a,stream:t})},this.releaseMediaResources=e=>{this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(e.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privMediaResources.stream.getTracks().forEach((e=>e.stop())),this.privMediaResources.source=null))}}setWorkletUrl(e){this.privSpeechProcessorScript=e}}var QU={};t(QU,"WebsocketConnection",(()=>Iq),(e=>Iq=e));var JU={};t(JU,"WebsocketMessageAdapter",(()=>Tq),(e=>Tq=e));SB=o("3V6Bo");var ZU={};t(ZU,"CertCheckAgent",(()=>Eq),(e=>Eq=e));var XU;SB=o("3V6Bo");o.register("45qO2",(function(e,t){!function(r){var i="object"==typeof t&&t&&!t.nodeType&&t,o=e&&!e.nodeType&&e,a="object"==typeof n&&n;a.global!==a&&a.window!==a&&a.self!==a||(r=a);var s,u,c=2147483647,l=36,h=/^xn--/,f=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,v=String.fromCharCode;function g(e){throw new RangeError(p[e])}function y(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function b(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+y((e=e.replace(d,".")).split("."),t).join(".")}function w(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function _(e){return y(e,(function(e){var t="";return e>65535&&(t+=v((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=v(e)})).join("")}function k(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function S(e,t,n){var r=0;for(e=n?m(e/700):e>>1,e+=m(e/t);e>455;r+=l)e=m(e/35);return m(r+36*e/(e+38))}function E(e){var t,n,r,i,o,a,s,u,h,f,d,p=[],v=e.length,y=0,b=128,w=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&g("not-basic"),p.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<v;){for(o=y,a=1,s=l;i>=v&&g("invalid-input"),((u=(d=e.charCodeAt(i++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:l)>=l||u>m((c-y)/a))&&g("overflow"),y+=u*a,!(u<(h=s<=w?1:s>=w+26?26:s-w));s+=l)a>m(c/(f=l-h))&&g("overflow"),a*=f;w=S(y-o,t=p.length+1,0==o),m(y/t)>c-b&&g("overflow"),b+=m(y/t),y%=t,p.splice(y++,0,b)}return _(p)}function M(e){var t,n,r,i,o,a,s,u,h,f,d,p,y,b,_,E=[];for(p=(e=w(e)).length,t=128,n=0,o=72,a=0;a<p;++a)(d=e[a])<128&&E.push(v(d));for(r=i=E.length,i&&E.push("-");r<p;){for(s=c,a=0;a<p;++a)(d=e[a])>=t&&d<s&&(s=d);for(s-t>m((c-n)/(y=r+1))&&g("overflow"),n+=(s-t)*y,t=s,a=0;a<p;++a)if((d=e[a])<t&&++n>c&&g("overflow"),d==t){for(u=n,h=l;!(u<(f=h<=o?1:h>=o+26?26:h-o));h+=l)_=u-f,b=l-f,E.push(v(k(f+_%b,0))),u=m(_/b);E.push(v(k(u,0))),o=S(n,y,r==i),n=0,++r}++n,++t}return E.join("")}if(s={version:"1.4.1",ucs2:{decode:w,encode:_},decode:E,encode:M,toASCII:function(e){return b(e,(function(e){return f.test(e)?"xn--"+M(e):e}))},toUnicode:function(e){return b(e,(function(e){return h.test(e)?E(e.slice(4).toLowerCase()):e}))}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",(function(){return s}));else if(i&&o)if(e.exports==i)o.exports=s;else for(u in s)s.hasOwnProperty(u)&&(i[u]=s[u]);else r.punycode=s}(this)}));var $U,eq=o("45qO2");function tq(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}$U={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}},XU=_q;var nq,rq,iq,oq,aq,sq,uq,cq=/^([a-z0-9.+-]+:)/i,lq=/:[0-9]*$/,hq=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,fq=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),dq=["'"].concat(fq),pq=["%","/","?",";","#"].concat(dq),mq=["/","?","#"],vq=/^[+a-z0-9A-Z_-]{0,63}$/,gq=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,yq={javascript:!0,"javascript:":!0},bq={javascript:!0,"javascript:":!0},wq={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function _q(e,t,n){if(e&&$U.isObject(e)&&e instanceof tq)return e;var r=new tq;return r.parse(e,t,n),r}o.register("60vxR",(function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,i,o){t=t||"&",i=i||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var h,f,d,p,m=e[l].replace(s,"%20"),v=m.indexOf(i);v>=0?(h=m.substr(0,v),f=m.substr(v+1)):(h=m,f=""),d=decodeURIComponent(h),p=decodeURIComponent(f),n(a,d)?r(a[d])?a[d].push(p):a[d]=[a[d],p]:a[d]=p}return a};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}})),rq=o("60vxR"),o.register("2q1kZ",(function(e,t){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,a,s){return t=t||"&",a=a||"=",null===e&&(e=void 0),"object"==typeof e?i(o(e),(function(o){var s=encodeURIComponent(n(o))+a;return r(e[o])?i(e[o],(function(e){return s+encodeURIComponent(n(e))})).join(t):s+encodeURIComponent(n(e[o]))})).join(t):s?encodeURIComponent(n(s))+a+encodeURIComponent(n(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}})),nq=o("2q1kZ"),tq.prototype.parse=function(e,t,n){if(!$U.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(i);o[0]=o[0].replace(/\\/g,"/");var a=e=o.join(i);if(a=a.trim(),!n&&1===e.split("#").length){var s=hq.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=t?rq(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var u=cq.exec(a);if(u){var c=(u=u[0]).toLowerCase();this.protocol=c,a=a.substr(u.length)}if(n||u||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===a.substr(0,2);!l||u&&bq[u]||(a=a.substr(2),this.slashes=!0)}if(!bq[u]&&(l||u&&!wq[u])){for(var h,f,d=-1,p=0;p<mq.length;p++){-1!==(m=a.indexOf(mq[p]))&&(-1===d||m<d)&&(d=m)}-1!==(f=-1===d?a.lastIndexOf("@"):a.lastIndexOf("@",d))&&(h=a.slice(0,f),a=a.slice(f+1),this.auth=decodeURIComponent(h)),d=-1;for(p=0;p<pq.length;p++){var m;-1!==(m=a.indexOf(pq[p]))&&(-1===d||m<d)&&(d=m)}-1===d&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var g=this.hostname.split(/\./),y=(p=0,g.length);p<y;p++){var b=g[p];if(b&&!b.match(vq)){for(var w="",_=0,k=b.length;_<k;_++)b.charCodeAt(_)>127?w+="x":w+=b[_];if(!w.match(vq)){var S=g.slice(0,p),E=g.slice(p+1),M=b.match(gq);M&&(S.push(M[1]),E.unshift(M[2])),E.length&&(a="/"+E.join(".")+a),this.hostname=S.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=eq.toASCII(this.hostname));var T=this.port?":"+this.port:"",C=this.hostname||"";this.host=C+T,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!yq[c])for(p=0,y=dq.length;p<y;p++){var I=dq[p];if(-1!==a.indexOf(I)){var x=encodeURIComponent(I);x===I&&(x=escape(I)),a=a.split(I).join(x)}}var A=a.indexOf("#");-1!==A&&(this.hash=a.substr(A),a=a.slice(0,A));var P=a.indexOf("?");if(-1!==P?(this.search=a.substr(P),this.query=a.substr(P+1),t&&(this.query=rq(this.query)),a=a.slice(0,P)):t&&(this.search="",this.query={}),a&&(this.pathname=a),wq[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){T=this.pathname||"";var O=this.search||"";this.path=T+O}return this.href=this.format(),this},tq.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&$U.isObject(this.query)&&Object.keys(this.query).length&&(o=nq(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||wq[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+i+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+r},tq.prototype.resolve=function(e){return this.resolveObject(_q(e,!1,!0)).format()},tq.prototype.resolveObject=function(e){if($U.isString(e)){var t=new tq;t.parse(e,!1,!0),e=t}for(var n=new tq,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),s=0;s<a.length;s++){var u=a[s];"protocol"!==u&&(n[u]=e[u])}return wq[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!wq[e.protocol]){for(var c=Object.keys(e),l=0;l<c.length;l++){var h=c[l];n[h]=e[h]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||bq[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var d=n.pathname||"",p=n.search||"";n.path=d+p}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),v=e.host||e.pathname&&"/"===e.pathname.charAt(0),g=v||m||n.host&&e.pathname,y=g,b=n.pathname&&n.pathname.split("/")||[],w=(f=e.pathname&&e.pathname.split("/")||[],n.protocol&&!wq[n.protocol]);if(w&&(n.hostname="",n.port=null,n.host&&(""===b[0]?b[0]=n.host:b.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),g=g&&(""===f[0]||""===b[0])),v)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,b=f;else if(f.length)b||(b=[]),b.pop(),b=b.concat(f),n.search=e.search,n.query=e.query;else if(!$U.isNullOrUndefined(e.search)){if(w)n.hostname=n.host=b.shift(),(M=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=M.shift(),n.host=n.hostname=M.shift());return n.search=e.search,n.query=e.query,$U.isNull(n.pathname)&&$U.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!b.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var _=b.slice(-1)[0],k=(n.host||e.host||b.length>1)&&("."===_||".."===_)||""===_,S=0,E=b.length;E>=0;E--)"."===(_=b[E])?b.splice(E,1):".."===_?(b.splice(E,1),S++):S&&(b.splice(E,1),S--);if(!g&&!y)for(;S--;)b.unshift("..");!g||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),k&&"/"!==b.join("/").substr(-1)&&b.push("");var M,T=""===b[0]||b[0]&&"/"===b[0].charAt(0);w&&(n.hostname=n.host=T?"":b.length?b.shift():"",(M=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=M.shift(),n.host=n.hostname=M.shift()));return(g=g||n.host&&b.length)&&!T&&b.unshift(""),b.length?n.pathname=b.join("/"):(n.pathname=null,n.path=null),$U.isNull(n.pathname)&&$U.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},tq.prototype.parseHost=function(){var e=this.host,t=lq.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},o.register("56PqM",(function(e,t){"use strict";function n(e){this.options=e||{},this.cache={},this.options.probe&&(this.probe=this.options.probe),this.options.store&&(this.store=this.options.store),this.options.filter&&(this.filter=this.options.filter)}e.exports=n,n.prototype.filter=function(e,t){t(null)},n.prototype.probe=function(e,t){this.cache.hasOwnProperty(e)?t(null,this.cache[e]):t(null,!1)},n.prototype.store=function(e,t,n,r){this.cache.hasOwnProperty(e)&&clearTimeout(this.cache[e].timer);var i=this;this.cache[e]={response:t,timer:setTimeout((function(){delete i.cache[e]}),n)},r(null,null)},n.prototype.request=function(e,t,n){var r=this;function i(e,t){n&&n(e,t),n=null}function o(t,n){if(t)return i(t);i(null,n),r.getMaxStoreTime(n,(function(t,i){t||r.store(e,n,i,(function(){}))}))}this.filter(t.url,(function(e){if(e)return i(e,null);sq.getResponse(t.url,t.ocsp,o)}))},n.prototype.getMaxStoreTime=function(e,t){var n;try{n=sq.parseResponse(e).value}catch(e){return t(e)}if(0===n.tbsResponseData.responses.length)return t(new Error("No OCSP responses"));var r=n.tbsResponseData.responses;if(!r.every((function(e){return"good"===e.certStatus.type})))return t(new Error("Some OCSP responses are not good"));for(var i=0,o=0;o<r.length;o++){var a=(e=r[o]).nextUpdate;a&&((0===i||i>a)&&(i=a))}return t(null,Math.max(0,i-new Date))}})),o("56PqM"),o.register("5QJd4",(function(e,t){var n=R,r=o("2cK96"),i=o("76ImE"),a=o("2eqHZ"),s=o("3V6Bo");s=o("3V6Bo");function u(e){e||(e={}),a.Agent.call(this,e),this.caCache=new s({maxSize:e.CACacheSize||1024})}e.exports=u,r.inherits(u,a.Agent),u.prototype.createConnection=function(e,t,n){null!==e&&"object"==typeof e?(n=e,e=null):null!==t&&"object"==typeof t?(n=t,t=null):null!==n&&"object"==typeof n||(n={}),"number"==typeof e&&(n.port=e),"string"==typeof t&&(n.host=t);var i=r._extend({requestOCSP:!0},n),o=a.Agent.prototype.createConnection.call(this,e,t,i),s=this,u=null;return o.on("OCSPResponse",(function(e){u=e})),o.on("secure",(function(){return s.handleOCSPResponse(o,u,(function(e){if(e)return o.destroy(e);o.uncork()}))})),o.cork(),o},u.prototype.handleOCSPResponse=function(e,t,n){var r=e.ssl.getPeerCertificate(!0),i=r.issuerCertificate;r=r.raw;try{r=s.Certificate.decode(r,"der"),i&&(i=i.raw,i=s.Certificate.decode(i,"der"))}catch(e){return n(e)}function o(e,o){if(e)return n(e);if(i=o,!t)return uq({cert:r,issuer:i},n);var a=oq.generate(r,i);aq({request:a,response:t},n)}return i?o(null,i):this.fetchIssuer(r,t,o)},u.prototype.fetchIssuer=function(e,t,r){var o=sq["id-ad-caIssuers"].join("."),a=this;sq.getAuthorityInfo(e,o,(function(e,t){if(e)return r(e);var o=a.caCache.get(t);if(o)return r(null,o);var u=!1;function c(e,t){u||(u=!0,r(e,t))}i.get(t).on("error",c).on("response",(function(e){if(e.statusCode<200||e.statusCode>=400)return c(new Error("Failed to fetch CA: "+e.statusCode));var r=[];e.on("readable",(function(){var t=e.read();t&&r.push(t)})),e.on("end",(function(){var e=n.concat(r);try{e=s.Certificate.decode(e,"der")}catch(e){return c(e)}a.caCache.set(t,e),c(null,e)}))}))}))}})),o.register("76ImE",(function(e,t){var r=o("2R5rp"),i=o("40zun"),a=o("4dlYL"),s=o("4fb8q"),u=e.exports;u.request=function(e,t){e="string"==typeof e?XU(e):a(e);var i=-1===n.location.protocol.search(/^https?:$/)?"http:":"",o=e.protocol||i,s=e.hostname||e.host,u=e.port,c=e.path||"/";s&&-1!==s.indexOf(":")&&(s="["+s+"]"),e.url=(s?o+"//"+s:"")+(u?":"+u:"")+c,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var l=new r(e);return t&&l.on("response",t),l},u.get=function(e,t){var n=u.request(e,t);return n.end(),n},u.ClientRequest=r,u.IncomingMessage=i.IncomingMessage,u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.globalAgent=new u.Agent,u.STATUS_CODES=s,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]})),o.register("2R5rp",(function(e,t){var r=R,i=o("7lbf0"),a=o("2zgYS"),s=o("67rjf"),u=o("40zun"),c=o("4jMg6"),l=u.IncomingMessage,h=u.readyStates;var f=e.exports=function(e){var t,n=this;c.Writable.call(n),n._opts=e,n._body=[],n._headers={},e.auth&&n.setHeader("Authorization","Basic "+r.from(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){n.setHeader(t,e.headers[t])}));var i=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!a.abortController)i=!1,t=!0;else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!a.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}n._mode=function(e,t){return a.fetch&&t?"fetch":a.mozchunkedarraybuffer?"moz-chunked-arraybuffer":a.msstream?"ms-stream":a.arraybuffer&&e?"arraybuffer":"text"}(t,i),n._fetchTimer=null,n._socketTimeout=null,n._socketTimer=null,n.on("finish",(function(){n._onFinish()}))};s(f,c.Writable),f.prototype.setHeader=function(e,t){var n=e.toLowerCase();-1===d.indexOf(n)&&(this._headers[n]={name:e,value:t})},f.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},f.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},f.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts;"timeout"in t&&0!==t.timeout&&e.setTimeout(t.timeout);var r=e._headers,o=null;"GET"!==t.method&&"HEAD"!==t.method&&(o=new Blob(e._body,{type:(r["content-type"]||{}).value||""}));var s=[];if(Object.keys(r).forEach((function(e){var t=r[e].name,n=r[e].value;Array.isArray(n)?n.forEach((function(e){s.push([t,e])})):s.push([t,n])})),"fetch"===e._mode){var u=null;if(a.abortController){var c=new AbortController;u=c.signal,e._fetchAbortController=c,"requestTimeout"in t&&0!==t.requestTimeout&&(e._fetchTimer=n.setTimeout((function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()}),t.requestTimeout))}n.fetch(e._opts.url,{method:e._opts.method,headers:s,body:o||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin",signal:u}).then((function(t){e._fetchResponse=t,e._resetTimers(!1),e._connect()}),(function(t){e._resetTimers(!0),e._destroyed||e.emit("error",t)}))}else{var l=e._xhr=new n.XMLHttpRequest;try{l.open(e._opts.method,e._opts.url,!0)}catch(t){return void i.nextTick((function(){e.emit("error",t)}))}"responseType"in l&&(l.responseType=e._mode),"withCredentials"in l&&(l.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in l&&l.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in t&&(l.timeout=t.requestTimeout,l.ontimeout=function(){e.emit("requestTimeout")}),s.forEach((function(e){l.setRequestHeader(e[0],e[1])})),e._response=null,l.onreadystatechange=function(){switch(l.readyState){case h.LOADING:case h.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(l.onprogress=function(){e._onXHRProgress()}),l.onerror=function(){e._destroyed||(e._resetTimers(!0),e.emit("error",new Error("XHR error")))};try{l.send(o)}catch(t){return void i.nextTick((function(){e.emit("error",t)}))}}}},f.prototype._onXHRProgress=function(){var e=this;e._resetTimers(!1),function(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}}(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress(e._resetTimers.bind(e)))},f.prototype._connect=function(){var e=this;e._destroyed||(e._response=new l(e._xhr,e._fetchResponse,e._mode,e._resetTimers.bind(e)),e._response.on("error",(function(t){e.emit("error",t)})),e.emit("response",e._response))},f.prototype._write=function(e,t,n){this._body.push(e),n()},f.prototype._resetTimers=function(e){var t=this;n.clearTimeout(t._socketTimer),t._socketTimer=null,e?(n.clearTimeout(t._fetchTimer),t._fetchTimer=null):t._socketTimeout&&(t._socketTimer=n.setTimeout((function(){t.emit("timeout")}),t._socketTimeout))},f.prototype.abort=f.prototype.destroy=function(e){var t=this;t._destroyed=!0,t._resetTimers(!0),t._response&&(t._response._destroyed=!0),t._xhr?t._xhr.abort():t._fetchAbortController&&t._fetchAbortController.abort(),e&&t.emit("error",e)},f.prototype.end=function(e,t,n){"function"==typeof e&&(n=e,e=void 0),c.Writable.prototype.end.call(this,e,t,n)},f.prototype.setTimeout=function(e,t){var n=this;t&&n.once("timeout",t),n._socketTimeout=e,n._resetTimers(!1)},f.prototype.flushHeaders=function(){},f.prototype.setNoDelay=function(){},f.prototype.setSocketKeepAlive=function(){};var d=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]})),o.register("2zgYS",(function(e,r){var i,o,a,s,u,c,l,h;function f(){if(void 0!==h)return h;if(n.XMLHttpRequest){h=new n.XMLHttpRequest;try{h.open("GET",n.XDomainRequest?"/":"https://example.com")}catch(e){h=null}}else h=null;return h}function d(e){var t=f();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}function p(e){return"function"==typeof e}t(e.exports,"overrideMimeType",(()=>a),(e=>a=e)),t(e.exports,"fetch",(()=>i),(e=>i=e)),t(e.exports,"msstream",(()=>c),(e=>c=e)),t(e.exports,"abortController",(()=>u),(e=>u=e)),t(e.exports,"arraybuffer",(()=>o),(e=>o=e)),t(e.exports,"mozchunkedarraybuffer",(()=>l),(e=>l=e)),t(e.exports,"writableStream",(()=>s),(e=>s=e)),i=p(n.fetch)&&p(n.ReadableStream),s=p(n.WritableStream),u=p(n.AbortController),o=i||d("arraybuffer"),c=!i&&d("ms-stream"),l=!i&&d("moz-chunked-arraybuffer"),a=i||!!f()&&p(f().overrideMimeType),h=null})),o.register("40zun",(function(e,r){var i,a;t(e.exports,"IncomingMessage",(()=>a),(e=>a=e)),t(e.exports,"readyStates",(()=>i),(e=>i=e));var s=o("7lbf0"),u=R,c=o("2zgYS"),l=o("67rjf"),h=o("4jMg6"),f=i={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},d=a=function(e,t,n,r){var i=this;if(h.Readable.call(i),i._mode=n,i.headers={},i.rawHeaders=[],i.trailers={},i.rawTrailers=[],i.on("end",(function(){s.nextTick((function(){i.emit("close")}))})),"fetch"===n){if(i._fetchResponse=t,i.url=t.url,i.statusCode=t.status,i.statusMessage=t.statusText,t.headers.forEach((function(e,t){i.headers[t.toLowerCase()]=e,i.rawHeaders.push(t,e)})),c.writableStream){var o=new WritableStream({write:function(e){return r(!1),new Promise((function(t,n){i._destroyed?n():i.push(u.from(e))?t():i._resumeFetch=t}))},close:function(){r(!0),i._destroyed||i.push(null)},abort:function(e){r(!0),i._destroyed||i.emit("error",e)}});try{return void t.body.pipeTo(o).catch((function(e){r(!0),i._destroyed||i.emit("error",e)}))}catch(e){}}var a=t.body.getReader();!function e(){a.read().then((function(t){i._destroyed||(r(t.done),t.done?i.push(null):(i.push(u.from(t.value)),e()))})).catch((function(e){r(!0),i._destroyed||i.emit("error",e)}))}()}else{if(i._xhr=e,i._pos=0,i.url=e.responseURL,i.statusCode=e.status,i.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var n=t[1].toLowerCase();"set-cookie"===n?(void 0===i.headers[n]&&(i.headers[n]=[]),i.headers[n].push(t[2])):void 0!==i.headers[n]?i.headers[n]+=", "+t[2]:i.headers[n]=t[2],i.rawHeaders.push(t[1],t[2])}})),i._charset="x-user-defined",!c.overrideMimeType){var l=i.rawHeaders["mime-type"];if(l){var f=l.match(/;\s*charset=([^;])(;|$)/);f&&(i._charset=f[1].toLowerCase())}i._charset||(i._charset="utf-8")}}};l(d,h.Readable),d.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},d.prototype._onXHRProgress=function(e){var t=this,r=t._xhr,i=null;switch(t._mode){case"text":if((i=r.responseText).length>t._pos){var o=i.substr(t._pos);if("x-user-defined"===t._charset){for(var a=u.alloc(o.length),s=0;s<o.length;s++)a[s]=255&o.charCodeAt(s);t.push(a)}else t.push(o,t._charset);t._pos=i.length}break;case"arraybuffer":if(r.readyState!==f.DONE||!r.response)break;i=r.response,t.push(u.from(new Uint8Array(i)));break;case"moz-chunked-arraybuffer":if(i=r.response,r.readyState!==f.LOADING||!i)break;t.push(u.from(new Uint8Array(i)));break;case"ms-stream":if(i=r.response,r.readyState!==f.LOADING)break;var c=new n.MSStreamReader;c.onprogress=function(){c.result.byteLength>t._pos&&(t.push(u.from(new Uint8Array(c.result.slice(t._pos)))),t._pos=c.result.byteLength)},c.onload=function(){e(!0),t.push(null)},c.readAsArrayBuffer(i)}t._xhr.readyState===f.DONE&&"ms-stream"!==t._mode&&(e(!0),t.push(null))}})),o.register("4jMg6",(function(e,t){(t=e.exports=o("23aBF")).Stream=t,t.Readable=t,t.Writable=o("7dSHG"),t.Duplex=o("gAREe"),t.Transform=o("4hIwt"),t.PassThrough=o("3pKNX"),t.finished=o("5D02T"),t.pipeline=o("6Y8G4")})),o.register("23aBF",(function(e,t){var r,i=o("7lbf0");e.exports=T,T.ReadableState=M;o("6xYCf").EventEmitter;var a=function(e,t){return e.listeners(t).length},s=o("6ekVZ"),u=R,c=n.Uint8Array||function(){};var l,h=o("3V6Bo");l=h&&h.debuglog?h.debuglog("stream"):function(){};var f,d,p,m=o("6ssxJ"),v=o("6HeTm"),g=o("6JR68").getHighWaterMark,y=o("3wxCL").codes,b=y.ERR_INVALID_ARG_TYPE,w=y.ERR_STREAM_PUSH_AFTER_EOF,_=y.ERR_METHOD_NOT_IMPLEMENTED,k=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;o("67rjf")(T,s);var S=v.errorOrDestroy,E=["error","close","destroy","pause","resume"];function M(e,t,n){r=r||o("gAREe"),e=e||{},"boolean"!=typeof n&&(n=t instanceof r),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",n),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=o("30c5W").StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function T(e){if(r=r||o("gAREe"),!(this instanceof T))return new T(e);var t=this instanceof r;this._readableState=new M(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function C(e,t,n,r,i){l("readableAddChunk",t);var o,a=e._readableState;if(null===t)a.reading=!1,function(e,t){if(l("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?P(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,O(e)))}(e,a);else if(i||(o=function(e,t){var n;(function(e){return u.isBuffer(e)||e instanceof c})(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new b("chunk",["string","Buffer","Uint8Array"],t));return n}(a,t)),o)S(e,o);else if(a.objectMode||t&&t.length>0)if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),r)a.endEmitted?S(e,new k):I(e,a,t,!0);else if(a.ended)S(e,new w);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?I(e,a,t,!1):D(e,a)):I(e,a,t,!1)}else r||(a.reading=!1,D(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function I(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&P(e)),D(e,t)}Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),T.prototype.destroy=v.destroy,T.prototype._undestroy=v.undestroy,T.prototype._destroy=function(e,t){t(e)},T.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=u.from(e,t),t=""),n=!0),C(this,e,t,!1,n)},T.prototype.unshift=function(e){return C(this,e,null,!0,!1)},T.prototype.isPaused=function(){return!1===this._readableState.flowing},T.prototype.setEncoding=function(e){f||(f=o("30c5W").StringDecoder);var t=new f(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";null!==n;)r+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var x=1073741824;function A(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=x?e=x:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function P(e){var t=e._readableState;l("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,i.nextTick(O,e))}function O(e){var t=e._readableState;l("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,F(e)}function D(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(N,e,t))}function N(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(l("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function L(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function j(e){l("readable nexttick read 0"),e.read(0)}function B(e,t){l("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),F(e),t.flowing&&!t.reading&&e.read(0)}function F(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function U(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function q(e){var t=e._readableState;l("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.nextTick(z,t,e))}function z(e,t){if(l("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function V(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}T.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?q(this):P(this),null;if(0===(e=A(e,t))&&t.ended)return 0===t.length&&q(this),null;var r,i=t.needReadable;return l("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",i=!0),t.ended||t.reading?l("reading or ended",i=!1):i&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=A(n,t))),null===(r=e>0?U(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&q(this)),null!==r&&this.emit("data",r),r},T.prototype._read=function(e){S(this,new _("_read()"))},T.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,l("pipe count=%d opts=%j",r.pipesCount,t);var o=(!t||!1!==t.end)&&e!==i.stdout&&e!==i.stderr?u:v;function s(t,i){l("onunpipe"),t===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,l("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("drain",c),e.removeListener("error",d),e.removeListener("unpipe",s),n.removeListener("end",u),n.removeListener("end",v),n.removeListener("data",f),h=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}function u(){l("onend"),e.end()}r.endEmitted?i.nextTick(o):n.once("end",o),e.on("unpipe",s);var c=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,F(e))}}(n);e.on("drain",c);var h=!1;function f(t){l("ondata");var i=e.write(t);l("dest.write",i),!1===i&&((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==V(r.pipes,e))&&!h&&(l("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function d(t){l("onerror",t),v(),e.removeListener("error",d),0===a(e,"error")&&S(e,t)}function p(){e.removeListener("finish",m),v()}function m(){l("onfinish"),e.removeListener("close",p),v()}function v(){l("unpipe"),n.unpipe(e)}return n.on("data",f),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",d),e.once("close",p),e.once("finish",m),e.emit("pipe",n),r.flowing||(l("pipe resume"),n.resume()),e},T.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=V(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},T.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,l("on readable",r.length,r.reading),r.length?P(this):r.reading||i.nextTick(j,this))),n},T.prototype.addListener=T.prototype.on,T.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&i.nextTick(L,this),n},T.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||i.nextTick(L,this),t},T.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(B,e,t))}(this,e)),e.paused=!1,this},T.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},T.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(l("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(l("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<E.length;o++)e.on(E[o],this.emit.bind(this,E[o]));return this._read=function(t){l("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(T.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=o("7Bro1")),d(this)}),Object.defineProperty(T.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(T.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(T.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),T._fromList=U,Object.defineProperty(T.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(T.from=function(e,t){return void 0===p&&(p=o("3dERX")),p(T,e,t)})})),o.register("6ekVZ",(function(e,t){e.exports=o("6xYCf").EventEmitter})),o.register("6ssxJ",(function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=R,s=o("3V6Bo").inspect,u=s&&s.custom||"inspect";function c(e,t,n){a.prototype.copy.call(e,t,n)}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,o,l;return t=e,(o=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t=a.allocUnsafe(e>>>0),n=this.head,r=0;n;)c(n.data,t,r),r+=n.data.length,n=n.next;return t}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&i(t.prototype,o),l&&i(t,l),e}()})),o.register("6HeTm",(function(e,t){var n=o("7lbf0");function r(e,t){a(e,t),i(e)}function i(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function a(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var o=this,s=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return s||u?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(a,this,e)):n.nextTick(a,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?o._writableState?o._writableState.errorEmitted?n.nextTick(i,o):(o._writableState.errorEmitted=!0,n.nextTick(r,o,e)):n.nextTick(r,o,e):t?(n.nextTick(i,o),t(e)):n.nextTick(i,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}})),o.register("6JR68",(function(e,t){"use strict";var n=o("3wxCL").codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}})),o.register("3wxCL",(function(e,n){var r;t(e.exports,"codes",(()=>r),(e=>r=e));var i={};function o(e,t,n){n||(n=Error);var r=function(e){var n,r;function i(n,r,i){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,i))||this}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);r.prototype.name=n.name,r.prototype.code=e,i[e]=r}function a(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}o("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),o("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,i,o,s;if("string"==typeof t&&(i="not ",t.substr(!o||o<0?0:+o,i.length)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))s="The ".concat(e," ").concat(r," ").concat(a(t,"type"));else{var u=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(u," ").concat(r," ").concat(a(t,"type"))}return s+=". Received type ".concat(typeof n)}),TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),r=i})),o.register("gAREe",(function(e,t){var n=o("7lbf0"),r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=l;var i=o("23aBF"),a=o("7dSHG");o("67rjf")(l,i);for(var s=r(a.prototype),u=0;u<s.length;u++){var c=s[u];l.prototype[c]||(l.prototype[c]=a.prototype[c])}function l(e){if(!(this instanceof l))return new l(e);i.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||n.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})})),o.register("7dSHG",(function(e,t){var r,i=o("7lbf0");function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=T,T.WritableState=M;var s={deprecate:o("bU0I5")},u=o("6ekVZ"),c=R,l=n.Uint8Array||function(){};var h,f=o("6HeTm"),d=o("6JR68").getHighWaterMark,p=o("3wxCL").codes,m=p.ERR_INVALID_ARG_TYPE,v=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_MULTIPLE_CALLBACK,y=p.ERR_STREAM_CANNOT_PIPE,b=p.ERR_STREAM_DESTROYED,w=p.ERR_STREAM_NULL_VALUES,_=p.ERR_STREAM_WRITE_AFTER_END,k=p.ERR_UNKNOWN_ENCODING,S=f.errorOrDestroy;function E(){}function M(e,t,n){r=r||o("gAREe"),e=e||{},"boolean"!=typeof n&&(n=t instanceof r),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=d(this,e,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if("function"!=typeof o)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,o){--t.pendingcb,n?(i.nextTick(o,r),i.nextTick(O,e,t),e._writableState.errorEmitted=!0,S(e,r)):(o(r),e._writableState.errorEmitted=!0,S(e,r),O(e,t))}(e,n,r,t,o);else{var a=A(n)||e.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||x(e,n),r?i.nextTick(I,e,n,a,o):I(e,n,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function T(e){var t=this instanceof(r=r||o("gAREe"));if(!t&&!h.call(T,this))return new T(e);this._writableState=new M(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),u.call(this)}function C(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function I(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),O(e,t)}function x(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,C(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,l=n.encoding,h=n.callback;if(C(e,t,!1,t.objectMode?1:c.length,c,l,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function A(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function P(e,t){e._final((function(n){t.pendingcb--,n&&S(e,n),t.prefinished=!0,e.emit("prefinish"),O(e,t)}))}function O(e,t){var n=A(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,i.nextTick(P,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}o("67rjf")(T,u),M.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(M.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(T,Symbol.hasInstance,{value:function(e){return!!h.call(this,e)||this===T&&(e&&e._writableState instanceof M)}})):h=function(e){return e instanceof this},T.prototype.pipe=function(){S(this,new y)},T.prototype.write=function(e,t,n){var r=this._writableState,o=!1,a=!r.objectMode&&function(e){return c.isBuffer(e)||e instanceof l}(e);return a&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=E),r.ending?function(e,t){var n=new _;S(e,n),i.nextTick(t,n)}(this,n):(a||function(e,t,n,r){var o;return null===n?o=new w:"string"==typeof n||t.objectMode||(o=new m("chunk",["string","Buffer"],n)),!o||(S(e,o),i.nextTick(r,o),!1)}(this,r,e,n))&&(r.pendingcb++,o=function(e,t,n,r,i,o){if(!n){var a=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,n));return t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else C(e,t,!1,s,r,i,o);return u}(this,r,a,e,t,n)),o},T.prototype.cork=function(){this._writableState.corked++},T.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||x(this,e))},T.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new k(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(T.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),T.prototype._write=function(e,t,n){n(new v("_write()"))},T.prototype._writev=null,T.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,O(e,t),n&&(t.finished?i.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(T.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(T.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),T.prototype.destroy=f.destroy,T.prototype._undestroy=f.undestroy,T.prototype._destroy=function(e,t){t(e)}})),o.register("bU0I5",(function(e,t){function r(e){try{if(!n.localStorage)return!1}catch(e){return!1}var t=n.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}})),o.register("30c5W",(function(e,n){var r;t(e.exports,"StringDecoder",(()=>r),(e=>r=e));var i=o("6aUge").Buffer,a=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===a||!a(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=h,t=4;break;case"utf8":this.fillLast=c,t=4;break;case"base64":this.text=f,this.end=d,t=3;break;default:return this.write=p,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function u(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function c(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function h(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function f(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):""}r=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},s.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=u(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=u(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=u(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}})),o.register("6aUge",(function(e,t){var n=U.Buffer;function r(e,t){for(var n in e)t[n]=e[n]}function i(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=U:(r(U,e.exports),e.exports.Buffer=i),i.prototype=Object.create(n.prototype),r(n,i),i.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},i.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return U.SlowBuffer(e)}})),o.register("7Bro1",(function(e,t){var n,r=o("7lbf0");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=o("5D02T"),s=Symbol("lastResolve"),u=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),h=Symbol("lastPromise"),f=Symbol("handlePromise"),d=Symbol("stream");function p(e,t){return{value:e,done:t}}function m(e){var t=e[s];if(null!==t){var n=e[d].read();null!==n&&(e[h]=null,e[s]=null,e[u]=null,t(p(n,!1)))}}function v(e){r.nextTick(m,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((i(n={get stream(){return this[d]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(p(void 0,!0));if(this[d].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[c]?n(e[c]):t(p(void 0,!0))}))}));var n,i=this[h];if(i)n=new Promise(function(e,t){return function(n,r){e.then((function(){t[l]?n(p(void 0,!0)):t[f](n,r)}),r)}}(i,this));else{var o=this[d].read();if(null!==o)return Promise.resolve(p(o,!1));n=new Promise(this[f])}return this[h]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,n){e[d].destroy(null,(function(e){e?n(e):t(p(void 0,!0))}))}))})),n),g);e.exports=function(e){var t,n=Object.create(y,(i(t={},d,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,l,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var r=n[d].read();r?(n[h]=null,n[s]=null,n[u]=null,e(p(r,!1))):(n[s]=e,n[u]=t)},writable:!0}),t));return n[h]=null,a(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[u];return null!==t&&(n[h]=null,n[s]=null,n[u]=null,t(e)),void(n[c]=e)}var r=n[s];null!==r&&(n[h]=null,n[s]=null,n[u]=null,r(p(void 0,!0))),n[l]=!0})),e.on("readable",v.bind(null,n)),n}})),o.register("5D02T",(function(e,t){"use strict";var n=o("3wxCL").codes.ERR_STREAM_PREMATURE_CLOSE;function r(){}e.exports=function e(t,i,o){if("function"==typeof i)return e(t,null,i);i||(i={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||r);var a=i.readable||!1!==i.readable&&t.readable,s=i.writable||!1!==i.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){s=!1,c=!0,a||o.call(t)},h=t._readableState&&t._readableState.endEmitted,f=function(){a=!1,h=!0,s||o.call(t)},d=function(e){o.call(t,e)},p=function(){var e;return a&&!h?(t._readableState&&t._readableState.ended||(e=new n),o.call(t,e)):s&&!c?(t._writableState&&t._writableState.ended||(e=new n),o.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?s&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",p),t.req?m():t.on("request",m)),t.on("end",f),t.on("finish",l),!1!==i.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",f),t.removeListener("error",d),t.removeListener("close",p)}}})),o.register("3dERX",(function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}})),o.register("4hIwt",(function(e,t){"use strict";e.exports=l;var n=o("3wxCL").codes,r=n.ERR_METHOD_NOT_IMPLEMENTED,i=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,u=o("gAREe");function c(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new i);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",h)}function h(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(t,n){f(e,t,n)}))}function f(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}o("67rjf")(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new r("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}})),o.register("3pKNX",(function(e,t){"use strict";e.exports=r;var n=o("4hIwt");function r(e){if(!(this instanceof r))return new r(e);n.call(this,e)}o("67rjf")(r,n),r.prototype._transform=function(e,t,n){n(null,e)}})),o.register("6Y8G4",(function(e,t){"use strict";var n;var r=o("3wxCL").codes,i=r.ERR_MISSING_ARGS,a=r.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function u(e,t,r,i){i=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(i);var s=!1;e.on("close",(function(){s=!0})),void 0===n&&(n=o("5D02T")),n(e,{readable:t,writable:r},(function(e){if(e)return i(e);s=!0,i()}));var u=!1;return function(t){if(!s&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void i(t||new a("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function h(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o=h(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new i("streams");var a=t.map((function(e,n){var i=n<t.length-1;return u(e,i,n>0,(function(e){r||(r=e),e&&a.forEach(c),i||(a.forEach(c),o(r))}))}));return t.reduce(l)}})),o.register("4dlYL",(function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e};var n=Object.prototype.hasOwnProperty})),o.register("4fb8q",(function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}})),o.register("2eqHZ",(function(e,t){var n=o("76ImE"),r=e.exports;for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);function a(e){if("string"==typeof e&&(e=XU(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}r.request=function(e,t){return e=a(e),n.request.call(this,e,t)},r.get=function(e,t){return e=a(e),n.get.call(this,e,t)}})),iq=o("5QJd4"),o.register("7d0yx",(function(e,n){var r;t(e.exports,"getOCSPURI",(()=>r),(e=>r=e));var i=o("3V6Bo");i=o("3V6Bo");r=function(e,t){var n=i["id-pkix-ocsp"].join("."),r=sq.toDER(e,"CERTIFICATE");r=i.Certificate.decode(r,"der"),sq.getAuthorityInfo(r,n,t)}})),o("7d0yx").getOCSPURI,o.register("6H6Du",(function(e,n){var r;t(e.exports,"generate",(()=>r),(e=>r=e));var i=o("6NBIr"),a=o("3V6Bo");a=o("3V6Bo");function s(e){return i.createHash("sha1").update(e).digest()}r=function(e,t){var n,r;n=e.tbsCertificate?e:a.Certificate.decode(sq.toDER(e,"CERTIFICATE"),"der"),r=t.tbsCertificate?t:a.Certificate.decode(sq.toDER(t,"CERTIFICATE"),"der");var o=n.tbsCertificate,u=r.tbsCertificate,c={hashAlgorithm:{algorithm:[1,3,14,3,2,26]},issuerNameHash:s(a.Name.encode(o.issuer,"der")),issuerKeyHash:s(u.subjectPublicKeyInfo.subjectPublicKey.data),serialNumber:o.serialNumber},l={tbsRequest:{version:"v1",requestList:[{reqCert:c}],requestExtensions:[{extnID:a["id-pkix-ocsp-nonce"],critical:!1,extnValue:a.Nonce.encode(i.randomBytes(16),"der")}]}};return{id:s(a.CertID.encode(c,"der")),certID:c,data:a.OCSPRequest.encode(l,"der"),cert:n,issuer:r}}})),o.register("6NBIr",(function(e,n){var r,i,a;t(e.exports,"randomBytes",(()=>r),(e=>r=e)),t(e.exports,"createHash",(()=>a),(e=>a=e)),t(e.exports,"createVerify",(()=>i),(e=>i=e)),r=o("3pfpW"),a=o("uk3ap"),o("5FdWr");var s=o("GuzRm"),u=Object.keys(s),c=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(u);var l=o("KTk8W");l.pbkdf2,l.pbkdf2Sync;var h=o("2BAAN");h.Cipher,h.createCipher,h.Cipheriv,h.createCipheriv,h.Decipher,h.createDecipher,h.Decipheriv,h.createDecipheriv,h.getCiphers,h.listCiphers;var f=o("5KJtD");f.DiffieHellmanGroup,f.createDiffieHellmanGroup,f.getDiffieHellman,f.createDiffieHellman,f.DiffieHellman;var d=o("67mQp");d.createSign,d.Sign,i=d.createVerify,d.Verify,o("6SrWp");var p=o("20m1B");p.publicEncrypt,p.privateEncrypt,p.publicDecrypt,p.privateDecrypt;var m=o("5Z9Ew");m.randomFill,m.randomFillSync})),o.register("3pfpW",(function(e,t){var r=o("7lbf0"),i=65536;var a=o("6aUge").Buffer,s=n.crypto||n.msCrypto;s&&s.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var n=a.allocUnsafe(e);if(e>0)if(e>i)for(var o=0;o<e;o+=i)s.getRandomValues(n.slice(o,o+i));else s.getRandomValues(n);return"function"==typeof t?r.nextTick((function(){t(null,n)})):n}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}})),o.register("uk3ap",(function(e,t){"use strict";var n=o("67rjf"),r=o("275Ft"),i=o("1KIlU"),a=o("x98EY"),s=o("4Quo3");function u(e){s.call(this,"digest"),this._hash=e}n(u,s),u.prototype._update=function(e){this._hash.update(e)},u.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new r:"rmd160"===e||"ripemd160"===e?new i:new u(a(e))}})),o.register("275Ft",(function(e,t){"use strict";var n=o("67rjf"),r=o("1GBmN"),i=o("6aUge").Buffer,a=new Array(16);function s(){r.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(e,t){return e<<t|e>>>32-t}function c(e,t,n,r,i,o,a){return u(e+(t&n|~t&r)+i+o|0,a)+t|0}function l(e,t,n,r,i,o,a){return u(e+(t&r|n&~r)+i+o|0,a)+t|0}function h(e,t,n,r,i,o,a){return u(e+(t^n^r)+i+o|0,a)+t|0}function f(e,t,n,r,i,o,a){return u(e+(n^(t|~r))+i+o|0,a)+t|0}n(s,r),s.prototype._update=function(){for(var e=a,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var n=this._a,r=this._b,i=this._c,o=this._d;n=c(n,r,i,o,e[0],3614090360,7),o=c(o,n,r,i,e[1],3905402710,12),i=c(i,o,n,r,e[2],606105819,17),r=c(r,i,o,n,e[3],3250441966,22),n=c(n,r,i,o,e[4],4118548399,7),o=c(o,n,r,i,e[5],1200080426,12),i=c(i,o,n,r,e[6],2821735955,17),r=c(r,i,o,n,e[7],4249261313,22),n=c(n,r,i,o,e[8],1770035416,7),o=c(o,n,r,i,e[9],2336552879,12),i=c(i,o,n,r,e[10],4294925233,17),r=c(r,i,o,n,e[11],2304563134,22),n=c(n,r,i,o,e[12],1804603682,7),o=c(o,n,r,i,e[13],4254626195,12),i=c(i,o,n,r,e[14],2792965006,17),n=l(n,r=c(r,i,o,n,e[15],1236535329,22),i,o,e[1],4129170786,5),o=l(o,n,r,i,e[6],3225465664,9),i=l(i,o,n,r,e[11],643717713,14),r=l(r,i,o,n,e[0],3921069994,20),n=l(n,r,i,o,e[5],3593408605,5),o=l(o,n,r,i,e[10],38016083,9),i=l(i,o,n,r,e[15],3634488961,14),r=l(r,i,o,n,e[4],3889429448,20),n=l(n,r,i,o,e[9],568446438,5),o=l(o,n,r,i,e[14],3275163606,9),i=l(i,o,n,r,e[3],4107603335,14),r=l(r,i,o,n,e[8],1163531501,20),n=l(n,r,i,o,e[13],2850285829,5),o=l(o,n,r,i,e[2],4243563512,9),i=l(i,o,n,r,e[7],1735328473,14),n=h(n,r=l(r,i,o,n,e[12],2368359562,20),i,o,e[5],4294588738,4),o=h(o,n,r,i,e[8],2272392833,11),i=h(i,o,n,r,e[11],1839030562,16),r=h(r,i,o,n,e[14],4259657740,23),n=h(n,r,i,o,e[1],2763975236,4),o=h(o,n,r,i,e[4],1272893353,11),i=h(i,o,n,r,e[7],4139469664,16),r=h(r,i,o,n,e[10],3200236656,23),n=h(n,r,i,o,e[13],681279174,4),o=h(o,n,r,i,e[0],3936430074,11),i=h(i,o,n,r,e[3],3572445317,16),r=h(r,i,o,n,e[6],76029189,23),n=h(n,r,i,o,e[9],3654602809,4),o=h(o,n,r,i,e[12],3873151461,11),i=h(i,o,n,r,e[15],530742520,16),n=f(n,r=h(r,i,o,n,e[2],3299628645,23),i,o,e[0],4096336452,6),o=f(o,n,r,i,e[7],1126891415,10),i=f(i,o,n,r,e[14],2878612391,15),r=f(r,i,o,n,e[5],4237533241,21),n=f(n,r,i,o,e[12],1700485571,6),o=f(o,n,r,i,e[3],2399980690,10),i=f(i,o,n,r,e[10],4293915773,15),r=f(r,i,o,n,e[1],2240044497,21),n=f(n,r,i,o,e[8],1873313359,6),o=f(o,n,r,i,e[15],4264355552,10),i=f(i,o,n,r,e[6],2734768916,15),r=f(r,i,o,n,e[13],1309151649,21),n=f(n,r,i,o,e[4],4149444226,6),o=f(o,n,r,i,e[11],3174756917,10),i=f(i,o,n,r,e[2],718787259,15),r=f(r,i,o,n,e[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+r|0,this._c=this._c+i|0,this._d=this._d+o|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=i.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=s})),o.register("1GBmN",(function(e,t){"use strict";var n=o("6aUge").Buffer,r=o("4jMg6").Transform;function i(e){r.call(this),this._block=n.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}o("67rjf")(i,r),i.prototype._transform=function(e,t,n){var r=null;try{this.update(e,t)}catch(e){r=e}n(r)},i.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},i.prototype.update=function(e,t){if(function(e,t){if(!n.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(e)||(e=n.from(e,t));for(var r=this._block,i=0;this._blockOffset+e.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)r[o++]=e[i++];this._update(),this._blockOffset=0}for(;i<e.length;)r[this._blockOffset++]=e[i++];for(var a=0,s=8*e.length;s>0;++a)this._length[a]+=s,(s=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*s);return this},i.prototype._update=function(){throw new Error("_update is not implemented")},i.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return t},i.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=i})),o.register("1KIlU",(function(e,t){"use strict";var n=R,r=o("67rjf"),i=o("1GBmN"),a=new Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],l=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],h=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function d(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(e,t){return e<<t|e>>>32-t}function m(e,t,n,r,i,o,a,s){return p(e+(t^n^r)+o+a|0,s)+i|0}function v(e,t,n,r,i,o,a,s){return p(e+(t&n|~t&r)+o+a|0,s)+i|0}function g(e,t,n,r,i,o,a,s){return p(e+((t|~n)^r)+o+a|0,s)+i|0}function y(e,t,n,r,i,o,a,s){return p(e+(t&r|n&~r)+o+a|0,s)+i|0}function b(e,t,n,r,i,o,a,s){return p(e+(t^(n|~r))+o+a|0,s)+i|0}r(d,i),d.prototype._update=function(){for(var e=a,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var n=0|this._a,r=0|this._b,i=0|this._c,o=0|this._d,d=0|this._e,w=0|this._a,_=0|this._b,k=0|this._c,S=0|this._d,E=0|this._e,M=0;M<80;M+=1){var T,C;M<16?(T=m(n,r,i,o,d,e[s[M]],h[0],c[M]),C=b(w,_,k,S,E,e[u[M]],f[0],l[M])):M<32?(T=v(n,r,i,o,d,e[s[M]],h[1],c[M]),C=y(w,_,k,S,E,e[u[M]],f[1],l[M])):M<48?(T=g(n,r,i,o,d,e[s[M]],h[2],c[M]),C=g(w,_,k,S,E,e[u[M]],f[2],l[M])):M<64?(T=y(n,r,i,o,d,e[s[M]],h[3],c[M]),C=v(w,_,k,S,E,e[u[M]],f[3],l[M])):(T=b(n,r,i,o,d,e[s[M]],h[4],c[M]),C=m(w,_,k,S,E,e[u[M]],f[4],l[M])),n=d,d=o,o=p(i,10),i=r,r=T,w=E,E=S,S=p(k,10),k=_,_=C}var I=this._b+i+S|0;this._b=this._c+o+E|0,this._c=this._d+d+w|0,this._d=this._e+n+_|0,this._e=this._a+r+k|0,this._a=I},d.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=n.alloc?n.alloc(20):new n(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=d})),o.register("x98EY",(function(e,t){var n=e.exports=function(e){e=e.toLowerCase();var t=n[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};n.sha=o("5GP9o"),n.sha1=o("WgooP"),n.sha224=o("6656g"),n.sha256=o("5ozPj"),n.sha384=o("5lkON"),n.sha512=o("7wTbq")})),o.register("5GP9o",(function(e,t){var n=o("67rjf"),r=o("Jwtsg"),i=o("6aUge").Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,r.call(this,64,56)}function c(e){return e<<30|e>>>2}function l(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}n(u,r),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,h=0;h<16;++h)n[h]=e.readInt32BE(4*h);for(;h<80;++h)n[h]=n[h-3]^n[h-8]^n[h-14]^n[h-16];for(var f=0;f<80;++f){var d=~~(f/20),p=0|((t=r)<<5|t>>>27)+l(d,i,o,s)+u+n[f]+a[d];u=s,s=o,o=c(i),i=r,r=p}this._a=r+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var e=i.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=u})),o.register("Jwtsg",(function(e,t){var n=o("6aUge").Buffer;function r(e,t){this._block=n.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}r.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=n.from(e,t));for(var r=this._block,i=this._blockSize,o=e.length,a=this._len,s=0;s<o;){for(var u=a%i,c=Math.min(o-s,i-u),l=0;l<c;l++)r[u+l]=e[s+l];s+=c,(a+=c)%i==0&&this._update(r)}return this._len+=o,this},r.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(4294967295&n)>>>0,i=(n-r)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var o=this._hash();return e?o.toString(e):o},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=r})),o.register("WgooP",(function(e,t){var n=o("67rjf"),r=o("Jwtsg"),i=o("6aUge").Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,r.call(this,64,56)}function c(e){return e<<5|e>>>27}function l(e){return e<<30|e>>>2}function h(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}n(u,r),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,f=0;f<16;++f)n[f]=e.readInt32BE(4*f);for(;f<80;++f)n[f]=(t=n[f-3]^n[f-8]^n[f-14]^n[f-16])<<1|t>>>31;for(var d=0;d<80;++d){var p=~~(d/20),m=c(r)+h(p,i,o,s)+u+n[d]+a[p]|0;u=s,s=o,o=l(i),i=r,r=m}this._a=r+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var e=i.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=u})),o.register("6656g",(function(e,t){var n=o("67rjf"),r=o("5ozPj"),i=o("Jwtsg"),a=o("6aUge").Buffer,s=new Array(64);function u(){this.init(),this._w=s,i.call(this,64,56)}n(u,r),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var e=a.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=u})),o.register("5ozPj",(function(e,t){var n=o("67rjf"),r=o("Jwtsg"),i=o("6aUge").Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function u(){this.init(),this._w=s,r.call(this,64,56)}function c(e,t,n){return n^e&(t^n)}function l(e,t,n){return e&t|n&(e|t)}function h(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function f(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function d(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}n(u,r),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,p=0|this._f,m=0|this._g,v=0|this._h,g=0;g<16;++g)n[g]=e.readInt32BE(4*g);for(;g<64;++g)n[g]=0|(((t=n[g-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+n[g-7]+d(n[g-15])+n[g-16];for(var y=0;y<64;++y){var b=v+f(u)+c(u,p,m)+a[y]+n[y]|0,w=h(r)+l(r,i,o)|0;v=m,m=p,p=u,u=s+b|0,s=o,o=i,i=r,r=b+w|0}this._a=r+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0,this._f=p+this._f|0,this._g=m+this._g|0,this._h=v+this._h|0},u.prototype._hash=function(){var e=i.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=u})),o.register("5lkON",(function(e,t){var n=o("67rjf"),r=o("7wTbq"),i=o("Jwtsg"),a=o("6aUge").Buffer,s=new Array(160);function u(){this.init(),this._w=s,i.call(this,128,112)}n(u,r),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var e=a.allocUnsafe(48);function t(t,n,r){e.writeInt32BE(t,r),e.writeInt32BE(n,r+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=u})),o.register("7wTbq",(function(e,t){var n=o("67rjf"),r=o("Jwtsg"),i=o("6aUge").Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function u(){this.init(),this._w=s,r.call(this,128,112)}function c(e,t,n){return n^e&(t^n)}function l(e,t,n){return e&t|n&(e|t)}function h(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function f(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function d(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function m(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function v(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function g(e,t){return e>>>0<t>>>0?1:0}n(u,r),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(e){for(var t=this._w,n=0|this._ah,r=0|this._bh,i=0|this._ch,o=0|this._dh,s=0|this._eh,u=0|this._fh,y=0|this._gh,b=0|this._hh,w=0|this._al,_=0|this._bl,k=0|this._cl,S=0|this._dl,E=0|this._el,M=0|this._fl,T=0|this._gl,C=0|this._hl,I=0;I<32;I+=2)t[I]=e.readInt32BE(4*I),t[I+1]=e.readInt32BE(4*I+4);for(;I<160;I+=2){var x=t[I-30],A=t[I-30+1],P=d(x,A),O=p(A,x),R=m(x=t[I-4],A=t[I-4+1]),D=v(A,x),N=t[I-14],L=t[I-14+1],j=t[I-32],B=t[I-32+1],F=O+L|0,U=P+N+g(F,O)|0;U=(U=U+R+g(F=F+D|0,D)|0)+j+g(F=F+B|0,B)|0,t[I]=U,t[I+1]=F}for(var q=0;q<160;q+=2){U=t[q],F=t[q+1];var z=l(n,r,i),V=l(w,_,k),W=h(n,w),H=h(w,n),K=f(s,E),G=f(E,s),Y=a[q],Q=a[q+1],J=c(s,u,y),Z=c(E,M,T),X=C+G|0,$=b+K+g(X,C)|0;$=($=($=$+J+g(X=X+Z|0,Z)|0)+Y+g(X=X+Q|0,Q)|0)+U+g(X=X+F|0,F)|0;var ee=H+V|0,te=W+z+g(ee,H)|0;b=y,C=T,y=u,T=M,u=s,M=E,s=o+$+g(E=S+X|0,S)|0,o=i,S=k,i=r,k=_,r=n,_=w,n=$+te+g(w=X+ee|0,X)|0}this._al=this._al+w|0,this._bl=this._bl+_|0,this._cl=this._cl+k|0,this._dl=this._dl+S|0,this._el=this._el+E|0,this._fl=this._fl+M|0,this._gl=this._gl+T|0,this._hl=this._hl+C|0,this._ah=this._ah+n+g(this._al,w)|0,this._bh=this._bh+r+g(this._bl,_)|0,this._ch=this._ch+i+g(this._cl,k)|0,this._dh=this._dh+o+g(this._dl,S)|0,this._eh=this._eh+s+g(this._el,E)|0,this._fh=this._fh+u+g(this._fl,M)|0,this._gh=this._gh+y+g(this._gl,T)|0,this._hh=this._hh+b+g(this._hl,C)|0},u.prototype._hash=function(){var e=i.allocUnsafe(64);function t(t,n,r){e.writeInt32BE(t,r),e.writeInt32BE(n,r+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=u})),o.register("4Quo3",(function(e,t){var n=o("6aUge").Buffer,r=o("4jMg6").Transform,i=o("30c5W").StringDecoder;function a(e){r.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}o("67rjf")(a,r),a.prototype.update=function(e,t,r){"string"==typeof e&&(e=n.from(e,t));var i=this._update(e);return this.hashMode?this:(r&&(i=this._toString(i,r)),i)},a.prototype.setAutoPadding=function(){},a.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},a.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},a.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},a.prototype._transform=function(e,t,n){var r;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){r=e}finally{n(r)}},a.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},a.prototype._finalOrDigest=function(e){var t=this.__final()||n.alloc(0);return e&&(t=this._toString(t,e,!0)),t},a.prototype._toString=function(e,t,n){if(this._decoder||(this._decoder=new i(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var r=this._decoder.write(e);return n&&(r+=this._decoder.end()),r},e.exports=a})),o.register("5FdWr",(function(e,t){"use strict";var n=o("67rjf"),r=o("14zYM"),i=o("4Quo3"),a=o("6aUge").Buffer,s=o("4tiXs"),u=o("1KIlU"),c=o("x98EY"),l=a.alloc(128);function h(e,t){i.call(this,"digest"),"string"==typeof t&&(t=a.from(t));var n="sha512"===e||"sha384"===e?128:64;(this._alg=e,this._key=t,t.length>n)?t=("rmd160"===e?new u:c(e)).update(t).digest():t.length<n&&(t=a.concat([t,l],n));for(var r=this._ipad=a.allocUnsafe(n),o=this._opad=a.allocUnsafe(n),s=0;s<n;s++)r[s]=54^t[s],o[s]=92^t[s];this._hash="rmd160"===e?new u:c(e),this._hash.update(r)}n(h,i),h.prototype._update=function(e){this._hash.update(e)},h.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new u:c(this._alg)).update(this._opad).update(e).digest()},e.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new h("rmd160",t):"md5"===e?new r(s,t):new h(e,t)}})),o.register("14zYM",(function(e,t){"use strict";var n=o("67rjf"),r=o("6aUge").Buffer,i=o("4Quo3"),a=r.alloc(128),s=64;function u(e,t){i.call(this,"digest"),"string"==typeof t&&(t=r.from(t)),this._alg=e,this._key=t,t.length>s?t=e(t):t.length<s&&(t=r.concat([t,a],s));for(var n=this._ipad=r.allocUnsafe(s),o=this._opad=r.allocUnsafe(s),u=0;u<s;u++)n[u]=54^t[u],o[u]=92^t[u];this._hash=[n]}n(u,i),u.prototype._update=function(e){this._hash.push(e)},u.prototype._final=function(){var e=this._alg(r.concat(this._hash));return this._alg(r.concat([this._opad,e]))},e.exports=u})),o.register("4tiXs",(function(e,t){var n=o("275Ft");e.exports=function(e){return(new n).update(e).digest()}})),o.register("GuzRm",(function(e,t){e.exports=o("1H3g8")})),o.register("1H3g8",(function(e,t){e.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')})),o.register("KTk8W",(function(e,n){var r,i;t(e.exports,"pbkdf2Sync",(()=>i),(e=>i=e)),t(e.exports,"pbkdf2",(()=>r),(e=>r=e)),r=o("55Ivz"),i=o("79RCb")})),o.register("55Ivz",(function(e,t){var r,i,a=o("6aUge").Buffer,s=o("YBN3B"),u=o("71VDj"),c=o("79RCb"),l=o("3kz7C"),h=n.crypto&&n.crypto.subtle,f={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},d=[];function p(){return i||(i=n.process&&n.process.nextTick?n.process.nextTick:n.queueMicrotask?n.queueMicrotask:n.setImmediate?n.setImmediate:n.setTimeout)}function m(e,t,n,r,i){return h.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then((function(e){return h.deriveBits({name:"PBKDF2",salt:t,iterations:n,hash:{name:i}},e,r<<3)})).then((function(e){return a.from(e)}))}e.exports=function(e,t,i,o,v,g){"function"==typeof v&&(g=v,v=void 0);var y=f[(v=v||"sha1").toLowerCase()];if(y&&"function"==typeof n.Promise){if(s(i,o),e=l(e,u,"Password"),t=l(t,u,"Salt"),"function"!=typeof g)throw new Error("No callback provided to pbkdf2");!function(e,t){e.then((function(e){p()((function(){t(null,e)}))}),(function(e){p()((function(){t(e)}))}))}(function(e){if(n.process&&!n.process.browser)return Promise.resolve(!1);if(!h||!h.importKey||!h.deriveBits)return Promise.resolve(!1);if(void 0!==d[e])return d[e];var t=m(r=r||a.alloc(8),r,10,128,e).then((function(){return!0})).catch((function(){return!1}));return d[e]=t,t}(y).then((function(n){return n?m(e,t,i,o,y):c(e,t,i,o,v)})),g)}else p()((function(){var n;try{n=c(e,t,i,o,v)}catch(e){return g(e)}g(null,n)}))}})),o.register("YBN3B",(function(e,t){var n=Math.pow(2,30)-1;e.exports=function(e,t){if("number"!=typeof e)throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if("number"!=typeof t)throw new TypeError("Key length not a number");if(t<0||t>n||t!=t)throw new TypeError("Bad key length")}})),o.register("71VDj",(function(e,t){var r,i=o("7lbf0");if(n.process&&n.process.browser)r="utf-8";else if(n.process&&n.process.version){r=parseInt(i.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}else r="utf-8";e.exports=r})),o.register("79RCb",(function(e,t){var n=o("4tiXs"),r=o("1KIlU"),i=o("x98EY"),a=o("6aUge").Buffer,s=o("YBN3B"),u=o("71VDj"),c=o("3kz7C"),l=a.alloc(128),h={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function f(e,t,o){var s=function(e){function t(t){return i(e).update(t).digest()}function o(e){return(new r).update(e).digest()}return"rmd160"===e||"ripemd160"===e?o:"md5"===e?n:t}(e),u="sha512"===e||"sha384"===e?128:64;t.length>u?t=s(t):t.length<u&&(t=a.concat([t,l],u));for(var c=a.allocUnsafe(u+h[e]),f=a.allocUnsafe(u+h[e]),d=0;d<u;d++)c[d]=54^t[d],f[d]=92^t[d];var p=a.allocUnsafe(u+o+4);c.copy(p,0,0,u),this.ipad1=p,this.ipad2=c,this.opad=f,this.alg=e,this.blocksize=u,this.hash=s,this.size=h[e]}f.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},e.exports=function(e,t,n,r,i){s(n,r);var o=new f(i=i||"sha1",e=c(e,u,"Password"),(t=c(t,u,"Salt")).length),l=a.allocUnsafe(r),d=a.allocUnsafe(t.length+4);t.copy(d,0,0,t.length);for(var p=0,m=h[i],v=Math.ceil(r/m),g=1;g<=v;g++){d.writeUInt32BE(g,t.length);for(var y=o.run(d,o.ipad1),b=y,w=1;w<n;w++){b=o.run(b,o.ipad2);for(var _=0;_<m;_++)y[_]^=b[_]}y.copy(l,p),p+=m}return l}})),o.register("3kz7C",(function(e,t){var n=o("6aUge").Buffer;e.exports=function(e,t,r){if(n.isBuffer(e))return e;if("string"==typeof e)return n.from(e,t);if(ArrayBuffer.isView(e))return n.from(e.buffer);throw new TypeError(r+" must be a string, a Buffer, a typed array or a DataView")}})),o.register("2BAAN",(function(e,n){var r,i,a,s,u,c,l,h,f,d;t(e.exports,"Cipher",(()=>l),(e=>l=e)),t(e.exports,"Decipheriv",(()=>d),(e=>d=e)),t(e.exports,"Cipheriv",(()=>h),(e=>h=e)),t(e.exports,"Decipher",(()=>a),(e=>a=e)),t(e.exports,"createDecipheriv",(()=>f),(e=>f=e)),t(e.exports,"listCiphers",(()=>c),(e=>c=e)),t(e.exports,"createCipher",(()=>i),(e=>i=e)),t(e.exports,"createCipheriv",(()=>u),(e=>u=e)),t(e.exports,"createDecipher",(()=>r),(e=>r=e)),t(e.exports,"getCiphers",(()=>s),(e=>s=e));var p=o("1MLQx"),m=o("4rMrO"),v=o("4zJPx"),g=o("56jae"),y=o("1bB8M");function b(e,t,n){if(e=e.toLowerCase(),v[e])return m.createCipheriv(e,t,n);if(g[e])return new p({key:t,iv:n,mode:e});throw new TypeError("invalid suite type")}function w(e,t,n){if(e=e.toLowerCase(),v[e])return m.createDecipheriv(e,t,n);if(g[e])return new p({key:t,iv:n,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}i=l=function(e,t){var n,r;if(e=e.toLowerCase(),v[e])n=v[e].key,r=v[e].iv;else{if(!g[e])throw new TypeError("invalid suite type");n=8*g[e].key,r=g[e].iv}var i=y(t,!1,n,r);return b(e,i.key,i.iv)},u=h=b,r=a=function(e,t){var n,r;if(e=e.toLowerCase(),v[e])n=v[e].key,r=v[e].iv;else{if(!g[e])throw new TypeError("invalid suite type");n=8*g[e].key,r=g[e].iv}var i=y(t,!1,n,r);return w(e,i.key,i.iv)},f=d=w,c=s=function(){return Object.keys(g).concat(m.getCiphers())}})),o.register("1MLQx",(function(e,t){var n=o("4Quo3"),r=o("Qscej"),i=o("67rjf"),a=o("6aUge").Buffer,s={"des-ede3-cbc":r.CBC.instantiate(r.EDE),"des-ede3":r.EDE,"des-ede-cbc":r.CBC.instantiate(r.EDE),"des-ede":r.EDE,"des-cbc":r.CBC.instantiate(r.DES),"des-ecb":r.DES};function u(e){n.call(this);var t,r=e.mode.toLowerCase(),i=s[r];t=e.decrypt?"decrypt":"encrypt";var o=e.key;a.isBuffer(o)||(o=a.from(o)),"des-ede"!==r&&"des-ede-cbc"!==r||(o=a.concat([o,o.slice(0,8)]));var u=e.iv;a.isBuffer(u)||(u=a.from(u)),this._des=i.create({key:o,iv:u,type:t})}s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],e.exports=u,i(u,n),u.prototype._update=function(e){return a.from(this._des.update(e))},u.prototype._final=function(){return a.from(this._des.final())}})),o.register("Qscej",(function(e,n){var r,i,a;t(e.exports,"CBC",(()=>a),(e=>a=e)),t(e.exports,"EDE",(()=>i),(e=>i=e)),t(e.exports,"DES",(()=>r),(e=>r=e)),o("4QRBR"),o("59UVW"),r=o("2v03U"),a=o("2zIgg"),i=o("5hPWB")})),o.register("4QRBR",(function(e,n){var r,i,o,a,s,u,c,l,h,f,d;t(e.exports,"expand",(()=>f),(e=>f=e)),t(e.exports,"permute",(()=>s),(e=>s=e)),t(e.exports,"rip",(()=>h),(e=>h=e)),t(e.exports,"padSplit",(()=>d),(e=>d=e)),t(e.exports,"ip",(()=>l),(e=>l=e)),t(e.exports,"substitute",(()=>i),(e=>i=e)),t(e.exports,"readUInt32BE",(()=>c),(e=>c=e)),t(e.exports,"pc2",(()=>a),(e=>a=e)),t(e.exports,"writeUInt32BE",(()=>o),(e=>o=e)),t(e.exports,"pc1",(()=>r),(e=>r=e)),t(e.exports,"r28shl",(()=>u),(e=>u=e)),c=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},o=function(e,t,n){e[0+n]=t>>>24,e[1+n]=t>>>16&255,e[2+n]=t>>>8&255,e[3+n]=255&t},l=function(e,t,n,r){for(var i=0,o=0,a=6;a>=0;a-=2){for(var s=0;s<=24;s+=8)i<<=1,i|=t>>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=e>>>s+a&1}for(a=6;a>=0;a-=2){for(s=1;s<=25;s+=8)o<<=1,o|=t>>>s+a&1;for(s=1;s<=25;s+=8)o<<=1,o|=e>>>s+a&1}n[r+0]=i>>>0,n[r+1]=o>>>0},h=function(e,t,n,r){for(var i=0,o=0,a=0;a<4;a++)for(var s=24;s>=0;s-=8)i<<=1,i|=t>>>s+a&1,i<<=1,i|=e>>>s+a&1;for(a=4;a<8;a++)for(s=24;s>=0;s-=8)o<<=1,o|=t>>>s+a&1,o<<=1,o|=e>>>s+a&1;n[r+0]=i>>>0,n[r+1]=o>>>0},r=function(e,t,n,r){for(var i=0,o=0,a=7;a>=5;a--){for(var s=0;s<=24;s+=8)i<<=1,i|=t>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=e>>s+a&1}for(s=0;s<=24;s+=8)i<<=1,i|=t>>s+a&1;for(a=1;a<=3;a++){for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1;for(s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1}for(s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1;n[r+0]=i>>>0,n[r+1]=o>>>0},u=function(e,t){return e<<t&268435455|e>>>28-t};var p=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];a=function(e,t,n,r){for(var i=0,o=0,a=p.length>>>1,s=0;s<a;s++)i<<=1,i|=e>>>p[s]&1;for(s=a;s<p.length;s++)o<<=1,o|=t>>>p[s]&1;n[r+0]=i>>>0,n[r+1]=o>>>0},f=function(e,t,n){var r=0,i=0;r=(1&e)<<5|e>>>27;for(var o=23;o>=15;o-=4)r<<=6,r|=e>>>o&63;for(o=11;o>=3;o-=4)i|=e>>>o&63,i<<=6;i|=(31&e)<<1|e>>>31,t[n+0]=r>>>0,t[n+1]=i>>>0};var m=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];i=function(e,t){for(var n=0,r=0;r<4;r++){n<<=4,n|=m[64*r+(e>>>18-6*r&63)]}for(r=0;r<4;r++){n<<=4,n|=m[256+64*r+(t>>>18-6*r&63)]}return n>>>0};var v=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];s=function(e){for(var t=0,n=0;n<v.length;n++)t<<=1,t|=e>>>v[n]&1;return t>>>0},d=function(e,t,n){for(var r=e.toString(2);r.length<t;)r="0"+r;for(var i=[],o=0;o<t;o+=n)i.push(r.slice(o,o+n));return i.join(" ")}})),o.register("59UVW",(function(e,t){"use strict";var n=o("2GaDG");function r(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}e.exports=r,r.prototype._init=function(){},r.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},r.prototype._buffer=function(e,t){for(var n=Math.min(this.buffer.length-this.bufferOff,e.length-t),r=0;r<n;r++)this.buffer[this.bufferOff+r]=e[t+r];return this.bufferOff+=n,n},r.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},r.prototype._updateEncrypt=function(e){var t=0,n=0,r=(this.bufferOff+e.length)/this.blockSize|0,i=new Array(r*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(i,n)));for(var o=e.length-(e.length-t)%this.blockSize;t<o;t+=this.blockSize)this._update(e,t,i,n),n+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return i},r.prototype._updateDecrypt=function(e){for(var t=0,n=0,r=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,i=new Array(r*this.blockSize);r>0;r--)t+=this._buffer(e,t),n+=this._flushBuffer(i,n);return t+=this._buffer(e,t),i},r.prototype.final=function(e){var t,n;return e&&(t=this.update(e)),n="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(n):n},r.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},r.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},r.prototype._unpad=function(e){return e},r.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}})),o.register("2GaDG",(function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=n,n.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}})),o.register("2v03U",(function(e,t){"use strict";var n=o("2GaDG"),r=o("67rjf"),i=o("4QRBR"),a=o("59UVW");function s(){this.tmp=new Array(2),this.keys=null}function u(e){a.call(this,e);var t=new s;this._desState=t,this.deriveKeys(t,e.key)}r(u,a),e.exports=u,u.create=function(e){return new u(e)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];u.prototype.deriveKeys=function(e,t){e.keys=new Array(32),n.equal(t.length,this.blockSize,"Invalid key length");var r=i.readUInt32BE(t,0),o=i.readUInt32BE(t,4);i.pc1(r,o,e.tmp,0),r=e.tmp[0],o=e.tmp[1];for(var a=0;a<e.keys.length;a+=2){var s=c[a>>>1];r=i.r28shl(r,s),o=i.r28shl(o,s),i.pc2(r,o,e.keys,a)}},u.prototype._update=function(e,t,n,r){var o=this._desState,a=i.readUInt32BE(e,t),s=i.readUInt32BE(e,t+4);i.ip(a,s,o.tmp,0),a=o.tmp[0],s=o.tmp[1],"encrypt"===this.type?this._encrypt(o,a,s,o.tmp,0):this._decrypt(o,a,s,o.tmp,0),a=o.tmp[0],s=o.tmp[1],i.writeUInt32BE(n,a,r),i.writeUInt32BE(n,s,r+4)},u.prototype._pad=function(e,t){for(var n=e.length-t,r=t;r<e.length;r++)e[r]=n;return!0},u.prototype._unpad=function(e){for(var t=e[e.length-1],r=e.length-t;r<e.length;r++)n.equal(e[r],t);return e.slice(0,e.length-t)},u.prototype._encrypt=function(e,t,n,r,o){for(var a=t,s=n,u=0;u<e.keys.length;u+=2){var c=e.keys[u],l=e.keys[u+1];i.expand(s,e.tmp,0),c^=e.tmp[0],l^=e.tmp[1];var h=i.substitute(c,l),f=s;s=(a^i.permute(h))>>>0,a=f}i.rip(s,a,r,o)},u.prototype._decrypt=function(e,t,n,r,o){for(var a=n,s=t,u=e.keys.length-2;u>=0;u-=2){var c=e.keys[u],l=e.keys[u+1];i.expand(a,e.tmp,0),c^=e.tmp[0],l^=e.tmp[1];var h=i.substitute(c,l),f=a;a=(s^i.permute(h))>>>0,s=f}i.rip(a,s,r,o)}})),o.register("2zIgg",(function(e,n){var r;t(e.exports,"instantiate",(()=>r),(e=>r=e));var i=o("2GaDG"),a=o("67rjf"),s={};function u(e){i.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}r=function(e){function t(t){e.call(this,t),this._cbcInit()}a(t,e);for(var n=Object.keys(s),r=0;r<n.length;r++){var i=n[r];t.prototype[i]=s[i]}return t.create=function(e){return new t(e)},t},s._cbcInit=function(){var e=new u(this.options.iv);this._cbcState=e},s._update=function(e,t,n,r){var i=this._cbcState,o=this.constructor.super_.prototype,a=i.iv;if("encrypt"===this.type){for(var s=0;s<this.blockSize;s++)a[s]^=e[t+s];o._update.call(this,a,0,n,r);for(s=0;s<this.blockSize;s++)a[s]=n[r+s]}else{o._update.call(this,e,t,n,r);for(s=0;s<this.blockSize;s++)n[r+s]^=a[s];for(s=0;s<this.blockSize;s++)a[s]=e[t+s]}}})),o.register("5hPWB",(function(e,t){"use strict";var n=o("2GaDG"),r=o("67rjf"),i=o("59UVW"),a=o("2v03U");function s(e,t){n.equal(t.length,24,"Invalid key length");var r=t.slice(0,8),i=t.slice(8,16),o=t.slice(16,24);this.ciphers="encrypt"===e?[a.create({type:"encrypt",key:r}),a.create({type:"decrypt",key:i}),a.create({type:"encrypt",key:o})]:[a.create({type:"decrypt",key:o}),a.create({type:"encrypt",key:i}),a.create({type:"decrypt",key:r})]}function u(e){i.call(this,e);var t=new s(this.type,this.options.key);this._edeState=t}r(u,i),e.exports=u,u.create=function(e){return new u(e)},u.prototype._update=function(e,t,n,r){var i=this._edeState;i.ciphers[0]._update(e,t,n,r),i.ciphers[1]._update(n,r,n,r),i.ciphers[2]._update(n,r,n,r)},u.prototype._pad=a.prototype._pad,u.prototype._unpad=a.prototype._unpad})),o.register("4rMrO",(function(e,n){var r,i,a;t(e.exports,"createDecipheriv",(()=>r),(e=>r=e)),t(e.exports,"createCipheriv",(()=>a),(e=>a=e)),t(e.exports,"getCiphers",(()=>i),(e=>i=e));var s=o("ksHxj"),u=o("vtGGt"),c=o("68Ome");s.createCipher,a=s.createCipheriv,u.createDecipher,r=u.createDecipheriv,i=function(){return Object.keys(c)}})),o.register("ksHxj",(function(e,n){var r,i;t(e.exports,"createCipher",(()=>i),(e=>i=e)),t(e.exports,"createCipheriv",(()=>r),(e=>r=e));var a=o("4zJPx"),s=o("12Jf8"),u=o("6aUge").Buffer,c=o("6MOXu"),l=o("4Quo3"),h=o("66Psv"),f=o("1bB8M");function d(e,t,n){l.call(this),this._cache=new m,this._cipher=new h.AES(t),this._prev=u.from(n),this._mode=e,this._autopadding=!0}o("67rjf")(d,l),d.prototype._update=function(e){var t,n;this._cache.add(e);for(var r=[];t=this._cache.get();)n=this._mode.encrypt(this,t),r.push(n);return u.concat(r)};var p=u.alloc(16,16);function m(){this.cache=u.allocUnsafe(0)}function v(e,t,n){var r=a[e.toLowerCase()];if(!r)throw new TypeError("invalid suite type");if("string"==typeof t&&(t=u.from(t)),t.length!==r.key/8)throw new TypeError("invalid key length "+t.length);if("string"==typeof n&&(n=u.from(n)),"GCM"!==r.mode&&n.length!==r.iv)throw new TypeError("invalid iv length "+n.length);return"stream"===r.type?new c(r.module,t,n):"auth"===r.type?new s(r.module,t,n):new d(r.module,t,n)}d.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(p))throw this._cipher.scrub(),new Error("data not multiple of block length")},d.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},m.prototype.add=function(e){this.cache=u.concat([this.cache,e])},m.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},m.prototype.flush=function(){for(var e=16-this.cache.length,t=u.allocUnsafe(e),n=-1;++n<e;)t.writeUInt8(e,n);return u.concat([this.cache,t])},r=v,i=function(e,t){var n=a[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var r=f(t,!1,n.key,n.iv);return v(e,r.key,r.iv)}})),o.register("4zJPx",(function(e,t){var n={ECB:o("3HRlj"),CBC:o("5rLAK"),CFB:o("7cCYr"),CFB8:o("kaRcz"),CFB1:o("5dtWf"),OFB:o("4r8lX"),CTR:o("vzwud"),GCM:o("vzwud")},r=o("68Ome");for(var i in r)r[i].module=n[r[i].mode];e.exports=r})),o.register("3HRlj",(function(e,n){var r,i;t(e.exports,"encrypt",(()=>i),(e=>i=e)),t(e.exports,"decrypt",(()=>r),(e=>r=e)),i=function(e,t){return e._cipher.encryptBlock(t)},r=function(e,t){return e._cipher.decryptBlock(t)}})),o.register("5rLAK",(function(e,n){var r,i;t(e.exports,"encrypt",(()=>r),(e=>r=e)),t(e.exports,"decrypt",(()=>i),(e=>i=e));var a=o("7AG7r");r=function(e,t){var n=a(t,e._prev);return e._prev=e._cipher.encryptBlock(n),e._prev},i=function(e,t){var n=e._prev;e._prev=t;var r=e._cipher.decryptBlock(t);return a(r,n)}})),o.register("7AG7r",(function(e,t){var n=R;e.exports=function(e,t){for(var r=Math.min(e.length,t.length),i=new n(r),o=0;o<r;++o)i[o]=e[o]^t[o];return i}})),o.register("7cCYr",(function(e,n){var r;t(e.exports,"encrypt",(()=>r),(e=>r=e));var i=o("6aUge").Buffer,a=o("7AG7r");function s(e,t,n){var r=t.length,o=a(t,e._cache);return e._cache=e._cache.slice(r),e._prev=i.concat([e._prev,n?t:o]),o}r=function(e,t,n){for(var r,o=i.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=i.allocUnsafe(0)),!(e._cache.length<=t.length)){o=i.concat([o,s(e,t,n)]);break}r=e._cache.length,o=i.concat([o,s(e,t.slice(0,r),n)]),t=t.slice(r)}return o}})),o.register("kaRcz",(function(e,n){var r;t(e.exports,"encrypt",(()=>r),(e=>r=e));var i=o("6aUge").Buffer;function a(e,t,n){var r=e._cipher.encryptBlock(e._prev)[0]^t;return e._prev=i.concat([e._prev.slice(1),i.from([n?t:r])]),r}r=function(e,t,n){for(var r=t.length,o=i.allocUnsafe(r),s=-1;++s<r;)o[s]=a(e,t[s],n);return o}})),o.register("5dtWf",(function(e,n){var r;t(e.exports,"encrypt",(()=>r),(e=>r=e));var i=o("6aUge").Buffer;function a(e,t,n){for(var r,i,o=-1,a=0;++o<8;)r=t&1<<7-o?128:0,a+=(128&(i=e._cipher.encryptBlock(e._prev)[0]^r))>>o%8,e._prev=s(e._prev,n?r:i);return a}function s(e,t){var n=e.length,r=-1,o=i.allocUnsafe(e.length);for(e=i.concat([e,i.from([t])]);++r<n;)o[r]=e[r]<<1|e[r+1]>>7;return o}r=function(e,t,n){for(var r=t.length,o=i.allocUnsafe(r),s=-1;++s<r;)o[s]=a(e,t[s],n);return o}})),o.register("4r8lX",(function(e,n){var r;t(e.exports,"encrypt",(()=>r),(e=>r=e));var i=R,a=o("7AG7r");function s(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}r=function(e,t){for(;e._cache.length<t.length;)e._cache=i.concat([e._cache,s(e)]);var n=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),a(t,n)}})),o.register("vzwud",(function(e,n){var r;t(e.exports,"encrypt",(()=>r),(e=>r=e));var i=o("7AG7r"),a=o("6aUge").Buffer,s=o("7qm3B");function u(e){var t=e._cipher.encryptBlockRaw(e._prev);return s(e._prev),t}r=function(e,t){var n=Math.ceil(t.length/16),r=e._cache.length;e._cache=a.concat([e._cache,a.allocUnsafe(16*n)]);for(var o=0;o<n;o++){var s=u(e),c=r+16*o;e._cache.writeUInt32BE(s[0],c+0),e._cache.writeUInt32BE(s[1],c+4),e._cache.writeUInt32BE(s[2],c+8),e._cache.writeUInt32BE(s[3],c+12)}var l=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),i(t,l)}})),o.register("7qm3B",(function(e,t){e.exports=function(e){for(var t,n=e.length;n--;){if(255!==(t=e.readUInt8(n))){t++,e.writeUInt8(t,n);break}e.writeUInt8(0,n)}}})),o.register("68Ome",(function(e,t){e.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')})),o.register("12Jf8",(function(e,t){var n=o("66Psv"),r=o("6aUge").Buffer,i=o("4Quo3"),a=o("67rjf"),s=o("7DpyR"),u=o("7AG7r"),c=o("7qm3B");function l(e,t,o,a){i.call(this);var u=r.alloc(4,0);this._cipher=new n.AES(t);var l=this._cipher.encryptBlock(u);this._ghash=new s(l),o=function(e,t,n){if(12===t.length)return e._finID=r.concat([t,r.from([0,0,0,1])]),r.concat([t,r.from([0,0,0,2])]);var i=new s(n),o=t.length,a=o%16;i.update(t),a&&(a=16-a,i.update(r.alloc(a,0))),i.update(r.alloc(8,0));var u=8*o,l=r.alloc(8);l.writeUIntBE(u,0,8),i.update(l),e._finID=i.state;var h=r.from(e._finID);return c(h),h}(this,o,l),this._prev=r.from(o),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=a,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}a(l,i),l.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=r.alloc(t,0),this._ghash.update(t))}this._called=!0;var n=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(n),this._len+=e.length,n},l.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var n=0;e.length!==t.length&&n++;for(var r=Math.min(e.length,t.length),i=0;i<r;++i)n+=e[i]^t[i];return n}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},l.prototype.getAuthTag=function(){if(this._decrypt||!r.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},l.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},l.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},e.exports=l})),o.register("66Psv",(function(e,n){var r;t(e.exports,"AES",(()=>r),(e=>r=e));var i=o("6aUge").Buffer;function a(e){i.isBuffer(e)||(e=i.from(e));for(var t=e.length/4|0,n=new Array(t),r=0;r<t;r++)n[r]=e.readUInt32BE(4*r);return n}function s(e){for(;0<e.length;e++)e[0]=0}function u(e,t,n,r,i){for(var o,a,s,u,c=n[0],l=n[1],h=n[2],f=n[3],d=e[0]^t[0],p=e[1]^t[1],m=e[2]^t[2],v=e[3]^t[3],g=4,y=1;y<i;y++)o=c[d>>>24]^l[p>>>16&255]^h[m>>>8&255]^f[255&v]^t[g++],a=c[p>>>24]^l[m>>>16&255]^h[v>>>8&255]^f[255&d]^t[g++],s=c[m>>>24]^l[v>>>16&255]^h[d>>>8&255]^f[255&p]^t[g++],u=c[v>>>24]^l[d>>>16&255]^h[p>>>8&255]^f[255&m]^t[g++],d=o,p=a,m=s,v=u;return o=(r[d>>>24]<<24|r[p>>>16&255]<<16|r[m>>>8&255]<<8|r[255&v])^t[g++],a=(r[p>>>24]<<24|r[m>>>16&255]<<16|r[v>>>8&255]<<8|r[255&d])^t[g++],s=(r[m>>>24]<<24|r[v>>>16&255]<<16|r[d>>>8&255]<<8|r[255&p])^t[g++],u=(r[v>>>24]<<24|r[d>>>16&255]<<16|r[p>>>8&255]<<8|r[255&m])^t[g++],[o>>>=0,a>>>=0,s>>>=0,u>>>=0]}var c=[0,1,2,4,8,16,32,64,128,27,54],l=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var n=[],r=[],i=[[],[],[],[]],o=[[],[],[],[]],a=0,s=0,u=0;u<256;++u){var c=s^s<<1^s<<2^s<<3^s<<4;c=c>>>8^255&c^99,n[a]=c,r[c]=a;var l=e[a],h=e[l],f=e[h],d=257*e[c]^16843008*c;i[0][a]=d<<24|d>>>8,i[1][a]=d<<16|d>>>16,i[2][a]=d<<8|d>>>24,i[3][a]=d,d=16843009*f^65537*h^257*l^16843008*a,o[0][c]=d<<24|d>>>8,o[1][c]=d<<16|d>>>16,o[2][c]=d<<8|d>>>24,o[3][c]=d,0===a?a=s=1:(a=l^e[e[e[f^l]]],s^=e[e[s]])}return{SBOX:n,INV_SBOX:r,SUB_MIX:i,INV_SUB_MIX:o}}();function h(e){this._key=a(e),this._reset()}h.blockSize=16,h.keySize=32,h.prototype.blockSize=h.blockSize,h.prototype.keySize=h.keySize,h.prototype._reset=function(){for(var e=this._key,t=e.length,n=t+6,r=4*(n+1),i=[],o=0;o<t;o++)i[o]=e[o];for(o=t;o<r;o++){var a=i[o-1];o%t==0?(a=a<<8|a>>>24,a=l.SBOX[a>>>24]<<24|l.SBOX[a>>>16&255]<<16|l.SBOX[a>>>8&255]<<8|l.SBOX[255&a],a^=c[o/t|0]<<24):t>6&&o%t==4&&(a=l.SBOX[a>>>24]<<24|l.SBOX[a>>>16&255]<<16|l.SBOX[a>>>8&255]<<8|l.SBOX[255&a]),i[o]=i[o-t]^a}for(var s=[],u=0;u<r;u++){var h=r-u,f=i[h-(u%4?0:4)];s[u]=u<4||h<=4?f:l.INV_SUB_MIX[0][l.SBOX[f>>>24]]^l.INV_SUB_MIX[1][l.SBOX[f>>>16&255]]^l.INV_SUB_MIX[2][l.SBOX[f>>>8&255]]^l.INV_SUB_MIX[3][l.SBOX[255&f]]}this._nRounds=n,this._keySchedule=i,this._invKeySchedule=s},h.prototype.encryptBlockRaw=function(e){return u(e=a(e),this._keySchedule,l.SUB_MIX,l.SBOX,this._nRounds)},h.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),n=i.allocUnsafe(16);return n.writeUInt32BE(t[0],0),n.writeUInt32BE(t[1],4),n.writeUInt32BE(t[2],8),n.writeUInt32BE(t[3],12),n},h.prototype.decryptBlock=function(e){var t=(e=a(e))[1];e[1]=e[3],e[3]=t;var n=u(e,this._invKeySchedule,l.INV_SUB_MIX,l.INV_SBOX,this._nRounds),r=i.allocUnsafe(16);return r.writeUInt32BE(n[0],0),r.writeUInt32BE(n[3],4),r.writeUInt32BE(n[2],8),r.writeUInt32BE(n[1],12),r},h.prototype.scrub=function(){s(this._keySchedule),s(this._invKeySchedule),s(this._key)},r=h})),o.register("7DpyR",(function(e,t){var n=o("6aUge").Buffer,r=n.alloc(16,0);function i(e){var t=n.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function a(e){this.h=e,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}a.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},a.prototype._multiply=function(){for(var e,t,n,r=[(e=this.h).readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)],o=[0,0,0,0],a=-1;++a<128;){for(0!=(this.state[~~(a/8)]&1<<7-a%8)&&(o[0]^=r[0],o[1]^=r[1],o[2]^=r[2],o[3]^=r[3]),n=0!=(1&r[3]),t=3;t>0;t--)r[t]=r[t]>>>1|(1&r[t-1])<<31;r[0]=r[0]>>>1,n&&(r[0]=-520093696^r[0])}this.state=i(o)},a.prototype.update=function(e){var t;for(this.cache=n.concat([this.cache,e]);this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},a.prototype.final=function(e,t){return this.cache.length&&this.ghash(n.concat([this.cache,r],16)),this.ghash(i([0,e,0,t])),this.state},e.exports=a})),o.register("6MOXu",(function(e,t){var n=o("66Psv"),r=o("6aUge").Buffer,i=o("4Quo3");function a(e,t,o,a){i.call(this),this._cipher=new n.AES(t),this._prev=r.from(o),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=a,this._mode=e}o("67rjf")(a,i),a.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},a.prototype._final=function(){this._cipher.scrub()},e.exports=a})),o.register("1bB8M",(function(e,t){var n=o("6aUge").Buffer,r=o("275Ft");e.exports=function(e,t,i,o){if(n.isBuffer(e)||(e=n.from(e,"binary")),t&&(n.isBuffer(t)||(t=n.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var a=i/8,s=n.alloc(a),u=n.alloc(o||0),c=n.alloc(0);a>0||o>0;){var l=new r;l.update(c),l.update(e),t&&l.update(t),c=l.digest();var h=0;if(a>0){var f=s.length-a;h=Math.min(a,c.length),c.copy(s,f,0,h),a-=h}if(h<c.length&&o>0){var d=u.length-o,p=Math.min(o,c.length-h);c.copy(u,d,h,h+p),o-=p}}return c.fill(0),{key:s,iv:u}}})),o.register("vtGGt",(function(e,n){var r,i;t(e.exports,"createDecipheriv",(()=>i),(e=>i=e)),t(e.exports,"createDecipher",(()=>r),(e=>r=e));var a=o("12Jf8"),s=o("6aUge").Buffer,u=o("4zJPx"),c=o("6MOXu"),l=o("4Quo3"),h=o("66Psv"),f=o("1bB8M");function d(e,t,n){l.call(this),this._cache=new p,this._last=void 0,this._cipher=new h.AES(t),this._prev=s.from(n),this._mode=e,this._autopadding=!0}function p(){this.cache=s.allocUnsafe(0)}function m(e,t,n){var r=u[e.toLowerCase()];if(!r)throw new TypeError("invalid suite type");if("string"==typeof n&&(n=s.from(n)),"GCM"!==r.mode&&n.length!==r.iv)throw new TypeError("invalid iv length "+n.length);if("string"==typeof t&&(t=s.from(t)),t.length!==r.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===r.type?new c(r.module,t,n,!0):"auth"===r.type?new a(r.module,t,n,!0):new d(r.module,t,n)}o("67rjf")(d,l),d.prototype._update=function(e){var t,n;this._cache.add(e);for(var r=[];t=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,t),r.push(n);return s.concat(r)},d.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return function(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");var n=-1;for(;++n<t;)if(e[n+(16-t)]!==t)throw new Error("unable to decrypt data");if(16===t)return;return e.slice(0,16-t)}(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},d.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},p.prototype.add=function(e){this.cache=s.concat([this.cache,e])},p.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},p.prototype.flush=function(){if(this.cache.length)return this.cache},r=function(e,t){var n=u[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var r=f(t,!1,n.key,n.iv);return m(e,r.key,r.iv)},i=m})),o.register("56jae",(function(e,n){var r,i,o,a,s,u,c,l;t(e.exports,"des-ede3-cbc",(()=>o),(e=>o=e)),t(e.exports,"des-ecb",(()=>c),(e=>c=e)),t(e.exports,"des-ede3",(()=>s),(e=>s=e)),t(e.exports,"des-ede-cbc",(()=>l),(e=>l=e)),t(e.exports,"des3",(()=>a),(e=>a=e)),t(e.exports,"des-cbc",(()=>r),(e=>r=e)),t(e.exports,"des-ede",(()=>u),(e=>u=e)),t(e.exports,"des",(()=>i),(e=>i=e)),c={key:8,iv:0},r=i={key:8,iv:8},o=a={key:24,iv:8},s={key:24,iv:0},l={key:16,iv:8},u={key:16,iv:0}})),o.register("5KJtD",(function(e,n){var r,i,a,s,u;t(e.exports,"getDiffieHellman",(()=>u),(e=>u=e)),t(e.exports,"createDiffieHellmanGroup",(()=>s),(e=>s=e)),t(e.exports,"createDiffieHellman",(()=>i),(e=>i=e)),t(e.exports,"DiffieHellman",(()=>r),(e=>r=e)),t(e.exports,"DiffieHellmanGroup",(()=>a),(e=>a=e));var c=R,l=o("6N2lY"),h=o("27ei1"),f=o("5UPRX");var d={binary:!0,hex:!0,base64:!0};a=s=u=function(e){var t=new c(h[e].prime,"hex"),n=new c(h[e].gen,"hex");return new f(t,n)},i=r=function e(t,n,r,i){return c.isBuffer(n)||void 0===d[n]?e(t,"binary",n,r):(n=n||"binary",i=i||"binary",r=r||new c([2]),c.isBuffer(r)||(r=new c(r,i)),"number"==typeof t?new f(l(t,r),r,!0):(c.isBuffer(t)||(t=new c(t,n)),new f(t,r,!0)))}})),o.register("6N2lY",(function(e,t){var n=o("3pfpW");e.exports=g,g.simpleSieve=m,g.fermatTest=v;var r=o("6qrKh"),i=new r(24),a=new(o("kpUS4")),s=new r(1),u=new r(2),c=new r(5),l=(new r(16),new r(8),new r(10)),h=new r(3),f=(new r(7),new r(11)),d=new r(4),p=(new r(12),null);function m(e){for(var t=function(){if(null!==p)return p;var e=[];e[0]=2;for(var t=1,n=3;n<1048576;n+=2){for(var r=Math.ceil(Math.sqrt(n)),i=0;i<t&&e[i]<=r&&n%e[i]!=0;i++);t!==i&&e[i]<=r||(e[t++]=n)}return p=e,e}(),n=0;n<t.length;n++)if(0===e.modn(t[n]))return 0===e.cmpn(t[n]);return!0}function v(e){var t=r.mont(e);return 0===u.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function g(e,t){if(e<16)return new r(2===t||5===t?[140,123]:[140,39]);var o,p;for(t=new r(t);;){for(o=new r(n(Math.ceil(e/8)));o.bitLength()>e;)o.ishrn(1);if(o.isEven()&&o.iadd(s),o.testn(1)||o.iadd(u),t.cmp(u)){if(!t.cmp(c))for(;o.mod(l).cmp(h);)o.iadd(d)}else for(;o.mod(i).cmp(f);)o.iadd(d);if(m(p=o.shrn(1))&&m(o)&&v(p)&&v(o)&&a.test(p)&&a.test(o))return o}}})),o.register("6qrKh",(function(e,t){!function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function i(e,t,n){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var a;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:o("3V6Bo").Buffer}catch(e){}function s(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function u(e,t,n){var r=s(e,n);return n-1>=t&&(r|=s(e,n-1)<<4),r}function c(e,t,n,r){for(var i=0,o=Math.min(e.length,n),a=t;a<o;a++){var s=e.charCodeAt(a)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},i.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},i.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,a=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=u(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=u(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},i.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,a=o%r,s=Math.min(o,o-a)+n,u=0,l=n;l<s;l+=r)u=c(e,l,l+r,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=c(e,l,e.length,t),l=0;l<a;l++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,s=67108863&a,u=a/67108864|0;n.words[0]=s;for(var c=1;c<r;c++){for(var l=u>>>26,h=67108863&u,f=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=f;d++){var p=c-d|0;l+=(a=(i=0|e.words[p])*(o=0|t.words[d])+h)/67108864|0,h=67108863&a}n.words[c]=0|h,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}i.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?l[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],d=f[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(e);r=(p=p.idivn(d)).isZero()?m+r:l[c-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return n(void 0!==a),this.toArrayLike(a,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===t,c=new e(o),l=this.clone();if(u){for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[s]=a;for(;s<o;s++)c[s]=0}else{for(s=0;s<o-i;s++)c[s]=0;for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[o-s-1]=a}return c},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},i.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var o=0,a=0;a<r.length;a++)o=(t=(0|n.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<n.length;a++)o=(t=(0|n.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,n){var r,i,o,a=e.words,s=t.words,u=n.words,c=0,l=0|a[0],h=8191&l,f=l>>>13,d=0|a[1],p=8191&d,m=d>>>13,v=0|a[2],g=8191&v,y=v>>>13,b=0|a[3],w=8191&b,_=b>>>13,k=0|a[4],S=8191&k,E=k>>>13,M=0|a[5],T=8191&M,C=M>>>13,I=0|a[6],x=8191&I,A=I>>>13,P=0|a[7],O=8191&P,R=P>>>13,D=0|a[8],N=8191&D,L=D>>>13,j=0|a[9],B=8191&j,F=j>>>13,U=0|s[0],q=8191&U,z=U>>>13,V=0|s[1],W=8191&V,H=V>>>13,K=0|s[2],G=8191&K,Y=K>>>13,Q=0|s[3],J=8191&Q,Z=Q>>>13,X=0|s[4],$=8191&X,ee=X>>>13,te=0|s[5],ne=8191&te,re=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],ue=8191&se,ce=se>>>13,le=0|s[8],he=8191&le,fe=le>>>13,de=0|s[9],pe=8191&de,me=de>>>13;n.negative=e.negative^t.negative,n.length=19;var ve=(c+(r=Math.imul(h,q))|0)+((8191&(i=(i=Math.imul(h,z))+Math.imul(f,q)|0))<<13)|0;c=((o=Math.imul(f,z))+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(p,q),i=(i=Math.imul(p,z))+Math.imul(m,q)|0,o=Math.imul(m,z);var ge=(c+(r=r+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,W)|0))<<13)|0;c=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(g,q),i=(i=Math.imul(g,z))+Math.imul(y,q)|0,o=Math.imul(y,z),r=r+Math.imul(p,W)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,H)|0;var ye=(c+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,G)|0))<<13)|0;c=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(w,q),i=(i=Math.imul(w,z))+Math.imul(_,q)|0,o=Math.imul(_,z),r=r+Math.imul(g,W)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(y,W)|0,o=o+Math.imul(y,H)|0,r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,Y)|0;var be=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,Z)|0)+Math.imul(f,J)|0))<<13)|0;c=((o=o+Math.imul(f,Z)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(S,q),i=(i=Math.imul(S,z))+Math.imul(E,q)|0,o=Math.imul(E,z),r=r+Math.imul(w,W)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,H)|0,r=r+Math.imul(g,G)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(y,G)|0,o=o+Math.imul(y,Y)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var we=(c+(r=r+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(f,$)|0))<<13)|0;c=((o=o+Math.imul(f,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(T,q),i=(i=Math.imul(T,z))+Math.imul(C,q)|0,o=Math.imul(C,z),r=r+Math.imul(S,W)|0,i=(i=i+Math.imul(S,H)|0)+Math.imul(E,W)|0,o=o+Math.imul(E,H)|0,r=r+Math.imul(w,G)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(_,G)|0,o=o+Math.imul(_,Y)|0,r=r+Math.imul(g,J)|0,i=(i=i+Math.imul(g,Z)|0)+Math.imul(y,J)|0,o=o+Math.imul(y,Z)|0,r=r+Math.imul(p,$)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,ee)|0;var _e=(c+(r=r+Math.imul(h,ne)|0)|0)+((8191&(i=(i=i+Math.imul(h,re)|0)+Math.imul(f,ne)|0))<<13)|0;c=((o=o+Math.imul(f,re)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(x,q),i=(i=Math.imul(x,z))+Math.imul(A,q)|0,o=Math.imul(A,z),r=r+Math.imul(T,W)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,H)|0,r=r+Math.imul(S,G)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(E,G)|0,o=o+Math.imul(E,Y)|0,r=r+Math.imul(w,J)|0,i=(i=i+Math.imul(w,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,r=r+Math.imul(g,$)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(y,$)|0,o=o+Math.imul(y,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,re)|0;var ke=(c+(r=r+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,ae)|0)+Math.imul(f,oe)|0))<<13)|0;c=((o=o+Math.imul(f,ae)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(O,q),i=(i=Math.imul(O,z))+Math.imul(R,q)|0,o=Math.imul(R,z),r=r+Math.imul(x,W)|0,i=(i=i+Math.imul(x,H)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,H)|0,r=r+Math.imul(T,G)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,Y)|0,r=r+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,Z)|0,r=r+Math.imul(w,$)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,ee)|0,r=r+Math.imul(g,ne)|0,i=(i=i+Math.imul(g,re)|0)+Math.imul(y,ne)|0,o=o+Math.imul(y,re)|0,r=r+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0;var Se=(c+(r=r+Math.imul(h,ue)|0)|0)+((8191&(i=(i=i+Math.imul(h,ce)|0)+Math.imul(f,ue)|0))<<13)|0;c=((o=o+Math.imul(f,ce)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(N,q),i=(i=Math.imul(N,z))+Math.imul(L,q)|0,o=Math.imul(L,z),r=r+Math.imul(O,W)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,H)|0,r=r+Math.imul(x,G)|0,i=(i=i+Math.imul(x,Y)|0)+Math.imul(A,G)|0,o=o+Math.imul(A,Y)|0,r=r+Math.imul(T,J)|0,i=(i=i+Math.imul(T,Z)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,r=r+Math.imul(S,$)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,ee)|0,r=r+Math.imul(w,ne)|0,i=(i=i+Math.imul(w,re)|0)+Math.imul(_,ne)|0,o=o+Math.imul(_,re)|0,r=r+Math.imul(g,oe)|0,i=(i=i+Math.imul(g,ae)|0)+Math.imul(y,oe)|0,o=o+Math.imul(y,ae)|0,r=r+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0;var Ee=(c+(r=r+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,fe)|0)+Math.imul(f,he)|0))<<13)|0;c=((o=o+Math.imul(f,fe)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(B,q),i=(i=Math.imul(B,z))+Math.imul(F,q)|0,o=Math.imul(F,z),r=r+Math.imul(N,W)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,H)|0,r=r+Math.imul(O,G)|0,i=(i=i+Math.imul(O,Y)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,Y)|0,r=r+Math.imul(x,J)|0,i=(i=i+Math.imul(x,Z)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,r=r+Math.imul(T,$)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(E,ne)|0,o=o+Math.imul(E,re)|0,r=r+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,ae)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,r=r+Math.imul(g,ue)|0,i=(i=i+Math.imul(g,ce)|0)+Math.imul(y,ue)|0,o=o+Math.imul(y,ce)|0,r=r+Math.imul(p,he)|0,i=(i=i+Math.imul(p,fe)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,fe)|0;var Me=(c+(r=r+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,me)|0)+Math.imul(f,pe)|0))<<13)|0;c=((o=o+Math.imul(f,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(B,W),i=(i=Math.imul(B,H))+Math.imul(F,W)|0,o=Math.imul(F,H),r=r+Math.imul(N,G)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(L,G)|0,o=o+Math.imul(L,Y)|0,r=r+Math.imul(O,J)|0,i=(i=i+Math.imul(O,Z)|0)+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,r=r+Math.imul(x,$)|0,i=(i=i+Math.imul(x,ee)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,ee)|0,r=r+Math.imul(T,ne)|0,i=(i=i+Math.imul(T,re)|0)+Math.imul(C,ne)|0,o=o+Math.imul(C,re)|0,r=r+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,ae)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,ae)|0,r=r+Math.imul(w,ue)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,ce)|0,r=r+Math.imul(g,he)|0,i=(i=i+Math.imul(g,fe)|0)+Math.imul(y,he)|0,o=o+Math.imul(y,fe)|0;var Te=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(B,G),i=(i=Math.imul(B,Y))+Math.imul(F,G)|0,o=Math.imul(F,Y),r=r+Math.imul(N,J)|0,i=(i=i+Math.imul(N,Z)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,Z)|0,r=r+Math.imul(O,$)|0,i=(i=i+Math.imul(O,ee)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,ee)|0,r=r+Math.imul(x,ne)|0,i=(i=i+Math.imul(x,re)|0)+Math.imul(A,ne)|0,o=o+Math.imul(A,re)|0,r=r+Math.imul(T,oe)|0,i=(i=i+Math.imul(T,ae)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,ae)|0,r=r+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(E,ue)|0,o=o+Math.imul(E,ce)|0,r=r+Math.imul(w,he)|0,i=(i=i+Math.imul(w,fe)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,fe)|0;var Ce=(c+(r=r+Math.imul(g,pe)|0)|0)+((8191&(i=(i=i+Math.imul(g,me)|0)+Math.imul(y,pe)|0))<<13)|0;c=((o=o+Math.imul(y,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(B,J),i=(i=Math.imul(B,Z))+Math.imul(F,J)|0,o=Math.imul(F,Z),r=r+Math.imul(N,$)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,ee)|0,r=r+Math.imul(O,ne)|0,i=(i=i+Math.imul(O,re)|0)+Math.imul(R,ne)|0,o=o+Math.imul(R,re)|0,r=r+Math.imul(x,oe)|0,i=(i=i+Math.imul(x,ae)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,ae)|0,r=r+Math.imul(T,ue)|0,i=(i=i+Math.imul(T,ce)|0)+Math.imul(C,ue)|0,o=o+Math.imul(C,ce)|0,r=r+Math.imul(S,he)|0,i=(i=i+Math.imul(S,fe)|0)+Math.imul(E,he)|0,o=o+Math.imul(E,fe)|0;var Ie=(c+(r=r+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,me)|0)+Math.imul(_,pe)|0))<<13)|0;c=((o=o+Math.imul(_,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(B,$),i=(i=Math.imul(B,ee))+Math.imul(F,$)|0,o=Math.imul(F,ee),r=r+Math.imul(N,ne)|0,i=(i=i+Math.imul(N,re)|0)+Math.imul(L,ne)|0,o=o+Math.imul(L,re)|0,r=r+Math.imul(O,oe)|0,i=(i=i+Math.imul(O,ae)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,ae)|0,r=r+Math.imul(x,ue)|0,i=(i=i+Math.imul(x,ce)|0)+Math.imul(A,ue)|0,o=o+Math.imul(A,ce)|0,r=r+Math.imul(T,he)|0,i=(i=i+Math.imul(T,fe)|0)+Math.imul(C,he)|0,o=o+Math.imul(C,fe)|0;var xe=(c+(r=r+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(E,pe)|0))<<13)|0;c=((o=o+Math.imul(E,me)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(B,ne),i=(i=Math.imul(B,re))+Math.imul(F,ne)|0,o=Math.imul(F,re),r=r+Math.imul(N,oe)|0,i=(i=i+Math.imul(N,ae)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,ae)|0,r=r+Math.imul(O,ue)|0,i=(i=i+Math.imul(O,ce)|0)+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,r=r+Math.imul(x,he)|0,i=(i=i+Math.imul(x,fe)|0)+Math.imul(A,he)|0,o=o+Math.imul(A,fe)|0;var Ae=(c+(r=r+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(B,oe),i=(i=Math.imul(B,ae))+Math.imul(F,oe)|0,o=Math.imul(F,ae),r=r+Math.imul(N,ue)|0,i=(i=i+Math.imul(N,ce)|0)+Math.imul(L,ue)|0,o=o+Math.imul(L,ce)|0,r=r+Math.imul(O,he)|0,i=(i=i+Math.imul(O,fe)|0)+Math.imul(R,he)|0,o=o+Math.imul(R,fe)|0;var Pe=(c+(r=r+Math.imul(x,pe)|0)|0)+((8191&(i=(i=i+Math.imul(x,me)|0)+Math.imul(A,pe)|0))<<13)|0;c=((o=o+Math.imul(A,me)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,r=Math.imul(B,ue),i=(i=Math.imul(B,ce))+Math.imul(F,ue)|0,o=Math.imul(F,ce),r=r+Math.imul(N,he)|0,i=(i=i+Math.imul(N,fe)|0)+Math.imul(L,he)|0,o=o+Math.imul(L,fe)|0;var Oe=(c+(r=r+Math.imul(O,pe)|0)|0)+((8191&(i=(i=i+Math.imul(O,me)|0)+Math.imul(R,pe)|0))<<13)|0;c=((o=o+Math.imul(R,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(B,he),i=(i=Math.imul(B,fe))+Math.imul(F,he)|0,o=Math.imul(F,fe);var Re=(c+(r=r+Math.imul(N,pe)|0)|0)+((8191&(i=(i=i+Math.imul(N,me)|0)+Math.imul(L,pe)|0))<<13)|0;c=((o=o+Math.imul(L,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var De=(c+(r=Math.imul(B,pe))|0)+((8191&(i=(i=Math.imul(B,me))+Math.imul(F,pe)|0))<<13)|0;return c=((o=Math.imul(F,me))+(i>>>13)|0)+(De>>>26)|0,De&=67108863,u[0]=ve,u[1]=ge,u[2]=ye,u[3]=be,u[4]=we,u[5]=_e,u[6]=ke,u[7]=Se,u[8]=Ee,u[9]=Me,u[10]=Te,u[11]=Ce,u[12]=Ie,u[13]=xe,u[14]=Ae,u[15]=Pe,u[16]=Oe,u[17]=Re,u[18]=De,0!==c&&(u[19]=c,n.length++),n};function m(e,t,n){return(new v).mulp(e,t,n)}function v(e,t){this.x=e,this.y=t}Math.imul||(p=d),i.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):n<63?d(this,e,t):n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,h=(0|e.words[l])*(0|t.words[c]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,e,t):m(this,e,t)},v.prototype.makeRBT=function(e){for(var t=new Array(e),n=i.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},v.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},v.prototype.permute=function(e,t,n,r,i,o){for(var a=0;a<o;a++)r[a]=t[e[a]],i[a]=n[e[a]]},v.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var h=u,f=c,d=0;d<a;d++){var p=n[l+d],m=r[l+d],v=n[l+d+a],g=r[l+d+a],y=h*v-f*g;g=h*g+f*v,v=y,n[l+d]=p+v,r[l+d]=m+g,n[l+d+a]=p-v,r[l+d+a]=m-g,d!==s&&(y=u*h-c*f,f=u*f+c*h,h=y)}},v.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},v.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},v.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},v.prototype.convert13b=function(e,t,r,i){for(var o=0,a=0;a<t;a++)o+=0|e[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},v.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},v.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),f=n.words;f.length=r,this.convert13b(e.words,e.length,a,r),this.convert13b(t.words,t.length,c,r),this.transform(a,o,s,u,r,i),this.transform(c,o,l,h,r,i);for(var d=0;d<r;d++){var p=s[d]*l[d]-u[d]*h[d];u[d]=s[d]*h[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,r),this.transform(s,u,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),m(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[r]=67108863&o}return 0!==t&&(this.words[r]=t,this.length++),this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}(e);if(0===t.length)return new i(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var o=n.sqr();r<t.length;r++,o=o.sqr())0!==t[r]&&(n=n.mul(o));return n},i.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<r;this.words[t]=u|a,a=s>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},i.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},i.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,r){var i,o,a=e.length+r;this._expand(a);var s=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+s;var u=(0|e.words[i])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),o=e,a=0|o.words[o.length-1];0!==(n=26-this._countBits(a))&&(o=o.ushln(n),r.iushln(n),a=0|o.words[o.length-1]);var s,u=r.length-o.length;if("mod"!==t){(s=new i(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=r.clone()._ishlnsubmul(o,1,u);0===l.negative&&(r=l,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|r.words[o.length+h])+(0|r.words[o.length+h-1]);for(f=Math.min(f/a|0,67108863),r._ishlnsubmul(o,f,h);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(o,1,h),r.isZero()||(r.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},i.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(o=s.div.neg()),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(e)),{div:o,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(o=s.div.neg()),{div:o,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t);var o,a,s},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){n(e<=67108863);for(var t=67108864%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},i.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new i(1),a=new i(0),s=new i(0),u=new i(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),h=t.clone();!t.isZero();){for(var f=0,d=1;0==(t.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(l),a.isub(h)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;0==(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(h)),s.iushrn(1),u.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(s),a.isub(u)):(r.isub(t),s.isub(o),u.isub(a))}return{a:s,b:u,gcd:r.iushln(c)}},i.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o,a=new i(1),s=new i(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(s)):(r.isub(t),s.isub(a))}return(o=0===t.cmpn(1)?a:s).cmpn(0)<0&&o.iadd(e),o},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new S(e)},i.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function E(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},r(b,y),b.prototype.split=function(e,t){for(var n=4194303,r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&n,i=10;i<e.length;i++){var a=0|e.words[i];e.words[i-10]=(a&n)<<4|o>>>22,o=a}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(w,y),r(_,y),r(k,y),k.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new w;else if("p192"===e)t=new _;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new k}return g[e]=t,t},S.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},S.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new i(1)).iushrn(2);return this.pow(e,r)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);n(!o.isZero());var s=new i(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,o),f=this.pow(e,o.addn(1).iushrn(1)),d=this.pow(e,o),p=a;0!==d.cmp(s);){for(var m=d,v=0;0!==m.cmp(s);v++)m=m.redSqr();n(v<p);var g=this.pow(h,new i(1).iushln(p-v-1));f=f.redMul(g),h=g.redSqr(),d=d.redMul(h),p=v}return f},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new i(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var o=n[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=u-1;l>=0;l--){var h=c>>l&1;o!==n[0]&&(o=this.sqr(o)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===r&&0===l)&&(o=this.mul(o,n[a]),s=0,a=0)):s=0}u=26}return o},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new E(e)},r(E,S),E.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},E.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},E.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=n.isub(r).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a._forceRed(this)},E.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)})),o.register("kpUS4",(function(e,t){var n=o("5joFU"),r=o("1ma98");function i(e){this.rand=e||new r.Rand}e.exports=i,i.create=function(e){return new i(e)},i.prototype._randbelow=function(e){var t=e.bitLength(),r=Math.ceil(t/8);do{var i=new n(this.rand.generate(r))}while(i.cmp(e)>=0);return i},i.prototype._randrange=function(e,t){var n=t.sub(e);return e.add(this._randbelow(n))},i.prototype.test=function(e,t,r){var i=e.bitLength(),o=n.mont(e),a=new n(1).toRed(o);t||(t=Math.max(1,i/48|0));for(var s=e.subn(1),u=0;!s.testn(u);u++);for(var c=e.shrn(u),l=s.toRed(o);t>0;t--){var h=this._randrange(new n(2),s);r&&r(h);var f=h.toRed(o).redPow(c);if(0!==f.cmp(a)&&0!==f.cmp(l)){for(var d=1;d<u;d++){if(0===(f=f.redSqr()).cmp(a))return!1;if(0===f.cmp(l))break}if(d===u)return!1}}return!0},i.prototype.getDivisor=function(e,t){var r=e.bitLength(),i=n.mont(e),o=new n(1).toRed(i);t||(t=Math.max(1,r/48|0));for(var a=e.subn(1),s=0;!a.testn(s);s++);for(var u=e.shrn(s),c=a.toRed(i);t>0;t--){var l=this._randrange(new n(2),a),h=e.gcd(l);if(0!==h.cmpn(1))return h;var f=l.toRed(i).redPow(u);if(0!==f.cmp(o)&&0!==f.cmp(c)){for(var d=1;d<s;d++){if(0===(f=f.redSqr()).cmp(o))return f.fromRed().subn(1).gcd(e);if(0===f.cmp(c))break}if(d===s)return(f=f.redSqr()).fromRed().subn(1).gcd(e)}}return!1}})),o.register("5joFU",(function(e,t){!function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function i(e,t,n){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var a;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:o("3V6Bo").Buffer}catch(e){}function s(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function u(e,t,n){var r=s(e,n);return n-1>=t&&(r|=s(e,n-1)<<4),r}function c(e,t,n,r){for(var i=0,o=Math.min(e.length,n),a=t;a<o;a++){var s=e.charCodeAt(a)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},i.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},i.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,a=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=u(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=u(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},i.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,a=o%r,s=Math.min(o,o-a)+n,u=0,l=n;l<s;l+=r)u=c(e,l,l+r,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=c(e,l,e.length,t),l=0;l<a;l++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,s=67108863&a,u=a/67108864|0;n.words[0]=s;for(var c=1;c<r;c++){for(var l=u>>>26,h=67108863&u,f=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=f;d++){var p=c-d|0;l+=(a=(i=0|e.words[p])*(o=0|t.words[d])+h)/67108864|0,h=67108863&a}n.words[c]=0|h,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}i.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?l[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],d=f[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(e);r=(p=p.idivn(d)).isZero()?m+r:l[c-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return n(void 0!==a),this.toArrayLike(a,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===t,c=new e(o),l=this.clone();if(u){for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[s]=a;for(;s<o;s++)c[s]=0}else{for(s=0;s<o-i;s++)c[s]=0;for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[o-s-1]=a}return c},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},i.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var o=0,a=0;a<r.length;a++)o=(t=(0|n.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<n.length;a++)o=(t=(0|n.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,n){var r,i,o,a=e.words,s=t.words,u=n.words,c=0,l=0|a[0],h=8191&l,f=l>>>13,d=0|a[1],p=8191&d,m=d>>>13,v=0|a[2],g=8191&v,y=v>>>13,b=0|a[3],w=8191&b,_=b>>>13,k=0|a[4],S=8191&k,E=k>>>13,M=0|a[5],T=8191&M,C=M>>>13,I=0|a[6],x=8191&I,A=I>>>13,P=0|a[7],O=8191&P,R=P>>>13,D=0|a[8],N=8191&D,L=D>>>13,j=0|a[9],B=8191&j,F=j>>>13,U=0|s[0],q=8191&U,z=U>>>13,V=0|s[1],W=8191&V,H=V>>>13,K=0|s[2],G=8191&K,Y=K>>>13,Q=0|s[3],J=8191&Q,Z=Q>>>13,X=0|s[4],$=8191&X,ee=X>>>13,te=0|s[5],ne=8191&te,re=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],ue=8191&se,ce=se>>>13,le=0|s[8],he=8191&le,fe=le>>>13,de=0|s[9],pe=8191&de,me=de>>>13;n.negative=e.negative^t.negative,n.length=19;var ve=(c+(r=Math.imul(h,q))|0)+((8191&(i=(i=Math.imul(h,z))+Math.imul(f,q)|0))<<13)|0;c=((o=Math.imul(f,z))+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(p,q),i=(i=Math.imul(p,z))+Math.imul(m,q)|0,o=Math.imul(m,z);var ge=(c+(r=r+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,W)|0))<<13)|0;c=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(g,q),i=(i=Math.imul(g,z))+Math.imul(y,q)|0,o=Math.imul(y,z),r=r+Math.imul(p,W)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,H)|0;var ye=(c+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,G)|0))<<13)|0;c=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(w,q),i=(i=Math.imul(w,z))+Math.imul(_,q)|0,o=Math.imul(_,z),r=r+Math.imul(g,W)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(y,W)|0,o=o+Math.imul(y,H)|0,r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,Y)|0;var be=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,Z)|0)+Math.imul(f,J)|0))<<13)|0;c=((o=o+Math.imul(f,Z)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(S,q),i=(i=Math.imul(S,z))+Math.imul(E,q)|0,o=Math.imul(E,z),r=r+Math.imul(w,W)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,H)|0,r=r+Math.imul(g,G)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(y,G)|0,o=o+Math.imul(y,Y)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var we=(c+(r=r+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(f,$)|0))<<13)|0;c=((o=o+Math.imul(f,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(T,q),i=(i=Math.imul(T,z))+Math.imul(C,q)|0,o=Math.imul(C,z),r=r+Math.imul(S,W)|0,i=(i=i+Math.imul(S,H)|0)+Math.imul(E,W)|0,o=o+Math.imul(E,H)|0,r=r+Math.imul(w,G)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(_,G)|0,o=o+Math.imul(_,Y)|0,r=r+Math.imul(g,J)|0,i=(i=i+Math.imul(g,Z)|0)+Math.imul(y,J)|0,o=o+Math.imul(y,Z)|0,r=r+Math.imul(p,$)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,ee)|0;var _e=(c+(r=r+Math.imul(h,ne)|0)|0)+((8191&(i=(i=i+Math.imul(h,re)|0)+Math.imul(f,ne)|0))<<13)|0;c=((o=o+Math.imul(f,re)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(x,q),i=(i=Math.imul(x,z))+Math.imul(A,q)|0,o=Math.imul(A,z),r=r+Math.imul(T,W)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,H)|0,r=r+Math.imul(S,G)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(E,G)|0,o=o+Math.imul(E,Y)|0,r=r+Math.imul(w,J)|0,i=(i=i+Math.imul(w,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,r=r+Math.imul(g,$)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(y,$)|0,o=o+Math.imul(y,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,re)|0;var ke=(c+(r=r+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,ae)|0)+Math.imul(f,oe)|0))<<13)|0;c=((o=o+Math.imul(f,ae)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(O,q),i=(i=Math.imul(O,z))+Math.imul(R,q)|0,o=Math.imul(R,z),r=r+Math.imul(x,W)|0,i=(i=i+Math.imul(x,H)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,H)|0,r=r+Math.imul(T,G)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,Y)|0,r=r+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,Z)|0,r=r+Math.imul(w,$)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,ee)|0,r=r+Math.imul(g,ne)|0,i=(i=i+Math.imul(g,re)|0)+Math.imul(y,ne)|0,o=o+Math.imul(y,re)|0,r=r+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0;var Se=(c+(r=r+Math.imul(h,ue)|0)|0)+((8191&(i=(i=i+Math.imul(h,ce)|0)+Math.imul(f,ue)|0))<<13)|0;c=((o=o+Math.imul(f,ce)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(N,q),i=(i=Math.imul(N,z))+Math.imul(L,q)|0,o=Math.imul(L,z),r=r+Math.imul(O,W)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,H)|0,r=r+Math.imul(x,G)|0,i=(i=i+Math.imul(x,Y)|0)+Math.imul(A,G)|0,o=o+Math.imul(A,Y)|0,r=r+Math.imul(T,J)|0,i=(i=i+Math.imul(T,Z)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,r=r+Math.imul(S,$)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,ee)|0,r=r+Math.imul(w,ne)|0,i=(i=i+Math.imul(w,re)|0)+Math.imul(_,ne)|0,o=o+Math.imul(_,re)|0,r=r+Math.imul(g,oe)|0,i=(i=i+Math.imul(g,ae)|0)+Math.imul(y,oe)|0,o=o+Math.imul(y,ae)|0,r=r+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0;var Ee=(c+(r=r+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,fe)|0)+Math.imul(f,he)|0))<<13)|0;c=((o=o+Math.imul(f,fe)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(B,q),i=(i=Math.imul(B,z))+Math.imul(F,q)|0,o=Math.imul(F,z),r=r+Math.imul(N,W)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,H)|0,r=r+Math.imul(O,G)|0,i=(i=i+Math.imul(O,Y)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,Y)|0,r=r+Math.imul(x,J)|0,i=(i=i+Math.imul(x,Z)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,r=r+Math.imul(T,$)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(E,ne)|0,o=o+Math.imul(E,re)|0,r=r+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,ae)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,r=r+Math.imul(g,ue)|0,i=(i=i+Math.imul(g,ce)|0)+Math.imul(y,ue)|0,o=o+Math.imul(y,ce)|0,r=r+Math.imul(p,he)|0,i=(i=i+Math.imul(p,fe)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,fe)|0;var Me=(c+(r=r+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,me)|0)+Math.imul(f,pe)|0))<<13)|0;c=((o=o+Math.imul(f,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(B,W),i=(i=Math.imul(B,H))+Math.imul(F,W)|0,o=Math.imul(F,H),r=r+Math.imul(N,G)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(L,G)|0,o=o+Math.imul(L,Y)|0,r=r+Math.imul(O,J)|0,i=(i=i+Math.imul(O,Z)|0)+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,r=r+Math.imul(x,$)|0,i=(i=i+Math.imul(x,ee)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,ee)|0,r=r+Math.imul(T,ne)|0,i=(i=i+Math.imul(T,re)|0)+Math.imul(C,ne)|0,o=o+Math.imul(C,re)|0,r=r+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,ae)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,ae)|0,r=r+Math.imul(w,ue)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,ce)|0,r=r+Math.imul(g,he)|0,i=(i=i+Math.imul(g,fe)|0)+Math.imul(y,he)|0,o=o+Math.imul(y,fe)|0;var Te=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(B,G),i=(i=Math.imul(B,Y))+Math.imul(F,G)|0,o=Math.imul(F,Y),r=r+Math.imul(N,J)|0,i=(i=i+Math.imul(N,Z)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,Z)|0,r=r+Math.imul(O,$)|0,i=(i=i+Math.imul(O,ee)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,ee)|0,r=r+Math.imul(x,ne)|0,i=(i=i+Math.imul(x,re)|0)+Math.imul(A,ne)|0,o=o+Math.imul(A,re)|0,r=r+Math.imul(T,oe)|0,i=(i=i+Math.imul(T,ae)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,ae)|0,r=r+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(E,ue)|0,o=o+Math.imul(E,ce)|0,r=r+Math.imul(w,he)|0,i=(i=i+Math.imul(w,fe)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,fe)|0;var Ce=(c+(r=r+Math.imul(g,pe)|0)|0)+((8191&(i=(i=i+Math.imul(g,me)|0)+Math.imul(y,pe)|0))<<13)|0;c=((o=o+Math.imul(y,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(B,J),i=(i=Math.imul(B,Z))+Math.imul(F,J)|0,o=Math.imul(F,Z),r=r+Math.imul(N,$)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,ee)|0,r=r+Math.imul(O,ne)|0,i=(i=i+Math.imul(O,re)|0)+Math.imul(R,ne)|0,o=o+Math.imul(R,re)|0,r=r+Math.imul(x,oe)|0,i=(i=i+Math.imul(x,ae)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,ae)|0,r=r+Math.imul(T,ue)|0,i=(i=i+Math.imul(T,ce)|0)+Math.imul(C,ue)|0,o=o+Math.imul(C,ce)|0,r=r+Math.imul(S,he)|0,i=(i=i+Math.imul(S,fe)|0)+Math.imul(E,he)|0,o=o+Math.imul(E,fe)|0;var Ie=(c+(r=r+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,me)|0)+Math.imul(_,pe)|0))<<13)|0;c=((o=o+Math.imul(_,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(B,$),i=(i=Math.imul(B,ee))+Math.imul(F,$)|0,o=Math.imul(F,ee),r=r+Math.imul(N,ne)|0,i=(i=i+Math.imul(N,re)|0)+Math.imul(L,ne)|0,o=o+Math.imul(L,re)|0,r=r+Math.imul(O,oe)|0,i=(i=i+Math.imul(O,ae)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,ae)|0,r=r+Math.imul(x,ue)|0,i=(i=i+Math.imul(x,ce)|0)+Math.imul(A,ue)|0,o=o+Math.imul(A,ce)|0,r=r+Math.imul(T,he)|0,i=(i=i+Math.imul(T,fe)|0)+Math.imul(C,he)|0,o=o+Math.imul(C,fe)|0;var xe=(c+(r=r+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(E,pe)|0))<<13)|0;c=((o=o+Math.imul(E,me)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(B,ne),i=(i=Math.imul(B,re))+Math.imul(F,ne)|0,o=Math.imul(F,re),r=r+Math.imul(N,oe)|0,i=(i=i+Math.imul(N,ae)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,ae)|0,r=r+Math.imul(O,ue)|0,i=(i=i+Math.imul(O,ce)|0)+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,r=r+Math.imul(x,he)|0,i=(i=i+Math.imul(x,fe)|0)+Math.imul(A,he)|0,o=o+Math.imul(A,fe)|0;var Ae=(c+(r=r+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(B,oe),i=(i=Math.imul(B,ae))+Math.imul(F,oe)|0,o=Math.imul(F,ae),r=r+Math.imul(N,ue)|0,i=(i=i+Math.imul(N,ce)|0)+Math.imul(L,ue)|0,o=o+Math.imul(L,ce)|0,r=r+Math.imul(O,he)|0,i=(i=i+Math.imul(O,fe)|0)+Math.imul(R,he)|0,o=o+Math.imul(R,fe)|0;var Pe=(c+(r=r+Math.imul(x,pe)|0)|0)+((8191&(i=(i=i+Math.imul(x,me)|0)+Math.imul(A,pe)|0))<<13)|0;c=((o=o+Math.imul(A,me)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,r=Math.imul(B,ue),i=(i=Math.imul(B,ce))+Math.imul(F,ue)|0,o=Math.imul(F,ce),r=r+Math.imul(N,he)|0,i=(i=i+Math.imul(N,fe)|0)+Math.imul(L,he)|0,o=o+Math.imul(L,fe)|0;var Oe=(c+(r=r+Math.imul(O,pe)|0)|0)+((8191&(i=(i=i+Math.imul(O,me)|0)+Math.imul(R,pe)|0))<<13)|0;c=((o=o+Math.imul(R,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(B,he),i=(i=Math.imul(B,fe))+Math.imul(F,he)|0,o=Math.imul(F,fe);var Re=(c+(r=r+Math.imul(N,pe)|0)|0)+((8191&(i=(i=i+Math.imul(N,me)|0)+Math.imul(L,pe)|0))<<13)|0;c=((o=o+Math.imul(L,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var De=(c+(r=Math.imul(B,pe))|0)+((8191&(i=(i=Math.imul(B,me))+Math.imul(F,pe)|0))<<13)|0;return c=((o=Math.imul(F,me))+(i>>>13)|0)+(De>>>26)|0,De&=67108863,u[0]=ve,u[1]=ge,u[2]=ye,u[3]=be,u[4]=we,u[5]=_e,u[6]=ke,u[7]=Se,u[8]=Ee,u[9]=Me,u[10]=Te,u[11]=Ce,u[12]=Ie,u[13]=xe,u[14]=Ae,u[15]=Pe,u[16]=Oe,u[17]=Re,u[18]=De,0!==c&&(u[19]=c,n.length++),n};function m(e,t,n){return(new v).mulp(e,t,n)}function v(e,t){this.x=e,this.y=t}Math.imul||(p=d),i.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):n<63?d(this,e,t):n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,h=(0|e.words[l])*(0|t.words[c]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,e,t):m(this,e,t)},v.prototype.makeRBT=function(e){for(var t=new Array(e),n=i.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},v.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},v.prototype.permute=function(e,t,n,r,i,o){for(var a=0;a<o;a++)r[a]=t[e[a]],i[a]=n[e[a]]},v.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var h=u,f=c,d=0;d<a;d++){var p=n[l+d],m=r[l+d],v=n[l+d+a],g=r[l+d+a],y=h*v-f*g;g=h*g+f*v,v=y,n[l+d]=p+v,r[l+d]=m+g,n[l+d+a]=p-v,r[l+d+a]=m-g,d!==s&&(y=u*h-c*f,f=u*f+c*h,h=y)}},v.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},v.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},v.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},v.prototype.convert13b=function(e,t,r,i){for(var o=0,a=0;a<t;a++)o+=0|e[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},v.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},v.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),f=n.words;f.length=r,this.convert13b(e.words,e.length,a,r),this.convert13b(t.words,t.length,c,r),this.transform(a,o,s,u,r,i),this.transform(c,o,l,h,r,i);for(var d=0;d<r;d++){var p=s[d]*l[d]-u[d]*h[d];u[d]=s[d]*h[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,r),this.transform(s,u,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),m(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[r]=67108863&o}return 0!==t&&(this.words[r]=t,this.length++),this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}(e);if(0===t.length)return new i(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var o=n.sqr();r<t.length;r++,o=o.sqr())0!==t[r]&&(n=n.mul(o));return n},i.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<r;this.words[t]=u|a,a=s>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},i.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},i.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,r){var i,o,a=e.length+r;this._expand(a);var s=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+s;var u=(0|e.words[i])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),o=e,a=0|o.words[o.length-1];0!==(n=26-this._countBits(a))&&(o=o.ushln(n),r.iushln(n),a=0|o.words[o.length-1]);var s,u=r.length-o.length;if("mod"!==t){(s=new i(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=r.clone()._ishlnsubmul(o,1,u);0===l.negative&&(r=l,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|r.words[o.length+h])+(0|r.words[o.length+h-1]);for(f=Math.min(f/a|0,67108863),r._ishlnsubmul(o,f,h);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(o,1,h),r.isZero()||(r.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},i.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(o=s.div.neg()),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(e)),{div:o,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(o=s.div.neg()),{div:o,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t);var o,a,s},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){n(e<=67108863);for(var t=67108864%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},i.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new i(1),a=new i(0),s=new i(0),u=new i(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),h=t.clone();!t.isZero();){for(var f=0,d=1;0==(t.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(l),a.isub(h)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;0==(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(h)),s.iushrn(1),u.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(s),a.isub(u)):(r.isub(t),s.isub(o),u.isub(a))}return{a:s,b:u,gcd:r.iushln(c)}},i.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o,a=new i(1),s=new i(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(s)):(r.isub(t),s.isub(a))}return(o=0===t.cmpn(1)?a:s).cmpn(0)<0&&o.iadd(e),o},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new S(e)},i.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function E(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},r(b,y),b.prototype.split=function(e,t){for(var n=4194303,r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&n,i=10;i<e.length;i++){var a=0|e.words[i];e.words[i-10]=(a&n)<<4|o>>>22,o=a}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(w,y),r(_,y),r(k,y),k.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new w;else if("p192"===e)t=new _;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new k}return g[e]=t,t},S.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},S.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new i(1)).iushrn(2);return this.pow(e,r)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);n(!o.isZero());var s=new i(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,o),f=this.pow(e,o.addn(1).iushrn(1)),d=this.pow(e,o),p=a;0!==d.cmp(s);){for(var m=d,v=0;0!==m.cmp(s);v++)m=m.redSqr();n(v<p);var g=this.pow(h,new i(1).iushln(p-v-1));f=f.redMul(g),h=g.redSqr(),d=d.redMul(h),p=v}return f},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new i(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var o=n[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=u-1;l>=0;l--){var h=c>>l&1;o!==n[0]&&(o=this.sqr(o)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===r&&0===l)&&(o=this.mul(o,n[a]),s=0,a=0)):s=0}u=26}return o},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new E(e)},r(E,S),E.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},E.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},E.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=n.isub(r).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a._forceRed(this)},E.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)})),o.register("1ma98",(function(e,t){var n;function r(e){this.rand=e}if(e.exports=function(e){return n||(n=new r(null)),n.generate(e)},e.exports.Rand=r,r.prototype.generate=function(e){return this._rand(e)},r.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?r.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?r.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(r.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var i=o("3V6Bo");if("function"!=typeof i.randomBytes)throw new Error("Not supported");r.prototype._rand=function(e){return i.randomBytes(e)}}catch(e){}})),o.register("27ei1",(function(e,t){e.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')})),o.register("5UPRX",(function(e,t){var n=R,r=o("6qrKh"),i=new(o("kpUS4")),a=new r(24),s=new r(11),u=new r(10),c=new r(3),l=new r(7),h=o("6N2lY"),f=o("3pfpW");function d(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this._pub=new r(e),this}function p(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this._priv=new r(e),this}e.exports=v;var m={};function v(e,t,n){this.setGenerator(t),this.__prime=new r(e),this._prime=r.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=d,this.setPrivateKey=p):this._primeCode=8}function g(e,t){var r=new n(e.toArray());return t?r.toString(t):r}Object.defineProperty(v.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(e,t){var n=t.toString("hex"),r=[n,e.toString(16)].join("_");if(r in m)return m[r];var o,f=0;if(e.isEven()||!h.simpleSieve||!h.fermatTest(e)||!i.test(e))return f+=1,f+="02"===n||"05"===n?8:4,m[r]=f,f;switch(i.test(e.shrn(1))||(f+=2),n){case"02":e.mod(a).cmp(s)&&(f+=8);break;case"05":(o=e.mod(u)).cmp(c)&&o.cmp(l)&&(f+=8);break;default:f+=4}return m[r]=f,f}(this.__prime,this.__gen)),this._primeCode}}),v.prototype.generateKeys=function(){return this._priv||(this._priv=new r(f(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},v.prototype.computeSecret=function(e){var t=(e=(e=new r(e)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new n(t.toArray()),o=this.getPrime();if(i.length<o.length){var a=new n(o.length-i.length);a.fill(0),i=n.concat([a,i])}return i},v.prototype.getPublicKey=function(e){return g(this._pub,e)},v.prototype.getPrivateKey=function(e){return g(this._priv,e)},v.prototype.getPrime=function(e){return g(this.__prime,e)},v.prototype.getGenerator=function(e){return g(this._gen,e)},v.prototype.setGenerator=function(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this.__gen=e,this._gen=new r(e),this}})),o.register("67mQp",(function(e,t){var n=o("6aUge").Buffer,r=o("uk3ap"),i=o("4jMg6"),a=o("67rjf"),s=o("3aYJJ"),u=o("1p9Fd"),c=o("1H3g8");function l(e){i.Writable.call(this);var t=c[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=r(t.hash),this._tag=t.id,this._signType=t.sign}function h(e){i.Writable.call(this);var t=c[e];if(!t)throw new Error("Unknown message digest");this._hash=r(t.hash),this._tag=t.id,this._signType=t.sign}function f(e){return new l(e)}function d(e){return new h(e)}Object.keys(c).forEach((function(e){c[e].id=n.from(c[e].id,"hex"),c[e.toLowerCase()]=c[e]})),a(l,i.Writable),l.prototype._write=function(e,t,n){this._hash.update(e),n()},l.prototype.update=function(e,t){return"string"==typeof e&&(e=n.from(e,t)),this._hash.update(e),this},l.prototype.sign=function(e,t){this.end();var n=this._hash.digest(),r=s(n,e,this._hashType,this._signType,this._tag);return t?r.toString(t):r},a(h,i.Writable),h.prototype._write=function(e,t,n){this._hash.update(e),n()},h.prototype.update=function(e,t){return"string"==typeof e&&(e=n.from(e,t)),this._hash.update(e),this},h.prototype.verify=function(e,t,r){"string"==typeof t&&(t=n.from(t,r)),this.end();var i=this._hash.digest();return u(t,i,e,this._signType,this._tag)},e.exports={Sign:f,Verify:d,createSign:f,createVerify:d}})),o.register("3aYJJ",(function(e,t){var n=o("6aUge").Buffer,r=o("5FdWr"),i=o("Ib0dO"),a=o("3JLwK").ec,s=o("yehFW"),u=o("4yHxi"),c=o("5XkmN");function l(e,t,i,o){if((e=n.from(e.toArray())).length<t.byteLength()){var a=n.alloc(t.byteLength()-e.length);e=n.concat([a,e])}var s=i.length,u=function(e,t){e=(e=h(e,t)).mod(t);var r=n.from(e.toArray());if(r.length<t.byteLength()){var i=n.alloc(t.byteLength()-r.length);r=n.concat([i,r])}return r}(i,t),c=n.alloc(s);c.fill(1);var l=n.alloc(s);return l=r(o,l).update(c).update(n.from([0])).update(e).update(u).digest(),c=r(o,l).update(c).digest(),{k:l=r(o,l).update(c).update(n.from([1])).update(e).update(u).digest(),v:c=r(o,l).update(c).digest()}}function h(e,t){var n=new s(e),r=(e.length<<3)-t.bitLength();return r>0&&n.ishrn(r),n}function f(e,t,i){var o,a;do{for(o=n.alloc(0);8*o.length<e.bitLength();)t.v=r(i,t.k).update(t.v).digest(),o=n.concat([o,t.v]);a=h(o,e),t.k=r(i,t.k).update(t.v).update(n.from([0])).digest(),t.v=r(i,t.k).update(t.v).digest()}while(-1!==a.cmp(e));return a}function d(e,t,n,r){return e.toRed(s.mont(n)).redPow(t).fromRed().mod(r)}e.exports=function(e,t,r,o,p){var m=u(t);if(m.curve){if("ecdsa"!==o&&"ecdsa/rsa"!==o)throw new Error("wrong private key type");return function(e,t){var r=c[t.curve.join(".")];if(!r)throw new Error("unknown curve "+t.curve.join("."));var i=new a(r).keyFromPrivate(t.privateKey).sign(e);return n.from(i.toDER())}(e,m)}if("dsa"===m.type){if("dsa"!==o)throw new Error("wrong private key type");return function(e,t,r){var i,o=t.params.priv_key,a=t.params.p,u=t.params.q,c=t.params.g,p=new s(0),m=h(e,u).mod(u),v=!1,g=l(o,u,e,r);for(;!1===v;)p=d(c,i=f(u,g,r),a,u),0===(v=i.invm(u).imul(m.add(o.mul(p))).mod(u)).cmpn(0)&&(v=!1,p=new s(0));return function(e,t){e=e.toArray(),t=t.toArray(),128&e[0]&&(e=[0].concat(e));128&t[0]&&(t=[0].concat(t));var r=[48,e.length+t.length+4,2,e.length];return r=r.concat(e,[2,t.length],t),n.from(r)}(p,v)}(e,m,r)}if("rsa"!==o&&"ecdsa/rsa"!==o)throw new Error("wrong private key type");e=n.concat([p,e]);for(var v=m.modulus.byteLength(),g=[0,1];e.length+g.length+1<v;)g.push(255);g.push(0);for(var y=-1;++y<e.length;)g.push(e[y]);return i(g,m)},e.exports.getKey=l,e.exports.makeKey=f})),o.register("Ib0dO",(function(e,t){var n=R,r=o("yehFW"),i=o("3pfpW");function a(e){var t,n=e.modulus.byteLength();do{t=new r(i(n))}while(t.cmp(e.modulus)>=0||!t.umod(e.prime1)||!t.umod(e.prime2));return t}function s(e,t){var i=function(e){var t=a(e);return{blinder:t.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed(),unblinder:t.invm(e.modulus)}}(t),o=t.modulus.byteLength(),s=new r(e).mul(i.blinder).umod(t.modulus),u=s.toRed(r.mont(t.prime1)),c=s.toRed(r.mont(t.prime2)),l=t.coefficient,h=t.prime1,f=t.prime2,d=u.redPow(t.exponent1).fromRed(),p=c.redPow(t.exponent2).fromRed(),m=d.isub(p).imul(l).umod(h).imul(f);return p.iadd(m).imul(i.unblinder).umod(t.modulus).toArrayLike(n,"be",o)}s.getr=a,e.exports=s})),o.register("yehFW",(function(e,t){!function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function i(e,t,n){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var a;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:o("3V6Bo").Buffer}catch(e){}function s(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function u(e,t,n){var r=s(e,n);return n-1>=t&&(r|=s(e,n-1)<<4),r}function c(e,t,r,i){for(var o=0,a=0,s=Math.min(e.length,r),u=t;u<s;u++){var c=e.charCodeAt(u)-48;o*=i,a=c>=49?c-49+10:c>=17?c-17+10:c,n(c>=0&&a<i,"Invalid character"),o+=a}return o}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},i.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this._strip()},i.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,a=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=u(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=u(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this._strip()},i.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,a=o%r,s=Math.min(o,o-a)+n,u=0,l=n;l<s;l+=r)u=c(e,l,l+r,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=c(e,l,e.length,t),l=0;l<a;l++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype._move=function(e){l(e,this)},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(e){i.prototype.inspect=h}else i.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?f[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=d[e],l=p[e];r="";var h=this.clone();for(h.negative=0;!h.isZero();){var m=h.modrn(l).toString(e);r=(h=h.idivn(l)).isZero()?m+r:f[c-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16,2)},a&&(i.prototype.toBuffer=function(e,t){return this.toArrayLike(a,e,t)}),i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function m(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,s=67108863&a,u=a/67108864|0;n.words[0]=s;for(var c=1;c<r;c++){for(var l=u>>>26,h=67108863&u,f=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=f;d++){var p=c-d|0;l+=(a=(i=0|e.words[p])*(o=0|t.words[d])+h)/67108864|0,h=67108863&a}n.words[c]=0|h,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n._strip()}i.prototype.toArrayLike=function(e,t,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var a=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,o);return this["_toArrayLike"+("le"===t?"LE":"BE")](a,i),a},i.prototype._toArrayLikeLE=function(e,t){for(var n=0,r=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|r;e[n++]=255&a,n<e.length&&(e[n++]=a>>8&255),n<e.length&&(e[n++]=a>>16&255),6===o?(n<e.length&&(e[n++]=a>>24&255),r=0,o=0):(r=a>>>24,o+=2)}if(n<e.length)for(e[n++]=r;n<e.length;)e[n++]=0},i.prototype._toArrayLikeBE=function(e,t){for(var n=e.length-1,r=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|r;e[n--]=255&a,n>=0&&(e[n--]=a>>8&255),n>=0&&(e[n--]=a>>16&255),6===o?(n>=0&&(e[n--]=a>>24&255),r=0,o=0):(r=a>>>24,o+=2)}if(n>=0)for(e[n--]=r;n>=0;)e[n--]=0},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},i.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this._strip()},i.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this._strip()},i.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},i.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var o=0,a=0;a<r.length;a++)o=(t=(0|n.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<n.length;a++)o=(t=(0|n.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var v=function(e,t,n){var r,i,o,a=e.words,s=t.words,u=n.words,c=0,l=0|a[0],h=8191&l,f=l>>>13,d=0|a[1],p=8191&d,m=d>>>13,v=0|a[2],g=8191&v,y=v>>>13,b=0|a[3],w=8191&b,_=b>>>13,k=0|a[4],S=8191&k,E=k>>>13,M=0|a[5],T=8191&M,C=M>>>13,I=0|a[6],x=8191&I,A=I>>>13,P=0|a[7],O=8191&P,R=P>>>13,D=0|a[8],N=8191&D,L=D>>>13,j=0|a[9],B=8191&j,F=j>>>13,U=0|s[0],q=8191&U,z=U>>>13,V=0|s[1],W=8191&V,H=V>>>13,K=0|s[2],G=8191&K,Y=K>>>13,Q=0|s[3],J=8191&Q,Z=Q>>>13,X=0|s[4],$=8191&X,ee=X>>>13,te=0|s[5],ne=8191&te,re=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],ue=8191&se,ce=se>>>13,le=0|s[8],he=8191&le,fe=le>>>13,de=0|s[9],pe=8191&de,me=de>>>13;n.negative=e.negative^t.negative,n.length=19;var ve=(c+(r=Math.imul(h,q))|0)+((8191&(i=(i=Math.imul(h,z))+Math.imul(f,q)|0))<<13)|0;c=((o=Math.imul(f,z))+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(p,q),i=(i=Math.imul(p,z))+Math.imul(m,q)|0,o=Math.imul(m,z);var ge=(c+(r=r+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,W)|0))<<13)|0;c=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(g,q),i=(i=Math.imul(g,z))+Math.imul(y,q)|0,o=Math.imul(y,z),r=r+Math.imul(p,W)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,H)|0;var ye=(c+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,G)|0))<<13)|0;c=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(w,q),i=(i=Math.imul(w,z))+Math.imul(_,q)|0,o=Math.imul(_,z),r=r+Math.imul(g,W)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(y,W)|0,o=o+Math.imul(y,H)|0,r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,Y)|0;var be=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,Z)|0)+Math.imul(f,J)|0))<<13)|0;c=((o=o+Math.imul(f,Z)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(S,q),i=(i=Math.imul(S,z))+Math.imul(E,q)|0,o=Math.imul(E,z),r=r+Math.imul(w,W)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,H)|0,r=r+Math.imul(g,G)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(y,G)|0,o=o+Math.imul(y,Y)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var we=(c+(r=r+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(f,$)|0))<<13)|0;c=((o=o+Math.imul(f,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(T,q),i=(i=Math.imul(T,z))+Math.imul(C,q)|0,o=Math.imul(C,z),r=r+Math.imul(S,W)|0,i=(i=i+Math.imul(S,H)|0)+Math.imul(E,W)|0,o=o+Math.imul(E,H)|0,r=r+Math.imul(w,G)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(_,G)|0,o=o+Math.imul(_,Y)|0,r=r+Math.imul(g,J)|0,i=(i=i+Math.imul(g,Z)|0)+Math.imul(y,J)|0,o=o+Math.imul(y,Z)|0,r=r+Math.imul(p,$)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,ee)|0;var _e=(c+(r=r+Math.imul(h,ne)|0)|0)+((8191&(i=(i=i+Math.imul(h,re)|0)+Math.imul(f,ne)|0))<<13)|0;c=((o=o+Math.imul(f,re)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(x,q),i=(i=Math.imul(x,z))+Math.imul(A,q)|0,o=Math.imul(A,z),r=r+Math.imul(T,W)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,H)|0,r=r+Math.imul(S,G)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(E,G)|0,o=o+Math.imul(E,Y)|0,r=r+Math.imul(w,J)|0,i=(i=i+Math.imul(w,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,r=r+Math.imul(g,$)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(y,$)|0,o=o+Math.imul(y,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,re)|0;var ke=(c+(r=r+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,ae)|0)+Math.imul(f,oe)|0))<<13)|0;c=((o=o+Math.imul(f,ae)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(O,q),i=(i=Math.imul(O,z))+Math.imul(R,q)|0,o=Math.imul(R,z),r=r+Math.imul(x,W)|0,i=(i=i+Math.imul(x,H)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,H)|0,r=r+Math.imul(T,G)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,Y)|0,r=r+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,Z)|0,r=r+Math.imul(w,$)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,ee)|0,r=r+Math.imul(g,ne)|0,i=(i=i+Math.imul(g,re)|0)+Math.imul(y,ne)|0,o=o+Math.imul(y,re)|0,r=r+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0;var Se=(c+(r=r+Math.imul(h,ue)|0)|0)+((8191&(i=(i=i+Math.imul(h,ce)|0)+Math.imul(f,ue)|0))<<13)|0;c=((o=o+Math.imul(f,ce)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(N,q),i=(i=Math.imul(N,z))+Math.imul(L,q)|0,o=Math.imul(L,z),r=r+Math.imul(O,W)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,H)|0,r=r+Math.imul(x,G)|0,i=(i=i+Math.imul(x,Y)|0)+Math.imul(A,G)|0,o=o+Math.imul(A,Y)|0,r=r+Math.imul(T,J)|0,i=(i=i+Math.imul(T,Z)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,r=r+Math.imul(S,$)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,ee)|0,r=r+Math.imul(w,ne)|0,i=(i=i+Math.imul(w,re)|0)+Math.imul(_,ne)|0,o=o+Math.imul(_,re)|0,r=r+Math.imul(g,oe)|0,i=(i=i+Math.imul(g,ae)|0)+Math.imul(y,oe)|0,o=o+Math.imul(y,ae)|0,r=r+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0;var Ee=(c+(r=r+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,fe)|0)+Math.imul(f,he)|0))<<13)|0;c=((o=o+Math.imul(f,fe)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(B,q),i=(i=Math.imul(B,z))+Math.imul(F,q)|0,o=Math.imul(F,z),r=r+Math.imul(N,W)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,H)|0,r=r+Math.imul(O,G)|0,i=(i=i+Math.imul(O,Y)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,Y)|0,r=r+Math.imul(x,J)|0,i=(i=i+Math.imul(x,Z)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,r=r+Math.imul(T,$)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(E,ne)|0,o=o+Math.imul(E,re)|0,r=r+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,ae)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,r=r+Math.imul(g,ue)|0,i=(i=i+Math.imul(g,ce)|0)+Math.imul(y,ue)|0,o=o+Math.imul(y,ce)|0,r=r+Math.imul(p,he)|0,i=(i=i+Math.imul(p,fe)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,fe)|0;var Me=(c+(r=r+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,me)|0)+Math.imul(f,pe)|0))<<13)|0;c=((o=o+Math.imul(f,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(B,W),i=(i=Math.imul(B,H))+Math.imul(F,W)|0,o=Math.imul(F,H),r=r+Math.imul(N,G)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(L,G)|0,o=o+Math.imul(L,Y)|0,r=r+Math.imul(O,J)|0,i=(i=i+Math.imul(O,Z)|0)+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,r=r+Math.imul(x,$)|0,i=(i=i+Math.imul(x,ee)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,ee)|0,r=r+Math.imul(T,ne)|0,i=(i=i+Math.imul(T,re)|0)+Math.imul(C,ne)|0,o=o+Math.imul(C,re)|0,r=r+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,ae)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,ae)|0,r=r+Math.imul(w,ue)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,ce)|0,r=r+Math.imul(g,he)|0,i=(i=i+Math.imul(g,fe)|0)+Math.imul(y,he)|0,o=o+Math.imul(y,fe)|0;var Te=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(B,G),i=(i=Math.imul(B,Y))+Math.imul(F,G)|0,o=Math.imul(F,Y),r=r+Math.imul(N,J)|0,i=(i=i+Math.imul(N,Z)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,Z)|0,r=r+Math.imul(O,$)|0,i=(i=i+Math.imul(O,ee)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,ee)|0,r=r+Math.imul(x,ne)|0,i=(i=i+Math.imul(x,re)|0)+Math.imul(A,ne)|0,o=o+Math.imul(A,re)|0,r=r+Math.imul(T,oe)|0,i=(i=i+Math.imul(T,ae)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,ae)|0,r=r+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(E,ue)|0,o=o+Math.imul(E,ce)|0,r=r+Math.imul(w,he)|0,i=(i=i+Math.imul(w,fe)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,fe)|0;var Ce=(c+(r=r+Math.imul(g,pe)|0)|0)+((8191&(i=(i=i+Math.imul(g,me)|0)+Math.imul(y,pe)|0))<<13)|0;c=((o=o+Math.imul(y,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(B,J),i=(i=Math.imul(B,Z))+Math.imul(F,J)|0,o=Math.imul(F,Z),r=r+Math.imul(N,$)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,ee)|0,r=r+Math.imul(O,ne)|0,i=(i=i+Math.imul(O,re)|0)+Math.imul(R,ne)|0,o=o+Math.imul(R,re)|0,r=r+Math.imul(x,oe)|0,i=(i=i+Math.imul(x,ae)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,ae)|0,r=r+Math.imul(T,ue)|0,i=(i=i+Math.imul(T,ce)|0)+Math.imul(C,ue)|0,o=o+Math.imul(C,ce)|0,r=r+Math.imul(S,he)|0,i=(i=i+Math.imul(S,fe)|0)+Math.imul(E,he)|0,o=o+Math.imul(E,fe)|0;var Ie=(c+(r=r+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,me)|0)+Math.imul(_,pe)|0))<<13)|0;c=((o=o+Math.imul(_,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(B,$),i=(i=Math.imul(B,ee))+Math.imul(F,$)|0,o=Math.imul(F,ee),r=r+Math.imul(N,ne)|0,i=(i=i+Math.imul(N,re)|0)+Math.imul(L,ne)|0,o=o+Math.imul(L,re)|0,r=r+Math.imul(O,oe)|0,i=(i=i+Math.imul(O,ae)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,ae)|0,r=r+Math.imul(x,ue)|0,i=(i=i+Math.imul(x,ce)|0)+Math.imul(A,ue)|0,o=o+Math.imul(A,ce)|0,r=r+Math.imul(T,he)|0,i=(i=i+Math.imul(T,fe)|0)+Math.imul(C,he)|0,o=o+Math.imul(C,fe)|0;var xe=(c+(r=r+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(E,pe)|0))<<13)|0;c=((o=o+Math.imul(E,me)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(B,ne),i=(i=Math.imul(B,re))+Math.imul(F,ne)|0,o=Math.imul(F,re),r=r+Math.imul(N,oe)|0,i=(i=i+Math.imul(N,ae)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,ae)|0,r=r+Math.imul(O,ue)|0,i=(i=i+Math.imul(O,ce)|0)+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,r=r+Math.imul(x,he)|0,i=(i=i+Math.imul(x,fe)|0)+Math.imul(A,he)|0,o=o+Math.imul(A,fe)|0;var Ae=(c+(r=r+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(B,oe),i=(i=Math.imul(B,ae))+Math.imul(F,oe)|0,o=Math.imul(F,ae),r=r+Math.imul(N,ue)|0,i=(i=i+Math.imul(N,ce)|0)+Math.imul(L,ue)|0,o=o+Math.imul(L,ce)|0,r=r+Math.imul(O,he)|0,i=(i=i+Math.imul(O,fe)|0)+Math.imul(R,he)|0,o=o+Math.imul(R,fe)|0;var Pe=(c+(r=r+Math.imul(x,pe)|0)|0)+((8191&(i=(i=i+Math.imul(x,me)|0)+Math.imul(A,pe)|0))<<13)|0;c=((o=o+Math.imul(A,me)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,r=Math.imul(B,ue),i=(i=Math.imul(B,ce))+Math.imul(F,ue)|0,o=Math.imul(F,ce),r=r+Math.imul(N,he)|0,i=(i=i+Math.imul(N,fe)|0)+Math.imul(L,he)|0,o=o+Math.imul(L,fe)|0;var Oe=(c+(r=r+Math.imul(O,pe)|0)|0)+((8191&(i=(i=i+Math.imul(O,me)|0)+Math.imul(R,pe)|0))<<13)|0;c=((o=o+Math.imul(R,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(B,he),i=(i=Math.imul(B,fe))+Math.imul(F,he)|0,o=Math.imul(F,fe);var Re=(c+(r=r+Math.imul(N,pe)|0)|0)+((8191&(i=(i=i+Math.imul(N,me)|0)+Math.imul(L,pe)|0))<<13)|0;c=((o=o+Math.imul(L,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var De=(c+(r=Math.imul(B,pe))|0)+((8191&(i=(i=Math.imul(B,me))+Math.imul(F,pe)|0))<<13)|0;return c=((o=Math.imul(F,me))+(i>>>13)|0)+(De>>>26)|0,De&=67108863,u[0]=ve,u[1]=ge,u[2]=ye,u[3]=be,u[4]=we,u[5]=_e,u[6]=ke,u[7]=Se,u[8]=Ee,u[9]=Me,u[10]=Te,u[11]=Ce,u[12]=Ie,u[13]=xe,u[14]=Ae,u[15]=Pe,u[16]=Oe,u[17]=Re,u[18]=De,0!==c&&(u[19]=c,n.length++),n};function g(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,h=(0|e.words[l])*(0|t.words[c]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n._strip()}function y(e,t,n){return g(e,t,n)}function b(e,t){this.x=e,this.y=t}Math.imul||(v=m),i.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?v(this,e,t):n<63?m(this,e,t):n<1024?g(this,e,t):y(this,e,t)},b.prototype.makeRBT=function(e){for(var t=new Array(e),n=i.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},b.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},b.prototype.permute=function(e,t,n,r,i,o){for(var a=0;a<o;a++)r[a]=t[e[a]],i[a]=n[e[a]]},b.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var h=u,f=c,d=0;d<a;d++){var p=n[l+d],m=r[l+d],v=n[l+d+a],g=r[l+d+a],y=h*v-f*g;g=h*g+f*v,v=y,n[l+d]=p+v,r[l+d]=m+g,n[l+d+a]=p-v,r[l+d+a]=m-g,d!==s&&(y=u*h-c*f,f=u*f+c*h,h=y)}},b.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},b.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},b.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},b.prototype.convert13b=function(e,t,r,i){for(var o=0,a=0;a<t;a++)o+=0|e[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},b.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},b.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),f=n.words;f.length=r,this.convert13b(e.words,e.length,a,r),this.convert13b(t.words,t.length,c,r),this.transform(a,o,s,u,r,i),this.transform(c,o,l,h,r,i);for(var d=0;d<r;d++){var p=s[d]*l[d]-u[d]*h[d];u[d]=s[d]*h[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,r),this.transform(s,u,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n._strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),y(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"==typeof e),n(e<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*e,a=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=a>>>26,this.words[i]=67108863&a}return 0!==r&&(this.words[i]=r,this.length++),t?this.ineg():this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=e.words[r]>>>i&1}return t}(e);if(0===t.length)return new i(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var o=n.sqr();r<t.length;r++,o=o.sqr())0!==t[r]&&(n=n.mul(o));return n},i.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<r;this.words[t]=u|a,a=s>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},i.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},i.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,r){var i,o,a=e.length+r;this._expand(a);var s=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+s;var u=(0|e.words[i])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this._strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},i.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),o=e,a=0|o.words[o.length-1];0!==(n=26-this._countBits(a))&&(o=o.ushln(n),r.iushln(n),a=0|o.words[o.length-1]);var s,u=r.length-o.length;if("mod"!==t){(s=new i(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=r.clone()._ishlnsubmul(o,1,u);0===l.negative&&(r=l,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|r.words[o.length+h])+(0|r.words[o.length+h-1]);for(f=Math.min(f/a|0,67108863),r._ishlnsubmul(o,f,h);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(o,1,h),r.isZero()||(r.negative^=1);s&&(s.words[h]=f)}return s&&s._strip(),r._strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},i.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(o=s.div.neg()),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(e)),{div:o,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(o=s.div.neg()),{div:o,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modrn(e.words[0]))}:this._wordDiv(e,t);var o,a,s},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=67108864%e,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%e;return t?-i:i},i.prototype.modn=function(e){return this.modrn(e)},i.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/e|0,r=o%e}return this._strip(),t?this.ineg():this},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new i(1),a=new i(0),s=new i(0),u=new i(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),h=t.clone();!t.isZero();){for(var f=0,d=1;0==(t.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(l),a.isub(h)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;0==(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(h)),s.iushrn(1),u.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(s),a.isub(u)):(r.isub(t),s.isub(o),u.isub(a))}return{a:s,b:u,gcd:r.iushln(c)}},i.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o,a=new i(1),s=new i(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(s)):(r.isub(t),s.isub(a))}return(o=0===t.cmpn(1)?a:s).cmpn(0)<0&&o.iadd(e),o},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new T(e)},i.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var w={k256:null,p224:null,p192:null,p25519:null};function _(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function k(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function C(e){T.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},_.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},_.prototype.split=function(e,t){e.iushrn(this.n,0,t)},_.prototype.imulK=function(e){return e.imul(this.k)},r(k,_),k.prototype.split=function(e,t){for(var n=4194303,r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&n,i=10;i<e.length;i++){var a=0|e.words[i];e.words[i-10]=(a&n)<<4|o>>>22,o=a}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},k.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(S,_),r(E,_),r(M,_),M.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(w[e])return w[e];var t;if("k256"===e)t=new k;else if("p224"===e)t=new S;else if("p192"===e)t=new E;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new M}return w[e]=t,t},T.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},T.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},T.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},T.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},T.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},T.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},T.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},T.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},T.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},T.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},T.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},T.prototype.isqr=function(e){return this.imul(e,e.clone())},T.prototype.sqr=function(e){return this.mul(e,e)},T.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new i(1)).iushrn(2);return this.pow(e,r)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);n(!o.isZero());var s=new i(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,o),f=this.pow(e,o.addn(1).iushrn(1)),d=this.pow(e,o),p=a;0!==d.cmp(s);){for(var m=d,v=0;0!==m.cmp(s);v++)m=m.redSqr();n(v<p);var g=this.pow(h,new i(1).iushln(p-v-1));f=f.redMul(g),h=g.redSqr(),d=d.redMul(h),p=v}return f},T.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},T.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new i(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var o=n[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=u-1;l>=0;l--){var h=c>>l&1;o!==n[0]&&(o=this.sqr(o)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===r&&0===l)&&(o=this.mul(o,n[a]),s=0,a=0)):s=0}u=26}return o},T.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},T.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new C(e)},r(C,T),C.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},C.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},C.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},C.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=n.isub(r).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a._forceRed(this)},C.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)})),o.register("3JLwK",(function(e,t){"use strict";var n=e.exports;n.version=o("4u2R7").version,n.utils=o("1Pi9K"),n.rand=o("1ma98"),n.curve=o("3acTV"),n.curves=o("2GcAi"),n.ec=o("1gQck"),n.eddsa=o("6KBuy")})),o.register("4u2R7",(function(e,t){e.exports=JSON.parse('{"_from":"elliptic@^6.5.3","_id":"elliptic@6.5.4","_inBundle":false,"_integrity":"sha512-iLhC6ULemrljPZb+QutR5TQGB+pdW6KGD5RSegS+8sorOZT+rdQFbsQFJgvN3eRqNALqJer4oQ16YvJHlU8hzQ==","_location":"/elliptic","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"elliptic@^6.5.3","name":"elliptic","escapedName":"elliptic","rawSpec":"^6.5.3","saveSpec":null,"fetchSpec":"^6.5.3"},"_requiredBy":["/browserify-sign","/create-ecdh"],"_resolved":"https://registry.npmjs.org/elliptic/-/elliptic-6.5.4.tgz","_shasum":"da37cebd31e79a1367e941b592ed1fbebd58abbb","_spec":"elliptic@^6.5.3","_where":"/Users/lazerwalker/Code/azure-mud/node_modules/browserify-sign","author":{"name":"Fedor Indutny","email":"fedor@indutny.com"},"bugs":{"url":"https://github.com/indutny/elliptic/issues"},"bundleDependencies":false,"dependencies":{"bn.js":"^4.11.9","brorand":"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1","inherits":"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},"deprecated":false,"description":"EC cryptography","devDependencies":{"brfs":"^2.0.2","coveralls":"^3.1.0","eslint":"^7.6.0","grunt":"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.5","mocha":"^8.0.1"},"files":["lib"],"homepage":"https://github.com/indutny/elliptic","keywords":["EC","Elliptic","curve","Cryptography"],"license":"MIT","main":"lib/elliptic.js","name":"elliptic","repository":{"type":"git","url":"git+ssh://git@github.com/indutny/elliptic.git"},"scripts":{"lint":"eslint lib test","lint:fix":"npm run lint -- --fix","test":"npm run lint && npm run unit","unit":"istanbul test _mocha --reporter=spec test/index.js","version":"grunt dist && git add dist/"},"version":"6.5.4"}')})),o.register("1Pi9K",(function(e,t){"use strict";var n=e.exports,r=o("4WVjo"),i=o("2GaDG"),a=o("19iZY");n.assert=i,n.toArray=a.toArray,n.zero2=a.zero2,n.toHex=a.toHex,n.encode=a.encode,n.getNAF=function(e,t,n){var r=new Array(Math.max(e.bitLength(),n)+1);r.fill(0);for(var i=1<<t+1,o=e.clone(),a=0;a<r.length;a++){var s,u=o.andln(i-1);o.isOdd()?(s=u>(i>>1)-1?(i>>1)-u:u,o.isubn(s)):s=0,r[a]=s,o.iushrn(1)}return r},n.getJSF=function(e,t){var n=[[],[]];e=e.clone(),t=t.clone();for(var r,i=0,o=0;e.cmpn(-i)>0||t.cmpn(-o)>0;){var a,s,u=e.andln(3)+i&3,c=t.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),a=0==(1&u)?0:3!==(r=e.andln(7)+i&7)&&5!==r||2!==c?u:-u,n[0].push(a),s=0==(1&c)?0:3!==(r=t.andln(7)+o&7)&&5!==r||2!==u?c:-c,n[1].push(s),2*i===a+1&&(i=1-i),2*o===s+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return n},n.cachedProperty=function(e,t,n){var r="_"+t;e.prototype[t]=function(){return void 0!==this[r]?this[r]:this[r]=n.call(this)}},n.parseBytes=function(e){return"string"==typeof e?n.toArray(e,"hex"):e},n.intFromLE=function(e){return new r(e,"hex","le")}})),o.register("4WVjo",(function(e,t){!function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function i(e,t,n){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var a;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:o("3V6Bo").Buffer}catch(e){}function s(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function u(e,t,n){var r=s(e,n);return n-1>=t&&(r|=s(e,n-1)<<4),r}function c(e,t,n,r){for(var i=0,o=Math.min(e.length,n),a=t;a<o;a++){var s=e.charCodeAt(a)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},i.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},i.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,a=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=u(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=u(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},i.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,a=o%r,s=Math.min(o,o-a)+n,u=0,l=n;l<s;l+=r)u=c(e,l,l+r,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=c(e,l,e.length,t),l=0;l<a;l++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,s=67108863&a,u=a/67108864|0;n.words[0]=s;for(var c=1;c<r;c++){for(var l=u>>>26,h=67108863&u,f=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=f;d++){var p=c-d|0;l+=(a=(i=0|e.words[p])*(o=0|t.words[d])+h)/67108864|0,h=67108863&a}n.words[c]=0|h,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}i.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?l[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],d=f[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(e);r=(p=p.idivn(d)).isZero()?m+r:l[c-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return n(void 0!==a),this.toArrayLike(a,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===t,c=new e(o),l=this.clone();if(u){for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[s]=a;for(;s<o;s++)c[s]=0}else{for(s=0;s<o-i;s++)c[s]=0;for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[o-s-1]=a}return c},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},i.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var o=0,a=0;a<r.length;a++)o=(t=(0|n.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<n.length;a++)o=(t=(0|n.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,n){var r,i,o,a=e.words,s=t.words,u=n.words,c=0,l=0|a[0],h=8191&l,f=l>>>13,d=0|a[1],p=8191&d,m=d>>>13,v=0|a[2],g=8191&v,y=v>>>13,b=0|a[3],w=8191&b,_=b>>>13,k=0|a[4],S=8191&k,E=k>>>13,M=0|a[5],T=8191&M,C=M>>>13,I=0|a[6],x=8191&I,A=I>>>13,P=0|a[7],O=8191&P,R=P>>>13,D=0|a[8],N=8191&D,L=D>>>13,j=0|a[9],B=8191&j,F=j>>>13,U=0|s[0],q=8191&U,z=U>>>13,V=0|s[1],W=8191&V,H=V>>>13,K=0|s[2],G=8191&K,Y=K>>>13,Q=0|s[3],J=8191&Q,Z=Q>>>13,X=0|s[4],$=8191&X,ee=X>>>13,te=0|s[5],ne=8191&te,re=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],ue=8191&se,ce=se>>>13,le=0|s[8],he=8191&le,fe=le>>>13,de=0|s[9],pe=8191&de,me=de>>>13;n.negative=e.negative^t.negative,n.length=19;var ve=(c+(r=Math.imul(h,q))|0)+((8191&(i=(i=Math.imul(h,z))+Math.imul(f,q)|0))<<13)|0;c=((o=Math.imul(f,z))+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(p,q),i=(i=Math.imul(p,z))+Math.imul(m,q)|0,o=Math.imul(m,z);var ge=(c+(r=r+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,W)|0))<<13)|0;c=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(g,q),i=(i=Math.imul(g,z))+Math.imul(y,q)|0,o=Math.imul(y,z),r=r+Math.imul(p,W)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,H)|0;var ye=(c+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,G)|0))<<13)|0;c=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(w,q),i=(i=Math.imul(w,z))+Math.imul(_,q)|0,o=Math.imul(_,z),r=r+Math.imul(g,W)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(y,W)|0,o=o+Math.imul(y,H)|0,r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,Y)|0;var be=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,Z)|0)+Math.imul(f,J)|0))<<13)|0;c=((o=o+Math.imul(f,Z)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(S,q),i=(i=Math.imul(S,z))+Math.imul(E,q)|0,o=Math.imul(E,z),r=r+Math.imul(w,W)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,H)|0,r=r+Math.imul(g,G)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(y,G)|0,o=o+Math.imul(y,Y)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var we=(c+(r=r+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(f,$)|0))<<13)|0;c=((o=o+Math.imul(f,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(T,q),i=(i=Math.imul(T,z))+Math.imul(C,q)|0,o=Math.imul(C,z),r=r+Math.imul(S,W)|0,i=(i=i+Math.imul(S,H)|0)+Math.imul(E,W)|0,o=o+Math.imul(E,H)|0,r=r+Math.imul(w,G)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(_,G)|0,o=o+Math.imul(_,Y)|0,r=r+Math.imul(g,J)|0,i=(i=i+Math.imul(g,Z)|0)+Math.imul(y,J)|0,o=o+Math.imul(y,Z)|0,r=r+Math.imul(p,$)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,ee)|0;var _e=(c+(r=r+Math.imul(h,ne)|0)|0)+((8191&(i=(i=i+Math.imul(h,re)|0)+Math.imul(f,ne)|0))<<13)|0;c=((o=o+Math.imul(f,re)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(x,q),i=(i=Math.imul(x,z))+Math.imul(A,q)|0,o=Math.imul(A,z),r=r+Math.imul(T,W)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,H)|0,r=r+Math.imul(S,G)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(E,G)|0,o=o+Math.imul(E,Y)|0,r=r+Math.imul(w,J)|0,i=(i=i+Math.imul(w,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,r=r+Math.imul(g,$)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(y,$)|0,o=o+Math.imul(y,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,re)|0;var ke=(c+(r=r+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,ae)|0)+Math.imul(f,oe)|0))<<13)|0;c=((o=o+Math.imul(f,ae)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(O,q),i=(i=Math.imul(O,z))+Math.imul(R,q)|0,o=Math.imul(R,z),r=r+Math.imul(x,W)|0,i=(i=i+Math.imul(x,H)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,H)|0,r=r+Math.imul(T,G)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,Y)|0,r=r+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,Z)|0,r=r+Math.imul(w,$)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,ee)|0,r=r+Math.imul(g,ne)|0,i=(i=i+Math.imul(g,re)|0)+Math.imul(y,ne)|0,o=o+Math.imul(y,re)|0,r=r+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0;var Se=(c+(r=r+Math.imul(h,ue)|0)|0)+((8191&(i=(i=i+Math.imul(h,ce)|0)+Math.imul(f,ue)|0))<<13)|0;c=((o=o+Math.imul(f,ce)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(N,q),i=(i=Math.imul(N,z))+Math.imul(L,q)|0,o=Math.imul(L,z),r=r+Math.imul(O,W)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,H)|0,r=r+Math.imul(x,G)|0,i=(i=i+Math.imul(x,Y)|0)+Math.imul(A,G)|0,o=o+Math.imul(A,Y)|0,r=r+Math.imul(T,J)|0,i=(i=i+Math.imul(T,Z)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,r=r+Math.imul(S,$)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,ee)|0,r=r+Math.imul(w,ne)|0,i=(i=i+Math.imul(w,re)|0)+Math.imul(_,ne)|0,o=o+Math.imul(_,re)|0,r=r+Math.imul(g,oe)|0,i=(i=i+Math.imul(g,ae)|0)+Math.imul(y,oe)|0,o=o+Math.imul(y,ae)|0,r=r+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0;var Ee=(c+(r=r+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,fe)|0)+Math.imul(f,he)|0))<<13)|0;c=((o=o+Math.imul(f,fe)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(B,q),i=(i=Math.imul(B,z))+Math.imul(F,q)|0,o=Math.imul(F,z),r=r+Math.imul(N,W)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,H)|0,r=r+Math.imul(O,G)|0,i=(i=i+Math.imul(O,Y)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,Y)|0,r=r+Math.imul(x,J)|0,i=(i=i+Math.imul(x,Z)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,r=r+Math.imul(T,$)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(E,ne)|0,o=o+Math.imul(E,re)|0,r=r+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,ae)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,r=r+Math.imul(g,ue)|0,i=(i=i+Math.imul(g,ce)|0)+Math.imul(y,ue)|0,o=o+Math.imul(y,ce)|0,r=r+Math.imul(p,he)|0,i=(i=i+Math.imul(p,fe)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,fe)|0;var Me=(c+(r=r+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,me)|0)+Math.imul(f,pe)|0))<<13)|0;c=((o=o+Math.imul(f,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(B,W),i=(i=Math.imul(B,H))+Math.imul(F,W)|0,o=Math.imul(F,H),r=r+Math.imul(N,G)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(L,G)|0,o=o+Math.imul(L,Y)|0,r=r+Math.imul(O,J)|0,i=(i=i+Math.imul(O,Z)|0)+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,r=r+Math.imul(x,$)|0,i=(i=i+Math.imul(x,ee)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,ee)|0,r=r+Math.imul(T,ne)|0,i=(i=i+Math.imul(T,re)|0)+Math.imul(C,ne)|0,o=o+Math.imul(C,re)|0,r=r+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,ae)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,ae)|0,r=r+Math.imul(w,ue)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,ce)|0,r=r+Math.imul(g,he)|0,i=(i=i+Math.imul(g,fe)|0)+Math.imul(y,he)|0,o=o+Math.imul(y,fe)|0;var Te=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(B,G),i=(i=Math.imul(B,Y))+Math.imul(F,G)|0,o=Math.imul(F,Y),r=r+Math.imul(N,J)|0,i=(i=i+Math.imul(N,Z)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,Z)|0,r=r+Math.imul(O,$)|0,i=(i=i+Math.imul(O,ee)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,ee)|0,r=r+Math.imul(x,ne)|0,i=(i=i+Math.imul(x,re)|0)+Math.imul(A,ne)|0,o=o+Math.imul(A,re)|0,r=r+Math.imul(T,oe)|0,i=(i=i+Math.imul(T,ae)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,ae)|0,r=r+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(E,ue)|0,o=o+Math.imul(E,ce)|0,r=r+Math.imul(w,he)|0,i=(i=i+Math.imul(w,fe)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,fe)|0;var Ce=(c+(r=r+Math.imul(g,pe)|0)|0)+((8191&(i=(i=i+Math.imul(g,me)|0)+Math.imul(y,pe)|0))<<13)|0;c=((o=o+Math.imul(y,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(B,J),i=(i=Math.imul(B,Z))+Math.imul(F,J)|0,o=Math.imul(F,Z),r=r+Math.imul(N,$)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,ee)|0,r=r+Math.imul(O,ne)|0,i=(i=i+Math.imul(O,re)|0)+Math.imul(R,ne)|0,o=o+Math.imul(R,re)|0,r=r+Math.imul(x,oe)|0,i=(i=i+Math.imul(x,ae)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,ae)|0,r=r+Math.imul(T,ue)|0,i=(i=i+Math.imul(T,ce)|0)+Math.imul(C,ue)|0,o=o+Math.imul(C,ce)|0,r=r+Math.imul(S,he)|0,i=(i=i+Math.imul(S,fe)|0)+Math.imul(E,he)|0,o=o+Math.imul(E,fe)|0;var Ie=(c+(r=r+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,me)|0)+Math.imul(_,pe)|0))<<13)|0;c=((o=o+Math.imul(_,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(B,$),i=(i=Math.imul(B,ee))+Math.imul(F,$)|0,o=Math.imul(F,ee),r=r+Math.imul(N,ne)|0,i=(i=i+Math.imul(N,re)|0)+Math.imul(L,ne)|0,o=o+Math.imul(L,re)|0,r=r+Math.imul(O,oe)|0,i=(i=i+Math.imul(O,ae)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,ae)|0,r=r+Math.imul(x,ue)|0,i=(i=i+Math.imul(x,ce)|0)+Math.imul(A,ue)|0,o=o+Math.imul(A,ce)|0,r=r+Math.imul(T,he)|0,i=(i=i+Math.imul(T,fe)|0)+Math.imul(C,he)|0,o=o+Math.imul(C,fe)|0;var xe=(c+(r=r+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(E,pe)|0))<<13)|0;c=((o=o+Math.imul(E,me)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(B,ne),i=(i=Math.imul(B,re))+Math.imul(F,ne)|0,o=Math.imul(F,re),r=r+Math.imul(N,oe)|0,i=(i=i+Math.imul(N,ae)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,ae)|0,r=r+Math.imul(O,ue)|0,i=(i=i+Math.imul(O,ce)|0)+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,r=r+Math.imul(x,he)|0,i=(i=i+Math.imul(x,fe)|0)+Math.imul(A,he)|0,o=o+Math.imul(A,fe)|0;var Ae=(c+(r=r+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(B,oe),i=(i=Math.imul(B,ae))+Math.imul(F,oe)|0,o=Math.imul(F,ae),r=r+Math.imul(N,ue)|0,i=(i=i+Math.imul(N,ce)|0)+Math.imul(L,ue)|0,o=o+Math.imul(L,ce)|0,r=r+Math.imul(O,he)|0,i=(i=i+Math.imul(O,fe)|0)+Math.imul(R,he)|0,o=o+Math.imul(R,fe)|0;var Pe=(c+(r=r+Math.imul(x,pe)|0)|0)+((8191&(i=(i=i+Math.imul(x,me)|0)+Math.imul(A,pe)|0))<<13)|0;c=((o=o+Math.imul(A,me)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,r=Math.imul(B,ue),i=(i=Math.imul(B,ce))+Math.imul(F,ue)|0,o=Math.imul(F,ce),r=r+Math.imul(N,he)|0,i=(i=i+Math.imul(N,fe)|0)+Math.imul(L,he)|0,o=o+Math.imul(L,fe)|0;var Oe=(c+(r=r+Math.imul(O,pe)|0)|0)+((8191&(i=(i=i+Math.imul(O,me)|0)+Math.imul(R,pe)|0))<<13)|0;c=((o=o+Math.imul(R,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(B,he),i=(i=Math.imul(B,fe))+Math.imul(F,he)|0,o=Math.imul(F,fe);var Re=(c+(r=r+Math.imul(N,pe)|0)|0)+((8191&(i=(i=i+Math.imul(N,me)|0)+Math.imul(L,pe)|0))<<13)|0;c=((o=o+Math.imul(L,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var De=(c+(r=Math.imul(B,pe))|0)+((8191&(i=(i=Math.imul(B,me))+Math.imul(F,pe)|0))<<13)|0;return c=((o=Math.imul(F,me))+(i>>>13)|0)+(De>>>26)|0,De&=67108863,u[0]=ve,u[1]=ge,u[2]=ye,u[3]=be,u[4]=we,u[5]=_e,u[6]=ke,u[7]=Se,u[8]=Ee,u[9]=Me,u[10]=Te,u[11]=Ce,u[12]=Ie,u[13]=xe,u[14]=Ae,u[15]=Pe,u[16]=Oe,u[17]=Re,u[18]=De,0!==c&&(u[19]=c,n.length++),n};function m(e,t,n){return(new v).mulp(e,t,n)}function v(e,t){this.x=e,this.y=t}Math.imul||(p=d),i.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):n<63?d(this,e,t):n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,h=(0|e.words[l])*(0|t.words[c]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,e,t):m(this,e,t)},v.prototype.makeRBT=function(e){for(var t=new Array(e),n=i.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},v.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},v.prototype.permute=function(e,t,n,r,i,o){for(var a=0;a<o;a++)r[a]=t[e[a]],i[a]=n[e[a]]},v.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var h=u,f=c,d=0;d<a;d++){var p=n[l+d],m=r[l+d],v=n[l+d+a],g=r[l+d+a],y=h*v-f*g;g=h*g+f*v,v=y,n[l+d]=p+v,r[l+d]=m+g,n[l+d+a]=p-v,r[l+d+a]=m-g,d!==s&&(y=u*h-c*f,f=u*f+c*h,h=y)}},v.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},v.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},v.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},v.prototype.convert13b=function(e,t,r,i){for(var o=0,a=0;a<t;a++)o+=0|e[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},v.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},v.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),f=n.words;f.length=r,this.convert13b(e.words,e.length,a,r),this.convert13b(t.words,t.length,c,r),this.transform(a,o,s,u,r,i),this.transform(c,o,l,h,r,i);for(var d=0;d<r;d++){var p=s[d]*l[d]-u[d]*h[d];u[d]=s[d]*h[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,r),this.transform(s,u,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),m(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[r]=67108863&o}return 0!==t&&(this.words[r]=t,this.length++),this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}(e);if(0===t.length)return new i(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var o=n.sqr();r<t.length;r++,o=o.sqr())0!==t[r]&&(n=n.mul(o));return n},i.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<r;this.words[t]=u|a,a=s>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},i.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},i.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,r){var i,o,a=e.length+r;this._expand(a);var s=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+s;var u=(0|e.words[i])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),o=e,a=0|o.words[o.length-1];0!==(n=26-this._countBits(a))&&(o=o.ushln(n),r.iushln(n),a=0|o.words[o.length-1]);var s,u=r.length-o.length;if("mod"!==t){(s=new i(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=r.clone()._ishlnsubmul(o,1,u);0===l.negative&&(r=l,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|r.words[o.length+h])+(0|r.words[o.length+h-1]);for(f=Math.min(f/a|0,67108863),r._ishlnsubmul(o,f,h);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(o,1,h),r.isZero()||(r.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},i.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(o=s.div.neg()),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(e)),{div:o,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(o=s.div.neg()),{div:o,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t);var o,a,s},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){n(e<=67108863);for(var t=67108864%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},i.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new i(1),a=new i(0),s=new i(0),u=new i(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),h=t.clone();!t.isZero();){for(var f=0,d=1;0==(t.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(l),a.isub(h)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;0==(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(h)),s.iushrn(1),u.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(s),a.isub(u)):(r.isub(t),s.isub(o),u.isub(a))}return{a:s,b:u,gcd:r.iushln(c)}},i.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o,a=new i(1),s=new i(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(s)):(r.isub(t),s.isub(a))}return(o=0===t.cmpn(1)?a:s).cmpn(0)<0&&o.iadd(e),o},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new S(e)},i.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function E(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},r(b,y),b.prototype.split=function(e,t){for(var n=4194303,r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&n,i=10;i<e.length;i++){var a=0|e.words[i];e.words[i-10]=(a&n)<<4|o>>>22,o=a}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(w,y),r(_,y),r(k,y),k.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new w;else if("p192"===e)t=new _;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new k}return g[e]=t,t},S.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},S.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new i(1)).iushrn(2);return this.pow(e,r)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);n(!o.isZero());var s=new i(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,o),f=this.pow(e,o.addn(1).iushrn(1)),d=this.pow(e,o),p=a;0!==d.cmp(s);){for(var m=d,v=0;0!==m.cmp(s);v++)m=m.redSqr();n(v<p);var g=this.pow(h,new i(1).iushln(p-v-1));f=f.redMul(g),h=g.redSqr(),d=d.redMul(h),p=v}return f},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new i(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var o=n[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=u-1;l>=0;l--){var h=c>>l&1;o!==n[0]&&(o=this.sqr(o)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===r&&0===l)&&(o=this.mul(o,n[a]),s=0,a=0)):s=0}u=26}return o},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new E(e)},r(E,S),E.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},E.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},E.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=n.isub(r).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a._forceRed(this)},E.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)})),o.register("19iZY",(function(e,t){"use strict";var n=e.exports;function r(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",n=0;n<e.length;n++)t+=r(e[n].toString(16));return t}n.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"!=typeof e){for(var r=0;r<e.length;r++)n[r]=0|e[r];return n}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(r=0;r<e.length;r+=2)n.push(parseInt(e[r]+e[r+1],16))}else for(r=0;r<e.length;r++){var i=e.charCodeAt(r),o=i>>8,a=255&i;o?n.push(o,a):n.push(a)}return n},n.zero2=r,n.toHex=i,n.encode=function(e,t){return"hex"===t?i(e):e}})),o.register("3acTV",(function(e,t){"use strict";var n=e.exports;n.base=o("48BVT"),n.short=o("1zMX6"),n.mont=o("4D4cu"),n.edwards=o("2e86D")})),o.register("48BVT",(function(e,t){"use strict";var n=o("4WVjo"),r=o("1Pi9K"),i=r.getNAF,a=r.getJSF,s=r.assert;function u(e,t){this.type=e,this.p=new n(t.p,16),this.red=t.prime?n.red(t.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=t.n&&new n(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function c(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(e,t){s(e.precomputed);var n=e._getDoubles(),r=i(t,1,this._bitLength),o=(1<<n.step+1)-(n.step%2==0?2:1);o/=3;var a,u,c=[];for(a=0;a<r.length;a+=n.step){u=0;for(var l=a+n.step-1;l>=a;l--)u=(u<<1)+r[l];c.push(u)}for(var h=this.jpoint(null,null,null),f=this.jpoint(null,null,null),d=o;d>0;d--){for(a=0;a<c.length;a++)(u=c[a])===d?f=f.mixedAdd(n.points[a]):u===-d&&(f=f.mixedAdd(n.points[a].neg()));h=h.add(f)}return h.toP()},u.prototype._wnafMul=function(e,t){var n=4,r=e._getNAFPoints(n);n=r.wnd;for(var o=r.points,a=i(t,n,this._bitLength),u=this.jpoint(null,null,null),c=a.length-1;c>=0;c--){for(var l=0;c>=0&&0===a[c];c--)l++;if(c>=0&&l++,u=u.dblp(l),c<0)break;var h=a[c];s(0!==h),u="affine"===e.type?h>0?u.mixedAdd(o[h-1>>1]):u.mixedAdd(o[-h-1>>1].neg()):h>0?u.add(o[h-1>>1]):u.add(o[-h-1>>1].neg())}return"affine"===e.type?u.toP():u},u.prototype._wnafMulAdd=function(e,t,n,r,o){var s,u,c,l=this._wnafT1,h=this._wnafT2,f=this._wnafT3,d=0;for(s=0;s<r;s++){var p=(c=t[s])._getNAFPoints(e);l[s]=p.wnd,h[s]=p.points}for(s=r-1;s>=1;s-=2){var m=s-1,v=s;if(1===l[m]&&1===l[v]){var g=[t[m],null,null,t[v]];0===t[m].y.cmp(t[v].y)?(g[1]=t[m].add(t[v]),g[2]=t[m].toJ().mixedAdd(t[v].neg())):0===t[m].y.cmp(t[v].y.redNeg())?(g[1]=t[m].toJ().mixedAdd(t[v]),g[2]=t[m].add(t[v].neg())):(g[1]=t[m].toJ().mixedAdd(t[v]),g[2]=t[m].toJ().mixedAdd(t[v].neg()));var y=[-3,-1,-5,-7,0,7,5,1,3],b=a(n[m],n[v]);for(d=Math.max(b[0].length,d),f[m]=new Array(d),f[v]=new Array(d),u=0;u<d;u++){var w=0|b[0][u],_=0|b[1][u];f[m][u]=y[3*(w+1)+(_+1)],f[v][u]=0,h[m]=g}}else f[m]=i(n[m],l[m],this._bitLength),f[v]=i(n[v],l[v],this._bitLength),d=Math.max(f[m].length,d),d=Math.max(f[v].length,d)}var k=this.jpoint(null,null,null),S=this._wnafT4;for(s=d;s>=0;s--){for(var E=0;s>=0;){var M=!0;for(u=0;u<r;u++)S[u]=0|f[u][s],0!==S[u]&&(M=!1);if(!M)break;E++,s--}if(s>=0&&E++,k=k.dblp(E),s<0)break;for(u=0;u<r;u++){var T=S[u];0!==T&&(T>0?c=h[u][T-1>>1]:T<0&&(c=h[u][-T-1>>1].neg()),k="affine"===c.type?k.mixedAdd(c):k.add(c))}}for(s=0;s<r;s++)h[s]=null;return o?k:k.toP()},u.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(e,t){e=r.toArray(e,t);var n=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*n)return 6===e[0]?s(e[e.length-1]%2==0):7===e[0]&&s(e[e.length-1]%2==1),this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));if((2===e[0]||3===e[0])&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),3===e[0]);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(e){return this.encode(e,!0)},c.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))},c.prototype.encode=function(e,t){return r.encode(this._encode(t),e)},c.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},c.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},c.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)r=r.dbl();n.push(r)}return{step:e,points:n}},c.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,r=1===n?null:this.dbl(),i=1;i<n;i++)t[i]=t[i-1].add(r);return{wnd:e,points:t}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}})),o.register("1zMX6",(function(e,t){"use strict";var n=o("1Pi9K"),r=o("4WVjo"),i=o("67rjf"),a=o("48BVT"),s=n.assert;function u(e){a.call(this,"short",e),this.a=new r(e.a,16).toRed(this.red),this.b=new r(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(e,t,n,i){a.BasePoint.call(this,e,"affine"),null===t&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new r(t,16),this.y=new r(n,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function l(e,t,n,i){a.BasePoint.call(this,e,"jacobian"),null===t&&null===n&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new r(0)):(this.x=new r(t,16),this.y=new r(n,16),this.z=new r(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}i(u,a),e.exports=u,u.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,n;if(e.beta)t=new r(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=(t=i[0].cmp(i[1])<0?i[0]:i[1]).toRed(this.red)}if(e.lambda)n=new r(e.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))?n=o[0]:(n=o[1],s(0===this.g.mul(n).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:n,basis:e.basis?e.basis.map((function(e){return{a:new r(e.a,16),b:new r(e.b,16)}})):this._getEndoBasis(n)}}},u.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:r.mont(e),n=new r(2).toRed(t).redInvm(),i=n.redNeg(),o=new r(3).toRed(t).redNeg().redSqrt().redMul(n);return[i.redAdd(o).fromRed(),i.redSub(o).fromRed()]},u.prototype._getEndoBasis=function(e){for(var t,n,i,o,a,s,u,c,l,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=e,d=this.n.clone(),p=new r(1),m=new r(0),v=new r(0),g=new r(1),y=0;0!==f.cmpn(0);){var b=d.div(f);c=d.sub(b.mul(f)),l=v.sub(b.mul(p));var w=g.sub(b.mul(m));if(!i&&c.cmp(h)<0)t=u.neg(),n=p,i=c.neg(),o=l;else if(i&&2==++y)break;u=c,d=f,f=c,v=p,p=l,g=m,m=w}a=c.neg(),s=l;var _=i.sqr().add(o.sqr());return a.sqr().add(s.sqr()).cmp(_)>=0&&(a=t,s=n),i.negative&&(i=i.neg(),o=o.neg()),a.negative&&(a=a.neg(),s=s.neg()),[{a:i,b:o},{a:a,b:s}]},u.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],r=t[1],i=r.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=i.mul(n.a),s=o.mul(r.a),u=i.mul(n.b),c=o.mul(r.b);return{k1:e.sub(a).sub(s),k2:u.add(c).neg()}},u.prototype.pointFromX=function(e,t){(e=new r(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(0!==i.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var o=i.fromRed().isOdd();return(t&&!o||!t&&o)&&(i=i.redNeg()),this.point(e,i)},u.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,r=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(r).redIAdd(this.b);return 0===n.redSqr().redISub(i).cmpn(0)},u.prototype._endoWnafMulAdd=function(e,t,n){for(var r=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),s=e[o],u=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),r[2*o]=s,r[2*o+1]=u,i[2*o]=a.k1,i[2*o+1]=a.k2}for(var c=this._wnafMulAdd(1,r,i,2*o,n),l=0;l<2*o;l++)r[l]=null,i[l]=null;return c},i(c,a.BasePoint),u.prototype.point=function(e,t,n){return new c(this,e,t,n)},u.prototype.pointFromJSON=function(e,t){return c.fromJSON(this,e,t)},c.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,r=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(r)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(r)}}}return t}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(e,t,n){"string"==typeof t&&(t=JSON.parse(t));var r=e.point(t[0],t[1],n);if(!t[2])return r;function i(t){return e.point(t[0],t[1],n)}var o=t[2];return r.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[r].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[r].concat(o.naf.points.map(i))}},r},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),r=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,r)},c.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),r=e.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(r),o=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(e){return e=new r(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},c.prototype.mulAdd=function(e,t,n){var r=[this,t],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i):this.curve._wnafMulAdd(1,r,i,2)},c.prototype.jmulAdd=function(e,t,n){var r=[this,t],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i,!0):this.curve._wnafMulAdd(1,r,i,2,!0)},c.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},c.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,r=function(e){return e.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(r)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(r)}}}return t},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},i(l,a.BasePoint),u.prototype.jpoint=function(e,t,n){return new l(this,e,t,n)},l.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),r=this.y.redMul(t).redMul(e);return this.curve.point(n,r)},l.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},l.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(t),i=e.x.redMul(n),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),s=r.redSub(i),u=o.redSub(a);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),l=c.redMul(s),h=r.redMul(c),f=u.redSqr().redIAdd(l).redISub(h).redISub(h),d=u.redMul(h.redISub(f)).redISub(o.redMul(l)),p=this.z.redMul(e.z).redMul(s);return this.curve.jpoint(f,d,p)},l.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,r=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),a=n.redSub(r),s=i.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),c=u.redMul(a),l=n.redMul(u),h=s.redSqr().redIAdd(c).redISub(l).redISub(l),f=s.redMul(l.redISub(h)).redISub(i.redMul(c)),d=this.z.redMul(a);return this.curve.jpoint(h,f,d)},l.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var r=this.curve.a,i=this.curve.tinv,o=this.x,a=this.y,s=this.z,u=s.redSqr().redSqr(),c=a.redAdd(a);for(t=0;t<e;t++){var l=o.redSqr(),h=c.redSqr(),f=h.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(r.redMul(u)),p=o.redMul(h),m=d.redSqr().redISub(p.redAdd(p)),v=p.redISub(m),g=d.redMul(v);g=g.redIAdd(g).redISub(f);var y=c.redMul(s);t+1<e&&(u=u.redMul(f)),o=m,s=y,c=g}return this.curve.jpoint(o,c.redMul(i),s)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},l.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(r).redISub(o);a=a.redIAdd(a);var s=r.redAdd(r).redIAdd(r),u=s.redSqr().redISub(a).redISub(a),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=u,t=s.redMul(a.redISub(u)).redISub(c),n=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),h=this.y.redSqr(),f=h.redSqr(),d=this.x.redAdd(h).redSqr().redISub(l).redISub(f);d=d.redIAdd(d);var p=l.redAdd(l).redIAdd(l),m=p.redSqr(),v=f.redIAdd(f);v=(v=v.redIAdd(v)).redIAdd(v),e=m.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(v),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(e,t,n)},l.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(r).redISub(o);a=a.redIAdd(a);var s=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),u=s.redSqr().redISub(a).redISub(a);e=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=s.redMul(a.redISub(u)).redISub(c),n=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),h=this.y.redSqr(),f=this.x.redMul(h),d=this.x.redSub(l).redMul(this.x.redAdd(l));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),m=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(m),n=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var v=h.redSqr();v=(v=(v=v.redIAdd(v)).redIAdd(v)).redIAdd(v),t=d.redMul(p.redISub(e)).redISub(v)}return this.curve.jpoint(e,t,n)},l.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,r=this.z,i=r.redSqr().redSqr(),o=t.redSqr(),a=n.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),u=t.redAdd(t),c=(u=u.redIAdd(u)).redMul(a),l=s.redSqr().redISub(c.redAdd(c)),h=c.redISub(l),f=a.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=s.redMul(h).redISub(f),p=n.redAdd(n).redMul(r);return this.curve.jpoint(l,d,p)},l.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),r=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(r),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),u=r.redIAdd(r);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(u),l=t.redMul(c);l=(l=l.redIAdd(l)).redIAdd(l);var h=this.x.redMul(s).redISub(l);h=(h=h.redIAdd(h)).redIAdd(h);var f=this.y.redMul(c.redMul(u.redISub(c)).redISub(a.redMul(s)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(a).redSqr().redISub(n).redISub(s);return this.curve.jpoint(h,f,d)},l.prototype.mul=function(e,t){return e=new r(e,t),this.curve._wnafMul(this,e)},l.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(0!==this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0))return!1;var r=t.redMul(this.z),i=n.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(r)).cmpn(0)},l.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(n))return!0;for(var r=e.clone(),i=this.curve.redN.redMul(t);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(i),0===this.x.cmp(n))return!0}},l.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}})),o.register("4D4cu",(function(e,t){"use strict";var n=o("4WVjo"),r=o("67rjf"),i=o("48BVT"),a=o("1Pi9K");function s(e){i.call(this,"mont",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(e,t,r){i.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(t,16),this.z=new n(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}r(s,i),e.exports=s,s.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),r=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t);return 0===r.redSqrt().redSqr().cmp(r)},r(u,i.BasePoint),s.prototype.decodePoint=function(e,t){return this.point(a.toArray(e,t),1)},s.prototype.point=function(e,t){return new u(this,e,t)},s.prototype.pointFromJSON=function(e){return u.fromJSON(this,e)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(e,t){return new u(e,t[0],t[1]||e.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},u.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),n=e.redSub(t),r=e.redMul(t),i=n.redMul(t.redAdd(this.curve.a24.redMul(n)));return this.curve.point(r,i)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),r=this.x.redSub(this.z),i=e.x.redAdd(e.z),o=e.x.redSub(e.z).redMul(n),a=i.redMul(r),s=t.z.redMul(o.redAdd(a).redSqr()),u=t.x.redMul(o.redISub(a).redSqr());return this.curve.point(s,u)},u.prototype.mul=function(e){for(var t=e.clone(),n=this,r=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(n=n.diffAdd(r,this),r=r.dbl()):(r=n.diffAdd(r,this),n=n.dbl());return r},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}})),o.register("2e86D",(function(e,t){"use strict";var n=o("1Pi9K"),r=o("4WVjo"),i=o("67rjf"),a=o("48BVT"),s=n.assert;function u(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,a.call(this,"edwards",e),this.a=new r(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new r(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new r(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function c(e,t,n,i,o){a.BasePoint.call(this,e,"projective"),null===t&&null===n&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new r(t,16),this.y=new r(n,16),this.z=i?new r(i,16):this.curve.one,this.t=o&&new r(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}i(u,a),e.exports=u,u.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},u.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},u.prototype.jpoint=function(e,t,n,r){return this.point(e,t,n,r)},u.prototype.pointFromX=function(e,t){(e=new r(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),o=this.one.redSub(this.c2.redMul(this.d).redMul(n)),a=i.redMul(o.redInvm()),s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var u=s.fromRed().isOdd();return(t&&!u||!t&&u)&&(s=s.redNeg()),this.point(e,s)},u.prototype.pointFromY=function(e,t){(e=new r(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),o=n.redMul(this.d).redMul(this.c2).redSub(this.a),a=i.redMul(o.redInvm());if(0===a.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==t&&(s=s.redNeg()),this.point(s,e)},u.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),r=t.redMul(this.a).redAdd(n),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return 0===r.cmp(i)},i(c,a.BasePoint),u.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},u.prototype.point=function(e,t,n,r){return new c(this,e,t,n,r)},c.fromJSON=function(e,t){return new c(e,t[0],t[1],t[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},c.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var r=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=r.redAdd(t),a=o.redSub(n),s=r.redSub(t),u=i.redMul(a),c=o.redMul(s),l=i.redMul(s),h=a.redMul(o);return this.curve.point(u,c,h,l)},c.prototype._projDbl=function(){var e,t,n,r,i,o,a=this.x.redAdd(this.y).redSqr(),s=this.x.redSqr(),u=this.y.redSqr();if(this.curve.twisted){var c=(r=this.curve._mulA(s)).redAdd(u);this.zOne?(e=a.redSub(s).redSub(u).redMul(c.redSub(this.curve.two)),t=c.redMul(r.redSub(u)),n=c.redSqr().redSub(c).redSub(c)):(i=this.z.redSqr(),o=c.redSub(i).redISub(i),e=a.redSub(s).redISub(u).redMul(o),t=c.redMul(r.redSub(u)),n=c.redMul(o))}else r=s.redAdd(u),i=this.curve._mulC(this.z).redSqr(),o=r.redSub(i).redSub(i),e=this.curve._mulC(a.redISub(r)).redMul(o),t=this.curve._mulC(r).redMul(s.redISub(u)),n=r.redMul(o);return this.curve.point(e,t,n)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),r=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),o=n.redSub(t),a=i.redSub(r),s=i.redAdd(r),u=n.redAdd(t),c=o.redMul(a),l=s.redMul(u),h=o.redMul(u),f=a.redMul(s);return this.curve.point(c,l,f,h)},c.prototype._projAdd=function(e){var t,n,r=this.z.redMul(e.z),i=r.redSqr(),o=this.x.redMul(e.x),a=this.y.redMul(e.y),s=this.curve.d.redMul(o).redMul(a),u=i.redSub(s),c=i.redAdd(s),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(a),h=r.redMul(u).redMul(l);return this.curve.twisted?(t=r.redMul(c).redMul(a.redSub(this.curve._mulA(o))),n=u.redMul(c)):(t=r.redMul(c).redMul(a.redSub(o)),n=this.curve._mulC(u).redMul(c)),this.curve.point(h,t,n)},c.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},c.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},c.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)},c.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},c.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var n=e.clone(),r=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(r),0===this.x.cmp(t))return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add})),o.register("2GcAi",(function(e,t){"use strict";var n,r=e.exports,i=o("1LMeQ"),a=o("3acTV"),s=o("1Pi9K").assert;function u(e){"short"===e.type?this.curve=new a.short(e):"edwards"===e.type?this.curve=new a.edwards(e):this.curve=new a.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(e,t){Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){var n=new u(t);return Object.defineProperty(r,e,{configurable:!0,enumerable:!0,value:n}),n}})}r.PresetCurve=u,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:i.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:i.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:i.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:i.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:i.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=o("6Btj9")}catch(e){n=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:i.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})})),o.register("1LMeQ",(function(e,t){var n=e.exports;n.utils=o("DraMq"),n.common=o("3Nqvy"),n.sha=o("6DKPz"),n.ripemd=o("3JJMA"),n.hmac=o("358kM"),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160})),o.register("DraMq",(function(e,n){var r,i,a,s,u,c,l,h,f,d,p,m,v,g,y,b,w,_,k,S,E,M,T,C,I,x;t(e.exports,"sum64",(()=>c),(e=>c=e)),t(e.exports,"shr64_lo",(()=>b),(e=>b=e)),t(e.exports,"sum32_3",(()=>E),(e=>E=e)),t(e.exports,"shr64_hi",(()=>g),(e=>g=e)),t(e.exports,"sum32",(()=>l),(e=>l=e)),t(e.exports,"sum64_4_hi",(()=>s),(e=>s=e)),t(e.exports,"rotl32",(()=>M),(e=>M=e)),t(e.exports,"sum32_4",(()=>k),(e=>k=e)),t(e.exports,"sum64_lo",(()=>x),(e=>x=e)),t(e.exports,"sum64_5_lo",(()=>r),(e=>r=e)),t(e.exports,"inherits",(()=>y),(e=>y=e)),t(e.exports,"htonl",(()=>C),(e=>C=e)),t(e.exports,"zero8",(()=>_),(e=>_=e)),t(e.exports,"toHex32",(()=>w),(e=>w=e)),t(e.exports,"sum32_5",(()=>T),(e=>T=e)),t(e.exports,"sum64_5_hi",(()=>f),(e=>f=e)),t(e.exports,"zero2",(()=>S),(e=>S=e)),t(e.exports,"split32",(()=>p),(e=>p=e)),t(e.exports,"join32",(()=>v),(e=>v=e)),t(e.exports,"rotr32",(()=>u),(e=>u=e)),t(e.exports,"sum64_hi",(()=>I),(e=>I=e)),t(e.exports,"toArray",(()=>h),(e=>h=e)),t(e.exports,"sum64_4_lo",(()=>i),(e=>i=e)),t(e.exports,"rotr64_hi",(()=>a),(e=>a=e)),t(e.exports,"rotr64_lo",(()=>m),(e=>m=e)),t(e.exports,"toHex",(()=>d),(e=>d=e));var A=o("2GaDG"),P=o("67rjf");function O(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function R(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function D(e){return 1===e.length?"0"+e:e}function N(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}y=P,h=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)n.push(parseInt(e[i]+e[i+1],16))}else for(var r=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);o<128?n[r++]=o:o<2048?(n[r++]=o>>6|192,n[r++]=63&o|128):O(e,i)?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++i)),n[r++]=o>>18|240,n[r++]=o>>12&63|128,n[r++]=o>>6&63|128,n[r++]=63&o|128):(n[r++]=o>>12|224,n[r++]=o>>6&63|128,n[r++]=63&o|128)}else for(i=0;i<e.length;i++)n[i]=0|e[i];return n},d=function(e){for(var t="",n=0;n<e.length;n++)t+=D(e[n].toString(16));return t},C=R,w=function(e,t){for(var n="",r=0;r<e.length;r++){var i=e[r];"little"===t&&(i=R(i)),n+=N(i.toString(16))}return n},S=D,_=N,v=function(e,t,n,r){var i=n-t;A(i%4==0);for(var o=new Array(i/4),a=0,s=t;a<o.length;a++,s+=4){var u;u="big"===r?e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3]:e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s],o[a]=u>>>0}return o},p=function(e,t){for(var n=new Array(4*e.length),r=0,i=0;r<e.length;r++,i+=4){var o=e[r];"big"===t?(n[i]=o>>>24,n[i+1]=o>>>16&255,n[i+2]=o>>>8&255,n[i+3]=255&o):(n[i+3]=o>>>24,n[i+2]=o>>>16&255,n[i+1]=o>>>8&255,n[i]=255&o)}return n},u=function(e,t){return e>>>t|e<<32-t},M=function(e,t){return e<<t|e>>>32-t},l=function(e,t){return e+t>>>0},E=function(e,t,n){return e+t+n>>>0},k=function(e,t,n,r){return e+t+n+r>>>0},T=function(e,t,n,r,i){return e+t+n+r+i>>>0},c=function(e,t,n,r){var i=e[t],o=r+e[t+1]>>>0,a=(o<r?1:0)+n+i;e[t]=a>>>0,e[t+1]=o},I=function(e,t,n,r){return(t+r>>>0<t?1:0)+e+n>>>0},x=function(e,t,n,r){return t+r>>>0},s=function(e,t,n,r,i,o,a,s){var u=0,c=t;return u+=(c=c+r>>>0)<t?1:0,u+=(c=c+o>>>0)<o?1:0,e+n+i+a+(u+=(c=c+s>>>0)<s?1:0)>>>0},i=function(e,t,n,r,i,o,a,s){return t+r+o+s>>>0},f=function(e,t,n,r,i,o,a,s,u,c){var l=0,h=t;return l+=(h=h+r>>>0)<t?1:0,l+=(h=h+o>>>0)<o?1:0,l+=(h=h+s>>>0)<s?1:0,e+n+i+a+u+(l+=(h=h+c>>>0)<c?1:0)>>>0},r=function(e,t,n,r,i,o,a,s,u,c){return t+r+o+s+c>>>0},a=function(e,t,n){return(t<<32-n|e>>>n)>>>0},m=function(e,t,n){return(e<<32-n|t>>>n)>>>0},g=function(e,t,n){return e>>>n},b=function(e,t,n){return(e<<32-n|t>>>n)>>>0}})),o.register("3Nqvy",(function(e,n){var r;t(e.exports,"BlockHash",(()=>r),(e=>r=e));var i=o("DraMq"),a=o("2GaDG");function s(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}r=s,s.prototype.update=function(e,t){if(e=i.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var n=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=i.join32(e,0,e.length-n,this.endian);for(var r=0;r<e.length;r+=this._delta32)this._update(e,r,r+this._delta32)}return this},s.prototype.digest=function(e){return this.update(this._pad()),a(null===this.pending),this._digest(e)},s.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,r=new Array(n+this.padLength);r[0]=128;for(var i=1;i<n;i++)r[i]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)r[i++]=0;r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=e>>>24&255,r[i++]=e>>>16&255,r[i++]=e>>>8&255,r[i++]=255&e}else for(r[i++]=255&e,r[i++]=e>>>8&255,r[i++]=e>>>16&255,r[i++]=e>>>24&255,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,o=8;o<this.padLength;o++)r[i++]=0;return r}})),o.register("6DKPz",(function(e,n){var r,i,a,s,u;t(e.exports,"sha224",(()=>u),(e=>u=e)),t(e.exports,"sha1",(()=>r),(e=>r=e)),t(e.exports,"sha256",(()=>a),(e=>a=e)),t(e.exports,"sha384",(()=>i),(e=>i=e)),t(e.exports,"sha512",(()=>s),(e=>s=e)),r=o("4Ij3X"),u=o("3id3g"),a=o("2DT5d"),i=o("4Hdpe"),s=o("3tUsP")})),o.register("4Ij3X",(function(e,t){"use strict";var n=o("DraMq"),r=o("3Nqvy"),i=o("1bFf0"),a=n.rotl32,s=n.sum32,u=n.sum32_5,c=i.ft_1,l=r.BlockHash,h=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(f,l),e.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=a(n[r-3]^n[r-8]^n[r-14]^n[r-16],1);var i=this.h[0],o=this.h[1],l=this.h[2],f=this.h[3],d=this.h[4];for(r=0;r<n.length;r++){var p=~~(r/20),m=u(a(i,5),c(p,o,l,f),d,n[r],h[p]);d=f,f=l,l=a(o,30),o=i,i=m}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],l),this.h[3]=s(this.h[3],f),this.h[4]=s(this.h[4],d)},f.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}})),o.register("1bFf0",(function(e,n){var r,i,a,s,u,c,l;t(e.exports,"ch32",(()=>c),(e=>c=e)),t(e.exports,"g0_256",(()=>i),(e=>i=e)),t(e.exports,"s1_256",(()=>l),(e=>l=e)),t(e.exports,"maj32",(()=>u),(e=>u=e)),t(e.exports,"ft_1",(()=>r),(e=>r=e)),t(e.exports,"s0_256",(()=>a),(e=>a=e)),t(e.exports,"g1_256",(()=>s),(e=>s=e));var h=o("DraMq").rotr32;function f(e,t,n){return e&t^~e&n}function d(e,t,n){return e&t^e&n^t&n}function p(e,t,n){return e^t^n}r=function(e,t,n,r){return 0===e?f(t,n,r):1===e||3===e?p(t,n,r):2===e?d(t,n,r):void 0},c=f,u=d,a=function(e){return h(e,2)^h(e,13)^h(e,22)},l=function(e){return h(e,6)^h(e,11)^h(e,25)},i=function(e){return h(e,7)^h(e,18)^e>>>3},s=function(e){return h(e,17)^h(e,19)^e>>>10}})),o.register("3id3g",(function(e,t){"use strict";var n=o("DraMq"),r=o("2DT5d");function i(){if(!(this instanceof i))return new i;r.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(i,r),e.exports=i,i.blockSize=512,i.outSize=224,i.hmacStrength=192,i.padLength=64,i.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}})),o.register("2DT5d",(function(e,t){"use strict";var n=o("DraMq"),r=o("3Nqvy"),i=o("1bFf0"),a=o("2GaDG"),s=n.sum32,u=n.sum32_4,c=n.sum32_5,l=i.ch32,h=i.maj32,f=i.s0_256,d=i.s1_256,p=i.g0_256,m=i.g1_256,v=r.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;v.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=new Array(64)}n.inherits(y,v),e.exports=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=u(m(n[r-2]),n[r-7],p(n[r-15]),n[r-16]);var i=this.h[0],o=this.h[1],v=this.h[2],g=this.h[3],y=this.h[4],b=this.h[5],w=this.h[6],_=this.h[7];for(a(this.k.length===n.length),r=0;r<n.length;r++){var k=c(_,d(y),l(y,b,w),this.k[r],n[r]),S=s(f(i),h(i,o,v));_=w,w=b,b=y,y=s(g,k),g=v,v=o,o=i,i=s(k,S)}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],v),this.h[3]=s(this.h[3],g),this.h[4]=s(this.h[4],y),this.h[5]=s(this.h[5],b),this.h[6]=s(this.h[6],w),this.h[7]=s(this.h[7],_)},y.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}})),o.register("4Hdpe",(function(e,t){"use strict";var n=o("DraMq"),r=o("3tUsP");function i(){if(!(this instanceof i))return new i;r.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(i,r),e.exports=i,i.blockSize=1024,i.outSize=384,i.hmacStrength=192,i.padLength=128,i.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}})),o.register("3tUsP",(function(e,t){"use strict";var n=o("DraMq"),r=o("3Nqvy"),i=o("2GaDG"),a=n.rotr64_hi,s=n.rotr64_lo,u=n.shr64_hi,c=n.shr64_lo,l=n.sum64,h=n.sum64_hi,f=n.sum64_lo,d=n.sum64_4_hi,p=n.sum64_4_lo,m=n.sum64_5_hi,v=n.sum64_5_lo,g=r.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}function w(e,t,n,r,i){var o=e&n^~e&i;return o<0&&(o+=4294967296),o}function _(e,t,n,r,i,o){var a=t&r^~t&o;return a<0&&(a+=4294967296),a}function k(e,t,n,r,i){var o=e&n^e&i^n&i;return o<0&&(o+=4294967296),o}function S(e,t,n,r,i,o){var a=t&r^t&o^r&o;return a<0&&(a+=4294967296),a}function E(e,t){var n=a(e,t,28)^a(t,e,2)^a(t,e,7);return n<0&&(n+=4294967296),n}function M(e,t){var n=s(e,t,28)^s(t,e,2)^s(t,e,7);return n<0&&(n+=4294967296),n}function T(e,t){var n=a(e,t,14)^a(e,t,18)^a(t,e,9);return n<0&&(n+=4294967296),n}function C(e,t){var n=s(e,t,14)^s(e,t,18)^s(t,e,9);return n<0&&(n+=4294967296),n}function I(e,t){var n=a(e,t,1)^a(e,t,8)^u(e,t,7);return n<0&&(n+=4294967296),n}function x(e,t){var n=s(e,t,1)^s(e,t,8)^c(e,t,7);return n<0&&(n+=4294967296),n}function A(e,t){var n=a(e,t,19)^a(t,e,29)^u(e,t,6);return n<0&&(n+=4294967296),n}function P(e,t){var n=s(e,t,19)^s(t,e,29)^c(e,t,6);return n<0&&(n+=4294967296),n}n.inherits(b,g),e.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(e,t){for(var n=this.W,r=0;r<32;r++)n[r]=e[t+r];for(;r<n.length;r+=2){var i=A(n[r-4],n[r-3]),o=P(n[r-4],n[r-3]),a=n[r-14],s=n[r-13],u=I(n[r-30],n[r-29]),c=x(n[r-30],n[r-29]),l=n[r-32],h=n[r-31];n[r]=d(i,o,a,s,u,c,l,h),n[r+1]=p(i,o,a,s,u,c,l,h)}},b.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,r=this.h[0],o=this.h[1],a=this.h[2],s=this.h[3],u=this.h[4],c=this.h[5],d=this.h[6],p=this.h[7],g=this.h[8],y=this.h[9],b=this.h[10],I=this.h[11],x=this.h[12],A=this.h[13],P=this.h[14],O=this.h[15];i(this.k.length===n.length);for(var R=0;R<n.length;R+=2){var D=P,N=O,L=T(g,y),j=C(g,y),B=w(g,y,b,I,x),F=_(g,y,b,I,x,A),U=this.k[R],q=this.k[R+1],z=n[R],V=n[R+1],W=m(D,N,L,j,B,F,U,q,z,V),H=v(D,N,L,j,B,F,U,q,z,V);D=E(r,o),N=M(r,o),L=k(r,o,a,s,u),j=S(r,o,a,s,u,c);var K=h(D,N,L,j),G=f(D,N,L,j);P=x,O=A,x=b,A=I,b=g,I=y,g=h(d,p,W,H),y=f(p,p,W,H),d=u,p=c,u=a,c=s,a=r,s=o,r=h(W,H,K,G),o=f(W,H,K,G)}l(this.h,0,r,o),l(this.h,2,a,s),l(this.h,4,u,c),l(this.h,6,d,p),l(this.h,8,g,y),l(this.h,10,b,I),l(this.h,12,x,A),l(this.h,14,P,O)},b.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}})),o.register("3JJMA",(function(e,n){var r;t(e.exports,"ripemd160",(()=>r),(e=>r=e));var i=o("DraMq"),a=o("3Nqvy"),s=i.rotl32,u=i.sum32,c=i.sum32_3,l=i.sum32_4,h=a.BlockHash;function f(){if(!(this instanceof f))return new f;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function d(e,t,n,r){return e<=15?t^n^r:e<=31?t&n|~t&r:e<=47?(t|~n)^r:e<=63?t&r|n&~r:t^(n|~r)}function p(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function m(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}i.inherits(f,h),r=f,f.blockSize=512,f.outSize=160,f.hmacStrength=192,f.padLength=64,f.prototype._update=function(e,t){for(var n=this.h[0],r=this.h[1],i=this.h[2],o=this.h[3],a=this.h[4],h=n,f=r,w=i,_=o,k=a,S=0;S<80;S++){var E=u(s(l(n,d(S,r,i,o),e[v[S]+t],p(S)),y[S]),a);n=a,a=o,o=s(i,10),i=r,r=E,E=u(s(l(h,d(79-S,f,w,_),e[g[S]+t],m(S)),b[S]),k),h=k,k=_,_=s(w,10),w=f,f=E}E=c(this.h[1],i,_),this.h[1]=c(this.h[2],o,k),this.h[2]=c(this.h[3],a,h),this.h[3]=c(this.h[4],n,f),this.h[4]=c(this.h[0],r,w),this.h[0]=E},f.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var v=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],b=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]})),o.register("358kM",(function(e,t){"use strict";var n=o("DraMq"),r=o("2GaDG");function i(e,t,r){if(!(this instanceof i))return new i(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(t,r))}e.exports=i,i.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),r(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},i.prototype.update=function(e,t){return this.inner.update(e,t),this},i.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}})),o.register("6Btj9",(function(e,t){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}})),o.register("1gQck",(function(e,t){"use strict";var n=o("4WVjo"),r=o("4v4v3"),i=o("1Pi9K"),a=o("2GcAi"),s=o("1ma98"),u=i.assert,c=o("2wq6r"),l=o("6ewI7");function h(e){if(!(this instanceof h))return new h(e);"string"==typeof e&&(u(Object.prototype.hasOwnProperty.call(a,e),"Unknown curve "+e),e=a[e]),e instanceof a.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=h,h.prototype.keyPair=function(e){return new c(this,e)},h.prototype.keyFromPrivate=function(e,t){return c.fromPrivate(this,e,t)},h.prototype.keyFromPublic=function(e,t){return c.fromPublic(this,e,t)},h.prototype.genKeyPair=function(e){e||(e={});for(var t=new r({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||s(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),o=this.n.sub(new n(2));;){var a=new n(t.generate(i));if(!(a.cmp(o)>0))return a.iaddn(1),this.keyFromPrivate(a)}},h.prototype._truncateToN=function(e,t){var n=8*e.byteLength()-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},h.prototype.sign=function(e,t,i,o){"object"==typeof i&&(o=i,i=null),o||(o={}),t=this.keyFromPrivate(t,i),e=this._truncateToN(new n(e,16));for(var a=this.n.byteLength(),s=t.getPrivate().toArray("be",a),u=e.toArray("be",a),c=new r({hash:this.hash,entropy:s,nonce:u,pers:o.pers,persEnc:o.persEnc||"utf8"}),h=this.n.sub(new n(1)),f=0;;f++){var d=o.k?o.k(f):new n(c.generate(this.n.byteLength()));if(!((d=this._truncateToN(d,!0)).cmpn(1)<=0||d.cmp(h)>=0)){var p=this.g.mul(d);if(!p.isInfinity()){var m=p.getX(),v=m.umod(this.n);if(0!==v.cmpn(0)){var g=d.invm(this.n).mul(v.mul(t.getPrivate()).iadd(e));if(0!==(g=g.umod(this.n)).cmpn(0)){var y=(p.getY().isOdd()?1:0)|(0!==m.cmp(v)?2:0);return o.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g),y^=1),new l({r:v,s:g,recoveryParam:y})}}}}}},h.prototype.verify=function(e,t,r,i){e=this._truncateToN(new n(e,16)),r=this.keyFromPublic(r,i);var o=(t=new l(t,"hex")).r,a=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var s,u=a.invm(this.n),c=u.mul(e).umod(this.n),h=u.mul(o).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(c,r.getPublic(),h)).isInfinity()&&s.eqXToP(o):!(s=this.g.mulAdd(c,r.getPublic(),h)).isInfinity()&&0===s.getX().umod(this.n).cmp(o)},h.prototype.recoverPubKey=function(e,t,r,i){u((3&r)===r,"The recovery param is more than two bits"),t=new l(t,i);var o=this.n,a=new n(e),s=t.r,c=t.s,h=1&r,f=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");s=f?this.curve.pointFromX(s.add(this.curve.n),h):this.curve.pointFromX(s,h);var d=t.r.invm(o),p=o.sub(a).mul(d).umod(o),m=c.mul(d).umod(o);return this.g.mulAdd(p,s,m)},h.prototype.getKeyRecoveryParam=function(e,t,n,r){if(null!==(t=new l(t,r)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(n))return i}throw new Error("Unable to find valid recovery factor")}})),o.register("4v4v3",(function(e,t){"use strict";var n=o("1LMeQ"),r=o("19iZY"),i=o("2GaDG");function a(e){if(!(this instanceof a))return new a(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=r.toArray(e.entropy,e.entropyEnc||"hex"),n=r.toArray(e.nonce,e.nonceEnc||"hex"),o=r.toArray(e.pers,e.persEnc||"hex");i(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,n,o)}e.exports=a,a.prototype._init=function(e,t,n){var r=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},a.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},a.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},a.prototype.reseed=function(e,t,n,o){"string"!=typeof t&&(o=n,n=t,t=null),e=r.toArray(e,t),n=r.toArray(n,o),i(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1},a.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(i=n,n=t,t=null),n&&(n=r.toArray(n,i||"hex"),this._update(n));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,e);return this._update(n),this._reseed++,r.encode(a,t)}})),o.register("2wq6r",(function(e,t){"use strict";var n=o("4WVjo"),r=o("1Pi9K").assert;function i(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=i,i.fromPublic=function(e,t,n){return t instanceof i?t:new i(e,{pub:t,pubEnc:n})},i.fromPrivate=function(e,t,n){return t instanceof i?t:new i(e,{priv:t,privEnc:n})},i.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},i.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},i.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},i.prototype._importPrivate=function(e,t){this.priv=new n(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},i.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?r(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||r(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},i.prototype.derive=function(e){return e.validate()||r(e.validate(),"public point not validated"),e.mul(this.priv).getX()},i.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)},i.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},i.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}})),o.register("6ewI7",(function(e,t){"use strict";var n=o("4WVjo"),r=o("1Pi9K"),i=r.assert;function a(e,t){if(e instanceof a)return e;this._importDER(e,t)||(i(e.r&&e.s,"Signature without r or s"),this.r=new n(e.r,16),this.s=new n(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function s(){this.place=0}function u(e,t){var n=e[t.place++];if(!(128&n))return n;var r=15&n;if(0===r||r>4)return!1;for(var i=0,o=0,a=t.place;o<r;o++,a++)i<<=8,i|=e[a],i>>>=0;return!(i<=127)&&(t.place=a,i)}function c(e){for(var t=0,n=e.length-1;!e[t]&&!(128&e[t+1])&&t<n;)t++;return 0===t?e:e.slice(t)}function l(e,t){if(t<128)e.push(t);else{var n=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|n);--n;)e.push(t>>>(n<<3)&255);e.push(t)}}e.exports=a,a.prototype._importDER=function(e,t){e=r.toArray(e,t);var i=new s;if(48!==e[i.place++])return!1;var o=u(e,i);if(!1===o)return!1;if(o+i.place!==e.length)return!1;if(2!==e[i.place++])return!1;var a=u(e,i);if(!1===a)return!1;var c=e.slice(i.place,a+i.place);if(i.place+=a,2!==e[i.place++])return!1;var l=u(e,i);if(!1===l)return!1;if(e.length!==l+i.place)return!1;var h=e.slice(i.place,l+i.place);if(0===c[0]){if(!(128&c[1]))return!1;c=c.slice(1)}if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}return this.r=new n(c),this.s=new n(h),this.recoveryParam=null,!0},a.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&n[0]&&(n=[0].concat(n)),t=c(t),n=c(n);!(n[0]||128&n[1]);)n=n.slice(1);var i=[2];l(i,t.length),(i=i.concat(t)).push(2),l(i,n.length);var o=i.concat(n),a=[48];return l(a,o.length),a=a.concat(o),r.encode(a,e)}})),o.register("6KBuy",(function(e,t){"use strict";var n=o("1LMeQ"),r=o("2GcAi"),i=o("1Pi9K"),a=i.assert,s=i.parseBytes,u=o("MZC44"),c=o("1oM82");function l(e){if(a("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof l))return new l(e);e=r[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=n.sha512}e.exports=l,l.prototype.sign=function(e,t){e=s(e);var n=this.keyFromSecret(t),r=this.hashInt(n.messagePrefix(),e),i=this.g.mul(r),o=this.encodePoint(i),a=this.hashInt(o,n.pubBytes(),e).mul(n.priv()),u=r.add(a).umod(this.curve.n);return this.makeSignature({R:i,S:u,Rencoded:o})},l.prototype.verify=function(e,t,n){e=s(e),t=this.makeSignature(t);var r=this.keyFromPublic(n),i=this.hashInt(t.Rencoded(),r.pubBytes(),e),o=this.g.mul(t.S());return t.R().add(r.pub().mul(i)).eq(o)},l.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return i.intFromLE(e.digest()).umod(this.curve.n)},l.prototype.keyFromPublic=function(e){return u.fromPublic(this,e)},l.prototype.keyFromSecret=function(e){return u.fromSecret(this,e)},l.prototype.makeSignature=function(e){return e instanceof c?e:new c(this,e)},l.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},l.prototype.decodePoint=function(e){var t=(e=i.parseBytes(e)).length-1,n=e.slice(0,t).concat(-129&e[t]),r=0!=(128&e[t]),o=i.intFromLE(n);return this.curve.pointFromY(o,r)},l.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},l.prototype.decodeInt=function(e){return i.intFromLE(e)},l.prototype.isPoint=function(e){return e instanceof this.pointClass}})),o.register("MZC44",(function(e,t){"use strict";var n=o("1Pi9K"),r=n.assert,i=n.parseBytes,a=n.cachedProperty;function s(e,t){this.eddsa=e,this._secret=i(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=i(t.pub)}s.fromPublic=function(e,t){return t instanceof s?t:new s(e,{pub:t})},s.fromSecret=function(e,t){return t instanceof s?t:new s(e,{secret:t})},s.prototype.secret=function(){return this._secret},a(s,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),a(s,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),a(s,"privBytes",(function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,r=t.slice(0,e.encodingLength);return r[0]&=248,r[n]&=127,r[n]|=64,r})),a(s,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),a(s,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),a(s,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),s.prototype.sign=function(e){return r(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},s.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},s.prototype.getSecret=function(e){return r(this._secret,"KeyPair is public only"),n.encode(this.secret(),e)},s.prototype.getPublic=function(e){return n.encode(this.pubBytes(),e)},e.exports=s})),o.register("1oM82",(function(e,t){"use strict";var n=o("4WVjo"),r=o("1Pi9K"),i=r.assert,a=r.cachedProperty,s=r.parseBytes;function u(e,t){this.eddsa=e,"object"!=typeof t&&(t=s(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),i(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof n&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}a(u,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),a(u,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),a(u,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),a(u,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return r.encode(this.toBytes(),"hex").toUpperCase()},e.exports=u})),o.register("4yHxi",(function(e,t){var n=o("7birS"),r=o("9gMqg"),i=o("38Zut"),a=o("4rMrO"),s=o("KTk8W"),u=o("6aUge").Buffer;function c(e){var t;"object"!=typeof e||u.isBuffer(e)||(t=e.passphrase,e=e.key),"string"==typeof e&&(e=u.from(e));var o,c,l=i(e,t),h=l.tag,f=l.data;switch(h){case"CERTIFICATE":c=n.certificate.decode(f,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(c||(c=n.PublicKey.decode(f,"der")),o=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return c.subjectPrivateKey=c.subjectPublicKey,{type:"ec",data:c};case"1.2.840.10040.4.1":return c.algorithm.params.pub_key=n.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.params};default:throw new Error("unknown key id "+o)}case"ENCRYPTED PRIVATE KEY":f=function(e,t){var n=e.algorithm.decrypt.kde.kdeparams.salt,i=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=r[e.algorithm.decrypt.cipher.algo.join(".")],c=e.algorithm.decrypt.cipher.iv,l=e.subjectPrivateKey,h=parseInt(o.split("-")[1],10)/8,f=s.pbkdf2Sync(t,n,i,h,"sha1"),d=a.createDecipheriv(o,f,c),p=[];return p.push(d.update(l)),p.push(d.final()),u.concat(p)}(f=n.EncryptedPrivateKey.decode(f,"der"),t);case"PRIVATE KEY":switch(o=(c=n.PrivateKey.decode(f,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:c.algorithm.curve,privateKey:n.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c.algorithm.params.priv_key=n.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.params};default:throw new Error("unknown key id "+o)}case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(f,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(f,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(f,"der")};case"EC PRIVATE KEY":return{curve:(f=n.ECPrivateKey.decode(f,"der")).parameters.value,privateKey:f.privateKey};default:throw new Error("unknown key type "+h)}}e.exports=c,c.signature=n.signature})),o.register("7birS",(function(e,n){var r,i,a,s,u,c,l,h,f,d;t(e.exports,"PublicKey",(()=>s),(e=>s=e)),t(e.exports,"RSAPublicKey",(()=>c),(e=>c=e)),t(e.exports,"RSAPrivateKey",(()=>d),(e=>d=e)),t(e.exports,"certificate",(()=>h),(e=>h=e)),t(e.exports,"DSAPrivateKey",(()=>a),(e=>a=e)),t(e.exports,"PrivateKey",(()=>f),(e=>f=e)),t(e.exports,"EncryptedPrivateKey",(()=>u),(e=>u=e)),t(e.exports,"DSAparam",(()=>l),(e=>l=e)),t(e.exports,"ECPrivateKey",(()=>i),(e=>i=e)),t(e.exports,"signature",(()=>r),(e=>r=e));var p=o("3dKFn");h=o("6M7Lr");var m=p.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));d=m;var v=p.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));c=v;var g=p.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(y),this.key("subjectPublicKey").bitstr())}));s=g;var y=p.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),b=p.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(y),this.key("subjectPrivateKey").octstr())}));f=b;var w=p.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));u=w;var _=p.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));a=_,l=p.define("DSAparam",(function(){this.int()}));var k=p.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(S),this.key("publicKey").optional().explicit(1).bitstr())}));i=k;var S=p.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));r=p.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))})),o.register("3dKFn",(function(e,t){"use strict";const n=e.exports;n.bignum=o("teaH7"),n.define=o("7wFqJ").define,n.base=o("40gTe"),n.constants=o("4BORy"),n.decoders=o("10xLX"),n.encoders=o("7ByyZ")})),o.register("teaH7",(function(e,t){!function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function i(e,t,n){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var a;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:o("3V6Bo").Buffer}catch(e){}function s(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function u(e,t,n){var r=s(e,n);return n-1>=t&&(r|=s(e,n-1)<<4),r}function c(e,t,n,r){for(var i=0,o=Math.min(e.length,n),a=t;a<o;a++){var s=e.charCodeAt(a)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},i.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},i.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,a=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=u(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=u(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},i.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,a=o%r,s=Math.min(o,o-a)+n,u=0,l=n;l<s;l+=r)u=c(e,l,l+r,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=c(e,l,e.length,t),l=0;l<a;l++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,s=67108863&a,u=a/67108864|0;n.words[0]=s;for(var c=1;c<r;c++){for(var l=u>>>26,h=67108863&u,f=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=f;d++){var p=c-d|0;l+=(a=(i=0|e.words[p])*(o=0|t.words[d])+h)/67108864|0,h=67108863&a}n.words[c]=0|h,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}i.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?l[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],d=f[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(e);r=(p=p.idivn(d)).isZero()?m+r:l[c-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return n(void 0!==a),this.toArrayLike(a,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===t,c=new e(o),l=this.clone();if(u){for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[s]=a;for(;s<o;s++)c[s]=0}else{for(s=0;s<o-i;s++)c[s]=0;for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[o-s-1]=a}return c},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},i.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var o=0,a=0;a<r.length;a++)o=(t=(0|n.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<n.length;a++)o=(t=(0|n.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,n){var r,i,o,a=e.words,s=t.words,u=n.words,c=0,l=0|a[0],h=8191&l,f=l>>>13,d=0|a[1],p=8191&d,m=d>>>13,v=0|a[2],g=8191&v,y=v>>>13,b=0|a[3],w=8191&b,_=b>>>13,k=0|a[4],S=8191&k,E=k>>>13,M=0|a[5],T=8191&M,C=M>>>13,I=0|a[6],x=8191&I,A=I>>>13,P=0|a[7],O=8191&P,R=P>>>13,D=0|a[8],N=8191&D,L=D>>>13,j=0|a[9],B=8191&j,F=j>>>13,U=0|s[0],q=8191&U,z=U>>>13,V=0|s[1],W=8191&V,H=V>>>13,K=0|s[2],G=8191&K,Y=K>>>13,Q=0|s[3],J=8191&Q,Z=Q>>>13,X=0|s[4],$=8191&X,ee=X>>>13,te=0|s[5],ne=8191&te,re=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],ue=8191&se,ce=se>>>13,le=0|s[8],he=8191&le,fe=le>>>13,de=0|s[9],pe=8191&de,me=de>>>13;n.negative=e.negative^t.negative,n.length=19;var ve=(c+(r=Math.imul(h,q))|0)+((8191&(i=(i=Math.imul(h,z))+Math.imul(f,q)|0))<<13)|0;c=((o=Math.imul(f,z))+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(p,q),i=(i=Math.imul(p,z))+Math.imul(m,q)|0,o=Math.imul(m,z);var ge=(c+(r=r+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,W)|0))<<13)|0;c=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(g,q),i=(i=Math.imul(g,z))+Math.imul(y,q)|0,o=Math.imul(y,z),r=r+Math.imul(p,W)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,H)|0;var ye=(c+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,G)|0))<<13)|0;c=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(w,q),i=(i=Math.imul(w,z))+Math.imul(_,q)|0,o=Math.imul(_,z),r=r+Math.imul(g,W)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(y,W)|0,o=o+Math.imul(y,H)|0,r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,Y)|0;var be=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,Z)|0)+Math.imul(f,J)|0))<<13)|0;c=((o=o+Math.imul(f,Z)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(S,q),i=(i=Math.imul(S,z))+Math.imul(E,q)|0,o=Math.imul(E,z),r=r+Math.imul(w,W)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,H)|0,r=r+Math.imul(g,G)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(y,G)|0,o=o+Math.imul(y,Y)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var we=(c+(r=r+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(f,$)|0))<<13)|0;c=((o=o+Math.imul(f,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(T,q),i=(i=Math.imul(T,z))+Math.imul(C,q)|0,o=Math.imul(C,z),r=r+Math.imul(S,W)|0,i=(i=i+Math.imul(S,H)|0)+Math.imul(E,W)|0,o=o+Math.imul(E,H)|0,r=r+Math.imul(w,G)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(_,G)|0,o=o+Math.imul(_,Y)|0,r=r+Math.imul(g,J)|0,i=(i=i+Math.imul(g,Z)|0)+Math.imul(y,J)|0,o=o+Math.imul(y,Z)|0,r=r+Math.imul(p,$)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,ee)|0;var _e=(c+(r=r+Math.imul(h,ne)|0)|0)+((8191&(i=(i=i+Math.imul(h,re)|0)+Math.imul(f,ne)|0))<<13)|0;c=((o=o+Math.imul(f,re)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(x,q),i=(i=Math.imul(x,z))+Math.imul(A,q)|0,o=Math.imul(A,z),r=r+Math.imul(T,W)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,H)|0,r=r+Math.imul(S,G)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(E,G)|0,o=o+Math.imul(E,Y)|0,r=r+Math.imul(w,J)|0,i=(i=i+Math.imul(w,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,r=r+Math.imul(g,$)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(y,$)|0,o=o+Math.imul(y,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,re)|0;var ke=(c+(r=r+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,ae)|0)+Math.imul(f,oe)|0))<<13)|0;c=((o=o+Math.imul(f,ae)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(O,q),i=(i=Math.imul(O,z))+Math.imul(R,q)|0,o=Math.imul(R,z),r=r+Math.imul(x,W)|0,i=(i=i+Math.imul(x,H)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,H)|0,r=r+Math.imul(T,G)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,Y)|0,r=r+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,Z)|0,r=r+Math.imul(w,$)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,ee)|0,r=r+Math.imul(g,ne)|0,i=(i=i+Math.imul(g,re)|0)+Math.imul(y,ne)|0,o=o+Math.imul(y,re)|0,r=r+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0;var Se=(c+(r=r+Math.imul(h,ue)|0)|0)+((8191&(i=(i=i+Math.imul(h,ce)|0)+Math.imul(f,ue)|0))<<13)|0;c=((o=o+Math.imul(f,ce)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(N,q),i=(i=Math.imul(N,z))+Math.imul(L,q)|0,o=Math.imul(L,z),r=r+Math.imul(O,W)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,H)|0,r=r+Math.imul(x,G)|0,i=(i=i+Math.imul(x,Y)|0)+Math.imul(A,G)|0,o=o+Math.imul(A,Y)|0,r=r+Math.imul(T,J)|0,i=(i=i+Math.imul(T,Z)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,r=r+Math.imul(S,$)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,ee)|0,r=r+Math.imul(w,ne)|0,i=(i=i+Math.imul(w,re)|0)+Math.imul(_,ne)|0,o=o+Math.imul(_,re)|0,r=r+Math.imul(g,oe)|0,i=(i=i+Math.imul(g,ae)|0)+Math.imul(y,oe)|0,o=o+Math.imul(y,ae)|0,r=r+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0;var Ee=(c+(r=r+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,fe)|0)+Math.imul(f,he)|0))<<13)|0;c=((o=o+Math.imul(f,fe)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(B,q),i=(i=Math.imul(B,z))+Math.imul(F,q)|0,o=Math.imul(F,z),r=r+Math.imul(N,W)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,H)|0,r=r+Math.imul(O,G)|0,i=(i=i+Math.imul(O,Y)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,Y)|0,r=r+Math.imul(x,J)|0,i=(i=i+Math.imul(x,Z)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,r=r+Math.imul(T,$)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(E,ne)|0,o=o+Math.imul(E,re)|0,r=r+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,ae)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,r=r+Math.imul(g,ue)|0,i=(i=i+Math.imul(g,ce)|0)+Math.imul(y,ue)|0,o=o+Math.imul(y,ce)|0,r=r+Math.imul(p,he)|0,i=(i=i+Math.imul(p,fe)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,fe)|0;var Me=(c+(r=r+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,me)|0)+Math.imul(f,pe)|0))<<13)|0;c=((o=o+Math.imul(f,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(B,W),i=(i=Math.imul(B,H))+Math.imul(F,W)|0,o=Math.imul(F,H),r=r+Math.imul(N,G)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(L,G)|0,o=o+Math.imul(L,Y)|0,r=r+Math.imul(O,J)|0,i=(i=i+Math.imul(O,Z)|0)+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,r=r+Math.imul(x,$)|0,i=(i=i+Math.imul(x,ee)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,ee)|0,r=r+Math.imul(T,ne)|0,i=(i=i+Math.imul(T,re)|0)+Math.imul(C,ne)|0,o=o+Math.imul(C,re)|0,r=r+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,ae)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,ae)|0,r=r+Math.imul(w,ue)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,ce)|0,r=r+Math.imul(g,he)|0,i=(i=i+Math.imul(g,fe)|0)+Math.imul(y,he)|0,o=o+Math.imul(y,fe)|0;var Te=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(B,G),i=(i=Math.imul(B,Y))+Math.imul(F,G)|0,o=Math.imul(F,Y),r=r+Math.imul(N,J)|0,i=(i=i+Math.imul(N,Z)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,Z)|0,r=r+Math.imul(O,$)|0,i=(i=i+Math.imul(O,ee)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,ee)|0,r=r+Math.imul(x,ne)|0,i=(i=i+Math.imul(x,re)|0)+Math.imul(A,ne)|0,o=o+Math.imul(A,re)|0,r=r+Math.imul(T,oe)|0,i=(i=i+Math.imul(T,ae)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,ae)|0,r=r+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(E,ue)|0,o=o+Math.imul(E,ce)|0,r=r+Math.imul(w,he)|0,i=(i=i+Math.imul(w,fe)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,fe)|0;var Ce=(c+(r=r+Math.imul(g,pe)|0)|0)+((8191&(i=(i=i+Math.imul(g,me)|0)+Math.imul(y,pe)|0))<<13)|0;c=((o=o+Math.imul(y,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(B,J),i=(i=Math.imul(B,Z))+Math.imul(F,J)|0,o=Math.imul(F,Z),r=r+Math.imul(N,$)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,ee)|0,r=r+Math.imul(O,ne)|0,i=(i=i+Math.imul(O,re)|0)+Math.imul(R,ne)|0,o=o+Math.imul(R,re)|0,r=r+Math.imul(x,oe)|0,i=(i=i+Math.imul(x,ae)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,ae)|0,r=r+Math.imul(T,ue)|0,i=(i=i+Math.imul(T,ce)|0)+Math.imul(C,ue)|0,o=o+Math.imul(C,ce)|0,r=r+Math.imul(S,he)|0,i=(i=i+Math.imul(S,fe)|0)+Math.imul(E,he)|0,o=o+Math.imul(E,fe)|0;var Ie=(c+(r=r+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,me)|0)+Math.imul(_,pe)|0))<<13)|0;c=((o=o+Math.imul(_,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(B,$),i=(i=Math.imul(B,ee))+Math.imul(F,$)|0,o=Math.imul(F,ee),r=r+Math.imul(N,ne)|0,i=(i=i+Math.imul(N,re)|0)+Math.imul(L,ne)|0,o=o+Math.imul(L,re)|0,r=r+Math.imul(O,oe)|0,i=(i=i+Math.imul(O,ae)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,ae)|0,r=r+Math.imul(x,ue)|0,i=(i=i+Math.imul(x,ce)|0)+Math.imul(A,ue)|0,o=o+Math.imul(A,ce)|0,r=r+Math.imul(T,he)|0,i=(i=i+Math.imul(T,fe)|0)+Math.imul(C,he)|0,o=o+Math.imul(C,fe)|0;var xe=(c+(r=r+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(E,pe)|0))<<13)|0;c=((o=o+Math.imul(E,me)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(B,ne),i=(i=Math.imul(B,re))+Math.imul(F,ne)|0,o=Math.imul(F,re),r=r+Math.imul(N,oe)|0,i=(i=i+Math.imul(N,ae)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,ae)|0,r=r+Math.imul(O,ue)|0,i=(i=i+Math.imul(O,ce)|0)+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,r=r+Math.imul(x,he)|0,i=(i=i+Math.imul(x,fe)|0)+Math.imul(A,he)|0,o=o+Math.imul(A,fe)|0;var Ae=(c+(r=r+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(B,oe),i=(i=Math.imul(B,ae))+Math.imul(F,oe)|0,o=Math.imul(F,ae),r=r+Math.imul(N,ue)|0,i=(i=i+Math.imul(N,ce)|0)+Math.imul(L,ue)|0,o=o+Math.imul(L,ce)|0,r=r+Math.imul(O,he)|0,i=(i=i+Math.imul(O,fe)|0)+Math.imul(R,he)|0,o=o+Math.imul(R,fe)|0;var Pe=(c+(r=r+Math.imul(x,pe)|0)|0)+((8191&(i=(i=i+Math.imul(x,me)|0)+Math.imul(A,pe)|0))<<13)|0;c=((o=o+Math.imul(A,me)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,r=Math.imul(B,ue),i=(i=Math.imul(B,ce))+Math.imul(F,ue)|0,o=Math.imul(F,ce),r=r+Math.imul(N,he)|0,i=(i=i+Math.imul(N,fe)|0)+Math.imul(L,he)|0,o=o+Math.imul(L,fe)|0;var Oe=(c+(r=r+Math.imul(O,pe)|0)|0)+((8191&(i=(i=i+Math.imul(O,me)|0)+Math.imul(R,pe)|0))<<13)|0;c=((o=o+Math.imul(R,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(B,he),i=(i=Math.imul(B,fe))+Math.imul(F,he)|0,o=Math.imul(F,fe);var Re=(c+(r=r+Math.imul(N,pe)|0)|0)+((8191&(i=(i=i+Math.imul(N,me)|0)+Math.imul(L,pe)|0))<<13)|0;c=((o=o+Math.imul(L,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var De=(c+(r=Math.imul(B,pe))|0)+((8191&(i=(i=Math.imul(B,me))+Math.imul(F,pe)|0))<<13)|0;return c=((o=Math.imul(F,me))+(i>>>13)|0)+(De>>>26)|0,De&=67108863,u[0]=ve,u[1]=ge,u[2]=ye,u[3]=be,u[4]=we,u[5]=_e,u[6]=ke,u[7]=Se,u[8]=Ee,u[9]=Me,u[10]=Te,u[11]=Ce,u[12]=Ie,u[13]=xe,u[14]=Ae,u[15]=Pe,u[16]=Oe,u[17]=Re,u[18]=De,0!==c&&(u[19]=c,n.length++),n};function m(e,t,n){return(new v).mulp(e,t,n)}function v(e,t){this.x=e,this.y=t}Math.imul||(p=d),i.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):n<63?d(this,e,t):n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,h=(0|e.words[l])*(0|t.words[c]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,e,t):m(this,e,t)},v.prototype.makeRBT=function(e){for(var t=new Array(e),n=i.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},v.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},v.prototype.permute=function(e,t,n,r,i,o){for(var a=0;a<o;a++)r[a]=t[e[a]],i[a]=n[e[a]]},v.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var h=u,f=c,d=0;d<a;d++){var p=n[l+d],m=r[l+d],v=n[l+d+a],g=r[l+d+a],y=h*v-f*g;g=h*g+f*v,v=y,n[l+d]=p+v,r[l+d]=m+g,n[l+d+a]=p-v,r[l+d+a]=m-g,d!==s&&(y=u*h-c*f,f=u*f+c*h,h=y)}},v.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},v.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},v.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},v.prototype.convert13b=function(e,t,r,i){for(var o=0,a=0;a<t;a++)o+=0|e[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},v.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},v.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),f=n.words;f.length=r,this.convert13b(e.words,e.length,a,r),this.convert13b(t.words,t.length,c,r),this.transform(a,o,s,u,r,i),this.transform(c,o,l,h,r,i);for(var d=0;d<r;d++){var p=s[d]*l[d]-u[d]*h[d];u[d]=s[d]*h[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,r),this.transform(s,u,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),m(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[r]=67108863&o}return 0!==t&&(this.words[r]=t,this.length++),this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}(e);if(0===t.length)return new i(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var o=n.sqr();r<t.length;r++,o=o.sqr())0!==t[r]&&(n=n.mul(o));return n},i.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<r;this.words[t]=u|a,a=s>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},i.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},i.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,r){var i,o,a=e.length+r;this._expand(a);var s=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+s;var u=(0|e.words[i])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),o=e,a=0|o.words[o.length-1];0!==(n=26-this._countBits(a))&&(o=o.ushln(n),r.iushln(n),a=0|o.words[o.length-1]);var s,u=r.length-o.length;if("mod"!==t){(s=new i(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=r.clone()._ishlnsubmul(o,1,u);0===l.negative&&(r=l,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|r.words[o.length+h])+(0|r.words[o.length+h-1]);for(f=Math.min(f/a|0,67108863),r._ishlnsubmul(o,f,h);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(o,1,h),r.isZero()||(r.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},i.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(o=s.div.neg()),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(e)),{div:o,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(o=s.div.neg()),{div:o,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t);var o,a,s},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){n(e<=67108863);for(var t=67108864%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},i.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new i(1),a=new i(0),s=new i(0),u=new i(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),h=t.clone();!t.isZero();){for(var f=0,d=1;0==(t.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(l),a.isub(h)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;0==(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(h)),s.iushrn(1),u.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(s),a.isub(u)):(r.isub(t),s.isub(o),u.isub(a))}return{a:s,b:u,gcd:r.iushln(c)}},i.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o,a=new i(1),s=new i(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(s)):(r.isub(t),s.isub(a))}return(o=0===t.cmpn(1)?a:s).cmpn(0)<0&&o.iadd(e),o},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new S(e)},i.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function E(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},r(b,y),b.prototype.split=function(e,t){for(var n=4194303,r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&n,i=10;i<e.length;i++){var a=0|e.words[i];e.words[i-10]=(a&n)<<4|o>>>22,o=a}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(w,y),r(_,y),r(k,y),k.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new w;else if("p192"===e)t=new _;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new k}return g[e]=t,t},S.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},S.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new i(1)).iushrn(2);return this.pow(e,r)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);n(!o.isZero());var s=new i(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,o),f=this.pow(e,o.addn(1).iushrn(1)),d=this.pow(e,o),p=a;0!==d.cmp(s);){for(var m=d,v=0;0!==m.cmp(s);v++)m=m.redSqr();n(v<p);var g=this.pow(h,new i(1).iushln(p-v-1));f=f.redMul(g),h=g.redSqr(),d=d.redMul(h),p=v}return f},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new i(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var o=n[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=u-1;l>=0;l--){var h=c>>l&1;o!==n[0]&&(o=this.sqr(o)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===r&&0===l)&&(o=this.mul(o,n[a]),s=0,a=0)):s=0}u=26}return o},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new E(e)},r(E,S),E.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},E.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},E.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=n.isub(r).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a._forceRed(this)},E.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)})),o.register("7wFqJ",(function(e,t){"use strict";var n=o("7ByyZ"),r=o("10xLX"),i=o("67rjf");function a(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}e.exports.define=function(e,t){return new a(e,t)},a.prototype._createNamed=function(e){const t=this.name;function n(e){this._initNamed(e,t)}return i(n,e),n.prototype._initNamed=function(t,n){e.call(this,t,n)},new n(this)},a.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(r[e])),this.decoders[e]},a.prototype.decode=function(e,t,n){return this._getDecoder(t).decode(e,n)},a.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(n[e])),this.encoders[e]},a.prototype.encode=function(e,t,n){return this._getEncoder(t).encode(e,n)}})),o.register("7ByyZ",(function(e,t){"use strict";const n=e.exports;n.der=o("6ppas"),n.pem=o("5UWju")})),o.register("6ppas",(function(e,t){"use strict";var n=o("67rjf"),r=o("3UXQB").Buffer,i=o("1mzjX"),a=o("2FK3U");function s(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new u,this.tree._init(e.body)}function u(e){i.call(this,"der",e)}function c(e){return e<10?"0"+e:e}e.exports=s,s.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},n(u,i),u.prototype._encodeComposite=function(e,t,n,i){const o=function(e,t,n,r){let i;"seqof"===e?e="seq":"setof"===e&&(e="set");if(a.tagByName.hasOwnProperty(e))i=a.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return r.error("Unknown tag: "+e);i=e}if(i>=31)return r.error("Multi-octet tag encoding unsupported");t||(i|=32);return i|=a.tagClassByName[n||"universal"]<<6,i}(e,t,n,this.reporter);if(i.length<128){const e=r.alloc(2);return e[0]=o,e[1]=i.length,this._createEncoderBuffer([e,i])}let s=1;for(let e=i.length;e>=256;e>>=8)s++;const u=r.alloc(2+s);u[0]=o,u[1]=128|s;for(let e=1+s,t=i.length;t>0;e--,t>>=8)u[e]=255&t;return this._createEncoderBuffer([u,i])},u.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){const t=r.alloc(2*e.length);for(let n=0;n<e.length;n++)t.writeUInt16BE(e.charCodeAt(n),2*n);return this._createEncoderBuffer(t)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)||"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},u.prototype._encodeObjid=function(e,t,n){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let t=0;t<e.length;t++)e[t]|=0}else if(Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}let i=0;for(let t=0;t<e.length;t++){let n=e[t];for(i++;n>=128;n>>=7)i++}const o=r.alloc(i);let a=o.length-1;for(let t=e.length-1;t>=0;t--){let n=e[t];for(o[a--]=127&n;(n>>=7)>0;)o[a--]=128|127&n}return this._createEncoderBuffer(o)},u.prototype._encodeTime=function(e,t){let n;const r=new Date(e);return"gentime"===t?n=[c(r.getUTCFullYear()),c(r.getUTCMonth()+1),c(r.getUTCDate()),c(r.getUTCHours()),c(r.getUTCMinutes()),c(r.getUTCSeconds()),"Z"].join(""):"utctime"===t?n=[c(r.getUTCFullYear()%100),c(r.getUTCMonth()+1),c(r.getUTCDate()),c(r.getUTCHours()),c(r.getUTCMinutes()),c(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(n,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!r.isBuffer(e)){const t=e.toArray();!e.sign&&128&t[0]&&t.unshift(0),e=r.from(t)}if(r.isBuffer(e)){let t=e.length;0===e.length&&t++;const n=r.alloc(t);return e.copy(n),0===e.length&&(n[0]=0),this._createEncoderBuffer(n)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let t=e;t>=256;t>>=8)n++;const i=new Array(n);for(let t=i.length-1;t>=0;t--)i[t]=255&e,e>>=8;return 128&i[0]&&i.unshift(0),this._createEncoderBuffer(r.from(i))},u.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},u.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},u.prototype._skipDefault=function(e,t,n){const r=this._baseState;let i;if(null===r.default)return!1;const o=e.join();if(void 0===r.defaultBuffer&&(r.defaultBuffer=this._encodeValue(r.default,t,n).join()),o.length!==r.defaultBuffer.length)return!1;for(i=0;i<o.length;i++)if(o[i]!==r.defaultBuffer[i])return!1;return!0}})),o.register("3UXQB",(function(e,t){var n,r=o("7lbf0"),i=U.Buffer,a={};for(n in U)U.hasOwnProperty(n)&&"SlowBuffer"!==n&&"Buffer"!==n&&(a[n]=U[n]);var s=a.Buffer={};for(n in i)i.hasOwnProperty(n)&&"allocUnsafe"!==n&&"allocUnsafeSlow"!==n&&(s[n]=i[n]);if(a.Buffer.prototype=i.prototype,s.from&&s.from!==Uint8Array.from||(s.from=function(e,t,n){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return i(e,t,n)}),s.alloc||(s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2147483648)throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=i(e);return t&&0!==t.length?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r}),!a.kStringMaxLength)try{a.kStringMaxLength=r.binding("buffer").kStringMaxLength}catch(e){}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),e.exports=a})),o.register("1mzjX",(function(e,t){"use strict";var n=o("5n27l").Reporter,r=o("1nyT1").EncoderBuffer,i=o("1nyT1").DecoderBuffer,a=o("2GaDG");const s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s);function c(e,t,n){const r={};this._baseState=r,r.name=n,r.enc=e,r.parent=t||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}e.exports=c;const l=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];c.prototype.clone=function(){const e=this._baseState,t={};l.forEach((function(n){t[n]=e[n]}));const n=new this.constructor(t.parent);return n._baseState=t,n},c.prototype._wrap=function(){const e=this._baseState;u.forEach((function(t){this[t]=function(){const n=new this.constructor(this);return e.children.push(n),n[t].apply(n,arguments)}}),this)},c.prototype._init=function(e){const t=this._baseState;a(null===t.parent),e.call(this),t.children=t.children.filter((function(e){return e._baseState.parent===this}),this),a.equal(t.children.length,1,"Root node can have only one child")},c.prototype._useArgs=function(e){const t=this._baseState,n=e.filter((function(e){return e instanceof this.constructor}),this);e=e.filter((function(e){return!(e instanceof this.constructor)}),this),0!==n.length&&(a(null===t.children),t.children=n,n.forEach((function(e){e._baseState.parent=this}),this)),0!==e.length&&(a(null===t.args),t.args=e,t.reverseArgs=e.map((function(e){if("object"!=typeof e||e.constructor!==Object)return e;const t={};return Object.keys(e).forEach((function(n){n==(0|n)&&(n|=0);const r=e[n];t[r]=n})),t})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(e){c.prototype[e]=function(){const t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}})),s.forEach((function(e){c.prototype[e]=function(){const t=this._baseState,n=Array.prototype.slice.call(arguments);return a(null===t.tag),t.tag=e,this._useArgs(n),this}})),c.prototype.use=function(e){a(e);const t=this._baseState;return a(null===t.use),t.use=e,this},c.prototype.optional=function(){return this._baseState.optional=!0,this},c.prototype.def=function(e){const t=this._baseState;return a(null===t.default),t.default=e,t.optional=!0,this},c.prototype.explicit=function(e){const t=this._baseState;return a(null===t.explicit&&null===t.implicit),t.explicit=e,this},c.prototype.implicit=function(e){const t=this._baseState;return a(null===t.explicit&&null===t.implicit),t.implicit=e,this},c.prototype.obj=function(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},c.prototype.key=function(e){const t=this._baseState;return a(null===t.key),t.key=e,this},c.prototype.any=function(){return this._baseState.any=!0,this},c.prototype.choice=function(e){const t=this._baseState;return a(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map((function(t){return e[t]}))),this},c.prototype.contains=function(e){const t=this._baseState;return a(null===t.use),t.contains=e,this},c.prototype._decode=function(e,t){const n=this._baseState;if(null===n.parent)return e.wrapResult(n.children[0]._decode(e,t));let r,o=n.default,a=!0,s=null;if(null!==n.key&&(s=e.enterKey(n.key)),n.optional){let r=null;if(null!==n.explicit?r=n.explicit:null!==n.implicit?r=n.implicit:null!==n.tag&&(r=n.tag),null!==r||n.any){if(a=this._peekTag(e,r,n.any),e.isError(a))return a}else{const r=e.save();try{null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),a=!0}catch(e){a=!1}e.restore(r)}}if(n.obj&&a&&(r=e.enterObject()),a){if(null!==n.explicit){const t=this._decodeTag(e,n.explicit);if(e.isError(t))return t;e=t}const r=e.offset;if(null===n.use&&null===n.choice){let t;n.any&&(t=e.save());const r=this._decodeTag(e,null!==n.implicit?n.implicit:n.tag,n.any);if(e.isError(r))return r;n.any?o=e.raw(t):e=r}if(t&&t.track&&null!==n.tag&&t.track(e.path(),r,e.length,"tagged"),t&&t.track&&null!==n.tag&&t.track(e.path(),e.offset,e.length,"content"),n.any||(o=null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t)),e.isError(o))return o;if(n.any||null!==n.choice||null===n.children||n.children.forEach((function(n){n._decode(e,t)})),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){const r=new i(o);o=this._getUse(n.contains,e._reporterState.obj)._decode(r,t)}}return n.obj&&a&&(o=e.leaveObject(r)),null===n.key||null===o&&!0!==a?null!==s&&e.exitKey(s):e.leaveKey(s,n.key,o),o},c.prototype._decodeGeneric=function(e,t,n){const r=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,r.args[0],n):/str$/.test(e)?this._decodeStr(t,e,n):"objid"===e&&r.args?this._decodeObjid(t,r.args[0],r.args[1],n):"objid"===e?this._decodeObjid(t,null,null,n):"gentime"===e||"utctime"===e?this._decodeTime(t,e,n):"null_"===e?this._decodeNull(t,n):"bool"===e?this._decodeBool(t,n):"objDesc"===e?this._decodeStr(t,e,n):"int"===e||"enum"===e?this._decodeInt(t,r.args&&r.args[0],n):null!==r.use?this._getUse(r.use,t._reporterState.obj)._decode(t,n):t.error("unknown tag: "+e)},c.prototype._getUse=function(e,t){const n=this._baseState;return n.useDecoder=this._use(e,t),a(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},c.prototype._decodeChoice=function(e,t){const n=this._baseState;let r=null,i=!1;return Object.keys(n.choice).some((function(o){const a=e.save(),s=n.choice[o];try{const n=s._decode(e,t);if(e.isError(n))return!1;r={type:o,value:n},i=!0}catch(t){return e.restore(a),!1}return!0}),this),i?r:e.error("Choice not matched")},c.prototype._createEncoderBuffer=function(e){return new r(e,this.reporter)},c.prototype._encode=function(e,t,n){const r=this._baseState;if(null!==r.default&&r.default===e)return;const i=this._encodeValue(e,t,n);return void 0===i||this._skipDefault(i,t,n)?void 0:i},c.prototype._encodeValue=function(e,t,r){const i=this._baseState;if(null===i.parent)return i.children[0]._encode(e,t||new n);let o=null;if(this.reporter=t,i.optional&&void 0===e){if(null===i.default)return;e=i.default}let a=null,s=!1;if(i.any)o=this._createEncoderBuffer(e);else if(i.choice)o=this._encodeChoice(e,t);else if(i.contains)a=this._getUse(i.contains,r)._encode(e,t),s=!0;else if(i.children)a=i.children.map((function(n){if("null_"===n._baseState.tag)return n._encode(null,t,e);if(null===n._baseState.key)return t.error("Child should have a key");const r=t.enterKey(n._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");const i=n._encode(e[n._baseState.key],t,e);return t.leaveKey(r),i}),this).filter((function(e){return e})),a=this._createEncoderBuffer(a);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const n=this.clone();n._baseState.implicit=null,a=this._createEncoderBuffer(e.map((function(n){const r=this._baseState;return this._getUse(r.args[0],e)._encode(n,t)}),n))}else null!==i.use?o=this._getUse(i.use,r)._encode(e,t):(a=this._encodePrimitive(i.tag,e),s=!0);if(!i.any&&null===i.choice){const e=null!==i.implicit?i.implicit:i.tag,n=null===i.implicit?"universal":"context";null===e?null===i.use&&t.error("Tag could be omitted only for .use()"):null===i.use&&(o=this._encodeComposite(e,s,n,a))}return null!==i.explicit&&(o=this._encodeComposite(i.explicit,!1,"context",o)),o},c.prototype._encodeChoice=function(e,t){const n=this._baseState,r=n.choice[e.type];return r||a(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),r._encode(e.value,t)},c.prototype._encodePrimitive=function(e,t){const n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,n.args&&n.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},c.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},c.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}})),o.register("5n27l",(function(e,n){var r;t(e.exports,"Reporter",(()=>r),(e=>r=e));var i=o("67rjf");function a(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function s(e,t){this.path=e,this.rethrow(t)}r=a,a.prototype.isError=function(e){return e instanceof s},a.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},a.prototype.restore=function(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},a.prototype.enterKey=function(e){return this._reporterState.path.push(e)},a.prototype.exitKey=function(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)},a.prototype.leaveKey=function(e,t,n){const r=this._reporterState;this.exitKey(e),null!==r.obj&&(r.obj[t]=n)},a.prototype.path=function(){return this._reporterState.path.join("/")},a.prototype.enterObject=function(){const e=this._reporterState,t=e.obj;return e.obj={},t},a.prototype.leaveObject=function(e){const t=this._reporterState,n=t.obj;return t.obj=e,n},a.prototype.error=function(e){let t;const n=this._reporterState,r=e instanceof s;if(t=r?e:new s(n.path.map((function(e){return"["+JSON.stringify(e)+"]"})).join(""),e.message||e,e.stack),!n.options.partial)throw t;return r||n.errors.push(t),t},a.prototype.wrapResult=function(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},i(s,Error),s.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,s),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}})),o.register("1nyT1",(function(e,n){var r,i;t(e.exports,"DecoderBuffer",(()=>i),(e=>i=e)),t(e.exports,"EncoderBuffer",(()=>r),(e=>r=e));var a=o("67rjf"),s=o("5n27l").Reporter,u=o("3UXQB").Buffer;function c(e,t){s.call(this,t),u.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function l(e,t){if(Array.isArray(e))this.length=0,this.value=e.map((function(e){return l.isEncoderBuffer(e)||(e=new l(e,t)),this.length+=e.length,e}),this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=u.byteLength(e);else{if(!u.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}a(c,s),i=c,c.isDecoderBuffer=function(e){if(e instanceof c)return!0;return"object"==typeof e&&u.isBuffer(e.base)&&"DecoderBuffer"===e.constructor.name&&"number"==typeof e.offset&&"number"==typeof e.length&&"function"==typeof e.save&&"function"==typeof e.restore&&"function"==typeof e.isEmpty&&"function"==typeof e.readUInt8&&"function"==typeof e.skip&&"function"==typeof e.raw},c.prototype.save=function(){return{offset:this.offset,reporter:s.prototype.save.call(this)}},c.prototype.restore=function(e){const t=new c(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,s.prototype.restore.call(this,e.reporter),t},c.prototype.isEmpty=function(){return this.offset===this.length},c.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},c.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const n=new c(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n},c.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},r=l,l.isEncoderBuffer=function(e){if(e instanceof l)return!0;return"object"==typeof e&&"EncoderBuffer"===e.constructor.name&&"number"==typeof e.length&&"function"==typeof e.join},l.prototype.join=function(e,t){return e||(e=u.alloc(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(n){n.join(e,t),t+=n.length})):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):u.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}})),o.register("2FK3U",(function(e,n){var r,i,o,a;function s(e){const t={};return Object.keys(e).forEach((function(n){(0|n)==n&&(n|=0);const r=e[n];t[r]=n})),t}t(e.exports,"tagByName",(()=>o),(e=>o=e)),t(e.exports,"tag",(()=>i),(e=>i=e)),t(e.exports,"tagClassByName",(()=>a),(e=>a=e)),t(e.exports,"tagClass",(()=>r),(e=>r=e)),a=s(r={0:"universal",1:"application",2:"context",3:"private"}),o=s(i={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"})})),o.register("5UWju",(function(e,t){"use strict";var n=o("67rjf"),r=o("6ppas");function i(e){r.call(this,e),this.enc="pem"}n(i,r),e.exports=i,i.prototype.encode=function(e,t){const n=r.prototype.encode.call(this,e).toString("base64"),i=["-----BEGIN "+t.label+"-----"];for(let e=0;e<n.length;e+=64)i.push(n.slice(e,e+64));return i.push("-----END "+t.label+"-----"),i.join("\n")}})),o.register("10xLX",(function(e,t){"use strict";const n=e.exports;n.der=o("2alKG"),n.pem=o("OHs6v")})),o.register("2alKG",(function(e,t){"use strict";var n=o("67rjf"),r=o("teaH7"),i=o("1nyT1").DecoderBuffer,a=o("1mzjX"),s=o("2FK3U");function u(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new c,this.tree._init(e.body)}function c(e){a.call(this,"der",e)}function l(e,t){let n=e.readUInt8(t);if(e.isError(n))return n;const r=s.tagClass[n>>6],i=0==(32&n);if(31==(31&n)){let r=n;for(n=0;128==(128&r);){if(r=e.readUInt8(t),e.isError(r))return r;n<<=7,n|=127&r}}else n&=31;return{cls:r,primitive:i,tag:n,tagStr:s.tag[n]}}function h(e,t,n){let r=e.readUInt8(n);if(e.isError(r))return r;if(!t&&128===r)return null;if(0==(128&r))return r;const i=127&r;if(i>4)return e.error("length octect is too long");r=0;for(let t=0;t<i;t++){r<<=8;const t=e.readUInt8(n);if(e.isError(t))return t;r|=t}return r}e.exports=u,u.prototype.decode=function(e,t){return i.isDecoderBuffer(e)||(e=new i(e,t)),this.tree._decode(e,t)},n(c,a),c.prototype._peekTag=function(e,t,n){if(e.isEmpty())return!1;const r=e.save(),i=l(e,'Failed to peek tag: "'+t+'"');return e.isError(i)?i:(e.restore(r),i.tag===t||i.tagStr===t||i.tagStr+"of"===t||n)},c.prototype._decodeTag=function(e,t,n){const r=l(e,'Failed to decode tag of "'+t+'"');if(e.isError(r))return r;let i=h(e,r.primitive,'Failed to get length of "'+t+'"');if(e.isError(i))return i;if(!n&&r.tag!==t&&r.tagStr!==t&&r.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(r.primitive||null!==i)return e.skip(i,'Failed to match body of: "'+t+'"');const o=e.save(),a=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(a)?a:(i=e.offset-o.offset,e.restore(o),e.skip(i,'Failed to match body of: "'+t+'"'))},c.prototype._skipUntilEnd=function(e,t){for(;;){const n=l(e,t);if(e.isError(n))return n;const r=h(e,n.primitive,t);if(e.isError(r))return r;let i;if(i=n.primitive||null!==r?e.skip(r):this._skipUntilEnd(e,t),e.isError(i))return i;if("end"===n.tagStr)break}},c.prototype._decodeList=function(e,t,n,r){const i=[];for(;!e.isEmpty();){const t=this._peekTag(e,"end");if(e.isError(t))return t;const o=n.decode(e,"der",r);if(e.isError(o)&&t)break;i.push(o)}return i},c.prototype._decodeStr=function(e,t){if("bitstr"===t){const t=e.readUInt8();return e.isError(t)?t:{unused:t,data:e.raw()}}if("bmpstr"===t){const t=e.raw();if(t.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");let n="";for(let e=0;e<t.length/2;e++)n+=String.fromCharCode(t.readUInt16BE(2*e));return n}if("numstr"===t){const t=e.raw().toString("ascii");return this._isNumstr(t)?t:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){const t=e.raw().toString("ascii");return this._isPrintstr(t)?t:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},c.prototype._decodeObjid=function(e,t,n){let r;const i=[];let o=0,a=0;for(;!e.isEmpty();)a=e.readUInt8(),o<<=7,o|=127&a,0==(128&a)&&(i.push(o),o=0);128&a&&i.push(o);const s=i[0]/40|0,u=i[0]%40;if(r=n?i:[s,u].concat(i.slice(1)),t){let e=t[r.join(" ")];void 0===e&&(e=t[r.join(".")]),void 0!==e&&(r=e)}return r},c.prototype._decodeTime=function(e,t){const n=e.raw().toString();let r,i,o,a,s,u;if("gentime"===t)r=0|n.slice(0,4),i=0|n.slice(4,6),o=0|n.slice(6,8),a=0|n.slice(8,10),s=0|n.slice(10,12),u=0|n.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");r=0|n.slice(0,2),i=0|n.slice(2,4),o=0|n.slice(4,6),a=0|n.slice(6,8),s=0|n.slice(8,10),u=0|n.slice(10,12),r=r<70?2e3+r:1900+r}return Date.UTC(r,i-1,o,a,s,u,0)},c.prototype._decodeNull=function(){return null},c.prototype._decodeBool=function(e){const t=e.readUInt8();return e.isError(t)?t:0!==t},c.prototype._decodeInt=function(e,t){const n=e.raw();let i=new r(n);return t&&(i=t[i.toString(10)]||i),i},c.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}})),o.register("OHs6v",(function(e,t){"use strict";var n=o("67rjf"),r=o("3UXQB").Buffer,i=o("2alKG");function a(e){i.call(this,e),this.enc="pem"}n(a,i),e.exports=a,a.prototype.decode=function(e,t){const n=e.toString().split(/[\r\n]+/g),o=t.label.toUpperCase(),a=/^-----(BEGIN|END) ([^-]+)-----$/;let s=-1,u=-1;for(let e=0;e<n.length;e++){const t=n[e].match(a);if(null!==t&&t[2]===o){if(-1!==s){if("END"!==t[1])break;u=e;break}if("BEGIN"!==t[1])break;s=e}}if(-1===s||-1===u)throw new Error("PEM section not found for: "+o);const c=n.slice(s+1,u).join("");c.replace(/[^a-z0-9+/=]+/gi,"");const l=r.from(c,"base64");return i.prototype.decode.call(this,l,t)}})),o.register("40gTe",(function(e,t){"use strict";const n=e.exports;n.Reporter=o("5n27l").Reporter,n.DecoderBuffer=o("1nyT1").DecoderBuffer,n.EncoderBuffer=o("1nyT1").EncoderBuffer,n.Node=o("1mzjX")})),o.register("4BORy",(function(e,t){"use strict";const n=e.exports;n._reverse=function(e){const t={};return Object.keys(e).forEach((function(n){(0|n)==n&&(n|=0);const r=e[n];t[r]=n})),t},n.der=o("2FK3U")})),o.register("6M7Lr",(function(e,t){"use strict";var n=o("3dKFn"),r=n.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),i=n.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),a=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),s=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())})),u=n.define("RelativeDistinguishedName",(function(){this.setof(i)})),c=n.define("RDNSequence",(function(){this.seqof(u)})),l=n.define("Name",(function(){this.choice({rdnSequence:this.use(c)})})),h=n.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(r),this.key("notAfter").use(r))})),f=n.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),d=n.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(a),this.key("issuer").use(l),this.key("validity").use(h),this.key("subject").use(l),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(f).optional())})),p=n.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(d),this.key("signatureAlgorithm").use(a),this.key("signatureValue").bitstr())}));e.exports=p})),o.register("9gMqg",(function(e,t){e.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')})),o.register("38Zut",(function(e,t){var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,r=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,a=o("1bB8M"),s=o("4rMrO"),u=o("6aUge").Buffer;e.exports=function(e,t){var o,c=e.toString(),l=c.match(n);if(l){var h="aes"+l[1],f=u.from(l[2],"hex"),d=u.from(l[3].replace(/[\r\n]/g,""),"base64"),p=a(t,f.slice(0,8),parseInt(l[1],10)).key,m=[],v=s.createDecipheriv(h,p,f);m.push(v.update(d)),m.push(v.final()),o=u.concat(m)}else{var g=c.match(i);o=u.from(g[2].replace(/[\r\n]/g,""),"base64")}return{tag:c.match(r)[1],data:o}}})),o.register("5XkmN",(function(e,t){e.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')})),o.register("1p9Fd",(function(e,t){var n=o("6aUge").Buffer,r=o("yehFW"),i=o("3JLwK").ec,a=o("4yHxi"),s=o("5XkmN");function u(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}e.exports=function(e,t,o,c,l){var h=a(o);if("ec"===h.type){if("ecdsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");return function(e,t,n){var r=s[n.data.algorithm.curve.join(".")];if(!r)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));var o=new i(r),a=n.data.subjectPrivateKey.data;return o.verify(t,e,a)}(e,t,h)}if("dsa"===h.type){if("dsa"!==c)throw new Error("wrong public key type");return function(e,t,n){var i=n.data.p,o=n.data.q,s=n.data.g,c=n.data.pub_key,l=a.signature.decode(e,"der"),h=l.s,f=l.r;u(h,o),u(f,o);var d=r.mont(i),p=h.invm(o);return 0===s.toRed(d).redPow(new r(t).mul(p).mod(o)).fromRed().mul(c.toRed(d).redPow(f.mul(p).mod(o)).fromRed()).mod(i).mod(o).cmp(f)}(e,t,h)}if("rsa"!==c&&"ecdsa/rsa"!==c)throw new Error("wrong public key type");t=n.concat([l,t]);for(var f=h.modulus.byteLength(),d=[1],p=0;t.length+d.length+2<f;)d.push(255),p++;d.push(0);for(var m=-1;++m<t.length;)d.push(t[m]);d=n.from(d);var v=r.mont(h.modulus);e=(e=new r(e).toRed(v)).redPow(new r(h.publicExponent)),e=n.from(e.fromRed().toArray());var g=p<8?1:0;for(f=Math.min(e.length,d.length),e.length!==d.length&&(g=1),m=-1;++m<f;)g|=e[m]^d[m];return 0===g}})),o.register("6SrWp",(function(e,t){var n=R,r=o("3JLwK"),i=o("78Qmz");e.exports=function(e){return new s(e)};var a={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function s(e){this.curveType=a[e],this.curveType||(this.curveType={name:e}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function u(e,t,r){Array.isArray(e)||(e=e.toArray());var i=new n(e);if(r&&i.length<r){var o=new n(r-i.length);o.fill(0),i=n.concat([o,i])}return t?i.toString(t):i}a.p224=a.secp224r1,a.p256=a.secp256r1=a.prime256v1,a.p192=a.secp192r1=a.prime192v1,a.p384=a.secp384r1,a.p521=a.secp521r1,s.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},s.prototype.computeSecret=function(e,t,r){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),u(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},s.prototype.getPublicKey=function(e,t){var n=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(n[n.length-1]%2?n[0]=7:n[0]=6),u(n,e)},s.prototype.getPrivateKey=function(e){return u(this.keys.getPrivate(),e)},s.prototype.setPublicKey=function(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this.keys._importPublic(e),this},s.prototype.setPrivateKey=function(e,t){t=t||"utf8",n.isBuffer(e)||(e=new n(e,t));var r=new i(e);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this}})),o.register("78Qmz",(function(e,t){!function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function i(e,t,n){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var a;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:o("3V6Bo").Buffer}catch(e){}function s(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function u(e,t,n){var r=s(e,n);return n-1>=t&&(r|=s(e,n-1)<<4),r}function c(e,t,n,r){for(var i=0,o=Math.min(e.length,n),a=t;a<o;a++){var s=e.charCodeAt(a)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},i.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},i.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,a=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=u(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=u(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},i.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,a=o%r,s=Math.min(o,o-a)+n,u=0,l=n;l<s;l+=r)u=c(e,l,l+r,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=c(e,l,e.length,t),l=0;l<a;l++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,s=67108863&a,u=a/67108864|0;n.words[0]=s;for(var c=1;c<r;c++){for(var l=u>>>26,h=67108863&u,f=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=f;d++){var p=c-d|0;l+=(a=(i=0|e.words[p])*(o=0|t.words[d])+h)/67108864|0,h=67108863&a}n.words[c]=0|h,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}i.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?l[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],d=f[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(e);r=(p=p.idivn(d)).isZero()?m+r:l[c-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return n(void 0!==a),this.toArrayLike(a,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===t,c=new e(o),l=this.clone();if(u){for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[s]=a;for(;s<o;s++)c[s]=0}else{for(s=0;s<o-i;s++)c[s]=0;for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[o-s-1]=a}return c},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},i.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var o=0,a=0;a<r.length;a++)o=(t=(0|n.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<n.length;a++)o=(t=(0|n.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,n){var r,i,o,a=e.words,s=t.words,u=n.words,c=0,l=0|a[0],h=8191&l,f=l>>>13,d=0|a[1],p=8191&d,m=d>>>13,v=0|a[2],g=8191&v,y=v>>>13,b=0|a[3],w=8191&b,_=b>>>13,k=0|a[4],S=8191&k,E=k>>>13,M=0|a[5],T=8191&M,C=M>>>13,I=0|a[6],x=8191&I,A=I>>>13,P=0|a[7],O=8191&P,R=P>>>13,D=0|a[8],N=8191&D,L=D>>>13,j=0|a[9],B=8191&j,F=j>>>13,U=0|s[0],q=8191&U,z=U>>>13,V=0|s[1],W=8191&V,H=V>>>13,K=0|s[2],G=8191&K,Y=K>>>13,Q=0|s[3],J=8191&Q,Z=Q>>>13,X=0|s[4],$=8191&X,ee=X>>>13,te=0|s[5],ne=8191&te,re=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],ue=8191&se,ce=se>>>13,le=0|s[8],he=8191&le,fe=le>>>13,de=0|s[9],pe=8191&de,me=de>>>13;n.negative=e.negative^t.negative,n.length=19;var ve=(c+(r=Math.imul(h,q))|0)+((8191&(i=(i=Math.imul(h,z))+Math.imul(f,q)|0))<<13)|0;c=((o=Math.imul(f,z))+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(p,q),i=(i=Math.imul(p,z))+Math.imul(m,q)|0,o=Math.imul(m,z);var ge=(c+(r=r+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,W)|0))<<13)|0;c=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(g,q),i=(i=Math.imul(g,z))+Math.imul(y,q)|0,o=Math.imul(y,z),r=r+Math.imul(p,W)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,H)|0;var ye=(c+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,G)|0))<<13)|0;c=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(w,q),i=(i=Math.imul(w,z))+Math.imul(_,q)|0,o=Math.imul(_,z),r=r+Math.imul(g,W)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(y,W)|0,o=o+Math.imul(y,H)|0,r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,Y)|0;var be=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,Z)|0)+Math.imul(f,J)|0))<<13)|0;c=((o=o+Math.imul(f,Z)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(S,q),i=(i=Math.imul(S,z))+Math.imul(E,q)|0,o=Math.imul(E,z),r=r+Math.imul(w,W)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,H)|0,r=r+Math.imul(g,G)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(y,G)|0,o=o+Math.imul(y,Y)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var we=(c+(r=r+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(f,$)|0))<<13)|0;c=((o=o+Math.imul(f,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(T,q),i=(i=Math.imul(T,z))+Math.imul(C,q)|0,o=Math.imul(C,z),r=r+Math.imul(S,W)|0,i=(i=i+Math.imul(S,H)|0)+Math.imul(E,W)|0,o=o+Math.imul(E,H)|0,r=r+Math.imul(w,G)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(_,G)|0,o=o+Math.imul(_,Y)|0,r=r+Math.imul(g,J)|0,i=(i=i+Math.imul(g,Z)|0)+Math.imul(y,J)|0,o=o+Math.imul(y,Z)|0,r=r+Math.imul(p,$)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,ee)|0;var _e=(c+(r=r+Math.imul(h,ne)|0)|0)+((8191&(i=(i=i+Math.imul(h,re)|0)+Math.imul(f,ne)|0))<<13)|0;c=((o=o+Math.imul(f,re)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(x,q),i=(i=Math.imul(x,z))+Math.imul(A,q)|0,o=Math.imul(A,z),r=r+Math.imul(T,W)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,H)|0,r=r+Math.imul(S,G)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(E,G)|0,o=o+Math.imul(E,Y)|0,r=r+Math.imul(w,J)|0,i=(i=i+Math.imul(w,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,r=r+Math.imul(g,$)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(y,$)|0,o=o+Math.imul(y,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,re)|0;var ke=(c+(r=r+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,ae)|0)+Math.imul(f,oe)|0))<<13)|0;c=((o=o+Math.imul(f,ae)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(O,q),i=(i=Math.imul(O,z))+Math.imul(R,q)|0,o=Math.imul(R,z),r=r+Math.imul(x,W)|0,i=(i=i+Math.imul(x,H)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,H)|0,r=r+Math.imul(T,G)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,Y)|0,r=r+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,Z)|0,r=r+Math.imul(w,$)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,ee)|0,r=r+Math.imul(g,ne)|0,i=(i=i+Math.imul(g,re)|0)+Math.imul(y,ne)|0,o=o+Math.imul(y,re)|0,r=r+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0;var Se=(c+(r=r+Math.imul(h,ue)|0)|0)+((8191&(i=(i=i+Math.imul(h,ce)|0)+Math.imul(f,ue)|0))<<13)|0;c=((o=o+Math.imul(f,ce)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(N,q),i=(i=Math.imul(N,z))+Math.imul(L,q)|0,o=Math.imul(L,z),r=r+Math.imul(O,W)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,H)|0,r=r+Math.imul(x,G)|0,i=(i=i+Math.imul(x,Y)|0)+Math.imul(A,G)|0,o=o+Math.imul(A,Y)|0,r=r+Math.imul(T,J)|0,i=(i=i+Math.imul(T,Z)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,r=r+Math.imul(S,$)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,ee)|0,r=r+Math.imul(w,ne)|0,i=(i=i+Math.imul(w,re)|0)+Math.imul(_,ne)|0,o=o+Math.imul(_,re)|0,r=r+Math.imul(g,oe)|0,i=(i=i+Math.imul(g,ae)|0)+Math.imul(y,oe)|0,o=o+Math.imul(y,ae)|0,r=r+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0;var Ee=(c+(r=r+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,fe)|0)+Math.imul(f,he)|0))<<13)|0;c=((o=o+Math.imul(f,fe)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(B,q),i=(i=Math.imul(B,z))+Math.imul(F,q)|0,o=Math.imul(F,z),r=r+Math.imul(N,W)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,H)|0,r=r+Math.imul(O,G)|0,i=(i=i+Math.imul(O,Y)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,Y)|0,r=r+Math.imul(x,J)|0,i=(i=i+Math.imul(x,Z)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,r=r+Math.imul(T,$)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(E,ne)|0,o=o+Math.imul(E,re)|0,r=r+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,ae)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,r=r+Math.imul(g,ue)|0,i=(i=i+Math.imul(g,ce)|0)+Math.imul(y,ue)|0,o=o+Math.imul(y,ce)|0,r=r+Math.imul(p,he)|0,i=(i=i+Math.imul(p,fe)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,fe)|0;var Me=(c+(r=r+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,me)|0)+Math.imul(f,pe)|0))<<13)|0;c=((o=o+Math.imul(f,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(B,W),i=(i=Math.imul(B,H))+Math.imul(F,W)|0,o=Math.imul(F,H),r=r+Math.imul(N,G)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(L,G)|0,o=o+Math.imul(L,Y)|0,r=r+Math.imul(O,J)|0,i=(i=i+Math.imul(O,Z)|0)+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,r=r+Math.imul(x,$)|0,i=(i=i+Math.imul(x,ee)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,ee)|0,r=r+Math.imul(T,ne)|0,i=(i=i+Math.imul(T,re)|0)+Math.imul(C,ne)|0,o=o+Math.imul(C,re)|0,r=r+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,ae)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,ae)|0,r=r+Math.imul(w,ue)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,ce)|0,r=r+Math.imul(g,he)|0,i=(i=i+Math.imul(g,fe)|0)+Math.imul(y,he)|0,o=o+Math.imul(y,fe)|0;var Te=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(B,G),i=(i=Math.imul(B,Y))+Math.imul(F,G)|0,o=Math.imul(F,Y),r=r+Math.imul(N,J)|0,i=(i=i+Math.imul(N,Z)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,Z)|0,r=r+Math.imul(O,$)|0,i=(i=i+Math.imul(O,ee)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,ee)|0,r=r+Math.imul(x,ne)|0,i=(i=i+Math.imul(x,re)|0)+Math.imul(A,ne)|0,o=o+Math.imul(A,re)|0,r=r+Math.imul(T,oe)|0,i=(i=i+Math.imul(T,ae)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,ae)|0,r=r+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(E,ue)|0,o=o+Math.imul(E,ce)|0,r=r+Math.imul(w,he)|0,i=(i=i+Math.imul(w,fe)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,fe)|0;var Ce=(c+(r=r+Math.imul(g,pe)|0)|0)+((8191&(i=(i=i+Math.imul(g,me)|0)+Math.imul(y,pe)|0))<<13)|0;c=((o=o+Math.imul(y,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(B,J),i=(i=Math.imul(B,Z))+Math.imul(F,J)|0,o=Math.imul(F,Z),r=r+Math.imul(N,$)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,ee)|0,r=r+Math.imul(O,ne)|0,i=(i=i+Math.imul(O,re)|0)+Math.imul(R,ne)|0,o=o+Math.imul(R,re)|0,r=r+Math.imul(x,oe)|0,i=(i=i+Math.imul(x,ae)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,ae)|0,r=r+Math.imul(T,ue)|0,i=(i=i+Math.imul(T,ce)|0)+Math.imul(C,ue)|0,o=o+Math.imul(C,ce)|0,r=r+Math.imul(S,he)|0,i=(i=i+Math.imul(S,fe)|0)+Math.imul(E,he)|0,o=o+Math.imul(E,fe)|0;var Ie=(c+(r=r+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,me)|0)+Math.imul(_,pe)|0))<<13)|0;c=((o=o+Math.imul(_,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(B,$),i=(i=Math.imul(B,ee))+Math.imul(F,$)|0,o=Math.imul(F,ee),r=r+Math.imul(N,ne)|0,i=(i=i+Math.imul(N,re)|0)+Math.imul(L,ne)|0,o=o+Math.imul(L,re)|0,r=r+Math.imul(O,oe)|0,i=(i=i+Math.imul(O,ae)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,ae)|0,r=r+Math.imul(x,ue)|0,i=(i=i+Math.imul(x,ce)|0)+Math.imul(A,ue)|0,o=o+Math.imul(A,ce)|0,r=r+Math.imul(T,he)|0,i=(i=i+Math.imul(T,fe)|0)+Math.imul(C,he)|0,o=o+Math.imul(C,fe)|0;var xe=(c+(r=r+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(E,pe)|0))<<13)|0;c=((o=o+Math.imul(E,me)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(B,ne),i=(i=Math.imul(B,re))+Math.imul(F,ne)|0,o=Math.imul(F,re),r=r+Math.imul(N,oe)|0,i=(i=i+Math.imul(N,ae)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,ae)|0,r=r+Math.imul(O,ue)|0,i=(i=i+Math.imul(O,ce)|0)+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,r=r+Math.imul(x,he)|0,i=(i=i+Math.imul(x,fe)|0)+Math.imul(A,he)|0,o=o+Math.imul(A,fe)|0;var Ae=(c+(r=r+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(B,oe),i=(i=Math.imul(B,ae))+Math.imul(F,oe)|0,o=Math.imul(F,ae),r=r+Math.imul(N,ue)|0,i=(i=i+Math.imul(N,ce)|0)+Math.imul(L,ue)|0,o=o+Math.imul(L,ce)|0,r=r+Math.imul(O,he)|0,i=(i=i+Math.imul(O,fe)|0)+Math.imul(R,he)|0,o=o+Math.imul(R,fe)|0;var Pe=(c+(r=r+Math.imul(x,pe)|0)|0)+((8191&(i=(i=i+Math.imul(x,me)|0)+Math.imul(A,pe)|0))<<13)|0;c=((o=o+Math.imul(A,me)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,r=Math.imul(B,ue),i=(i=Math.imul(B,ce))+Math.imul(F,ue)|0,o=Math.imul(F,ce),r=r+Math.imul(N,he)|0,i=(i=i+Math.imul(N,fe)|0)+Math.imul(L,he)|0,o=o+Math.imul(L,fe)|0;var Oe=(c+(r=r+Math.imul(O,pe)|0)|0)+((8191&(i=(i=i+Math.imul(O,me)|0)+Math.imul(R,pe)|0))<<13)|0;c=((o=o+Math.imul(R,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(B,he),i=(i=Math.imul(B,fe))+Math.imul(F,he)|0,o=Math.imul(F,fe);var Re=(c+(r=r+Math.imul(N,pe)|0)|0)+((8191&(i=(i=i+Math.imul(N,me)|0)+Math.imul(L,pe)|0))<<13)|0;c=((o=o+Math.imul(L,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var De=(c+(r=Math.imul(B,pe))|0)+((8191&(i=(i=Math.imul(B,me))+Math.imul(F,pe)|0))<<13)|0;return c=((o=Math.imul(F,me))+(i>>>13)|0)+(De>>>26)|0,De&=67108863,u[0]=ve,u[1]=ge,u[2]=ye,u[3]=be,u[4]=we,u[5]=_e,u[6]=ke,u[7]=Se,u[8]=Ee,u[9]=Me,u[10]=Te,u[11]=Ce,u[12]=Ie,u[13]=xe,u[14]=Ae,u[15]=Pe,u[16]=Oe,u[17]=Re,u[18]=De,0!==c&&(u[19]=c,n.length++),n};function m(e,t,n){return(new v).mulp(e,t,n)}function v(e,t){this.x=e,this.y=t}Math.imul||(p=d),i.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):n<63?d(this,e,t):n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,h=(0|e.words[l])*(0|t.words[c]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,e,t):m(this,e,t)},v.prototype.makeRBT=function(e){for(var t=new Array(e),n=i.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},v.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},v.prototype.permute=function(e,t,n,r,i,o){for(var a=0;a<o;a++)r[a]=t[e[a]],i[a]=n[e[a]]},v.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var h=u,f=c,d=0;d<a;d++){var p=n[l+d],m=r[l+d],v=n[l+d+a],g=r[l+d+a],y=h*v-f*g;g=h*g+f*v,v=y,n[l+d]=p+v,r[l+d]=m+g,n[l+d+a]=p-v,r[l+d+a]=m-g,d!==s&&(y=u*h-c*f,f=u*f+c*h,h=y)}},v.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},v.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},v.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},v.prototype.convert13b=function(e,t,r,i){for(var o=0,a=0;a<t;a++)o+=0|e[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},v.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},v.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),f=n.words;f.length=r,this.convert13b(e.words,e.length,a,r),this.convert13b(t.words,t.length,c,r),this.transform(a,o,s,u,r,i),this.transform(c,o,l,h,r,i);for(var d=0;d<r;d++){var p=s[d]*l[d]-u[d]*h[d];u[d]=s[d]*h[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,r),this.transform(s,u,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),m(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[r]=67108863&o}return 0!==t&&(this.words[r]=t,this.length++),this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}(e);if(0===t.length)return new i(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var o=n.sqr();r<t.length;r++,o=o.sqr())0!==t[r]&&(n=n.mul(o));return n},i.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<r;this.words[t]=u|a,a=s>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},i.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},i.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,r){var i,o,a=e.length+r;this._expand(a);var s=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+s;var u=(0|e.words[i])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),o=e,a=0|o.words[o.length-1];0!==(n=26-this._countBits(a))&&(o=o.ushln(n),r.iushln(n),a=0|o.words[o.length-1]);var s,u=r.length-o.length;if("mod"!==t){(s=new i(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=r.clone()._ishlnsubmul(o,1,u);0===l.negative&&(r=l,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|r.words[o.length+h])+(0|r.words[o.length+h-1]);for(f=Math.min(f/a|0,67108863),r._ishlnsubmul(o,f,h);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(o,1,h),r.isZero()||(r.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},i.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(o=s.div.neg()),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(e)),{div:o,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(o=s.div.neg()),{div:o,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t);var o,a,s},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){n(e<=67108863);for(var t=67108864%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},i.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new i(1),a=new i(0),s=new i(0),u=new i(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),h=t.clone();!t.isZero();){for(var f=0,d=1;0==(t.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(l),a.isub(h)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;0==(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(h)),s.iushrn(1),u.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(s),a.isub(u)):(r.isub(t),s.isub(o),u.isub(a))}return{a:s,b:u,gcd:r.iushln(c)}},i.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o,a=new i(1),s=new i(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(s)):(r.isub(t),s.isub(a))}return(o=0===t.cmpn(1)?a:s).cmpn(0)<0&&o.iadd(e),o},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new S(e)},i.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function E(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},r(b,y),b.prototype.split=function(e,t){for(var n=4194303,r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&n,i=10;i<e.length;i++){var a=0|e.words[i];e.words[i-10]=(a&n)<<4|o>>>22,o=a}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(w,y),r(_,y),r(k,y),k.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new w;else if("p192"===e)t=new _;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new k}return g[e]=t,t},S.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},S.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new i(1)).iushrn(2);return this.pow(e,r)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);n(!o.isZero());var s=new i(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,o),f=this.pow(e,o.addn(1).iushrn(1)),d=this.pow(e,o),p=a;0!==d.cmp(s);){for(var m=d,v=0;0!==m.cmp(s);v++)m=m.redSqr();n(v<p);var g=this.pow(h,new i(1).iushln(p-v-1));f=f.redMul(g),h=g.redSqr(),d=d.redMul(h),p=v}return f},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new i(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var o=n[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=u-1;l>=0;l--){var h=c>>l&1;o!==n[0]&&(o=this.sqr(o)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===r&&0===l)&&(o=this.mul(o,n[a]),s=0,a=0)):s=0}u=26}return o},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new E(e)},r(E,S),E.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},E.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},E.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=n.isub(r).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a._forceRed(this)},E.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)})),o.register("20m1B",(function(e,n){var r,i,a,s;t(e.exports,"privateEncrypt",(()=>r),(e=>r=e)),t(e.exports,"publicEncrypt",(()=>s),(e=>s=e)),t(e.exports,"privateDecrypt",(()=>i),(e=>i=e)),t(e.exports,"publicDecrypt",(()=>a),(e=>a=e)),s=o("1Oh3s"),i=o("1cN2w"),r=function(e,t){return s(e,t,!0)},a=function(e,t){return i(e,t,!0)}})),o.register("1Oh3s",(function(e,t){var n=o("4yHxi"),r=o("3pfpW"),i=o("uk3ap"),a=o("7i9NA"),s=o("7gwLX"),u=o("3qY3Z"),c=o("5VGIo"),l=o("Ib0dO"),h=o("6aUge").Buffer;e.exports=function(e,t,o){var f;f=e.padding?e.padding:o?1:4;var d,p=n(e);if(4===f)d=function(e,t){var n=e.modulus.byteLength(),o=t.length,c=i("sha1").update(h.alloc(0)).digest(),l=c.length,f=2*l;if(o>n-f-2)throw new Error("message too long");var d=h.alloc(n-o-f-2),p=n-l-1,m=r(l),v=s(h.concat([c,d,h.alloc(1,1),t],p),a(m,p)),g=s(m,a(v,l));return new u(h.concat([h.alloc(1),g,v],n))}(p,t);else if(1===f)d=function(e,t,n){var i,o=t.length,a=e.modulus.byteLength();if(o>a-11)throw new Error("message too long");i=n?h.alloc(a-o-3,255):function(e){var t,n=h.allocUnsafe(e),i=0,o=r(2*e),a=0;for(;i<e;)a===o.length&&(o=r(2*e),a=0),(t=o[a++])&&(n[i++]=t);return n}(a-o-3);return new u(h.concat([h.from([0,n?1:2]),i,h.alloc(1),t],a))}(p,t,o);else{if(3!==f)throw new Error("unknown padding");if((d=new u(t)).cmp(p.modulus)>=0)throw new Error("data too long for modulus")}return o?l(d,p):c(d,p)}})),o.register("7i9NA",(function(e,t){var n=o("uk3ap"),r=o("6aUge").Buffer;function i(e){var t=r.allocUnsafe(4);return t.writeUInt32BE(e,0),t}e.exports=function(e,t){for(var o,a=r.alloc(0),s=0;a.length<t;)o=i(s++),a=r.concat([a,n("sha1").update(e).update(o).digest()]);return a.slice(0,t)}})),o.register("7gwLX",(function(e,t){e.exports=function(e,t){for(var n=e.length,r=-1;++r<n;)e[r]^=t[r];return e}})),o.register("3qY3Z",(function(e,t){!function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function i(e,t,n){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var a;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:o("3V6Bo").Buffer}catch(e){}function s(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function u(e,t,n){var r=s(e,n);return n-1>=t&&(r|=s(e,n-1)<<4),r}function c(e,t,n,r){for(var i=0,o=Math.min(e.length,n),a=t;a<o;a++){var s=e.charCodeAt(a)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},i.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},i.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,a=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=u(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=u(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this.strip()},i.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,a=o%r,s=Math.min(o,o-a)+n,u=0,l=n;l<s;l+=r)u=c(e,l,l+r,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var h=1;for(u=c(e,l,e.length,t),l=0;l<a;l++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,s=67108863&a,u=a/67108864|0;n.words[0]=s;for(var c=1;c<r;c++){for(var l=u>>>26,h=67108863&u,f=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=f;d++){var p=c-d|0;l+=(a=(i=0|e.words[p])*(o=0|t.words[d])+h)/67108864|0,h=67108863&a}n.words[c]=0|h,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}i.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?l[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var c=h[e],d=f[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(d).toString(e);r=(p=p.idivn(d)).isZero()?m+r:l[c-m.length]+m+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return n(void 0!==a),this.toArrayLike(a,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===t,c=new e(o),l=this.clone();if(u){for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[s]=a;for(;s<o;s++)c[s]=0}else{for(s=0;s<o-i;s++)c[s]=0;for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[o-s-1]=a}return c},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return n(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return n(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return n(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},i.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var o=0,a=0;a<r.length;a++)o=(t=(0|n.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<n.length;a++)o=(t=(0|n.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,n){var r,i,o,a=e.words,s=t.words,u=n.words,c=0,l=0|a[0],h=8191&l,f=l>>>13,d=0|a[1],p=8191&d,m=d>>>13,v=0|a[2],g=8191&v,y=v>>>13,b=0|a[3],w=8191&b,_=b>>>13,k=0|a[4],S=8191&k,E=k>>>13,M=0|a[5],T=8191&M,C=M>>>13,I=0|a[6],x=8191&I,A=I>>>13,P=0|a[7],O=8191&P,R=P>>>13,D=0|a[8],N=8191&D,L=D>>>13,j=0|a[9],B=8191&j,F=j>>>13,U=0|s[0],q=8191&U,z=U>>>13,V=0|s[1],W=8191&V,H=V>>>13,K=0|s[2],G=8191&K,Y=K>>>13,Q=0|s[3],J=8191&Q,Z=Q>>>13,X=0|s[4],$=8191&X,ee=X>>>13,te=0|s[5],ne=8191&te,re=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],ue=8191&se,ce=se>>>13,le=0|s[8],he=8191&le,fe=le>>>13,de=0|s[9],pe=8191&de,me=de>>>13;n.negative=e.negative^t.negative,n.length=19;var ve=(c+(r=Math.imul(h,q))|0)+((8191&(i=(i=Math.imul(h,z))+Math.imul(f,q)|0))<<13)|0;c=((o=Math.imul(f,z))+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(p,q),i=(i=Math.imul(p,z))+Math.imul(m,q)|0,o=Math.imul(m,z);var ge=(c+(r=r+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,W)|0))<<13)|0;c=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(g,q),i=(i=Math.imul(g,z))+Math.imul(y,q)|0,o=Math.imul(y,z),r=r+Math.imul(p,W)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(m,W)|0,o=o+Math.imul(m,H)|0;var ye=(c+(r=r+Math.imul(h,G)|0)|0)+((8191&(i=(i=i+Math.imul(h,Y)|0)+Math.imul(f,G)|0))<<13)|0;c=((o=o+Math.imul(f,Y)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(w,q),i=(i=Math.imul(w,z))+Math.imul(_,q)|0,o=Math.imul(_,z),r=r+Math.imul(g,W)|0,i=(i=i+Math.imul(g,H)|0)+Math.imul(y,W)|0,o=o+Math.imul(y,H)|0,r=r+Math.imul(p,G)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,Y)|0;var be=(c+(r=r+Math.imul(h,J)|0)|0)+((8191&(i=(i=i+Math.imul(h,Z)|0)+Math.imul(f,J)|0))<<13)|0;c=((o=o+Math.imul(f,Z)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(S,q),i=(i=Math.imul(S,z))+Math.imul(E,q)|0,o=Math.imul(E,z),r=r+Math.imul(w,W)|0,i=(i=i+Math.imul(w,H)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,H)|0,r=r+Math.imul(g,G)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(y,G)|0,o=o+Math.imul(y,Y)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(m,J)|0,o=o+Math.imul(m,Z)|0;var we=(c+(r=r+Math.imul(h,$)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(f,$)|0))<<13)|0;c=((o=o+Math.imul(f,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(T,q),i=(i=Math.imul(T,z))+Math.imul(C,q)|0,o=Math.imul(C,z),r=r+Math.imul(S,W)|0,i=(i=i+Math.imul(S,H)|0)+Math.imul(E,W)|0,o=o+Math.imul(E,H)|0,r=r+Math.imul(w,G)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(_,G)|0,o=o+Math.imul(_,Y)|0,r=r+Math.imul(g,J)|0,i=(i=i+Math.imul(g,Z)|0)+Math.imul(y,J)|0,o=o+Math.imul(y,Z)|0,r=r+Math.imul(p,$)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(m,$)|0,o=o+Math.imul(m,ee)|0;var _e=(c+(r=r+Math.imul(h,ne)|0)|0)+((8191&(i=(i=i+Math.imul(h,re)|0)+Math.imul(f,ne)|0))<<13)|0;c=((o=o+Math.imul(f,re)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(x,q),i=(i=Math.imul(x,z))+Math.imul(A,q)|0,o=Math.imul(A,z),r=r+Math.imul(T,W)|0,i=(i=i+Math.imul(T,H)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,H)|0,r=r+Math.imul(S,G)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(E,G)|0,o=o+Math.imul(E,Y)|0,r=r+Math.imul(w,J)|0,i=(i=i+Math.imul(w,Z)|0)+Math.imul(_,J)|0,o=o+Math.imul(_,Z)|0,r=r+Math.imul(g,$)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(y,$)|0,o=o+Math.imul(y,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(m,ne)|0,o=o+Math.imul(m,re)|0;var ke=(c+(r=r+Math.imul(h,oe)|0)|0)+((8191&(i=(i=i+Math.imul(h,ae)|0)+Math.imul(f,oe)|0))<<13)|0;c=((o=o+Math.imul(f,ae)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(O,q),i=(i=Math.imul(O,z))+Math.imul(R,q)|0,o=Math.imul(R,z),r=r+Math.imul(x,W)|0,i=(i=i+Math.imul(x,H)|0)+Math.imul(A,W)|0,o=o+Math.imul(A,H)|0,r=r+Math.imul(T,G)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(C,G)|0,o=o+Math.imul(C,Y)|0,r=r+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Z)|0)+Math.imul(E,J)|0,o=o+Math.imul(E,Z)|0,r=r+Math.imul(w,$)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,ee)|0,r=r+Math.imul(g,ne)|0,i=(i=i+Math.imul(g,re)|0)+Math.imul(y,ne)|0,o=o+Math.imul(y,re)|0,r=r+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,ae)|0)+Math.imul(m,oe)|0,o=o+Math.imul(m,ae)|0;var Se=(c+(r=r+Math.imul(h,ue)|0)|0)+((8191&(i=(i=i+Math.imul(h,ce)|0)+Math.imul(f,ue)|0))<<13)|0;c=((o=o+Math.imul(f,ce)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(N,q),i=(i=Math.imul(N,z))+Math.imul(L,q)|0,o=Math.imul(L,z),r=r+Math.imul(O,W)|0,i=(i=i+Math.imul(O,H)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,H)|0,r=r+Math.imul(x,G)|0,i=(i=i+Math.imul(x,Y)|0)+Math.imul(A,G)|0,o=o+Math.imul(A,Y)|0,r=r+Math.imul(T,J)|0,i=(i=i+Math.imul(T,Z)|0)+Math.imul(C,J)|0,o=o+Math.imul(C,Z)|0,r=r+Math.imul(S,$)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,ee)|0,r=r+Math.imul(w,ne)|0,i=(i=i+Math.imul(w,re)|0)+Math.imul(_,ne)|0,o=o+Math.imul(_,re)|0,r=r+Math.imul(g,oe)|0,i=(i=i+Math.imul(g,ae)|0)+Math.imul(y,oe)|0,o=o+Math.imul(y,ae)|0,r=r+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(m,ue)|0,o=o+Math.imul(m,ce)|0;var Ee=(c+(r=r+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,fe)|0)+Math.imul(f,he)|0))<<13)|0;c=((o=o+Math.imul(f,fe)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(B,q),i=(i=Math.imul(B,z))+Math.imul(F,q)|0,o=Math.imul(F,z),r=r+Math.imul(N,W)|0,i=(i=i+Math.imul(N,H)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,H)|0,r=r+Math.imul(O,G)|0,i=(i=i+Math.imul(O,Y)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,Y)|0,r=r+Math.imul(x,J)|0,i=(i=i+Math.imul(x,Z)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,Z)|0,r=r+Math.imul(T,$)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(E,ne)|0,o=o+Math.imul(E,re)|0,r=r+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,ae)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,ae)|0,r=r+Math.imul(g,ue)|0,i=(i=i+Math.imul(g,ce)|0)+Math.imul(y,ue)|0,o=o+Math.imul(y,ce)|0,r=r+Math.imul(p,he)|0,i=(i=i+Math.imul(p,fe)|0)+Math.imul(m,he)|0,o=o+Math.imul(m,fe)|0;var Me=(c+(r=r+Math.imul(h,pe)|0)|0)+((8191&(i=(i=i+Math.imul(h,me)|0)+Math.imul(f,pe)|0))<<13)|0;c=((o=o+Math.imul(f,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(B,W),i=(i=Math.imul(B,H))+Math.imul(F,W)|0,o=Math.imul(F,H),r=r+Math.imul(N,G)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(L,G)|0,o=o+Math.imul(L,Y)|0,r=r+Math.imul(O,J)|0,i=(i=i+Math.imul(O,Z)|0)+Math.imul(R,J)|0,o=o+Math.imul(R,Z)|0,r=r+Math.imul(x,$)|0,i=(i=i+Math.imul(x,ee)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,ee)|0,r=r+Math.imul(T,ne)|0,i=(i=i+Math.imul(T,re)|0)+Math.imul(C,ne)|0,o=o+Math.imul(C,re)|0,r=r+Math.imul(S,oe)|0,i=(i=i+Math.imul(S,ae)|0)+Math.imul(E,oe)|0,o=o+Math.imul(E,ae)|0,r=r+Math.imul(w,ue)|0,i=(i=i+Math.imul(w,ce)|0)+Math.imul(_,ue)|0,o=o+Math.imul(_,ce)|0,r=r+Math.imul(g,he)|0,i=(i=i+Math.imul(g,fe)|0)+Math.imul(y,he)|0,o=o+Math.imul(y,fe)|0;var Te=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;c=((o=o+Math.imul(m,me)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(B,G),i=(i=Math.imul(B,Y))+Math.imul(F,G)|0,o=Math.imul(F,Y),r=r+Math.imul(N,J)|0,i=(i=i+Math.imul(N,Z)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,Z)|0,r=r+Math.imul(O,$)|0,i=(i=i+Math.imul(O,ee)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,ee)|0,r=r+Math.imul(x,ne)|0,i=(i=i+Math.imul(x,re)|0)+Math.imul(A,ne)|0,o=o+Math.imul(A,re)|0,r=r+Math.imul(T,oe)|0,i=(i=i+Math.imul(T,ae)|0)+Math.imul(C,oe)|0,o=o+Math.imul(C,ae)|0,r=r+Math.imul(S,ue)|0,i=(i=i+Math.imul(S,ce)|0)+Math.imul(E,ue)|0,o=o+Math.imul(E,ce)|0,r=r+Math.imul(w,he)|0,i=(i=i+Math.imul(w,fe)|0)+Math.imul(_,he)|0,o=o+Math.imul(_,fe)|0;var Ce=(c+(r=r+Math.imul(g,pe)|0)|0)+((8191&(i=(i=i+Math.imul(g,me)|0)+Math.imul(y,pe)|0))<<13)|0;c=((o=o+Math.imul(y,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(B,J),i=(i=Math.imul(B,Z))+Math.imul(F,J)|0,o=Math.imul(F,Z),r=r+Math.imul(N,$)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(L,$)|0,o=o+Math.imul(L,ee)|0,r=r+Math.imul(O,ne)|0,i=(i=i+Math.imul(O,re)|0)+Math.imul(R,ne)|0,o=o+Math.imul(R,re)|0,r=r+Math.imul(x,oe)|0,i=(i=i+Math.imul(x,ae)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,ae)|0,r=r+Math.imul(T,ue)|0,i=(i=i+Math.imul(T,ce)|0)+Math.imul(C,ue)|0,o=o+Math.imul(C,ce)|0,r=r+Math.imul(S,he)|0,i=(i=i+Math.imul(S,fe)|0)+Math.imul(E,he)|0,o=o+Math.imul(E,fe)|0;var Ie=(c+(r=r+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,me)|0)+Math.imul(_,pe)|0))<<13)|0;c=((o=o+Math.imul(_,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(B,$),i=(i=Math.imul(B,ee))+Math.imul(F,$)|0,o=Math.imul(F,ee),r=r+Math.imul(N,ne)|0,i=(i=i+Math.imul(N,re)|0)+Math.imul(L,ne)|0,o=o+Math.imul(L,re)|0,r=r+Math.imul(O,oe)|0,i=(i=i+Math.imul(O,ae)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,ae)|0,r=r+Math.imul(x,ue)|0,i=(i=i+Math.imul(x,ce)|0)+Math.imul(A,ue)|0,o=o+Math.imul(A,ce)|0,r=r+Math.imul(T,he)|0,i=(i=i+Math.imul(T,fe)|0)+Math.imul(C,he)|0,o=o+Math.imul(C,fe)|0;var xe=(c+(r=r+Math.imul(S,pe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(E,pe)|0))<<13)|0;c=((o=o+Math.imul(E,me)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(B,ne),i=(i=Math.imul(B,re))+Math.imul(F,ne)|0,o=Math.imul(F,re),r=r+Math.imul(N,oe)|0,i=(i=i+Math.imul(N,ae)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,ae)|0,r=r+Math.imul(O,ue)|0,i=(i=i+Math.imul(O,ce)|0)+Math.imul(R,ue)|0,o=o+Math.imul(R,ce)|0,r=r+Math.imul(x,he)|0,i=(i=i+Math.imul(x,fe)|0)+Math.imul(A,he)|0,o=o+Math.imul(A,fe)|0;var Ae=(c+(r=r+Math.imul(T,pe)|0)|0)+((8191&(i=(i=i+Math.imul(T,me)|0)+Math.imul(C,pe)|0))<<13)|0;c=((o=o+Math.imul(C,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(B,oe),i=(i=Math.imul(B,ae))+Math.imul(F,oe)|0,o=Math.imul(F,ae),r=r+Math.imul(N,ue)|0,i=(i=i+Math.imul(N,ce)|0)+Math.imul(L,ue)|0,o=o+Math.imul(L,ce)|0,r=r+Math.imul(O,he)|0,i=(i=i+Math.imul(O,fe)|0)+Math.imul(R,he)|0,o=o+Math.imul(R,fe)|0;var Pe=(c+(r=r+Math.imul(x,pe)|0)|0)+((8191&(i=(i=i+Math.imul(x,me)|0)+Math.imul(A,pe)|0))<<13)|0;c=((o=o+Math.imul(A,me)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,r=Math.imul(B,ue),i=(i=Math.imul(B,ce))+Math.imul(F,ue)|0,o=Math.imul(F,ce),r=r+Math.imul(N,he)|0,i=(i=i+Math.imul(N,fe)|0)+Math.imul(L,he)|0,o=o+Math.imul(L,fe)|0;var Oe=(c+(r=r+Math.imul(O,pe)|0)|0)+((8191&(i=(i=i+Math.imul(O,me)|0)+Math.imul(R,pe)|0))<<13)|0;c=((o=o+Math.imul(R,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(B,he),i=(i=Math.imul(B,fe))+Math.imul(F,he)|0,o=Math.imul(F,fe);var Re=(c+(r=r+Math.imul(N,pe)|0)|0)+((8191&(i=(i=i+Math.imul(N,me)|0)+Math.imul(L,pe)|0))<<13)|0;c=((o=o+Math.imul(L,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var De=(c+(r=Math.imul(B,pe))|0)+((8191&(i=(i=Math.imul(B,me))+Math.imul(F,pe)|0))<<13)|0;return c=((o=Math.imul(F,me))+(i>>>13)|0)+(De>>>26)|0,De&=67108863,u[0]=ve,u[1]=ge,u[2]=ye,u[3]=be,u[4]=we,u[5]=_e,u[6]=ke,u[7]=Se,u[8]=Ee,u[9]=Me,u[10]=Te,u[11]=Ce,u[12]=Ie,u[13]=xe,u[14]=Ae,u[15]=Pe,u[16]=Oe,u[17]=Re,u[18]=De,0!==c&&(u[19]=c,n.length++),n};function m(e,t,n){return(new v).mulp(e,t,n)}function v(e,t){this.x=e,this.y=t}Math.imul||(p=d),i.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):n<63?d(this,e,t):n<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,h=(0|e.words[l])*(0|t.words[c]),f=67108863&h;s=67108863&(f=f+s|0),i+=(a=(a=a+(h/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,e,t):m(this,e,t)},v.prototype.makeRBT=function(e){for(var t=new Array(e),n=i.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},v.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},v.prototype.permute=function(e,t,n,r,i,o){for(var a=0;a<o;a++)r[a]=t[e[a]],i[a]=n[e[a]]},v.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var h=u,f=c,d=0;d<a;d++){var p=n[l+d],m=r[l+d],v=n[l+d+a],g=r[l+d+a],y=h*v-f*g;g=h*g+f*v,v=y,n[l+d]=p+v,r[l+d]=m+g,n[l+d+a]=p-v,r[l+d+a]=m-g,d!==s&&(y=u*h-c*f,f=u*f+c*h,h=y)}},v.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},v.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},v.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},v.prototype.convert13b=function(e,t,r,i){for(var o=0,a=0;a<t;a++)o+=0|e[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},v.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},v.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),h=new Array(r),f=n.words;f.length=r,this.convert13b(e.words,e.length,a,r),this.convert13b(t.words,t.length,c,r),this.transform(a,o,s,u,r,i),this.transform(c,o,l,h,r,i);for(var d=0;d<r;d++){var p=s[d]*l[d]-u[d]*h[d];u[d]=s[d]*h[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,r),this.transform(s,u,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),m(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){n("number"==typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[r]=67108863&o}return 0!==t&&(this.words[r]=t,this.length++),this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}(e);if(0===t.length)return new i(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var o=n.sqr();r<t.length;r++,o=o.sqr())0!==t[r]&&(n=n.mul(o));return n},i.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<r;this.words[t]=u|a,a=s>>>26-r}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},i.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=r;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},i.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,r){var i,o,a=e.length+r;this._expand(a);var s=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+s;var u=(0|e.words[i])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),o=e,a=0|o.words[o.length-1];0!==(n=26-this._countBits(a))&&(o=o.ushln(n),r.iushln(n),a=0|o.words[o.length-1]);var s,u=r.length-o.length;if("mod"!==t){(s=new i(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=r.clone()._ishlnsubmul(o,1,u);0===l.negative&&(r=l,s&&(s.words[u]=1));for(var h=u-1;h>=0;h--){var f=67108864*(0|r.words[o.length+h])+(0|r.words[o.length+h-1]);for(f=Math.min(f/a|0,67108863),r._ishlnsubmul(o,f,h);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(o,1,h),r.isZero()||(r.negative^=1);s&&(s.words[h]=f)}return s&&s.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},i.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(o=s.div.neg()),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(e)),{div:o,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(o=s.div.neg()),{div:o,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t);var o,a,s},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){n(e<=67108863);for(var t=67108864%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},i.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new i(1),a=new i(0),s=new i(0),u=new i(1),c=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++c;for(var l=r.clone(),h=t.clone();!t.isZero();){for(var f=0,d=1;0==(t.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(l),a.isub(h)),o.iushrn(1),a.iushrn(1);for(var p=0,m=1;0==(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(h)),s.iushrn(1),u.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(s),a.isub(u)):(r.isub(t),s.isub(o),u.isub(a))}return{a:s,b:u,gcd:r.iushln(c)}},i.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o,a=new i(1),s=new i(0),u=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var c=0,l=1;0==(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var h=0,f=1;0==(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(s)):(r.isub(t),s.isub(a))}return(o=0===t.cmpn(1)?a:s).cmpn(0)<0&&o.iadd(e),o},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new S(e)},i.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function y(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function S(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function E(e){S.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},y.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},y.prototype.split=function(e,t){e.iushrn(this.n,0,t)},y.prototype.imulK=function(e){return e.imul(this.k)},r(b,y),b.prototype.split=function(e,t){for(var n=4194303,r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&n,i=10;i<e.length;i++){var a=0|e.words[i];e.words[i-10]=(a&n)<<4|o>>>22,o=a}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(w,y),r(_,y),r(k,y),k.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new w;else if("p192"===e)t=new _;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new k}return g[e]=t,t},S.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},S.prototype._verify2=function(e,t){n(0==(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},S.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},S.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},S.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},S.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},S.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},S.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},S.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},S.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},S.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},S.prototype.isqr=function(e){return this.imul(e,e.clone())},S.prototype.sqr=function(e){return this.mul(e,e)},S.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new i(1)).iushrn(2);return this.pow(e,r)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);n(!o.isZero());var s=new i(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var h=this.pow(l,o),f=this.pow(e,o.addn(1).iushrn(1)),d=this.pow(e,o),p=a;0!==d.cmp(s);){for(var m=d,v=0;0!==m.cmp(s);v++)m=m.redSqr();n(v<p);var g=this.pow(h,new i(1).iushln(p-v-1));f=f.redMul(g),h=g.redSqr(),d=d.redMul(h),p=v}return f},S.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},S.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new i(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var o=n[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=u-1;l>=0;l--){var h=c>>l&1;o!==n[0]&&(o=this.sqr(o)),0!==h||0!==a?(a<<=1,a|=h,(4===++s||0===r&&0===l)&&(o=this.mul(o,n[a]),s=0,a=0)):s=0}u=26}return o},S.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},S.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new E(e)},r(E,S),E.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},E.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},E.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=n.isub(r).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):o.cmpn(0)<0&&(a=o.iadd(this.m)),a._forceRed(this)},E.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)})),o.register("5VGIo",(function(e,t){var n=o("3qY3Z"),r=o("6aUge").Buffer;e.exports=function(e,t){return r.from(e.toRed(n.mont(t.modulus)).redPow(new n(t.publicExponent)).fromRed().toArray())}})),o.register("1cN2w",(function(e,t){var n=o("4yHxi"),r=o("7i9NA"),i=o("7gwLX"),a=o("3qY3Z"),s=o("Ib0dO"),u=o("uk3ap"),c=o("5VGIo"),l=o("6aUge").Buffer;e.exports=function(e,t,o){var h;h=e.padding?e.padding:o?1:4;var f,d=n(e),p=d.modulus.byteLength();if(t.length>p||new a(t).cmp(d.modulus)>=0)throw new Error("decryption error");f=o?c(new a(t),d):s(t,d);var m=l.alloc(p-f.length);if(f=l.concat([m,f],p),4===h)return function(e,t){var n=e.modulus.byteLength(),o=u("sha1").update(l.alloc(0)).digest(),a=o.length;if(0!==t[0])throw new Error("decryption error");var s=t.slice(1,a+1),c=t.slice(a+1),h=i(s,r(c,a)),f=i(c,r(h,n-a-1));if(function(e,t){e=l.from(e),t=l.from(t);var n=0,r=e.length;e.length!==t.length&&(n++,r=Math.min(e.length,t.length));var i=-1;for(;++i<r;)n+=e[i]^t[i];return n}(o,f.slice(0,a)))throw new Error("decryption error");var d=a;for(;0===f[d];)d++;if(1!==f[d++])throw new Error("decryption error");return f.slice(d)}(d,f);if(1===h)return function(e,t,n){var r=t.slice(0,2),i=2,o=0;for(;0!==t[i++];)if(i>=t.length){o++;break}var a=t.slice(2,i-1);("0002"!==r.toString("hex")&&!n||"0001"!==r.toString("hex")&&n)&&o++;a.length<8&&o++;if(o)throw new Error("decryption error");return t.slice(i)}(0,f,o);if(3===h)return f;throw new Error("unknown padding")}})),o.register("5Z9Ew",(function(e,r){var i,a;t(e.exports,"randomFill",(()=>i),(e=>i=e)),t(e.exports,"randomFillSync",(()=>a),(e=>a=e));var s=o("7lbf0");function u(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var c=o("6aUge"),l=(o("3pfpW"),c.Buffer),h=c.kMaxLength,f=n.crypto||n.msCrypto,d=Math.pow(2,32)-1;function p(e,t){if("number"!=typeof e||e!=e)throw new TypeError("offset must be a number");if(e>d||e<0)throw new TypeError("offset must be a uint32");if(e>h||e>t)throw new RangeError("offset out of range")}function m(e,t,n){if("number"!=typeof e||e!=e)throw new TypeError("size must be a number");if(e>d||e<0)throw new TypeError("size must be a uint32");if(e+t>n||e>h)throw new RangeError("buffer too small")}function v(e,t,n,r){var i=e.buffer,o=new Uint8Array(i,t,n);if(f.getRandomValues(o),!r)return e;s.nextTick((function(){r(null,e)}))}f&&f.getRandomValues?(i=function(e,t,r,i){if(!(l.isBuffer(e)||e instanceof n.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof t)i=t,t=0,r=e.length;else if("function"==typeof r)i=r,r=e.length-t;else if("function"!=typeof i)throw new TypeError('"cb" argument must be a function');return p(t,e.length),m(r,t,e.length),v(e,t,r,i)},a=function(e,t,r){void 0===t&&(t=0);if(!(l.isBuffer(e)||e instanceof n.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');p(t,e.length),void 0===r&&(r=e.length-t);return m(r,t,e.length),v(e,t,r)}):(i=u,a=u)})),oq=o("6H6Du"),o.register("64Dap",(function(e,t){var n=o("7lbf0"),r=o("2cK96"),i=o("3V6Bo");e.exports=function(e,t){var o,a=!0;function s(e,r){if(a)return a=!1,void n.nextTick((function(){t(e,r)}));t(e,r)}try{o=oq.generate(e.cert,e.issuer)}catch(e){return s(e)}var u=i["id-pkix-ocsp"].join(".");sq.getAuthorityInfo(o.cert,u,(function(t,n){if(t)return s(t);var i;i=void 0!==e.httpOptions?r._extend(e.httpOptions,XU(n)):n,sq.getResponse(i,o.data,(function(e,t){if(e)return s(e);aq({request:o,response:t},s)}))})),a=!1}})),uq=o("64Dap"),o.register("2FFkp",(function(e,t){var n=o("7lbf0"),r=o("3V6Bo"),i=o("6NBIr");e.exports=function(e,t){var o,a=e.request;function s(e){n.nextTick((function(){t(e,f&&f.certStatus)}))}try{o=a.issuer||r.Certificate.decode(sq.toDER(e.issuer,"CERTIFICATE"),"der"),f=sq.parseResponse(e.response)}catch(e){return s(e)}var u=e.response.slice(f.start,f.end),c=f.certs,l=f.certsTbs.map((function(t){return e.response.slice(t.start,t.end)}));f=f.value;var h=sq.sign[f.signatureAlgorithm.algorithm.join(".")];if(h){var f,d=function(e,t,n){var o=e.tbsCertificate.subjectPublicKeyInfo;o=sq.toPEM(r.SubjectPublicKeyInfo.encode(o,"der"),"PUBLIC KEY");for(var a=0;a<t.length;a++){var s=t[a],u=sq.sign[s.signatureAlgorithm.algorithm.join(".")];if(!u)throw new Error("Unknown signature algorithm "+s.signatureAlgorithm.algorithm);var c=i.createVerify(u);if(c.update(n[a]),!c.verify(o,s.signature.data))throw new Error("Invalid signature");var l=s.tbsCertificate.subjectPublicKeyInfo;return sq.toPEM(r.SubjectPublicKeyInfo.encode(l,"der"),"PUBLIC KEY")}return o}(o,c,l),p=i.createVerify(h),m=f.tbsResponseData,v=f.signature.data;if(p.update(u),!p.verify(d,v))return s(new Error("Invalid signature"));if(m.responses.length<1)return s(new Error("Expected at least one response"));if((f=m.responses[0]).certId.hashAlgorithm.algorithm.join(".")!==a.certID.hashAlgorithm.algorithm.join("."))return s(new Error("Hash algorithm mismatch"));if(f.certId.issuerNameHash.toString("hex")!==a.certID.issuerNameHash.toString("hex"))return s(new Error("Issuer name hash mismatch"));if(f.certId.issuerKeyHash.toString("hex")!==a.certID.issuerKeyHash.toString("hex"))return s(new Error("Issuer key hash mismatch"));if(0!==f.certId.serialNumber.cmp(a.certID.serialNumber))return s(new Error("Serial number mismatch"));if("good"!==f.certStatus.type)return s(new Error("OCSP Status: "+f.certStatus.type));var g=+new Date,y=e.nudge||6e4;return f.thisUpdate-y>g||f.nextUpdate+y<g?s(new Error("OCSP Response expired")):s(null)}s(new Error("Unknown signature algorithm "+f.signatureAlgorithm.algorithm))}})),aq=o("2FFkp"),o.register("2Jn7B",(function(e,n){var r,i,a,s,u,c,l,h,f,d,p,m;t(e.exports,"id-kp-OCSPSigning",(()=>r),(e=>r=e)),t(e.exports,"toPEM",(()=>i),(e=>i=e)),t(e.exports,"parseResponse",(()=>m),(e=>m=e)),t(e.exports,"id-ad-caIssuers",(()=>d),(e=>d=e)),t(e.exports,"getAuthorityInfo",(()=>a),(e=>a=e)),t(e.exports,"digest",(()=>f),(e=>f=e)),t(e.exports,"digestRev",(()=>u),(e=>u=e)),t(e.exports,"sign",(()=>s),(e=>s=e)),t(e.exports,"signRev",(()=>p),(e=>p=e)),t(e.exports,"toDER",(()=>h),(e=>h=e)),t(e.exports,"getResponse",(()=>l),(e=>l=e)),t(e.exports,"RSAPrivateKey",(()=>c),(e=>c=e));var v=R,g=o("76ImE"),y=o("2cK96"),b=o("3dKFn"),w=o("3V6Bo");d=[1,3,6,1,5,5,7,48,2],r=[1,3,6,1,5,5,7,3,9],l=function(e,t,n){"object"!=typeof e&&(e=XU(e));var r=y._extend({method:"POST",headers:{"Content-Type":"application/ocsp-request","Content-Length":t.length}},e);function i(e,t){n&&n(e,t),n=null}g.request(r,(function(e){if(e.statusCode<200||e.statusCode>=400)return i(new Error("Failed to obtain OCSP response: "+e.statusCode));var t=[];e.on("readable",(function(){var n=e.read();n&&t.push(n)})),e.on("end",(function(){i(null,v.concat(t))}))})).on("error",i).end(t)},m=function(e){var t={start:0,end:e.length},n=w.OCSPResponse.decode(e,"der",{track:function(e,n,r,i){"content"===i&&"responseBytes/response"===e&&(t.start=n,t.end=r)}}),i=n.responseStatus;if("successful"!==i)throw new Error("Bad OCSP response status: "+i);var o=n.responseBytes.responseType;if("id-pkix-ocsp-basic"!==o)throw new Error("Unknown OCSP response type: "+o);var a=n.responseBytes.response,s={start:t.start,end:t.end},u=[],c=w.BasicOCSPResponse.decode(a,"der",{track:function(e,n,r,i){"tagged"===i&&("tbsResponseData"===e?(s.start=t.start+n,s.end=t.start+r):"certs/tbsCertificate"===e&&u.push({start:t.start+n,end:t.start+r}))}}),l=r.join("."),h=(c.certs||[]).filter((function(e){return e.tbsCertificate.extensions.some((function(e){return"extendedKeyUsage"===e.extnID&&e.extnValue.some((function(e){return e.join(".")===l}))}))}));return{start:s.start,end:s.end,value:c,certs:h,certsTbs:u}},f={"1.3.14.3.2.26":"sha1","2.16.840.1.101.3.4.2.1":"sha256"},u={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1"},s={"1.2.840.113549.1.1.5":"sha1WithRSAEncryption","1.2.840.113549.1.1.11":"sha256WithRSAEncryption","1.2.840.113549.1.1.12":"sha384WithRSAEncryption","1.2.840.113549.1.1.13":"sha512WithRSAEncryption"},p={sha1WithRSAEncryption:[1,2,840,113549,1,1,5],sha256WithRSAEncryption:[1,2,840,113549,1,1,11],sha384WithRSAEncryption:[1,2,840,113549,1,1,12],sha512WithRSAEncryption:[1,2,840,113549,1,1,13]},i=function(e,t){for(var n=e.toString("base64"),r=["-----BEGIN "+t+"-----"],i=0;i<n.length;i+=64)r.push(n.slice(i,i+64));return r.push("-----END "+t+"-----"),r.join("\n")},h=function(e,t){var n=e.toString().match(new RegExp("-----BEGIN "+t+"-----([^-]*)-----END "+t+"-----"));return n=n?new v(n[1].replace(/[\r\n]/g,""),"base64"):"string"==typeof e?new v(e):e},a=function(e,t,n){var r=e.tbsCertificate.extensions;r||(r=[]);var i=r.filter((function(e){return"authorityInformationAccess"===e.extnID}));if(0===i.length)return n(new Error("AuthorityInfoAccess not found in extensions"));var o=null;return i.some((function(e){return e.extnValue.some((function(e){if(e.accessMethod.join(".")!==t)return!1;var n=e.accessLocation;return"uniformResourceIdentifier"===n.type&&(o=n.value+"",!0)}))}))?n(null,o):n(new Error(t+" not found in AuthorityInfoAccess"))};var _=b.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));c=_})),sq=o("2Jn7B");SB=o("3V6Bo"),SB=o("3V6Bo"),SB=o("3V6Bo"),SB=o("3V6Bo");var kq=R,Sq=(nu=o("7lbf0"),function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))});class Eq{constructor(t){t&&(this.privProxyInfo=t),Eq.privDiskCache||(Eq.privDiskCache=new(e(SB))("microsoft-cognitiveservices-speech-sdk-cache",{supportBuffer:!0,location:void 0}))}static forceReinitDiskCache(){Eq.privDiskCache=void 0,Eq.privMemCache={}}GetAgent(t){const n=new(e(SB).Agent)(this.CreateConnection);if(void 0!==this.privProxyInfo&&void 0!==this.privProxyInfo.HostName&&this.privProxyInfo.Port>0){n["privProxyInfo"]=this.privProxyInfo}return n}static GetProxyAgent(t){const n={host:t.HostName,port:t.Port};t.UserName?n.headers={"Proxy-Authentication":"Basic "+new kq(t.UserName+":"+(void 0===t.Password)?"":t.Password).toString("base64")}:n.headers={},n.headers.requestOCSP="true";return new(e(SB))(n)}static OCSPCheck(e,t){return Sq(this,void 0,void 0,(function*(){let n,r,i=!1;const o=yield e;o.cork();const a=o;return new Promise(((e,s)=>{o.on("OCSPResponse",(e=>{e&&(this.onEvent(new aB),r=e)})),o.on("error",(e=>{i||(i=!0,o.destroy(),s(e))})),a.on("secure",(()=>Sq(this,void 0,void 0,(function*(){const u=a.getPeerCertificate(!0);try{const a=yield this.GetIssuer(u);n=oq.generate(u.raw,a.raw);const s=n.id.toString("hex");if(!r){const e=yield Eq.GetResponseFromCache(s,n,t);r=e}yield this.VerifyOCSPResponse(r,n,t),o.uncork(),i=!0,e(o)}catch(e){o.destroy(),i=!0,s(e)}}))))}))}))}static GetIssuer(e){return e.issuerCertificate?Promise.resolve(e.issuerCertificate):new Promise(((t,n)=>{new iq({}).fetchIssuer(e,null,((e,r)=>{e?n(e):t(r)}))}))}static GetResponseFromCache(e,t,n){return Sq(this,void 0,void 0,(function*(){let r=Eq.privMemCache[e];if(r&&this.onEvent(new $j(e)),!r)try{const t=yield Eq.privDiskCache.get(e);t.isCached&&(Eq.onEvent(new tB(e)),Eq.StoreMemoryCacheEntry(e,t.value),r=t.value)}catch(e){r=null}if(!r)return r;try{const i=sq.parseResponse(r).value.tbsResponseData;if(i.responses.length<1)return void this.onEvent(new hB(e,"Not enough data in cached response"));const o=i.responses[0].thisUpdate,a=i.responses[0].nextUpdate;if(a<Date.now()+this.testTimeOffset-6e4)this.onEvent(new sB(e,a)),r=null;else{const r=Math.min(864e5,(a-o)/2);a-(Date.now()+this.testTimeOffset)<r?(this.onEvent(new uB(e,o,a)),this.UpdateCache(t,n).catch((t=>{this.onEvent(new dB(e,t.toString()))}))):this.onEvent(new cB(e,o,a))}}catch(t){this.onEvent(new hB(e,t)),r=null}return r||this.onEvent(new eB(e)),r}))}static VerifyOCSPResponse(e,t,n){return Sq(this,void 0,void 0,(function*(){let r=e;t.certID.toString("hex");return r||(r=yield Eq.GetOCSPResponse(t,n)),new Promise(((i,o)=>{aq({request:t,response:r},((a,s)=>{a?(Eq.onEvent(new lB(t.id.toString("hex"),a)),e?this.VerifyOCSPResponse(null,t,n).then((()=>{i()}),(e=>{o(e)})):o(a)):(e||Eq.StoreCacheEntry(t.id.toString("hex"),r),i())}))}))}))}static UpdateCache(e,t){return Sq(this,void 0,void 0,(function*(){const n=e.id.toString("hex");this.onEvent(new nB(n));const r=yield this.GetOCSPResponse(e,t);this.StoreCacheEntry(n,r),this.onEvent(new oB(e.id.toString("hex")))}))}static StoreCacheEntry(e,t){this.StoreMemoryCacheEntry(e,t),this.StoreDiskCacheEntry(e,t)}static StoreMemoryCacheEntry(e,t){this.privMemCache[e]=t,this.onEvent(new rB(e))}static StoreDiskCacheEntry(e,t){this.privDiskCache.set(e,t).then((()=>{this.onEvent(new iB(e))}))}static GetOCSPResponse(e,t){let n={};if(t){const e=Eq.GetProxyAgent(t);n.agent=e}return new Promise(((t,r)=>{sq.getAuthorityInfo(e.cert,"1.3.6.1.5.5.7.48.1",((i,o)=>{if(i)return void r(i);const a=XU(o);n=Object.assign(Object.assign({},n),a),sq.getResponse(n,e.data,((n,i)=>{n?r(n):(this.onEvent(new fB(e.certID.toString("hex"))),t(i))}))}))}))}CreateConnection(e,t){const n=void 0!==nu&&t.secureEndpoint;let r;if(t=Object.assign(Object.assign({},t),{requestOCSP:!Eq.forceDisableOCSPStapling,servername:t.host}),this.privProxyInfo){const n=Eq.GetProxyAgent(this.privProxyInfo);r=new Promise(((r,i)=>{n.callback(e,t,((e,t)=>{e?i(e):r(t)}))}))}else r=(t.secureEndpoint,Promise.resolve(SB.connect(t)));return n?Eq.OCSPCheck(r,this.privProxyInfo):r}}Eq.testTimeOffset=0,Eq.forceDisableOCSPStapling=!1,Eq.privMemCache={},Eq.onEvent=e=>{Dj.instance.onEvent(e)};var Mq=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class Tq{constructor(t,n,r,i,o,a){if(this.open=()=>{if(this.privConnectionState===ij.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new Nj,this.privCertificateValidatedDeferral=new Nj,this.privConnectionState=ij.Connecting;try{if("undefined"==typeof WebSocket||Tq.forceNpmWebSocket){const t={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression};this.privCertificateValidatedDeferral.resolve();const n=new ZU.CertCheckAgent(this.proxyInfo);t.agent=n.GetAgent(),this.privWebsocketClient=new(e(SB))(this.privUri,t)}else this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new jj.Queue,this.privDisconnectDeferral=new Nj,this.privSendMessageQueue=new jj.Queue,this.processSendQueue().catch((e=>{Dj.instance.onEvent(new pB(e))}))}catch(e){return this.privConnectionEstablishDeferral.resolve(new Oj(500,e)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new _j(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=e=>{this.privCertificateValidatedDeferral.promise.then((()=>{this.privConnectionState=ij.Connected,this.onEvent(new kj(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new Oj(200,""))}),(e=>{this.privConnectionEstablishDeferral.reject(e)}))},this.privWebsocketClient.onerror=e=>{this.onEvent(new Ej(this.privConnectionId,e.message,e.type)),this.privLastErrorReceived=e.message},this.privWebsocketClient.onclose=e=>{this.privConnectionState===ij.Connecting?(this.privConnectionState=ij.Disconnected,this.privConnectionEstablishDeferral.resolve(new Oj(e.code,e.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=ij.Disconnected,this.onEvent(new Sj(this.privConnectionId,e.code,e.reason))),this.onClose(e.code,e.reason).catch((e=>{Dj.instance.onEvent(new pB(e))}))},this.privWebsocketClient.onmessage=e=>{const t=(new Date).toISOString();if(this.privConnectionState===ij.Connected){const n=new Nj;if(this.privReceivingMessageQueue.enqueueFromPromise(n.promise),e.data instanceof ArrayBuffer){const r=new Vj(rj.Binary,e.data);this.privMessageFormatter.toConnectionMessage(r).then((e=>{this.onEvent(new Tj(this.privConnectionId,t,e)),n.resolve(e)}),(e=>{n.reject(`Invalid binary message format. Error: ${e}`)}))}else{const r=new Vj(rj.Text,e.data);this.privMessageFormatter.toConnectionMessage(r).then((e=>{this.onEvent(new Tj(this.privConnectionId,t,e)),n.resolve(e)}),(e=>{n.reject(`Invalid text message format. Error: ${e}`)}))}}},this.privConnectionEstablishDeferral.promise},this.send=e=>{if(this.privConnectionState!==ij.Connected)return Promise.reject(`Cannot send on connection that is in ${ij[this.privConnectionState]} state`);const t=new Nj,n=new Nj;return this.privSendMessageQueue.enqueueFromPromise(n.promise),this.privMessageFormatter.fromConnectionMessage(e).then((r=>{n.resolve({Message:e,RawWebsocketMessage:r,sendStatusDeferral:t})}),(e=>{n.reject(`Error formatting the message. ${e}`)})),t.promise},this.read=()=>this.privConnectionState!==ij.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue(),this.close=e=>this.privWebsocketClient?(this.privConnectionState!==ij.Disconnected&&this.privWebsocketClient.close(1e3,e||"Normal closure by client"),this.privDisconnectDeferral.promise):Promise.resolve(),this.sendRawMessage=e=>{try{return e?(this.onEvent(new Cj(this.privConnectionId,(new Date).toISOString(),e.Message)),this.isWebsocketOpen?(this.privWebsocketClient.send(e.RawWebsocketMessage.payload),Promise.resolve()):Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+e.Message.id+" "+(new Error).stack)):Promise.resolve()}catch(e){return Promise.reject(`websocket send error: ${e}`)}},this.onEvent=e=>{this.privConnectionEvents.onEvent(e),Dj.instance.onEvent(e)},!t)throw new Ij("uri");if(!r)throw new Ij("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new Rj,this.privConnectionId=n,this.privMessageFormatter=r,this.privConnectionState=ij.None,this.privUri=t,this.privHeaders=o,this.privEnableCompression=a,this.privHeaders[vB.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}get events(){return this.privConnectionEvents}onClose(e,t){return Mq(this,void 0,void 0,(function*(){const n=`Connection closed. ${e}: ${t}`;this.privConnectionState=ij.Disconnected,this.privDisconnectDeferral.resolve(),yield this.privReceivingMessageQueue.drainAndDispose((e=>{}),n),yield this.privSendMessageQueue.drainAndDispose((e=>{e.sendStatusDeferral.reject(n)}),n)}))}processSendQueue(){return Mq(this,void 0,void 0,(function*(){const e=this.privSendMessageQueue.dequeue(),t=yield e;if(t){try{yield this.sendRawMessage(t),t.sendStatusDeferral.resolve()}catch(e){t.sendStatusDeferral.reject(e)}yield this.processSendQueue()}}))}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}Tq.forceNpmWebSocket=!1;var Cq=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class Iq{constructor(e,t,n,r,i,o=!1,a){if(this.privIsDisposed=!1,this.isDisposed=()=>this.privIsDisposed,this.state=()=>this.privConnectionMessageAdapter.state,this.open=()=>this.privConnectionMessageAdapter.open(),this.send=e=>this.privConnectionMessageAdapter.send(e),this.read=()=>this.privConnectionMessageAdapter.read(),!e)throw new Ij("uri");if(!r)throw new Ij("messageFormatter");this.privMessageFormatter=r;let s="",u=0;if(t)for(const n in t)if(n){s+=0===u&&-1===e.indexOf("?")?"?":"&";s+=`${n}=${encodeURIComponent(t[n])}`,u++}if(n)for(const t in n)if(t){s+=0===u&&-1===e.indexOf("?")?"?":"&";s+=`${t}=${encodeURIComponent(n[t])}`,u++}this.privUri=e+s,this.privId=a||ej(),this.privConnectionMessageAdapter=new JU.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,i,n,o)}dispose(){return Cq(this,void 0,void 0,(function*(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&(yield this.privConnectionMessageAdapter.close())}))}get id(){return this.privId}get events(){return this.privConnectionMessageAdapter.events}}class xq{constructor(e,t){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.id=()=>this.privAudioNode.id(),this.privAudioNode=e,this.privBytesPerSecond=t}read(){if(this.privReplay&&0!==this.privBuffers.length){const e=this.privReplayOffset-this.privBufferStartOffset;let t=Math.round(e*this.privBytesPerSecond*1e-7);0!=t%2&&t++;let n=0;for(;n<this.privBuffers.length&&t>=this.privBuffers[n].chunk.buffer.byteLength;)t-=this.privBuffers[n++].chunk.buffer.byteLength;const r=this.privBuffers[n].chunk.buffer.slice(t);return this.privReplayOffset+=r.byteLength/this.privBytesPerSecond*1e7,n===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:r,isEnd:!1,timeReceived:this.privBuffers[n].chunk.timeReceived})}return this.privAudioNode.read().then((e=>(e&&e.buffer&&(this.privBuffers.push(new Aq(e,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=e.buffer.byteLength),e)))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(e){if(void 0===this.privBuffers||0===this.privBuffers.length)return;this.privLastShrinkOffset=e;const t=e-this.privBufferStartOffset;let n=Math.round(t*this.privBytesPerSecond*1e-7),r=0;for(;r<this.privBuffers.length&&n>=this.privBuffers[r].chunk.buffer.byteLength;)n-=this.privBuffers[r++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-n/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(r)}findTimeAtOffset(e){if(e<this.privBufferStartOffset||void 0===this.privBuffers)return 0;for(const t of this.privBuffers){const n=t.byteOffset/this.privBytesPerSecond*1e7,r=n+t.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=n&&e<=r)return t.chunk.timeReceived}return 0}}class Aq{constructor(e,t,n){this.chunk=e,this.serial=t,this.byteOffset=n}}class Pq{constructor(e,t,n,r){this.privProxyHostName=e,this.privProxyPort=t,this.privProxyUserName=n,this.privProxyPassword=r}static fromParameters(e){return new Pq(e.getProperty(GB.SpeechServiceConnection_ProxyHostName),parseInt(e.getProperty(GB.SpeechServiceConnection_ProxyPort),10),e.getProperty(GB.SpeechServiceConnection_ProxyUserName),e.getProperty(GB.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(e){return this.fromParameters(e.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}}var Oq,Rq;SB=o("3V6Bo");(Rq=Oq||(Oq={})).Get="get",Rq.Post="post",Rq.Delete="delete",Rq.File="file";class Dq{static get requestOptions(){return Dq.privDefaultRequestOptions}static get configParams(){return Dq.privDefaultParams}static get restErrors(){return Dq.privRestErrors}}let Nq,Lq;async function jq(e,t){if(console.log("Starting recognition"),Nq&&await Nq.stopContinuousRecognitionAsync(),!Lq){const{cognitiveServicesKey:e,cognitiveServicesRegion:t}=await async function(){return await mr("cognitiveServicesKey")}();Lq=lF.fromSubscription(e,t)}const n=tF.fromMicrophoneInput(e);Nq=new vF.SpeechRecognizer(Lq,n),Nq.recognizing=(e,t)=>{console.log("RECOGNIZING: ",t.result.text)},Nq.recognized=(e,n)=>{var r;n.result.reason===HB.RecognizedSpeech?(console.log(`RECOGNIZED: Text=${n.result.text}`),""!==n.result.text&&t((r=n.result.text,{type:Bt.SendCaption,value:r}))):n.result.reason===HB.NoMatch&&console.log("NOMATCH: Speech could not be recognized.")},Nq.canceled=(e,t)=>{console.log(`CANCELED: Reason=${t.reason}`),t.reason===qB.Error&&(console.log(`"CANCELED: ErrorCode=${t.errorCode}`),console.log(`"CANCELED: ErrorDetails=${t.errorDetails}`),console.log("CANCELED: Did you update the subscription info?")),Nq.stopContinuousRecognitionAsync()},Nq.sessionStopped=(e,t)=>{console.log("\n    Session stopped event."),Nq.stopContinuousRecognitionAsync()},Nq.startContinuousRecognitionAsync()}async function Bq(){await Nq.stopContinuousRecognitionAsync()}Dq.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},Dq.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},Dq.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};const Fq=e=>{const t=a.useContext(qq),[n,r]=a.useState(),[i,o]=a.useState(),[s,u]=a.useState(),[c,l]=a.useState(!1),[h,f]=a.useState(!0),[d,p]=a.useState(!0),[m,v]=a.useState([]),[g,y]=a.useState([]),[b,w]=a.useState(),[_,k]=a.useState(),[S,E]=a.useState(),[M,T]=a.useState(),[C,I]=a.useState(),[x,A]=a.useState(),[P,O]=a.useState(),[R,D]=a.useState(),N=()=>{b&&jq(b.id,t)},L=()=>{Bq()},j=async()=>{s&&(t({type:Bt.StartVideoChat}),T(!0),P&&(s.localParticipant.publishTrack(P),await P.restart(),N()))},B=()=>{s&&(E(!0),x&&(x.restart(),x.enable(!0),s.localParticipant.publishTrack(x),R||D(a.createElement(fs,{track:x}))))},F=()=>{console.log("In unpublish",x),t(Qt()),E(!1),T(!1),P&&(P.stop(),Bq(),s&&s.localParticipant.unpublishTrack(P)),x&&(x.stop(),x.detach(),x.disable(),x.mediaStreamTrack.stop(),s&&s.localParticipant.unpublishTrack(x))};async function U(r,i){if(e.active)if(n){if(!s||s.name!==r){s&&s.name!==r&&s.disconnect();try{const e={name:r,tracks:[],maxAudioBitrate:16e3,bandwidthProfile:{video:{mode:"grid",maxTracks:10,renderDimensions:{high:{height:1080,width:1920},standard:{height:720,width:1280},low:{height:176,width:144}}}},preferredVideoCodecs:[{codec:"VP8",simulcast:!0}],dominantSpeaker:!0};i&&x&&e.tracks.push(x),i&&P&&e.tracks.push(P),u(void 0);const o=await KL.connect(n,e);l(!1),o.on("dominantSpeakerChanged",(e=>{t(Yt(e?e.identity:null))})),o.localParticipant.videoTracks.forEach((e=>{d?e.track.enable():e.track.disable()})),o.localParticipant.audioTracks.forEach((e=>{h?e.track.enable():e.track.disable()})),console.log("[TWILIO] In room?",o),console.log("[TWILIO] Attached participant count:",o.participants.size),D(a.createElement(ps,{participant:o.localParticipant,displayVideo:d,displayAudio:h})),I(o.participants),o.on("trackPublished",((e,n)=>{t(Zt())})),o.on("trackUnpublished",((e,n)=>{t(Zt())})),o.on("participantConnected",(()=>{I(o.participants),t(Zt())})),o.on("participantDisconnected",(()=>{I(o.participants),t(Zt())})),window.addEventListener("beforeunload",(e=>{o.disconnect()})),u(o)}catch(e){console.log("[TWILIO] Could not connect to room",e),D(null),l(!0)}}}else o(r);else console.warn("joinCall was called while text-only mode was on")}return a.useEffect((()=>{e.active&&(console.log("[TWILIO] In useeffect for camera"),_&&(console.log("[TWILIO] Has camera"),(async()=>{console.log("[TWILIO] Fetching local video track");const e={height:720,frameRate:24,width:1280};_&&(e.deviceId={exact:_.id});const t=await KL.createLocalVideoTrack(e);A(t),D(a.createElement(fs,{track:t})),S&&B()})()))}),[_]),a.useEffect((()=>{e.active&&b&&(async()=>{if(P)return P;const e={};b&&(e.audio={deviceId:b.id});const t=await KL.createLocalAudioTrack(e);O(t)})()}),[b]),a.useEffect((()=>{e.active&&(h?N():L())}),[h]),a.useEffect((()=>{e.active&&(console.log("[TWILIO] In token roomId useEffect"),n&&i&&!s&&(console.log("[TWILIO] Joining room"),U(i,!0)))}),[n,i]),a.createElement(ii.Provider,{value:{prepareForMediaChat:async function(){if(!n)return async function(){return await mr("twilioToken")}().then((e=>{r(e)}))},prepareMediaDevices:async function(){const e=e=>(console.log(e),{id:e.deviceId,name:e.label});try{(await navigator.mediaDevices.getUserMedia({video:!0,audio:!0})).getTracks().forEach((e=>e.stop())),await navigator.mediaDevices.enumerateDevices().then((t=>{console.log("[TWILIO] Fetched devices");const n=t.filter((e=>"videoinput"===e.kind)).map(e),r=t.filter((e=>"audioinput"===e.kind)).map(e);v(n),y(r),console.log("[TWILIO] Setting current camera",n[0]),k(n[0]),w(r[0])}))}catch(e){console.log("[TWILIO] Error fetching media devices",e),alert("We couldn't fetch your audio and video devices. This usually means another application is using your primary webcam or mic. Close anything that might be accessing them and try again. If that fails, confirm you haven't denied webcam/mic permission to this website in your browser."),t(tn())}},cameras:m,mics:g,currentMic:b,currentCamera:_,publishingCamera:S,publishingMic:M,setCurrentCamera:async e=>(console.log(`[TWILIO] Setting current camera from ${_.id} (${_.name}) to ${e}`),_&&_.id!==e&&(console.log("[TWILIO] Removing old camera",s),x.stop(),s&&(t(Qt()),F())),k(m.find((t=>t.id===e))),x.restart(),null),setCurrentMic:e=>(b&&b.id!==e&&(P.stop(),s&&(t(Qt()),F())),w(g.find((t=>t.id===e))),P.restart(),null),localStreamView:R,publishMedia:()=>{s&&(j(),B())},unpublishMedia:F,publishAudio:j,inCall:!!s,joinCallFailed:c,joinCall:U,leaveCall:function(){console.log("[TWILIO] In leave call",x),s&&s.disconnect(),x&&x.stop(),P&&P.stop(),L()},callParticipants:C,micEnabled:h,setMicEnabled:e=>{f(e),s&&s.localParticipant.audioTracks.forEach((t=>{e?t.track.enable():t.track.disable()}))},cameraEnabled:d,setCameraEnabled:e=>{p(e),s&&s.localParticipant.videoTracks.forEach((t=>{e?t.track.enable():t.track.disable()}))}}},e.children)};o.register("PUf7U",(function(e,t){(function(){var r,i="Expected a function",o="__lodash_hash_undefined__",a="__lodash_placeholder__",s=16,u=32,c=64,l=128,h=256,f=1/0,d=9007199254740991,p=NaN,m=4294967295,v=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",s],["flip",512],["partial",u],["partialRight",c],["rearg",h]],g="[object Arguments]",y="[object Array]",b="[object Boolean]",w="[object Date]",_="[object Error]",k="[object Function]",S="[object GeneratorFunction]",E="[object Map]",M="[object Number]",T="[object Object]",C="[object Promise]",I="[object RegExp]",x="[object Set]",A="[object String]",P="[object Symbol]",O="[object WeakMap]",R="[object ArrayBuffer]",D="[object DataView]",N="[object Float32Array]",L="[object Float64Array]",j="[object Int8Array]",B="[object Int16Array]",F="[object Int32Array]",U="[object Uint8Array]",q="[object Uint8ClampedArray]",z="[object Uint16Array]",V="[object Uint32Array]",W=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,K=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,Q=RegExp(G.source),J=RegExp(Y.source),Z=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,$=/<%=([\s\S]+?)%>/g,ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,te=/^\w*$/,ne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(re.source),oe=/^\s+/,ae=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,le=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,ge=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,we=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_e=/($^)/,ke=/['\n\r\u2028\u2029\\]/g,Se="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ee="\\u2700-\\u27bf",Me="a-z\\xdf-\\xf6\\xf8-\\xff",Te="A-Z\\xc0-\\xd6\\xd8-\\xde",Ce="\\ufe0e\\ufe0f",Ie="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xe="['’]",Ae="[\\ud800-\\udfff]",Pe="["+Ie+"]",Oe="["+Se+"]",Re="\\d+",De="[\\u2700-\\u27bf]",Ne="["+Me+"]",Le="[^\\ud800-\\udfff"+Ie+Re+Ee+Me+Te+"]",je="\\ud83c[\\udffb-\\udfff]",Be="[^\\ud800-\\udfff]",Fe="(?:\\ud83c[\\udde6-\\uddff]){2}",Ue="[\\ud800-\\udbff][\\udc00-\\udfff]",qe="["+Te+"]",ze="(?:"+Ne+"|"+Le+")",Ve="(?:"+qe+"|"+Le+")",We="(?:['’](?:d|ll|m|re|s|t|ve))?",He="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ke="(?:"+Oe+"|"+je+")"+"?",Ge="[\\ufe0e\\ufe0f]?",Ye=Ge+Ke+("(?:\\u200d(?:"+[Be,Fe,Ue].join("|")+")"+Ge+Ke+")*"),Qe="(?:"+[De,Fe,Ue].join("|")+")"+Ye,Je="(?:"+[Be+Oe+"?",Oe,Fe,Ue,Ae].join("|")+")",Ze=RegExp(xe,"g"),Xe=RegExp(Oe,"g"),$e=RegExp(je+"(?="+je+")|"+Je+Ye,"g"),et=RegExp([qe+"?"+Ne+"+"+We+"(?="+[Pe,qe,"$"].join("|")+")",Ve+"+"+He+"(?="+[Pe,qe+ze,"$"].join("|")+")",qe+"?"+ze+"+"+We,qe+"+"+He,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Re,Qe].join("|"),"g"),tt=RegExp("[\\u200d\\ud800-\\udfff"+Se+Ce+"]"),nt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,ot={};ot[N]=ot[L]=ot[j]=ot[B]=ot[F]=ot[U]=ot[q]=ot[z]=ot[V]=!0,ot[g]=ot[y]=ot[R]=ot[b]=ot[D]=ot[w]=ot[_]=ot[k]=ot[E]=ot[M]=ot[T]=ot[I]=ot[x]=ot[A]=ot[O]=!1;var at={};at[g]=at[y]=at[R]=at[D]=at[b]=at[w]=at[N]=at[L]=at[j]=at[B]=at[F]=at[E]=at[M]=at[T]=at[I]=at[x]=at[A]=at[P]=at[U]=at[q]=at[z]=at[V]=!0,at[_]=at[k]=at[O]=!1;var st={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ut=parseFloat,ct=parseInt,lt="object"==typeof n&&n&&n.Object===Object&&n,ht="object"==typeof self&&self&&self.Object===Object&&self,ft=lt||ht||Function("return this")(),dt="object"==typeof t&&t&&!t.nodeType&&t,pt=dt&&e&&!e.nodeType&&e,mt=pt&&pt.exports===dt,vt=mt&&lt.process,gt=function(){try{var e=pt&&pt.undefined&&pt.undefined("util").types;return e||vt&&vt.binding&&vt.binding("util")}catch(e){}}(),yt=gt&&gt.isArrayBuffer,bt=gt&&gt.isDate,wt=gt&&gt.isMap,_t=gt&&gt.isRegExp,kt=gt&&gt.isSet,St=gt&&gt.isTypedArray;function Et(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Mt(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function Tt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ct(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function It(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function xt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function At(e,t){return!!(null==e?0:e.length)&&Ut(e,t,0)>-1}function Pt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Ot(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Rt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Dt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Nt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Lt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var jt=Wt("length");function Bt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Ft(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Ut(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Ft(e,zt,n)}function qt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function zt(e){return e!=e}function Vt(e,t){var n=null==e?0:e.length;return n?Gt(e,t)/n:p}function Wt(e){return function(t){return null==t?r:t[e]}}function Ht(e){return function(t){return null==e?r:e[t]}}function Kt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Gt(e,t){for(var n,i=-1,o=e.length;++i<o;){var a=t(e[i]);a!==r&&(n=n===r?a:n+a)}return n}function Yt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Qt(e){return e?e.slice(0,dn(e)+1).replace(oe,""):e}function Jt(e){return function(t){return e(t)}}function Zt(e,t){return Ot(t,(function(t){return e[t]}))}function Xt(e,t){return e.has(t)}function $t(e,t){for(var n=-1,r=e.length;++n<r&&Ut(t,e[n],0)>-1;);return n}function en(e,t){for(var n=e.length;n--&&Ut(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var nn=Ht({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),rn=Ht({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(e){return"\\"+st[e]}function an(e){return tt.test(e)}function sn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function un(e,t){return function(n){return e(t(n))}}function cn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];s!==t&&s!==a||(e[n]=a,o[i++]=n)}return o}function ln(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function hn(e){return an(e)?function(e){var t=$e.lastIndex=0;for(;$e.test(e);)++t;return t}(e):jt(e)}function fn(e){return an(e)?function(e){return e.match($e)||[]}(e):function(e){return e.split("")}(e)}function dn(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var pn=Ht({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var mn=function e(t){var n,ae=(t=null==t?ft:mn.defaults(ft.Object(),t,mn.pick(ft,rt))).Array,Se=t.Date,Ee=t.Error,Me=t.Function,Te=t.Math,Ce=t.Object,Ie=t.RegExp,xe=t.String,Ae=t.TypeError,Pe=ae.prototype,Oe=Me.prototype,Re=Ce.prototype,De=t["__core-js_shared__"],Ne=Oe.toString,Le=Re.hasOwnProperty,je=0,Be=(n=/[^.]+$/.exec(De&&De.keys&&De.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Fe=Re.toString,Ue=Ne.call(Ce),qe=ft._,ze=Ie("^"+Ne.call(Le).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=mt?t.Buffer:r,We=t.Symbol,He=t.Uint8Array,Ke=Ve?Ve.allocUnsafe:r,Ge=un(Ce.getPrototypeOf,Ce),Ye=Ce.create,Qe=Re.propertyIsEnumerable,Je=Pe.splice,$e=We?We.isConcatSpreadable:r,tt=We?We.iterator:r,st=We?We.toStringTag:r,lt=function(){try{var e=fo(Ce,"defineProperty");return e({},"",{}),e}catch(e){}}(),ht=t.clearTimeout!==ft.clearTimeout&&t.clearTimeout,dt=Se&&Se.now!==ft.Date.now&&Se.now,pt=t.setTimeout!==ft.setTimeout&&t.setTimeout,vt=Te.ceil,gt=Te.floor,jt=Ce.getOwnPropertySymbols,Ht=Ve?Ve.isBuffer:r,vn=t.isFinite,gn=Pe.join,yn=un(Ce.keys,Ce),bn=Te.max,wn=Te.min,_n=Se.now,kn=t.parseInt,Sn=Te.random,En=Pe.reverse,Mn=fo(t,"DataView"),Tn=fo(t,"Map"),Cn=fo(t,"Promise"),In=fo(t,"Set"),xn=fo(t,"WeakMap"),An=fo(Ce,"create"),Pn=xn&&new xn,On={},Rn=Uo(Mn),Dn=Uo(Tn),Nn=Uo(Cn),Ln=Uo(In),jn=Uo(xn),Bn=We?We.prototype:r,Fn=Bn?Bn.valueOf:r,Un=Bn?Bn.toString:r;function qn(e){if(rs(e)&&!Ka(e)&&!(e instanceof Hn)){if(e instanceof Wn)return e;if(Le.call(e,"__wrapped__"))return qo(e)}return new Wn(e)}var zn=function(){function e(){}return function(t){if(!ns(t))return{};if(Ye)return Ye(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function Vn(){}function Wn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Hn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Qn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Yn;++t<n;)this.add(e[t])}function Jn(e){var t=this.__data__=new Gn(e);this.size=t.size}function Zn(e,t){var n=Ka(e),r=!n&&Ha(e),i=!n&&!r&&Ja(e),o=!n&&!r&&!i&&hs(e),a=n||r||i||o,s=a?Yt(e.length,xe):[],u=s.length;for(var c in e)!t&&!Le.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||wo(c,u))||s.push(c);return s}function Xn(e){var t=e.length;return t?e[Qr(0,t-1)]:r}function $n(e,t){return jo(Ai(e),ur(t,0,e.length))}function er(e){return jo(Ai(e))}function tr(e,t,n){(n!==r&&!za(e[t],n)||n===r&&!(t in e))&&ar(e,t,n)}function nr(e,t,n){var i=e[t];Le.call(e,t)&&za(i,n)&&(n!==r||t in e)||ar(e,t,n)}function rr(e,t){for(var n=e.length;n--;)if(za(e[n][0],t))return n;return-1}function ir(e,t,n,r){return dr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function or(e,t){return e&&Pi(t,Rs(t),e)}function ar(e,t,n){"__proto__"==t&&lt?lt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var n=-1,i=t.length,o=ae(i),a=null==e;++n<i;)o[n]=a?r:Is(e,t[n]);return o}function ur(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function cr(e,t,n,i,o,a){var s,u=1&t,c=2&t,l=4&t;if(n&&(s=o?n(e,i,o,a):n(e)),s!==r)return s;if(!ns(e))return e;var h=Ka(e);if(h){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Le.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!u)return Ai(e,s)}else{var f=vo(e),d=f==k||f==S;if(Ja(e))return Ei(e,u);if(f==T||f==g||d&&!o){if(s=c||d?{}:yo(e),!u)return c?function(e,t){return Pi(e,mo(e),t)}(e,function(e,t){return e&&Pi(t,Ds(t),e)}(s,e)):function(e,t){return Pi(e,po(e),t)}(e,or(s,e))}else{if(!at[f])return o?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case R:return Mi(e);case b:case w:return new r(+e);case D:return function(e,t){var n=t?Mi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case N:case L:case j:case B:case F:case U:case q:case z:case V:return Ti(e,n);case E:return new r;case M:case A:return new r(e);case I:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case x:return new r;case P:return i=e,Fn?Ce(Fn.call(i)):{}}var i}(e,f,u)}}a||(a=new Jn);var p=a.get(e);if(p)return p;a.set(e,s),us(e)?e.forEach((function(r){s.add(cr(r,t,n,r,e,a))})):is(e)&&e.forEach((function(r,i){s.set(i,cr(r,t,n,i,e,a))}));var m=h?r:(l?c?oo:io:c?Ds:Rs)(e);return Tt(m||e,(function(r,i){m&&(r=e[i=r]),nr(s,i,cr(r,t,n,i,e,a))})),s}function lr(e,t,n){var i=n.length;if(null==e)return!i;for(e=Ce(e);i--;){var o=n[i],a=t[o],s=e[o];if(s===r&&!(o in e)||!a(s))return!1}return!0}function hr(e,t,n){if("function"!=typeof e)throw new Ae(i);return Ro((function(){e.apply(r,n)}),t)}function fr(e,t,n,r){var i=-1,o=At,a=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=Ot(t,Jt(n))),r?(o=Pt,a=!1):t.length>=200&&(o=Xt,a=!1,t=new Qn(t));e:for(;++i<s;){var l=e[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,a&&h==h){for(var f=c;f--;)if(t[f]===h)continue e;u.push(l)}else o(t,h,r)||u.push(l)}return u}qn.templateSettings={escape:Z,evaluate:X,interpolate:$,variable:"",imports:{_:qn}},qn.prototype=Vn.prototype,qn.prototype.constructor=qn,Wn.prototype=zn(Vn.prototype),Wn.prototype.constructor=Wn,Hn.prototype=zn(Vn.prototype),Hn.prototype.constructor=Hn,Kn.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},Kn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Kn.prototype.get=function(e){var t=this.__data__;if(An){var n=t[e];return n===o?r:n}return Le.call(t,e)?t[e]:r},Kn.prototype.has=function(e){var t=this.__data__;return An?t[e]!==r:Le.call(t,e)},Kn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=An&&t===r?o:t,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Je.call(t,n,1),--this.size,!0)},Gn.prototype.get=function(e){var t=this.__data__,n=rr(t,e);return n<0?r:t[n][1]},Gn.prototype.has=function(e){return rr(this.__data__,e)>-1},Gn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Yn.prototype.clear=function(){this.size=0,this.__data__={hash:new Kn,map:new(Tn||Gn),string:new Kn}},Yn.prototype.delete=function(e){var t=lo(this,e).delete(e);return this.size-=t?1:0,t},Yn.prototype.get=function(e){return lo(this,e).get(e)},Yn.prototype.has=function(e){return lo(this,e).has(e)},Yn.prototype.set=function(e,t){var n=lo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Qn.prototype.add=Qn.prototype.push=function(e){return this.__data__.set(e,o),this},Qn.prototype.has=function(e){return this.__data__.has(e)},Jn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Jn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Jn.prototype.get=function(e){return this.__data__.get(e)},Jn.prototype.has=function(e){return this.__data__.has(e)},Jn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Gn){var r=n.__data__;if(!Tn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Yn(r)}return n.set(e,t),this.size=n.size,this};var dr=Di(_r),pr=Di(kr,!0);function mr(e,t){var n=!0;return dr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function vr(e,t,n){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=t(a);if(null!=s&&(u===r?s==s&&!ls(s):n(s,u)))var u=s,c=a}return c}function gr(e,t){var n=[];return dr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function yr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=bo),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?yr(s,t-1,n,r,i):Rt(i,s):r||(i[i.length]=s)}return i}var br=Ni(),wr=Ni(!0);function _r(e,t){return e&&br(e,t,Rs)}function kr(e,t){return e&&wr(e,t,Rs)}function Sr(e,t){return xt(t,(function(t){return $a(e[t])}))}function Er(e,t){for(var n=0,i=(t=wi(t,e)).length;null!=e&&n<i;)e=e[Fo(t[n++])];return n&&n==i?e:r}function Mr(e,t,n){var r=t(e);return Ka(e)?r:Rt(r,n(e))}function Tr(e){return null==e?e===r?"[object Undefined]":"[object Null]":st&&st in Ce(e)?function(e){var t=Le.call(e,st),n=e[st];try{e[st]=r;var i=!0}catch(e){}var o=Fe.call(e);i&&(t?e[st]=n:delete e[st]);return o}(e):function(e){return Fe.call(e)}(e)}function Cr(e,t){return e>t}function Ir(e,t){return null!=e&&Le.call(e,t)}function xr(e,t){return null!=e&&t in Ce(e)}function Ar(e,t,n){for(var i=n?Pt:At,o=e[0].length,a=e.length,s=a,u=ae(a),c=1/0,l=[];s--;){var h=e[s];s&&t&&(h=Ot(h,Jt(t))),c=wn(h.length,c),u[s]=!n&&(t||o>=120&&h.length>=120)?new Qn(s&&h):r}h=e[0];var f=-1,d=u[0];e:for(;++f<o&&l.length<c;){var p=h[f],m=t?t(p):p;if(p=n||0!==p?p:0,!(d?Xt(d,m):i(l,m,n))){for(s=a;--s;){var v=u[s];if(!(v?Xt(v,m):i(e[s],m,n)))continue e}d&&d.push(m),l.push(p)}}return l}function Pr(e,t,n){var i=null==(e=xo(e,t=wi(t,e)))?e:e[Fo(Xo(t))];return null==i?r:Et(i,e,n)}function Or(e){return rs(e)&&Tr(e)==g}function Rr(e,t,n,i,o){return e===t||(null==e||null==t||!rs(e)&&!rs(t)?e!=e&&t!=t:function(e,t,n,i,o,a){var s=Ka(e),u=Ka(t),c=s?y:vo(e),l=u?y:vo(t),h=(c=c==g?T:c)==T,f=(l=l==g?T:l)==T,d=c==l;if(d&&Ja(e)){if(!Ja(t))return!1;s=!0,h=!1}if(d&&!h)return a||(a=new Jn),s||hs(e)?no(e,t,n,i,o,a):function(e,t,n,r,i,o,a){switch(n){case D:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case R:return!(e.byteLength!=t.byteLength||!o(new He(e),new He(t)));case b:case w:case M:return za(+e,+t);case _:return e.name==t.name&&e.message==t.message;case I:case A:return e==t+"";case E:var s=sn;case x:var u=1&r;if(s||(s=ln),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var l=no(s(e),s(t),r,i,o,a);return a.delete(e),l;case P:if(Fn)return Fn.call(e)==Fn.call(t)}return!1}(e,t,c,n,i,o,a);if(!(1&n)){var p=h&&Le.call(e,"__wrapped__"),m=f&&Le.call(t,"__wrapped__");if(p||m){var v=p?e.value():e,k=m?t.value():t;return a||(a=new Jn),o(v,k,n,i,a)}}return!!d&&(a||(a=new Jn),function(e,t,n,i,o,a){var s=1&n,u=io(e),c=u.length,l=io(t).length;if(c!=l&&!s)return!1;var h=c;for(;h--;){var f=u[h];if(!(s?f in t:Le.call(t,f)))return!1}var d=a.get(e),p=a.get(t);if(d&&p)return d==t&&p==e;var m=!0;a.set(e,t),a.set(t,e);var v=s;for(;++h<c;){var g=e[f=u[h]],y=t[f];if(i)var b=s?i(y,g,f,t,e,a):i(g,y,f,e,t,a);if(!(b===r?g===y||o(g,y,n,i,a):b)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var w=e.constructor,_=t.constructor;w==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof _&&_ instanceof _||(m=!1)}return a.delete(e),a.delete(t),m}(e,t,n,i,o,a))}(e,t,n,i,Rr,o))}function Dr(e,t,n,i){var o=n.length,a=o,s=!i;if(null==e)return!a;for(e=Ce(e);o--;){var u=n[o];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<a;){var c=(u=n[o])[0],l=e[c],h=u[1];if(s&&u[2]){if(l===r&&!(c in e))return!1}else{var f=new Jn;if(i)var d=i(l,h,c,e,t,f);if(!(d===r?Rr(h,l,3,i,f):d))return!1}}return!0}function Nr(e){return!(!ns(e)||(t=e,Be&&Be in t))&&($a(e)?ze:ge).test(Uo(e));var t}function Lr(e){return"function"==typeof e?e:null==e?ou:"object"==typeof e?Ka(e)?zr(e[0],e[1]):qr(e):pu(e)}function jr(e){if(!Mo(e))return yn(e);var t=[];for(var n in Ce(e))Le.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Br(e){if(!ns(e))return function(e){var t=[];if(null!=e)for(var n in Ce(e))t.push(n);return t}(e);var t=Mo(e),n=[];for(var r in e)("constructor"!=r||!t&&Le.call(e,r))&&n.push(r);return n}function Fr(e,t){return e<t}function Ur(e,t){var n=-1,r=Ya(e)?ae(e.length):[];return dr(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function qr(e){var t=ho(e);return 1==t.length&&t[0][2]?Co(t[0][0],t[0][1]):function(n){return n===e||Dr(n,e,t)}}function zr(e,t){return ko(e)&&To(t)?Co(Fo(e),t):function(n){var i=Is(n,e);return i===r&&i===t?xs(n,e):Rr(t,i,3)}}function Vr(e,t,n,i,o){e!==t&&br(t,(function(a,s){if(o||(o=new Jn),ns(a))!function(e,t,n,i,o,a,s){var u=Po(e,n),c=Po(t,n),l=s.get(c);if(l)return void tr(e,n,l);var h=a?a(u,c,n+"",e,t,s):r,f=h===r;if(f){var d=Ka(c),p=!d&&Ja(c),m=!d&&!p&&hs(c);h=c,d||p||m?Ka(u)?h=u:Qa(u)?h=Ai(u):p?(f=!1,h=Ei(c,!0)):m?(f=!1,h=Ti(c,!0)):h=[]:as(c)||Ha(c)?(h=u,Ha(u)?h=bs(u):ns(u)&&!$a(u)||(h=yo(c))):f=!1}f&&(s.set(c,h),o(h,c,i,a,s),s.delete(c));tr(e,n,h)}(e,t,s,n,Vr,i,o);else{var u=i?i(Po(e,s),a,s+"",e,t,o):r;u===r&&(u=a),tr(e,s,u)}}),Ds)}function Wr(e,t){var n=e.length;if(n)return wo(t+=t<0?n:0,n)?e[t]:r}function Hr(e,t,n){t=t.length?Ot(t,(function(e){return Ka(e)?function(t){return Er(t,1===e.length?e[0]:e)}:e})):[ou];var r=-1;return t=Ot(t,Jt(co())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Ur(e,(function(e,n,i){return{criteria:Ot(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var u=Ci(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Kr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Er(e,a);n(s,a)&&ei(o,wi(a,e),s)}return o}function Gr(e,t,n,r){var i=r?qt:Ut,o=-1,a=t.length,s=e;for(e===t&&(t=Ai(t)),n&&(s=Ot(e,Jt(n)));++o<a;)for(var u=0,c=t[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==e&&Je.call(s,u,1),Je.call(e,u,1);return e}function Yr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;wo(i)?Je.call(e,i,1):fi(e,i)}}return e}function Qr(e,t){return e+gt(Sn()*(t-e+1))}function Jr(e,t){var n="";if(!e||t<1||t>d)return n;do{t%2&&(n+=e),(t=gt(t/2))&&(e+=e)}while(t);return n}function Zr(e,t){return Do(Io(e,t,ou),e+"")}function Xr(e){return Xn(zs(e))}function $r(e,t){var n=zs(e);return jo(n,ur(t,0,n.length))}function ei(e,t,n,i){if(!ns(e))return e;for(var o=-1,a=(t=wi(t,e)).length,s=a-1,u=e;null!=u&&++o<a;){var c=Fo(t[o]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=s){var h=u[c];(l=i?i(h,c,u):r)===r&&(l=ns(h)?h:wo(t[o+1])?[]:{})}nr(u,c,l),u=u[c]}return e}var ti=Pn?function(e,t){return Pn.set(e,t),e}:ou,ni=lt?function(e,t){return lt(e,"toString",{configurable:!0,enumerable:!1,value:nu(t),writable:!0})}:ou;function ri(e){return jo(zs(e))}function ii(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=ae(i);++r<i;)o[r]=e[r+t];return o}function oi(e,t){var n;return dr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ai(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!ls(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return si(e,t,ou,n)}function si(e,t,n,i){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!=t,u=null===t,c=ls(t),l=t===r;o<a;){var h=gt((o+a)/2),f=n(e[h]),d=f!==r,p=null===f,m=f==f,v=ls(f);if(s)var g=i||m;else g=l?m&&(i||d):u?m&&d&&(i||!p):c?m&&d&&!p&&(i||!v):!p&&!v&&(i?f<=t:f<t);g?o=h+1:a=h}return wn(a,4294967294)}function ui(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!za(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function ci(e){return"number"==typeof e?e:ls(e)?p:+e}function li(e){if("string"==typeof e)return e;if(Ka(e))return Ot(e,li)+"";if(ls(e))return Un?Un.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function hi(e,t,n){var r=-1,i=At,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=Pt;else if(o>=200){var c=t?null:Ji(e);if(c)return ln(c);a=!1,i=Xt,u=new Qn}else u=t?[]:s;e:for(;++r<o;){var l=e[r],h=t?t(l):l;if(l=n||0!==l?l:0,a&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue e;t&&u.push(h),s.push(l)}else i(u,h,n)||(u!==s&&u.push(h),s.push(l))}return s}function fi(e,t){return null==(e=xo(e,t=wi(t,e)))||delete e[Fo(Xo(t))]}function di(e,t,n,r){return ei(e,t,n(Er(e,t)),r)}function pi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ii(e,r?0:o,r?o+1:i):ii(e,r?o+1:0,r?i:o)}function mi(e,t){var n=e;return n instanceof Hn&&(n=n.value()),Dt(t,(function(e,t){return t.func.apply(t.thisArg,Rt([e],t.args))}),n)}function vi(e,t,n){var r=e.length;if(r<2)return r?hi(e[0]):[];for(var i=-1,o=ae(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=fr(o[i]||a,e[s],t,n));return hi(yr(o,1),t,n)}function gi(e,t,n){for(var i=-1,o=e.length,a=t.length,s={};++i<o;){var u=i<a?t[i]:r;n(s,e[i],u)}return s}function yi(e){return Qa(e)?e:[]}function bi(e){return"function"==typeof e?e:ou}function wi(e,t){return Ka(e)?e:ko(e,t)?[e]:Bo(ws(e))}var _i=Zr;function ki(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:ii(e,t,n)}var Si=ht||function(e){return ft.clearTimeout(e)};function Ei(e,t){if(t)return e.slice();var n=e.length,r=Ke?Ke(n):new e.constructor(n);return e.copy(r),r}function Mi(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function Ti(e,t){var n=t?Mi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ci(e,t){if(e!==t){var n=e!==r,i=null===e,o=e==e,a=ls(e),s=t!==r,u=null===t,c=t==t,l=ls(t);if(!u&&!l&&!a&&e>t||a&&s&&c&&!u&&!l||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!l&&e<t||l&&n&&o&&!i&&!a||u&&n&&o||!s&&o||!c)return-1}return 0}function Ii(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,u=t.length,c=bn(o-a,0),l=ae(u+c),h=!r;++s<u;)l[s]=t[s];for(;++i<a;)(h||i<o)&&(l[n[i]]=e[i]);for(;c--;)l[s++]=e[i++];return l}function xi(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,u=-1,c=t.length,l=bn(o-s,0),h=ae(l+c),f=!r;++i<l;)h[i]=e[i];for(var d=i;++u<c;)h[d+u]=t[u];for(;++a<s;)(f||i<o)&&(h[d+n[a]]=e[i++]);return h}function Ai(e,t){var n=-1,r=e.length;for(t||(t=ae(r));++n<r;)t[n]=e[n];return t}function Pi(e,t,n,i){var o=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var u=t[a],c=i?i(n[u],e[u],u,n,e):r;c===r&&(c=e[u]),o?ar(n,u,c):nr(n,u,c)}return n}function Oi(e,t){return function(n,r){var i=Ka(n)?Mt:ir,o=t?t():{};return i(n,e,co(r,2),o)}}function Ri(e){return Zr((function(t,n){var i=-1,o=n.length,a=o>1?n[o-1]:r,s=o>2?n[2]:r;for(a=e.length>3&&"function"==typeof a?(o--,a):r,s&&_o(n[0],n[1],s)&&(a=o<3?r:a,o=1),t=Ce(t);++i<o;){var u=n[i];u&&e(t,u,i,a)}return t}))}function Di(e,t){return function(n,r){if(null==n)return n;if(!Ya(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Ce(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Ni(e){return function(t,n,r){for(var i=-1,o=Ce(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function Li(e){return function(t){var n=an(t=ws(t))?fn(t):r,i=n?n[0]:t.charAt(0),o=n?ki(n,1).join(""):t.slice(1);return i[e]()+o}}function ji(e){return function(t){return Dt($s(Hs(t).replace(Ze,"")),e,"")}}function Bi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=zn(e.prototype),r=e.apply(n,t);return ns(r)?r:n}}function Fi(e){return function(t,n,i){var o=Ce(t);if(!Ya(t)){var a=co(n,3);t=Rs(t),n=function(e){return a(o[e],e,o)}}var s=e(t,n,i);return s>-1?o[a?t[s]:s]:r}}function Ui(e){return ro((function(t){var n=t.length,o=n,a=Wn.prototype.thru;for(e&&t.reverse();o--;){var s=t[o];if("function"!=typeof s)throw new Ae(i);if(a&&!u&&"wrapper"==so(s))var u=new Wn([],!0)}for(o=u?o:n;++o<n;){var c=so(s=t[o]),l="wrapper"==c?ao(s):r;u=l&&So(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[so(l[0])].apply(u,l[3]):1==s.length&&So(s)?u[c]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Ka(r))return u.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function qi(e,t,n,i,o,a,s,u,c,h){var f=t&l,d=1&t,p=2&t,m=24&t,v=512&t,g=p?r:Bi(e);return function r(){for(var l=arguments.length,y=ae(l),b=l;b--;)y[b]=arguments[b];if(m)var w=uo(r),_=tn(y,w);if(i&&(y=Ii(y,i,o,m)),a&&(y=xi(y,a,s,m)),l-=_,m&&l<h){var k=cn(y,w);return Yi(e,t,qi,r.placeholder,n,y,k,u,c,h-l)}var S=d?n:this,E=p?S[e]:e;return l=y.length,u?y=Ao(y,u):v&&l>1&&y.reverse(),f&&c<l&&(y.length=c),this&&this!==ft&&this instanceof r&&(E=g||Bi(E)),E.apply(S,y)}}function zi(e,t){return function(n,r){return function(e,t,n,r){return _r(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Vi(e,t){return function(n,i){var o;if(n===r&&i===r)return t;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=li(n),i=li(i)):(n=ci(n),i=ci(i)),o=e(n,i)}return o}}function Wi(e){return ro((function(t){return t=Ot(t,Jt(co())),Zr((function(n){var r=this;return e(t,(function(e){return Et(e,r,n)}))}))}))}function Hi(e,t){var n=(t=t===r?" ":li(t)).length;if(n<2)return n?Jr(t,e):t;var i=Jr(t,vt(e/hn(t)));return an(t)?ki(fn(i),0,e).join(""):i.slice(0,e)}function Ki(e){return function(t,n,i){return i&&"number"!=typeof i&&_o(t,n,i)&&(n=i=r),t=ms(t),n===r?(n=t,t=0):n=ms(n),function(e,t,n,r){for(var i=-1,o=bn(vt((t-e)/(n||1)),0),a=ae(o);o--;)a[r?o:++i]=e,e+=n;return a}(t,n,i=i===r?t<n?1:-1:ms(i),e)}}function Gi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ys(t),n=ys(n)),e(t,n)}}function Yi(e,t,n,i,o,a,s,l,h,f){var d=8&t;t|=d?u:c,4&(t&=~(d?c:u))||(t&=-4);var p=[e,t,o,d?a:r,d?s:r,d?r:a,d?r:s,l,h,f],m=n.apply(r,p);return So(e)&&Oo(m,p),m.placeholder=i,No(m,e,t)}function Qi(e){var t=Te[e];return function(e,n){if(e=ys(e),(n=null==n?0:wn(vs(n),292))&&vn(e)){var r=(ws(e)+"e").split("e");return+((r=(ws(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Ji=In&&1/ln(new In([,-0]))[1]==f?function(e){return new In(e)}:lu;function Zi(e){return function(t){var n=vo(t);return n==E?sn(t):n==x?function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}(t):function(e,t){return Ot(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Xi(e,t,n,o,f,d,p,m){var v=2&t;if(!v&&"function"!=typeof e)throw new Ae(i);var g=o?o.length:0;if(g||(t&=-97,o=f=r),p=p===r?p:bn(vs(p),0),m=m===r?m:vs(m),g-=f?f.length:0,t&c){var y=o,b=f;o=f=r}var w=v?r:ao(e),_=[e,t,n,o,f,y,b,d,p,m];if(w&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,s=r==l&&8==n||r==l&&n==h&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!s)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?Ii(c,u,t[4]):u,e[4]=c?cn(e[3],a):t[4]}(u=t[5])&&(c=e[5],e[5]=c?xi(c,u,t[6]):u,e[6]=c?cn(e[5],a):t[6]);(u=t[7])&&(e[7]=u);r&l&&(e[8]=null==e[8]?t[8]:wn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(_,w),e=_[0],t=_[1],n=_[2],o=_[3],f=_[4],!(m=_[9]=_[9]===r?v?0:e.length:bn(_[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)k=8==t||t==s?function(e,t,n){var i=Bi(e);return function o(){for(var a=arguments.length,s=ae(a),u=a,c=uo(o);u--;)s[u]=arguments[u];var l=a<3&&s[0]!==c&&s[a-1]!==c?[]:cn(s,c);return(a-=l.length)<n?Yi(e,t,qi,o.placeholder,r,s,l,r,r,n-a):Et(this&&this!==ft&&this instanceof o?i:e,this,s)}}(e,t,m):t!=u&&33!=t||f.length?qi.apply(r,_):function(e,t,n,r){var i=1&t,o=Bi(e);return function t(){for(var a=-1,s=arguments.length,u=-1,c=r.length,l=ae(c+s),h=this&&this!==ft&&this instanceof t?o:e;++u<c;)l[u]=r[u];for(;s--;)l[u++]=arguments[++a];return Et(h,i?n:this,l)}}(e,t,n,o);else var k=function(e,t,n){var r=1&t,i=Bi(e);return function t(){return(this&&this!==ft&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return No((w?ti:Oo)(k,_),e,t)}function $i(e,t,n,i){return e===r||za(e,Re[n])&&!Le.call(i,n)?t:e}function eo(e,t,n,i,o,a){return ns(e)&&ns(t)&&(a.set(t,e),Vr(e,t,r,eo,a),a.delete(t)),e}function to(e){return as(e)?r:e}function no(e,t,n,i,o,a){var s=1&n,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var l=a.get(e),h=a.get(t);if(l&&h)return l==t&&h==e;var f=-1,d=!0,p=2&n?new Qn:r;for(a.set(e,t),a.set(t,e);++f<u;){var m=e[f],v=t[f];if(i)var g=s?i(v,m,f,t,e,a):i(m,v,f,e,t,a);if(g!==r){if(g)continue;d=!1;break}if(p){if(!Lt(t,(function(e,t){if(!Xt(p,t)&&(m===e||o(m,e,n,i,a)))return p.push(t)}))){d=!1;break}}else if(m!==v&&!o(m,v,n,i,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function ro(e){return Do(Io(e,r,Go),e+"")}function io(e){return Mr(e,Rs,po)}function oo(e){return Mr(e,Ds,mo)}var ao=Pn?function(e){return Pn.get(e)}:lu;function so(e){for(var t=e.name+"",n=On[t],r=Le.call(On,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function uo(e){return(Le.call(qn,"placeholder")?qn:e).placeholder}function co(){var e=qn.iteratee||au;return e=e===au?Lr:e,arguments.length?e(arguments[0],arguments[1]):e}function lo(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function ho(e){for(var t=Rs(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,To(i)]}return t}function fo(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return Nr(n)?n:r}var po=jt?function(e){return null==e?[]:(e=Ce(e),xt(jt(e),(function(t){return Qe.call(e,t)})))}:gu,mo=jt?function(e){for(var t=[];e;)Rt(t,po(e)),e=Ge(e);return t}:gu,vo=Tr;function go(e,t,n){for(var r=-1,i=(t=wi(t,e)).length,o=!1;++r<i;){var a=Fo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&ts(i)&&wo(a,i)&&(Ka(e)||Ha(e))}function yo(e){return"function"!=typeof e.constructor||Mo(e)?{}:zn(Ge(e))}function bo(e){return Ka(e)||Ha(e)||!!($e&&e&&e[$e])}function wo(e,t){var n=typeof e;return!!(t=null==t?d:t)&&("number"==n||"symbol"!=n&&be.test(e))&&e>-1&&e%1==0&&e<t}function _o(e,t,n){if(!ns(n))return!1;var r=typeof t;return!!("number"==r?Ya(n)&&wo(t,n.length):"string"==r&&t in n)&&za(n[t],e)}function ko(e,t){if(Ka(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ls(e))||(te.test(e)||!ee.test(e)||null!=t&&e in Ce(t))}function So(e){var t=so(e),n=qn[t];if("function"!=typeof n||!(t in Hn.prototype))return!1;if(e===n)return!0;var r=ao(n);return!!r&&e===r[0]}(Mn&&vo(new Mn(new ArrayBuffer(1)))!=D||Tn&&vo(new Tn)!=E||Cn&&vo(Cn.resolve())!=C||In&&vo(new In)!=x||xn&&vo(new xn)!=O)&&(vo=function(e){var t=Tr(e),n=t==T?e.constructor:r,i=n?Uo(n):"";if(i)switch(i){case Rn:return D;case Dn:return E;case Nn:return C;case Ln:return x;case jn:return O}return t});var Eo=De?$a:yu;function Mo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Re)}function To(e){return e==e&&!ns(e)}function Co(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==r||e in Ce(n)))}}function Io(e,t,n){return t=bn(t===r?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=bn(r.length-t,0),a=ae(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=ae(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),Et(e,this,s)}}function xo(e,t){return t.length<2?e:Er(e,ii(t,0,-1))}function Ao(e,t){for(var n=e.length,i=wn(t.length,n),o=Ai(e);i--;){var a=t[i];e[i]=wo(a,n)?o[a]:r}return e}function Po(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Oo=Lo(ti),Ro=pt||function(e,t){return ft.setTimeout(e,t)},Do=Lo(ni);function No(e,t,n){var r=t+"";return Do(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(se,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Tt(v,(function(n){var r="_."+n[0];t&n[1]&&!At(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ue);return t?t[1].split(ce):[]}(r),n)))}function Lo(e){var t=0,n=0;return function(){var i=_n(),o=16-(i-n);if(n=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function jo(e,t){var n=-1,i=e.length,o=i-1;for(t=t===r?i:t;++n<t;){var a=Qr(n,o),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Bo=function(e){var t=La(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ne,(function(e,n,r,i){t.push(r?i.replace(fe,"$1"):n||e)})),t}));function Fo(e){if("string"==typeof e||ls(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Uo(e){if(null!=e){try{return Ne.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function qo(e){if(e instanceof Hn)return e.clone();var t=new Wn(e.__wrapped__,e.__chain__);return t.__actions__=Ai(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var zo=Zr((function(e,t){return Qa(e)?fr(e,yr(t,1,Qa,!0)):[]})),Vo=Zr((function(e,t){var n=Xo(t);return Qa(n)&&(n=r),Qa(e)?fr(e,yr(t,1,Qa,!0),co(n,2)):[]})),Wo=Zr((function(e,t){var n=Xo(t);return Qa(n)&&(n=r),Qa(e)?fr(e,yr(t,1,Qa,!0),r,n):[]}));function Ho(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:vs(n);return i<0&&(i=bn(r+i,0)),Ft(e,co(t,3),i)}function Ko(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return n!==r&&(o=vs(n),o=n<0?bn(i+o,0):wn(o,i-1)),Ft(e,co(t,3),o,!0)}function Go(e){return(null==e?0:e.length)?yr(e,1):[]}function Yo(e){return e&&e.length?e[0]:r}var Qo=Zr((function(e){var t=Ot(e,yi);return t.length&&t[0]===e[0]?Ar(t):[]})),Jo=Zr((function(e){var t=Xo(e),n=Ot(e,yi);return t===Xo(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Ar(n,co(t,2)):[]})),Zo=Zr((function(e){var t=Xo(e),n=Ot(e,yi);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?Ar(n,r,t):[]}));function Xo(e){var t=null==e?0:e.length;return t?e[t-1]:r}var $o=Zr(ea);function ea(e,t){return e&&e.length&&t&&t.length?Gr(e,t):e}var ta=ro((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return Yr(e,Ot(t,(function(e){return wo(e,n)?+e:e})).sort(Ci)),r}));function na(e){return null==e?e:En.call(e)}var ra=Zr((function(e){return hi(yr(e,1,Qa,!0))})),ia=Zr((function(e){var t=Xo(e);return Qa(t)&&(t=r),hi(yr(e,1,Qa,!0),co(t,2))})),oa=Zr((function(e){var t=Xo(e);return t="function"==typeof t?t:r,hi(yr(e,1,Qa,!0),r,t)}));function aa(e){if(!e||!e.length)return[];var t=0;return e=xt(e,(function(e){if(Qa(e))return t=bn(e.length,t),!0})),Yt(t,(function(t){return Ot(e,Wt(t))}))}function sa(e,t){if(!e||!e.length)return[];var n=aa(e);return null==t?n:Ot(n,(function(e){return Et(t,r,e)}))}var ua=Zr((function(e,t){return Qa(e)?fr(e,t):[]})),ca=Zr((function(e){return vi(xt(e,Qa))})),la=Zr((function(e){var t=Xo(e);return Qa(t)&&(t=r),vi(xt(e,Qa),co(t,2))})),ha=Zr((function(e){var t=Xo(e);return t="function"==typeof t?t:r,vi(xt(e,Qa),r,t)})),fa=Zr(aa);var da=Zr((function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,sa(e,n)}));function pa(e){var t=qn(e);return t.__chain__=!0,t}function ma(e,t){return t(e)}var va=ro((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,o=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Hn&&wo(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:ma,args:[o],thisArg:r}),new Wn(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(o)}));var ga=Oi((function(e,t,n){Le.call(e,n)?++e[n]:ar(e,n,1)}));var ya=Fi(Ho),ba=Fi(Ko);function wa(e,t){return(Ka(e)?Tt:dr)(e,co(t,3))}function _a(e,t){return(Ka(e)?Ct:pr)(e,co(t,3))}var ka=Oi((function(e,t,n){Le.call(e,n)?e[n].push(t):ar(e,n,[t])}));var Sa=Zr((function(e,t,n){var r=-1,i="function"==typeof t,o=Ya(e)?ae(e.length):[];return dr(e,(function(e){o[++r]=i?Et(t,e,n):Pr(e,t,n)})),o})),Ea=Oi((function(e,t,n){ar(e,n,t)}));function Ma(e,t){return(Ka(e)?Ot:Ur)(e,co(t,3))}var Ta=Oi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Ca=Zr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&_o(e,t[0],t[1])?t=[]:n>2&&_o(t[0],t[1],t[2])&&(t=[t[0]]),Hr(e,yr(t,1),[])})),Ia=dt||function(){return ft.Date.now()};function xa(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Xi(e,l,r,r,r,r,t)}function Aa(e,t){var n;if("function"!=typeof t)throw new Ae(i);return e=vs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var Pa=Zr((function(e,t,n){var r=1;if(n.length){var i=cn(n,uo(Pa));r|=u}return Xi(e,r,t,n,i)})),Oa=Zr((function(e,t,n){var r=3;if(n.length){var i=cn(n,uo(Oa));r|=u}return Xi(t,r,e,n,i)}));function Ra(e,t,n){var o,a,s,u,c,l,h=0,f=!1,d=!1,p=!0;if("function"!=typeof e)throw new Ae(i);function m(t){var n=o,i=a;return o=a=r,h=t,u=e.apply(i,n)}function v(e){return h=e,c=Ro(y,t),f?m(e):u}function g(e){var n=e-l;return l===r||n>=t||n<0||d&&e-h>=s}function y(){var e=Ia();if(g(e))return b(e);c=Ro(y,function(e){var n=t-(e-l);return d?wn(n,s-(e-h)):n}(e))}function b(e){return c=r,p&&o?m(e):(o=a=r,u)}function w(){var e=Ia(),n=g(e);if(o=arguments,a=this,l=e,n){if(c===r)return v(l);if(d)return Si(c),c=Ro(y,t),m(l)}return c===r&&(c=Ro(y,t)),u}return t=ys(t)||0,ns(n)&&(f=!!n.leading,s=(d="maxWait"in n)?bn(ys(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),w.cancel=function(){c!==r&&Si(c),h=0,o=l=a=c=r},w.flush=function(){return c===r?u:b(Ia())},w}var Da=Zr((function(e,t){return hr(e,1,t)})),Na=Zr((function(e,t,n){return hr(e,ys(t)||0,n)}));function La(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ae(i);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(La.Cache||Yn),n}function ja(e){if("function"!=typeof e)throw new Ae(i);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}La.Cache=Yn;var Ba=_i((function(e,t){var n=(t=1==t.length&&Ka(t[0])?Ot(t[0],Jt(co())):Ot(yr(t,1),Jt(co()))).length;return Zr((function(r){for(var i=-1,o=wn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return Et(e,this,r)}))})),Fa=Zr((function(e,t){var n=cn(t,uo(Fa));return Xi(e,u,r,t,n)})),Ua=Zr((function(e,t){var n=cn(t,uo(Ua));return Xi(e,c,r,t,n)})),qa=ro((function(e,t){return Xi(e,h,r,r,r,t)}));function za(e,t){return e===t||e!=e&&t!=t}var Va=Gi(Cr),Wa=Gi((function(e,t){return e>=t})),Ha=Or(function(){return arguments}())?Or:function(e){return rs(e)&&Le.call(e,"callee")&&!Qe.call(e,"callee")},Ka=ae.isArray,Ga=yt?Jt(yt):function(e){return rs(e)&&Tr(e)==R};function Ya(e){return null!=e&&ts(e.length)&&!$a(e)}function Qa(e){return rs(e)&&Ya(e)}var Ja=Ht||yu,Za=bt?Jt(bt):function(e){return rs(e)&&Tr(e)==w};function Xa(e){if(!rs(e))return!1;var t=Tr(e);return t==_||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!as(e)}function $a(e){if(!ns(e))return!1;var t=Tr(e);return t==k||t==S||"[object AsyncFunction]"==t||"[object Proxy]"==t}function es(e){return"number"==typeof e&&e==vs(e)}function ts(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function ns(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function rs(e){return null!=e&&"object"==typeof e}var is=wt?Jt(wt):function(e){return rs(e)&&vo(e)==E};function os(e){return"number"==typeof e||rs(e)&&Tr(e)==M}function as(e){if(!rs(e)||Tr(e)!=T)return!1;var t=Ge(e);if(null===t)return!0;var n=Le.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ne.call(n)==Ue}var ss=_t?Jt(_t):function(e){return rs(e)&&Tr(e)==I};var us=kt?Jt(kt):function(e){return rs(e)&&vo(e)==x};function cs(e){return"string"==typeof e||!Ka(e)&&rs(e)&&Tr(e)==A}function ls(e){return"symbol"==typeof e||rs(e)&&Tr(e)==P}var hs=St?Jt(St):function(e){return rs(e)&&ts(e.length)&&!!ot[Tr(e)]};var fs=Gi(Fr),ds=Gi((function(e,t){return e<=t}));function ps(e){if(!e)return[];if(Ya(e))return cs(e)?fn(e):Ai(e);if(tt&&e[tt])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[tt]());var t=vo(e);return(t==E?sn:t==x?ln:zs)(e)}function ms(e){return e?(e=ys(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function vs(e){var t=ms(e),n=t%1;return t==t?n?t-n:t:0}function gs(e){return e?ur(vs(e),0,m):0}function ys(e){if("number"==typeof e)return e;if(ls(e))return p;if(ns(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ns(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Qt(e);var n=ve.test(e);return n||ye.test(e)?ct(e.slice(2),n?2:8):me.test(e)?p:+e}function bs(e){return Pi(e,Ds(e))}function ws(e){return null==e?"":li(e)}var _s=Ri((function(e,t){if(Mo(t)||Ya(t))Pi(t,Rs(t),e);else for(var n in t)Le.call(t,n)&&nr(e,n,t[n])})),ks=Ri((function(e,t){Pi(t,Ds(t),e)})),Ss=Ri((function(e,t,n,r){Pi(t,Ds(t),e,r)})),Es=Ri((function(e,t,n,r){Pi(t,Rs(t),e,r)})),Ms=ro(sr);var Ts=Zr((function(e,t){e=Ce(e);var n=-1,i=t.length,o=i>2?t[2]:r;for(o&&_o(t[0],t[1],o)&&(i=1);++n<i;)for(var a=t[n],s=Ds(a),u=-1,c=s.length;++u<c;){var l=s[u],h=e[l];(h===r||za(h,Re[l])&&!Le.call(e,l))&&(e[l]=a[l])}return e})),Cs=Zr((function(e){return e.push(r,eo),Et(Ls,r,e)}));function Is(e,t,n){var i=null==e?r:Er(e,t);return i===r?n:i}function xs(e,t){return null!=e&&go(e,t,xr)}var As=zi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=n}),nu(ou)),Ps=zi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),Le.call(e,t)?e[t].push(n):e[t]=[n]}),co),Os=Zr(Pr);function Rs(e){return Ya(e)?Zn(e):jr(e)}function Ds(e){return Ya(e)?Zn(e,!0):Br(e)}var Ns=Ri((function(e,t,n){Vr(e,t,n)})),Ls=Ri((function(e,t,n,r){Vr(e,t,n,r)})),js=ro((function(e,t){var n={};if(null==e)return n;var r=!1;t=Ot(t,(function(t){return t=wi(t,e),r||(r=t.length>1),t})),Pi(e,oo(e),n),r&&(n=cr(n,7,to));for(var i=t.length;i--;)fi(n,t[i]);return n}));var Bs=ro((function(e,t){return null==e?{}:function(e,t){return Kr(e,t,(function(t,n){return xs(e,n)}))}(e,t)}));function Fs(e,t){if(null==e)return{};var n=Ot(oo(e),(function(e){return[e]}));return t=co(t),Kr(e,n,(function(e,n){return t(e,n[0])}))}var Us=Zi(Rs),qs=Zi(Ds);function zs(e){return null==e?[]:Zt(e,Rs(e))}var Vs=ji((function(e,t,n){return t=t.toLowerCase(),e+(n?Ws(t):t)}));function Ws(e){return Xs(ws(e).toLowerCase())}function Hs(e){return(e=ws(e))&&e.replace(we,nn).replace(Xe,"")}var Ks=ji((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Gs=ji((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ys=Li("toLowerCase");var Qs=ji((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Js=ji((function(e,t,n){return e+(n?" ":"")+Xs(t)}));var Zs=ji((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Xs=Li("toUpperCase");function $s(e,t,n){return e=ws(e),(t=n?r:t)===r?function(e){return nt.test(e)}(e)?function(e){return e.match(et)||[]}(e):function(e){return e.match(le)||[]}(e):e.match(t)||[]}var eu=Zr((function(e,t){try{return Et(e,r,t)}catch(e){return Xa(e)?e:new Ee(e)}})),tu=ro((function(e,t){return Tt(t,(function(t){t=Fo(t),ar(e,t,Pa(e[t],e))})),e}));function nu(e){return function(){return e}}var ru=Ui(),iu=Ui(!0);function ou(e){return e}function au(e){return Lr("function"==typeof e?e:cr(e,1))}var su=Zr((function(e,t){return function(n){return Pr(n,e,t)}})),uu=Zr((function(e,t){return function(n){return Pr(e,n,t)}}));function cu(e,t,n){var r=Rs(t),i=Sr(t,r);null!=n||ns(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Sr(t,Rs(t)));var o=!(ns(n)&&"chain"in n&&!n.chain),a=$a(e);return Tt(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=Ai(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Rt([this.value()],arguments))})})),e}function lu(){}var hu=Wi(Ot),fu=Wi(It),du=Wi(Lt);function pu(e){return ko(e)?Wt(Fo(e)):function(e){return function(t){return Er(t,e)}}(e)}var mu=Ki(),vu=Ki(!0);function gu(){return[]}function yu(){return!1}var bu=Vi((function(e,t){return e+t}),0),wu=Qi("ceil"),_u=Vi((function(e,t){return e/t}),1),ku=Qi("floor");var Su,Eu=Vi((function(e,t){return e*t}),1),Mu=Qi("round"),Tu=Vi((function(e,t){return e-t}),0);return qn.after=function(e,t){if("function"!=typeof t)throw new Ae(i);return e=vs(e),function(){if(--e<1)return t.apply(this,arguments)}},qn.ary=xa,qn.assign=_s,qn.assignIn=ks,qn.assignInWith=Ss,qn.assignWith=Es,qn.at=Ms,qn.before=Aa,qn.bind=Pa,qn.bindAll=tu,qn.bindKey=Oa,qn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ka(e)?e:[e]},qn.chain=pa,qn.chunk=function(e,t,n){t=(n?_o(e,t,n):t===r)?1:bn(vs(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,a=0,s=ae(vt(i/t));o<i;)s[a++]=ii(e,o,o+=t);return s},qn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},qn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=ae(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Rt(Ka(n)?Ai(n):[n],yr(t,1))},qn.cond=function(e){var t=null==e?0:e.length,n=co();return e=t?Ot(e,(function(e){if("function"!=typeof e[1])throw new Ae(i);return[n(e[0]),e[1]]})):[],Zr((function(n){for(var r=-1;++r<t;){var i=e[r];if(Et(i[0],this,n))return Et(i[1],this,n)}}))},qn.conforms=function(e){return function(e){var t=Rs(e);return function(n){return lr(n,e,t)}}(cr(e,1))},qn.constant=nu,qn.countBy=ga,qn.create=function(e,t){var n=zn(e);return null==t?n:or(n,t)},qn.curry=function e(t,n,i){var o=Xi(t,8,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},qn.curryRight=function e(t,n,i){var o=Xi(t,s,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},qn.debounce=Ra,qn.defaults=Ts,qn.defaultsDeep=Cs,qn.defer=Da,qn.delay=Na,qn.difference=zo,qn.differenceBy=Vo,qn.differenceWith=Wo,qn.drop=function(e,t,n){var i=null==e?0:e.length;return i?ii(e,(t=n||t===r?1:vs(t))<0?0:t,i):[]},qn.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?ii(e,0,(t=i-(t=n||t===r?1:vs(t)))<0?0:t):[]},qn.dropRightWhile=function(e,t){return e&&e.length?pi(e,co(t,3),!0,!0):[]},qn.dropWhile=function(e,t){return e&&e.length?pi(e,co(t,3),!0):[]},qn.fill=function(e,t,n,i){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&_o(e,t,n)&&(n=0,i=o),function(e,t,n,i){var o=e.length;for((n=vs(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:vs(i))<0&&(i+=o),i=n>i?0:gs(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},qn.filter=function(e,t){return(Ka(e)?xt:gr)(e,co(t,3))},qn.flatMap=function(e,t){return yr(Ma(e,t),1)},qn.flatMapDeep=function(e,t){return yr(Ma(e,t),f)},qn.flatMapDepth=function(e,t,n){return n=n===r?1:vs(n),yr(Ma(e,t),n)},qn.flatten=Go,qn.flattenDeep=function(e){return(null==e?0:e.length)?yr(e,f):[]},qn.flattenDepth=function(e,t){return(null==e?0:e.length)?yr(e,t=t===r?1:vs(t)):[]},qn.flip=function(e){return Xi(e,512)},qn.flow=ru,qn.flowRight=iu,qn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},qn.functions=function(e){return null==e?[]:Sr(e,Rs(e))},qn.functionsIn=function(e){return null==e?[]:Sr(e,Ds(e))},qn.groupBy=ka,qn.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},qn.intersection=Qo,qn.intersectionBy=Jo,qn.intersectionWith=Zo,qn.invert=As,qn.invertBy=Ps,qn.invokeMap=Sa,qn.iteratee=au,qn.keyBy=Ea,qn.keys=Rs,qn.keysIn=Ds,qn.map=Ma,qn.mapKeys=function(e,t){var n={};return t=co(t,3),_r(e,(function(e,r,i){ar(n,t(e,r,i),e)})),n},qn.mapValues=function(e,t){var n={};return t=co(t,3),_r(e,(function(e,r,i){ar(n,r,t(e,r,i))})),n},qn.matches=function(e){return qr(cr(e,1))},qn.matchesProperty=function(e,t){return zr(e,cr(t,1))},qn.memoize=La,qn.merge=Ns,qn.mergeWith=Ls,qn.method=su,qn.methodOf=uu,qn.mixin=cu,qn.negate=ja,qn.nthArg=function(e){return e=vs(e),Zr((function(t){return Wr(t,e)}))},qn.omit=js,qn.omitBy=function(e,t){return Fs(e,ja(co(t)))},qn.once=function(e){return Aa(2,e)},qn.orderBy=function(e,t,n,i){return null==e?[]:(Ka(t)||(t=null==t?[]:[t]),Ka(n=i?r:n)||(n=null==n?[]:[n]),Hr(e,t,n))},qn.over=hu,qn.overArgs=Ba,qn.overEvery=fu,qn.overSome=du,qn.partial=Fa,qn.partialRight=Ua,qn.partition=Ta,qn.pick=Bs,qn.pickBy=Fs,qn.property=pu,qn.propertyOf=function(e){return function(t){return null==e?r:Er(e,t)}},qn.pull=$o,qn.pullAll=ea,qn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Gr(e,t,co(n,2)):e},qn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Gr(e,t,r,n):e},qn.pullAt=ta,qn.range=mu,qn.rangeRight=vu,qn.rearg=qa,qn.reject=function(e,t){return(Ka(e)?xt:gr)(e,ja(co(t,3)))},qn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=co(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Yr(e,i),n},qn.rest=function(e,t){if("function"!=typeof e)throw new Ae(i);return Zr(e,t=t===r?t:vs(t))},qn.reverse=na,qn.sampleSize=function(e,t,n){return t=(n?_o(e,t,n):t===r)?1:vs(t),(Ka(e)?$n:$r)(e,t)},qn.set=function(e,t,n){return null==e?e:ei(e,t,n)},qn.setWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:ei(e,t,n,i)},qn.shuffle=function(e){return(Ka(e)?er:ri)(e)},qn.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&_o(e,t,n)?(t=0,n=i):(t=null==t?0:vs(t),n=n===r?i:vs(n)),ii(e,t,n)):[]},qn.sortBy=Ca,qn.sortedUniq=function(e){return e&&e.length?ui(e):[]},qn.sortedUniqBy=function(e,t){return e&&e.length?ui(e,co(t,2)):[]},qn.split=function(e,t,n){return n&&"number"!=typeof n&&_o(e,t,n)&&(t=n=r),(n=n===r?m:n>>>0)?(e=ws(e))&&("string"==typeof t||null!=t&&!ss(t))&&!(t=li(t))&&an(e)?ki(fn(e),0,n):e.split(t,n):[]},qn.spread=function(e,t){if("function"!=typeof e)throw new Ae(i);return t=null==t?0:bn(vs(t),0),Zr((function(n){var r=n[t],i=ki(n,0,t);return r&&Rt(i,r),Et(e,this,i)}))},qn.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},qn.take=function(e,t,n){return e&&e.length?ii(e,0,(t=n||t===r?1:vs(t))<0?0:t):[]},qn.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?ii(e,(t=i-(t=n||t===r?1:vs(t)))<0?0:t,i):[]},qn.takeRightWhile=function(e,t){return e&&e.length?pi(e,co(t,3),!1,!0):[]},qn.takeWhile=function(e,t){return e&&e.length?pi(e,co(t,3)):[]},qn.tap=function(e,t){return t(e),e},qn.throttle=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new Ae(i);return ns(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Ra(e,t,{leading:r,maxWait:t,trailing:o})},qn.thru=ma,qn.toArray=ps,qn.toPairs=Us,qn.toPairsIn=qs,qn.toPath=function(e){return Ka(e)?Ot(e,Fo):ls(e)?[e]:Ai(Bo(ws(e)))},qn.toPlainObject=bs,qn.transform=function(e,t,n){var r=Ka(e),i=r||Ja(e)||hs(e);if(t=co(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ns(e)&&$a(o)?zn(Ge(e)):{}}return(i?Tt:_r)(e,(function(e,r,i){return t(n,e,r,i)})),n},qn.unary=function(e){return xa(e,1)},qn.union=ra,qn.unionBy=ia,qn.unionWith=oa,qn.uniq=function(e){return e&&e.length?hi(e):[]},qn.uniqBy=function(e,t){return e&&e.length?hi(e,co(t,2)):[]},qn.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?hi(e,r,t):[]},qn.unset=function(e,t){return null==e||fi(e,t)},qn.unzip=aa,qn.unzipWith=sa,qn.update=function(e,t,n){return null==e?e:di(e,t,bi(n))},qn.updateWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:di(e,t,bi(n),i)},qn.values=zs,qn.valuesIn=function(e){return null==e?[]:Zt(e,Ds(e))},qn.without=ua,qn.words=$s,qn.wrap=function(e,t){return Fa(bi(t),e)},qn.xor=ca,qn.xorBy=la,qn.xorWith=ha,qn.zip=fa,qn.zipObject=function(e,t){return gi(e||[],t||[],nr)},qn.zipObjectDeep=function(e,t){return gi(e||[],t||[],ei)},qn.zipWith=da,qn.entries=Us,qn.entriesIn=qs,qn.extend=ks,qn.extendWith=Ss,cu(qn,qn),qn.add=bu,qn.attempt=eu,qn.camelCase=Vs,qn.capitalize=Ws,qn.ceil=wu,qn.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=ys(n))==n?n:0),t!==r&&(t=(t=ys(t))==t?t:0),ur(ys(e),t,n)},qn.clone=function(e){return cr(e,4)},qn.cloneDeep=function(e){return cr(e,5)},qn.cloneDeepWith=function(e,t){return cr(e,5,t="function"==typeof t?t:r)},qn.cloneWith=function(e,t){return cr(e,4,t="function"==typeof t?t:r)},qn.conformsTo=function(e,t){return null==t||lr(e,t,Rs(t))},qn.deburr=Hs,qn.defaultTo=function(e,t){return null==e||e!=e?t:e},qn.divide=_u,qn.endsWith=function(e,t,n){e=ws(e),t=li(t);var i=e.length,o=n=n===r?i:ur(vs(n),0,i);return(n-=t.length)>=0&&e.slice(n,o)==t},qn.eq=za,qn.escape=function(e){return(e=ws(e))&&J.test(e)?e.replace(Y,rn):e},qn.escapeRegExp=function(e){return(e=ws(e))&&ie.test(e)?e.replace(re,"\\$&"):e},qn.every=function(e,t,n){var i=Ka(e)?It:mr;return n&&_o(e,t,n)&&(t=r),i(e,co(t,3))},qn.find=ya,qn.findIndex=Ho,qn.findKey=function(e,t){return Bt(e,co(t,3),_r)},qn.findLast=ba,qn.findLastIndex=Ko,qn.findLastKey=function(e,t){return Bt(e,co(t,3),kr)},qn.floor=ku,qn.forEach=wa,qn.forEachRight=_a,qn.forIn=function(e,t){return null==e?e:br(e,co(t,3),Ds)},qn.forInRight=function(e,t){return null==e?e:wr(e,co(t,3),Ds)},qn.forOwn=function(e,t){return e&&_r(e,co(t,3))},qn.forOwnRight=function(e,t){return e&&kr(e,co(t,3))},qn.get=Is,qn.gt=Va,qn.gte=Wa,qn.has=function(e,t){return null!=e&&go(e,t,Ir)},qn.hasIn=xs,qn.head=Yo,qn.identity=ou,qn.includes=function(e,t,n,r){e=Ya(e)?e:zs(e),n=n&&!r?vs(n):0;var i=e.length;return n<0&&(n=bn(i+n,0)),cs(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Ut(e,t,n)>-1},qn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:vs(n);return i<0&&(i=bn(r+i,0)),Ut(e,t,i)},qn.inRange=function(e,t,n){return t=ms(t),n===r?(n=t,t=0):n=ms(n),function(e,t,n){return e>=wn(t,n)&&e<bn(t,n)}(e=ys(e),t,n)},qn.invoke=Os,qn.isArguments=Ha,qn.isArray=Ka,qn.isArrayBuffer=Ga,qn.isArrayLike=Ya,qn.isArrayLikeObject=Qa,qn.isBoolean=function(e){return!0===e||!1===e||rs(e)&&Tr(e)==b},qn.isBuffer=Ja,qn.isDate=Za,qn.isElement=function(e){return rs(e)&&1===e.nodeType&&!as(e)},qn.isEmpty=function(e){if(null==e)return!0;if(Ya(e)&&(Ka(e)||"string"==typeof e||"function"==typeof e.splice||Ja(e)||hs(e)||Ha(e)))return!e.length;var t=vo(e);if(t==E||t==x)return!e.size;if(Mo(e))return!jr(e).length;for(var n in e)if(Le.call(e,n))return!1;return!0},qn.isEqual=function(e,t){return Rr(e,t)},qn.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:r)?n(e,t):r;return i===r?Rr(e,t,r,n):!!i},qn.isError=Xa,qn.isFinite=function(e){return"number"==typeof e&&vn(e)},qn.isFunction=$a,qn.isInteger=es,qn.isLength=ts,qn.isMap=is,qn.isMatch=function(e,t){return e===t||Dr(e,t,ho(t))},qn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,Dr(e,t,ho(t),n)},qn.isNaN=function(e){return os(e)&&e!=+e},qn.isNative=function(e){if(Eo(e))throw new Ee("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nr(e)},qn.isNil=function(e){return null==e},qn.isNull=function(e){return null===e},qn.isNumber=os,qn.isObject=ns,qn.isObjectLike=rs,qn.isPlainObject=as,qn.isRegExp=ss,qn.isSafeInteger=function(e){return es(e)&&e>=-9007199254740991&&e<=d},qn.isSet=us,qn.isString=cs,qn.isSymbol=ls,qn.isTypedArray=hs,qn.isUndefined=function(e){return e===r},qn.isWeakMap=function(e){return rs(e)&&vo(e)==O},qn.isWeakSet=function(e){return rs(e)&&"[object WeakSet]"==Tr(e)},qn.join=function(e,t){return null==e?"":gn.call(e,t)},qn.kebabCase=Ks,qn.last=Xo,qn.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=vs(n))<0?bn(i+o,0):wn(o,i-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Ft(e,zt,o,!0)},qn.lowerCase=Gs,qn.lowerFirst=Ys,qn.lt=fs,qn.lte=ds,qn.max=function(e){return e&&e.length?vr(e,ou,Cr):r},qn.maxBy=function(e,t){return e&&e.length?vr(e,co(t,2),Cr):r},qn.mean=function(e){return Vt(e,ou)},qn.meanBy=function(e,t){return Vt(e,co(t,2))},qn.min=function(e){return e&&e.length?vr(e,ou,Fr):r},qn.minBy=function(e,t){return e&&e.length?vr(e,co(t,2),Fr):r},qn.stubArray=gu,qn.stubFalse=yu,qn.stubObject=function(){return{}},qn.stubString=function(){return""},qn.stubTrue=function(){return!0},qn.multiply=Eu,qn.nth=function(e,t){return e&&e.length?Wr(e,vs(t)):r},qn.noConflict=function(){return ft._===this&&(ft._=qe),this},qn.noop=lu,qn.now=Ia,qn.pad=function(e,t,n){e=ws(e);var r=(t=vs(t))?hn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Hi(gt(i),n)+e+Hi(vt(i),n)},qn.padEnd=function(e,t,n){e=ws(e);var r=(t=vs(t))?hn(e):0;return t&&r<t?e+Hi(t-r,n):e},qn.padStart=function(e,t,n){e=ws(e);var r=(t=vs(t))?hn(e):0;return t&&r<t?Hi(t-r,n)+e:e},qn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),kn(ws(e).replace(oe,""),t||0)},qn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&_o(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=ms(e),t===r?(t=e,e=0):t=ms(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var o=Sn();return wn(e+o*(t-e+ut("1e-"+((o+"").length-1))),t)}return Qr(e,t)},qn.reduce=function(e,t,n){var r=Ka(e)?Dt:Kt,i=arguments.length<3;return r(e,co(t,4),n,i,dr)},qn.reduceRight=function(e,t,n){var r=Ka(e)?Nt:Kt,i=arguments.length<3;return r(e,co(t,4),n,i,pr)},qn.repeat=function(e,t,n){return t=(n?_o(e,t,n):t===r)?1:vs(t),Jr(ws(e),t)},qn.replace=function(){var e=arguments,t=ws(e[0]);return e.length<3?t:t.replace(e[1],e[2])},qn.result=function(e,t,n){var i=-1,o=(t=wi(t,e)).length;for(o||(o=1,e=r);++i<o;){var a=null==e?r:e[Fo(t[i])];a===r&&(i=o,a=n),e=$a(a)?a.call(e):a}return e},qn.round=Mu,qn.runInContext=e,qn.sample=function(e){return(Ka(e)?Xn:Xr)(e)},qn.size=function(e){if(null==e)return 0;if(Ya(e))return cs(e)?hn(e):e.length;var t=vo(e);return t==E||t==x?e.size:jr(e).length},qn.snakeCase=Qs,qn.some=function(e,t,n){var i=Ka(e)?Lt:oi;return n&&_o(e,t,n)&&(t=r),i(e,co(t,3))},qn.sortedIndex=function(e,t){return ai(e,t)},qn.sortedIndexBy=function(e,t,n){return si(e,t,co(n,2))},qn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ai(e,t);if(r<n&&za(e[r],t))return r}return-1},qn.sortedLastIndex=function(e,t){return ai(e,t,!0)},qn.sortedLastIndexBy=function(e,t,n){return si(e,t,co(n,2),!0)},qn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=ai(e,t,!0)-1;if(za(e[n],t))return n}return-1},qn.startCase=Js,qn.startsWith=function(e,t,n){return e=ws(e),n=null==n?0:ur(vs(n),0,e.length),t=li(t),e.slice(n,n+t.length)==t},qn.subtract=Tu,qn.sum=function(e){return e&&e.length?Gt(e,ou):0},qn.sumBy=function(e,t){return e&&e.length?Gt(e,co(t,2)):0},qn.template=function(e,t,n){var i=qn.templateSettings;n&&_o(e,t,n)&&(t=r),e=ws(e),t=Ss({},t,i,$i);var o,a,s=Ss({},t.imports,i.imports,$i),u=Rs(s),c=Zt(s,u),l=0,h=t.interpolate||_e,f="__p += '",d=Ie((t.escape||_e).source+"|"+h.source+"|"+(h===$?de:_e).source+"|"+(t.evaluate||_e).source+"|$","g"),p="//# sourceURL="+(Le.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++it+"]")+"\n";e.replace(d,(function(t,n,r,i,s,u){return r||(r=i),f+=e.slice(l,u).replace(ke,on),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),f+="';\n";var m=Le.call(t,"variable")&&t.variable;if(m){if(he.test(m))throw new Ee("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(a?f.replace(W,""):f).replace(H,"$1").replace(K,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=eu((function(){return Me(u,p+"return "+f).apply(r,c)}));if(v.source=f,Xa(v))throw v;return v},qn.times=function(e,t){if((e=vs(e))<1||e>d)return[];var n=m,r=wn(e,m);t=co(t),e-=m;for(var i=Yt(r,t);++n<e;)t(n);return i},qn.toFinite=ms,qn.toInteger=vs,qn.toLength=gs,qn.toLower=function(e){return ws(e).toLowerCase()},qn.toNumber=ys,qn.toSafeInteger=function(e){return e?ur(vs(e),-9007199254740991,d):0===e?e:0},qn.toString=ws,qn.toUpper=function(e){return ws(e).toUpperCase()},qn.trim=function(e,t,n){if((e=ws(e))&&(n||t===r))return Qt(e);if(!e||!(t=li(t)))return e;var i=fn(e),o=fn(t);return ki(i,$t(i,o),en(i,o)+1).join("")},qn.trimEnd=function(e,t,n){if((e=ws(e))&&(n||t===r))return e.slice(0,dn(e)+1);if(!e||!(t=li(t)))return e;var i=fn(e);return ki(i,0,en(i,fn(t))+1).join("")},qn.trimStart=function(e,t,n){if((e=ws(e))&&(n||t===r))return e.replace(oe,"");if(!e||!(t=li(t)))return e;var i=fn(e);return ki(i,$t(i,fn(t))).join("")},qn.truncate=function(e,t){var n=30,i="...";if(ns(t)){var o="separator"in t?t.separator:o;n="length"in t?vs(t.length):n,i="omission"in t?li(t.omission):i}var a=(e=ws(e)).length;if(an(e)){var s=fn(e);a=s.length}if(n>=a)return e;var u=n-hn(i);if(u<1)return i;var c=s?ki(s,0,u).join(""):e.slice(0,u);if(o===r)return c+i;if(s&&(u+=c.length-u),ss(o)){if(e.slice(u).search(o)){var l,h=c;for(o.global||(o=Ie(o.source,ws(pe.exec(o))+"g")),o.lastIndex=0;l=o.exec(h);)var f=l.index;c=c.slice(0,f===r?u:f)}}else if(e.indexOf(li(o),u)!=u){var d=c.lastIndexOf(o);d>-1&&(c=c.slice(0,d))}return c+i},qn.unescape=function(e){return(e=ws(e))&&Q.test(e)?e.replace(G,pn):e},qn.uniqueId=function(e){var t=++je;return ws(e)+t},qn.upperCase=Zs,qn.upperFirst=Xs,qn.each=wa,qn.eachRight=_a,qn.first=Yo,cu(qn,(Su={},_r(qn,(function(e,t){Le.call(qn.prototype,t)||(Su[t]=e)})),Su),{chain:!1}),qn.VERSION="4.17.21",Tt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){qn[e].placeholder=qn})),Tt(["drop","take"],(function(e,t){Hn.prototype[e]=function(n){n=n===r?1:bn(vs(n),0);var i=this.__filtered__&&!t?new Hn(this):this.clone();return i.__filtered__?i.__takeCount__=wn(n,i.__takeCount__):i.__views__.push({size:wn(n,m),type:e+(i.__dir__<0?"Right":"")}),i},Hn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Tt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Hn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:co(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Tt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Hn.prototype[e]=function(){return this[n](1).value()[0]}})),Tt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Hn.prototype[e]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(ou)},Hn.prototype.find=function(e){return this.filter(e).head()},Hn.prototype.findLast=function(e){return this.reverse().find(e)},Hn.prototype.invokeMap=Zr((function(e,t){return"function"==typeof e?new Hn(this):this.map((function(n){return Pr(n,e,t)}))})),Hn.prototype.reject=function(e){return this.filter(ja(co(e)))},Hn.prototype.slice=function(e,t){e=vs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Hn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=vs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Hn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Hn.prototype.toArray=function(){return this.take(m)},_r(Hn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=qn[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);o&&(qn.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,u=t instanceof Hn,c=s[0],l=u||Ka(t),h=function(e){var t=o.apply(qn,Rt([e],s));return i&&f?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,d=!!this.__actions__.length,p=a&&!f,m=u&&!d;if(!a&&l){t=m?t:new Hn(this);var v=e.apply(t,s);return v.__actions__.push({func:ma,args:[h],thisArg:r}),new Wn(v,f)}return p&&m?e.apply(this,s):(v=this.thru(h),p?i?v.value()[0]:v.value():v)})})),Tt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Pe[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);qn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ka(i)?i:[],e)}return this[n]((function(n){return t.apply(Ka(n)?n:[],e)}))}})),_r(Hn.prototype,(function(e,t){var n=qn[t];if(n){var r=n.name+"";Le.call(On,r)||(On[r]=[]),On[r].push({name:t,func:n})}})),On[qi(r,2).name]=[{name:"wrapper",func:r}],Hn.prototype.clone=function(){var e=new Hn(this.__wrapped__);return e.__actions__=Ai(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ai(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ai(this.__views__),e},Hn.prototype.reverse=function(){if(this.__filtered__){var e=new Hn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Hn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ka(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=wn(t,e+a);break;case"takeRight":e=bn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,h=l.length,f=0,d=wn(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return mi(e,this.__actions__);var p=[];e:for(;u--&&f<d;){for(var m=-1,v=e[c+=t];++m<h;){var g=l[m],y=g.iteratee,b=g.type,w=y(v);if(2==b)v=w;else if(!w){if(1==b)continue e;break e}}p[f++]=v}return p},qn.prototype.at=va,qn.prototype.chain=function(){return pa(this)},qn.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},qn.prototype.next=function(){this.__values__===r&&(this.__values__=ps(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},qn.prototype.plant=function(e){for(var t,n=this;n instanceof Vn;){var i=qo(n);i.__index__=0,i.__values__=r,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t},qn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Hn){var t=e;return this.__actions__.length&&(t=new Hn(this)),(t=t.reverse()).__actions__.push({func:ma,args:[na],thisArg:r}),new Wn(t,this.__chain__)}return this.thru(na)},qn.prototype.toJSON=qn.prototype.valueOf=qn.prototype.value=function(){return mi(this.__wrapped__,this.__actions__)},qn.prototype.first=qn.prototype.head,tt&&(qn.prototype[tt]=function(){return this}),qn}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ft._=mn,define((function(){return mn}))):pt?((pt.exports=mn)._=mn,dt._=mn):ft._=mn}).call(this)}));var Uq=o("PUf7U");const qq=a.createContext(null),zq=a.createContext(null),Vq=a.createContext(null),Wq=a.createContext(null),Hq=a.createContext(null);var Kq=()=>{const[t,n]=function(e,t){const[n,r]=a.useReducer(e,t),i=e=>{(e=>"function"==typeof e)(e)?e(i):r(e)};return[n,i]}(os,is);a.useEffect((()=>{var t;t=t=>{if(t)if(t.shouldVerifyEmail){const e=t.id,r=t.providerId;n(sn(e,e,r,!0))}else{const t=ws(),r=t.id,i=t.providerId;(async function(){const e=await mr("isRegistered");return{registeredUsername:e.registered,spaceIsClosed:e.spaceIsClosed,isMod:e.isMod,isBanned:e.isBanned}})().then((async({registeredUsername:o,spaceIsClosed:a,isMod:s,isBanned:u})=>{if(!o){const e=t.email?r:t.displayName;return void n(sn(r,e,i,!1))}if(n(sn(r,o,i,!1)),u)return n(Kt({id:r,username:o,isBanned:u})),void n(un());if(a&&(n({type:Bt.SpaceIsClosed}),!s))return void n(un());const c=await Yr.getMessages();var l,h;c&&n((l=c.messages,h=c.whispers,{type:Bt.LoadMessageArchive,messages:l,whispers:h}));const f=await Yr.getUseSimpleNames();n(nn(f));const d=await Yr.getKeepCameraWhenMoving();n(rn(d));const p=await Yr.getTextOnlyMode();n(on(p,!1));const m=await Yr.getCaptionsEnabled();function v(){const e=document.getElementById("main");if(e){const r=Math.floor(e.clientWidth/180)-1;n((t=r,{type:Bt.SetNumberOfFaces,value:t}))}else console.warn("Attempted to call onResize when 'main' element was null; will default to show no faces");var t}n(an(m)),n(un()),or(r,n),ar(n),window.addEventListener("resize",(()=>{})),setTimeout(v,2e3),window.addEventListener("resize",e(Uq).throttle(v,100,{trailing:!0}))}))}else n(sn(void 0,void 0,void 0,void 0))},er.auth().onAuthStateChanged((e=>{const n=ks(e);t(n)}))}),[]);const r=window.outerWidth<500,i=t.visibleProfile?e(a).createElement(cs,{user:t.visibleProfile,whispers:t.whispers}):"";if(ws()&&ws().isSignInWithEmailLink(window.location.href))return e(a).createElement(VL,null);if(!t.checkedAuthentication)return e(a).createElement("div",null);if(t.checkedAuthentication&&t.mustVerifyEmail)return e(a).createElement(zL,{userEmail:ws().email,dispatch:n});if(t.checkedAuthentication&&!t.authenticated)return e(a).createElement(SL,null);if(!t.hasRegistered)return e(a).createElement(bs,{isFTUE:!0,defaultHandle:t.userMap[t.userId].username,user:t.profileData,prepopulateTwitterWithDefaultHandle:"twitter"===t.authenticationProvider});if(t.isClosed&&!t.userMap[t.userId].isMod)return e(a).createElement(ML,null);if(t.isBanned)return e(a).createElement(TL,null);let o,s,u;t.roomData&&t.roomId&&t.roomData[t.roomId]&&!t.roomData[t.roomId].noMediaChat&&(o=e(a).createElement(gs,{visibleSpeakers:t.visibleSpeakers,currentSpeaker:t.currentSpeaker,numberOfFaces:t.numberOfFaces,inMediaChat:t.inMediaChat,textOnlyMode:t.textOnlyMode,audioOnlyMode:t.audioOnlyMode}));let c=!1;switch(t.activeModal){case fn.ProfileEdit:s=e(a).createElement(bs,{isFTUE:!1,defaultHandle:t.userMap[t.userId].username,user:t.profileData});break;case fn.NoteWall:{const n=t.roomData[t.roomId];s=e(a).createElement(Ns,{notes:n.notes,noteWallData:n.noteWallData,user:t.profileData,serverSettings:t.serverSettings});break}case fn.Settings:s=e(a).createElement(Bs,{keepCameraWhenMoving:t.keepCameraWhenMoving,captionsEnabled:t.captionsEnabled});break;case fn.MediaSelector:console.log("Opening media selector"),s=e(a).createElement(Fs,{showJoinButton:!t.inMediaChat||t.activeModalOptions.showJoinButton,hideVideo:t.activeModalOptions.hideVideo,userIsSpeaking:!1,roomId:t.roomId,keepCameraWhenMoving:t.keepCameraWhenMoving});break;case fn.CodeOfConduct:s=e(a).createElement(Us,null);break;case fn.Schedule:s=e(a).createElement(Ws,null);break;case fn.Map:c=!0,s=e(a).createElement(Ks,{roomData:t.roomData,currentRoomId:t.roomId});break;case fn.RoomList:s=e(a).createElement(CL,{rooms:Object.values(t.roomData)});break;case fn.Help:s=e(a).createElement(Hs,null);break;case fn.Welcome:s=e(a).createElement(EL,null);break;case fn.ServerSettings:s=e(a).createElement(xL,{serverSettings:t.serverSettings,roomData:t.roomData});break;case fn.ClientDeployed:s=e(a).createElement(AL,null);break;case fn.HappeningNow:s=e(a).createElement(OL,{roomData:t.roomData,entries:t.serverSettings.happeningNowEntries});break;case fn.FeatureRainbowGate:s=e(a).createElement(Jr,null);break;case fn.FeatureDullDoor:s=e(a).createElement(Xr,null);break;case fn.FeatureFullRoomIndex:s=e(a).createElement(ei,{rooms:Object.values(t.roomData)});break;case fn.Riddles:{const n=t.roomData[t.roomId];s=e(a).createElement(WL,{riddles:n.riddles});break}}s&&(u=e(a).createElement(Ls,{fullScreen:c},s));const l=!r||t.mobileSideMenuIsVisible;return e(a).createElement(yr.Provider,{value:{style:{verticalAlign:"middle"}}},e(a).createElement(qq.Provider,{value:n},e(a).createElement(Fq,{active:!t.textOnlyMode},e(a).createElement(Wq.Provider,{value:r},e(a).createElement(Vq.Provider,{value:{useSimpleNames:t.useSimpleNames}},e(a).createElement(zq.Provider,{value:{userMap:t.userMap,myId:t.userId}},e(a).createElement(Hq.Provider,{value:t.roomData},e(a).createElement("div",{id:t.visibleProfile&&!r?"app-profile-open":"app"},l?e(a).createElement("span",null,e(a).createElement(As,{roomData:t.roomData,currentRoomId:t.roomId,username:t.userMap[t.userId].username,spaceIsClosed:t.isClosed}),e(a).createElement("div",{id:"side-nav-placeholder"})):e(a).createElement("button",{id:"show-menu",onClick:()=>{n({type:Bt.ShowSideMenu})}},e(a).createElement("span",{role:"img","aria-label":"menu"},"🍔")),u,e(a).createElement("div",{id:"main",role:"main"},t.roomData[t.roomId]?e(a).createElement(qo,{room:t.roomData[t.roomId],userId:t.userId,roomData:t.roomData,inMediaChat:t.inMediaChat,keepCameraWhenMoving:t.keepCameraWhenMoving,textOnlyMode:t.textOnlyMode,mediaChatView:o,hasDismissedAModal:t.hasDismissedAModal}):null,e(a).createElement(Za,{messages:t.messages,autoscrollChat:t.autoscrollChat,serverSettings:t.serverSettings,captionsEnabled:t.captionsEnabled}),e(a).createElement($a,{prepopulated:t.prepopulatedInput,sendMessage:e=>n(Xt(e))})),i))))))))};Yr=o("2lxET");window.addEventListener("DOMContentLoaded",(async()=>{s.render(a.createElement(Kq,null),document.getElementById("root")),document.body.classList.add(await Yr.currentTheme())}))}();
//# sourceMappingURL=index.cb2be4f4.js.map
